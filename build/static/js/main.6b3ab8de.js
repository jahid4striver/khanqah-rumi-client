/*! For license information please see main.6b3ab8de.js.LICENSE.txt */
(function(){var __webpack_modules__={724:function(){},945:function(e,t,n){e.exports=function(){"use strict";var e="undefined"!=typeof window?window:"undefined"!=typeof n.g?n.g:"undefined"!=typeof self?self:{},t="Expected a function",r=NaN,i="[object Symbol]",a=/^\s+|\s+$/g,s=/^[-+]0x[0-9a-f]+$/i,o=/^0b[01]+$/i,c=/^0o[0-7]+$/i,u=parseInt,l="object"==typeof e&&e&&e.Object===Object&&e,d="object"==typeof self&&self&&self.Object===Object&&self,h=l||d||Function("return this")(),f=Object.prototype.toString,p=Math.max,v=Math.min,m=function(){return h.Date.now()};function g(e,n,r){var i,a,s,o,c,u,l=0,d=!1,h=!1,f=!0;if("function"!=typeof e)throw new TypeError(t);function g(t){var n=i,r=a;return i=a=void 0,l=t,o=e.apply(r,n)}function k(e){var t=e-u;return void 0===u||t>=n||t<0||h&&e-l>=s}function x(){var e=m();if(k(e))return w(e);c=setTimeout(x,function(e){var t=n-(e-u);return h?v(t,s-(e-l)):t}(e))}function w(e){return c=void 0,f&&i?g(e):(i=a=void 0,o)}function T(){var e=m(),t=k(e);if(i=arguments,a=this,u=e,t){if(void 0===c)return function(e){return l=e,c=setTimeout(x,n),d?g(e):o}(u);if(h)return c=setTimeout(x,n),g(u)}return void 0===c&&(c=setTimeout(x,n)),o}return n=b(n)||0,y(r)&&(d=!!r.leading,s=(h="maxWait"in r)?p(b(r.maxWait)||0,n):s,f="trailing"in r?!!r.trailing:f),T.cancel=function(){void 0!==c&&clearTimeout(c),l=0,i=u=a=c=void 0},T.flush=function(){return void 0===c?o:w(m())},T}function y(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function b(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&f.call(e)==i}(e))return r;if(y(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=y(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(a,"");var n=o.test(e);return n||c.test(e)?u(e.slice(2),n?2:8):s.test(e)?r:+e}var k=function(e,n,r){var i=!0,a=!0;if("function"!=typeof e)throw new TypeError(t);return y(r)&&(i="leading"in r?!!r.leading:i,a="trailing"in r?!!r.trailing:a),g(e,n,{leading:i,maxWait:n,trailing:a})},x="Expected a function",w=NaN,T="[object Symbol]",E=/^\s+|\s+$/g,_=/^[-+]0x[0-9a-f]+$/i,S=/^0b[01]+$/i,A=/^0o[0-7]+$/i,C=parseInt,I="object"==typeof e&&e&&e.Object===Object&&e,R="object"==typeof self&&self&&self.Object===Object&&self,P=I||R||Function("return this")(),D=Object.prototype.toString,N=Math.max,O=Math.min,L=function(){return P.Date.now()};function M(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function j(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&D.call(e)==T}(e))return w;if(M(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=M(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(E,"");var n=S.test(e);return n||A.test(e)?C(e.slice(2),n?2:8):_.test(e)?w:+e}var F=function(e,t,n){var r,i,a,s,o,c,u=0,l=!1,d=!1,h=!0;if("function"!=typeof e)throw new TypeError(x);function f(t){var n=r,a=i;return r=i=void 0,u=t,s=e.apply(a,n)}function p(e){var n=e-c;return void 0===c||n>=t||n<0||d&&e-u>=a}function v(){var e=L();if(p(e))return m(e);o=setTimeout(v,function(e){var n=t-(e-c);return d?O(n,a-(e-u)):n}(e))}function m(e){return o=void 0,h&&r?f(e):(r=i=void 0,s)}function g(){var e=L(),n=p(e);if(r=arguments,i=this,c=e,n){if(void 0===o)return function(e){return u=e,o=setTimeout(v,t),l?f(e):s}(c);if(d)return o=setTimeout(v,t),f(c)}return void 0===o&&(o=setTimeout(v,t)),s}return t=j(t)||0,M(n)&&(l=!!n.leading,a=(d="maxWait"in n)?N(j(n.maxWait)||0,t):a,h="trailing"in n?!!n.trailing:h),g.cancel=function(){void 0!==o&&clearTimeout(o),u=0,r=c=i=o=void 0},g.flush=function(){return void 0===o?s:m(L())},g},U=function(){};function B(e){e&&e.forEach((function(e){var t=Array.prototype.slice.call(e.addedNodes),n=Array.prototype.slice.call(e.removedNodes);if(function e(t){var n=void 0,r=void 0;for(n=0;n<t.length;n+=1){if((r=t[n]).dataset&&r.dataset.aos)return!0;if(r.children&&e(r.children))return!0}return!1}(t.concat(n)))return U()}))}function G(){return window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver}var V={isSupported:function(){return!!G()},ready:function(e,t){var n=window.document,r=new(G())(B);U=t,r.observe(n.documentElement,{childList:!0,subtree:!0,removedNodes:!0})}},H=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},z=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),W=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},K=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i,q=/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i,Y=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i,J=/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i;function Q(){return navigator.userAgent||navigator.vendor||window.opera||""}var X=new(function(){function e(){H(this,e)}return z(e,[{key:"phone",value:function(){var e=Q();return!(!K.test(e)&&!q.test(e.substr(0,4)))}},{key:"mobile",value:function(){var e=Q();return!(!Y.test(e)&&!J.test(e.substr(0,4)))}},{key:"tablet",value:function(){return this.mobile()&&!this.phone()}},{key:"ie11",value:function(){return"-ms-scroll-limit"in document.documentElement.style&&"-ms-ime-align"in document.documentElement.style}}]),e}()),Z=function(e,t){var n=void 0;return X.ie11()?(n=document.createEvent("CustomEvent")).initCustomEvent(e,!0,!0,{detail:t}):n=new CustomEvent(e,{detail:t}),document.dispatchEvent(n)},$=function(e){return e.forEach((function(e,t){return function(e,t){var n=e.options,r=e.position,i=e.node,a=(e.data,function(){e.animated&&(function(e,t){t&&t.forEach((function(t){return e.classList.remove(t)}))}(i,n.animatedClassNames),Z("aos:out",i),e.options.id&&Z("aos:in:"+e.options.id,i),e.animated=!1)});n.mirror&&t>=r.out&&!n.once?a():t>=r.in?e.animated||(function(e,t){t&&t.forEach((function(t){return e.classList.add(t)}))}(i,n.animatedClassNames),Z("aos:in",i),e.options.id&&Z("aos:in:"+e.options.id,i),e.animated=!0):e.animated&&!n.once&&a()}(e,window.pageYOffset)}))},ee=function(e){for(var t=0,n=0;e&&!isNaN(e.offsetLeft)&&!isNaN(e.offsetTop);)t+=e.offsetLeft-("BODY"!=e.tagName?e.scrollLeft:0),n+=e.offsetTop-("BODY"!=e.tagName?e.scrollTop:0),e=e.offsetParent;return{top:n,left:t}},te=function(e,t,n){var r=e.getAttribute("data-aos-"+t);if(void 0!==r){if("true"===r)return!0;if("false"===r)return!1}return r||n},ne=function(e,t){return e.forEach((function(e,n){var r=te(e.node,"mirror",t.mirror),i=te(e.node,"once",t.once),a=te(e.node,"id"),s=t.useClassNames&&e.node.getAttribute("data-aos"),o=[t.animatedClassName].concat(s?s.split(" "):[]).filter((function(e){return"string"==typeof e}));t.initClassName&&e.node.classList.add(t.initClassName),e.position={in:function(e,t,n){var r=window.innerHeight,i=te(e,"anchor"),a=te(e,"anchor-placement"),s=Number(te(e,"offset",a?0:t)),o=a||n,c=e;i&&document.querySelectorAll(i)&&(c=document.querySelectorAll(i)[0]);var u=ee(c).top-r;switch(o){case"top-bottom":break;case"center-bottom":u+=c.offsetHeight/2;break;case"bottom-bottom":u+=c.offsetHeight;break;case"top-center":u+=r/2;break;case"center-center":u+=r/2+c.offsetHeight/2;break;case"bottom-center":u+=r/2+c.offsetHeight;break;case"top-top":u+=r;break;case"bottom-top":u+=r+c.offsetHeight;break;case"center-top":u+=r+c.offsetHeight/2}return u+s}(e.node,t.offset,t.anchorPlacement),out:r&&function(e,t){window.innerHeight;var n=te(e,"anchor"),r=te(e,"offset",t),i=e;return n&&document.querySelectorAll(n)&&(i=document.querySelectorAll(n)[0]),ee(i).top+i.offsetHeight-r}(e.node,t.offset)},e.options={once:i,mirror:r,animatedClassNames:o,id:a}})),e},re=function(){var e=document.querySelectorAll("[data-aos]");return Array.prototype.map.call(e,(function(e){return{node:e}}))},ie=[],ae=!1,se={offset:120,delay:0,easing:"ease",duration:400,disable:!1,once:!1,mirror:!1,anchorPlacement:"top-bottom",startEvent:"DOMContentLoaded",animatedClassName:"aos-animate",initClassName:"aos-init",useClassNames:!1,disableMutationObserver:!1,throttleDelay:99,debounceDelay:50},oe=function(){return document.all&&!window.atob},ce=function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0]&&(ae=!0),ae&&(ie=ne(ie,se),$(ie),window.addEventListener("scroll",k((function(){$(ie,se.once)}),se.throttleDelay)))},ue=function(){if(ie=re(),de(se.disable)||oe())return le();ce()},le=function(){ie.forEach((function(e,t){e.node.removeAttribute("data-aos"),e.node.removeAttribute("data-aos-easing"),e.node.removeAttribute("data-aos-duration"),e.node.removeAttribute("data-aos-delay"),se.initClassName&&e.node.classList.remove(se.initClassName),se.animatedClassName&&e.node.classList.remove(se.animatedClassName)}))},de=function(e){return!0===e||"mobile"===e&&X.mobile()||"phone"===e&&X.phone()||"tablet"===e&&X.tablet()||"function"==typeof e&&!0===e()};return{init:function(e){return se=W(se,e),ie=re(),se.disableMutationObserver||V.isSupported()||(console.info('\n      aos: MutationObserver is not supported on this browser,\n      code mutations observing has been disabled.\n      You may have to call "refreshHard()" by yourself.\n    '),se.disableMutationObserver=!0),se.disableMutationObserver||V.ready("[data-aos]",ue),de(se.disable)||oe()?le():(document.querySelector("body").setAttribute("data-aos-easing",se.easing),document.querySelector("body").setAttribute("data-aos-duration",se.duration),document.querySelector("body").setAttribute("data-aos-delay",se.delay),-1===["DOMContentLoaded","load"].indexOf(se.startEvent)?document.addEventListener(se.startEvent,(function(){ce(!0)})):window.addEventListener("load",(function(){ce(!0)})),"DOMContentLoaded"===se.startEvent&&["complete","interactive"].indexOf(document.readyState)>-1&&ce(!0),window.addEventListener("resize",F(ce,se.debounceDelay,!0)),window.addEventListener("orientationchange",F(ce,se.debounceDelay,!0)),ie)},refresh:ce,refreshHard:ue}}()},371:function(e,t,n){var r;!function(i){var a=Object.hasOwnProperty,s=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)},o="object"==typeof process&&"function"==typeof process.nextTick,c="function"===typeof Symbol,u="object"===typeof Reflect,l="function"===typeof setImmediate?setImmediate:setTimeout,d=c?u&&"function"===typeof Reflect.ownKeys?Reflect.ownKeys:function(e){var t=Object.getOwnPropertyNames(e);return t.push.apply(t,Object.getOwnPropertySymbols(e)),t}:Object.keys;function h(){this._events={},this._conf&&f.call(this,this._conf)}function f(e){e&&(this._conf=e,e.delimiter&&(this.delimiter=e.delimiter),e.maxListeners!==i&&(this._maxListeners=e.maxListeners),e.wildcard&&(this.wildcard=e.wildcard),e.newListener&&(this._newListener=e.newListener),e.removeListener&&(this._removeListener=e.removeListener),e.verboseMemoryLeak&&(this.verboseMemoryLeak=e.verboseMemoryLeak),e.ignoreErrors&&(this.ignoreErrors=e.ignoreErrors),this.wildcard&&(this.listenerTree={}))}function p(e,t){var n="(node) warning: possible EventEmitter memory leak detected. "+e+" listeners added. Use emitter.setMaxListeners() to increase limit.";if(this.verboseMemoryLeak&&(n+=" Event name: "+t+"."),"undefined"!==typeof process&&process.emitWarning){var r=new Error(n);r.name="MaxListenersExceededWarning",r.emitter=this,r.count=e,process.emitWarning(r)}else console.error(n),console.trace&&console.trace()}var v=function(e,t,n){var r=arguments.length;switch(r){case 0:return[];case 1:return[e];case 2:return[e,t];case 3:return[e,t,n];default:for(var i=new Array(r);r--;)i[r]=arguments[r];return i}};function m(e,t){for(var n={},r=e.length,a=t?t.length:0,s=0;s<r;s++)n[e[s]]=s<a?t[s]:i;return n}function g(e,t,n){var r,i;if(this._emitter=e,this._target=t,this._listeners={},this._listenersCount=0,(n.on||n.off)&&(r=n.on,i=n.off),t.addEventListener?(r=t.addEventListener,i=t.removeEventListener):t.addListener?(r=t.addListener,i=t.removeListener):t.on&&(r=t.on,i=t.off),!r&&!i)throw Error("target does not implement any known event API");if("function"!==typeof r)throw TypeError("on method must be a function");if("function"!==typeof i)throw TypeError("off method must be a function");this._on=r,this._off=i;var a=e._observers;a?a.push(this):e._observers=[this]}function y(e,t,n,r){var s=Object.assign({},t);if(!e)return s;if("object"!==typeof e)throw TypeError("options must be an object");var o,c,u,l=Object.keys(e),d=l.length;function h(e){throw Error('Invalid "'+o+'" option value'+(e?". Reason: "+e:""))}for(var f=0;f<d;f++){if(o=l[f],!r&&!a.call(t,o))throw Error('Unknown "'+o+'" option');(c=e[o])!==i&&(u=n[o],s[o]=u?u(c,h):c)}return s}function b(e,t){return"function"===typeof e&&e.hasOwnProperty("prototype")||t("value must be a constructor"),e}function k(e){var t="value must be type of "+e.join("|"),n=e.length,r=e[0],i=e[1];return 1===n?function(e,n){if(typeof e===r)return e;n(t)}:2===n?function(e,n){var a=typeof e;if(a===r||a===i)return e;n(t)}:function(r,i){for(var a=typeof r,s=n;s-- >0;)if(a===e[s])return r;i(t)}}Object.assign(g.prototype,{subscribe:function(e,t,n){var r=this,i=this._target,a=this._emitter,s=this._listeners,o=function(){var r=v.apply(null,arguments),s={data:r,name:t,original:e};if(n){var o=n.call(i,s);!1!==o&&a.emit.apply(a,[s.name].concat(r))}else a.emit.apply(a,[t].concat(r))};if(s[e])throw Error("Event '"+e+"' is already listening");this._listenersCount++,a._newListener&&a._removeListener&&!r._onNewListener?(this._onNewListener=function(n){n===t&&null===s[e]&&(s[e]=o,r._on.call(i,e,o))},a.on("newListener",this._onNewListener),this._onRemoveListener=function(n){n===t&&!a.hasListeners(n)&&s[e]&&(s[e]=null,r._off.call(i,e,o))},s[e]=null,a.on("removeListener",this._onRemoveListener)):(s[e]=o,r._on.call(i,e,o))},unsubscribe:function(e){var t,n,r,i=this,a=this._listeners,s=this._emitter,o=this._off,c=this._target;if(e&&"string"!==typeof e)throw TypeError("event must be a string");function u(){i._onNewListener&&(s.off("newListener",i._onNewListener),s.off("removeListener",i._onRemoveListener),i._onNewListener=null,i._onRemoveListener=null);var e=E.call(s,i);s._observers.splice(e,1)}if(e){if(!(t=a[e]))return;o.call(c,e,t),delete a[e],--this._listenersCount||u()}else{for(r=(n=d(a)).length;r-- >0;)e=n[r],o.call(c,e,a[e]);this._listeners={},this._listenersCount=0,u()}}});var x=k(["function"]),w=k(["object","function"]);function T(e,t,n){var r,i,a,s=0,o=new e((function(c,u,l){function d(){i&&(i=null),s&&(clearTimeout(s),s=0)}n=y(n,{timeout:0,overload:!1},{timeout:function(e,t){return("number"!==typeof(e*=1)||e<0||!Number.isFinite(e))&&t("timeout must be a positive number"),e}}),r=!n.overload&&"function"===typeof e.prototype.cancel&&"function"===typeof l;var h=function(e){d(),c(e)},f=function(e){d(),u(e)};r?t(h,f,l):(i=[function(e){f(e||Error("canceled"))}],t(h,f,(function(e){if(a)throw Error("Unable to subscribe on cancel event asynchronously");if("function"!==typeof e)throw TypeError("onCancel callback must be a function");i.push(e)})),a=!0),n.timeout>0&&(s=setTimeout((function(){var e=Error("timeout");e.code="ETIMEDOUT",s=0,o.cancel(e),u(e)}),n.timeout))}));return r||(o.cancel=function(e){if(i){for(var t=i.length,n=1;n<t;n++)i[n](e);i[0](e),i=null}}),o}function E(e){var t=this._observers;if(!t)return-1;for(var n=t.length,r=0;r<n;r++)if(t[r]._target===e)return r;return-1}function _(e,t,n,r,i){if(!n)return null;if(0===r){var a=typeof t;if("string"===a){var s,o,c=0,u=0,l=this.delimiter,h=l.length;if(-1!==(o=t.indexOf(l))){s=new Array(5);do{s[c++]=t.slice(u,o),u=o+h}while(-1!==(o=t.indexOf(l,u)));s[c++]=t.slice(u),t=s,i=c}else t=[t],i=1}else"object"===a?i=t.length:(t=[t],i=1)}var f,p,v,m,g,y,b,k=null,x=t[r],w=t[r+1];if(r===i)n._listeners&&("function"===typeof n._listeners?(e&&e.push(n._listeners),k=[n]):(e&&e.push.apply(e,n._listeners),k=[n]));else{if("*"===x){for(o=(y=d(n)).length;o-- >0;)"_listeners"!==(f=y[o])&&(b=_(e,t,n[f],r+1,i))&&(k?k.push.apply(k,b):k=b);return k}if("**"===x){for((g=r+1===i||r+2===i&&"*"===w)&&n._listeners&&(k=_(e,t,n,i,i)),o=(y=d(n)).length;o-- >0;)"_listeners"!==(f=y[o])&&("*"===f||"**"===f?(n[f]._listeners&&!g&&(b=_(e,t,n[f],i,i))&&(k?k.push.apply(k,b):k=b),b=_(e,t,n[f],r,i)):b=_(e,t,n[f],f===w?r+2:r,i),b&&(k?k.push.apply(k,b):k=b));return k}n[x]&&(k=_(e,t,n[x],r+1,i))}if((p=n["*"])&&_(e,t,p,r+1,i),v=n["**"])if(r<i)for(v._listeners&&_(e,t,v,i,i),o=(y=d(v)).length;o-- >0;)"_listeners"!==(f=y[o])&&(f===w?_(e,t,v[f],r+2,i):f===x?_(e,t,v[f],r+1,i):((m={})[f]=v[f],_(e,t,{"**":m},r+1,i)));else v._listeners?_(e,t,v,i,i):v["*"]&&v["*"]._listeners&&_(e,t,v["*"],i,i);return k}function S(e,t,n){var r,i,a=0,s=0,o=this.delimiter,c=o.length;if("string"===typeof e)if(-1!==(r=e.indexOf(o))){i=new Array(5);do{i[a++]=e.slice(s,r),s=r+c}while(-1!==(r=e.indexOf(o,s)));i[a++]=e.slice(s)}else i=[e],a=1;else i=e,a=e.length;if(a>1)for(r=0;r+1<a;r++)if("**"===i[r]&&"**"===i[r+1])return;var u,l=this.listenerTree;for(r=0;r<a;r++)if(l=l[u=i[r]]||(l[u]={}),r===a-1)return l._listeners?("function"===typeof l._listeners&&(l._listeners=[l._listeners]),n?l._listeners.unshift(t):l._listeners.push(t),!l._listeners.warned&&this._maxListeners>0&&l._listeners.length>this._maxListeners&&(l._listeners.warned=!0,p.call(this,l._listeners.length,u))):l._listeners=t,!0;return!0}function A(e,t,n,r){for(var i,a,s,o,c=d(e),u=c.length,l=e._listeners;u-- >0;)i=e[a=c[u]],s="_listeners"===a?n:n?n.concat(a):[a],o=r||"symbol"===typeof a,l&&t.push(o?s:s.join(this.delimiter)),"object"===typeof i&&A.call(this,i,t,s,o);return t}function C(e){for(var t,n,r,i=d(e),a=i.length;a-- >0;)(t=e[n=i[a]])&&(r=!0,"_listeners"===n||C(t)||delete e[n]);return r}function I(e,t,n){this.emitter=e,this.event=t,this.listener=n}function R(e,t,n){if(!0===n)a=!0;else if(!1===n)r=!0;else{if(!n||"object"!==typeof n)throw TypeError("options should be an object or true");var r=n.async,a=n.promisify,s=n.nextTick,c=n.objectify}if(r||s||a){var u=t,d=t._origin||t;if(s&&!o)throw Error("process.nextTick is not supported");a===i&&(a="AsyncFunction"===t.constructor.name),t=function(){var e=arguments,t=this,n=this.event;return a?s?Promise.resolve():new Promise((function(e){l(e)})).then((function(){return t.event=n,u.apply(t,e)})):(s?process.nextTick:l)((function(){t.event=n,u.apply(t,e)}))},t._async=!0,t._origin=d}return[t,c?new I(this,e,t):this]}function P(e){this._events={},this._newListener=!1,this._removeListener=!1,this.verboseMemoryLeak=!1,f.call(this,e)}I.prototype.off=function(){return this.emitter.off(this.event,this.listener),this},P.EventEmitter2=P,P.prototype.listenTo=function(e,t,n){if("object"!==typeof e)throw TypeError("target musts be an object");var r=this;function a(t){if("object"!==typeof t)throw TypeError("events must be an object");var i,a=n.reducers,s=E.call(r,e);i=-1===s?new g(r,e,n):r._observers[s];for(var o,c=d(t),u=c.length,l="function"===typeof a,h=0;h<u;h++)o=c[h],i.subscribe(o,t[o]||o,l?a:a&&a[o])}return n=y(n,{on:i,off:i,reducers:i},{on:x,off:x,reducers:w}),s(t)?a(m(t)):a("string"===typeof t?m(t.split(/\s+/)):t),this},P.prototype.stopListeningTo=function(e,t){var n=this._observers;if(!n)return!1;var r,i=n.length,a=!1;if(e&&"object"!==typeof e)throw TypeError("target should be an object");for(;i-- >0;)r=n[i],e&&r._target!==e||(r.unsubscribe(t),a=!0);return a},P.prototype.delimiter=".",P.prototype.setMaxListeners=function(e){e!==i&&(this._maxListeners=e,this._conf||(this._conf={}),this._conf.maxListeners=e)},P.prototype.getMaxListeners=function(){return this._maxListeners},P.prototype.event="",P.prototype.once=function(e,t,n){return this._once(e,t,!1,n)},P.prototype.prependOnceListener=function(e,t,n){return this._once(e,t,!0,n)},P.prototype._once=function(e,t,n,r){return this._many(e,1,t,n,r)},P.prototype.many=function(e,t,n,r){return this._many(e,t,n,!1,r)},P.prototype.prependMany=function(e,t,n,r){return this._many(e,t,n,!0,r)},P.prototype._many=function(e,t,n,r,i){var a=this;if("function"!==typeof n)throw new Error("many only accepts instances of Function");function s(){return 0===--t&&a.off(e,s),n.apply(this,arguments)}return s._origin=n,this._on(e,s,r,i)},P.prototype.emit=function(){if(!this._events&&!this._all)return!1;this._events||h.call(this);var e,t,n,r,i,a,s=arguments[0],o=this.wildcard;if("newListener"===s&&!this._newListener&&!this._events.newListener)return!1;if(o&&(e=s,"newListener"!==s&&"removeListener"!==s&&"object"===typeof s)){if(n=s.length,c)for(r=0;r<n;r++)if("symbol"===typeof s[r]){a=!0;break}a||(s=s.join(this.delimiter))}var u,l=arguments.length;if(this._all&&this._all.length)for(r=0,n=(u=this._all.slice()).length;r<n;r++)switch(this.event=s,l){case 1:u[r].call(this,s);break;case 2:u[r].call(this,s,arguments[1]);break;case 3:u[r].call(this,s,arguments[1],arguments[2]);break;default:u[r].apply(this,arguments)}if(o)u=[],_.call(this,u,e,this.listenerTree,0,n);else{if("function"===typeof(u=this._events[s])){switch(this.event=s,l){case 1:u.call(this);break;case 2:u.call(this,arguments[1]);break;case 3:u.call(this,arguments[1],arguments[2]);break;default:for(t=new Array(l-1),i=1;i<l;i++)t[i-1]=arguments[i];u.apply(this,t)}return!0}u&&(u=u.slice())}if(u&&u.length){if(l>3)for(t=new Array(l-1),i=1;i<l;i++)t[i-1]=arguments[i];for(r=0,n=u.length;r<n;r++)switch(this.event=s,l){case 1:u[r].call(this);break;case 2:u[r].call(this,arguments[1]);break;case 3:u[r].call(this,arguments[1],arguments[2]);break;default:u[r].apply(this,t)}return!0}if(!this.ignoreErrors&&!this._all&&"error"===s)throw arguments[1]instanceof Error?arguments[1]:new Error("Uncaught, unspecified 'error' event.");return!!this._all},P.prototype.emitAsync=function(){if(!this._events&&!this._all)return!1;this._events||h.call(this);var e,t,n,r,i,a,s=arguments[0],o=this.wildcard;if("newListener"===s&&!this._newListener&&!this._events.newListener)return Promise.resolve([!1]);if(o&&(e=s,"newListener"!==s&&"removeListener"!==s&&"object"===typeof s)){if(r=s.length,c)for(i=0;i<r;i++)if("symbol"===typeof s[i]){t=!0;break}t||(s=s.join(this.delimiter))}var u,l=[],d=arguments.length;if(this._all)for(i=0,r=this._all.length;i<r;i++)switch(this.event=s,d){case 1:l.push(this._all[i].call(this,s));break;case 2:l.push(this._all[i].call(this,s,arguments[1]));break;case 3:l.push(this._all[i].call(this,s,arguments[1],arguments[2]));break;default:l.push(this._all[i].apply(this,arguments))}if(o?(u=[],_.call(this,u,e,this.listenerTree,0)):u=this._events[s],"function"===typeof u)switch(this.event=s,d){case 1:l.push(u.call(this));break;case 2:l.push(u.call(this,arguments[1]));break;case 3:l.push(u.call(this,arguments[1],arguments[2]));break;default:for(n=new Array(d-1),a=1;a<d;a++)n[a-1]=arguments[a];l.push(u.apply(this,n))}else if(u&&u.length){if(u=u.slice(),d>3)for(n=new Array(d-1),a=1;a<d;a++)n[a-1]=arguments[a];for(i=0,r=u.length;i<r;i++)switch(this.event=s,d){case 1:l.push(u[i].call(this));break;case 2:l.push(u[i].call(this,arguments[1]));break;case 3:l.push(u[i].call(this,arguments[1],arguments[2]));break;default:l.push(u[i].apply(this,n))}}else if(!this.ignoreErrors&&!this._all&&"error"===s)return arguments[1]instanceof Error?Promise.reject(arguments[1]):Promise.reject("Uncaught, unspecified 'error' event.");return Promise.all(l)},P.prototype.on=function(e,t,n){return this._on(e,t,!1,n)},P.prototype.prependListener=function(e,t,n){return this._on(e,t,!0,n)},P.prototype.onAny=function(e){return this._onAny(e,!1)},P.prototype.prependAny=function(e){return this._onAny(e,!0)},P.prototype.addListener=P.prototype.on,P.prototype._onAny=function(e,t){if("function"!==typeof e)throw new Error("onAny only accepts instances of Function");return this._all||(this._all=[]),t?this._all.unshift(e):this._all.push(e),this},P.prototype._on=function(e,t,n,r){if("function"===typeof e)return this._onAny(e,t),this;if("function"!==typeof t)throw new Error("on only accepts instances of Function");this._events||h.call(this);var a,s=this;return r!==i&&(t=(a=R.call(this,e,t,r))[0],s=a[1]),this._newListener&&this.emit("newListener",e,t),this.wildcard?(S.call(this,e,t,n),s):(this._events[e]?("function"===typeof this._events[e]&&(this._events[e]=[this._events[e]]),n?this._events[e].unshift(t):this._events[e].push(t),!this._events[e].warned&&this._maxListeners>0&&this._events[e].length>this._maxListeners&&(this._events[e].warned=!0,p.call(this,this._events[e].length,e))):this._events[e]=t,s)},P.prototype.off=function(e,t){if("function"!==typeof t)throw new Error("removeListener only takes instances of Function");var n,r=[];if(this.wildcard){var i="string"===typeof e?e.split(this.delimiter):e.slice();if(!(r=_.call(this,null,i,this.listenerTree,0)))return this}else{if(!this._events[e])return this;n=this._events[e],r.push({_listeners:n})}for(var a=0;a<r.length;a++){var o=r[a];if(n=o._listeners,s(n)){for(var c=-1,u=0,l=n.length;u<l;u++)if(n[u]===t||n[u].listener&&n[u].listener===t||n[u]._origin&&n[u]._origin===t){c=u;break}if(c<0)continue;return this.wildcard?o._listeners.splice(c,1):this._events[e].splice(c,1),0===n.length&&(this.wildcard?delete o._listeners:delete this._events[e]),this._removeListener&&this.emit("removeListener",e,t),this}(n===t||n.listener&&n.listener===t||n._origin&&n._origin===t)&&(this.wildcard?delete o._listeners:delete this._events[e],this._removeListener&&this.emit("removeListener",e,t))}return this.listenerTree&&C(this.listenerTree),this},P.prototype.offAny=function(e){var t,n=0,r=0;if(e&&this._all&&this._all.length>0){for(n=0,r=(t=this._all).length;n<r;n++)if(e===t[n])return t.splice(n,1),this._removeListener&&this.emit("removeListenerAny",e),this}else{if(t=this._all,this._removeListener)for(n=0,r=t.length;n<r;n++)this.emit("removeListenerAny",t[n]);this._all=[]}return this},P.prototype.removeListener=P.prototype.off,P.prototype.removeAllListeners=function(e){if(e===i)return!this._events||h.call(this),this;if(this.wildcard){var t,n=_.call(this,null,e,this.listenerTree,0);if(!n)return this;for(t=0;t<n.length;t++)n[t]._listeners=null;this.listenerTree&&C(this.listenerTree)}else this._events&&(this._events[e]=null);return this},P.prototype.listeners=function(e){var t,n,r,a,s,o=this._events;if(e===i){if(this.wildcard)throw Error("event name required for wildcard emitter");if(!o)return[];for(a=(t=d(o)).length,r=[];a-- >0;)"function"===typeof(n=o[t[a]])?r.push(n):r.push.apply(r,n);return r}if(this.wildcard){if(!(s=this.listenerTree))return[];var c=[],u="string"===typeof e?e.split(this.delimiter):e.slice();return _.call(this,c,u,s,0),c}return o&&(n=o[e])?"function"===typeof n?[n]:n:[]},P.prototype.eventNames=function(e){var t=this._events;return this.wildcard?A.call(this,this.listenerTree,[],null,e):t?d(t):[]},P.prototype.listenerCount=function(e){return this.listeners(e).length},P.prototype.hasListeners=function(e){if(this.wildcard){var t=[],n="string"===typeof e?e.split(this.delimiter):e.slice();return _.call(this,t,n,this.listenerTree,0),t.length>0}var r=this._events,a=this._all;return!!(a&&a.length||r&&(e===i?d(r).length:r[e]))},P.prototype.listenersAny=function(){return this._all?this._all:[]},P.prototype.waitFor=function(e,t){var n=this,r=typeof t;return"number"===r?t={timeout:t}:"function"===r&&(t={filter:t}),T((t=y(t,{timeout:0,filter:i,handleError:!1,Promise:Promise,overload:!1},{filter:x,Promise:b})).Promise,(function(r,i,a){function s(){var a=t.filter;if(!a||a.apply(n,arguments))if(n.off(e,s),t.handleError){var o=arguments[0];o?i(o):r(v.apply(null,arguments).slice(1))}else r(v.apply(null,arguments))}a((function(){n.off(e,s)})),n._on(e,s,!1)}),{timeout:t.timeout,overload:t.overload})};var D=P.prototype;Object.defineProperties(P,{defaultMaxListeners:{get:function(){return D._maxListeners},set:function(e){if("number"!==typeof e||e<0||Number.isNaN(e))throw TypeError("n must be a non-negative number");D._maxListeners=e},enumerable:!0},once:{value:function(e,t,n){return T((n=y(n,{Promise:Promise,timeout:0,overload:!1},{Promise:b})).Promise,(function(n,r,i){var a;if("function"===typeof e.addEventListener)return a=function(){n(v.apply(null,arguments))},i((function(){e.removeEventListener(t,a)})),void e.addEventListener(t,a,{once:!0});var s,o=function(){s&&e.removeListener("error",s),n(v.apply(null,arguments))};"error"!==t&&(s=function(n){e.removeListener(t,o),r(n)},e.once("error",s)),i((function(){s&&e.removeListener("error",s),e.removeListener(t,o)})),e.once(t,o)}),{timeout:n.timeout,overload:n.overload})},writable:!0,configurable:!0}}),Object.defineProperties(D,{_maxListeners:{value:10,writable:!0,configurable:!0},_observers:{value:null,writable:!0,configurable:!0}}),(r=function(){return P}.call(t,n,t,e))===i||(e.exports=r)}()},843:function(e){var t;"undefined"!==typeof window&&(t=function(){return function(){var e={"./src/config.ts":function(e,t,n){"use strict";n.r(t),n.d(t,{enableStreamingMode:function(){return _},hlsDefaultConfig:function(){return T},mergeConfig:function(){return E}});var r=n("./src/controller/abr-controller.ts"),i=n("./src/controller/audio-stream-controller.ts"),a=n("./src/controller/audio-track-controller.ts"),s=n("./src/controller/subtitle-stream-controller.ts"),o=n("./src/controller/subtitle-track-controller.ts"),c=n("./src/controller/buffer-controller.ts"),u=n("./src/controller/timeline-controller.ts"),l=n("./src/controller/cap-level-controller.ts"),d=n("./src/controller/fps-controller.ts"),h=n("./src/controller/eme-controller.ts"),f=n("./src/controller/cmcd-controller.ts"),p=n("./src/utils/xhr-loader.ts"),v=n("./src/utils/fetch-loader.ts"),m=n("./src/utils/cues.ts"),g=n("./src/utils/mediakeys-helper.ts"),y=n("./src/utils/logger.ts");function b(){return b=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},b.apply(this,arguments)}function k(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function x(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?k(Object(n),!0).forEach((function(t){w(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):k(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function w(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var T=x(x({autoStartLoad:!0,startPosition:-1,defaultAudioCodec:void 0,debug:!1,capLevelOnFPSDrop:!1,capLevelToPlayerSize:!1,ignoreDevicePixelRatio:!1,initialLiveManifestSize:1,maxBufferLength:30,backBufferLength:1/0,maxBufferSize:6e7,maxBufferHole:.1,highBufferWatchdogPeriod:2,nudgeOffset:.1,nudgeMaxRetry:3,maxFragLookUpTolerance:.25,liveSyncDurationCount:3,liveMaxLatencyDurationCount:1/0,liveSyncDuration:void 0,liveMaxLatencyDuration:void 0,maxLiveSyncPlaybackRate:1,liveDurationInfinity:!1,liveBackBufferLength:null,maxMaxBufferLength:600,enableWorker:!0,enableSoftwareAES:!0,manifestLoadingTimeOut:1e4,manifestLoadingMaxRetry:1,manifestLoadingRetryDelay:1e3,manifestLoadingMaxRetryTimeout:64e3,startLevel:void 0,levelLoadingTimeOut:1e4,levelLoadingMaxRetry:4,levelLoadingRetryDelay:1e3,levelLoadingMaxRetryTimeout:64e3,fragLoadingTimeOut:2e4,fragLoadingMaxRetry:6,fragLoadingRetryDelay:1e3,fragLoadingMaxRetryTimeout:64e3,startFragPrefetch:!1,fpsDroppedMonitoringPeriod:5e3,fpsDroppedMonitoringThreshold:.2,appendErrorMaxRetry:3,loader:p.default,fLoader:void 0,pLoader:void 0,xhrSetup:void 0,licenseXhrSetup:void 0,licenseResponseCallback:void 0,abrController:r.default,bufferController:c.default,capLevelController:l.default,fpsController:d.default,stretchShortVideoTrack:!1,maxAudioFramesDrift:1,forceKeyFrameOnDiscontinuity:!0,abrEwmaFastLive:3,abrEwmaSlowLive:9,abrEwmaFastVoD:3,abrEwmaSlowVoD:9,abrEwmaDefaultEstimate:5e5,abrBandWidthFactor:.95,abrBandWidthUpFactor:.7,abrMaxWithRealBitrate:!1,maxStarvationDelay:4,maxLoadingDelay:4,minAutoBitrate:0,emeEnabled:!1,widevineLicenseUrl:void 0,drmSystemOptions:{},requestMediaKeySystemAccessFunc:g.requestMediaKeySystemAccess,testBandwidth:!0,progressive:!1,lowLatencyMode:!0,cmcd:void 0,enableDateRangeMetadataCues:!0,enableEmsgMetadataCues:!0,enableID3MetadataCues:!0},{cueHandler:m.default,enableWebVTT:!0,enableIMSC1:!0,enableCEA708Captions:!0,captionsTextTrack1Label:"English",captionsTextTrack1LanguageCode:"en",captionsTextTrack2Label:"Spanish",captionsTextTrack2LanguageCode:"es",captionsTextTrack3Label:"Unknown CC",captionsTextTrack3LanguageCode:"",captionsTextTrack4Label:"Unknown CC",captionsTextTrack4LanguageCode:"",renderTextTracksNatively:!0}),{},{subtitleStreamController:s.SubtitleStreamController,subtitleTrackController:o.default,timelineController:u.TimelineController,audioStreamController:i.default,audioTrackController:a.default,emeController:h.default,cmcdController:f.default});function E(e,t){if((t.liveSyncDurationCount||t.liveMaxLatencyDurationCount)&&(t.liveSyncDuration||t.liveMaxLatencyDuration))throw new Error("Illegal hls.js config: don't mix up liveSyncDurationCount/liveMaxLatencyDurationCount and liveSyncDuration/liveMaxLatencyDuration");if(void 0!==t.liveMaxLatencyDurationCount&&(void 0===t.liveSyncDurationCount||t.liveMaxLatencyDurationCount<=t.liveSyncDurationCount))throw new Error('Illegal hls.js config: "liveMaxLatencyDurationCount" must be greater than "liveSyncDurationCount"');if(void 0!==t.liveMaxLatencyDuration&&(void 0===t.liveSyncDuration||t.liveMaxLatencyDuration<=t.liveSyncDuration))throw new Error('Illegal hls.js config: "liveMaxLatencyDuration" must be greater than "liveSyncDuration"');return b({},e,t)}function _(e){var t=e.loader;t!==v.default&&t!==p.default?(y.logger.log("[config]: Custom loader detected, cannot enable progressive streaming"),e.progressive=!1):(0,v.fetchSupported)()&&(e.loader=v.default,e.progressive=!0,e.enableSoftwareAES=!0,y.logger.log("[config]: Progressive streaming enabled, using FetchLoader"))}},"./src/controller/abr-controller.ts":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return l}});var r=n("./src/polyfills/number.ts"),i=n("./src/utils/ewma-bandwidth-estimator.ts"),a=n("./src/events.ts"),s=n("./src/errors.ts"),o=n("./src/types/loader.ts"),c=n("./src/utils/logger.ts");function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var l=function(){function e(e){this.hls=void 0,this.lastLoadedFragLevel=0,this._nextAutoLevel=-1,this.timer=void 0,this.onCheck=this._abandonRulesCheck.bind(this),this.fragCurrent=null,this.partCurrent=null,this.bitrateTestDelay=0,this.bwEstimator=void 0,this.hls=e;var t=e.config;this.bwEstimator=new i.default(t.abrEwmaSlowVoD,t.abrEwmaFastVoD,t.abrEwmaDefaultEstimate),this.registerListeners()}var t,n,l,d=e.prototype;return d.registerListeners=function(){var e=this.hls;e.on(a.Events.FRAG_LOADING,this.onFragLoading,this),e.on(a.Events.FRAG_LOADED,this.onFragLoaded,this),e.on(a.Events.FRAG_BUFFERED,this.onFragBuffered,this),e.on(a.Events.LEVEL_LOADED,this.onLevelLoaded,this),e.on(a.Events.ERROR,this.onError,this)},d.unregisterListeners=function(){var e=this.hls;e.off(a.Events.FRAG_LOADING,this.onFragLoading,this),e.off(a.Events.FRAG_LOADED,this.onFragLoaded,this),e.off(a.Events.FRAG_BUFFERED,this.onFragBuffered,this),e.off(a.Events.LEVEL_LOADED,this.onLevelLoaded,this),e.off(a.Events.ERROR,this.onError,this)},d.destroy=function(){this.unregisterListeners(),this.clearTimer(),this.hls=this.onCheck=null,this.fragCurrent=this.partCurrent=null},d.onFragLoading=function(e,t){var n,r=t.frag;r.type===o.PlaylistLevelType.MAIN&&(this.timer||(this.fragCurrent=r,this.partCurrent=null!=(n=t.part)?n:null,this.timer=self.setInterval(this.onCheck,100)))},d.onLevelLoaded=function(e,t){var n=this.hls.config;t.details.live?this.bwEstimator.update(n.abrEwmaSlowLive,n.abrEwmaFastLive):this.bwEstimator.update(n.abrEwmaSlowVoD,n.abrEwmaFastVoD)},d._abandonRulesCheck=function(){var e=this.fragCurrent,t=this.partCurrent,n=this.hls,i=n.autoLevelEnabled,s=(n.config,n.media);if(e&&s){var o=t?t.stats:e.stats,u=t?t.duration:e.duration;if(o.aborted||o.loaded&&o.loaded===o.total||0===e.level)return this.clearTimer(),void(this._nextAutoLevel=-1);if(i&&!s.paused&&s.playbackRate&&s.readyState){var l=n.mainForwardBufferInfo;if(null!==l){var d=performance.now()-o.loading.start,h=Math.abs(s.playbackRate);if(!(d<=500*u/h)){var f=o.loaded&&o.loading.first,p=this.bwEstimator.getEstimate(),v=n.levels,m=n.minAutoLevel,g=v[e.level],y=o.total||Math.max(o.loaded,Math.round(u*g.maxBitrate/8)),b=f?1e3*o.loaded/d:0,k=b?(y-o.loaded)/b:8*y/p,x=l.len/h;if(!(k<=x)){var w,T=Number.POSITIVE_INFINITY;for(w=e.level-1;w>m;w--){var E=v[w].maxBitrate;if((T=b?u*E/(6.4*b):u*E/p)<x)break}T>=k||(c.logger.warn("Fragment "+e.sn+(t?" part "+t.index:"")+" of level "+e.level+" is loading too slowly and will cause an underbuffer; aborting and switching to level "+w+"\n      Current BW estimate: "+((0,r.isFiniteNumber)(p)?(p/1024).toFixed(3):"Unknown")+" Kb/s\n      Estimated load time for current fragment: "+k.toFixed(3)+" s\n      Estimated load time for the next fragment: "+T.toFixed(3)+" s\n      Time to underbuffer: "+x.toFixed(3)+" s"),n.nextLoadLevel=w,f&&this.bwEstimator.sample(d,o.loaded),this.clearTimer(),e.loader&&(this.fragCurrent=this.partCurrent=null,e.loader.abort()),n.trigger(a.Events.FRAG_LOAD_EMERGENCY_ABORTED,{frag:e,part:t,stats:o}))}}}}}},d.onFragLoaded=function(e,t){var n=t.frag,i=t.part;if(n.type===o.PlaylistLevelType.MAIN&&(0,r.isFiniteNumber)(n.sn)){var s=i?i.stats:n.stats,c=i?i.duration:n.duration;if(this.clearTimer(),this.lastLoadedFragLevel=n.level,this._nextAutoLevel=-1,this.hls.config.abrMaxWithRealBitrate){var u=this.hls.levels[n.level],l=(u.loaded?u.loaded.bytes:0)+s.loaded,d=(u.loaded?u.loaded.duration:0)+c;u.loaded={bytes:l,duration:d},u.realBitrate=Math.round(8*l/d)}if(n.bitrateTest){var h={stats:s,frag:n,part:i,id:n.type};this.onFragBuffered(a.Events.FRAG_BUFFERED,h)}}},d.onFragBuffered=function(e,t){var n=t.frag,r=t.part,i=r?r.stats:n.stats;if(!i.aborted&&n.type===o.PlaylistLevelType.MAIN&&"initSegment"!==n.sn){var a=i.parsing.end-i.loading.start;this.bwEstimator.sample(a,i.loaded),i.bwEstimate=this.bwEstimator.getEstimate(),n.bitrateTest?this.bitrateTestDelay=a/1e3:this.bitrateTestDelay=0}},d.onError=function(e,t){switch(t.details){case s.ErrorDetails.FRAG_LOAD_ERROR:case s.ErrorDetails.FRAG_LOAD_TIMEOUT:this.clearTimer()}},d.clearTimer=function(){self.clearInterval(this.timer),this.timer=void 0},d.getNextABRAutoLevel=function(){var e=this.fragCurrent,t=this.partCurrent,n=this.hls,r=n.maxAutoLevel,i=n.config,a=n.minAutoLevel,s=n.media,o=t?t.duration:e?e.duration:0,u=(s&&s.currentTime,s&&0!==s.playbackRate?Math.abs(s.playbackRate):1),l=this.bwEstimator?this.bwEstimator.getEstimate():i.abrEwmaDefaultEstimate,d=n.mainForwardBufferInfo,h=(d?d.len:0)/u,f=this.findBestLevel(l,a,r,h,i.abrBandWidthFactor,i.abrBandWidthUpFactor);if(f>=0)return f;c.logger.trace((h?"rebuffering expected":"buffer is empty")+", finding optimal quality level");var p=o?Math.min(o,i.maxStarvationDelay):i.maxStarvationDelay,v=i.abrBandWidthFactor,m=i.abrBandWidthUpFactor;if(!h){var g=this.bitrateTestDelay;g&&(p=(o?Math.min(o,i.maxLoadingDelay):i.maxLoadingDelay)-g,c.logger.trace("bitrate test took "+Math.round(1e3*g)+"ms, set first fragment max fetchDuration to "+Math.round(1e3*p)+" ms"),v=m=1)}return f=this.findBestLevel(l,a,r,h+p,v,m),Math.max(f,0)},d.findBestLevel=function(e,t,n,i,a,s){for(var o,u=this.fragCurrent,l=this.partCurrent,d=this.lastLoadedFragLevel,h=this.hls.levels,f=h[d],p=!(null===f||void 0===f||null===(o=f.details)||void 0===o||!o.live),v=null===f||void 0===f?void 0:f.codecSet,m=l?l.duration:u?u.duration:0,g=n;g>=t;g--){var y=h[g];if(y&&(!v||y.codecSet===v)){var b=y.details,k=(l?null===b||void 0===b?void 0:b.partTarget:null===b||void 0===b?void 0:b.averagetargetduration)||m,x=void 0;x=g<=d?a*e:s*e;var w=h[g].maxBitrate,T=w*k/x;if(c.logger.trace("level/adjustedbw/bitrate/avgDuration/maxFetchDuration/fetchDuration: "+g+"/"+Math.round(x)+"/"+w+"/"+k+"/"+i+"/"+T),x>w&&(0===T||!(0,r.isFiniteNumber)(T)||p&&!this.bitrateTestDelay||T<i))return g}}return-1},t=e,(n=[{key:"nextAutoLevel",get:function(){var e=this._nextAutoLevel,t=this.bwEstimator;if(-1!==e&&!t.canEstimate())return e;var n=this.getNextABRAutoLevel();return-1!==e&&this.hls.levels[n].loadError?e:(-1!==e&&(n=Math.min(e,n)),n)},set:function(e){this._nextAutoLevel=e}}])&&u(t.prototype,n),l&&u(t,l),Object.defineProperty(t,"prototype",{writable:!1}),e}()},"./src/controller/audio-stream-controller.ts":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return b}});var r=n("./src/polyfills/number.ts"),i=n("./src/controller/base-stream-controller.ts"),a=n("./src/events.ts"),s=n("./src/utils/buffer-helper.ts"),o=n("./src/controller/fragment-tracker.ts"),c=n("./src/types/level.ts"),u=n("./src/types/loader.ts"),l=n("./src/loader/fragment.ts"),d=n("./src/demux/chunk-cache.ts"),h=n("./src/demux/transmuxer-interface.ts"),f=n("./src/types/transmuxer.ts"),p=n("./src/controller/fragment-finders.ts"),v=n("./src/utils/discontinuities.ts"),m=n("./src/errors.ts");function g(){return g=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},g.apply(this,arguments)}function y(e,t){return y=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},y(e,t)}var b=function(e){var t,n;function b(t,n){var r;return(r=e.call(this,t,n,"[audio-stream-controller]")||this).videoBuffer=null,r.videoTrackCC=-1,r.waitingVideoCC=-1,r.audioSwitch=!1,r.trackId=-1,r.waitingData=null,r.mainDetails=null,r.bufferFlushed=!1,r.cachedTrackLoadedData=null,r._registerListeners(),r}n=e,(t=b).prototype=Object.create(n.prototype),t.prototype.constructor=t,y(t,n);var k=b.prototype;return k.onHandlerDestroying=function(){this._unregisterListeners(),this.mainDetails=null},k._registerListeners=function(){var e=this.hls;e.on(a.Events.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(a.Events.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(a.Events.MANIFEST_LOADING,this.onManifestLoading,this),e.on(a.Events.LEVEL_LOADED,this.onLevelLoaded,this),e.on(a.Events.AUDIO_TRACKS_UPDATED,this.onAudioTracksUpdated,this),e.on(a.Events.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.on(a.Events.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.on(a.Events.ERROR,this.onError,this),e.on(a.Events.BUFFER_RESET,this.onBufferReset,this),e.on(a.Events.BUFFER_CREATED,this.onBufferCreated,this),e.on(a.Events.BUFFER_FLUSHED,this.onBufferFlushed,this),e.on(a.Events.INIT_PTS_FOUND,this.onInitPtsFound,this),e.on(a.Events.FRAG_BUFFERED,this.onFragBuffered,this)},k._unregisterListeners=function(){var e=this.hls;e.off(a.Events.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(a.Events.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(a.Events.MANIFEST_LOADING,this.onManifestLoading,this),e.off(a.Events.LEVEL_LOADED,this.onLevelLoaded,this),e.off(a.Events.AUDIO_TRACKS_UPDATED,this.onAudioTracksUpdated,this),e.off(a.Events.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.off(a.Events.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.off(a.Events.ERROR,this.onError,this),e.off(a.Events.BUFFER_RESET,this.onBufferReset,this),e.off(a.Events.BUFFER_CREATED,this.onBufferCreated,this),e.off(a.Events.BUFFER_FLUSHED,this.onBufferFlushed,this),e.off(a.Events.INIT_PTS_FOUND,this.onInitPtsFound,this),e.off(a.Events.FRAG_BUFFERED,this.onFragBuffered,this)},k.onInitPtsFound=function(e,t){var n=t.frag,r=t.id,a=t.initPTS;if("main"===r){var s=n.cc;this.initPTS[n.cc]=a,this.log("InitPTS for cc: "+s+" found from main: "+a),this.videoTrackCC=s,this.state===i.State.WAITING_INIT_PTS&&this.tick()}},k.startLoad=function(e){if(!this.levels)return this.startPosition=e,void(this.state=i.State.STOPPED);var t=this.lastCurrentTime;this.stopLoad(),this.setInterval(100),this.fragLoadError=0,t>0&&-1===e?(this.log("Override startPosition with lastCurrentTime @"+t.toFixed(3)),e=t,this.state=i.State.IDLE):(this.loadedmetadata=!1,this.state=i.State.WAITING_TRACK),this.nextLoadPosition=this.startPosition=this.lastCurrentTime=e,this.tick()},k.doTick=function(){switch(this.state){case i.State.IDLE:this.doTickIdle();break;case i.State.WAITING_TRACK:var t,n=this.levels,r=this.trackId,a=null===n||void 0===n||null===(t=n[r])||void 0===t?void 0:t.details;if(a){if(this.waitForCdnTuneIn(a))break;this.state=i.State.WAITING_INIT_PTS}break;case i.State.FRAG_LOADING_WAITING_RETRY:var o,c=performance.now(),u=this.retryDate;(!u||c>=u||null!==(o=this.media)&&void 0!==o&&o.seeking)&&(this.log("RetryDate reached, switch back to IDLE state"),this.resetStartWhenNotLoaded(this.trackId),this.state=i.State.IDLE);break;case i.State.WAITING_INIT_PTS:var l=this.waitingData;if(l){var d=l.frag,h=l.part,f=l.cache,v=l.complete;if(void 0!==this.initPTS[d.cc]){this.waitingData=null,this.waitingVideoCC=-1,this.state=i.State.FRAG_LOADING;var m={frag:d,part:h,payload:f.flush(),networkDetails:null};this._handleFragmentLoadProgress(m),v&&e.prototype._handleFragmentLoadComplete.call(this,m)}else if(this.videoTrackCC!==this.waitingVideoCC)this.log("Waiting fragment cc ("+d.cc+") cancelled because video is at cc "+this.videoTrackCC),this.clearWaitingFragment();else{var g=this.getLoadPosition(),y=s.BufferHelper.bufferInfo(this.mediaBuffer,g,this.config.maxBufferHole);(0,p.fragmentWithinToleranceTest)(y.end,this.config.maxFragLookUpTolerance,d)<0&&(this.log("Waiting fragment cc ("+d.cc+") @ "+d.start+" cancelled because another fragment at "+y.end+" is needed"),this.clearWaitingFragment())}}else this.state=i.State.IDLE}this.onTickEnd()},k.clearWaitingFragment=function(){var e=this.waitingData;e&&(this.fragmentTracker.removeFragment(e.frag),this.waitingData=null,this.waitingVideoCC=-1,this.state=i.State.IDLE)},k.resetLoadingState=function(){this.clearWaitingFragment(),e.prototype.resetLoadingState.call(this)},k.onTickEnd=function(){var e=this.media;e&&e.readyState&&(this.lastCurrentTime=e.currentTime)},k.doTickIdle=function(){var e,t,n=this.hls,r=this.levels,s=this.media,o=this.trackId,c=n.config;if(r&&r[o]&&(s||!this.startFragRequested&&c.startFragPrefetch)){var d=r[o].details;if(!d||d.live&&this.levelLastLoaded!==o||this.waitForCdnTuneIn(d))this.state=i.State.WAITING_TRACK;else{var h=this.mediaBuffer?this.mediaBuffer:this.media;this.bufferFlushed&&h&&(this.bufferFlushed=!1,this.afterBufferFlushed(h,l.ElementaryStreamTypes.AUDIO,u.PlaylistLevelType.AUDIO));var f=this.getFwdBufferInfo(h,u.PlaylistLevelType.AUDIO);if(null!==f){var p=this.getFwdBufferInfo(this.videoBuffer?this.videoBuffer:this.media,u.PlaylistLevelType.MAIN),v=f.len,m=this.getMaxBufferLength(null===p||void 0===p?void 0:p.len),g=this.audioSwitch;if(!(v>=m)||g){if(!g&&this._streamEnded(f,d))return n.trigger(a.Events.BUFFER_EOS,{type:"audio"}),void(this.state=i.State.ENDED);var y=d.fragments[0].start,b=f.end;if(g&&s){var k=this.getLoadPosition();b=k,d.PTSKnown&&k<y&&(f.end>y||f.nextStart)&&(this.log("Alt audio track ahead of main track, seek to start of alt audio track"),s.currentTime=y+.05)}if(!(p&&b>p.end+d.targetduration)&&(p&&p.len||!f.len)){var x=this.getNextFragment(b,d);x?"identity"!==(null===(e=x.decryptdata)||void 0===e?void 0:e.keyFormat)||null!==(t=x.decryptdata)&&void 0!==t&&t.key?this.loadFragment(x,d,b):this.loadKey(x,d):this.bufferFlushed=!0}}}}}},k.getMaxBufferLength=function(t){var n=e.prototype.getMaxBufferLength.call(this);return t?Math.max(n,t):n},k.onMediaDetaching=function(){this.videoBuffer=null,e.prototype.onMediaDetaching.call(this)},k.onAudioTracksUpdated=function(e,t){var n=t.audioTracks;this.resetTransmuxer(),this.levels=n.map((function(e){return new c.Level(e)}))},k.onAudioTrackSwitching=function(e,t){var n=!!t.url;this.trackId=t.id;var r=this.fragCurrent;null!==r&&void 0!==r&&r.loader&&r.loader.abort(),this.fragCurrent=null,this.clearWaitingFragment(),n?this.setInterval(100):this.resetTransmuxer(),n?(this.audioSwitch=!0,this.state=i.State.IDLE):this.state=i.State.STOPPED,this.tick()},k.onManifestLoading=function(){this.mainDetails=null,this.fragmentTracker.removeAllFragments(),this.startPosition=this.lastCurrentTime=0,this.bufferFlushed=!1},k.onLevelLoaded=function(e,t){this.mainDetails=t.details,null!==this.cachedTrackLoadedData&&(this.hls.trigger(a.Events.AUDIO_TRACK_LOADED,this.cachedTrackLoadedData),this.cachedTrackLoadedData=null)},k.onAudioTrackLoaded=function(e,t){var n;if(null!=this.mainDetails){var r=this.levels,a=t.details,s=t.id;if(r){this.log("Track "+s+" loaded ["+a.startSN+","+a.endSN+"],duration:"+a.totalduration);var o=r[s],c=0;if(a.live||null!==(n=o.details)&&void 0!==n&&n.live){var u=this.mainDetails;if(a.fragments[0]||(a.deltaUpdateFailed=!0),a.deltaUpdateFailed||!u)return;!o.details&&a.hasProgramDateTime&&u.hasProgramDateTime?((0,v.alignMediaPlaylistByPDT)(a,u),c=a.fragments[0].start):c=this.alignPlaylists(a,o.details)}o.details=a,this.levelLastLoaded=s,this.startFragRequested||!this.mainDetails&&a.live||this.setStartPosition(o.details,c),this.state!==i.State.WAITING_TRACK||this.waitForCdnTuneIn(a)||(this.state=i.State.IDLE),this.tick()}else this.warn("Audio tracks were reset while loading level "+s)}else this.cachedTrackLoadedData=t},k._handleFragmentLoadProgress=function(e){var t,n=e.frag,r=e.part,a=e.payload,s=this.config,o=this.trackId,c=this.levels;if(c){var l=c[o];console.assert(l,"Audio track is defined on fragment load progress");var p=l.details;console.assert(p,"Audio track details are defined on fragment load progress");var v=s.defaultAudioCodec||l.audioCodec||"mp4a.40.2",m=this.transmuxer;m||(m=this.transmuxer=new h.default(this.hls,u.PlaylistLevelType.AUDIO,this._handleTransmuxComplete.bind(this),this._handleTransmuxerFlush.bind(this)));var g=this.initPTS[n.cc],y=null===(t=n.initSegment)||void 0===t?void 0:t.data;if(void 0!==g){var b=r?r.index:-1,k=-1!==b,x=new f.ChunkMetadata(n.level,n.sn,n.stats.chunkCount,a.byteLength,b,k);m.push(a,y,v,"",n,r,p.totalduration,!1,x,g)}else this.log("Unknown video PTS for cc "+n.cc+", waiting for video PTS before demuxing audio frag "+n.sn+" of ["+p.startSN+" ,"+p.endSN+"],track "+o),(this.waitingData=this.waitingData||{frag:n,part:r,cache:new d.default,complete:!1}).cache.push(new Uint8Array(a)),this.waitingVideoCC=this.videoTrackCC,this.state=i.State.WAITING_INIT_PTS}else this.warn("Audio tracks were reset while fragment load was in progress. Fragment "+n.sn+" of level "+n.level+" will not be buffered")},k._handleFragmentLoadComplete=function(t){this.waitingData?this.waitingData.complete=!0:e.prototype._handleFragmentLoadComplete.call(this,t)},k.onBufferReset=function(){this.mediaBuffer=this.videoBuffer=null,this.loadedmetadata=!1},k.onBufferCreated=function(e,t){var n=t.tracks.audio;n&&(this.mediaBuffer=n.buffer||null),t.tracks.video&&(this.videoBuffer=t.tracks.video.buffer||null)},k.onFragBuffered=function(e,t){var n,r=t.frag,i=t.part;r.type===u.PlaylistLevelType.AUDIO?this.fragContextChanged(r)?this.warn("Fragment "+r.sn+(i?" p: "+i.index:"")+" of level "+r.level+" finished buffering, but was aborted. state: "+this.state+", audioSwitch: "+this.audioSwitch):("initSegment"!==r.sn&&(this.fragPrevious=r,this.audioSwitch&&(this.audioSwitch=!1,this.hls.trigger(a.Events.AUDIO_TRACK_SWITCHED,{id:this.trackId}))),this.fragBufferedComplete(r,i)):this.loadedmetadata||r.type!==u.PlaylistLevelType.MAIN||null!==(n=this.videoBuffer||this.media)&&void 0!==n&&n.buffered.length&&(this.loadedmetadata=!0)},k.onError=function(t,n){switch(n.details){case m.ErrorDetails.FRAG_LOAD_ERROR:case m.ErrorDetails.FRAG_LOAD_TIMEOUT:case m.ErrorDetails.KEY_LOAD_ERROR:case m.ErrorDetails.KEY_LOAD_TIMEOUT:this.onFragmentOrKeyLoadError(u.PlaylistLevelType.AUDIO,n);break;case m.ErrorDetails.AUDIO_TRACK_LOAD_ERROR:case m.ErrorDetails.AUDIO_TRACK_LOAD_TIMEOUT:this.state!==i.State.ERROR&&this.state!==i.State.STOPPED&&(this.state=n.fatal?i.State.ERROR:i.State.IDLE,this.warn(n.details+" while loading frag, switching to "+this.state+" state"));break;case m.ErrorDetails.BUFFER_FULL_ERROR:if("audio"===n.parent&&(this.state===i.State.PARSING||this.state===i.State.PARSED)){var r=!0,a=this.getFwdBufferInfo(this.mediaBuffer,u.PlaylistLevelType.AUDIO);a&&a.len>.5&&(r=!this.reduceMaxBufferLength(a.len)),r&&(this.warn("Buffer full error also media.currentTime is not buffered, flush audio buffer"),this.fragCurrent=null,e.prototype.flushMainBuffer.call(this,0,Number.POSITIVE_INFINITY,"audio")),this.resetLoadingState()}}},k.onBufferFlushed=function(e,t){t.type===l.ElementaryStreamTypes.AUDIO&&(this.bufferFlushed=!0)},k._handleTransmuxComplete=function(e){var t,n="audio",r=this.hls,s=e.remuxResult,o=e.chunkMeta,c=this.getCurrentContext(o);if(!c)return this.warn("The loading context changed while buffering fragment "+o.sn+" of level "+o.level+". This chunk will not be buffered."),void this.resetStartWhenNotLoaded(o.level);var u=c.frag,d=c.part,h=c.level.details,f=s.audio,p=s.text,v=s.id3,m=s.initSegment;if(!this.fragContextChanged(u)&&h){if(this.state=i.State.PARSING,this.audioSwitch&&f&&this.completeAudioSwitch(),null!==m&&void 0!==m&&m.tracks&&(this._bufferInitSegment(m.tracks,u,o),r.trigger(a.Events.FRAG_PARSING_INIT_SEGMENT,{frag:u,id:n,tracks:m.tracks})),f){var y=f.startPTS,b=f.endPTS,k=f.startDTS,x=f.endDTS;d&&(d.elementaryStreams[l.ElementaryStreamTypes.AUDIO]={startPTS:y,endPTS:b,startDTS:k,endDTS:x}),u.setElementaryStreamInfo(l.ElementaryStreamTypes.AUDIO,y,b,k,x),this.bufferFragmentData(f,u,d,o)}if(null!==v&&void 0!==v&&null!==(t=v.samples)&&void 0!==t&&t.length){var w=g({id:n,frag:u,details:h},v);r.trigger(a.Events.FRAG_PARSING_METADATA,w)}if(p){var T=g({id:n,frag:u,details:h},p);r.trigger(a.Events.FRAG_PARSING_USERDATA,T)}}},k._bufferInitSegment=function(e,t,n){if(this.state===i.State.PARSING){e.video&&delete e.video;var r=e.audio;if(r){r.levelCodec=r.codec,r.id="audio",this.log("Init audio buffer, container:"+r.container+", codecs[parsed]=["+r.codec+"]"),this.hls.trigger(a.Events.BUFFER_CODECS,e);var s=r.initSegment;if(null!==s&&void 0!==s&&s.byteLength){var o={type:"audio",frag:t,part:null,chunkMeta:n,parent:t.type,data:s};this.hls.trigger(a.Events.BUFFER_APPENDING,o)}this.tick()}}},k.loadFragment=function(t,n,a){var s=this.fragmentTracker.getState(t);this.fragCurrent=t,(this.audioSwitch||s===o.FragmentState.NOT_LOADED||s===o.FragmentState.PARTIAL)&&("initSegment"===t.sn?this._loadInitSegment(t):n.live&&!(0,r.isFiniteNumber)(this.initPTS[t.cc])?(this.log("Waiting for video PTS in continuity counter "+t.cc+" of live stream before loading audio fragment "+t.sn+" of level "+this.trackId),this.state=i.State.WAITING_INIT_PTS):(this.startFragRequested=!0,e.prototype.loadFragment.call(this,t,n,a)))},k.completeAudioSwitch=function(){var t=this.hls,n=this.media,r=this.trackId;n&&(this.log("Switching audio track : flushing all audio"),e.prototype.flushMainBuffer.call(this,0,Number.POSITIVE_INFINITY,"audio")),this.audioSwitch=!1,t.trigger(a.Events.AUDIO_TRACK_SWITCHED,{id:r})},b}(i.default)},"./src/controller/audio-track-controller.ts":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return u}});var r=n("./src/events.ts"),i=n("./src/errors.ts"),a=n("./src/controller/base-playlist-controller.ts"),s=n("./src/types/loader.ts");function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e,t){return c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},c(e,t)}var u=function(e){var t,n;function a(t){var n;return(n=e.call(this,t,"[audio-track-controller]")||this).tracks=[],n.groupId=null,n.tracksInGroup=[],n.trackId=-1,n.trackName="",n.selectDefaultTrack=!0,n.registerListeners(),n}n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,c(t,n);var u,l,d,h=a.prototype;return h.registerListeners=function(){var e=this.hls;e.on(r.Events.MANIFEST_LOADING,this.onManifestLoading,this),e.on(r.Events.MANIFEST_PARSED,this.onManifestParsed,this),e.on(r.Events.LEVEL_LOADING,this.onLevelLoading,this),e.on(r.Events.LEVEL_SWITCHING,this.onLevelSwitching,this),e.on(r.Events.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.on(r.Events.ERROR,this.onError,this)},h.unregisterListeners=function(){var e=this.hls;e.off(r.Events.MANIFEST_LOADING,this.onManifestLoading,this),e.off(r.Events.MANIFEST_PARSED,this.onManifestParsed,this),e.off(r.Events.LEVEL_LOADING,this.onLevelLoading,this),e.off(r.Events.LEVEL_SWITCHING,this.onLevelSwitching,this),e.off(r.Events.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.off(r.Events.ERROR,this.onError,this)},h.destroy=function(){this.unregisterListeners(),this.tracks.length=0,this.tracksInGroup.length=0,e.prototype.destroy.call(this)},h.onManifestLoading=function(){this.tracks=[],this.groupId=null,this.tracksInGroup=[],this.trackId=-1,this.trackName="",this.selectDefaultTrack=!0},h.onManifestParsed=function(e,t){this.tracks=t.audioTracks||[]},h.onAudioTrackLoaded=function(e,t){var n=t.id,r=t.details,i=this.tracksInGroup[n];if(i){var a=i.details;i.details=t.details,this.log("audioTrack "+n+" loaded ["+r.startSN+"-"+r.endSN+"]"),n===this.trackId&&(this.retryCount=0,this.playlistLoaded(n,t,a))}else this.warn("Invalid audio track id "+n)},h.onLevelLoading=function(e,t){this.switchLevel(t.level)},h.onLevelSwitching=function(e,t){this.switchLevel(t.level)},h.switchLevel=function(e){var t=this.hls.levels[e];if(null!==t&&void 0!==t&&t.audioGroupIds){var n=t.audioGroupIds[t.urlId];if(this.groupId!==n){this.groupId=n;var i=this.tracks.filter((function(e){return!n||e.groupId===n}));this.selectDefaultTrack&&!i.some((function(e){return e.default}))&&(this.selectDefaultTrack=!1),this.tracksInGroup=i;var a={audioTracks:i};this.log("Updating audio tracks, "+i.length+' track(s) found in "'+n+'" group-id'),this.hls.trigger(r.Events.AUDIO_TRACKS_UPDATED,a),this.selectInitialTrack()}}},h.onError=function(t,n){e.prototype.onError.call(this,t,n),!n.fatal&&n.context&&n.context.type===s.PlaylistContextType.AUDIO_TRACK&&n.context.id===this.trackId&&n.context.groupId===this.groupId&&this.retryLoadingOrFail(n)},h.setAudioTrack=function(e){var t=this.tracksInGroup;if(e<0||e>=t.length)this.warn("Invalid id passed to audio-track controller");else{this.clearTimer();var n=t[this.trackId];this.log("Now switching to audio-track index "+e);var i=t[e],a=i.id,s=i.groupId,o=void 0===s?"":s,c=i.name,u=i.type,l=i.url;if(this.trackId=e,this.trackName=c,this.selectDefaultTrack=!1,this.hls.trigger(r.Events.AUDIO_TRACK_SWITCHING,{id:a,groupId:o,name:c,type:u,url:l}),!i.details||i.details.live){var d=this.switchParams(i.url,null===n||void 0===n?void 0:n.details);this.loadPlaylist(d)}}},h.selectInitialTrack=function(){var e=this.tracksInGroup;console.assert(e.length,"Initial audio track should be selected when tracks are known");var t=this.trackName,n=this.findTrackId(t)||this.findTrackId();-1!==n?this.setAudioTrack(n):(this.warn("No track found for running audio group-ID: "+this.groupId),this.hls.trigger(r.Events.ERROR,{type:i.ErrorTypes.MEDIA_ERROR,details:i.ErrorDetails.AUDIO_TRACK_LOAD_ERROR,fatal:!0}))},h.findTrackId=function(e){for(var t=this.tracksInGroup,n=0;n<t.length;n++){var r=t[n];if((!this.selectDefaultTrack||r.default)&&(!e||e===r.name))return r.id}return-1},h.loadPlaylist=function(e){var t=this.tracksInGroup[this.trackId];if(this.shouldLoadTrack(t)){var n=t.id,i=t.groupId,a=t.url;if(e)try{a=e.addDirectives(a)}catch(s){this.warn("Could not construct new URL with HLS Delivery Directives: "+s)}this.log("loading audio-track playlist for id: "+n),this.clearTimer(),this.hls.trigger(r.Events.AUDIO_TRACK_LOADING,{url:a,id:n,groupId:i,deliveryDirectives:e||null})}},u=a,(l=[{key:"audioTracks",get:function(){return this.tracksInGroup}},{key:"audioTrack",get:function(){return this.trackId},set:function(e){this.selectDefaultTrack=!1,this.setAudioTrack(e)}}])&&o(u.prototype,l),d&&o(u,d),Object.defineProperty(u,"prototype",{writable:!1}),a}(a.default)},"./src/controller/base-playlist-controller.ts":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return c}});var r=n("./src/polyfills/number.ts"),i=n("./src/types/level.ts"),a=n("./src/controller/level-helper.ts"),s=n("./src/utils/logger.ts"),o=n("./src/errors.ts"),c=function(){function e(e,t){this.hls=void 0,this.timer=-1,this.canLoad=!1,this.retryCount=0,this.log=void 0,this.warn=void 0,this.log=s.logger.log.bind(s.logger,t+":"),this.warn=s.logger.warn.bind(s.logger,t+":"),this.hls=e}var t=e.prototype;return t.destroy=function(){this.clearTimer(),this.hls=this.log=this.warn=null},t.onError=function(e,t){t.fatal&&t.type===o.ErrorTypes.NETWORK_ERROR&&this.clearTimer()},t.clearTimer=function(){clearTimeout(this.timer),this.timer=-1},t.startLoad=function(){this.canLoad=!0,this.retryCount=0,this.loadPlaylist()},t.stopLoad=function(){this.canLoad=!1,this.clearTimer()},t.switchParams=function(e,t){var n=null===t||void 0===t?void 0:t.renditionReports;if(n)for(var a=0;a<n.length;a++){var s=n[a],o=""+s.URI;if(o===e.slice(-o.length)){var c=parseInt(s["LAST-MSN"]),u=parseInt(s["LAST-PART"]);if(t&&this.hls.config.lowLatencyMode){var l=Math.min(t.age-t.partTarget,t.targetduration);void 0!==u&&l>t.partTarget&&(u+=1)}if((0,r.isFiniteNumber)(c))return new i.HlsUrlParameters(c,(0,r.isFiniteNumber)(u)?u:void 0,i.HlsSkip.No)}}},t.loadPlaylist=function(e){},t.shouldLoadTrack=function(e){return this.canLoad&&e&&!!e.url&&(!e.details||e.details.live)},t.playlistLoaded=function(e,t,n){var r=this,i=t.details,s=t.stats,o=s.loading.end?Math.max(0,self.performance.now()-s.loading.end):0;if(i.advancedDateTime=Date.now()-o,i.live||null!==n&&void 0!==n&&n.live){if(i.reloaded(n),n&&this.log("live playlist "+e+" "+(i.advanced?"REFRESHED "+i.lastPartSn+"-"+i.lastPartIndex:"MISSED")),n&&i.fragments.length>0&&(0,a.mergeDetails)(n,i),!this.canLoad||!i.live)return;var c,u=void 0,l=void 0;if(i.canBlockReload&&i.endSN&&i.advanced){var d=this.hls.config.lowLatencyMode,h=i.lastPartSn,f=i.endSN,p=i.lastPartIndex,v=h===f;-1!==p?(u=v?f+1:h,l=v?d?0:p:p+1):u=f+1;var m=i.age,g=m+i.ageHeader,y=Math.min(g-i.partTarget,1.5*i.targetduration);if(y>0){if(n&&y>n.tuneInGoal)this.warn("CDN Tune-in goal increased from: "+n.tuneInGoal+" to: "+y+" with playlist age: "+i.age),y=0;else{var b=Math.floor(y/i.targetduration);u+=b,void 0!==l&&(l+=Math.round(y%i.targetduration/i.partTarget)),this.log("CDN Tune-in age: "+i.ageHeader+"s last advanced "+m.toFixed(2)+"s goal: "+y+" skip sn "+b+" to part "+l)}i.tuneInGoal=y}if(c=this.getDeliveryDirectives(i,t.deliveryDirectives,u,l),d||!v)return void this.loadPlaylist(c)}else c=this.getDeliveryDirectives(i,t.deliveryDirectives,u,l);var k=(0,a.computeReloadInterval)(i,s);void 0!==u&&i.canBlockReload&&(k-=i.partTarget||1),this.log("reload live playlist "+e+" in "+Math.round(k)+" ms"),this.timer=self.setTimeout((function(){return r.loadPlaylist(c)}),k)}else this.clearTimer()},t.getDeliveryDirectives=function(e,t,n,r){var a=(0,i.getSkipValue)(e,n);return null!==t&&void 0!==t&&t.skip&&e.deltaUpdateFailed&&(n=t.msn,r=t.part,a=i.HlsSkip.No),new i.HlsUrlParameters(n,r,a)},t.retryLoadingOrFail=function(e){var t,n=this,r=this.hls.config,i=this.retryCount<r.levelLoadingMaxRetry;if(i)if(this.retryCount++,e.details.indexOf("LoadTimeOut")>-1&&null!==(t=e.context)&&void 0!==t&&t.deliveryDirectives)this.warn("retry playlist loading #"+this.retryCount+' after "'+e.details+'"'),this.loadPlaylist();else{var a=Math.min(Math.pow(2,this.retryCount)*r.levelLoadingRetryDelay,r.levelLoadingMaxRetryTimeout);this.timer=self.setTimeout((function(){return n.loadPlaylist()}),a),this.warn("retry playlist loading #"+this.retryCount+" in "+a+' ms after "'+e.details+'"')}else this.warn('cannot recover from error "'+e.details+'"'),this.clearTimer(),e.fatal=!0;return i},e}()},"./src/controller/base-stream-controller.ts":function(e,t,n){"use strict";n.r(t),n.d(t,{State:function(){return w},default:function(){return T}});var r=n("./src/polyfills/number.ts"),i=n("./src/task-loop.ts"),a=n("./src/controller/fragment-tracker.ts"),s=n("./src/utils/buffer-helper.ts"),o=n("./src/utils/logger.ts"),c=n("./src/events.ts"),u=n("./src/errors.ts"),l=n("./src/types/transmuxer.ts"),d=n("./src/utils/mp4-tools.ts"),h=n("./src/utils/discontinuities.ts"),f=n("./src/controller/fragment-finders.ts"),p=n("./src/controller/level-helper.ts"),v=n("./src/loader/fragment-loader.ts"),m=n("./src/crypt/decrypter.ts"),g=n("./src/utils/time-ranges.ts"),y=n("./src/types/loader.ts");function b(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function k(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function x(e,t){return x=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},x(e,t)}var w={STOPPED:"STOPPED",IDLE:"IDLE",KEY_LOADING:"KEY_LOADING",FRAG_LOADING:"FRAG_LOADING",FRAG_LOADING_WAITING_RETRY:"FRAG_LOADING_WAITING_RETRY",WAITING_TRACK:"WAITING_TRACK",PARSING:"PARSING",PARSED:"PARSED",ENDED:"ENDED",ERROR:"ERROR",WAITING_INIT_PTS:"WAITING_INIT_PTS",WAITING_LEVEL:"WAITING_LEVEL"},T=function(e){var t,n;function i(t,n,r){var i;return(i=e.call(this)||this).hls=void 0,i.fragPrevious=null,i.fragCurrent=null,i.fragmentTracker=void 0,i.transmuxer=null,i._state=w.STOPPED,i.media=null,i.mediaBuffer=null,i.config=void 0,i.bitrateTest=!1,i.lastCurrentTime=0,i.nextLoadPosition=0,i.startPosition=0,i.loadedmetadata=!1,i.fragLoadError=0,i.retryDate=0,i.levels=null,i.fragmentLoader=void 0,i.levelLastLoaded=null,i.startFragRequested=!1,i.decrypter=void 0,i.initPTS=[],i.onvseeking=null,i.onvended=null,i.logPrefix="",i.log=void 0,i.warn=void 0,i.logPrefix=r,i.log=o.logger.log.bind(o.logger,r+":"),i.warn=o.logger.warn.bind(o.logger,r+":"),i.hls=t,i.fragmentLoader=new v.default(t.config),i.fragmentTracker=n,i.config=t.config,i.decrypter=new m.default(t,t.config),t.on(c.Events.KEY_LOADED,i.onKeyLoaded,k(i)),t.on(c.Events.LEVEL_SWITCHING,i.onLevelSwitching,k(i)),i}n=e,(t=i).prototype=Object.create(n.prototype),t.prototype.constructor=t,x(t,n);var T,E,_,S=i.prototype;return S.doTick=function(){this.onTickEnd()},S.onTickEnd=function(){},S.startLoad=function(e){},S.stopLoad=function(){this.fragmentLoader.abort();var e=this.fragCurrent;e&&this.fragmentTracker.removeFragment(e),this.resetTransmuxer(),this.fragCurrent=null,this.fragPrevious=null,this.clearInterval(),this.clearNextTick(),this.state=w.STOPPED},S._streamEnded=function(e,t){var n=this.fragCurrent,r=this.fragmentTracker;if(!t.live&&n&&this.media&&n.sn>=t.endSN&&!e.nextStart){var i=t.partList;if(null!==i&&void 0!==i&&i.length){var o=i[i.length-1];return s.BufferHelper.isBuffered(this.media,o.start+o.duration/2)}var c=r.getState(n);return c===a.FragmentState.PARTIAL||c===a.FragmentState.OK}return!1},S.onMediaAttached=function(e,t){var n=this.media=this.mediaBuffer=t.media;this.onvseeking=this.onMediaSeeking.bind(this),this.onvended=this.onMediaEnded.bind(this),n.addEventListener("seeking",this.onvseeking),n.addEventListener("ended",this.onvended);var r=this.config;this.levels&&r.autoStartLoad&&this.state===w.STOPPED&&this.startLoad(r.startPosition)},S.onMediaDetaching=function(){var e=this.media;null!==e&&void 0!==e&&e.ended&&(this.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0),e&&this.onvseeking&&this.onvended&&(e.removeEventListener("seeking",this.onvseeking),e.removeEventListener("ended",this.onvended),this.onvseeking=this.onvended=null),this.media=this.mediaBuffer=null,this.loadedmetadata=!1,this.fragmentTracker.removeAllFragments(),this.stopLoad()},S.onMediaSeeking=function(){var e=this.config,t=this.fragCurrent,n=this.media,i=this.mediaBuffer,a=this.state,o=n?n.currentTime:0,c=s.BufferHelper.bufferInfo(i||n,o,e.maxBufferHole);if(this.log("media seeking to "+((0,r.isFiniteNumber)(o)?o.toFixed(3):o)+", state: "+a),a===w.ENDED)this.resetLoadingState();else if(t){var u=e.maxFragLookUpTolerance,l=t.start-u,d=t.start+t.duration+u;if(!c.len||d<c.start||l>c.end){var h=o>d;(o<l||h)&&(h&&t.loader&&(this.log("seeking outside of buffer while fragment load in progress, cancel fragment load"),t.loader.abort()),this.resetLoadingState())}}n&&(this.lastCurrentTime=o),this.loadedmetadata||c.len||(this.nextLoadPosition=this.startPosition=o),this.tickImmediate()},S.onMediaEnded=function(){this.startPosition=this.lastCurrentTime=0},S.onKeyLoaded=function(e,t){if(this.state===w.KEY_LOADING&&t.frag===this.fragCurrent&&this.levels){this.state=w.IDLE;var n=this.levels[t.frag.level].details;n&&this.loadFragment(t.frag,n,t.frag.start)}},S.onLevelSwitching=function(e,t){this.fragLoadError=0},S.onHandlerDestroying=function(){this.stopLoad(),e.prototype.onHandlerDestroying.call(this)},S.onHandlerDestroyed=function(){this.state=w.STOPPED,this.hls.off(c.Events.KEY_LOADED,this.onKeyLoaded,this),this.hls.off(c.Events.LEVEL_SWITCHING,this.onLevelSwitching,this),this.fragmentLoader&&this.fragmentLoader.destroy(),this.decrypter&&this.decrypter.destroy(),this.hls=this.log=this.warn=this.decrypter=this.fragmentLoader=this.fragmentTracker=null,e.prototype.onHandlerDestroyed.call(this)},S.loadKey=function(e,t){this.log("Loading key for "+e.sn+" of ["+t.startSN+"-"+t.endSN+"], "+("[stream-controller]"===this.logPrefix?"level":"track")+" "+e.level),this.state=w.KEY_LOADING,this.fragCurrent=e,this.hls.trigger(c.Events.KEY_LOADING,{frag:e})},S.loadFragment=function(e,t,n){this._loadFragForPlayback(e,t,n)},S._loadFragForPlayback=function(e,t,n){var r=this;this._doFragLoad(e,t,n,(function(t){if(r.fragContextChanged(e))return r.warn("Fragment "+e.sn+(t.part?" p: "+t.part.index:"")+" of level "+e.level+" was dropped during download."),void r.fragmentTracker.removeFragment(e);e.stats.chunkCount++,r._handleFragmentLoadProgress(t)})).then((function(t){if(t){r.fragLoadError=0;var n=r.state;r.fragContextChanged(e)?(n===w.FRAG_LOADING||!r.fragCurrent&&n===w.PARSING)&&(r.fragmentTracker.removeFragment(e),r.state=w.IDLE):("payload"in t&&(r.log("Loaded fragment "+e.sn+" of level "+e.level),r.hls.trigger(c.Events.FRAG_LOADED,t)),r._handleFragmentLoadComplete(t))}})).catch((function(t){r.state!==w.STOPPED&&r.state!==w.ERROR&&(r.warn(t),r.resetFragmentLoading(e))}))},S.flushMainBuffer=function(e,t,n){if(void 0===n&&(n=null),e-t){var r={startOffset:e,endOffset:t,type:n};this.fragLoadError=0,this.hls.trigger(c.Events.BUFFER_FLUSHING,r)}},S._loadInitSegment=function(e){var t=this;this._doFragLoad(e).then((function(n){if(!n||t.fragContextChanged(e)||!t.levels)throw new Error("init load aborted");return n})).then((function(n){var r=t.hls,i=n.payload,a=e.decryptdata;if(i&&i.byteLength>0&&a&&a.key&&a.iv&&"AES-128"===a.method){var s=self.performance.now();return t.decrypter.webCryptoDecrypt(new Uint8Array(i),a.key.buffer,a.iv.buffer).then((function(t){var i=self.performance.now();return r.trigger(c.Events.FRAG_DECRYPTED,{frag:e,payload:t,stats:{tstart:s,tdecrypt:i}}),n.payload=t,n}))}return n})).then((function(n){var r=t.fragCurrent,i=t.hls,a=t.levels;if(!a)throw new Error("init load aborted, missing levels");var s=a[e.level].details;console.assert(s,"Level details are defined when init segment is loaded");var o=e.stats;t.state=w.IDLE,t.fragLoadError=0,e.data=new Uint8Array(n.payload),o.parsing.start=o.buffering.start=self.performance.now(),o.parsing.end=o.buffering.end=self.performance.now(),n.frag===r&&i.trigger(c.Events.FRAG_BUFFERED,{stats:o,frag:r,part:null,id:e.type}),t.tick()})).catch((function(n){t.state!==w.STOPPED&&t.state!==w.ERROR&&(t.warn(n),t.resetFragmentLoading(e))}))},S.fragContextChanged=function(e){var t=this.fragCurrent;return!e||!t||e.level!==t.level||e.sn!==t.sn||e.urlId!==t.urlId},S.fragBufferedComplete=function(e,t){var n,r,i=this.mediaBuffer?this.mediaBuffer:this.media;this.log("Buffered "+e.type+" sn: "+e.sn+(t?" part: "+t.index:"")+" of "+("[stream-controller]"===this.logPrefix?"level":"track")+" "+e.level+" "+(i?g.default.toString(s.BufferHelper.getBuffered(i)):"(detached)")),this.state=w.IDLE,i&&(!this.loadedmetadata&&e.type==y.PlaylistLevelType.MAIN&&i.buffered.length&&(null===(n=this.fragCurrent)||void 0===n?void 0:n.sn)===(null===(r=this.fragPrevious)||void 0===r?void 0:r.sn)&&(this.loadedmetadata=!0,this.seekToStartPos()),this.tick())},S.seekToStartPos=function(){},S._handleFragmentLoadComplete=function(e){var t=this.transmuxer;if(t){var n=e.frag,r=e.part,i=e.partsLoaded,a=!i||0===i.length||i.some((function(e){return!e})),s=new l.ChunkMetadata(n.level,n.sn,n.stats.chunkCount+1,0,r?r.index:-1,!a);t.flush(s)}},S._handleFragmentLoadProgress=function(e){},S._doFragLoad=function(e,t,n,i){var a=this;if(void 0===n&&(n=null),!this.levels)throw new Error("frag load aborted, missing levels");if(n=Math.max(e.start,n||0),this.config.lowLatencyMode&&t){var s=t.partList;if(s&&i){n>e.end&&t.fragmentHint&&(e=t.fragmentHint);var o=this.getNextPart(s,e,n);if(o>-1){var u=s[o];return this.log("Loading part sn: "+e.sn+" p: "+u.index+" cc: "+e.cc+" of playlist ["+t.startSN+"-"+t.endSN+"] parts [0-"+o+"-"+(s.length-1)+"] "+("[stream-controller]"===this.logPrefix?"level":"track")+": "+e.level+", target: "+parseFloat(n.toFixed(3))),this.nextLoadPosition=u.start+u.duration,this.state=w.FRAG_LOADING,this.hls.trigger(c.Events.FRAG_LOADING,{frag:e,part:s[o],targetBufferTime:n}),this.doFragPartsLoad(e,s,o,i).catch((function(e){return a.handleFragLoadError(e)}))}if(!e.url||this.loadedEndOfParts(s,n))return Promise.resolve(null)}}return this.log("Loading fragment "+e.sn+" cc: "+e.cc+" "+(t?"of ["+t.startSN+"-"+t.endSN+"] ":"")+("[stream-controller]"===this.logPrefix?"level":"track")+": "+e.level+", target: "+parseFloat(n.toFixed(3))),(0,r.isFiniteNumber)(e.sn)&&!this.bitrateTest&&(this.nextLoadPosition=e.start+e.duration),this.state=w.FRAG_LOADING,this.hls.trigger(c.Events.FRAG_LOADING,{frag:e,targetBufferTime:n}),this.fragmentLoader.load(e,i).catch((function(e){return a.handleFragLoadError(e)}))},S.doFragPartsLoad=function(e,t,n,r){var i=this;return new Promise((function(a,s){var o=[];!function n(u){var l=t[u];i.fragmentLoader.loadPart(e,l,r).then((function(r){o[l.index]=r;var s=r.part;i.hls.trigger(c.Events.FRAG_LOADED,r);var d=t[u+1];if(!d||d.fragment!==e)return a({frag:e,part:s,partsLoaded:o});n(u+1)})).catch(s)}(n)}))},S.handleFragLoadError=function(e){var t=e.data;return t&&t.details===u.ErrorDetails.INTERNAL_ABORTED?this.handleFragLoadAborted(t.frag,t.part):this.hls.trigger(c.Events.ERROR,t),null},S._handleTransmuxerFlush=function(e){var t=this.getCurrentContext(e);if(t&&this.state===w.PARSING){var n=t.frag,r=t.part,i=t.level,a=self.performance.now();n.stats.parsing.end=a,r&&(r.stats.parsing.end=a),this.updateLevelTiming(n,r,i,e.partial)}else this.fragCurrent||(this.state=w.IDLE)},S.getCurrentContext=function(e){var t=this.levels,n=e.level,r=e.sn,i=e.part;if(!t||!t[n])return this.warn("Levels object was unset while buffering fragment "+r+" of level "+n+". The current chunk will not be buffered."),null;var a=t[n],s=i>-1?(0,p.getPartWith)(a,r,i):null,o=s?s.fragment:(0,p.getFragmentWithSN)(a,r,this.fragCurrent);return o?{frag:o,part:s,level:a}:null},S.bufferFragmentData=function(e,t,n,r){if(e&&this.state===w.PARSING){var i=e.data1,a=e.data2,s=i;if(i&&a&&(s=(0,d.appendUint8Array)(i,a)),s&&s.length){var o={type:e.type,frag:t,part:n,chunkMeta:r,parent:t.type,data:s};this.hls.trigger(c.Events.BUFFER_APPENDING,o),e.dropped&&e.independent&&!n&&this.flushBufferGap(t)}}},S.flushBufferGap=function(e){var t=this.media;if(t)if(s.BufferHelper.isBuffered(t,t.currentTime)){var n=t.currentTime,r=s.BufferHelper.bufferInfo(t,n,0),i=e.duration,a=Math.min(2*this.config.maxFragLookUpTolerance,.25*i),o=Math.max(Math.min(e.start-a,r.end-a),n+a);e.start-o>a&&this.flushMainBuffer(o,e.start)}else this.flushMainBuffer(0,e.start)},S.getFwdBufferInfo=function(e,t){var n=this.config,i=this.getLoadPosition();if(!(0,r.isFiniteNumber)(i))return null;var a=s.BufferHelper.bufferInfo(e,i,n.maxBufferHole);if(0===a.len&&void 0!==a.nextStart){var o=this.fragmentTracker.getBufferedFrag(i,t);if(o&&a.nextStart<o.end)return s.BufferHelper.bufferInfo(e,i,Math.max(a.nextStart,n.maxBufferHole))}return a},S.getMaxBufferLength=function(e){var t,n=this.config;return t=e?Math.max(8*n.maxBufferSize/e,n.maxBufferLength):n.maxBufferLength,Math.min(t,n.maxMaxBufferLength)},S.reduceMaxBufferLength=function(e){var t=this.config,n=e||t.maxBufferLength;return t.maxMaxBufferLength>=n&&(t.maxMaxBufferLength/=2,this.warn("Reduce max buffer length to "+t.maxMaxBufferLength+"s"),!0)},S.getNextFragment=function(e,t){var n=t.fragments,r=n.length;if(!r)return null;var i,a=this.config,s=n[0].start;if(t.live){var o=a.initialLiveManifestSize;if(r<o)return this.warn("Not enough fragments to start playback (have: "+r+", need: "+o+")"),null;t.PTSKnown||this.startFragRequested||-1!==this.startPosition||(i=this.getInitialLiveFragment(t,n),this.startPosition=i?this.hls.liveSyncPosition||i.start:e)}else e<=s&&(i=n[0]);if(!i){var c=a.lowLatencyMode?t.partEnd:t.fragmentEnd;i=this.getFragmentAtPosition(e,c,t)}return this.mapToInitFragWhenRequired(i)},S.mapToInitFragWhenRequired=function(e){return null===e||void 0===e||!e.initSegment||null!==e&&void 0!==e&&e.initSegment.data||this.bitrateTest?e:e.initSegment},S.getNextPart=function(e,t,n){for(var r=-1,i=!1,a=!0,s=0,o=e.length;s<o;s++){var c=e[s];if(a=a&&!c.independent,r>-1&&n<c.start)break;var u=c.loaded;!u&&(i||c.independent||a)&&c.fragment===t&&(r=s),i=u}return r},S.loadedEndOfParts=function(e,t){var n=e[e.length-1];return n&&t>n.start&&n.loaded},S.getInitialLiveFragment=function(e,t){var n=this.fragPrevious,r=null;if(n){if(e.hasProgramDateTime&&(this.log("Live playlist, switching playlist, load frag with same PDT: "+n.programDateTime),r=(0,f.findFragmentByPDT)(t,n.endProgramDateTime,this.config.maxFragLookUpTolerance)),!r){var i=n.sn+1;if(i>=e.startSN&&i<=e.endSN){var a=t[i-e.startSN];n.cc===a.cc&&(r=a,this.log("Live playlist, switching playlist, load frag with next SN: "+r.sn))}r||(r=(0,f.findFragWithCC)(t,n.cc))&&this.log("Live playlist, switching playlist, load frag with same CC: "+r.sn)}}else{var s=this.hls.liveSyncPosition;null!==s&&(r=this.getFragmentAtPosition(s,this.bitrateTest?e.fragmentEnd:e.edge,e))}return r},S.getFragmentAtPosition=function(e,t,n){var r,i=this.config,s=this.fragPrevious,o=n.fragments,c=n.endSN,u=n.fragmentHint,l=i.maxFragLookUpTolerance,d=!!(i.lowLatencyMode&&n.partList&&u);if(d&&u&&!this.bitrateTest&&(o=o.concat(u),c=u.sn),e<t){var h=e>t-l?0:l;r=(0,f.findFragmentByPTS)(s,o,e,h)}else r=o[o.length-1];if(r){var p=r.sn-n.startSN;if(this.fragmentTracker.getState(r)===a.FragmentState.OK&&(s=r),s&&r.sn===s.sn&&!d&&s&&r.level===s.level){var v=o[p+1];r.sn<c&&this.fragmentTracker.getState(v)!==a.FragmentState.OK?(this.log("SN "+r.sn+" just loaded, load next one: "+v.sn),r=v):r=null}}return r},S.synchronizeToLiveEdge=function(e){var t=this.config,n=this.media;if(n){var r=this.hls.liveSyncPosition,i=n.currentTime,a=e.fragments[0].start,s=e.edge,o=i>=a-t.maxFragLookUpTolerance&&i<=s;if(null!==r&&n.duration>r&&(i<r||!o)){var c=void 0!==t.liveMaxLatencyDuration?t.liveMaxLatencyDuration:t.liveMaxLatencyDurationCount*e.targetduration;(!o&&n.readyState<4||i<s-c)&&(this.loadedmetadata||(this.nextLoadPosition=r),n.readyState&&(this.warn("Playback: "+i.toFixed(3)+" is located too far from the end of live sliding playlist: "+s+", reset currentTime to : "+r.toFixed(3)),n.currentTime=r))}}},S.alignPlaylists=function(e,t){var n=this.levels,i=this.levelLastLoaded,a=this.fragPrevious,s=null!==i?n[i]:null,o=e.fragments.length;if(!o)return this.warn("No fragments in live playlist"),0;var c=e.fragments[0].start,u=!t,l=e.alignedSliding&&(0,r.isFiniteNumber)(c);if(u||!l&&!c){(0,h.alignStream)(a,s,e);var d=e.fragments[0].start;return this.log("Live playlist sliding: "+d.toFixed(2)+" start-sn: "+(t?t.startSN:"na")+"->"+e.startSN+" prev-sn: "+(a?a.sn:"na")+" fragments: "+o),d}return c},S.waitForCdnTuneIn=function(e){return e.live&&e.canBlockReload&&e.partTarget&&e.tuneInGoal>Math.max(e.partHoldBack,3*e.partTarget)},S.setStartPosition=function(e,t){var n=this.startPosition;if(n<t&&(n=-1),-1===n||-1===this.lastCurrentTime){var i=e.startTimeOffset;(0,r.isFiniteNumber)(i)?(n=t+i,i<0&&(n+=e.totalduration),n=Math.min(Math.max(t,n),t+e.totalduration),this.log("Start time offset "+i+" found in playlist, adjust startPosition to "+n),this.startPosition=n):e.live?n=this.hls.liveSyncPosition||t:this.startPosition=n=0,this.lastCurrentTime=n}this.nextLoadPosition=n},S.getLoadPosition=function(){var e=this.media,t=0;return this.loadedmetadata&&e?t=e.currentTime:this.nextLoadPosition&&(t=this.nextLoadPosition),t},S.handleFragLoadAborted=function(e,t){this.transmuxer&&"initSegment"!==e.sn&&e.stats.aborted&&(this.warn("Fragment "+e.sn+(t?" part"+t.index:"")+" of level "+e.level+" was aborted"),this.resetFragmentLoading(e))},S.resetFragmentLoading=function(e){this.fragCurrent&&(this.fragContextChanged(e)||this.state===w.FRAG_LOADING_WAITING_RETRY)||(this.state=w.IDLE)},S.onFragmentOrKeyLoadError=function(e,t){if(!t.fatal){var n=t.frag;if(n&&n.type===e){var r=this.fragCurrent;console.assert(r&&n.sn===r.sn&&n.level===r.level&&n.urlId===r.urlId,"Frag load error must match current frag to retry");var i=this.config;if(this.fragLoadError+1<=i.fragLoadingMaxRetry){this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition);var a=Math.min(Math.pow(2,this.fragLoadError)*i.fragLoadingRetryDelay,i.fragLoadingMaxRetryTimeout);this.warn("Fragment "+n.sn+" of "+e+" "+n.level+" failed to load, retrying in "+a+"ms"),this.retryDate=self.performance.now()+a,this.fragLoadError++,this.state=w.FRAG_LOADING_WAITING_RETRY}else t.levelRetry?(e===y.PlaylistLevelType.AUDIO&&(this.fragCurrent=null),this.fragLoadError=0,this.state=w.IDLE):(o.logger.error(t.details+" reaches max retry, redispatch as fatal ..."),t.fatal=!0,this.hls.stopLoad(),this.state=w.ERROR)}}},S.afterBufferFlushed=function(e,t,n){if(e){var r=s.BufferHelper.getBuffered(e);this.fragmentTracker.detectEvictedFragments(t,r,n),this.state===w.ENDED&&this.resetLoadingState()}},S.resetLoadingState=function(){this.fragCurrent=null,this.fragPrevious=null,this.state=w.IDLE},S.resetStartWhenNotLoaded=function(e){if(!this.loadedmetadata){this.startFragRequested=!1;var t=this.levels?this.levels[e].details:null;null!==t&&void 0!==t&&t.live?(this.startPosition=-1,this.setStartPosition(t,0),this.resetLoadingState()):this.nextLoadPosition=this.startPosition}},S.updateLevelTiming=function(e,t,n,r){var i=this,a=n.details;console.assert(!!a,"level.details must be defined"),Object.keys(e.elementaryStreams).reduce((function(t,s){var o=e.elementaryStreams[s];if(o){var u=o.endPTS-o.startPTS;if(u<=0)return i.warn("Could not parse fragment "+e.sn+" "+s+" duration reliably ("+u+")"),t||!1;var l=r?0:(0,p.updateFragPTSDTS)(a,e,o.startPTS,o.endPTS,o.startDTS,o.endDTS);return i.hls.trigger(c.Events.LEVEL_PTS_UPDATED,{details:a,level:n,drift:l,type:s,frag:e,start:o.startPTS,end:o.endPTS}),!0}return t}),!1)||(this.warn("Found no media in fragment "+e.sn+" of level "+n.id+" resetting transmuxer to fallback to playlist timing"),this.resetTransmuxer()),this.state=w.PARSED,this.hls.trigger(c.Events.FRAG_PARSED,{frag:e,part:t})},S.resetTransmuxer=function(){this.transmuxer&&(this.transmuxer.destroy(),this.transmuxer=null)},T=i,(E=[{key:"state",get:function(){return this._state},set:function(e){var t=this._state;t!==e&&(this._state=e,this.log(t+"->"+e))}}])&&b(T.prototype,E),_&&b(T,_),Object.defineProperty(T,"prototype",{writable:!1}),i}(i.default)},"./src/controller/buffer-controller.ts":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return f}});var r=n("./src/polyfills/number.ts"),i=n("./src/events.ts"),a=n("./src/utils/logger.ts"),s=n("./src/errors.ts"),o=n("./src/utils/buffer-helper.ts"),c=n("./src/utils/mediasource-helper.ts"),u=n("./src/loader/fragment.ts"),l=n("./src/controller/buffer-operation-queue.ts"),d=(0,c.getMediaSource)(),h=/([ha]vc.)(?:\.[^.,]+)+/,f=function(){function e(e){var t=this;this.details=null,this._objectUrl=null,this.operationQueue=void 0,this.listeners=void 0,this.hls=void 0,this.bufferCodecEventsExpected=0,this._bufferCodecEventsTotal=0,this.media=null,this.mediaSource=null,this.appendError=0,this.tracks={},this.pendingTracks={},this.sourceBuffer=void 0,this._onMediaSourceOpen=function(){var e=t.hls,n=t.media,r=t.mediaSource;a.logger.log("[buffer-controller]: Media source opened"),n&&(t.updateMediaElementDuration(),e.trigger(i.Events.MEDIA_ATTACHED,{media:n})),r&&r.removeEventListener("sourceopen",t._onMediaSourceOpen),t.checkPendingTracks()},this._onMediaSourceClose=function(){a.logger.log("[buffer-controller]: Media source closed")},this._onMediaSourceEnded=function(){a.logger.log("[buffer-controller]: Media source ended")},this.hls=e,this._initSourceBuffer(),this.registerListeners()}var t=e.prototype;return t.hasSourceTypes=function(){return this.getSourceBufferTypes().length>0||Object.keys(this.pendingTracks).length>0},t.destroy=function(){this.unregisterListeners(),this.details=null},t.registerListeners=function(){var e=this.hls;e.on(i.Events.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(i.Events.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(i.Events.MANIFEST_PARSED,this.onManifestParsed,this),e.on(i.Events.BUFFER_RESET,this.onBufferReset,this),e.on(i.Events.BUFFER_APPENDING,this.onBufferAppending,this),e.on(i.Events.BUFFER_CODECS,this.onBufferCodecs,this),e.on(i.Events.BUFFER_EOS,this.onBufferEos,this),e.on(i.Events.BUFFER_FLUSHING,this.onBufferFlushing,this),e.on(i.Events.LEVEL_UPDATED,this.onLevelUpdated,this),e.on(i.Events.FRAG_PARSED,this.onFragParsed,this),e.on(i.Events.FRAG_CHANGED,this.onFragChanged,this)},t.unregisterListeners=function(){var e=this.hls;e.off(i.Events.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(i.Events.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(i.Events.MANIFEST_PARSED,this.onManifestParsed,this),e.off(i.Events.BUFFER_RESET,this.onBufferReset,this),e.off(i.Events.BUFFER_APPENDING,this.onBufferAppending,this),e.off(i.Events.BUFFER_CODECS,this.onBufferCodecs,this),e.off(i.Events.BUFFER_EOS,this.onBufferEos,this),e.off(i.Events.BUFFER_FLUSHING,this.onBufferFlushing,this),e.off(i.Events.LEVEL_UPDATED,this.onLevelUpdated,this),e.off(i.Events.FRAG_PARSED,this.onFragParsed,this),e.off(i.Events.FRAG_CHANGED,this.onFragChanged,this)},t._initSourceBuffer=function(){this.sourceBuffer={},this.operationQueue=new l.default(this.sourceBuffer),this.listeners={audio:[],video:[],audiovideo:[]}},t.onManifestParsed=function(e,t){var n=2;(t.audio&&!t.video||!t.altAudio)&&(n=1),this.bufferCodecEventsExpected=this._bufferCodecEventsTotal=n,this.details=null,a.logger.log(this.bufferCodecEventsExpected+" bufferCodec event(s) expected")},t.onMediaAttaching=function(e,t){var n=this.media=t.media;if(n&&d){var r=this.mediaSource=new d;r.addEventListener("sourceopen",this._onMediaSourceOpen),r.addEventListener("sourceended",this._onMediaSourceEnded),r.addEventListener("sourceclose",this._onMediaSourceClose),n.src=self.URL.createObjectURL(r),this._objectUrl=n.src}},t.onMediaDetaching=function(){var e=this.media,t=this.mediaSource,n=this._objectUrl;if(t){if(a.logger.log("[buffer-controller]: media source detaching"),"open"===t.readyState)try{t.endOfStream()}catch(r){a.logger.warn("[buffer-controller]: onMediaDetaching: "+r.message+" while calling endOfStream")}this.onBufferReset(),t.removeEventListener("sourceopen",this._onMediaSourceOpen),t.removeEventListener("sourceended",this._onMediaSourceEnded),t.removeEventListener("sourceclose",this._onMediaSourceClose),e&&(n&&self.URL.revokeObjectURL(n),e.src===n?(e.removeAttribute("src"),e.load()):a.logger.warn("[buffer-controller]: media.src was changed by a third party - skip cleanup")),this.mediaSource=null,this.media=null,this._objectUrl=null,this.bufferCodecEventsExpected=this._bufferCodecEventsTotal,this.pendingTracks={},this.tracks={}}this.hls.trigger(i.Events.MEDIA_DETACHED,void 0)},t.onBufferReset=function(){var e=this;this.getSourceBufferTypes().forEach((function(t){var n=e.sourceBuffer[t];try{n&&(e.removeBufferListeners(t),e.mediaSource&&e.mediaSource.removeSourceBuffer(n),e.sourceBuffer[t]=void 0)}catch(r){a.logger.warn("[buffer-controller]: Failed to reset the "+t+" buffer",r)}})),this._initSourceBuffer()},t.onBufferCodecs=function(e,t){var n=this,r=this.getSourceBufferTypes().length;Object.keys(t).forEach((function(e){if(r){var i=n.tracks[e];if(i&&"function"===typeof i.buffer.changeType){var s=t[e],o=s.id,c=s.codec,u=s.levelCodec,l=s.container,d=s.metadata,f=(i.levelCodec||i.codec).replace(h,"$1"),p=(u||c).replace(h,"$1");if(f!==p){var v=l+";codecs="+(u||c);n.appendChangeType(e,v),a.logger.log("[buffer-controller]: switching codec "+f+" to "+p),n.tracks[e]={buffer:i.buffer,codec:c,container:l,levelCodec:u,metadata:d,id:o}}}}else n.pendingTracks[e]=t[e]})),r||(this.bufferCodecEventsExpected=Math.max(this.bufferCodecEventsExpected-1,0),this.mediaSource&&"open"===this.mediaSource.readyState&&this.checkPendingTracks())},t.appendChangeType=function(e,t){var n=this,r=this.operationQueue,i={execute:function(){var i=n.sourceBuffer[e];i&&(a.logger.log("[buffer-controller]: changing "+e+" sourceBuffer type to "+t),i.changeType(t)),r.shiftAndExecuteNext(e)},onStart:function(){},onComplete:function(){},onError:function(t){a.logger.warn("[buffer-controller]: Failed to change "+e+" SourceBuffer type",t)}};r.append(i,e)},t.onBufferAppending=function(e,t){var n=this,r=this.hls,c=this.operationQueue,u=this.tracks,l=t.data,d=t.type,h=t.frag,f=t.part,p=t.chunkMeta,v=p.buffering[d],m=self.performance.now();v.start=m;var g=h.stats.buffering,y=f?f.stats.buffering:null;0===g.start&&(g.start=m),y&&0===y.start&&(y.start=m);var b=u.audio,k="audio"===d&&1===p.id&&"audio/mpeg"===(null===b||void 0===b?void 0:b.container),x={execute:function(){if(v.executeStart=self.performance.now(),k){var e=n.sourceBuffer[d];if(e){var t=h.start-e.timestampOffset;Math.abs(t)>=.1&&(a.logger.log("[buffer-controller]: Updating audio SourceBuffer timestampOffset to "+h.start+" (delta: "+t+") sn: "+h.sn+")"),e.timestampOffset=h.start)}}n.appendExecutor(l,d)},onStart:function(){},onComplete:function(){var e=self.performance.now();v.executeEnd=v.end=e,0===g.first&&(g.first=e),y&&0===y.first&&(y.first=e);var t=n.sourceBuffer,r={};for(var a in t)r[a]=o.BufferHelper.getBuffered(t[a]);n.appendError=0,n.hls.trigger(i.Events.BUFFER_APPENDED,{type:d,frag:h,part:f,chunkMeta:p,parent:h.type,timeRanges:r})},onError:function(e){a.logger.error("[buffer-controller]: Error encountered while trying to append to the "+d+" SourceBuffer",e);var t={type:s.ErrorTypes.MEDIA_ERROR,parent:h.type,details:s.ErrorDetails.BUFFER_APPEND_ERROR,err:e,fatal:!1};e.code===DOMException.QUOTA_EXCEEDED_ERR?t.details=s.ErrorDetails.BUFFER_FULL_ERROR:(n.appendError++,t.details=s.ErrorDetails.BUFFER_APPEND_ERROR,n.appendError>r.config.appendErrorMaxRetry&&(a.logger.error("[buffer-controller]: Failed "+r.config.appendErrorMaxRetry+" times to append segment in sourceBuffer"),t.fatal=!0,r.stopLoad())),r.trigger(i.Events.ERROR,t)}};c.append(x,d)},t.onBufferFlushing=function(e,t){var n=this,r=this.operationQueue,s=function(e){return{execute:n.removeExecutor.bind(n,e,t.startOffset,t.endOffset),onStart:function(){},onComplete:function(){n.hls.trigger(i.Events.BUFFER_FLUSHED,{type:e})},onError:function(t){a.logger.warn("[buffer-controller]: Failed to remove from "+e+" SourceBuffer",t)}}};t.type?r.append(s(t.type),t.type):this.getSourceBufferTypes().forEach((function(e){r.append(s(e),e)}))},t.onFragParsed=function(e,t){var n=this,r=t.frag,s=t.part,o=[],c=s?s.elementaryStreams:r.elementaryStreams;c[u.ElementaryStreamTypes.AUDIOVIDEO]?o.push("audiovideo"):(c[u.ElementaryStreamTypes.AUDIO]&&o.push("audio"),c[u.ElementaryStreamTypes.VIDEO]&&o.push("video")),0===o.length&&a.logger.warn("Fragments must have at least one ElementaryStreamType set. type: "+r.type+" level: "+r.level+" sn: "+r.sn),this.blockBuffers((function(){var e=self.performance.now();r.stats.buffering.end=e,s&&(s.stats.buffering.end=e);var t=s?s.stats:r.stats;n.hls.trigger(i.Events.FRAG_BUFFERED,{frag:r,part:s,stats:t,id:r.type})}),o)},t.onFragChanged=function(e,t){this.flushBackBuffer()},t.onBufferEos=function(e,t){var n=this;this.getSourceBufferTypes().reduce((function(e,r){var i=n.sourceBuffer[r];return t.type&&t.type!==r||i&&!i.ended&&(i.ended=!0,a.logger.log("[buffer-controller]: "+r+" sourceBuffer now EOS")),e&&!(i&&!i.ended)}),!0)&&this.blockBuffers((function(){var e=n.mediaSource;e&&"open"===e.readyState&&e.endOfStream()}))},t.onLevelUpdated=function(e,t){var n=t.details;n.fragments.length&&(this.details=n,this.getSourceBufferTypes().length?this.blockBuffers(this.updateMediaElementDuration.bind(this)):this.updateMediaElementDuration())},t.flushBackBuffer=function(){var e=this.hls,t=this.details,n=this.media,a=this.sourceBuffer;if(n&&null!==t){var s=this.getSourceBufferTypes();if(s.length){var c=t.live&&null!==e.config.liveBackBufferLength?e.config.liveBackBufferLength:e.config.backBufferLength;if((0,r.isFiniteNumber)(c)&&!(c<0)){var u=n.currentTime,l=t.levelTargetDuration,d=Math.max(c,l),h=Math.floor(u/l)*l-d;s.forEach((function(n){var r=a[n];if(r){var s=o.BufferHelper.getBuffered(r);s.length>0&&h>s.start(0)&&(e.trigger(i.Events.BACK_BUFFER_REACHED,{bufferEnd:h}),t.live&&e.trigger(i.Events.LIVE_BACK_BUFFER_REACHED,{bufferEnd:h}),e.trigger(i.Events.BUFFER_FLUSHING,{startOffset:0,endOffset:h,type:n}))}}))}}}},t.updateMediaElementDuration=function(){if(this.details&&this.media&&this.mediaSource&&"open"===this.mediaSource.readyState){var e=this.details,t=this.hls,n=this.media,i=this.mediaSource,s=e.fragments[0].start+e.totalduration,o=n.duration,c=(0,r.isFiniteNumber)(i.duration)?i.duration:0;e.live&&t.config.liveDurationInfinity?(a.logger.log("[buffer-controller]: Media Source duration is set to Infinity"),i.duration=1/0,this.updateSeekableRange(e)):(s>c&&s>o||!(0,r.isFiniteNumber)(o))&&(a.logger.log("[buffer-controller]: Updating Media Source duration to "+s.toFixed(3)),i.duration=s)}},t.updateSeekableRange=function(e){var t=this.mediaSource,n=e.fragments;if(n.length&&e.live&&null!==t&&void 0!==t&&t.setLiveSeekableRange){var r=Math.max(0,n[0].start),i=Math.max(r,r+e.totalduration);t.setLiveSeekableRange(r,i)}},t.checkPendingTracks=function(){var e=this.bufferCodecEventsExpected,t=this.operationQueue,n=this.pendingTracks,r=Object.keys(n).length;if(r&&!e||2===r){this.createSourceBuffers(n),this.pendingTracks={};var a=this.getSourceBufferTypes();if(0===a.length)return void this.hls.trigger(i.Events.ERROR,{type:s.ErrorTypes.MEDIA_ERROR,details:s.ErrorDetails.BUFFER_INCOMPATIBLE_CODECS_ERROR,fatal:!0,reason:"could not create source buffer for media codec(s)"});a.forEach((function(e){t.executeNext(e)}))}},t.createSourceBuffers=function(e){var t=this.sourceBuffer,n=this.mediaSource;if(!n)throw Error("createSourceBuffers called when mediaSource was null");var r=0;for(var o in e)if(!t[o]){var c=e[o];if(!c)throw Error("source buffer exists for track "+o+", however track does not");var u=c.levelCodec||c.codec,l=c.container+";codecs="+u;a.logger.log("[buffer-controller]: creating sourceBuffer("+l+")");try{var d=t[o]=n.addSourceBuffer(l),h=o;this.addBufferListener(h,"updatestart",this._onSBUpdateStart),this.addBufferListener(h,"updateend",this._onSBUpdateEnd),this.addBufferListener(h,"error",this._onSBUpdateError),this.tracks[o]={buffer:d,codec:u,container:c.container,levelCodec:c.levelCodec,metadata:c.metadata,id:c.id},r++}catch(f){a.logger.error("[buffer-controller]: error while trying to add sourceBuffer: "+f.message),this.hls.trigger(i.Events.ERROR,{type:s.ErrorTypes.MEDIA_ERROR,details:s.ErrorDetails.BUFFER_ADD_CODEC_ERROR,fatal:!1,error:f,mimeType:l})}}r&&this.hls.trigger(i.Events.BUFFER_CREATED,{tracks:this.tracks})},t._onSBUpdateStart=function(e){this.operationQueue.current(e).onStart()},t._onSBUpdateEnd=function(e){var t=this.operationQueue;t.current(e).onComplete(),t.shiftAndExecuteNext(e)},t._onSBUpdateError=function(e,t){a.logger.error("[buffer-controller]: "+e+" SourceBuffer error",t),this.hls.trigger(i.Events.ERROR,{type:s.ErrorTypes.MEDIA_ERROR,details:s.ErrorDetails.BUFFER_APPENDING_ERROR,fatal:!1});var n=this.operationQueue.current(e);n&&n.onError(t)},t.removeExecutor=function(e,t,n){var i=this.media,s=this.mediaSource,o=this.operationQueue,c=this.sourceBuffer[e];if(!i||!s||!c)return a.logger.warn("[buffer-controller]: Attempting to remove from the "+e+" SourceBuffer, but it does not exist"),void o.shiftAndExecuteNext(e);var u=(0,r.isFiniteNumber)(i.duration)?i.duration:1/0,l=(0,r.isFiniteNumber)(s.duration)?s.duration:1/0,d=Math.max(0,t),h=Math.min(n,u,l);h>d?(a.logger.log("[buffer-controller]: Removing ["+d+","+h+"] from the "+e+" SourceBuffer"),console.assert(!c.updating,e+" sourceBuffer must not be updating"),c.remove(d,h)):o.shiftAndExecuteNext(e)},t.appendExecutor=function(e,t){var n=this.operationQueue,r=this.sourceBuffer[t];if(!r)return a.logger.warn("[buffer-controller]: Attempting to append to the "+t+" SourceBuffer, but it does not exist"),void n.shiftAndExecuteNext(t);r.ended=!1,console.assert(!r.updating,t+" sourceBuffer must not be updating"),r.appendBuffer(e)},t.blockBuffers=function(e,t){var n=this;if(void 0===t&&(t=this.getSourceBufferTypes()),!t.length)return a.logger.log("[buffer-controller]: Blocking operation requested, but no SourceBuffers exist"),void Promise.resolve().then(e);var r=this.operationQueue,i=t.map((function(e){return r.appendBlocker(e)}));Promise.all(i).then((function(){e(),t.forEach((function(e){var t=n.sourceBuffer[e];t&&t.updating||r.shiftAndExecuteNext(e)}))}))},t.getSourceBufferTypes=function(){return Object.keys(this.sourceBuffer)},t.addBufferListener=function(e,t,n){var r=this.sourceBuffer[e];if(r){var i=n.bind(this,e);this.listeners[e].push({event:t,listener:i}),r.addEventListener(t,i)}},t.removeBufferListeners=function(e){var t=this.sourceBuffer[e];t&&this.listeners[e].forEach((function(e){t.removeEventListener(e.event,e.listener)}))},e}()},"./src/controller/buffer-operation-queue.ts":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return i}});var r=n("./src/utils/logger.ts"),i=function(){function e(e){this.buffers=void 0,this.queues={video:[],audio:[],audiovideo:[]},this.buffers=e}var t=e.prototype;return t.append=function(e,t){var n=this.queues[t];n.push(e),1===n.length&&this.buffers[t]&&this.executeNext(t)},t.insertAbort=function(e,t){this.queues[t].unshift(e),this.executeNext(t)},t.appendBlocker=function(e){var t,n=new Promise((function(e){t=e})),r={execute:t,onStart:function(){},onComplete:function(){},onError:function(){}};return this.append(r,e),n},t.executeNext=function(e){var t=this.buffers,n=this.queues,i=t[e],a=n[e];if(a.length){var s=a[0];try{s.execute()}catch(o){r.logger.warn("[buffer-operation-queue]: Unhandled exception executing the current operation"),s.onError(o),i&&i.updating||(a.shift(),this.executeNext(e))}}},t.shiftAndExecuteNext=function(e){this.queues[e].shift(),this.executeNext(e)},t.current=function(e){return this.queues[e][0]},e}()},"./src/controller/cap-level-controller.ts":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return a}});var r=n("./src/events.ts");function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var a=function(){function e(e){this.autoLevelCapping=void 0,this.firstLevel=void 0,this.media=void 0,this.restrictedLevels=void 0,this.timer=void 0,this.hls=void 0,this.streamController=void 0,this.clientRect=void 0,this.hls=e,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.firstLevel=-1,this.media=null,this.restrictedLevels=[],this.timer=void 0,this.clientRect=null,this.registerListeners()}var t,n,a,s=e.prototype;return s.setStreamController=function(e){this.streamController=e},s.destroy=function(){this.unregisterListener(),this.hls.config.capLevelToPlayerSize&&this.stopCapping(),this.media=null,this.clientRect=null,this.hls=this.streamController=null},s.registerListeners=function(){var e=this.hls;e.on(r.Events.FPS_DROP_LEVEL_CAPPING,this.onFpsDropLevelCapping,this),e.on(r.Events.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(r.Events.MANIFEST_PARSED,this.onManifestParsed,this),e.on(r.Events.BUFFER_CODECS,this.onBufferCodecs,this),e.on(r.Events.MEDIA_DETACHING,this.onMediaDetaching,this)},s.unregisterListener=function(){var e=this.hls;e.off(r.Events.FPS_DROP_LEVEL_CAPPING,this.onFpsDropLevelCapping,this),e.off(r.Events.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(r.Events.MANIFEST_PARSED,this.onManifestParsed,this),e.off(r.Events.BUFFER_CODECS,this.onBufferCodecs,this),e.off(r.Events.MEDIA_DETACHING,this.onMediaDetaching,this)},s.onFpsDropLevelCapping=function(t,n){e.isLevelAllowed(n.droppedLevel,this.restrictedLevels)&&this.restrictedLevels.push(n.droppedLevel)},s.onMediaAttaching=function(e,t){this.media=t.media instanceof HTMLVideoElement?t.media:null},s.onManifestParsed=function(e,t){var n=this.hls;this.restrictedLevels=[],this.firstLevel=t.firstLevel,n.config.capLevelToPlayerSize&&t.video&&this.startCapping()},s.onBufferCodecs=function(e,t){this.hls.config.capLevelToPlayerSize&&t.video&&this.startCapping()},s.onMediaDetaching=function(){this.stopCapping()},s.detectPlayerSize=function(){if(this.media&&this.mediaHeight>0&&this.mediaWidth>0){var e=this.hls.levels;if(e.length){var t=this.hls;t.autoLevelCapping=this.getMaxLevel(e.length-1),t.autoLevelCapping>this.autoLevelCapping&&this.streamController&&this.streamController.nextLevelSwitch(),this.autoLevelCapping=t.autoLevelCapping}}},s.getMaxLevel=function(t){var n=this,r=this.hls.levels;if(!r.length)return-1;var i=r.filter((function(r,i){return e.isLevelAllowed(i,n.restrictedLevels)&&i<=t}));return this.clientRect=null,e.getMaxLevelByMediaSize(i,this.mediaWidth,this.mediaHeight)},s.startCapping=function(){this.timer||(this.autoLevelCapping=Number.POSITIVE_INFINITY,this.hls.firstLevel=this.getMaxLevel(this.firstLevel),self.clearInterval(this.timer),this.timer=self.setInterval(this.detectPlayerSize.bind(this),1e3),this.detectPlayerSize())},s.stopCapping=function(){this.restrictedLevels=[],this.firstLevel=-1,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.timer&&(self.clearInterval(this.timer),this.timer=void 0)},s.getDimensions=function(){if(this.clientRect)return this.clientRect;var e=this.media,t={width:0,height:0};if(e){var n=e.getBoundingClientRect();t.width=n.width,t.height=n.height,t.width||t.height||(t.width=n.right-n.left||e.width||0,t.height=n.bottom-n.top||e.height||0)}return this.clientRect=t,t},e.isLevelAllowed=function(e,t){return void 0===t&&(t=[]),-1===t.indexOf(e)},e.getMaxLevelByMediaSize=function(e,t,n){if(!e||!e.length)return-1;for(var r,i,a=e.length-1,s=0;s<e.length;s+=1){var o=e[s];if((o.width>=t||o.height>=n)&&(r=o,!(i=e[s+1])||r.width!==i.width||r.height!==i.height)){a=s;break}}return a},t=e,(n=[{key:"mediaWidth",get:function(){return this.getDimensions().width*this.contentScaleFactor}},{key:"mediaHeight",get:function(){return this.getDimensions().height*this.contentScaleFactor}},{key:"contentScaleFactor",get:function(){var e=1;if(!this.hls.config.ignoreDevicePixelRatio)try{e=self.devicePixelRatio}catch(t){}return e}}])&&i(t.prototype,n),a&&i(t,a),Object.defineProperty(t,"prototype",{writable:!1}),e}()},"./src/controller/cmcd-controller.ts":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return h}});var r=n("./src/events.ts"),i=n("./src/types/cmcd.ts"),a=n("./src/utils/buffer-helper.ts"),s=n("./src/utils/logger.ts");function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function u(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){if(e){if("string"===typeof e)return l(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?l(e,t):void 0}}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0;return function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function d(){return d=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},d.apply(this,arguments)}var h=function(){function e(t){var n=this;this.hls=void 0,this.config=void 0,this.media=void 0,this.sid=void 0,this.cid=void 0,this.useHeaders=!1,this.initialized=!1,this.starved=!1,this.buffering=!0,this.audioBuffer=void 0,this.videoBuffer=void 0,this.onWaiting=function(){n.initialized&&(n.starved=!0),n.buffering=!0},this.onPlaying=function(){n.initialized||(n.initialized=!0),n.buffering=!1},this.applyPlaylistData=function(e){try{n.apply(e,{ot:i.CMCDObjectType.MANIFEST,su:!n.initialized})}catch(t){s.logger.warn("Could not generate manifest CMCD data.",t)}},this.applyFragmentData=function(e){try{var t=e.frag,r=n.hls.levels[t.level],a=n.getObjectType(t),o={d:1e3*t.duration,ot:a};a!==i.CMCDObjectType.VIDEO&&a!==i.CMCDObjectType.AUDIO&&a!=i.CMCDObjectType.MUXED||(o.br=r.bitrate/1e3,o.tb=n.getTopBandwidth(a)/1e3,o.bl=n.getBufferLength(a)),n.apply(e,o)}catch(c){s.logger.warn("Could not generate segment CMCD data.",c)}},this.hls=t;var r=this.config=t.config,a=r.cmcd;null!=a&&(r.pLoader=this.createPlaylistLoader(),r.fLoader=this.createFragmentLoader(),this.sid=a.sessionId||e.uuid(),this.cid=a.contentId,this.useHeaders=!0===a.useHeaders,this.registerListeners())}var t=e.prototype;return t.registerListeners=function(){var e=this.hls;e.on(r.Events.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(r.Events.MEDIA_DETACHED,this.onMediaDetached,this),e.on(r.Events.BUFFER_CREATED,this.onBufferCreated,this)},t.unregisterListeners=function(){var e=this.hls;e.off(r.Events.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(r.Events.MEDIA_DETACHED,this.onMediaDetached,this),e.off(r.Events.BUFFER_CREATED,this.onBufferCreated,this),this.onMediaDetached()},t.destroy=function(){this.unregisterListeners(),this.hls=this.config=this.audioBuffer=this.videoBuffer=null},t.onMediaAttached=function(e,t){this.media=t.media,this.media.addEventListener("waiting",this.onWaiting),this.media.addEventListener("playing",this.onPlaying)},t.onMediaDetached=function(){this.media&&(this.media.removeEventListener("waiting",this.onWaiting),this.media.removeEventListener("playing",this.onPlaying),this.media=null)},t.onBufferCreated=function(e,t){var n,r;this.audioBuffer=null===(n=t.tracks.audio)||void 0===n?void 0:n.buffer,this.videoBuffer=null===(r=t.tracks.video)||void 0===r?void 0:r.buffer},t.createData=function(){var e;return{v:i.CMCDVersion,sf:i.CMCDStreamingFormat.HLS,sid:this.sid,cid:this.cid,pr:null===(e=this.media)||void 0===e?void 0:e.playbackRate,mtp:this.hls.bandwidthEstimate/1e3}},t.apply=function(t,n){void 0===n&&(n={}),d(n,this.createData());var r=n.ot===i.CMCDObjectType.INIT||n.ot===i.CMCDObjectType.VIDEO||n.ot===i.CMCDObjectType.MUXED;if(this.starved&&r&&(n.bs=!0,n.su=!0,this.starved=!1),null==n.su&&(n.su=this.buffering),this.useHeaders){var a=e.toHeaders(n);if(!Object.keys(a).length)return;t.headers||(t.headers={}),d(t.headers,a)}else{var s=e.toQuery(n);if(!s)return;t.url=e.appendQueryToUri(t.url,s)}},t.getObjectType=function(e){var t=e.type;return"subtitle"===t?i.CMCDObjectType.TIMED_TEXT:"initSegment"===e.sn?i.CMCDObjectType.INIT:"audio"===t?i.CMCDObjectType.AUDIO:"main"===t?this.hls.audioTracks.length?i.CMCDObjectType.VIDEO:i.CMCDObjectType.MUXED:void 0},t.getTopBandwidth=function(e){var t,n=0,r=this.hls;if(e===i.CMCDObjectType.AUDIO)t=r.audioTracks;else{var a=r.maxAutoLevel,s=a>-1?a+1:r.levels.length;t=r.levels.slice(0,s)}for(var o,c=u(t);!(o=c()).done;){var l=o.value;l.bitrate>n&&(n=l.bitrate)}return n>0?n:NaN},t.getBufferLength=function(e){var t=this.hls.media,n=e===i.CMCDObjectType.AUDIO?this.audioBuffer:this.videoBuffer;return n&&t?1e3*a.BufferHelper.bufferInfo(n,t.currentTime,this.config.maxBufferHole).len:NaN},t.createPlaylistLoader=function(){var e=this.config.pLoader,t=this.applyPlaylistData,n=e||this.config.loader;return function(){function e(e){this.loader=void 0,this.loader=new n(e)}var r=e.prototype;return r.destroy=function(){this.loader.destroy()},r.abort=function(){this.loader.abort()},r.load=function(e,n,r){t(e),this.loader.load(e,n,r)},c(e,[{key:"stats",get:function(){return this.loader.stats}},{key:"context",get:function(){return this.loader.context}}]),e}()},t.createFragmentLoader=function(){var e=this.config.fLoader,t=this.applyFragmentData,n=e||this.config.loader;return function(){function e(e){this.loader=void 0,this.loader=new n(e)}var r=e.prototype;return r.destroy=function(){this.loader.destroy()},r.abort=function(){this.loader.abort()},r.load=function(e,n,r){t(e),this.loader.load(e,n,r)},c(e,[{key:"stats",get:function(){return this.loader.stats}},{key:"context",get:function(){return this.loader.context}}]),e}()},e.uuid=function(){var e=URL.createObjectURL(new Blob),t=e.toString();return URL.revokeObjectURL(e),t.slice(t.lastIndexOf("/")+1)},e.serialize=function(e){for(var t,n=[],r=function(e){return!Number.isNaN(e)&&null!=e&&""!==e&&!1!==e},i=function(e){return Math.round(e)},a=function(e){return 100*i(e/100)},s={br:i,d:i,bl:a,dl:a,mtp:a,nor:function(e){return encodeURIComponent(e)},rtp:a,tb:i},o=u(Object.keys(e||{}).sort());!(t=o()).done;){var c=t.value,l=e[c];if(r(l)&&("v"!==c||1!==l)&&("pr"!=c||1!==l)){var d=s[c];d&&(l=d(l));var h=typeof l,f=void 0;f="ot"===c||"sf"===c||"st"===c?c+"="+l:"boolean"===h?c:"number"===h?c+"="+l:c+"="+JSON.stringify(l),n.push(f)}}return n.join(",")},e.toHeaders=function(t){for(var n={},r=["Object","Request","Session","Status"],i=[{},{},{},{}],a={br:0,d:0,ot:0,tb:0,bl:1,dl:1,mtp:1,nor:1,nrr:1,su:1,cid:2,pr:2,sf:2,sid:2,st:2,v:2,bs:3,rtp:3},s=0,o=Object.keys(t);s<o.length;s++){var c=o[s];i[null!=a[c]?a[c]:1][c]=t[c]}for(var u=0;u<i.length;u++){var l=e.serialize(i[u]);l&&(n["CMCD-"+r[u]]=l)}return n},e.toQuery=function(t){return"CMCD="+encodeURIComponent(e.serialize(t))},e.appendQueryToUri=function(e,t){if(!t)return e;var n=e.includes("?")?"&":"?";return""+e+n+t},e}()},"./src/controller/eme-controller.ts":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return c}});var r=n("./src/events.ts"),i=n("./src/errors.ts"),a=n("./src/utils/logger.ts"),s=n("./src/utils/mediakeys-helper.ts");function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var c=function(){function e(e){this.hls=void 0,this._widevineLicenseUrl=void 0,this._licenseXhrSetup=void 0,this._licenseResponseCallback=void 0,this._emeEnabled=void 0,this._requestMediaKeySystemAccess=void 0,this._drmSystemOptions=void 0,this._config=void 0,this._mediaKeysList=[],this._media=null,this._hasSetMediaKeys=!1,this._requestLicenseFailureCount=0,this.mediaKeysPromise=null,this._onMediaEncrypted=this.onMediaEncrypted.bind(this),this.hls=e,this._config=e.config,this._widevineLicenseUrl=this._config.widevineLicenseUrl,this._licenseXhrSetup=this._config.licenseXhrSetup,this._licenseResponseCallback=this._config.licenseResponseCallback,this._emeEnabled=this._config.emeEnabled,this._requestMediaKeySystemAccess=this._config.requestMediaKeySystemAccessFunc,this._drmSystemOptions=this._config.drmSystemOptions,this._registerListeners()}var t,n,c,u=e.prototype;return u.destroy=function(){this._unregisterListeners(),this.hls=this._onMediaEncrypted=null,this._requestMediaKeySystemAccess=null},u._registerListeners=function(){this.hls.on(r.Events.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.on(r.Events.MEDIA_DETACHED,this.onMediaDetached,this),this.hls.on(r.Events.MANIFEST_PARSED,this.onManifestParsed,this)},u._unregisterListeners=function(){this.hls.off(r.Events.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.off(r.Events.MEDIA_DETACHED,this.onMediaDetached,this),this.hls.off(r.Events.MANIFEST_PARSED,this.onManifestParsed,this)},u.getLicenseServerUrl=function(e){switch(e){case s.KeySystems.WIDEVINE:if(!this._widevineLicenseUrl)break;return this._widevineLicenseUrl}throw new Error('no license server URL configured for key-system "'+e+'"')},u._attemptKeySystemAccess=function(e,t,n){var r=this,i=function(e,t,n,r){if(e===s.KeySystems.WIDEVINE)return function(e,t,n){var r={audioCapabilities:[],videoCapabilities:[]};return e.forEach((function(e){r.audioCapabilities.push({contentType:'audio/mp4; codecs="'+e+'"',robustness:n.audioRobustness||""})})),t.forEach((function(e){r.videoCapabilities.push({contentType:'video/mp4; codecs="'+e+'"',robustness:n.videoRobustness||""})})),[r]}(t,n,r);throw new Error("Unknown key-system: "+e)}(e,t,n,this._drmSystemOptions);a.logger.log("Requesting encrypted media key-system access");var o=this.requestMediaKeySystemAccess(e,i);this.mediaKeysPromise=o.then((function(t){return r._onMediaKeySystemAccessObtained(e,t)})),o.catch((function(t){a.logger.error('Failed to obtain key-system "'+e+'" access:',t)}))},u._onMediaKeySystemAccessObtained=function(e,t){var n=this;a.logger.log('Access for key-system "'+e+'" obtained');var r={mediaKeysSessionInitialized:!1,mediaKeySystemAccess:t,mediaKeySystemDomain:e};this._mediaKeysList.push(r);var i=Promise.resolve().then((function(){return t.createMediaKeys()})).then((function(t){return r.mediaKeys=t,a.logger.log('Media-keys created for key-system "'+e+'"'),n._onMediaKeysCreated(),t}));return i.catch((function(e){a.logger.error("Failed to create media-keys:",e)})),i},u._onMediaKeysCreated=function(){var e=this;this._mediaKeysList.forEach((function(t){t.mediaKeysSession||(t.mediaKeysSession=t.mediaKeys.createSession(),e._onNewMediaKeySession(t.mediaKeysSession))}))},u._onNewMediaKeySession=function(e){var t=this;a.logger.log("New key-system session "+e.sessionId),e.addEventListener("message",(function(n){t._onKeySessionMessage(e,n.message)}),!1)},u._onKeySessionMessage=function(e,t){a.logger.log("Got EME message event, creating license request"),this._requestLicense(t,(function(t){a.logger.log("Received license data (length: "+(t?t.byteLength:t)+"), updating key-session"),e.update(t).catch((function(e){a.logger.warn("Updating key-session failed: "+e)}))}))},u.onMediaEncrypted=function(e){var t=this;if(a.logger.log('Media is encrypted using "'+e.initDataType+'" init data type'),!this.mediaKeysPromise)return a.logger.error("Fatal: Media is encrypted but no CDM access or no keys have been requested"),void this.hls.trigger(r.Events.ERROR,{type:i.ErrorTypes.KEY_SYSTEM_ERROR,details:i.ErrorDetails.KEY_SYSTEM_NO_KEYS,fatal:!0});var n=function(n){t._media&&(t._attemptSetMediaKeys(n),t._generateRequestWithPreferredKeySession(e.initDataType,e.initData))};this.mediaKeysPromise.then(n).catch(n)},u._attemptSetMediaKeys=function(e){if(!this._media)throw new Error("Attempted to set mediaKeys without first attaching a media element");if(!this._hasSetMediaKeys){var t=this._mediaKeysList[0];if(!t||!t.mediaKeys)return a.logger.error("Fatal: Media is encrypted but no CDM access or no keys have been obtained yet"),void this.hls.trigger(r.Events.ERROR,{type:i.ErrorTypes.KEY_SYSTEM_ERROR,details:i.ErrorDetails.KEY_SYSTEM_NO_KEYS,fatal:!0});a.logger.log("Setting keys for encrypted media"),this._media.setMediaKeys(t.mediaKeys),this._hasSetMediaKeys=!0}},u._generateRequestWithPreferredKeySession=function(e,t){var n=this,s=this._mediaKeysList[0];if(!s)return a.logger.error("Fatal: Media is encrypted but not any key-system access has been obtained yet"),void this.hls.trigger(r.Events.ERROR,{type:i.ErrorTypes.KEY_SYSTEM_ERROR,details:i.ErrorDetails.KEY_SYSTEM_NO_ACCESS,fatal:!0});if(s.mediaKeysSessionInitialized)a.logger.warn("Key-Session already initialized but requested again");else{var o=s.mediaKeysSession;if(!o)return a.logger.error("Fatal: Media is encrypted but no key-session existing"),void this.hls.trigger(r.Events.ERROR,{type:i.ErrorTypes.KEY_SYSTEM_ERROR,details:i.ErrorDetails.KEY_SYSTEM_NO_SESSION,fatal:!0});if(!t)return a.logger.warn("Fatal: initData required for generating a key session is null"),void this.hls.trigger(r.Events.ERROR,{type:i.ErrorTypes.KEY_SYSTEM_ERROR,details:i.ErrorDetails.KEY_SYSTEM_NO_INIT_DATA,fatal:!0});a.logger.log('Generating key-session request for "'+e+'" init data type'),s.mediaKeysSessionInitialized=!0,o.generateRequest(e,t).then((function(){a.logger.debug("Key-session generation succeeded")})).catch((function(e){a.logger.error("Error generating key-session request:",e),n.hls.trigger(r.Events.ERROR,{type:i.ErrorTypes.KEY_SYSTEM_ERROR,details:i.ErrorDetails.KEY_SYSTEM_NO_SESSION,fatal:!1})}))}},u._createLicenseXhr=function(e,t,n){var r=new XMLHttpRequest;r.responseType="arraybuffer",r.onreadystatechange=this._onLicenseRequestReadyStageChange.bind(this,r,e,t,n);var i=this._licenseXhrSetup;if(i)try{i.call(this.hls,r,e),i=void 0}catch(s){a.logger.error(s)}try{r.readyState||r.open("POST",e,!0),i&&i.call(this.hls,r,e)}catch(s){throw new Error("issue setting up KeySystem license XHR "+s)}return r},u._onLicenseRequestReadyStageChange=function(e,t,n,s){if(4===e.readyState)if(200===e.status){this._requestLicenseFailureCount=0,a.logger.log("License request succeeded");var o=e.response,c=this._licenseResponseCallback;if(c)try{o=c.call(this.hls,e,t)}catch(l){a.logger.error(l)}s(o)}else{if(a.logger.error("License Request XHR failed ("+t+"). Status: "+e.status+" ("+e.statusText+")"),this._requestLicenseFailureCount++,this._requestLicenseFailureCount>3)return void this.hls.trigger(r.Events.ERROR,{type:i.ErrorTypes.KEY_SYSTEM_ERROR,details:i.ErrorDetails.KEY_SYSTEM_LICENSE_REQUEST_FAILED,fatal:!0});var u=3-this._requestLicenseFailureCount+1;a.logger.warn("Retrying license request, "+u+" attempts left"),this._requestLicense(n,s)}},u._generateLicenseRequestChallenge=function(e,t){if(e.mediaKeySystemDomain===s.KeySystems.WIDEVINE)return t;throw new Error("unsupported key-system: "+e.mediaKeySystemDomain)},u._requestLicense=function(e,t){a.logger.log("Requesting content license for key-system");var n=this._mediaKeysList[0];if(!n)return a.logger.error("Fatal error: Media is encrypted but no key-system access has been obtained yet"),void this.hls.trigger(r.Events.ERROR,{type:i.ErrorTypes.KEY_SYSTEM_ERROR,details:i.ErrorDetails.KEY_SYSTEM_NO_ACCESS,fatal:!0});try{var s=this.getLicenseServerUrl(n.mediaKeySystemDomain),o=this._createLicenseXhr(s,e,t);a.logger.log("Sending license request to URL: "+s);var c=this._generateLicenseRequestChallenge(n,e);o.send(c)}catch(u){a.logger.error("Failure requesting DRM license: "+u),this.hls.trigger(r.Events.ERROR,{type:i.ErrorTypes.KEY_SYSTEM_ERROR,details:i.ErrorDetails.KEY_SYSTEM_LICENSE_REQUEST_FAILED,fatal:!0})}},u.onMediaAttached=function(e,t){if(this._emeEnabled){var n=t.media;this._media=n,n.addEventListener("encrypted",this._onMediaEncrypted)}},u.onMediaDetached=function(){var e=this._media,t=this._mediaKeysList;e&&(e.removeEventListener("encrypted",this._onMediaEncrypted),this._media=null,this._mediaKeysList=[],Promise.all(t.map((function(e){if(e.mediaKeysSession)return e.mediaKeysSession.close().catch((function(){}))}))).then((function(){return e.setMediaKeys(null)})).catch((function(){})))},u.onManifestParsed=function(e,t){if(this._emeEnabled){var n=t.levels.map((function(e){return e.audioCodec})).filter((function(e){return!!e})),r=t.levels.map((function(e){return e.videoCodec})).filter((function(e){return!!e}));this._attemptKeySystemAccess(s.KeySystems.WIDEVINE,n,r)}},t=e,(n=[{key:"requestMediaKeySystemAccess",get:function(){if(!this._requestMediaKeySystemAccess)throw new Error("No requestMediaKeySystemAccess function configured");return this._requestMediaKeySystemAccess}}])&&o(t.prototype,n),c&&o(t,c),Object.defineProperty(t,"prototype",{writable:!1}),e}()},"./src/controller/fps-controller.ts":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return a}});var r=n("./src/events.ts"),i=n("./src/utils/logger.ts"),a=function(){function e(e){this.hls=void 0,this.isVideoPlaybackQualityAvailable=!1,this.timer=void 0,this.media=null,this.lastTime=void 0,this.lastDroppedFrames=0,this.lastDecodedFrames=0,this.streamController=void 0,this.hls=e,this.registerListeners()}var t=e.prototype;return t.setStreamController=function(e){this.streamController=e},t.registerListeners=function(){this.hls.on(r.Events.MEDIA_ATTACHING,this.onMediaAttaching,this)},t.unregisterListeners=function(){this.hls.off(r.Events.MEDIA_ATTACHING,this.onMediaAttaching)},t.destroy=function(){this.timer&&clearInterval(this.timer),this.unregisterListeners(),this.isVideoPlaybackQualityAvailable=!1,this.media=null},t.onMediaAttaching=function(e,t){var n=this.hls.config;if(n.capLevelOnFPSDrop){var r=t.media instanceof self.HTMLVideoElement?t.media:null;this.media=r,r&&"function"===typeof r.getVideoPlaybackQuality&&(this.isVideoPlaybackQualityAvailable=!0),self.clearInterval(this.timer),this.timer=self.setInterval(this.checkFPSInterval.bind(this),n.fpsDroppedMonitoringPeriod)}},t.checkFPS=function(e,t,n){var a=performance.now();if(t){if(this.lastTime){var s=a-this.lastTime,o=n-this.lastDroppedFrames,c=t-this.lastDecodedFrames,u=1e3*o/s,l=this.hls;if(l.trigger(r.Events.FPS_DROP,{currentDropped:o,currentDecoded:c,totalDroppedFrames:n}),u>0&&o>l.config.fpsDroppedMonitoringThreshold*c){var d=l.currentLevel;i.logger.warn("drop FPS ratio greater than max allowed value for currentLevel: "+d),d>0&&(-1===l.autoLevelCapping||l.autoLevelCapping>=d)&&(d-=1,l.trigger(r.Events.FPS_DROP_LEVEL_CAPPING,{level:d,droppedLevel:l.currentLevel}),l.autoLevelCapping=d,this.streamController.nextLevelSwitch())}}this.lastTime=a,this.lastDroppedFrames=n,this.lastDecodedFrames=t}},t.checkFPSInterval=function(){var e=this.media;if(e)if(this.isVideoPlaybackQualityAvailable){var t=e.getVideoPlaybackQuality();this.checkFPS(e,t.totalVideoFrames,t.droppedVideoFrames)}else this.checkFPS(e,e.webkitDecodedFrameCount,e.webkitDroppedFrameCount)},e}()},"./src/controller/fragment-finders.ts":function(e,t,n){"use strict";n.r(t),n.d(t,{findFragWithCC:function(){return u},findFragmentByPDT:function(){return a},findFragmentByPTS:function(){return s},fragmentWithinToleranceTest:function(){return o},pdtWithinToleranceTest:function(){return c}});var r=n("./src/polyfills/number.ts"),i=n("./src/utils/binary-search.ts");function a(e,t,n){if(null===t||!Array.isArray(e)||!e.length||!(0,r.isFiniteNumber)(t))return null;if(t<(e[0].programDateTime||0))return null;if(t>=(e[e.length-1].endProgramDateTime||0))return null;n=n||0;for(var i=0;i<e.length;++i){var a=e[i];if(c(t,n,a))return a}return null}function s(e,t,n,r){void 0===n&&(n=0),void 0===r&&(r=0);var a=null;if(e?a=t[e.sn-t[0].sn+1]||null:0===n&&0===t[0].start&&(a=t[0]),a&&0===o(n,r,a))return a;var s=i.default.search(t,o.bind(null,n,r));return s||a}function o(e,t,n){void 0===e&&(e=0),void 0===t&&(t=0);var r=Math.min(t,n.duration+(n.deltaPTS?n.deltaPTS:0));return n.start+n.duration-r<=e?1:n.start-r>e&&n.start?-1:0}function c(e,t,n){var r=1e3*Math.min(t,n.duration+(n.deltaPTS?n.deltaPTS:0));return(n.endProgramDateTime||0)-r>e}function u(e,t){return i.default.search(e,(function(e){return e.cc<t?1:e.cc>t?-1:0}))}},"./src/controller/fragment-tracker.ts":function(e,t,n){"use strict";n.r(t),n.d(t,{FragmentState:function(){return r},FragmentTracker:function(){return o}});var r,i,a=n("./src/events.ts"),s=n("./src/types/loader.ts");(i=r||(r={})).NOT_LOADED="NOT_LOADED",i.APPENDING="APPENDING",i.PARTIAL="PARTIAL",i.OK="OK";var o=function(){function e(e){this.activeFragment=null,this.activeParts=null,this.fragments=Object.create(null),this.timeRanges=Object.create(null),this.bufferPadding=.2,this.hls=void 0,this.hls=e,this._registerListeners()}var t=e.prototype;return t._registerListeners=function(){var e=this.hls;e.on(a.Events.BUFFER_APPENDED,this.onBufferAppended,this),e.on(a.Events.FRAG_BUFFERED,this.onFragBuffered,this),e.on(a.Events.FRAG_LOADED,this.onFragLoaded,this)},t._unregisterListeners=function(){var e=this.hls;e.off(a.Events.BUFFER_APPENDED,this.onBufferAppended,this),e.off(a.Events.FRAG_BUFFERED,this.onFragBuffered,this),e.off(a.Events.FRAG_LOADED,this.onFragLoaded,this)},t.destroy=function(){this._unregisterListeners(),this.fragments=this.timeRanges=null},t.getAppendedFrag=function(e,t){if(t===s.PlaylistLevelType.MAIN){var n=this.activeFragment,r=this.activeParts;if(!n)return null;if(r)for(var i=r.length;i--;){var a=r[i],o=a?a.end:n.appendedPTS;if(a.start<=e&&void 0!==o&&e<=o)return i>9&&(this.activeParts=r.slice(i-9)),a}else if(n.start<=e&&void 0!==n.appendedPTS&&e<=n.appendedPTS)return n}return this.getBufferedFrag(e,t)},t.getBufferedFrag=function(e,t){for(var n=this.fragments,r=Object.keys(n),i=r.length;i--;){var a=n[r[i]];if((null===a||void 0===a?void 0:a.body.type)===t&&a.buffered){var s=a.body;if(s.start<=e&&e<=s.end)return s}}return null},t.detectEvictedFragments=function(e,t,n){var r=this;Object.keys(this.fragments).forEach((function(i){var a=r.fragments[i];if(a)if(a.buffered){var s=a.range[e];s&&s.time.some((function(e){var n=!r.isTimeBuffered(e.startPTS,e.endPTS,t);return n&&r.removeFragment(a.body),n}))}else a.body.type===n&&r.removeFragment(a.body)}))},t.detectPartialFragments=function(e){var t=this,n=this.timeRanges,r=e.frag,i=e.part;if(n&&"initSegment"!==r.sn){var a=u(r),s=this.fragments[a];s&&(Object.keys(n).forEach((function(e){var a=r.elementaryStreams[e];if(a){var o=n[e],c=null!==i||!0===a.partial;s.range[e]=t.getBufferedTimes(r,i,c,o)}})),s.loaded=null,Object.keys(s.range).length?s.buffered=!0:this.removeFragment(s.body))}},t.fragBuffered=function(e){var t=u(e),n=this.fragments[t];n&&(n.loaded=null,n.buffered=!0)},t.getBufferedTimes=function(e,t,n,r){for(var i={time:[],partial:n},a=t?t.start:e.start,s=t?t.end:e.end,o=e.minEndPTS||s,c=e.maxStartPTS||a,u=0;u<r.length;u++){var l=r.start(u)-this.bufferPadding,d=r.end(u)+this.bufferPadding;if(c>=l&&o<=d){i.time.push({startPTS:Math.max(a,r.start(u)),endPTS:Math.min(s,r.end(u))});break}if(a<d&&s>l)i.partial=!0,i.time.push({startPTS:Math.max(a,r.start(u)),endPTS:Math.min(s,r.end(u))});else if(s<=l)break}return i},t.getPartialFragment=function(e){var t,n,r,i=null,a=0,s=this.bufferPadding,o=this.fragments;return Object.keys(o).forEach((function(u){var l=o[u];l&&c(l)&&(n=l.body.start-s,r=l.body.end+s,e>=n&&e<=r&&(t=Math.min(e-n,r-e),a<=t&&(i=l.body,a=t)))})),i},t.getState=function(e){var t=u(e),n=this.fragments[t];return n?n.buffered?c(n)?r.PARTIAL:r.OK:r.APPENDING:r.NOT_LOADED},t.isTimeBuffered=function(e,t,n){for(var r,i,a=0;a<n.length;a++){if(r=n.start(a)-this.bufferPadding,i=n.end(a)+this.bufferPadding,e>=r&&t<=i)return!0;if(t<=r)return!1}return!1},t.onFragLoaded=function(e,t){var n=t.frag,r=t.part;if("initSegment"!==n.sn&&!n.bitrateTest&&!r){var i=u(n);this.fragments[i]={body:n,loaded:t,buffered:!1,range:Object.create(null)}}},t.onBufferAppended=function(e,t){var n=this,r=t.frag,i=t.part,a=t.timeRanges;if(r.type===s.PlaylistLevelType.MAIN)if(this.activeFragment=r,i){var o=this.activeParts;o||(this.activeParts=o=[]),o.push(i)}else this.activeParts=null;this.timeRanges=a,Object.keys(a).forEach((function(e){var t=a[e];if(n.detectEvictedFragments(e,t),!i)for(var s=0;s<t.length;s++)r.appendedPTS=Math.max(t.end(s),r.appendedPTS||0)}))},t.onFragBuffered=function(e,t){this.detectPartialFragments(t)},t.hasFragment=function(e){var t=u(e);return!!this.fragments[t]},t.removeFragmentsInRange=function(e,t,n){var r=this;Object.keys(this.fragments).forEach((function(i){var a=r.fragments[i];if(a&&a.buffered){var s=a.body;s.type===n&&s.start<t&&s.end>e&&r.removeFragment(s)}}))},t.removeFragment=function(e){var t=u(e);e.stats.loaded=0,e.clearElementaryStreamInfo(),delete this.fragments[t]},t.removeAllFragments=function(){this.fragments=Object.create(null),this.activeFragment=null,this.activeParts=null},e}();function c(e){var t,n;return e.buffered&&((null===(t=e.range.video)||void 0===t?void 0:t.partial)||(null===(n=e.range.audio)||void 0===n?void 0:n.partial))}function u(e){return e.type+"_"+e.level+"_"+e.urlId+"_"+e.sn}},"./src/controller/gap-controller.ts":function(e,t,n){"use strict";n.r(t),n.d(t,{MAX_START_GAP_JUMP:function(){return c},SKIP_BUFFER_HOLE_STEP_SECONDS:function(){return u},SKIP_BUFFER_RANGE_START:function(){return l},STALL_MINIMUM_DURATION_MS:function(){return o},default:function(){return d}});var r=n("./src/utils/buffer-helper.ts"),i=n("./src/errors.ts"),a=n("./src/events.ts"),s=n("./src/utils/logger.ts"),o=250,c=2,u=.1,l=.05,d=function(){function e(e,t,n,r){this.config=void 0,this.media=null,this.fragmentTracker=void 0,this.hls=void 0,this.nudgeRetry=0,this.stallReported=!1,this.stalled=null,this.moved=!1,this.seeking=!1,this.config=e,this.media=t,this.fragmentTracker=n,this.hls=r}var t=e.prototype;return t.destroy=function(){this.media=null,this.hls=this.fragmentTracker=null},t.poll=function(e,t){var n=this.config,i=this.media,a=this.stalled;if(null!==i){var u=i.currentTime,l=i.seeking,d=this.seeking&&!l,h=!this.seeking&&l;if(this.seeking=l,u===e){if((h||d)&&(this.stalled=null),!(i.paused&&!l||i.ended||0===i.playbackRate)&&r.BufferHelper.getBuffered(i).length){var f=r.BufferHelper.bufferInfo(i,u,0),p=f.len>0,v=f.nextStart||0;if(p||v){if(l){var m=f.len>c,g=!v||t&&t.start<=u||v-u>c&&!this.fragmentTracker.getPartialFragment(u);if(m||g)return;this.moved=!1}if(!this.moved&&null!==this.stalled){var y,b=Math.max(v,f.start||0)-u,k=this.hls.levels?this.hls.levels[this.hls.currentLevel]:null,x=(null===k||void 0===k||null===(y=k.details)||void 0===y?void 0:y.live)?2*k.details.targetduration:c;if(b>0&&b<=x)return void this._trySkipBufferHole(null)}var w=self.performance.now();if(null!==a){var T=w-a;if(l||!(T>=o)||(this._reportStall(f),this.media)){var E=r.BufferHelper.bufferInfo(i,u,n.maxBufferHole);this._tryFixBufferStall(E,T)}}else this.stalled=w}}}else if(this.moved=!0,null!==a){if(this.stallReported){var _=self.performance.now()-a;s.logger.warn("playback not stuck anymore @"+u+", after "+Math.round(_)+"ms"),this.stallReported=!1}this.stalled=null,this.nudgeRetry=0}}},t._tryFixBufferStall=function(e,t){var n=this.config,r=this.fragmentTracker,i=this.media;if(null!==i){var a=i.currentTime,o=r.getPartialFragment(a);if(o&&(this._trySkipBufferHole(o)||!this.media))return;e.len>n.maxBufferHole&&t>1e3*n.highBufferWatchdogPeriod&&(s.logger.warn("Trying to nudge playhead over buffer-hole"),this.stalled=null,this._tryNudgeBuffer())}},t._reportStall=function(e){var t=this.hls,n=this.media;!this.stallReported&&n&&(this.stallReported=!0,s.logger.warn("Playback stalling at @"+n.currentTime+" due to low buffer ("+JSON.stringify(e)+")"),t.trigger(a.Events.ERROR,{type:i.ErrorTypes.MEDIA_ERROR,details:i.ErrorDetails.BUFFER_STALLED_ERROR,fatal:!1,buffer:e.len}))},t._trySkipBufferHole=function(e){var t=this.config,n=this.hls,o=this.media;if(null===o)return 0;for(var c=o.currentTime,d=0,h=r.BufferHelper.getBuffered(o),f=0;f<h.length;f++){var p=h.start(f);if(c+t.maxBufferHole>=d&&c<p){var v=Math.max(p+l,o.currentTime+u);return s.logger.warn("skipping hole, adjusting currentTime from "+c+" to "+v),this.moved=!0,this.stalled=null,o.currentTime=v,e&&n.trigger(a.Events.ERROR,{type:i.ErrorTypes.MEDIA_ERROR,details:i.ErrorDetails.BUFFER_SEEK_OVER_HOLE,fatal:!1,reason:"fragment loaded with buffer holes, seeking from "+c+" to "+v,frag:e}),v}d=h.end(f)}return 0},t._tryNudgeBuffer=function(){var e=this.config,t=this.hls,n=this.media,r=this.nudgeRetry;if(null!==n){var o=n.currentTime;if(this.nudgeRetry++,r<e.nudgeMaxRetry){var c=o+(r+1)*e.nudgeOffset;s.logger.warn("Nudging 'currentTime' from "+o+" to "+c),n.currentTime=c,t.trigger(a.Events.ERROR,{type:i.ErrorTypes.MEDIA_ERROR,details:i.ErrorDetails.BUFFER_NUDGE_ON_STALL,fatal:!1})}else s.logger.error("Playhead still not moving while enough data buffered @"+o+" after "+e.nudgeMaxRetry+" nudges"),t.trigger(a.Events.ERROR,{type:i.ErrorTypes.MEDIA_ERROR,details:i.ErrorDetails.BUFFER_STALLED_ERROR,fatal:!0})}},e}()},"./src/controller/id3-track-controller.ts":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return h}});var r=n("./src/polyfills/number.ts"),i=n("./src/events.ts"),a=n("./src/utils/texttrack-utils.ts"),s=n("./src/demux/id3.ts"),o=n("./src/loader/date-range.ts"),c=n("./src/types/demuxer.ts");function u(){return self.WebKitDataCue||self.VTTCue||self.TextTrackCue}var l=function(){var e=u();try{new e(0,Number.POSITIVE_INFINITY,"")}catch(t){return Number.MAX_VALUE}return Number.POSITIVE_INFINITY}();function d(e,t){return e.getTime()/1e3-t}var h=function(){function e(e){this.hls=void 0,this.id3Track=null,this.media=null,this.dateRangeCuesAppended={},this.hls=e,this._registerListeners()}var t=e.prototype;return t.destroy=function(){this._unregisterListeners(),this.id3Track=null,this.media=null,this.dateRangeCuesAppended={},this.hls=null},t._registerListeners=function(){var e=this.hls;e.on(i.Events.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(i.Events.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(i.Events.MANIFEST_LOADING,this.onManifestLoading,this),e.on(i.Events.FRAG_PARSING_METADATA,this.onFragParsingMetadata,this),e.on(i.Events.BUFFER_FLUSHING,this.onBufferFlushing,this),e.on(i.Events.LEVEL_UPDATED,this.onLevelUpdated,this)},t._unregisterListeners=function(){var e=this.hls;e.off(i.Events.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(i.Events.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(i.Events.MANIFEST_LOADING,this.onManifestLoading,this),e.off(i.Events.FRAG_PARSING_METADATA,this.onFragParsingMetadata,this),e.off(i.Events.BUFFER_FLUSHING,this.onBufferFlushing,this),e.off(i.Events.LEVEL_UPDATED,this.onLevelUpdated,this)},t.onMediaAttached=function(e,t){this.media=t.media},t.onMediaDetaching=function(){this.id3Track&&((0,a.clearCurrentCues)(this.id3Track),this.id3Track=null,this.media=null,this.dateRangeCuesAppended={})},t.onManifestLoading=function(){this.dateRangeCuesAppended={}},t.createTrack=function(e){var t=this.getID3Track(e.textTracks);return t.mode="hidden",t},t.getID3Track=function(e){if(this.media){for(var t=0;t<e.length;t++){var n=e[t];if("metadata"===n.kind&&"id3"===n.label)return(0,a.sendAddTrackEvent)(n,this.media),n}return this.media.addTextTrack("metadata","id3")}},t.onFragParsingMetadata=function(e,t){if(this.media){var n=this.hls.config,r=n.enableEmsgMetadataCues,i=n.enableID3MetadataCues;if(r||i){t.frag;var a=t.samples;t.details,this.id3Track||(this.id3Track=this.createTrack(this.media));for(var o=u(),d=0;d<a.length;d++){var h=a[d].type;if((h!==c.MetadataSchema.emsg||r)&&i){var f=s.getID3Frames(a[d].data);if(f){var p=a[d].pts,v=p+a[d].duration;v>l&&(v=l),v-p<=0&&(v=p+.25);for(var m=0;m<f.length;m++){var g=f[m];if(!s.isTimeStampFrame(g)){this.updateId3CueEnds(p);var y=new o(p,v,"");y.value=g,h&&(y.type=h),this.id3Track.addCue(y)}}}}}}}},t.updateId3CueEnds=function(e){var t,n=null===(t=this.id3Track)||void 0===t?void 0:t.cues;if(n)for(var r=n.length;r--;){var i=n[r];i.startTime<e&&i.endTime===l&&(i.endTime=e)}},t.onBufferFlushing=function(e,t){var n=t.startOffset,r=t.endOffset,i=t.type,s=this.id3Track,o=this.hls;if(o){var u,l=o.config,d=l.enableEmsgMetadataCues,h=l.enableID3MetadataCues;s&&(d||h)&&(u="audio"===i?function(e){return e.type===c.MetadataSchema.audioId3&&h}:"video"===i?function(e){return e.type===c.MetadataSchema.emsg&&d}:function(e){return e.type===c.MetadataSchema.audioId3&&h||e.type===c.MetadataSchema.emsg&&d},(0,a.removeCuesInRange)(s,n,r,u))}},t.onLevelUpdated=function(e,t){var n=this,i=t.details;if(this.media&&i.hasProgramDateTime&&this.hls.config.enableDateRangeMetadataCues){var a=this.dateRangeCuesAppended,s=this.id3Track,h=i.dateRanges,f=Object.keys(h);if(s)for(var p=Object.keys(a).filter((function(e){return!f.includes(e)})),v=function(e){var t=p[e];Object.keys(a[t].cues).forEach((function(e){s.removeCue(a[t].cues[e])})),delete a[t]},m=p.length;m--;)v(m);var g=i.fragments[i.fragments.length-1];if(0!==f.length&&(0,r.isFiniteNumber)(null===g||void 0===g?void 0:g.programDateTime)){this.id3Track||(this.id3Track=this.createTrack(this.media));for(var y=g.programDateTime/1e3-g.start,b=u(),k=function(e){var t=f[e],r=h[t],i=a[t],s=(null===i||void 0===i?void 0:i.cues)||{},u=(null===i||void 0===i?void 0:i.durationKnown)||!1,p=d(r.startDate,y),v=l,m=r.endDate;if(m)v=d(m,y),u=!0;else if(r.endOnNext&&!u){var g=f.reduce((function(e,t){var n=h[t];return n.class===r.class&&n.id!==t&&n.startDate>r.startDate&&e.push(n),e}),[]).sort((function(e,t){return e.startDate.getTime()-t.startDate.getTime()}))[0];g&&(v=d(g.startDate,y),u=!0)}for(var k,x=Object.keys(r.attr),w=0;w<x.length;w++){var T=x[w];if(T!==o.DateRangeAttribute.ID&&T!==o.DateRangeAttribute.CLASS&&T!==o.DateRangeAttribute.START_DATE&&T!==o.DateRangeAttribute.DURATION&&T!==o.DateRangeAttribute.END_DATE&&T!==o.DateRangeAttribute.END_ON_NEXT){var E=s[T];if(E)u&&!i.durationKnown&&(E.endTime=v);else{var _=r.attr[T];E=new b(p,v,""),T!==o.DateRangeAttribute.SCTE35_OUT&&T!==o.DateRangeAttribute.SCTE35_IN||(k=_,_=Uint8Array.from(k.replace(/^0x/,"").replace(/([\da-fA-F]{2}) ?/g,"0x$1 ").replace(/ +$/,"").split(" ")).buffer),E.value={key:T,data:_},E.type=c.MetadataSchema.dateRange,n.id3Track.addCue(E),s[T]=E}}}a[t]={cues:s,dateRange:r,durationKnown:u}},x=0;x<f.length;x++)k(x)}}},e}()},"./src/controller/latency-controller.ts":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return o}});var r=n("./src/errors.ts"),i=n("./src/events.ts"),a=n("./src/utils/logger.ts");function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var o=function(){function e(e){var t=this;this.hls=void 0,this.config=void 0,this.media=null,this.levelDetails=null,this.currentTime=0,this.stallCount=0,this._latency=null,this.timeupdateHandler=function(){return t.timeupdate()},this.hls=e,this.config=e.config,this.registerListeners()}var t,n,o,c=e.prototype;return c.destroy=function(){this.unregisterListeners(),this.onMediaDetaching(),this.levelDetails=null,this.hls=this.timeupdateHandler=null},c.registerListeners=function(){this.hls.on(i.Events.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.on(i.Events.MEDIA_DETACHING,this.onMediaDetaching,this),this.hls.on(i.Events.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.on(i.Events.LEVEL_UPDATED,this.onLevelUpdated,this),this.hls.on(i.Events.ERROR,this.onError,this)},c.unregisterListeners=function(){this.hls.off(i.Events.MEDIA_ATTACHED,this.onMediaAttached),this.hls.off(i.Events.MEDIA_DETACHING,this.onMediaDetaching),this.hls.off(i.Events.MANIFEST_LOADING,this.onManifestLoading),this.hls.off(i.Events.LEVEL_UPDATED,this.onLevelUpdated),this.hls.off(i.Events.ERROR,this.onError)},c.onMediaAttached=function(e,t){this.media=t.media,this.media.addEventListener("timeupdate",this.timeupdateHandler)},c.onMediaDetaching=function(){this.media&&(this.media.removeEventListener("timeupdate",this.timeupdateHandler),this.media=null)},c.onManifestLoading=function(){this.levelDetails=null,this._latency=null,this.stallCount=0},c.onLevelUpdated=function(e,t){var n=t.details;this.levelDetails=n,n.advanced&&this.timeupdate(),!n.live&&this.media&&this.media.removeEventListener("timeupdate",this.timeupdateHandler)},c.onError=function(e,t){t.details===r.ErrorDetails.BUFFER_STALLED_ERROR&&(this.stallCount++,a.logger.warn("[playback-rate-controller]: Stall detected, adjusting target latency"))},c.timeupdate=function(){var e=this.media,t=this.levelDetails;if(e&&t){this.currentTime=e.currentTime;var n=this.computeLatency();if(null!==n){this._latency=n;var r=this.config,i=r.lowLatencyMode,a=r.maxLiveSyncPlaybackRate;if(i&&1!==a){var s=this.targetLatency;if(null!==s){var o=n-s,c=o<Math.min(this.maxLatency,s+t.targetduration);if(t.live&&c&&o>.05&&this.forwardBufferLength>1){var u=Math.min(2,Math.max(1,a)),l=Math.round(2/(1+Math.exp(-.75*o-this.edgeStalled))*20)/20;e.playbackRate=Math.min(u,Math.max(1,l))}else 1!==e.playbackRate&&0!==e.playbackRate&&(e.playbackRate=1)}}}}},c.estimateLiveEdge=function(){var e=this.levelDetails;return null===e?null:e.edge+e.age},c.computeLatency=function(){var e=this.estimateLiveEdge();return null===e?null:e-this.currentTime},t=e,(n=[{key:"latency",get:function(){return this._latency||0}},{key:"maxLatency",get:function(){var e=this.config,t=this.levelDetails;return void 0!==e.liveMaxLatencyDuration?e.liveMaxLatencyDuration:t?e.liveMaxLatencyDurationCount*t.targetduration:0}},{key:"targetLatency",get:function(){var e=this.levelDetails;if(null===e)return null;var t=e.holdBack,n=e.partHoldBack,r=e.targetduration,i=this.config,a=i.liveSyncDuration,s=i.liveSyncDurationCount,o=i.lowLatencyMode,c=this.hls.userConfig,u=o&&n||t;(c.liveSyncDuration||c.liveSyncDurationCount||0===u)&&(u=void 0!==a?a:s*r);var l=r;return u+Math.min(1*this.stallCount,l)}},{key:"liveSyncPosition",get:function(){var e=this.estimateLiveEdge(),t=this.targetLatency,n=this.levelDetails;if(null===e||null===t||null===n)return null;var r=n.edge,i=e-t-this.edgeStalled,a=r-n.totalduration,s=r-(this.config.lowLatencyMode&&n.partTarget||n.targetduration);return Math.min(Math.max(a,i),s)}},{key:"drift",get:function(){var e=this.levelDetails;return null===e?1:e.drift}},{key:"edgeStalled",get:function(){var e=this.levelDetails;if(null===e)return 0;var t=3*(this.config.lowLatencyMode&&e.partTarget||e.targetduration);return Math.max(e.age-t,0)}},{key:"forwardBufferLength",get:function(){var e=this.media,t=this.levelDetails;if(!e||!t)return 0;var n=e.buffered.length;return(n?e.buffered.end(n-1):t.edge)-this.currentTime}}])&&s(t.prototype,n),o&&s(t,o),Object.defineProperty(t,"prototype",{writable:!1}),e}()},"./src/controller/level-controller.ts":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return p}});var r=n("./src/types/level.ts"),i=n("./src/events.ts"),a=n("./src/errors.ts"),s=n("./src/utils/codecs.ts"),o=n("./src/controller/level-helper.ts"),c=n("./src/controller/base-playlist-controller.ts"),u=n("./src/types/loader.ts");function l(){return l=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l.apply(this,arguments)}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h(e,t){return h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},h(e,t)}var f=/chrome|firefox/.test(navigator.userAgent.toLowerCase()),p=function(e){var t,n;function c(t){var n;return(n=e.call(this,t,"[level-controller]")||this)._levels=[],n._firstLevel=-1,n._startLevel=void 0,n.currentLevelIndex=-1,n.manualLevelIndex=-1,n.onParsedComplete=void 0,n._registerListeners(),n}n=e,(t=c).prototype=Object.create(n.prototype),t.prototype.constructor=t,h(t,n);var p,v,m,g=c.prototype;return g._registerListeners=function(){var e=this.hls;e.on(i.Events.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(i.Events.LEVEL_LOADED,this.onLevelLoaded,this),e.on(i.Events.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),e.on(i.Events.FRAG_LOADED,this.onFragLoaded,this),e.on(i.Events.ERROR,this.onError,this)},g._unregisterListeners=function(){var e=this.hls;e.off(i.Events.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(i.Events.LEVEL_LOADED,this.onLevelLoaded,this),e.off(i.Events.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),e.off(i.Events.FRAG_LOADED,this.onFragLoaded,this),e.off(i.Events.ERROR,this.onError,this)},g.destroy=function(){this._unregisterListeners(),this.manualLevelIndex=-1,this._levels.length=0,e.prototype.destroy.call(this)},g.startLoad=function(){this._levels.forEach((function(e){e.loadError=0})),e.prototype.startLoad.call(this)},g.onManifestLoaded=function(e,t){var n,c,u=[],l=[],d=[],h={},p=!1,v=!1,m=!1;if(t.levels.forEach((function(e){var t=e.attrs;p=p||!(!e.width||!e.height),v=v||!!e.videoCodec,m=m||!!e.audioCodec,f&&e.audioCodec&&-1!==e.audioCodec.indexOf("mp4a.40.34")&&(e.audioCodec=void 0);var n=e.bitrate+"-"+e.attrs.RESOLUTION+"-"+e.attrs.CODECS;(c=h[n])?c.url.push(e.url):(c=new r.Level(e),h[n]=c,u.push(c)),t&&(t.AUDIO&&(0,o.addGroupId)(c,"audio",t.AUDIO),t.SUBTITLES&&(0,o.addGroupId)(c,"text",t.SUBTITLES))})),(p||v)&&m&&(u=u.filter((function(e){var t=e.videoCodec,n=e.width,r=e.height;return!!t||!(!n||!r)}))),u=u.filter((function(e){var t=e.audioCodec,n=e.videoCodec;return(!t||(0,s.isCodecSupportedInMp4)(t,"audio"))&&(!n||(0,s.isCodecSupportedInMp4)(n,"video"))})),t.audioTracks&&(l=t.audioTracks.filter((function(e){return!e.audioCodec||(0,s.isCodecSupportedInMp4)(e.audioCodec,"audio")})),(0,o.assignTrackIdsByGroup)(l)),t.subtitles&&(d=t.subtitles,(0,o.assignTrackIdsByGroup)(d)),u.length>0){n=u[0].bitrate,u.sort((function(e,t){return e.bitrate-t.bitrate})),this._levels=u;for(var g=0;g<u.length;g++)if(u[g].bitrate===n){this._firstLevel=g,this.log("manifest loaded, "+u.length+" level(s) found, first bitrate: "+n);break}var y=m&&!v,b={levels:u,audioTracks:l,subtitleTracks:d,firstLevel:this._firstLevel,stats:t.stats,audio:m,video:v,altAudio:!y&&l.some((function(e){return!!e.url}))};this.hls.trigger(i.Events.MANIFEST_PARSED,b),(this.hls.config.autoStartLoad||this.hls.forceStartLoad)&&this.hls.startLoad(this.hls.config.startPosition)}else this.hls.trigger(i.Events.ERROR,{type:a.ErrorTypes.MEDIA_ERROR,details:a.ErrorDetails.MANIFEST_INCOMPATIBLE_CODECS_ERROR,fatal:!0,url:t.url,reason:"no level with compatible codecs found in manifest"})},g.onError=function(t,n){var r;if(e.prototype.onError.call(this,t,n),!n.fatal){var i=n.context,s=this._levels[this.currentLevelIndex];if(i&&(i.type===u.PlaylistContextType.AUDIO_TRACK&&s.audioGroupIds&&i.groupId===s.audioGroupIds[s.urlId]||i.type===u.PlaylistContextType.SUBTITLE_TRACK&&s.textGroupIds&&i.groupId===s.textGroupIds[s.urlId]))this.redundantFailover(this.currentLevelIndex);else{var o,c=!1,l=!0;switch(n.details){case a.ErrorDetails.FRAG_LOAD_ERROR:case a.ErrorDetails.FRAG_LOAD_TIMEOUT:case a.ErrorDetails.KEY_LOAD_ERROR:case a.ErrorDetails.KEY_LOAD_TIMEOUT:if(n.frag){var d=n.frag.type===u.PlaylistLevelType.MAIN?n.frag.level:this.currentLevelIndex,h=this._levels[d];h?(h.fragmentError++,h.fragmentError>this.hls.config.fragLoadingMaxRetry&&(o=d)):o=d}break;case a.ErrorDetails.LEVEL_LOAD_ERROR:case a.ErrorDetails.LEVEL_LOAD_TIMEOUT:i&&(i.deliveryDirectives&&(l=!1),o=i.level),c=!0;break;case a.ErrorDetails.REMUX_ALLOC_ERROR:o=null!=(r=n.level)?r:this.currentLevelIndex,c=!0}void 0!==o&&this.recoverLevel(n,o,c,l)}}},g.recoverLevel=function(e,t,n,r){var i=e.details,a=this._levels[t];if(a.loadError++,n){if(!this.retryLoadingOrFail(e))return void(this.currentLevelIndex=-1);e.levelRetry=!0}if(r){var s=a.url.length;if(s>1&&a.loadError<s)e.levelRetry=!0,this.redundantFailover(t);else if(-1===this.manualLevelIndex){for(var o=-1,c=this._levels,u=c.length;u--;){var l=(u+this.currentLevelIndex)%c.length;if(l!==this.currentLevelIndex&&0===c[l].loadError){o=l;break}}o>-1&&this.currentLevelIndex!==o&&(this.warn(i+": switch to "+o),e.levelRetry=!0,this.hls.nextAutoLevel=o)}}},g.redundantFailover=function(e){var t=this._levels[e],n=t.url.length;if(n>1){var r=(t.urlId+1)%n;this.warn("Switching to redundant URL-id "+r),this._levels.forEach((function(e){e.urlId=r})),this.level=e}},g.onFragLoaded=function(e,t){var n=t.frag;if(void 0!==n&&n.type===u.PlaylistLevelType.MAIN){var r=this._levels[n.level];void 0!==r&&(r.fragmentError=0,r.loadError=0)}},g.onLevelLoaded=function(e,t){var n,r,i=t.level,a=t.details,s=this._levels[i];if(!s)return this.warn("Invalid level index "+i),void(null!==(r=t.deliveryDirectives)&&void 0!==r&&r.skip&&(a.deltaUpdateFailed=!0));i===this.currentLevelIndex?(0===s.fragmentError&&(s.loadError=0,this.retryCount=0),this.playlistLoaded(i,t,s.details)):null!==(n=t.deliveryDirectives)&&void 0!==n&&n.skip&&(a.deltaUpdateFailed=!0)},g.onAudioTrackSwitched=function(e,t){var n=this.hls.levels[this.currentLevelIndex];if(n&&n.audioGroupIds){for(var r=-1,i=this.hls.audioTracks[t.id].groupId,a=0;a<n.audioGroupIds.length;a++)if(n.audioGroupIds[a]===i){r=a;break}r!==n.urlId&&(n.urlId=r,this.startLoad())}},g.loadPlaylist=function(e){var t=this.currentLevelIndex,n=this._levels[t];if(this.canLoad&&n&&n.url.length>0){var r=n.urlId,a=n.url[r];if(e)try{a=e.addDirectives(a)}catch(s){this.warn("Could not construct new URL with HLS Delivery Directives: "+s)}this.log("Attempt loading level index "+t+(e?" at sn "+e.msn+" part "+e.part:"")+" with URL-id "+r+" "+a),this.clearTimer(),this.hls.trigger(i.Events.LEVEL_LOADING,{url:a,level:t,id:r,deliveryDirectives:e||null})}},g.removeLevel=function(e,t){var n=function(e,n){return n!==t},r=this._levels.filter((function(r,i){return i!==e||r.url.length>1&&void 0!==t&&(r.url=r.url.filter(n),r.audioGroupIds&&(r.audioGroupIds=r.audioGroupIds.filter(n)),r.textGroupIds&&(r.textGroupIds=r.textGroupIds.filter(n)),r.urlId=0,!0)})).map((function(e,t){var n=e.details;return null!==n&&void 0!==n&&n.fragments&&n.fragments.forEach((function(e){e.level=t})),e}));this._levels=r,this.hls.trigger(i.Events.LEVELS_UPDATED,{levels:r})},p=c,(v=[{key:"levels",get:function(){return 0===this._levels.length?null:this._levels}},{key:"level",get:function(){return this.currentLevelIndex},set:function(e){var t,n=this._levels;if(0!==n.length&&(this.currentLevelIndex!==e||null===(t=n[e])||void 0===t||!t.details)){if(e<0||e>=n.length){var r=e<0;if(this.hls.trigger(i.Events.ERROR,{type:a.ErrorTypes.OTHER_ERROR,details:a.ErrorDetails.LEVEL_SWITCH_ERROR,level:e,fatal:r,reason:"invalid level idx"}),r)return;e=Math.min(e,n.length-1)}this.clearTimer();var s=this.currentLevelIndex,o=n[s],c=n[e];this.log("switching to level "+e+" from "+s),this.currentLevelIndex=e;var u=l({},c,{level:e,maxBitrate:c.maxBitrate,uri:c.uri,urlId:c.urlId});delete u._urlId,this.hls.trigger(i.Events.LEVEL_SWITCHING,u);var d=c.details;if(!d||d.live){var h=this.switchParams(c.uri,null===o||void 0===o?void 0:o.details);this.loadPlaylist(h)}}}},{key:"manualLevel",get:function(){return this.manualLevelIndex},set:function(e){this.manualLevelIndex=e,void 0===this._startLevel&&(this._startLevel=e),-1!==e&&(this.level=e)}},{key:"firstLevel",get:function(){return this._firstLevel},set:function(e){this._firstLevel=e}},{key:"startLevel",get:function(){if(void 0===this._startLevel){var e=this.hls.config.startLevel;return void 0!==e?e:this._firstLevel}return this._startLevel},set:function(e){this._startLevel=e}},{key:"nextLoadLevel",get:function(){return-1!==this.manualLevelIndex?this.manualLevelIndex:this.hls.nextAutoLevel},set:function(e){this.level=e,-1===this.manualLevelIndex&&(this.hls.nextAutoLevel=e)}}])&&d(p.prototype,v),m&&d(p,m),Object.defineProperty(p,"prototype",{writable:!1}),c}(c.default)},"./src/controller/level-helper.ts":function(e,t,n){"use strict";n.r(t),n.d(t,{addGroupId:function(){return o},addSliding:function(){return m},adjustSliding:function(){return v},assignTrackIdsByGroup:function(){return c},computeReloadInterval:function(){return g},getFragmentWithSN:function(){return y},getPartWith:function(){return b},mapFragmentIntersection:function(){return p},mapPartIntersection:function(){return f},mergeDetails:function(){return h},updateFragPTSDTS:function(){return d},updatePTS:function(){return u}});var r=n("./src/polyfills/number.ts"),i=n("./src/utils/logger.ts"),a=n("./src/loader/date-range.ts");function s(){return s=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s.apply(this,arguments)}function o(e,t,n){switch(t){case"audio":e.audioGroupIds||(e.audioGroupIds=[]),e.audioGroupIds.push(n);break;case"text":e.textGroupIds||(e.textGroupIds=[]),e.textGroupIds.push(n)}}function c(e){var t={};e.forEach((function(e){var n=e.groupId||"";e.id=t[n]=t[n]||0,t[n]++}))}function u(e,t,n){l(e[t],e[n])}function l(e,t){var n=t.startPTS;if((0,r.isFiniteNumber)(n)){var i,a=0;t.sn>e.sn?(a=n-e.start,i=e):(a=e.start-n,i=t),i.duration!==a&&(i.duration=a)}else t.sn>e.sn?e.cc===t.cc&&e.minEndPTS?t.start=e.start+(e.minEndPTS-e.start):t.start=e.start+e.duration:t.start=Math.max(e.start-t.duration,0)}function d(e,t,n,a,s,o){a-n<=0&&(i.logger.warn("Fragment should have a positive duration",t),a=n+t.duration,o=s+t.duration);var c=n,u=a,d=t.startPTS,h=t.endPTS;if((0,r.isFiniteNumber)(d)){var f=Math.abs(d-n);(0,r.isFiniteNumber)(t.deltaPTS)?t.deltaPTS=Math.max(f,t.deltaPTS):t.deltaPTS=f,c=Math.max(n,d),n=Math.min(n,d),s=Math.min(s,t.startDTS),u=Math.min(a,h),a=Math.max(a,h),o=Math.max(o,t.endDTS)}t.duration=a-n;var p=n-t.start;t.appendedPTS=a,t.start=t.startPTS=n,t.maxStartPTS=c,t.startDTS=s,t.endPTS=a,t.minEndPTS=u,t.endDTS=o;var v,m=t.sn;if(!e||m<e.startSN||m>e.endSN)return 0;var g=m-e.startSN,y=e.fragments;for(y[g]=t,v=g;v>0;v--)l(y[v],y[v-1]);for(v=g;v<y.length-1;v++)l(y[v],y[v+1]);return e.fragmentHint&&l(y[y.length-1],e.fragmentHint),e.PTSKnown=e.alignedSliding=!0,p}function h(e,t){for(var n=null,o=e.fragments,c=o.length-1;c>=0;c--){var u=o[c].initSegment;if(u){n=u;break}}e.fragmentHint&&delete e.fragmentHint.endPTS;var l,h=0;if(p(e,t,(function(e,i){e.relurl&&(h=e.cc-i.cc),(0,r.isFiniteNumber)(e.startPTS)&&(0,r.isFiniteNumber)(e.endPTS)&&(i.start=i.startPTS=e.startPTS,i.startDTS=e.startDTS,i.appendedPTS=e.appendedPTS,i.maxStartPTS=e.maxStartPTS,i.endPTS=e.endPTS,i.endDTS=e.endDTS,i.minEndPTS=e.minEndPTS,i.duration=e.endPTS-e.startPTS,i.duration&&(l=i),t.PTSKnown=t.alignedSliding=!0),i.elementaryStreams=e.elementaryStreams,i.loader=e.loader,i.stats=e.stats,i.urlId=e.urlId,e.initSegment&&(i.initSegment=e.initSegment,n=e.initSegment)})),n&&(t.fragmentHint?t.fragments.concat(t.fragmentHint):t.fragments).forEach((function(e){var t;e.initSegment&&e.initSegment.relurl!==(null===(t=n)||void 0===t?void 0:t.relurl)||(e.initSegment=n)})),t.skippedSegments)if(t.deltaUpdateFailed=t.fragments.some((function(e){return!e})),t.deltaUpdateFailed){i.logger.warn("[level-helper] Previous playlist missing segments skipped in delta playlist");for(var m=t.skippedSegments;m--;)t.fragments.shift();t.startSN=t.fragments[0].sn,t.startCC=t.fragments[0].cc}else t.canSkipDateRanges&&(t.dateRanges=function(e,t,n){var r=s({},e);return n&&n.forEach((function(e){delete r[e]})),Object.keys(t).forEach((function(e){var n=new a.DateRange(t[e].attr,r[e]);n.isValid?r[e]=n:i.logger.warn('Ignoring invalid Playlist Delta Update DATERANGE tag: "'+JSON.stringify(t[e].attr)+'"')})),r}(e.dateRanges,t.dateRanges,t.recentlyRemovedDateranges));var g=t.fragments;if(h){i.logger.warn("discontinuity sliding from playlist, take drift into account");for(var y=0;y<g.length;y++)g[y].cc+=h}t.skippedSegments&&(t.startCC=t.fragments[0].cc),f(e.partList,t.partList,(function(e,t){t.elementaryStreams=e.elementaryStreams,t.stats=e.stats})),l?d(t,l,l.startPTS,l.endPTS,l.startDTS,l.endDTS):v(e,t),g.length&&(t.totalduration=t.edge-g[0].start),t.driftStartTime=e.driftStartTime,t.driftStart=e.driftStart;var b=t.advancedDateTime;if(t.advanced&&b){var k=t.edge;t.driftStart||(t.driftStartTime=b,t.driftStart=k),t.driftEndTime=b,t.driftEnd=k}else t.driftEndTime=e.driftEndTime,t.driftEnd=e.driftEnd,t.advancedDateTime=e.advancedDateTime}function f(e,t,n){if(e&&t)for(var r=0,i=0,a=e.length;i<=a;i++){var s=e[i],o=t[i+r];s&&o&&s.index===o.index&&s.fragment.sn===o.fragment.sn?n(s,o):r--}}function p(e,t,n){for(var r=t.skippedSegments,i=Math.max(e.startSN,t.startSN)-t.startSN,a=(e.fragmentHint?1:0)+(r?t.endSN:Math.min(e.endSN,t.endSN))-t.startSN,s=t.startSN-e.startSN,o=t.fragmentHint?t.fragments.concat(t.fragmentHint):t.fragments,c=e.fragmentHint?e.fragments.concat(e.fragmentHint):e.fragments,u=i;u<=a;u++){var l=c[s+u],d=o[u];r&&!d&&u<r&&(d=t.fragments[u]=l),l&&d&&n(l,d)}}function v(e,t){var n=t.startSN+t.skippedSegments-e.startSN,r=e.fragments;n<0||n>=r.length||m(t,r[n].start)}function m(e,t){if(t){for(var n=e.fragments,r=e.skippedSegments;r<n.length;r++)n[r].start+=t;e.fragmentHint&&(e.fragmentHint.start+=t)}}function g(e,t){var n,r=1e3*e.levelTargetDuration,i=r/2,a=e.age,s=a>0&&a<3*r,o=t.loading.end-t.loading.start,c=e.availabilityDelay;if(!1===e.updated)if(s){var u=333*e.misses;n=Math.max(Math.min(i,2*o),u),e.availabilityDelay=(e.availabilityDelay||0)+n}else n=i;else s?(c=Math.min(c||r/2,a),e.availabilityDelay=c,n=c+r-a):n=r-o;return Math.round(n)}function y(e,t,n){if(!e||!e.details)return null;var r=e.details,i=r.fragments[t-r.startSN];return i||((i=r.fragmentHint)&&i.sn===t?i:t<r.startSN&&n&&n.sn===t?n:null)}function b(e,t,n){if(!e||!e.details)return null;var r=e.details.partList;if(r)for(var i=r.length;i--;){var a=r[i];if(a.index===n&&a.fragment.sn===t)return a}return null}},"./src/controller/stream-controller.ts":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return g}});var r=n("./src/polyfills/number.ts"),i=n("./src/controller/base-stream-controller.ts"),a=n("./src/is-supported.ts"),s=n("./src/events.ts"),o=n("./src/utils/buffer-helper.ts"),c=n("./src/controller/fragment-tracker.ts"),u=n("./src/types/loader.ts"),l=n("./src/loader/fragment.ts"),d=n("./src/demux/transmuxer-interface.ts"),h=n("./src/types/transmuxer.ts"),f=n("./src/controller/gap-controller.ts"),p=n("./src/errors.ts");function v(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function m(e,t){return m=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},m(e,t)}var g=function(e){var t,n;function g(t,n){var r;return(r=e.call(this,t,n,"[stream-controller]")||this).audioCodecSwap=!1,r.gapController=null,r.level=-1,r._forceStartLoad=!1,r.altAudio=!1,r.audioOnly=!1,r.fragPlaying=null,r.onvplaying=null,r.onvseeked=null,r.fragLastKbps=0,r.couldBacktrack=!1,r.backtrackFragment=null,r.audioCodecSwitch=!1,r.videoBuffer=null,r._registerListeners(),r}n=e,(t=g).prototype=Object.create(n.prototype),t.prototype.constructor=t,m(t,n);var y,b,k,x=g.prototype;return x._registerListeners=function(){var e=this.hls;e.on(s.Events.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(s.Events.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(s.Events.MANIFEST_LOADING,this.onManifestLoading,this),e.on(s.Events.MANIFEST_PARSED,this.onManifestParsed,this),e.on(s.Events.LEVEL_LOADING,this.onLevelLoading,this),e.on(s.Events.LEVEL_LOADED,this.onLevelLoaded,this),e.on(s.Events.FRAG_LOAD_EMERGENCY_ABORTED,this.onFragLoadEmergencyAborted,this),e.on(s.Events.ERROR,this.onError,this),e.on(s.Events.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.on(s.Events.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),e.on(s.Events.BUFFER_CREATED,this.onBufferCreated,this),e.on(s.Events.BUFFER_FLUSHED,this.onBufferFlushed,this),e.on(s.Events.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on(s.Events.FRAG_BUFFERED,this.onFragBuffered,this)},x._unregisterListeners=function(){var e=this.hls;e.off(s.Events.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(s.Events.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(s.Events.MANIFEST_LOADING,this.onManifestLoading,this),e.off(s.Events.MANIFEST_PARSED,this.onManifestParsed,this),e.off(s.Events.LEVEL_LOADED,this.onLevelLoaded,this),e.off(s.Events.FRAG_LOAD_EMERGENCY_ABORTED,this.onFragLoadEmergencyAborted,this),e.off(s.Events.ERROR,this.onError,this),e.off(s.Events.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.off(s.Events.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),e.off(s.Events.BUFFER_CREATED,this.onBufferCreated,this),e.off(s.Events.BUFFER_FLUSHED,this.onBufferFlushed,this),e.off(s.Events.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off(s.Events.FRAG_BUFFERED,this.onFragBuffered,this)},x.onHandlerDestroying=function(){this._unregisterListeners(),this.onMediaDetaching()},x.startLoad=function(e){if(this.levels){var t=this.lastCurrentTime,n=this.hls;if(this.stopLoad(),this.setInterval(100),this.level=-1,this.fragLoadError=0,!this.startFragRequested){var r=n.startLevel;-1===r&&(n.config.testBandwidth&&this.levels.length>1?(r=0,this.bitrateTest=!0):r=n.nextAutoLevel),this.level=n.nextLoadLevel=r,this.loadedmetadata=!1}t>0&&-1===e&&(this.log("Override startPosition with lastCurrentTime @"+t.toFixed(3)),e=t),this.state=i.State.IDLE,this.nextLoadPosition=this.startPosition=this.lastCurrentTime=e,this.tick()}else this._forceStartLoad=!0,this.state=i.State.STOPPED},x.stopLoad=function(){this._forceStartLoad=!1,e.prototype.stopLoad.call(this)},x.doTick=function(){switch(this.state){case i.State.IDLE:this.doTickIdle();break;case i.State.WAITING_LEVEL:var e,t=this.levels,n=this.level,r=null===t||void 0===t||null===(e=t[n])||void 0===e?void 0:e.details;if(r&&(!r.live||this.levelLastLoaded===this.level)){if(this.waitForCdnTuneIn(r))break;this.state=i.State.IDLE;break}break;case i.State.FRAG_LOADING_WAITING_RETRY:var a,s=self.performance.now(),o=this.retryDate;(!o||s>=o||null!==(a=this.media)&&void 0!==a&&a.seeking)&&(this.log("retryDate reached, switch back to IDLE state"),this.resetStartWhenNotLoaded(this.level),this.state=i.State.IDLE)}this.onTickEnd()},x.onTickEnd=function(){e.prototype.onTickEnd.call(this),this.checkBuffer(),this.checkFragmentChanged()},x.doTickIdle=function(){var e,t,n=this.hls,r=this.levelLastLoaded,a=this.levels,o=this.media,d=n.config,h=n.nextLoadLevel;if(null!==r&&(o||!this.startFragRequested&&d.startFragPrefetch)&&(!this.altAudio||!this.audioOnly)&&a&&a[h]){var f=a[h];this.level=n.nextLoadLevel=h;var p=f.details;if(!p||this.state===i.State.WAITING_LEVEL||p.live&&this.levelLastLoaded!==h)this.state=i.State.WAITING_LEVEL;else{var v=this.getMainFwdBufferInfo();if(null!==v&&!(v.len>=this.getMaxBufferLength(f.maxBitrate))){if(this._streamEnded(v,p)){var m={};return this.altAudio&&(m.type="video"),this.hls.trigger(s.Events.BUFFER_EOS,m),void(this.state=i.State.ENDED)}this.backtrackFragment&&this.backtrackFragment.start>v.end&&(this.backtrackFragment=null);var g=this.backtrackFragment?this.backtrackFragment.start:v.end,y=this.getNextFragment(g,p);if(this.couldBacktrack&&!this.fragPrevious&&y&&"initSegment"!==y.sn&&this.fragmentTracker.getState(y)!==c.FragmentState.OK){var b,k=(null!=(b=this.backtrackFragment)?b:y).sn-p.startSN,x=p.fragments[k-1];x&&y.cc===x.cc&&(y=x,this.fragmentTracker.removeFragment(x))}else this.backtrackFragment&&v.len&&(this.backtrackFragment=null);if(y&&this.fragmentTracker.getState(y)===c.FragmentState.OK&&this.nextLoadPosition>g){var w=this.audioOnly&&!this.altAudio?l.ElementaryStreamTypes.AUDIO:l.ElementaryStreamTypes.VIDEO;o&&this.afterBufferFlushed(o,w,u.PlaylistLevelType.MAIN),y=this.getNextFragment(this.nextLoadPosition,p)}y&&(!y.initSegment||y.initSegment.data||this.bitrateTest||(y=y.initSegment),"identity"!==(null===(e=y.decryptdata)||void 0===e?void 0:e.keyFormat)||null!==(t=y.decryptdata)&&void 0!==t&&t.key?this.loadFragment(y,p,g):this.loadKey(y,p))}}}},x.loadFragment=function(t,n,r){var i,a=this.fragmentTracker.getState(t);this.fragCurrent=t,a===c.FragmentState.NOT_LOADED?"initSegment"===t.sn?this._loadInitSegment(t):this.bitrateTest?(this.log("Fragment "+t.sn+" of level "+t.level+" is being downloaded to test bitrate and will not be buffered"),this._loadBitrateTestFrag(t)):(this.startFragRequested=!0,e.prototype.loadFragment.call(this,t,n,r)):a===c.FragmentState.APPENDING?this.reduceMaxBufferLength(t.duration)&&this.fragmentTracker.removeFragment(t):0===(null===(i=this.media)||void 0===i?void 0:i.buffered.length)&&this.fragmentTracker.removeAllFragments()},x.getAppendedFrag=function(e){var t=this.fragmentTracker.getAppendedFrag(e,u.PlaylistLevelType.MAIN);return t&&"fragment"in t?t.fragment:t},x.getBufferedFrag=function(e){return this.fragmentTracker.getBufferedFrag(e,u.PlaylistLevelType.MAIN)},x.followingBufferedFrag=function(e){return e?this.getBufferedFrag(e.end+.5):null},x.immediateLevelSwitch=function(){this.abortCurrentFrag(),this.flushMainBuffer(0,Number.POSITIVE_INFINITY)},x.nextLevelSwitch=function(){var e=this.levels,t=this.media;if(null!==t&&void 0!==t&&t.readyState){var n,r=this.getAppendedFrag(t.currentTime);if(r&&r.start>1&&this.flushMainBuffer(0,r.start-1),!t.paused&&e){var i=e[this.hls.nextLoadLevel],a=this.fragLastKbps;n=a&&this.fragCurrent?this.fragCurrent.duration*i.maxBitrate/(1e3*a)+1:0}else n=0;var s=this.getBufferedFrag(t.currentTime+n);if(s){var o=this.followingBufferedFrag(s);if(o){this.abortCurrentFrag();var c=o.maxStartPTS?o.maxStartPTS:o.start,u=o.duration,l=Math.max(s.end,c+Math.min(Math.max(u-this.config.maxFragLookUpTolerance,.5*u),.75*u));this.flushMainBuffer(l,Number.POSITIVE_INFINITY)}}}},x.abortCurrentFrag=function(){var e=this.fragCurrent;switch(this.fragCurrent=null,this.backtrackFragment=null,null!==e&&void 0!==e&&e.loader&&e.loader.abort(),this.state){case i.State.KEY_LOADING:case i.State.FRAG_LOADING:case i.State.FRAG_LOADING_WAITING_RETRY:case i.State.PARSING:case i.State.PARSED:this.state=i.State.IDLE}this.nextLoadPosition=this.getLoadPosition()},x.flushMainBuffer=function(t,n){e.prototype.flushMainBuffer.call(this,t,n,this.altAudio?"video":null)},x.onMediaAttached=function(t,n){e.prototype.onMediaAttached.call(this,t,n);var r=n.media;this.onvplaying=this.onMediaPlaying.bind(this),this.onvseeked=this.onMediaSeeked.bind(this),r.addEventListener("playing",this.onvplaying),r.addEventListener("seeked",this.onvseeked),this.gapController=new f.default(this.config,r,this.fragmentTracker,this.hls)},x.onMediaDetaching=function(){var t=this.media;t&&this.onvplaying&&this.onvseeked&&(t.removeEventListener("playing",this.onvplaying),t.removeEventListener("seeked",this.onvseeked),this.onvplaying=this.onvseeked=null,this.videoBuffer=null),this.fragPlaying=null,this.gapController&&(this.gapController.destroy(),this.gapController=null),e.prototype.onMediaDetaching.call(this)},x.onMediaPlaying=function(){this.tick()},x.onMediaSeeked=function(){var e=this.media,t=e?e.currentTime:null;(0,r.isFiniteNumber)(t)&&this.log("Media seeked to "+t.toFixed(3)),this.tick()},x.onManifestLoading=function(){this.log("Trigger BUFFER_RESET"),this.hls.trigger(s.Events.BUFFER_RESET,void 0),this.fragmentTracker.removeAllFragments(),this.couldBacktrack=!1,this.startPosition=this.lastCurrentTime=0,this.fragPlaying=null,this.backtrackFragment=null},x.onManifestParsed=function(e,t){var n,r=!1,i=!1;t.levels.forEach((function(e){(n=e.audioCodec)&&(-1!==n.indexOf("mp4a.40.2")&&(r=!0),-1!==n.indexOf("mp4a.40.5")&&(i=!0))})),this.audioCodecSwitch=r&&i&&!(0,a.changeTypeSupported)(),this.audioCodecSwitch&&this.log("Both AAC/HE-AAC audio found in levels; declaring level codec as HE-AAC"),this.levels=t.levels,this.startFragRequested=!1},x.onLevelLoading=function(e,t){var n=this.levels;if(n&&this.state===i.State.IDLE){var r=n[t.level];(!r.details||r.details.live&&this.levelLastLoaded!==t.level||this.waitForCdnTuneIn(r.details))&&(this.state=i.State.WAITING_LEVEL)}},x.onLevelLoaded=function(e,t){var n,r=this.levels,a=t.level,o=t.details,c=o.totalduration;if(r){this.log("Level "+a+" loaded ["+o.startSN+","+o.endSN+"], cc ["+o.startCC+", "+o.endCC+"] duration:"+c);var u=this.fragCurrent;!u||this.state!==i.State.FRAG_LOADING&&this.state!==i.State.FRAG_LOADING_WAITING_RETRY||u.level!==t.level&&u.loader&&(this.state=i.State.IDLE,this.backtrackFragment=null,u.loader.abort());var l=r[a],d=0;if(o.live||null!==(n=l.details)&&void 0!==n&&n.live){if(o.fragments[0]||(o.deltaUpdateFailed=!0),o.deltaUpdateFailed)return;d=this.alignPlaylists(o,l.details)}if(l.details=o,this.levelLastLoaded=a,this.hls.trigger(s.Events.LEVEL_UPDATED,{details:o,level:a}),this.state===i.State.WAITING_LEVEL){if(this.waitForCdnTuneIn(o))return;this.state=i.State.IDLE}this.startFragRequested?o.live&&this.synchronizeToLiveEdge(o):this.setStartPosition(o,d),this.tick()}else this.warn("Levels were reset while loading level "+a)},x._handleFragmentLoadProgress=function(e){var t,n=e.frag,r=e.part,i=e.payload,a=this.levels;if(a){var s=a[n.level],o=s.details;if(o){var c=s.videoCodec,l=o.PTSKnown||!o.live,f=null===(t=n.initSegment)||void 0===t?void 0:t.data,p=this._getAudioCodec(s),v=this.transmuxer=this.transmuxer||new d.default(this.hls,u.PlaylistLevelType.MAIN,this._handleTransmuxComplete.bind(this),this._handleTransmuxerFlush.bind(this)),m=r?r.index:-1,g=-1!==m,y=new h.ChunkMetadata(n.level,n.sn,n.stats.chunkCount,i.byteLength,m,g),b=this.initPTS[n.cc];v.push(i,f,p,c,n,r,o.totalduration,l,y,b)}else this.warn("Dropping fragment "+n.sn+" of level "+n.level+" after level details were reset")}else this.warn("Levels were reset while fragment load was in progress. Fragment "+n.sn+" of level "+n.level+" will not be buffered")},x.onAudioTrackSwitching=function(e,t){var n=this.altAudio,r=!!t.url,i=t.id;if(!r){if(this.mediaBuffer!==this.media){this.log("Switching on main audio, use media.buffered to schedule main fragment loading"),this.mediaBuffer=this.media;var a=this.fragCurrent;null!==a&&void 0!==a&&a.loader&&(this.log("Switching to main audio track, cancel main fragment load"),a.loader.abort()),this.resetTransmuxer(),this.resetLoadingState()}else this.audioOnly&&this.resetTransmuxer();var o=this.hls;n&&o.trigger(s.Events.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:"audio"}),o.trigger(s.Events.AUDIO_TRACK_SWITCHED,{id:i})}},x.onAudioTrackSwitched=function(e,t){var n=t.id,r=!!this.hls.audioTracks[n].url;if(r){var i=this.videoBuffer;i&&this.mediaBuffer!==i&&(this.log("Switching on alternate audio, use video.buffered to schedule main fragment loading"),this.mediaBuffer=i)}this.altAudio=r,this.tick()},x.onBufferCreated=function(e,t){var n,r,i=t.tracks,a=!1;for(var s in i){var o=i[s];if("main"===o.id){if(r=s,n=o,"video"===s){var c=i[s];c&&(this.videoBuffer=c.buffer)}}else a=!0}a&&n?(this.log("Alternate track found, use "+r+".buffered to schedule main fragment loading"),this.mediaBuffer=n.buffer):this.mediaBuffer=this.media},x.onFragBuffered=function(e,t){var n=t.frag,r=t.part;if(!n||n.type===u.PlaylistLevelType.MAIN){if(this.fragContextChanged(n))return this.warn("Fragment "+n.sn+(r?" p: "+r.index:"")+" of level "+n.level+" finished buffering, but was aborted. state: "+this.state),void(this.state===i.State.PARSED&&(this.state=i.State.IDLE));var a=r?r.stats:n.stats;this.fragLastKbps=Math.round(8*a.total/(a.buffering.end-a.loading.first)),"initSegment"!==n.sn&&(this.fragPrevious=n),this.fragBufferedComplete(n,r)}},x.onError=function(e,t){switch(t.details){case p.ErrorDetails.FRAG_LOAD_ERROR:case p.ErrorDetails.FRAG_LOAD_TIMEOUT:case p.ErrorDetails.KEY_LOAD_ERROR:case p.ErrorDetails.KEY_LOAD_TIMEOUT:this.onFragmentOrKeyLoadError(u.PlaylistLevelType.MAIN,t);break;case p.ErrorDetails.LEVEL_LOAD_ERROR:case p.ErrorDetails.LEVEL_LOAD_TIMEOUT:this.state!==i.State.ERROR&&(t.fatal?(this.warn(""+t.details),this.state=i.State.ERROR):t.levelRetry||this.state!==i.State.WAITING_LEVEL||(this.state=i.State.IDLE));break;case p.ErrorDetails.BUFFER_FULL_ERROR:if("main"===t.parent&&(this.state===i.State.PARSING||this.state===i.State.PARSED)){var n=!0,r=this.getFwdBufferInfo(this.media,u.PlaylistLevelType.MAIN);r&&r.len>.5&&(n=!this.reduceMaxBufferLength(r.len)),n&&(this.warn("buffer full error also media.currentTime is not buffered, flush main"),this.immediateLevelSwitch()),this.resetLoadingState()}}},x.checkBuffer=function(){var e=this.media,t=this.gapController;if(e&&t&&e.readyState){if(this.loadedmetadata||!o.BufferHelper.getBuffered(e).length){var n=this.state!==i.State.IDLE?this.fragCurrent:null;t.poll(this.lastCurrentTime,n)}this.lastCurrentTime=e.currentTime}},x.onFragLoadEmergencyAborted=function(){this.state=i.State.IDLE,this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition),this.tickImmediate()},x.onBufferFlushed=function(e,t){var n=t.type;if(n!==l.ElementaryStreamTypes.AUDIO||this.audioOnly&&!this.altAudio){var r=(n===l.ElementaryStreamTypes.VIDEO?this.videoBuffer:this.mediaBuffer)||this.media;this.afterBufferFlushed(r,n,u.PlaylistLevelType.MAIN)}},x.onLevelsUpdated=function(e,t){this.levels=t.levels},x.swapAudioCodec=function(){this.audioCodecSwap=!this.audioCodecSwap},x.seekToStartPos=function(){var e=this.media;if(e){var t=e.currentTime,n=this.startPosition;if(n>=0&&t<n){if(e.seeking)return void this.log("could not seek to "+n+", already seeking at "+t);var r=o.BufferHelper.getBuffered(e),i=(r.length?r.start(0):0)-n;i>0&&(i<this.config.maxBufferHole||i<this.config.maxFragLookUpTolerance)&&(this.log("adjusting start position by "+i+" to match buffer start"),n+=i,this.startPosition=n),this.log("seek to target start position "+n+" from current time "+t),e.currentTime=n}}},x._getAudioCodec=function(e){var t=this.config.defaultAudioCodec||e.audioCodec;return this.audioCodecSwap&&t&&(this.log("Swapping audio codec"),t=-1!==t.indexOf("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5"),t},x._loadBitrateTestFrag=function(e){var t=this;e.bitrateTest=!0,this._doFragLoad(e).then((function(n){var r=t.hls;if(n&&!r.nextLoadLevel&&!t.fragContextChanged(e)){t.fragLoadError=0,t.state=i.State.IDLE,t.startFragRequested=!1,t.bitrateTest=!1;var a=e.stats;a.parsing.start=a.parsing.end=a.buffering.start=a.buffering.end=self.performance.now(),r.trigger(s.Events.FRAG_LOADED,n),e.bitrateTest=!1}}))},x._handleTransmuxComplete=function(e){var t,n="main",a=this.hls,o=e.remuxResult,c=e.chunkMeta,u=this.getCurrentContext(c);if(!u)return this.warn("The loading context changed while buffering fragment "+c.sn+" of level "+c.level+". This chunk will not be buffered."),void this.resetStartWhenNotLoaded(c.level);var d=u.frag,h=u.part,f=u.level,p=o.video,v=o.text,m=o.id3,g=o.initSegment,y=f.details,b=this.altAudio?void 0:o.audio;if(!this.fragContextChanged(d)){if(this.state=i.State.PARSING,g){g.tracks&&(this._bufferInitSegment(f,g.tracks,d,c),a.trigger(s.Events.FRAG_PARSING_INIT_SEGMENT,{frag:d,id:n,tracks:g.tracks}));var k=g.initPTS,x=g.timescale;(0,r.isFiniteNumber)(k)&&(this.initPTS[d.cc]=k,a.trigger(s.Events.INIT_PTS_FOUND,{frag:d,id:n,initPTS:k,timescale:x}))}if(p&&!1!==o.independent){if(y){var w=p.startPTS,T=p.endPTS,E=p.startDTS,_=p.endDTS;if(h)h.elementaryStreams[p.type]={startPTS:w,endPTS:T,startDTS:E,endDTS:_};else if(p.firstKeyFrame&&p.independent&&(this.couldBacktrack=!0),p.dropped&&p.independent){var S=this.getMainFwdBufferInfo();if((S?S.end:this.getLoadPosition())+this.config.maxBufferHole<(p.firstKeyFramePTS?p.firstKeyFramePTS:w)-this.config.maxBufferHole)return void this.backtrack(d);d.setElementaryStreamInfo(p.type,d.start,T,d.start,_,!0)}d.setElementaryStreamInfo(p.type,w,T,E,_),this.backtrackFragment&&(this.backtrackFragment=d),this.bufferFragmentData(p,d,h,c)}}else if(!1===o.independent)return void this.backtrack(d);if(b){var A=b.startPTS,C=b.endPTS,I=b.startDTS,R=b.endDTS;h&&(h.elementaryStreams[l.ElementaryStreamTypes.AUDIO]={startPTS:A,endPTS:C,startDTS:I,endDTS:R}),d.setElementaryStreamInfo(l.ElementaryStreamTypes.AUDIO,A,C,I,R),this.bufferFragmentData(b,d,h,c)}if(y&&null!==m&&void 0!==m&&null!==(t=m.samples)&&void 0!==t&&t.length){var P={id:n,frag:d,details:y,samples:m.samples};a.trigger(s.Events.FRAG_PARSING_METADATA,P)}if(y&&v){var D={id:n,frag:d,details:y,samples:v.samples};a.trigger(s.Events.FRAG_PARSING_USERDATA,D)}}},x._bufferInitSegment=function(e,t,n,r){var a=this;if(this.state===i.State.PARSING){this.audioOnly=!!t.audio&&!t.video,this.altAudio&&!this.audioOnly&&delete t.audio;var o=t.audio,c=t.video,u=t.audiovideo;if(o){var l=e.audioCodec,d=navigator.userAgent.toLowerCase();this.audioCodecSwitch&&(l&&(l=-1!==l.indexOf("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5"),1!==o.metadata.channelCount&&-1===d.indexOf("firefox")&&(l="mp4a.40.5")),-1!==d.indexOf("android")&&"audio/mpeg"!==o.container&&(l="mp4a.40.2",this.log("Android: force audio codec to "+l)),e.audioCodec&&e.audioCodec!==l&&this.log('Swapping manifest audio codec "'+e.audioCodec+'" for "'+l+'"'),o.levelCodec=l,o.id="main",this.log("Init audio buffer, container:"+o.container+", codecs[selected/level/parsed]=["+(l||"")+"/"+(e.audioCodec||"")+"/"+o.codec+"]")}c&&(c.levelCodec=e.videoCodec,c.id="main",this.log("Init video buffer, container:"+c.container+", codecs[level/parsed]=["+(e.videoCodec||"")+"/"+c.codec+"]")),u&&this.log("Init audiovideo buffer, container:"+u.container+", codecs[level/parsed]=["+(e.attrs.CODECS||"")+"/"+u.codec+"]"),this.hls.trigger(s.Events.BUFFER_CODECS,t),Object.keys(t).forEach((function(e){var i=t[e].initSegment;null!==i&&void 0!==i&&i.byteLength&&a.hls.trigger(s.Events.BUFFER_APPENDING,{type:e,data:i,frag:n,part:null,chunkMeta:r,parent:n.type})})),this.tick()}},x.getMainFwdBufferInfo=function(){return this.getFwdBufferInfo(this.mediaBuffer?this.mediaBuffer:this.media,u.PlaylistLevelType.MAIN)},x.backtrack=function(e){this.couldBacktrack=!0,this.backtrackFragment=e,this.resetTransmuxer(),this.flushBufferGap(e),this.fragmentTracker.removeFragment(e),this.fragPrevious=null,this.nextLoadPosition=e.start,this.state=i.State.IDLE},x.checkFragmentChanged=function(){var e=this.media,t=null;if(e&&e.readyState>1&&!1===e.seeking){var n=e.currentTime;if(o.BufferHelper.isBuffered(e,n)?t=this.getAppendedFrag(n):o.BufferHelper.isBuffered(e,n+.1)&&(t=this.getAppendedFrag(n+.1)),t){this.backtrackFragment=null;var r=this.fragPlaying,i=t.level;r&&t.sn===r.sn&&r.level===i&&t.urlId===r.urlId||(this.hls.trigger(s.Events.FRAG_CHANGED,{frag:t}),r&&r.level===i||this.hls.trigger(s.Events.LEVEL_SWITCHED,{level:i}),this.fragPlaying=t)}}},y=g,(b=[{key:"nextLevel",get:function(){var e=this.nextBufferedFrag;return e?e.level:-1}},{key:"currentFrag",get:function(){var e=this.media;return e?this.fragPlaying||this.getAppendedFrag(e.currentTime):null}},{key:"currentProgramDateTime",get:function(){var e=this.media;if(e){var t=e.currentTime,n=this.currentFrag;if(n&&(0,r.isFiniteNumber)(t)&&(0,r.isFiniteNumber)(n.programDateTime)){var i=n.programDateTime+1e3*(t-n.start);return new Date(i)}}return null}},{key:"currentLevel",get:function(){var e=this.currentFrag;return e?e.level:-1}},{key:"nextBufferedFrag",get:function(){var e=this.currentFrag;return e?this.followingBufferedFrag(e):null}},{key:"forceStartLoad",get:function(){return this._forceStartLoad}}])&&v(y.prototype,b),k&&v(y,k),Object.defineProperty(y,"prototype",{writable:!1}),g}(i.default)},"./src/controller/subtitle-stream-controller.ts":function(e,t,n){"use strict";n.r(t),n.d(t,{SubtitleStreamController:function(){return p}});var r=n("./src/events.ts"),i=n("./src/utils/buffer-helper.ts"),a=n("./src/controller/fragment-finders.ts"),s=n("./src/utils/discontinuities.ts"),o=n("./src/controller/level-helper.ts"),c=n("./src/controller/fragment-tracker.ts"),u=n("./src/controller/base-stream-controller.ts"),l=n("./src/types/loader.ts"),d=n("./src/types/level.ts");function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e,t){return f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},f(e,t)}var p=function(e){var t,n;function p(t,n){var r;return(r=e.call(this,t,n,"[subtitle-stream-controller]")||this).levels=[],r.currentTrackId=-1,r.tracksBuffered=[],r.mainDetails=null,r._registerListeners(),r}n=e,(t=p).prototype=Object.create(n.prototype),t.prototype.constructor=t,f(t,n);var m,g,y,b=p.prototype;return b.onHandlerDestroying=function(){this._unregisterListeners(),this.mainDetails=null},b._registerListeners=function(){var e=this.hls;e.on(r.Events.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(r.Events.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(r.Events.MANIFEST_LOADING,this.onManifestLoading,this),e.on(r.Events.LEVEL_LOADED,this.onLevelLoaded,this),e.on(r.Events.ERROR,this.onError,this),e.on(r.Events.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.on(r.Events.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),e.on(r.Events.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.on(r.Events.SUBTITLE_FRAG_PROCESSED,this.onSubtitleFragProcessed,this),e.on(r.Events.BUFFER_FLUSHING,this.onBufferFlushing,this),e.on(r.Events.FRAG_BUFFERED,this.onFragBuffered,this)},b._unregisterListeners=function(){var e=this.hls;e.off(r.Events.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(r.Events.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(r.Events.MANIFEST_LOADING,this.onManifestLoading,this),e.off(r.Events.LEVEL_LOADED,this.onLevelLoaded,this),e.off(r.Events.ERROR,this.onError,this),e.off(r.Events.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.off(r.Events.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),e.off(r.Events.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.off(r.Events.SUBTITLE_FRAG_PROCESSED,this.onSubtitleFragProcessed,this),e.off(r.Events.BUFFER_FLUSHING,this.onBufferFlushing,this),e.off(r.Events.FRAG_BUFFERED,this.onFragBuffered,this)},b.startLoad=function(e){this.stopLoad(),this.state=u.State.IDLE,this.setInterval(500),this.nextLoadPosition=this.startPosition=this.lastCurrentTime=e,this.tick()},b.onManifestLoading=function(){this.mainDetails=null,this.fragmentTracker.removeAllFragments()},b.onLevelLoaded=function(e,t){this.mainDetails=t.details},b.onSubtitleFragProcessed=function(e,t){var n=t.frag,r=t.success;if(this.fragPrevious=n,this.state=u.State.IDLE,r){var i=this.tracksBuffered[this.currentTrackId];if(i){for(var a,s=n.start,o=0;o<i.length;o++)if(s>=i[o].start&&s<=i[o].end){a=i[o];break}var c=n.start+n.duration;a?a.end=c:(a={start:s,end:c},i.push(a)),this.fragmentTracker.fragBuffered(n)}}},b.onBufferFlushing=function(e,t){var n=t.startOffset,r=t.endOffset;if(0===n&&r!==Number.POSITIVE_INFINITY){var i=this.currentTrackId,a=this.levels;if(!a.length||!a[i]||!a[i].details)return;var s=r-a[i].details.targetduration;if(s<=0)return;t.endOffsetSubtitles=Math.max(0,s),this.tracksBuffered.forEach((function(e){for(var t=0;t<e.length;)if(e[t].end<=s)e.shift();else{if(!(e[t].start<s))break;e[t].start=s,t++}})),this.fragmentTracker.removeFragmentsInRange(n,s,l.PlaylistLevelType.SUBTITLE)}},b.onFragBuffered=function(e,t){var n;this.loadedmetadata||t.frag.type!==l.PlaylistLevelType.MAIN||null!==(n=this.media)&&void 0!==n&&n.buffered.length&&(this.loadedmetadata=!0)},b.onError=function(e,t){var n,r=t.frag;r&&r.type===l.PlaylistLevelType.SUBTITLE&&(null!==(n=this.fragCurrent)&&void 0!==n&&n.loader&&this.fragCurrent.loader.abort(),this.state=u.State.IDLE)},b.onSubtitleTracksUpdated=function(e,t){var n=this,r=t.subtitleTracks;this.tracksBuffered=[],this.levels=r.map((function(e){return new d.Level(e)})),this.fragmentTracker.removeAllFragments(),this.fragPrevious=null,this.levels.forEach((function(e){n.tracksBuffered[e.id]=[]})),this.mediaBuffer=null},b.onSubtitleTrackSwitch=function(e,t){if(this.currentTrackId=t.id,this.levels.length&&-1!==this.currentTrackId){var n=this.levels[this.currentTrackId];null!==n&&void 0!==n&&n.details?this.mediaBuffer=this.mediaBufferTimeRanges:this.mediaBuffer=null,n&&this.setInterval(500)}else this.clearInterval()},b.onSubtitleTrackLoaded=function(e,t){var n,r=t.details,i=t.id,c=this.currentTrackId,l=this.levels;if(l.length){var d=l[c];if(!(i>=l.length||i!==c)&&d){this.mediaBuffer=this.mediaBufferTimeRanges;var h=0;if(r.live||null!==(n=d.details)&&void 0!==n&&n.live){var f=this.mainDetails;if(r.deltaUpdateFailed||!f)return;var p=f.fragments[0];d.details?0===(h=this.alignPlaylists(r,d.details))&&p&&(h=p.start,(0,o.addSliding)(r,h)):r.hasProgramDateTime&&f.hasProgramDateTime?((0,s.alignMediaPlaylistByPDT)(r,f),h=r.fragments[0].start):p&&(h=p.start,(0,o.addSliding)(r,h))}d.details=r,this.levelLastLoaded=i,this.startFragRequested||!this.mainDetails&&r.live||this.setStartPosition(d.details,h),this.tick(),r.live&&!this.fragCurrent&&this.media&&this.state===u.State.IDLE&&((0,a.findFragmentByPTS)(null,r.fragments,this.media.currentTime,0)||(this.warn("Subtitle playlist not aligned with playback"),d.details=void 0))}}},b._handleFragmentLoadComplete=function(e){var t=e.frag,n=e.payload,i=t.decryptdata,a=this.hls;if(!this.fragContextChanged(t)&&n&&n.byteLength>0&&i&&i.key&&i.iv&&"AES-128"===i.method){var s=performance.now();this.decrypter.webCryptoDecrypt(new Uint8Array(n),i.key.buffer,i.iv.buffer).then((function(e){var n=performance.now();a.trigger(r.Events.FRAG_DECRYPTED,{frag:t,payload:e,stats:{tstart:s,tdecrypt:n}})}))}},b.doTick=function(){if(this.media){if(this.state===u.State.IDLE){var e=this.currentTrackId,t=this.levels;if(!t.length||!t[e]||!t[e].details)return;var n=t[e].details,r=n.targetduration,s=this.config,o=this.getLoadPosition(),d=i.BufferHelper.bufferedInfo(this.tracksBuffered[this.currentTrackId]||[],o-r,s.maxBufferHole),h=d.end,f=d.len,p=this.getFwdBufferInfo(this.media,l.PlaylistLevelType.MAIN);if(f>this.getMaxBufferLength(null===p||void 0===p?void 0:p.len)+r)return;console.assert(n,"Subtitle track details are defined on idle subtitle stream controller tick");var v,m=n.fragments,g=m.length,y=n.edge,b=this.fragPrevious;if(h<y){var k=s.maxFragLookUpTolerance;!(v=(0,a.findFragmentByPTS)(b,m,Math.max(m[0].start,h),k))&&b&&b.start<m[0].start&&(v=m[0])}else v=m[g-1];if(!(v=this.mapToInitFragWhenRequired(v)))return;if(this.fragmentTracker.getState(v)!==c.FragmentState.NOT_LOADED)return;v.encrypted?this.loadKey(v,n):this.loadFragment(v,n,h)}}else this.state=u.State.IDLE},b.getMaxBufferLength=function(t){var n=e.prototype.getMaxBufferLength.call(this);return t?Math.max(n,t):n},b.loadFragment=function(t,n,r){this.fragCurrent=t,"initSegment"===t.sn?this._loadInitSegment(t):(this.startFragRequested=!0,e.prototype.loadFragment.call(this,t,n,r))},m=p,(g=[{key:"mediaBufferTimeRanges",get:function(){return new v(this.tracksBuffered[this.currentTrackId]||[])}}])&&h(m.prototype,g),y&&h(m,y),Object.defineProperty(m,"prototype",{writable:!1}),p}(u.default),v=function(e){this.buffered=void 0;var t=function(t,n,r){if((n>>>=0)>r-1)throw new DOMException("Failed to execute '"+t+"' on 'TimeRanges': The index provided ("+n+") is greater than the maximum bound ("+r+")");return e[n][t]};this.buffered={get length(){return e.length},end:function(n){return t("end",n,e.length)},start:function(n){return t("start",n,e.length)}}}},"./src/controller/subtitle-track-controller.ts":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return l}});var r=n("./src/events.ts"),i=n("./src/utils/texttrack-utils.ts"),a=n("./src/controller/base-playlist-controller.ts"),s=n("./src/types/loader.ts");function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e,t){return c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},c(e,t)}function u(e){for(var t=[],n=0;n<e.length;n++){var r=e[n];"subtitles"===r.kind&&r.label&&t.push(e[n])}return t}var l=function(e){var t,n;function a(t){var n;return(n=e.call(this,t,"[subtitle-track-controller]")||this).media=null,n.tracks=[],n.groupId=null,n.tracksInGroup=[],n.trackId=-1,n.selectDefaultTrack=!0,n.queuedDefaultTrack=-1,n.trackChangeListener=function(){return n.onTextTracksChanged()},n.asyncPollTrackChange=function(){return n.pollTrackChange(0)},n.useTextTrackPolling=!1,n.subtitlePollingInterval=-1,n._subtitleDisplay=!0,n.registerListeners(),n}n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,c(t,n);var l,d,h,f=a.prototype;return f.destroy=function(){this.unregisterListeners(),this.tracks.length=0,this.tracksInGroup.length=0,this.trackChangeListener=this.asyncPollTrackChange=null,e.prototype.destroy.call(this)},f.registerListeners=function(){var e=this.hls;e.on(r.Events.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(r.Events.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(r.Events.MANIFEST_LOADING,this.onManifestLoading,this),e.on(r.Events.MANIFEST_PARSED,this.onManifestParsed,this),e.on(r.Events.LEVEL_LOADING,this.onLevelLoading,this),e.on(r.Events.LEVEL_SWITCHING,this.onLevelSwitching,this),e.on(r.Events.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.on(r.Events.ERROR,this.onError,this)},f.unregisterListeners=function(){var e=this.hls;e.off(r.Events.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(r.Events.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(r.Events.MANIFEST_LOADING,this.onManifestLoading,this),e.off(r.Events.MANIFEST_PARSED,this.onManifestParsed,this),e.off(r.Events.LEVEL_LOADING,this.onLevelLoading,this),e.off(r.Events.LEVEL_SWITCHING,this.onLevelSwitching,this),e.off(r.Events.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.off(r.Events.ERROR,this.onError,this)},f.onMediaAttached=function(e,t){this.media=t.media,this.media&&(this.queuedDefaultTrack>-1&&(this.subtitleTrack=this.queuedDefaultTrack,this.queuedDefaultTrack=-1),this.useTextTrackPolling=!(this.media.textTracks&&"onchange"in this.media.textTracks),this.useTextTrackPolling?this.pollTrackChange(500):this.media.textTracks.addEventListener("change",this.asyncPollTrackChange))},f.pollTrackChange=function(e){self.clearInterval(this.subtitlePollingInterval),this.subtitlePollingInterval=self.setInterval(this.trackChangeListener,e)},f.onMediaDetaching=function(){this.media&&(self.clearInterval(this.subtitlePollingInterval),this.useTextTrackPolling||this.media.textTracks.removeEventListener("change",this.asyncPollTrackChange),this.trackId>-1&&(this.queuedDefaultTrack=this.trackId),u(this.media.textTracks).forEach((function(e){(0,i.clearCurrentCues)(e)})),this.subtitleTrack=-1,this.media=null)},f.onManifestLoading=function(){this.tracks=[],this.groupId=null,this.tracksInGroup=[],this.trackId=-1,this.selectDefaultTrack=!0},f.onManifestParsed=function(e,t){this.tracks=t.subtitleTracks},f.onSubtitleTrackLoaded=function(e,t){var n=t.id,r=t.details,i=this.trackId,a=this.tracksInGroup[i];if(a){var s=a.details;a.details=t.details,this.log("subtitle track "+n+" loaded ["+r.startSN+"-"+r.endSN+"]"),n===this.trackId&&(this.retryCount=0,this.playlistLoaded(n,t,s))}else this.warn("Invalid subtitle track id "+n)},f.onLevelLoading=function(e,t){this.switchLevel(t.level)},f.onLevelSwitching=function(e,t){this.switchLevel(t.level)},f.switchLevel=function(e){var t=this.hls.levels[e];if(null!==t&&void 0!==t&&t.textGroupIds){var n=t.textGroupIds[t.urlId];if(this.groupId!==n){var i=this.tracksInGroup?this.tracksInGroup[this.trackId]:void 0,a=this.tracks.filter((function(e){return!n||e.groupId===n}));this.tracksInGroup=a;var s=this.findTrackId(null===i||void 0===i?void 0:i.name)||this.findTrackId();this.groupId=n;var o={subtitleTracks:a};this.log("Updating subtitle tracks, "+a.length+' track(s) found in "'+n+'" group-id'),this.hls.trigger(r.Events.SUBTITLE_TRACKS_UPDATED,o),-1!==s&&this.setSubtitleTrack(s,i)}}},f.findTrackId=function(e){for(var t=this.tracksInGroup,n=0;n<t.length;n++){var r=t[n];if((!this.selectDefaultTrack||r.default)&&(!e||e===r.name))return r.id}return-1},f.onError=function(t,n){e.prototype.onError.call(this,t,n),!n.fatal&&n.context&&n.context.type===s.PlaylistContextType.SUBTITLE_TRACK&&n.context.id===this.trackId&&n.context.groupId===this.groupId&&this.retryLoadingOrFail(n)},f.loadPlaylist=function(e){var t=this.tracksInGroup[this.trackId];if(this.shouldLoadTrack(t)){var n=t.id,i=t.groupId,a=t.url;if(e)try{a=e.addDirectives(a)}catch(s){this.warn("Could not construct new URL with HLS Delivery Directives: "+s)}this.log("Loading subtitle playlist for id "+n),this.hls.trigger(r.Events.SUBTITLE_TRACK_LOADING,{url:a,id:n,groupId:i,deliveryDirectives:e||null})}},f.toggleTrackModes=function(e){var t=this,n=this.media,r=this.trackId;if(n){var i=u(n.textTracks),a=i.filter((function(e){return e.groupId===t.groupId}));if(-1===e)[].slice.call(i).forEach((function(e){e.mode="disabled"}));else{var s=a[r];s&&(s.mode="disabled")}var o=a[e];o&&(o.mode=this.subtitleDisplay?"showing":"hidden")}},f.setSubtitleTrack=function(e,t){var n,i=this.tracksInGroup;if(this.media){if(this.trackId!==e&&this.toggleTrackModes(e),!(this.trackId===e&&(-1===e||null!==(n=i[e])&&void 0!==n&&n.details)||e<-1||e>=i.length)){this.clearTimer();var a=i[e];if(this.log("Switching to subtitle track "+e),this.trackId=e,a){var s=a.id,o=a.groupId,c=void 0===o?"":o,u=a.name,l=a.type,d=a.url;this.hls.trigger(r.Events.SUBTITLE_TRACK_SWITCH,{id:s,groupId:c,name:u,type:l,url:d});var h=this.switchParams(a.url,null===t||void 0===t?void 0:t.details);this.loadPlaylist(h)}else this.hls.trigger(r.Events.SUBTITLE_TRACK_SWITCH,{id:e})}}else this.queuedDefaultTrack=e},f.onTextTracksChanged=function(){if(this.useTextTrackPolling||self.clearInterval(this.subtitlePollingInterval),this.media&&this.hls.config.renderTextTracksNatively){for(var e=-1,t=u(this.media.textTracks),n=0;n<t.length;n++)if("hidden"===t[n].mode)e=n;else if("showing"===t[n].mode){e=n;break}this.subtitleTrack!==e&&(this.subtitleTrack=e)}},l=a,(d=[{key:"subtitleDisplay",get:function(){return this._subtitleDisplay},set:function(e){this._subtitleDisplay=e,this.trackId>-1&&this.toggleTrackModes(this.trackId)}},{key:"subtitleTracks",get:function(){return this.tracksInGroup}},{key:"subtitleTrack",get:function(){return this.trackId},set:function(e){this.selectDefaultTrack=!1;var t=this.tracksInGroup?this.tracksInGroup[this.trackId]:void 0;this.setSubtitleTrack(e,t)}}])&&o(l.prototype,d),h&&o(l,h),Object.defineProperty(l,"prototype",{writable:!1}),a}(a.default)},"./src/controller/timeline-controller.ts":function(e,t,n){"use strict";n.r(t),n.d(t,{TimelineController:function(){return f}});var r=n("./src/polyfills/number.ts"),i=n("./src/events.ts"),a=n("./src/utils/cea-608-parser.ts"),s=n("./src/utils/output-filter.ts"),o=n("./src/utils/webvtt-parser.ts"),c=n("./src/utils/texttrack-utils.ts"),u=n("./src/utils/imsc1-ttml-parser.ts"),l=n("./src/utils/mp4-tools.ts"),d=n("./src/types/loader.ts"),h=n("./src/utils/logger.ts"),f=function(){function e(e){if(this.hls=void 0,this.media=null,this.config=void 0,this.enabled=!0,this.Cues=void 0,this.textTracks=[],this.tracks=[],this.initPTS=[],this.timescale=[],this.unparsedVttFrags=[],this.captionsTracks={},this.nonNativeCaptionsTracks={},this.cea608Parser1=void 0,this.cea608Parser2=void 0,this.lastSn=-1,this.lastPartIndex=-1,this.prevCC=-1,this.vttCCs={ccOffset:0,presentationOffset:0,0:{start:0,prevCC:-1,new:!0}},this.captionsProperties=void 0,this.hls=e,this.config=e.config,this.Cues=e.config.cueHandler,this.captionsProperties={textTrack1:{label:this.config.captionsTextTrack1Label,languageCode:this.config.captionsTextTrack1LanguageCode},textTrack2:{label:this.config.captionsTextTrack2Label,languageCode:this.config.captionsTextTrack2LanguageCode},textTrack3:{label:this.config.captionsTextTrack3Label,languageCode:this.config.captionsTextTrack3LanguageCode},textTrack4:{label:this.config.captionsTextTrack4Label,languageCode:this.config.captionsTextTrack4LanguageCode}},this.config.enableCEA708Captions){var t=new s.default(this,"textTrack1"),n=new s.default(this,"textTrack2"),r=new s.default(this,"textTrack3"),o=new s.default(this,"textTrack4");this.cea608Parser1=new a.default(1,t,n),this.cea608Parser2=new a.default(3,r,o)}e.on(i.Events.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(i.Events.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(i.Events.MANIFEST_LOADING,this.onManifestLoading,this),e.on(i.Events.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(i.Events.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.on(i.Events.FRAG_LOADING,this.onFragLoading,this),e.on(i.Events.FRAG_LOADED,this.onFragLoaded,this),e.on(i.Events.FRAG_PARSING_USERDATA,this.onFragParsingUserdata,this),e.on(i.Events.FRAG_DECRYPTED,this.onFragDecrypted,this),e.on(i.Events.INIT_PTS_FOUND,this.onInitPtsFound,this),e.on(i.Events.SUBTITLE_TRACKS_CLEARED,this.onSubtitleTracksCleared,this),e.on(i.Events.BUFFER_FLUSHING,this.onBufferFlushing,this)}var t=e.prototype;return t.destroy=function(){var e=this.hls;e.off(i.Events.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(i.Events.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(i.Events.MANIFEST_LOADING,this.onManifestLoading,this),e.off(i.Events.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(i.Events.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.off(i.Events.FRAG_LOADING,this.onFragLoading,this),e.off(i.Events.FRAG_LOADED,this.onFragLoaded,this),e.off(i.Events.FRAG_PARSING_USERDATA,this.onFragParsingUserdata,this),e.off(i.Events.FRAG_DECRYPTED,this.onFragDecrypted,this),e.off(i.Events.INIT_PTS_FOUND,this.onInitPtsFound,this),e.off(i.Events.SUBTITLE_TRACKS_CLEARED,this.onSubtitleTracksCleared,this),e.off(i.Events.BUFFER_FLUSHING,this.onBufferFlushing,this),this.hls=this.config=this.cea608Parser1=this.cea608Parser2=null},t.addCues=function(e,t,n,r,a){for(var s,o,c,u,l=!1,d=a.length;d--;){var h=a[d],f=(s=h[0],o=h[1],c=t,u=n,Math.min(o,u)-Math.max(s,c));if(f>=0&&(h[0]=Math.min(h[0],t),h[1]=Math.max(h[1],n),l=!0,f/(n-t)>.5))return}if(l||a.push([t,n]),this.config.renderTextTracksNatively){var p=this.captionsTracks[e];this.Cues.newCue(p,t,n,r)}else{var v=this.Cues.newCue(null,t,n,r);this.hls.trigger(i.Events.CUES_PARSED,{type:"captions",cues:v,track:e})}},t.onInitPtsFound=function(e,t){var n=this,r=t.frag,a=t.id,s=t.initPTS,o=t.timescale,c=this.unparsedVttFrags;"main"===a&&(this.initPTS[r.cc]=s,this.timescale[r.cc]=o),c.length&&(this.unparsedVttFrags=[],c.forEach((function(e){n.onFragLoaded(i.Events.FRAG_LOADED,e)})))},t.getExistingTrack=function(e){var t=this.media;if(t)for(var n=0;n<t.textTracks.length;n++){var r=t.textTracks[n];if(r[e])return r}return null},t.createCaptionsTrack=function(e){this.config.renderTextTracksNatively?this.createNativeTrack(e):this.createNonNativeTrack(e)},t.createNativeTrack=function(e){if(!this.captionsTracks[e]){var t=this.captionsProperties,n=this.captionsTracks,r=this.media,i=t[e],a=i.label,s=i.languageCode,o=this.getExistingTrack(e);if(o)n[e]=o,(0,c.clearCurrentCues)(n[e]),(0,c.sendAddTrackEvent)(n[e],r);else{var u=this.createTextTrack("captions",a,s);u&&(u[e]=!0,n[e]=u)}}},t.createNonNativeTrack=function(e){if(!this.nonNativeCaptionsTracks[e]){var t=this.captionsProperties[e];if(t){var n={_id:e,label:t.label,kind:"captions",default:!!t.media&&!!t.media.default,closedCaptions:t.media};this.nonNativeCaptionsTracks[e]=n,this.hls.trigger(i.Events.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:[n]})}}},t.createTextTrack=function(e,t,n){var r=this.media;if(r)return r.addTextTrack(e,t,n)},t.onMediaAttaching=function(e,t){this.media=t.media,this._cleanTracks()},t.onMediaDetaching=function(){var e=this.captionsTracks;Object.keys(e).forEach((function(t){(0,c.clearCurrentCues)(e[t]),delete e[t]})),this.nonNativeCaptionsTracks={}},t.onManifestLoading=function(){this.lastSn=-1,this.lastPartIndex=-1,this.prevCC=-1,this.vttCCs={ccOffset:0,presentationOffset:0,0:{start:0,prevCC:-1,new:!0}},this._cleanTracks(),this.tracks=[],this.captionsTracks={},this.nonNativeCaptionsTracks={},this.textTracks=[],this.unparsedVttFrags=this.unparsedVttFrags||[],this.initPTS=[],this.timescale=[],this.cea608Parser1&&this.cea608Parser2&&(this.cea608Parser1.reset(),this.cea608Parser2.reset())},t._cleanTracks=function(){var e=this.media;if(e){var t=e.textTracks;if(t)for(var n=0;n<t.length;n++)(0,c.clearCurrentCues)(t[n])}},t.onSubtitleTracksUpdated=function(e,t){var n=this;this.textTracks=[];var r=t.subtitleTracks||[],a=r.some((function(e){return e.textCodec===u.IMSC1_CODEC}));if(this.config.enableWebVTT||a&&this.config.enableIMSC1){var s=this.tracks&&r&&this.tracks.length===r.length;if(this.tracks=r||[],this.config.renderTextTracksNatively){var o=this.media?this.media.textTracks:[];this.tracks.forEach((function(e,t){var r;if(t<o.length){for(var i=null,a=0;a<o.length;a++)if(p(o[a],e)){i=o[a];break}i&&(r=i)}if(r)(0,c.clearCurrentCues)(r);else{var s=n._captionsOrSubtitlesFromCharacteristics(e);(r=n.createTextTrack(s,e.name,e.lang))&&(r.mode="disabled")}r&&(r.groupId=e.groupId,n.textTracks.push(r))}))}else if(!s&&this.tracks&&this.tracks.length){var l=this.tracks.map((function(e){return{label:e.name,kind:e.type.toLowerCase(),default:e.default,subtitleTrack:e}}));this.hls.trigger(i.Events.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:l})}}},t._captionsOrSubtitlesFromCharacteristics=function(e){var t;if(null!==(t=e.attrs)&&void 0!==t&&t.CHARACTERISTICS){var n=/transcribes-spoken-dialog/gi.test(e.attrs.CHARACTERISTICS),r=/describes-music-and-sound/gi.test(e.attrs.CHARACTERISTICS);if(n&&r)return"captions"}return"subtitles"},t.onManifestLoaded=function(e,t){var n=this;this.config.enableCEA708Captions&&t.captions&&t.captions.forEach((function(e){var t=/(?:CC|SERVICE)([1-4])/.exec(e.instreamId);if(t){var r="textTrack"+t[1],i=n.captionsProperties[r];i&&(i.label=e.name,e.lang&&(i.languageCode=e.lang),i.media=e)}}))},t.closedCaptionsForLevel=function(e){var t=this.hls.levels[e.level];return null===t||void 0===t?void 0:t.attrs["CLOSED-CAPTIONS"]},t.onFragLoading=function(e,t){var n=this.cea608Parser1,r=this.cea608Parser2,i=this.lastSn,a=this.lastPartIndex;if(this.enabled&&n&&r&&t.frag.type===d.PlaylistLevelType.MAIN){var s,o,c=t.frag.sn,u=null!=(s=null===t||void 0===t||null===(o=t.part)||void 0===o?void 0:o.index)?s:-1;c===i+1||c===i&&u===a+1||(n.reset(),r.reset()),this.lastSn=c,this.lastPartIndex=u}},t.onFragLoaded=function(e,t){var n=t.frag,a=t.payload,s=this.initPTS,o=this.unparsedVttFrags;if(n.type===d.PlaylistLevelType.SUBTITLE)if(a.byteLength){if(!(0,r.isFiniteNumber)(s[n.cc]))return o.push(t),void(s.length&&this.hls.trigger(i.Events.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:n,error:new Error("Missing initial subtitle PTS")}));var c=n.decryptdata,l="stats"in t;if(null==c||null==c.key||"AES-128"!==c.method||l){var h=this.tracks[n.level],f=this.vttCCs;f[n.cc]||(f[n.cc]={start:n.start,prevCC:this.prevCC,new:!0},this.prevCC=n.cc),h&&h.textCodec===u.IMSC1_CODEC?this._parseIMSC1(n,a):this._parseVTTs(n,a,f)}}else this.hls.trigger(i.Events.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:n,error:new Error("Empty subtitle payload")})},t._parseIMSC1=function(e,t){var n=this,r=this.hls;(0,u.parseIMSC1)(t,this.initPTS[e.cc],this.timescale[e.cc],(function(t){n._appendCues(t,e.level),r.trigger(i.Events.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:e})}),(function(t){h.logger.log("Failed to parse IMSC1: "+t),r.trigger(i.Events.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:e,error:t})}))},t._parseVTTs=function(e,t,n){var r,a=this,s=this.hls,c=null!==(r=e.initSegment)&&void 0!==r&&r.data?(0,l.appendUint8Array)(e.initSegment.data,new Uint8Array(t)):t;(0,o.parseWebVTT)(c,this.initPTS[e.cc],this.timescale[e.cc],n,e.cc,e.start,(function(t){a._appendCues(t,e.level),s.trigger(i.Events.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:e})}),(function(n){a._fallbackToIMSC1(e,t),h.logger.log("Failed to parse VTT cue: "+n),s.trigger(i.Events.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:e,error:n})}))},t._fallbackToIMSC1=function(e,t){var n=this,r=this.tracks[e.level];r.textCodec||(0,u.parseIMSC1)(t,this.initPTS[e.cc],this.timescale[e.cc],(function(){r.textCodec=u.IMSC1_CODEC,n._parseIMSC1(e,t)}),(function(){r.textCodec="wvtt"}))},t._appendCues=function(e,t){var n=this.hls;if(this.config.renderTextTracksNatively){var r=this.textTracks[t];if(!r||"disabled"===r.mode)return;e.forEach((function(e){return(0,c.addCueToTrack)(r,e)}))}else{var a=this.tracks[t];if(!a)return;var s=a.default?"default":"subtitles"+t;n.trigger(i.Events.CUES_PARSED,{type:"subtitles",cues:e,track:s})}},t.onFragDecrypted=function(e,t){var n=t.frag;if(n.type===d.PlaylistLevelType.SUBTITLE){if(!(0,r.isFiniteNumber)(this.initPTS[n.cc]))return void this.unparsedVttFrags.push(t);this.onFragLoaded(i.Events.FRAG_LOADED,t)}},t.onSubtitleTracksCleared=function(){this.tracks=[],this.captionsTracks={}},t.onFragParsingUserdata=function(e,t){var n=this.cea608Parser1,r=this.cea608Parser2;if(this.enabled&&n&&r){var i=t.frag,a=t.samples;if(i.type!==d.PlaylistLevelType.MAIN||"NONE"!==this.closedCaptionsForLevel(i))for(var s=0;s<a.length;s++){var o=a[s].bytes;if(o){var c=this.extractCea608Data(o);n.addData(a[s].pts,c[0]),r.addData(a[s].pts,c[1])}}}},t.onBufferFlushing=function(e,t){var n=t.startOffset,r=t.endOffset,i=t.endOffsetSubtitles,a=t.type,s=this.media;if(s&&!(s.currentTime<r)){if(!a||"video"===a){var o=this.captionsTracks;Object.keys(o).forEach((function(e){return(0,c.removeCuesInRange)(o[e],n,r)}))}if(this.config.renderTextTracksNatively&&0===n&&void 0!==i){var u=this.textTracks;Object.keys(u).forEach((function(e){return(0,c.removeCuesInRange)(u[e],n,i)}))}}},t.extractCea608Data=function(e){for(var t=[[],[]],n=31&e[0],r=2,i=0;i<n;i++){var a=e[r++],s=127&e[r++],o=127&e[r++];if((0!==s||0!==o)&&0!==(4&a)){var c=3&a;0!==c&&1!==c||(t[c].push(s),t[c].push(o))}}return t},e}();function p(e,t){return e&&e.label===t.name&&!(e.textTrack1||e.textTrack2)}},"./src/crypt/aes-crypto.ts":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return r}});var r=function(){function e(e,t){this.subtle=void 0,this.aesIV=void 0,this.subtle=e,this.aesIV=t}return e.prototype.decrypt=function(e,t){return this.subtle.decrypt({name:"AES-CBC",iv:this.aesIV},t,e)},e}()},"./src/crypt/aes-decryptor.ts":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return a},removePadding:function(){return i}});var r=n("./src/utils/typed-array.ts");function i(e){var t=e.byteLength,n=t&&new DataView(e.buffer).getUint8(t-1);return n?(0,r.sliceUint8)(e,0,t-n):e}var a=function(){function e(){this.rcon=[0,1,2,4,8,16,32,64,128,27,54],this.subMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.invSubMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.sBox=new Uint32Array(256),this.invSBox=new Uint32Array(256),this.key=new Uint32Array(0),this.ksRows=0,this.keySize=0,this.keySchedule=void 0,this.invKeySchedule=void 0,this.initTable()}var t=e.prototype;return t.uint8ArrayToUint32Array_=function(e){for(var t=new DataView(e),n=new Uint32Array(4),r=0;r<4;r++)n[r]=t.getUint32(4*r);return n},t.initTable=function(){var e=this.sBox,t=this.invSBox,n=this.subMix,r=n[0],i=n[1],a=n[2],s=n[3],o=this.invSubMix,c=o[0],u=o[1],l=o[2],d=o[3],h=new Uint32Array(256),f=0,p=0,v=0;for(v=0;v<256;v++)h[v]=v<128?v<<1:v<<1^283;for(v=0;v<256;v++){var m=p^p<<1^p<<2^p<<3^p<<4;m=m>>>8^255&m^99,e[f]=m,t[m]=f;var g=h[f],y=h[g],b=h[y],k=257*h[m]^16843008*m;r[f]=k<<24|k>>>8,i[f]=k<<16|k>>>16,a[f]=k<<8|k>>>24,s[f]=k,k=16843009*b^65537*y^257*g^16843008*f,c[m]=k<<24|k>>>8,u[m]=k<<16|k>>>16,l[m]=k<<8|k>>>24,d[m]=k,f?(f=g^h[h[h[b^g]]],p^=h[h[p]]):f=p=1}},t.expandKey=function(e){for(var t=this.uint8ArrayToUint32Array_(e),n=!0,r=0;r<t.length&&n;)n=t[r]===this.key[r],r++;if(!n){this.key=t;var i=this.keySize=t.length;if(4!==i&&6!==i&&8!==i)throw new Error("Invalid aes key size="+i);var a,s,o,c,u=this.ksRows=4*(i+6+1),l=this.keySchedule=new Uint32Array(u),d=this.invKeySchedule=new Uint32Array(u),h=this.sBox,f=this.rcon,p=this.invSubMix,v=p[0],m=p[1],g=p[2],y=p[3];for(a=0;a<u;a++)a<i?o=l[a]=t[a]:(c=o,a%i===0?(c=h[(c=c<<8|c>>>24)>>>24]<<24|h[c>>>16&255]<<16|h[c>>>8&255]<<8|h[255&c],c^=f[a/i|0]<<24):i>6&&a%i===4&&(c=h[c>>>24]<<24|h[c>>>16&255]<<16|h[c>>>8&255]<<8|h[255&c]),l[a]=o=(l[a-i]^c)>>>0);for(s=0;s<u;s++)a=u-s,c=3&s?l[a]:l[a-4],d[s]=s<4||a<=4?c:v[h[c>>>24]]^m[h[c>>>16&255]]^g[h[c>>>8&255]]^y[h[255&c]],d[s]=d[s]>>>0}},t.networkToHostOrderSwap=function(e){return e<<24|(65280&e)<<8|(16711680&e)>>8|e>>>24},t.decrypt=function(e,t,n){for(var r,i,a,s,o,c,u,l,d,h,f,p,v,m,g=this.keySize+6,y=this.invKeySchedule,b=this.invSBox,k=this.invSubMix,x=k[0],w=k[1],T=k[2],E=k[3],_=this.uint8ArrayToUint32Array_(n),S=_[0],A=_[1],C=_[2],I=_[3],R=new Int32Array(e),P=new Int32Array(R.length),D=this.networkToHostOrderSwap;t<R.length;){for(d=D(R[t]),h=D(R[t+1]),f=D(R[t+2]),p=D(R[t+3]),o=d^y[0],c=p^y[1],u=f^y[2],l=h^y[3],v=4,m=1;m<g;m++)r=x[o>>>24]^w[c>>16&255]^T[u>>8&255]^E[255&l]^y[v],i=x[c>>>24]^w[u>>16&255]^T[l>>8&255]^E[255&o]^y[v+1],a=x[u>>>24]^w[l>>16&255]^T[o>>8&255]^E[255&c]^y[v+2],s=x[l>>>24]^w[o>>16&255]^T[c>>8&255]^E[255&u]^y[v+3],o=r,c=i,u=a,l=s,v+=4;r=b[o>>>24]<<24^b[c>>16&255]<<16^b[u>>8&255]<<8^b[255&l]^y[v],i=b[c>>>24]<<24^b[u>>16&255]<<16^b[l>>8&255]<<8^b[255&o]^y[v+1],a=b[u>>>24]<<24^b[l>>16&255]<<16^b[o>>8&255]<<8^b[255&c]^y[v+2],s=b[l>>>24]<<24^b[o>>16&255]<<16^b[c>>8&255]<<8^b[255&u]^y[v+3],P[t]=D(r^S),P[t+1]=D(s^A),P[t+2]=D(a^C),P[t+3]=D(i^I),S=d,A=h,C=f,I=p,t+=4}return P.buffer},e}()},"./src/crypt/decrypter.ts":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return u}});var r=n("./src/crypt/aes-crypto.ts"),i=n("./src/crypt/fast-aes-key.ts"),a=n("./src/crypt/aes-decryptor.ts"),s=n("./src/utils/logger.ts"),o=n("./src/utils/mp4-tools.ts"),c=n("./src/utils/typed-array.ts"),u=function(){function e(e,t,n){var r=(void 0===n?{}:n).removePKCS7Padding,i=void 0===r||r;if(this.logEnabled=!0,this.observer=void 0,this.config=void 0,this.removePKCS7Padding=void 0,this.subtle=null,this.softwareDecrypter=null,this.key=null,this.fastAesKey=null,this.remainderData=null,this.currentIV=null,this.currentResult=null,this.observer=e,this.config=t,this.removePKCS7Padding=i,i)try{var a=self.crypto;a&&(this.subtle=a.subtle||a.webkitSubtle)}catch(s){}null===this.subtle&&(this.config.enableSoftwareAES=!0)}var t=e.prototype;return t.destroy=function(){this.observer=null},t.isSync=function(){return this.config.enableSoftwareAES},t.flush=function(){var e=this.currentResult;if(e){var t=new Uint8Array(e);return this.reset(),this.removePKCS7Padding?(0,a.removePadding)(t):t}this.reset()},t.reset=function(){this.currentResult=null,this.currentIV=null,this.remainderData=null,this.softwareDecrypter&&(this.softwareDecrypter=null)},t.decrypt=function(e,t,n,r){if(this.config.enableSoftwareAES){this.softwareDecrypt(new Uint8Array(e),t,n);var i=this.flush();i&&r(i.buffer)}else this.webCryptoDecrypt(new Uint8Array(e),t,n).then(r)},t.softwareDecrypt=function(e,t,n){var r=this.currentIV,i=this.currentResult,s=this.remainderData;this.logOnce("JS AES decrypt"),s&&(e=(0,o.appendUint8Array)(s,e),this.remainderData=null);var u=this.getValidChunk(e);if(!u.length)return null;r&&(n=r);var l=this.softwareDecrypter;l||(l=this.softwareDecrypter=new a.default),l.expandKey(t);var d=i;return this.currentResult=l.decrypt(u.buffer,0,n),this.currentIV=(0,c.sliceUint8)(u,-16).buffer,d||null},t.webCryptoDecrypt=function(e,t,n){var a=this,s=this.subtle;return this.key===t&&this.fastAesKey||(this.key=t,this.fastAesKey=new i.default(s,t)),this.fastAesKey.expandKey().then((function(t){return s?new r.default(s,n).decrypt(e.buffer,t):Promise.reject(new Error("web crypto not initialized"))})).catch((function(r){return a.onWebCryptoError(r,e,t,n)}))},t.onWebCryptoError=function(e,t,n,r){return s.logger.warn("[decrypter.ts]: WebCrypto Error, disable WebCrypto API:",e),this.config.enableSoftwareAES=!0,this.logEnabled=!0,this.softwareDecrypt(t,n,r)},t.getValidChunk=function(e){var t=e,n=e.length-e.length%16;return n!==e.length&&(t=(0,c.sliceUint8)(e,0,n),this.remainderData=(0,c.sliceUint8)(e,n)),t},t.logOnce=function(e){this.logEnabled&&(s.logger.log("[decrypter.ts]: "+e),this.logEnabled=!1)},e}()},"./src/crypt/fast-aes-key.ts":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return r}});var r=function(){function e(e,t){this.subtle=void 0,this.key=void 0,this.subtle=e,this.key=t}return e.prototype.expandKey=function(){return this.subtle.importKey("raw",this.key,{name:"AES-CBC"},!1,["encrypt","decrypt"])},e}()},"./src/demux/aacdemuxer.ts":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return c}});var r=n("./src/demux/base-audio-demuxer.ts"),i=n("./src/demux/adts.ts"),a=n("./src/utils/logger.ts"),s=n("./src/demux/id3.ts");function o(e,t){return o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},o(e,t)}var c=function(e){var t,n;function r(t,n){var r;return(r=e.call(this)||this).observer=void 0,r.config=void 0,r.observer=t,r.config=n,r}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,o(t,n);var c=r.prototype;return c.resetInitSegment=function(t,n,r,i){e.prototype.resetInitSegment.call(this,t,n,r,i),this._audioTrack={container:"audio/adts",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"aac",samples:[],manifestCodec:n,duration:i,inputTimeScale:9e4,dropped:0}},r.probe=function(e){if(!e)return!1;for(var t=(s.getID3Data(e,0)||[]).length,n=e.length;t<n;t++)if(i.probe(e,t))return a.logger.log("ADTS sync word found !"),!0;return!1},c.canParse=function(e,t){return i.canParse(e,t)},c.appendFrame=function(e,t,n){i.initTrackConfig(e,this.observer,t,n,e.manifestCodec);var r=i.appendFrame(e,t,n,this.basePTS,this.frameIndex);if(r&&0===r.missing)return r},r}(r.default)},"./src/demux/adts.ts":function(e,t,n){"use strict";n.r(t),n.d(t,{appendFrame:function(){return g},canGetFrameLength:function(){return l},canParse:function(){return h},getAudioConfig:function(){return s},getFrameDuration:function(){return v},getFullFrameLength:function(){return u},getHeaderLength:function(){return c},initTrackConfig:function(){return p},isHeader:function(){return d},isHeaderPattern:function(){return o},parseFrameHeader:function(){return m},probe:function(){return f}});var r=n("./src/utils/logger.ts"),i=n("./src/errors.ts"),a=n("./src/events.ts");function s(e,t,n,s){var o,c,u,l,d=navigator.userAgent.toLowerCase(),h=s,f=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];o=1+((192&t[n+2])>>>6);var p=(60&t[n+2])>>>2;if(!(p>f.length-1))return u=(1&t[n+2])<<2,u|=(192&t[n+3])>>>6,r.logger.log("manifest codec:"+s+", ADTS type:"+o+", samplingIndex:"+p),/firefox/i.test(d)?p>=6?(o=5,l=new Array(4),c=p-3):(o=2,l=new Array(2),c=p):-1!==d.indexOf("android")?(o=2,l=new Array(2),c=p):(o=5,l=new Array(4),s&&(-1!==s.indexOf("mp4a.40.29")||-1!==s.indexOf("mp4a.40.5"))||!s&&p>=6?c=p-3:((s&&-1!==s.indexOf("mp4a.40.2")&&(p>=6&&1===u||/vivaldi/i.test(d))||!s&&1===u)&&(o=2,l=new Array(2)),c=p)),l[0]=o<<3,l[0]|=(14&p)>>1,l[1]|=(1&p)<<7,l[1]|=u<<3,5===o&&(l[1]|=(14&c)>>1,l[2]=(1&c)<<7,l[2]|=8,l[3]=0),{config:l,samplerate:f[p],channelCount:u,codec:"mp4a.40."+o,manifestCodec:h};e.trigger(a.Events.ERROR,{type:i.ErrorTypes.MEDIA_ERROR,details:i.ErrorDetails.FRAG_PARSING_ERROR,fatal:!0,reason:"invalid ADTS sampling index:"+p})}function o(e,t){return 255===e[t]&&240===(246&e[t+1])}function c(e,t){return 1&e[t+1]?7:9}function u(e,t){return(3&e[t+3])<<11|e[t+4]<<3|(224&e[t+5])>>>5}function l(e,t){return t+5<e.length}function d(e,t){return t+1<e.length&&o(e,t)}function h(e,t){return l(e,t)&&o(e,t)&&u(e,t)<=e.length-t}function f(e,t){if(d(e,t)){var n=c(e,t);if(t+n>=e.length)return!1;var r=u(e,t);if(r<=n)return!1;var i=t+r;return i===e.length||d(e,i)}return!1}function p(e,t,n,i,a){if(!e.samplerate){var o=s(t,n,i,a);if(!o)return;e.config=o.config,e.samplerate=o.samplerate,e.channelCount=o.channelCount,e.codec=o.codec,e.manifestCodec=o.manifestCodec,r.logger.log("parsed codec:"+e.codec+", rate:"+o.samplerate+", channels:"+o.channelCount)}}function v(e){return 9216e4/e}function m(e,t){var n=c(e,t);if(t+n<=e.length){var r=u(e,t)-n;if(r>0)return{headerLength:n,frameLength:r}}}function g(e,t,n,r,i){var a,s=r+i*v(e.samplerate),o=m(t,n);if(o){var c=o.frameLength,u=o.headerLength,l=u+c,d=Math.max(0,n+l-t.length);d?(a=new Uint8Array(l-u)).set(t.subarray(n+u,t.length),0):a=t.subarray(n+u,n+l);var h={unit:a,pts:s};return d||e.samples.push(h),{sample:h,length:l,missing:d}}var f=t.length-n;return(a=new Uint8Array(f)).set(t.subarray(n,t.length),0),{sample:{unit:a,pts:s},length:f,missing:-1}}},"./src/demux/base-audio-demuxer.ts":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return d},initPTSFn:function(){return l}});var r=n("./src/polyfills/number.ts"),i=n("./src/demux/id3.ts"),a=n("./src/types/demuxer.ts"),s=n("./src/demux/dummy-demuxed-track.ts"),o=n("./src/utils/mp4-tools.ts"),c=n("./src/utils/typed-array.ts"),u=function(){function e(){this._audioTrack=void 0,this._id3Track=void 0,this.frameIndex=0,this.cachedData=null,this.basePTS=null,this.initPTS=null,this.lastPTS=null}var t=e.prototype;return t.resetInitSegment=function(e,t,n,r){this._id3Track={type:"id3",id:3,pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:0}},t.resetTimeStamp=function(e){this.initPTS=e,this.resetContiguity()},t.resetContiguity=function(){this.basePTS=null,this.lastPTS=null,this.frameIndex=0},t.canParse=function(e,t){return!1},t.appendFrame=function(e,t,n){},t.demux=function(e,t){this.cachedData&&(e=(0,o.appendUint8Array)(this.cachedData,e),this.cachedData=null);var n,u=i.getID3Data(e,0),d=u?u.length:0,h=this._audioTrack,f=this._id3Track,p=u?i.getTimeStamp(u):void 0,v=e.length;for((null===this.basePTS||0===this.frameIndex&&(0,r.isFiniteNumber)(p))&&(this.basePTS=l(p,t,this.initPTS),this.lastPTS=this.basePTS),null===this.lastPTS&&(this.lastPTS=this.basePTS),u&&u.length>0&&f.samples.push({pts:this.lastPTS,dts:this.lastPTS,data:u,type:a.MetadataSchema.audioId3,duration:Number.POSITIVE_INFINITY});d<v;){if(this.canParse(e,d)){var m=this.appendFrame(h,e,d);m?(this.frameIndex++,this.lastPTS=m.sample.pts,n=d+=m.length):d=v}else i.canParse(e,d)?(u=i.getID3Data(e,d),f.samples.push({pts:this.lastPTS,dts:this.lastPTS,data:u,type:a.MetadataSchema.audioId3,duration:Number.POSITIVE_INFINITY}),n=d+=u.length):d++;if(d===v&&n!==v){var g=(0,c.sliceUint8)(e,n);this.cachedData?this.cachedData=(0,o.appendUint8Array)(this.cachedData,g):this.cachedData=g}}return{audioTrack:h,videoTrack:(0,s.dummyTrack)(),id3Track:f,textTrack:(0,s.dummyTrack)()}},t.demuxSampleAes=function(e,t,n){return Promise.reject(new Error("["+this+"] This demuxer does not support Sample-AES decryption"))},t.flush=function(e){var t=this.cachedData;return t&&(this.cachedData=null,this.demux(t,0)),{audioTrack:this._audioTrack,videoTrack:(0,s.dummyTrack)(),id3Track:this._id3Track,textTrack:(0,s.dummyTrack)()}},t.destroy=function(){},e}(),l=function(e,t,n){return(0,r.isFiniteNumber)(e)?90*e:9e4*t+(n||0)},d=u},"./src/demux/chunk-cache.ts":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return r}});var r=function(){function e(){this.chunks=[],this.dataLength=0}var t=e.prototype;return t.push=function(e){this.chunks.push(e),this.dataLength+=e.length},t.flush=function(){var e,t=this.chunks,n=this.dataLength;return t.length?(e=1===t.length?t[0]:function(e,t){for(var n=new Uint8Array(t),r=0,i=0;i<e.length;i++){var a=e[i];n.set(a,r),r+=a.length}return n}(t,n),this.reset(),e):new Uint8Array(0)},t.reset=function(){this.chunks.length=0,this.dataLength=0},e}()},"./src/demux/dummy-demuxed-track.ts":function(e,t,n){"use strict";function r(e,t){return void 0===e&&(e=""),void 0===t&&(t=9e4),{type:e,id:-1,pid:-1,inputTimeScale:t,sequenceNumber:-1,samples:[],dropped:0}}n.r(t),n.d(t,{dummyTrack:function(){return r}})},"./src/demux/exp-golomb.ts":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return i}});var r=n("./src/utils/logger.ts"),i=function(){function e(e){this.data=void 0,this.bytesAvailable=void 0,this.word=void 0,this.bitsAvailable=void 0,this.data=e,this.bytesAvailable=e.byteLength,this.word=0,this.bitsAvailable=0}var t=e.prototype;return t.loadWord=function(){var e=this.data,t=this.bytesAvailable,n=e.byteLength-t,r=new Uint8Array(4),i=Math.min(4,t);if(0===i)throw new Error("no bytes available");r.set(e.subarray(n,n+i)),this.word=new DataView(r.buffer).getUint32(0),this.bitsAvailable=8*i,this.bytesAvailable-=i},t.skipBits=function(e){var t;this.bitsAvailable>e?(this.word<<=e,this.bitsAvailable-=e):(e-=this.bitsAvailable,e-=(t=e>>3)>>3,this.bytesAvailable-=t,this.loadWord(),this.word<<=e,this.bitsAvailable-=e)},t.readBits=function(e){var t=Math.min(this.bitsAvailable,e),n=this.word>>>32-t;return e>32&&r.logger.error("Cannot read more than 32 bits at a time"),this.bitsAvailable-=t,this.bitsAvailable>0?this.word<<=t:this.bytesAvailable>0&&this.loadWord(),(t=e-t)>0&&this.bitsAvailable?n<<t|this.readBits(t):n},t.skipLZ=function(){var e;for(e=0;e<this.bitsAvailable;++e)if(0!==(this.word&2147483648>>>e))return this.word<<=e,this.bitsAvailable-=e,e;return this.loadWord(),e+this.skipLZ()},t.skipUEG=function(){this.skipBits(1+this.skipLZ())},t.skipEG=function(){this.skipBits(1+this.skipLZ())},t.readUEG=function(){var e=this.skipLZ();return this.readBits(e+1)-1},t.readEG=function(){var e=this.readUEG();return 1&e?1+e>>>1:-1*(e>>>1)},t.readBoolean=function(){return 1===this.readBits(1)},t.readUByte=function(){return this.readBits(8)},t.readUShort=function(){return this.readBits(16)},t.readUInt=function(){return this.readBits(32)},t.skipScalingList=function(e){for(var t=8,n=8,r=0;r<e;r++)0!==n&&(n=(t+this.readEG()+256)%256),t=0===n?t:n},t.readSPS=function(){var e,t,n,r=0,i=0,a=0,s=0,o=this.readUByte.bind(this),c=this.readBits.bind(this),u=this.readUEG.bind(this),l=this.readBoolean.bind(this),d=this.skipBits.bind(this),h=this.skipEG.bind(this),f=this.skipUEG.bind(this),p=this.skipScalingList.bind(this);o();var v=o();if(c(5),d(3),o(),f(),100===v||110===v||122===v||244===v||44===v||83===v||86===v||118===v||128===v){var m=u();if(3===m&&d(1),f(),f(),d(1),l())for(t=3!==m?8:12,n=0;n<t;n++)l()&&p(n<6?16:64)}f();var g=u();if(0===g)u();else if(1===g)for(d(1),h(),h(),e=u(),n=0;n<e;n++)h();f(),d(1);var y=u(),b=u(),k=c(1);0===k&&d(1),d(1),l()&&(r=u(),i=u(),a=u(),s=u());var x=[1,1];if(l()&&l())switch(o()){case 1:x=[1,1];break;case 2:x=[12,11];break;case 3:x=[10,11];break;case 4:x=[16,11];break;case 5:x=[40,33];break;case 6:x=[24,11];break;case 7:x=[20,11];break;case 8:x=[32,11];break;case 9:x=[80,33];break;case 10:x=[18,11];break;case 11:x=[15,11];break;case 12:x=[64,33];break;case 13:x=[160,99];break;case 14:x=[4,3];break;case 15:x=[3,2];break;case 16:x=[2,1];break;case 255:x=[o()<<8|o(),o()<<8|o()]}return{width:Math.ceil(16*(y+1)-2*r-2*i),height:(2-k)*(b+1)*16-(k?2:4)*(a+s),pixelRatio:x}},t.readSliceType=function(){return this.readUByte(),this.readUEG(),this.readUEG()},e}()},"./src/demux/id3.ts":function(e,t,n){"use strict";n.r(t),n.d(t,{canParse:function(){return c},decodeFrame:function(){return f},getID3Data:function(){return s},getID3Frames:function(){return h},getTimeStamp:function(){return u},isFooter:function(){return a},isHeader:function(){return i},isTimeStampFrame:function(){return l},testables:function(){return b},utf8ArrayToStr:function(){return y}});var r,i=function(e,t){return t+10<=e.length&&73===e[t]&&68===e[t+1]&&51===e[t+2]&&e[t+3]<255&&e[t+4]<255&&e[t+6]<128&&e[t+7]<128&&e[t+8]<128&&e[t+9]<128},a=function(e,t){return t+10<=e.length&&51===e[t]&&68===e[t+1]&&73===e[t+2]&&e[t+3]<255&&e[t+4]<255&&e[t+6]<128&&e[t+7]<128&&e[t+8]<128&&e[t+9]<128},s=function(e,t){for(var n=t,r=0;i(e,t);)r+=10,r+=o(e,t+6),a(e,t+10)&&(r+=10),t+=r;if(r>0)return e.subarray(n,n+r)},o=function(e,t){var n=0;return n=(127&e[t])<<21,n|=(127&e[t+1])<<14,n|=(127&e[t+2])<<7,n|=127&e[t+3]},c=function(e,t){return i(e,t)&&o(e,t+6)+10<=e.length-t},u=function(e){for(var t=h(e),n=0;n<t.length;n++){var r=t[n];if(l(r))return g(r)}},l=function(e){return e&&"PRIV"===e.key&&"com.apple.streaming.transportStreamTimestamp"===e.info},d=function(e){var t=String.fromCharCode(e[0],e[1],e[2],e[3]),n=o(e,4);return{type:t,size:n,data:e.subarray(10,10+n)}},h=function(e){for(var t=0,n=[];i(e,t);){for(var r=o(e,t+6),s=(t+=10)+r;t+8<s;){var c=d(e.subarray(t)),u=f(c);u&&n.push(u),t+=c.size+10}a(e,t)&&(t+=10)}return n},f=function(e){return"PRIV"===e.type?p(e):"W"===e.type[0]?m(e):v(e)},p=function(e){if(!(e.size<2)){var t=y(e.data,!0),n=new Uint8Array(e.data.subarray(t.length+1));return{key:e.type,info:t,data:n.buffer}}},v=function(e){if(!(e.size<2)){if("TXXX"===e.type){var t=1,n=y(e.data.subarray(t),!0);t+=n.length+1;var r=y(e.data.subarray(t));return{key:e.type,info:n,data:r}}var i=y(e.data.subarray(1));return{key:e.type,data:i}}},m=function(e){if("WXXX"===e.type){if(e.size<2)return;var t=1,n=y(e.data.subarray(t),!0);t+=n.length+1;var r=y(e.data.subarray(t));return{key:e.type,info:n,data:r}}var i=y(e.data);return{key:e.type,data:i}},g=function(e){if(8===e.data.byteLength){var t=new Uint8Array(e.data),n=1&t[3],r=(t[4]<<23)+(t[5]<<15)+(t[6]<<7)+t[7];return r/=45,n&&(r+=47721858.84),Math.round(r)}},y=function(e,t){void 0===t&&(t=!1);var n=k();if(n){var r=n.decode(e);if(t){var i=r.indexOf("\0");return-1!==i?r.substring(0,i):r}return r.replace(/\0/g,"")}for(var a,s,o,c=e.length,u="",l=0;l<c;){if(0===(a=e[l++])&&t)return u;if(0!==a&&3!==a)switch(a>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:u+=String.fromCharCode(a);break;case 12:case 13:s=e[l++],u+=String.fromCharCode((31&a)<<6|63&s);break;case 14:s=e[l++],o=e[l++],u+=String.fromCharCode((15&a)<<12|(63&s)<<6|(63&o)<<0)}}return u},b={decodeTextFrame:v};function k(){return r||"undefined"===typeof self.TextDecoder||(r=new self.TextDecoder("utf-8")),r}},"./src/demux/mp3demuxer.ts":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return u}});var r=n("./src/demux/base-audio-demuxer.ts"),i=n("./src/demux/id3.ts"),a=n("./src/utils/logger.ts"),s=n("./src/demux/mpegaudio.ts");function o(e,t){return o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},o(e,t)}var c=function(e){var t,n;function r(){return e.apply(this,arguments)||this}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,o(t,n);var c=r.prototype;return c.resetInitSegment=function(t,n,r,i){e.prototype.resetInitSegment.call(this,t,n,r,i),this._audioTrack={container:"audio/mpeg",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"mp3",samples:[],manifestCodec:n,duration:i,inputTimeScale:9e4,dropped:0}},r.probe=function(e){if(!e)return!1;for(var t=(i.getID3Data(e,0)||[]).length,n=e.length;t<n;t++)if(s.probe(e,t))return a.logger.log("MPEG Audio sync word found !"),!0;return!1},c.canParse=function(e,t){return s.canParse(e,t)},c.appendFrame=function(e,t,n){if(null!==this.basePTS)return s.appendFrame(e,t,n,this.basePTS,this.frameIndex)},r}(r.default),u=c},"./src/demux/mp4demuxer.ts":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return c}});var r=n("./src/polyfills/number.ts"),i=n("./src/types/demuxer.ts"),a=n("./src/utils/mp4-tools.ts"),s=n("./src/demux/dummy-demuxed-track.ts"),o=/\/emsg[-/]ID3/i,c=function(){function e(e,t){this.remainderData=null,this.timeOffset=0,this.config=void 0,this.videoTrack=void 0,this.audioTrack=void 0,this.id3Track=void 0,this.txtTrack=void 0,this.config=t}var t=e.prototype;return t.resetTimeStamp=function(){},t.resetInitSegment=function(e,t,n,r){var i=(0,a.parseInitSegment)(e),o=this.videoTrack=(0,s.dummyTrack)("video",1),c=this.audioTrack=(0,s.dummyTrack)("audio",1),u=this.txtTrack=(0,s.dummyTrack)("text",1);if(this.id3Track=(0,s.dummyTrack)("id3",1),this.timeOffset=0,i.video){var l=i.video,d=l.id,h=l.timescale,f=l.codec;o.id=d,o.timescale=u.timescale=h,o.codec=f}if(i.audio){var p=i.audio,v=p.id,m=p.timescale,g=p.codec;c.id=v,c.timescale=m,c.codec=g}u.id=a.RemuxerTrackIdConfig.text,o.sampleDuration=0,o.duration=c.duration=r},t.resetContiguity=function(){},e.probe=function(e){return e=e.length>16384?e.subarray(0,16384):e,(0,a.findBox)(e,["moof"]).length>0},t.demux=function(e,t){this.timeOffset=t;var n=e,r=this.videoTrack,i=this.txtTrack;if(this.config.progressive){this.remainderData&&(n=(0,a.appendUint8Array)(this.remainderData,e));var s=(0,a.segmentValidRange)(n);this.remainderData=s.remainder,r.samples=s.valid||new Uint8Array}else r.samples=n;var o=this.extractID3Track(r,t);return i.samples=(0,a.parseSamples)(t,r),{videoTrack:r,audioTrack:this.audioTrack,id3Track:o,textTrack:this.txtTrack}},t.flush=function(){var e=this.timeOffset,t=this.videoTrack,n=this.txtTrack;t.samples=this.remainderData||new Uint8Array,this.remainderData=null;var r=this.extractID3Track(t,this.timeOffset);return n.samples=(0,a.parseSamples)(e,t),{videoTrack:t,audioTrack:(0,s.dummyTrack)(),id3Track:r,textTrack:(0,s.dummyTrack)()}},t.extractID3Track=function(e,t){var n=this.id3Track;if(e.samples.length){var s=(0,a.findBox)(e.samples,["emsg"]);s&&s.forEach((function(e){var s=(0,a.parseEmsg)(e);if(o.test(s.schemeIdUri)){var c=(0,r.isFiniteNumber)(s.presentationTime)?s.presentationTime/s.timeScale:t+s.presentationTimeDelta/s.timeScale,u=4294967295===s.eventDuration?Number.POSITIVE_INFINITY:s.eventDuration/s.timeScale;u<=.001&&(u=Number.POSITIVE_INFINITY);var l=s.payload;n.samples.push({data:l,len:l.byteLength,dts:c,pts:c,type:i.MetadataSchema.emsg,duration:u})}}))}return n},t.demuxSampleAes=function(e,t,n){return Promise.reject(new Error("The MP4 demuxer does not support SAMPLE-AES decryption"))},t.destroy=function(){},e}()},"./src/demux/mpegaudio.ts":function(e,t,n){"use strict";n.r(t),n.d(t,{appendFrame:function(){return c},canParse:function(){return h},isHeader:function(){return d},isHeaderPattern:function(){return l},parseHeader:function(){return u},probe:function(){return f}});var r=null,i=[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],a=[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],s=[[0,72,144,12],[0,0,0,0],[0,72,144,12],[0,144,144,12]],o=[0,1,1,4];function c(e,t,n,r,i){if(!(n+24>t.length)){var a=u(t,n);if(a&&n+a.frameLength<=t.length){var s=r+i*(9e4*a.samplesPerFrame/a.sampleRate),o={unit:t.subarray(n,n+a.frameLength),pts:s,dts:s};return e.config=[],e.channelCount=a.channelCount,e.samplerate=a.sampleRate,e.samples.push(o),{sample:o,length:a.frameLength,missing:0}}}}function u(e,t){var n=e[t+1]>>3&3,c=e[t+1]>>1&3,u=e[t+2]>>4&15,l=e[t+2]>>2&3;if(1!==n&&0!==u&&15!==u&&3!==l){var d=e[t+2]>>1&1,h=e[t+3]>>6,f=1e3*i[14*(3===n?3-c:3===c?3:4)+u-1],p=a[3*(3===n?0:2===n?1:2)+l],v=3===h?1:2,m=s[n][c],g=o[c],y=8*m*g,b=Math.floor(m*f/p+d)*g;if(null===r){var k=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);r=k?parseInt(k[1]):0}return!!r&&r<=87&&2===c&&f>=224e3&&0===h&&(e[t+3]=128|e[t+3]),{sampleRate:p,channelCount:v,frameLength:b,samplesPerFrame:y}}}function l(e,t){return 255===e[t]&&224===(224&e[t+1])&&0!==(6&e[t+1])}function d(e,t){return t+1<e.length&&l(e,t)}function h(e,t){return l(e,t)&&4<=e.length-t}function f(e,t){if(t+1<e.length&&l(e,t)){var n=u(e,t),r=4;null!==n&&void 0!==n&&n.frameLength&&(r=n.frameLength);var i=t+r;return i===e.length||d(e,i)}return!1}},"./src/demux/sample-aes.ts":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return a}});var r=n("./src/crypt/decrypter.ts"),i=n("./src/utils/mp4-tools.ts"),a=function(){function e(e,t,n){this.keyData=void 0,this.decrypter=void 0,this.keyData=n,this.decrypter=new r.default(e,t,{removePKCS7Padding:!1})}var t=e.prototype;return t.decryptBuffer=function(e,t){this.decrypter.decrypt(e,this.keyData.key.buffer,this.keyData.iv.buffer,t)},t.decryptAacSample=function(e,t,n,r){var i=e[t].unit;if(!(i.length<=16)){var a=i.subarray(16,i.length-i.length%16),s=a.buffer.slice(a.byteOffset,a.byteOffset+a.length),o=this;this.decryptBuffer(s,(function(a){var s=new Uint8Array(a);i.set(s,16),r||o.decryptAacSamples(e,t+1,n)}))}},t.decryptAacSamples=function(e,t,n){for(;;t++){if(t>=e.length)return void n();if(!(e[t].unit.length<32)){var r=this.decrypter.isSync();if(this.decryptAacSample(e,t,n,r),!r)return}}},t.getAvcEncryptedData=function(e){for(var t=16*Math.floor((e.length-48)/160)+16,n=new Int8Array(t),r=0,i=32;i<e.length-16;i+=160,r+=16)n.set(e.subarray(i,i+16),r);return n},t.getAvcDecryptedUnit=function(e,t){for(var n=new Uint8Array(t),r=0,i=32;i<e.length-16;i+=160,r+=16)e.set(n.subarray(r,r+16),i);return e},t.decryptAvcSample=function(e,t,n,r,a,s){var o=(0,i.discardEPB)(a.data),c=this.getAvcEncryptedData(o),u=this;this.decryptBuffer(c.buffer,(function(i){a.data=u.getAvcDecryptedUnit(o,i),s||u.decryptAvcSamples(e,t,n+1,r)}))},t.decryptAvcSamples=function(e,t,n,r){if(e instanceof Uint8Array)throw new Error("Cannot decrypt samples of type Uint8Array");for(;;t++,n=0){if(t>=e.length)return void r();for(var i=e[t].units;!(n>=i.length);n++){var a=i[n];if(!(a.data.length<=48||1!==a.type&&5!==a.type)){var s=this.decrypter.isSync();if(this.decryptAvcSample(e,t,n,r,a,s),!s)return}}}},e}()},"./src/demux/transmuxer-interface.ts":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return d}});var r=n("./src/demux/webworkify-webpack.js"),i=n("./src/events.ts"),a=n("./src/demux/transmuxer.ts"),s=n("./src/utils/logger.ts"),o=n("./src/errors.ts"),c=n("./src/utils/mediasource-helper.ts"),u=n("./node_modules/eventemitter3/index.js"),l=(0,c.getMediaSource)()||{isTypeSupported:function(){return!1}},d=function(){function e(e,t,n,c){var d=this;this.hls=void 0,this.id=void 0,this.observer=void 0,this.frag=null,this.part=null,this.useWorker=void 0,this.worker=void 0,this.onwmsg=void 0,this.transmuxer=null,this.onTransmuxComplete=void 0,this.onFlush=void 0;var h=e.config;this.hls=e,this.id=t,this.useWorker=!!h.enableWorker,this.onTransmuxComplete=n,this.onFlush=c;var f=function(e,t){(t=t||{}).frag=d.frag,t.id=d.id,d.hls.trigger(e,t)};this.observer=new u.EventEmitter,this.observer.on(i.Events.FRAG_DECRYPTED,f),this.observer.on(i.Events.ERROR,f);var p={mp4:l.isTypeSupported("video/mp4"),mpeg:l.isTypeSupported("audio/mpeg"),mp3:l.isTypeSupported('audio/mp4; codecs="mp3"')},v=navigator.vendor;if(this.useWorker&&"undefined"!==typeof Worker){var m;s.logger.log("demuxing in webworker");try{m=this.worker=(0,r.default)("./src/demux/transmuxer-worker.ts"),this.onwmsg=this.onWorkerMessage.bind(this),m.addEventListener("message",this.onwmsg),m.onerror=function(e){d.useWorker=!1,s.logger.warn("Exception in webworker, fallback to inline"),d.hls.trigger(i.Events.ERROR,{type:o.ErrorTypes.OTHER_ERROR,details:o.ErrorDetails.INTERNAL_EXCEPTION,fatal:!1,event:"demuxerWorker",error:new Error(e.message+"  ("+e.filename+":"+e.lineno+")")})},m.postMessage({cmd:"init",typeSupported:p,vendor:v,id:t,config:JSON.stringify(h)})}catch(g){s.logger.warn("Error in worker:",g),s.logger.error("Error while initializing DemuxerWorker, fallback to inline"),m&&self.URL.revokeObjectURL(m.objectURL),this.transmuxer=new a.default(this.observer,p,h,v,t),this.worker=null}}else this.transmuxer=new a.default(this.observer,p,h,v,t)}var t=e.prototype;return t.destroy=function(){var e=this.worker;if(e)e.removeEventListener("message",this.onwmsg),e.terminate(),this.worker=null,this.onwmsg=void 0;else{var t=this.transmuxer;t&&(t.destroy(),this.transmuxer=null)}var n=this.observer;n&&n.removeAllListeners(),this.frag=null,this.observer=null,this.hls=null},t.push=function(e,t,n,r,i,o,c,u,l,d){var h,f,p=this;l.transmuxing.start=self.performance.now();var v=this.transmuxer,m=this.worker,g=o?o.start:i.start,y=i.decryptdata,b=this.frag,k=!(b&&i.cc===b.cc),x=!(b&&l.level===b.level),w=b?l.sn-b.sn:-1,T=this.part?l.part-this.part.index:-1,E=0===w&&l.id>1&&l.id===(null===b||void 0===b?void 0:b.stats.chunkCount),_=!x&&(1===w||0===w&&(1===T||E&&T<=0)),S=self.performance.now();(x||w||0===i.stats.parsing.start)&&(i.stats.parsing.start=S),!o||!T&&_||(o.stats.parsing.start=S);var A=!(b&&(null===(h=i.initSegment)||void 0===h?void 0:h.url)===(null===(f=b.initSegment)||void 0===f?void 0:f.url)),C=new a.TransmuxState(k,_,u,x,g,A);if(!_||k||A){s.logger.log("[transmuxer-interface, "+i.type+"]: Starting new transmux session for sn: "+l.sn+" p: "+l.part+" level: "+l.level+" id: "+l.id+"\n        discontinuity: "+k+"\n        trackSwitch: "+x+"\n        contiguous: "+_+"\n        accurateTimeOffset: "+u+"\n        timeOffset: "+g+"\n        initSegmentChange: "+A);var I=new a.TransmuxConfig(n,r,t,c,d);this.configureTransmuxer(I)}if(this.frag=i,this.part=o,m)m.postMessage({cmd:"demux",data:e,decryptdata:y,chunkMeta:l,state:C},e instanceof ArrayBuffer?[e]:[]);else if(v){var R=v.push(e,y,l,C);(0,a.isPromise)(R)?R.then((function(e){p.handleTransmuxComplete(e)})):this.handleTransmuxComplete(R)}},t.flush=function(e){var t=this;e.transmuxing.start=self.performance.now();var n=this.transmuxer,r=this.worker;if(r)r.postMessage({cmd:"flush",chunkMeta:e});else if(n){var i=n.flush(e);(0,a.isPromise)(i)?i.then((function(n){t.handleFlushResult(n,e)})):this.handleFlushResult(i,e)}},t.handleFlushResult=function(e,t){var n=this;e.forEach((function(e){n.handleTransmuxComplete(e)})),this.onFlush(t)},t.onWorkerMessage=function(e){var t=e.data,n=this.hls;switch(t.event){case"init":self.URL.revokeObjectURL(this.worker.objectURL);break;case"transmuxComplete":this.handleTransmuxComplete(t.data);break;case"flush":this.onFlush(t.data);break;case"workerLog":s.logger[t.data.logType]&&s.logger[t.data.logType](t.data.message);break;default:t.data=t.data||{},t.data.frag=this.frag,t.data.id=this.id,n.trigger(t.event,t.data)}},t.configureTransmuxer=function(e){var t=this.worker,n=this.transmuxer;t?t.postMessage({cmd:"configure",config:e}):n&&n.configure(e)},t.handleTransmuxComplete=function(e){e.chunkMeta.transmuxing.end=self.performance.now(),this.onTransmuxComplete(e)},e}()},"./src/demux/transmuxer-worker.ts":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return o}});var r=n("./src/demux/transmuxer.ts"),i=n("./src/events.ts"),a=n("./src/utils/logger.ts"),s=n("./node_modules/eventemitter3/index.js");function o(e){var t=new s.EventEmitter,n=function(t,n){e.postMessage({event:t,data:n})};t.on(i.Events.FRAG_DECRYPTED,n),t.on(i.Events.ERROR,n),e.addEventListener("message",(function(i){var s=i.data;switch(s.cmd){case"init":var o=JSON.parse(s.config);e.transmuxer=new r.default(t,s.typeSupported,o,s.vendor,s.id),(0,a.enableLogs)(o.debug,s.id),function(){var e=function(e){a.logger[e]=function(t){n("workerLog",{logType:e,message:t})}};for(var t in a.logger)e(t)}(),n("init",null);break;case"configure":e.transmuxer.configure(s.config);break;case"demux":var u=e.transmuxer.push(s.data,s.decryptdata,s.chunkMeta,s.state);(0,r.isPromise)(u)?u.then((function(t){c(e,t)})):c(e,u);break;case"flush":var d=s.chunkMeta,h=e.transmuxer.flush(d);(0,r.isPromise)(h)?h.then((function(t){l(e,t,d)})):l(e,h,d)}}))}function c(e,t){if(!(n=t.remuxResult).audio&&!n.video&&!n.text&&!n.id3&&!n.initSegment)return!1;var n,r=[],i=t.remuxResult,a=i.audio,s=i.video;return a&&u(r,a),s&&u(r,s),e.postMessage({event:"transmuxComplete",data:t},r),!0}function u(e,t){t.data1&&e.push(t.data1.buffer),t.data2&&e.push(t.data2.buffer)}function l(e,t,n){t.reduce((function(t,n){return c(e,n)||t}),!1)||e.postMessage({event:"transmuxComplete",data:t[0]}),e.postMessage({event:"flush",data:n})}},"./src/demux/transmuxer.ts":function(e,t,n){"use strict";n.r(t),n.d(t,{TransmuxConfig:function(){return y},TransmuxState:function(){return b},default:function(){return v},isPromise:function(){return g}});var r,i=n("./src/events.ts"),a=n("./src/errors.ts"),s=n("./src/crypt/decrypter.ts"),o=n("./src/demux/aacdemuxer.ts"),c=n("./src/demux/mp4demuxer.ts"),u=n("./src/demux/tsdemuxer.ts"),l=n("./src/demux/mp3demuxer.ts"),d=n("./src/remux/mp4-remuxer.ts"),h=n("./src/remux/passthrough-remuxer.ts"),f=n("./src/utils/logger.ts");try{r=self.performance.now.bind(self.performance)}catch(k){f.logger.debug("Unable to use Performance API on this environment"),r=self.Date.now}var p=[{demux:u.default,remux:d.default},{demux:c.default,remux:h.default},{demux:o.default,remux:d.default},{demux:l.default,remux:d.default}],v=function(){function e(e,t,n,r,i){this.observer=void 0,this.typeSupported=void 0,this.config=void 0,this.vendor=void 0,this.id=void 0,this.demuxer=void 0,this.remuxer=void 0,this.decrypter=void 0,this.probe=void 0,this.decryptionPromise=null,this.transmuxConfig=void 0,this.currentTransmuxState=void 0,this.observer=e,this.typeSupported=t,this.config=n,this.vendor=r,this.id=i}var t=e.prototype;return t.configure=function(e){this.transmuxConfig=e,this.decrypter&&this.decrypter.reset()},t.push=function(e,t,n,i){var a=this,s=n.transmuxing;s.executeStart=r();var o=new Uint8Array(e),c=this.config,u=this.currentTransmuxState,l=this.transmuxConfig;i&&(this.currentTransmuxState=i);var d=i||u,h=d.contiguous,f=d.discontinuity,p=d.trackSwitch,v=d.accurateTimeOffset,g=d.timeOffset,y=d.initSegmentChange,b=l.audioCodec,k=l.videoCodec,x=l.defaultInitPts,w=l.duration,T=l.initSegmentData;(f||p||y)&&this.resetInitSegment(T,b,k,w),(f||y)&&this.resetInitialTimestamp(x),h||this.resetContiguity();var E=function(e,t){var n=null;return e.byteLength>0&&null!=t&&null!=t.key&&null!==t.iv&&null!=t.method&&(n=t),n}(o,t);if(E&&"AES-128"===E.method){var _=this.getDecrypter();if(!c.enableSoftwareAES)return this.decryptionPromise=_.webCryptoDecrypt(o,E.key.buffer,E.iv.buffer).then((function(e){var t=a.push(e,null,n);return a.decryptionPromise=null,t})),this.decryptionPromise;var S=_.softwareDecrypt(o,E.key.buffer,E.iv.buffer);if(!S)return s.executeEnd=r(),m(n);o=new Uint8Array(S)}this.needsProbing(o,f,p)&&this.configureTransmuxer(o,l);var A=this.transmux(o,E,g,v,n),C=this.currentTransmuxState;return C.contiguous=!0,C.discontinuity=!1,C.trackSwitch=!1,s.executeEnd=r(),A},t.flush=function(e){var t=this,n=e.transmuxing;n.executeStart=r();var s=this.decrypter,o=this.currentTransmuxState,c=this.decryptionPromise;if(c)return c.then((function(){return t.flush(e)}));var u=[],l=o.timeOffset;if(s){var d=s.flush();d&&u.push(this.push(d,null,e))}var h=this.demuxer,f=this.remuxer;if(!h||!f)return this.observer.emit(i.Events.ERROR,i.Events.ERROR,{type:a.ErrorTypes.MEDIA_ERROR,details:a.ErrorDetails.FRAG_PARSING_ERROR,fatal:!0,reason:"no demux matching with content found"}),n.executeEnd=r(),[m(e)];var p=h.flush(l);return g(p)?p.then((function(n){return t.flushRemux(u,n,e),u})):(this.flushRemux(u,p,e),u)},t.flushRemux=function(e,t,n){var i=t.audioTrack,a=t.videoTrack,s=t.id3Track,o=t.textTrack,c=this.currentTransmuxState,u=c.accurateTimeOffset,l=c.timeOffset;f.logger.log("[transmuxer.ts]: Flushed fragment "+n.sn+(n.part>-1?" p: "+n.part:"")+" of level "+n.level);var d=this.remuxer.remux(i,a,s,o,l,u,!0,this.id);e.push({remuxResult:d,chunkMeta:n}),n.transmuxing.executeEnd=r()},t.resetInitialTimestamp=function(e){var t=this.demuxer,n=this.remuxer;t&&n&&(t.resetTimeStamp(e),n.resetTimeStamp(e))},t.resetContiguity=function(){var e=this.demuxer,t=this.remuxer;e&&t&&(e.resetContiguity(),t.resetNextTimestamp())},t.resetInitSegment=function(e,t,n,r){var i=this.demuxer,a=this.remuxer;i&&a&&(i.resetInitSegment(e,t,n,r),a.resetInitSegment(e,t,n))},t.destroy=function(){this.demuxer&&(this.demuxer.destroy(),this.demuxer=void 0),this.remuxer&&(this.remuxer.destroy(),this.remuxer=void 0)},t.transmux=function(e,t,n,r,i){return t&&"SAMPLE-AES"===t.method?this.transmuxSampleAes(e,t,n,r,i):this.transmuxUnencrypted(e,n,r,i)},t.transmuxUnencrypted=function(e,t,n,r){var i=this.demuxer.demux(e,t,!1,!this.config.progressive),a=i.audioTrack,s=i.videoTrack,o=i.id3Track,c=i.textTrack;return{remuxResult:this.remuxer.remux(a,s,o,c,t,n,!1,this.id),chunkMeta:r}},t.transmuxSampleAes=function(e,t,n,r,i){var a=this;return this.demuxer.demuxSampleAes(e,t,n).then((function(e){return{remuxResult:a.remuxer.remux(e.audioTrack,e.videoTrack,e.id3Track,e.textTrack,n,r,!1,a.id),chunkMeta:i}}))},t.configureTransmuxer=function(e,t){for(var n,r=this.config,i=this.observer,a=this.typeSupported,s=this.vendor,o=t.audioCodec,u=t.defaultInitPts,l=t.duration,d=t.initSegmentData,v=t.videoCodec,m=0,g=p.length;m<g;m++)if(p[m].demux.probe(e)){n=p[m];break}n||(f.logger.warn("Failed to find demuxer by probing frag, treating as mp4 passthrough"),n={demux:c.default,remux:h.default});var y=this.demuxer,b=this.remuxer,k=n.remux,x=n.demux;b&&b instanceof k||(this.remuxer=new k(i,r,a,s)),y&&y instanceof x||(this.demuxer=new x(i,r,a),this.probe=x.probe),this.resetInitSegment(d,o,v,l),this.resetInitialTimestamp(u)},t.needsProbing=function(e,t,n){return!this.demuxer||!this.remuxer||t||n},t.getDecrypter=function(){var e=this.decrypter;return e||(e=this.decrypter=new s.default(this.observer,this.config)),e},e}(),m=function(e){return{remuxResult:{},chunkMeta:e}};function g(e){return"then"in e&&e.then instanceof Function}var y=function(e,t,n,r,i){this.audioCodec=void 0,this.videoCodec=void 0,this.initSegmentData=void 0,this.duration=void 0,this.defaultInitPts=void 0,this.audioCodec=e,this.videoCodec=t,this.initSegmentData=n,this.duration=r,this.defaultInitPts=i},b=function(e,t,n,r,i,a){this.discontinuity=void 0,this.contiguous=void 0,this.accurateTimeOffset=void 0,this.trackSwitch=void 0,this.timeOffset=void 0,this.initSegmentChange=void 0,this.discontinuity=e,this.contiguous=t,this.accurateTimeOffset=n,this.trackSwitch=r,this.timeOffset=i,this.initSegmentChange=a}},"./src/demux/tsdemuxer.ts":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return b}});var r=n("./src/demux/adts.ts"),i=n("./src/demux/mpegaudio.ts"),a=n("./src/demux/exp-golomb.ts"),s=n("./src/demux/sample-aes.ts"),o=n("./src/events.ts"),c=n("./src/utils/mp4-tools.ts"),u=n("./src/utils/logger.ts"),l=n("./src/errors.ts"),d=n("./src/types/demuxer.ts");function h(){return h=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},h.apply(this,arguments)}var f=188;function p(e,t,n,r){return{key:e,frame:!1,pts:t,dts:n,units:[],debug:r,length:0}}function v(e,t){return(31&e[t+10])<<8|e[t+11]}function m(e,t,n,r){var i={audio:-1,avc:-1,id3:-1,segmentCodec:"aac"},a=t+3+((15&e[t+1])<<8|e[t+2])-4;for(t+=12+((15&e[t+10])<<8|e[t+11]);t<a;){var s=(31&e[t+1])<<8|e[t+2];switch(e[t]){case 207:if(!r){u.logger.log("ADTS AAC with AES-128-CBC frame encryption found in unencrypted stream");break}case 15:-1===i.audio&&(i.audio=s);break;case 21:-1===i.id3&&(i.id3=s);break;case 219:if(!r){u.logger.log("H.264 with AES-128-CBC slice encryption found in unencrypted stream");break}case 27:-1===i.avc&&(i.avc=s);break;case 3:case 4:!0!==n.mpeg&&!0!==n.mp3?u.logger.log("MPEG audio found, not supported in this browser"):-1===i.audio&&(i.audio=s,i.segmentCodec="mp3");break;case 36:u.logger.warn("Unsupported HEVC stream type found")}t+=5+((15&e[t+3])<<8|e[t+4])}return i}function g(e){var t,n,r,i,a,s=0,o=e.data;if(!e||0===e.size)return null;for(;o[0].length<19&&o.length>1;){var c=new Uint8Array(o[0].length+o[1].length);c.set(o[0]),c.set(o[1],o[0].length),o[0]=c,o.splice(1,1)}if(1===((t=o[0])[0]<<16)+(t[1]<<8)+t[2]){if((n=(t[4]<<8)+t[5])&&n>e.size-6)return null;var l=t[7];192&l&&(i=536870912*(14&t[9])+4194304*(255&t[10])+16384*(254&t[11])+128*(255&t[12])+(254&t[13])/2,64&l?i-(a=536870912*(14&t[14])+4194304*(255&t[15])+16384*(254&t[16])+128*(255&t[17])+(254&t[18])/2)>54e5&&(u.logger.warn(Math.round((i-a)/9e4)+"s delta between PTS and DTS, align them"),i=a):a=i);var d=(r=t[8])+9;if(e.size<=d)return null;e.size-=d;for(var h=new Uint8Array(e.size),f=0,p=o.length;f<p;f++){var v=(t=o[f]).byteLength;if(d){if(d>v){d-=v;continue}t=t.subarray(d),v-=d,d=0}h.set(t,s),s+=v}return n&&(n-=r+3),{data:h,pts:i,dts:a,len:n}}return null}function y(e,t){if(e.units.length&&e.frame){if(void 0===e.pts){var n=t.samples,r=n.length;if(!r)return void t.dropped++;var i=n[r-1];e.pts=i.pts,e.dts=i.dts}t.samples.push(e)}e.debug.length&&u.logger.log(e.pts+"/"+e.dts+":"+e.debug)}var b=function(){function e(e,t,n){this.observer=void 0,this.config=void 0,this.typeSupported=void 0,this.sampleAes=null,this.pmtParsed=!1,this.audioCodec=void 0,this.videoCodec=void 0,this._duration=0,this._pmtId=-1,this._avcTrack=void 0,this._audioTrack=void 0,this._id3Track=void 0,this._txtTrack=void 0,this.aacOverFlow=null,this.avcSample=null,this.remainderData=null,this.observer=e,this.config=t,this.typeSupported=n}e.probe=function(t){var n=e.syncOffset(t);return n>0&&u.logger.warn("MPEG2-TS detected but first sync word found @ offset "+n),-1!==n},e.syncOffset=function(e){for(var t=Math.min(940,e.length-376)+1,n=0;n<t;){if(71===e[n]&&71===e[n+f])return n;n++}return-1},e.createTrack=function(e,t){return{container:"video"===e||"audio"===e?"video/mp2t":void 0,type:e,id:c.RemuxerTrackIdConfig[e],pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:0,duration:"audio"===e?t:void 0}};var t=e.prototype;return t.resetInitSegment=function(t,n,r,i){this.pmtParsed=!1,this._pmtId=-1,this._avcTrack=e.createTrack("video"),this._audioTrack=e.createTrack("audio",i),this._id3Track=e.createTrack("id3"),this._txtTrack=e.createTrack("text"),this._audioTrack.segmentCodec="aac",this.aacOverFlow=null,this.avcSample=null,this.remainderData=null,this.audioCodec=n,this.videoCodec=r,this._duration=i},t.resetTimeStamp=function(){},t.resetContiguity=function(){var e=this._audioTrack,t=this._avcTrack,n=this._id3Track;e&&(e.pesData=null),t&&(t.pesData=null),n&&(n.pesData=null),this.aacOverFlow=null,this.avcSample=null,this.remainderData=null},t.demux=function(t,n,r,i){var a;void 0===r&&(r=!1),void 0===i&&(i=!1),r||(this.sampleAes=null);var s=this._avcTrack,d=this._audioTrack,h=this._id3Track,p=this._txtTrack,y=s.pid,b=s.pesData,k=d.pid,x=h.pid,w=d.pesData,T=h.pesData,E=null,_=this.pmtParsed,S=this._pmtId,A=t.length;if(this.remainderData&&(A=(t=(0,c.appendUint8Array)(this.remainderData,t)).length,this.remainderData=null),A<f&&!i)return this.remainderData=t,{audioTrack:d,videoTrack:s,id3Track:h,textTrack:p};var C=Math.max(0,e.syncOffset(t));(A-=(A-C)%f)<t.byteLength&&!i&&(this.remainderData=new Uint8Array(t.buffer,A,t.buffer.byteLength-A));for(var I=0,R=C;R<A;R+=f)if(71===t[R]){var P=!!(64&t[R+1]),D=((31&t[R+1])<<8)+t[R+2],N=void 0;if((48&t[R+3])>>4>1){if((N=R+5+t[R+4])===R+f)continue}else N=R+4;switch(D){case y:P&&(b&&(a=g(b))&&this.parseAVCPES(s,p,a,!1),b={data:[],size:0}),b&&(b.data.push(t.subarray(N,R+f)),b.size+=R+f-N);break;case k:if(P){if(w&&(a=g(w)))switch(d.segmentCodec){case"aac":this.parseAACPES(d,a);break;case"mp3":this.parseMPEGPES(d,a)}w={data:[],size:0}}w&&(w.data.push(t.subarray(N,R+f)),w.size+=R+f-N);break;case x:P&&(T&&(a=g(T))&&this.parseID3PES(h,a),T={data:[],size:0}),T&&(T.data.push(t.subarray(N,R+f)),T.size+=R+f-N);break;case 0:P&&(N+=t[N]+1),S=this._pmtId=v(t,N);break;case S:P&&(N+=t[N]+1);var O=m(t,N,this.typeSupported,r);(y=O.avc)>0&&(s.pid=y),(k=O.audio)>0&&(d.pid=k,d.segmentCodec=O.segmentCodec),(x=O.id3)>0&&(h.pid=x),null===E||_||(u.logger.log("unknown PID '"+E+"' in TS found"),E=null,R=C-188),_=this.pmtParsed=!0;break;case 17:case 8191:break;default:E=D}}else I++;I>0&&this.observer.emit(o.Events.ERROR,o.Events.ERROR,{type:l.ErrorTypes.MEDIA_ERROR,details:l.ErrorDetails.FRAG_PARSING_ERROR,fatal:!1,reason:"Found "+I+" TS packet/s that do not start with 0x47"}),s.pesData=b,d.pesData=w,h.pesData=T;var L={audioTrack:d,videoTrack:s,id3Track:h,textTrack:p};return i&&this.extractRemainingSamples(L),L},t.flush=function(){var e,t=this.remainderData;return this.remainderData=null,e=t?this.demux(t,-1,!1,!0):{videoTrack:this._avcTrack,audioTrack:this._audioTrack,id3Track:this._id3Track,textTrack:this._txtTrack},this.extractRemainingSamples(e),this.sampleAes?this.decrypt(e,this.sampleAes):e},t.extractRemainingSamples=function(e){var t,n=e.audioTrack,r=e.videoTrack,i=e.id3Track,a=e.textTrack,s=r.pesData,o=n.pesData,c=i.pesData;if(s&&(t=g(s))?(this.parseAVCPES(r,a,t,!0),r.pesData=null):r.pesData=s,o&&(t=g(o))){switch(n.segmentCodec){case"aac":this.parseAACPES(n,t);break;case"mp3":this.parseMPEGPES(n,t)}n.pesData=null}else null!==o&&void 0!==o&&o.size&&u.logger.log("last AAC PES packet truncated,might overlap between fragments"),n.pesData=o;c&&(t=g(c))?(this.parseID3PES(i,t),i.pesData=null):i.pesData=c},t.demuxSampleAes=function(e,t,n){var r=this.demux(e,n,!0,!this.config.progressive),i=this.sampleAes=new s.default(this.observer,this.config,t);return this.decrypt(r,i)},t.decrypt=function(e,t){return new Promise((function(n){var r=e.audioTrack,i=e.videoTrack;r.samples&&"aac"===r.segmentCodec?t.decryptAacSamples(r.samples,0,(function(){i.samples?t.decryptAvcSamples(i.samples,0,0,(function(){n(e)})):n(e)})):i.samples&&t.decryptAvcSamples(i.samples,0,0,(function(){n(e)}))}))},t.destroy=function(){this._duration=0},t.parseAVCPES=function(e,t,n,r){var i,s=this,o=this.parseAVCNALu(e,n.data),u=this.avcSample,l=!1;n.data=null,u&&o.length&&!e.audFound&&(y(u,e),u=this.avcSample=p(!1,n.pts,n.dts,"")),o.forEach((function(r){switch(r.type){case 1:i=!0,u||(u=s.avcSample=p(!0,n.pts,n.dts,"")),u.frame=!0;var o=r.data;if(l&&o.length>4){var d=new a.default(o).readSliceType();2!==d&&4!==d&&7!==d&&9!==d||(u.key=!0)}break;case 5:i=!0,u||(u=s.avcSample=p(!0,n.pts,n.dts,"")),u.key=!0,u.frame=!0;break;case 6:i=!0,(0,c.parseSEIMessageFromNALu)(r.data,1,n.pts,t.samples);break;case 7:if(i=!0,l=!0,!e.sps){var h=new a.default(r.data).readSPS();e.width=h.width,e.height=h.height,e.pixelRatio=h.pixelRatio,e.sps=[r.data],e.duration=s._duration;for(var f=r.data.subarray(1,4),v="avc1.",m=0;m<3;m++){var g=f[m].toString(16);g.length<2&&(g="0"+g),v+=g}e.codec=v}break;case 8:i=!0,e.pps||(e.pps=[r.data]);break;case 9:i=!1,e.audFound=!0,u&&y(u,e),u=s.avcSample=p(!1,n.pts,n.dts,"");break;case 12:i=!0;break;default:i=!1,u&&(u.debug+="unknown NAL "+r.type+" ")}u&&i&&u.units.push(r)})),r&&u&&(y(u,e),this.avcSample=null)},t.getLastNalUnit=function(e){var t,n,r=this.avcSample;if(r&&0!==r.units.length||(r=e[e.length-1]),null!==(t=r)&&void 0!==t&&t.units){var i=r.units;n=i[i.length-1]}return n},t.parseAVCNALu=function(e,t){var n,r,i=t.byteLength,a=e.naluState||0,s=a,o=[],c=0,u=-1,l=0;for(-1===a&&(u=0,l=31&t[0],a=0,c=1);c<i;)if(n=t[c++],a)if(1!==a)if(n)if(1===n){if(u>=0){var d={data:t.subarray(u,c-a-1),type:l};o.push(d)}else{var h=this.getLastNalUnit(e.samples);if(h&&(s&&c<=4-s&&h.state&&(h.data=h.data.subarray(0,h.data.byteLength-s)),(r=c-a-1)>0)){var f=new Uint8Array(h.data.byteLength+r);f.set(h.data,0),f.set(t.subarray(0,r),h.data.byteLength),h.data=f,h.state=0}}c<i?(u=c,l=31&t[c],a=0):a=-1}else a=0;else a=3;else a=n?0:2;else a=n?0:1;if(u>=0&&a>=0){var p={data:t.subarray(u,i),type:l,state:a};o.push(p)}if(0===o.length){var v=this.getLastNalUnit(e.samples);if(v){var m=new Uint8Array(v.data.byteLength+t.byteLength);m.set(v.data,0),m.set(t,v.data.byteLength),v.data=m}}return e.naluState=a,o},t.parseAACPES=function(e,t){var n,i,a,s,c,d=0,h=this.aacOverFlow,f=t.data;if(h){this.aacOverFlow=null;var p=h.missing,v=h.sample.unit.byteLength;if(-1===p){var m=new Uint8Array(v+f.byteLength);m.set(h.sample.unit,0),m.set(f,v),f=m}else{var g=v-p;h.sample.unit.set(f.subarray(0,p),g),e.samples.push(h.sample),d=h.missing}}for(n=d,i=f.length;n<i-1&&!r.isHeader(f,n);n++);if(n===d||(n<i-1?(a="AAC PES did not start with ADTS header,offset:"+n,s=!1):(a="no ADTS header found in AAC PES",s=!0),u.logger.warn("parsing error:"+a),this.observer.emit(o.Events.ERROR,o.Events.ERROR,{type:l.ErrorTypes.MEDIA_ERROR,details:l.ErrorDetails.FRAG_PARSING_ERROR,fatal:s,reason:a}),!s)){if(r.initTrackConfig(e,this.observer,f,n,this.audioCodec),void 0!==t.pts)c=t.pts;else{if(!h)return void u.logger.warn("[tsdemuxer]: AAC PES unknown PTS");var y=r.getFrameDuration(e.samplerate);c=h.sample.pts+y}for(var b,k=0;n<i;){if(n+=(b=r.appendFrame(e,f,n,c,k)).length,b.missing){this.aacOverFlow=b;break}for(k++;n<i-1&&!r.isHeader(f,n);n++);}}},t.parseMPEGPES=function(e,t){var n=t.data,r=n.length,a=0,s=0,o=t.pts;if(void 0!==o)for(;s<r;)if(i.isHeader(n,s)){var c=i.appendFrame(e,n,s,o,a);if(!c)break;s+=c.length,a++}else s++;else u.logger.warn("[tsdemuxer]: MPEG PES unknown PTS")},t.parseID3PES=function(e,t){if(void 0!==t.pts){var n=h({},t,{type:this._avcTrack?d.MetadataSchema.emsg:d.MetadataSchema.audioId3,duration:Number.POSITIVE_INFINITY});e.samples.push(n)}else u.logger.warn("[tsdemuxer]: ID3 PES unknown PTS")},e}()},"./src/demux/webworkify-webpack.js":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return d}});var r=function(){var e=ENTRY_MODULE,t={},n=function n(r){var i=t[r];if(void 0!==i)return i.exports;var a=t[r]={exports:{}};return e[r].call(a.exports,a,a.exports,n),a.exports};n.m=e,n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var r=n(ENTRY_MODULE);return r.default||r}.toString().split("ENTRY_MODULE"),i="[\\.|\\-|\\+|\\w|/|@]+",a="\\(\\s*(/\\*.*?\\*/)?\\s*.*?([\\.|\\-|\\+|\\w|/|@]+).*?\\)";function s(e){return(e+"").replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}function o(e){return!isNaN(1*e)}function c(e,t,r){var c={};c[r]=[];var u=t.toString().replace(/^"[^"]+"/,"function"),l=u.match(/^function\s?\w*\(\w+,\s*\w+,\s*(\w+)\)/)||u.match(/^\(\w+,\s*\w+,\s*(\w+)\)\s?\=\s?\>/);if(!l)return c;for(var d,h=l[1],f=new RegExp("(\\\\n|\\W)"+s(h)+a,"g");d=f.exec(u);)"dll-reference"!==d[3]&&c[r].push(d[3]);for(f=new RegExp("\\("+s(h)+'\\("(dll-reference\\s('+i+'))"\\)\\)'+a,"g");d=f.exec(u);)e[d[2]]||(c[r].push(d[1]),e[d[2]]=n(d[1]).m),c[d[2]]=c[d[2]]||[],c[d[2]].push(d[4]);for(var p=Object.keys(c),v=0;v<p.length;v++)for(var m=0;m<c[p[v]].length;m++)o(c[p[v]][m])&&(c[p[v]][m]=1*c[p[v]][m]);return c}function u(e){return Object.keys(e).reduce((function(t,n){return t||e[n].length>0}),!1)}function l(e,t,n,i){var a=e[i].map((function(e){return'"'+e+'": '+t[i][e].toString().replace(/^"[^"]+"/,"function")})).join(",");return r[0]+"{"+a+"}"+r[1]+'"'+n+'"'+r[2]}function d(e,t){t=t||{};var r={main:n.m},i=t.all?{main:Object.keys(r.main)}:function(e,t){for(var n={main:[t]},r={main:[]},i={main:{}};u(n);)for(var a=Object.keys(n),s=0;s<a.length;s++){var o=a[s],l=n[o].pop();if(i[o]=i[o]||{},!i[o][l]&&e[o][l]){i[o][l]=!0,r[o]=r[o]||[],r[o].push(l);for(var d=c(e,e[o][l],o),h=Object.keys(d),f=0;f<h.length;f++)n[h[f]]=n[h[f]]||[],n[h[f]]=n[h[f]].concat(d[h[f]])}}return r}(r,e),a="";Object.keys(i).filter((function(e){return"main"!==e})).forEach((function(e){for(var t=0;i[e][t];)t++;i[e].push(t),r[e][t]="(function(module, exports, __webpack_require__) { module.exports = __webpack_require__; })",a=a+"var "+e+" = ("+l(i,r,t,modules)+")();\n"})),a=a+"new (("+l(i,r,e,"main")+")())(self);";var s=new window.Blob([a],{type:"text/javascript"}),o=(window.URL||window.webkitURL||window.mozURL||window.msURL).createObjectURL(s),d=new window.Worker(o);return d.objectURL=o,d}},"./src/errors.ts":function(e,t,n){"use strict";var r,i,a,s;n.r(t),n.d(t,{ErrorDetails:function(){return a},ErrorTypes:function(){return r}}),(i=r||(r={})).NETWORK_ERROR="networkError",i.MEDIA_ERROR="mediaError",i.KEY_SYSTEM_ERROR="keySystemError",i.MUX_ERROR="muxError",i.OTHER_ERROR="otherError",(s=a||(a={})).KEY_SYSTEM_NO_KEYS="keySystemNoKeys",s.KEY_SYSTEM_NO_ACCESS="keySystemNoAccess",s.KEY_SYSTEM_NO_SESSION="keySystemNoSession",s.KEY_SYSTEM_LICENSE_REQUEST_FAILED="keySystemLicenseRequestFailed",s.KEY_SYSTEM_NO_INIT_DATA="keySystemNoInitData",s.MANIFEST_LOAD_ERROR="manifestLoadError",s.MANIFEST_LOAD_TIMEOUT="manifestLoadTimeOut",s.MANIFEST_PARSING_ERROR="manifestParsingError",s.MANIFEST_INCOMPATIBLE_CODECS_ERROR="manifestIncompatibleCodecsError",s.LEVEL_EMPTY_ERROR="levelEmptyError",s.LEVEL_LOAD_ERROR="levelLoadError",s.LEVEL_LOAD_TIMEOUT="levelLoadTimeOut",s.LEVEL_SWITCH_ERROR="levelSwitchError",s.AUDIO_TRACK_LOAD_ERROR="audioTrackLoadError",s.AUDIO_TRACK_LOAD_TIMEOUT="audioTrackLoadTimeOut",s.SUBTITLE_LOAD_ERROR="subtitleTrackLoadError",s.SUBTITLE_TRACK_LOAD_TIMEOUT="subtitleTrackLoadTimeOut",s.FRAG_LOAD_ERROR="fragLoadError",s.FRAG_LOAD_TIMEOUT="fragLoadTimeOut",s.FRAG_DECRYPT_ERROR="fragDecryptError",s.FRAG_PARSING_ERROR="fragParsingError",s.REMUX_ALLOC_ERROR="remuxAllocError",s.KEY_LOAD_ERROR="keyLoadError",s.KEY_LOAD_TIMEOUT="keyLoadTimeOut",s.BUFFER_ADD_CODEC_ERROR="bufferAddCodecError",s.BUFFER_INCOMPATIBLE_CODECS_ERROR="bufferIncompatibleCodecsError",s.BUFFER_APPEND_ERROR="bufferAppendError",s.BUFFER_APPENDING_ERROR="bufferAppendingError",s.BUFFER_STALLED_ERROR="bufferStalledError",s.BUFFER_FULL_ERROR="bufferFullError",s.BUFFER_SEEK_OVER_HOLE="bufferSeekOverHole",s.BUFFER_NUDGE_ON_STALL="bufferNudgeOnStall",s.INTERNAL_EXCEPTION="internalException",s.INTERNAL_ABORTED="aborted",s.UNKNOWN="unknown"},"./src/events.ts":function(e,t,n){"use strict";var r,i;n.r(t),n.d(t,{Events:function(){return r}}),(i=r||(r={})).MEDIA_ATTACHING="hlsMediaAttaching",i.MEDIA_ATTACHED="hlsMediaAttached",i.MEDIA_DETACHING="hlsMediaDetaching",i.MEDIA_DETACHED="hlsMediaDetached",i.BUFFER_RESET="hlsBufferReset",i.BUFFER_CODECS="hlsBufferCodecs",i.BUFFER_CREATED="hlsBufferCreated",i.BUFFER_APPENDING="hlsBufferAppending",i.BUFFER_APPENDED="hlsBufferAppended",i.BUFFER_EOS="hlsBufferEos",i.BUFFER_FLUSHING="hlsBufferFlushing",i.BUFFER_FLUSHED="hlsBufferFlushed",i.MANIFEST_LOADING="hlsManifestLoading",i.MANIFEST_LOADED="hlsManifestLoaded",i.MANIFEST_PARSED="hlsManifestParsed",i.LEVEL_SWITCHING="hlsLevelSwitching",i.LEVEL_SWITCHED="hlsLevelSwitched",i.LEVEL_LOADING="hlsLevelLoading",i.LEVEL_LOADED="hlsLevelLoaded",i.LEVEL_UPDATED="hlsLevelUpdated",i.LEVEL_PTS_UPDATED="hlsLevelPtsUpdated",i.LEVELS_UPDATED="hlsLevelsUpdated",i.AUDIO_TRACKS_UPDATED="hlsAudioTracksUpdated",i.AUDIO_TRACK_SWITCHING="hlsAudioTrackSwitching",i.AUDIO_TRACK_SWITCHED="hlsAudioTrackSwitched",i.AUDIO_TRACK_LOADING="hlsAudioTrackLoading",i.AUDIO_TRACK_LOADED="hlsAudioTrackLoaded",i.SUBTITLE_TRACKS_UPDATED="hlsSubtitleTracksUpdated",i.SUBTITLE_TRACKS_CLEARED="hlsSubtitleTracksCleared",i.SUBTITLE_TRACK_SWITCH="hlsSubtitleTrackSwitch",i.SUBTITLE_TRACK_LOADING="hlsSubtitleTrackLoading",i.SUBTITLE_TRACK_LOADED="hlsSubtitleTrackLoaded",i.SUBTITLE_FRAG_PROCESSED="hlsSubtitleFragProcessed",i.CUES_PARSED="hlsCuesParsed",i.NON_NATIVE_TEXT_TRACKS_FOUND="hlsNonNativeTextTracksFound",i.INIT_PTS_FOUND="hlsInitPtsFound",i.FRAG_LOADING="hlsFragLoading",i.FRAG_LOAD_EMERGENCY_ABORTED="hlsFragLoadEmergencyAborted",i.FRAG_LOADED="hlsFragLoaded",i.FRAG_DECRYPTED="hlsFragDecrypted",i.FRAG_PARSING_INIT_SEGMENT="hlsFragParsingInitSegment",i.FRAG_PARSING_USERDATA="hlsFragParsingUserdata",i.FRAG_PARSING_METADATA="hlsFragParsingMetadata",i.FRAG_PARSED="hlsFragParsed",i.FRAG_BUFFERED="hlsFragBuffered",i.FRAG_CHANGED="hlsFragChanged",i.FPS_DROP="hlsFpsDrop",i.FPS_DROP_LEVEL_CAPPING="hlsFpsDropLevelCapping",i.ERROR="hlsError",i.DESTROYING="hlsDestroying",i.KEY_LOADING="hlsKeyLoading",i.KEY_LOADED="hlsKeyLoaded",i.LIVE_BACK_BUFFER_REACHED="hlsLiveBackBufferReached",i.BACK_BUFFER_REACHED="hlsBackBufferReached"},"./src/hls.ts":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return y}});var r=n("./node_modules/url-toolkit/src/url-toolkit.js"),i=n("./src/loader/playlist-loader.ts"),a=n("./src/loader/key-loader.ts"),s=n("./src/controller/id3-track-controller.ts"),o=n("./src/controller/latency-controller.ts"),c=n("./src/controller/level-controller.ts"),u=n("./src/controller/fragment-tracker.ts"),l=n("./src/controller/stream-controller.ts"),d=n("./src/is-supported.ts"),h=n("./src/utils/logger.ts"),f=n("./src/config.ts"),p=n("./node_modules/eventemitter3/index.js"),v=n("./src/events.ts"),m=n("./src/errors.ts");function g(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var y=function(){function e(t){void 0===t&&(t={}),this.config=void 0,this.userConfig=void 0,this.coreComponents=void 0,this.networkControllers=void 0,this._emitter=new p.EventEmitter,this._autoLevelCapping=void 0,this.abrController=void 0,this.bufferController=void 0,this.capLevelController=void 0,this.latencyController=void 0,this.levelController=void 0,this.streamController=void 0,this.audioTrackController=void 0,this.subtitleTrackController=void 0,this.emeController=void 0,this.cmcdController=void 0,this._media=null,this.url=null;var n=this.config=(0,f.mergeConfig)(e.DefaultConfig,t);this.userConfig=t,(0,h.enableLogs)(n.debug,"Hls instance"),this._autoLevelCapping=-1,n.progressive&&(0,f.enableStreamingMode)(n);var r=n.abrController,d=n.bufferController,v=n.capLevelController,m=n.fpsController,g=this.abrController=new r(this),y=this.bufferController=new d(this),b=this.capLevelController=new v(this),k=new m(this),x=new i.default(this),w=new a.default(this),T=new s.default(this),E=this.levelController=new c.default(this),_=new u.FragmentTracker(this),S=this.streamController=new l.default(this,_);b.setStreamController(S),k.setStreamController(S);var A=[x,w,E,S];this.networkControllers=A;var C=[g,y,b,k,T,_];this.audioTrackController=this.createController(n.audioTrackController,null,A),this.createController(n.audioStreamController,_,A),this.subtitleTrackController=this.createController(n.subtitleTrackController,null,A),this.createController(n.subtitleStreamController,_,A),this.createController(n.timelineController,null,C),this.emeController=this.createController(n.emeController,null,C),this.cmcdController=this.createController(n.cmcdController,null,C),this.latencyController=this.createController(o.default,null,C),this.coreComponents=C}e.isSupported=function(){return(0,d.isSupported)()};var t,n,y,b=e.prototype;return b.createController=function(e,t,n){if(e){var r=t?new e(this,t):new e(this);return n&&n.push(r),r}return null},b.on=function(e,t,n){void 0===n&&(n=this),this._emitter.on(e,t,n)},b.once=function(e,t,n){void 0===n&&(n=this),this._emitter.once(e,t,n)},b.removeAllListeners=function(e){this._emitter.removeAllListeners(e)},b.off=function(e,t,n,r){void 0===n&&(n=this),this._emitter.off(e,t,n,r)},b.listeners=function(e){return this._emitter.listeners(e)},b.emit=function(e,t,n){return this._emitter.emit(e,t,n)},b.trigger=function(e,t){if(this.config.debug)return this.emit(e,e,t);try{return this.emit(e,e,t)}catch(n){h.logger.error("An internal error happened while handling event "+e+'. Error message: "'+n.message+'". Here is a stacktrace:',n),this.trigger(v.Events.ERROR,{type:m.ErrorTypes.OTHER_ERROR,details:m.ErrorDetails.INTERNAL_EXCEPTION,fatal:!1,event:e,error:n})}return!1},b.listenerCount=function(e){return this._emitter.listenerCount(e)},b.destroy=function(){h.logger.log("destroy"),this.trigger(v.Events.DESTROYING,void 0),this.detachMedia(),this.removeAllListeners(),this._autoLevelCapping=-1,this.url=null,this.networkControllers.forEach((function(e){return e.destroy()})),this.networkControllers.length=0,this.coreComponents.forEach((function(e){return e.destroy()})),this.coreComponents.length=0},b.attachMedia=function(e){h.logger.log("attachMedia"),this._media=e,this.trigger(v.Events.MEDIA_ATTACHING,{media:e})},b.detachMedia=function(){h.logger.log("detachMedia"),this.trigger(v.Events.MEDIA_DETACHING,void 0),this._media=null},b.loadSource=function(e){this.stopLoad();var t=this.media,n=this.url,i=this.url=r.buildAbsoluteURL(self.location.href,e,{alwaysNormalize:!0});h.logger.log("loadSource:"+i),t&&n&&n!==i&&this.bufferController.hasSourceTypes()&&(this.detachMedia(),this.attachMedia(t)),this.trigger(v.Events.MANIFEST_LOADING,{url:e})},b.startLoad=function(e){void 0===e&&(e=-1),h.logger.log("startLoad("+e+")"),this.networkControllers.forEach((function(t){t.startLoad(e)}))},b.stopLoad=function(){h.logger.log("stopLoad"),this.networkControllers.forEach((function(e){e.stopLoad()}))},b.swapAudioCodec=function(){h.logger.log("swapAudioCodec"),this.streamController.swapAudioCodec()},b.recoverMediaError=function(){h.logger.log("recoverMediaError");var e=this._media;this.detachMedia(),e&&this.attachMedia(e)},b.removeLevel=function(e,t){void 0===t&&(t=0),this.levelController.removeLevel(e,t)},t=e,y=[{key:"version",get:function(){return"1.2.9"}},{key:"Events",get:function(){return v.Events}},{key:"ErrorTypes",get:function(){return m.ErrorTypes}},{key:"ErrorDetails",get:function(){return m.ErrorDetails}},{key:"DefaultConfig",get:function(){return e.defaultConfig?e.defaultConfig:f.hlsDefaultConfig},set:function(t){e.defaultConfig=t}}],(n=[{key:"levels",get:function(){var e=this.levelController.levels;return e||[]}},{key:"currentLevel",get:function(){return this.streamController.currentLevel},set:function(e){h.logger.log("set currentLevel:"+e),this.loadLevel=e,this.abrController.clearTimer(),this.streamController.immediateLevelSwitch()}},{key:"nextLevel",get:function(){return this.streamController.nextLevel},set:function(e){h.logger.log("set nextLevel:"+e),this.levelController.manualLevel=e,this.streamController.nextLevelSwitch()}},{key:"loadLevel",get:function(){return this.levelController.level},set:function(e){h.logger.log("set loadLevel:"+e),this.levelController.manualLevel=e}},{key:"nextLoadLevel",get:function(){return this.levelController.nextLoadLevel},set:function(e){this.levelController.nextLoadLevel=e}},{key:"firstLevel",get:function(){return Math.max(this.levelController.firstLevel,this.minAutoLevel)},set:function(e){h.logger.log("set firstLevel:"+e),this.levelController.firstLevel=e}},{key:"startLevel",get:function(){return this.levelController.startLevel},set:function(e){h.logger.log("set startLevel:"+e),-1!==e&&(e=Math.max(e,this.minAutoLevel)),this.levelController.startLevel=e}},{key:"capLevelToPlayerSize",get:function(){return this.config.capLevelToPlayerSize},set:function(e){var t=!!e;t!==this.config.capLevelToPlayerSize&&(t?this.capLevelController.startCapping():(this.capLevelController.stopCapping(),this.autoLevelCapping=-1,this.streamController.nextLevelSwitch()),this.config.capLevelToPlayerSize=t)}},{key:"autoLevelCapping",get:function(){return this._autoLevelCapping},set:function(e){this._autoLevelCapping!==e&&(h.logger.log("set autoLevelCapping:"+e),this._autoLevelCapping=e)}},{key:"bandwidthEstimate",get:function(){var e=this.abrController.bwEstimator;return e?e.getEstimate():NaN}},{key:"autoLevelEnabled",get:function(){return-1===this.levelController.manualLevel}},{key:"manualLevel",get:function(){return this.levelController.manualLevel}},{key:"minAutoLevel",get:function(){var e=this.levels,t=this.config.minAutoBitrate;if(!e)return 0;for(var n=e.length,r=0;r<n;r++)if(e[r].maxBitrate>=t)return r;return 0}},{key:"maxAutoLevel",get:function(){var e=this.levels,t=this.autoLevelCapping;return-1===t&&e&&e.length?e.length-1:t}},{key:"nextAutoLevel",get:function(){return Math.min(Math.max(this.abrController.nextAutoLevel,this.minAutoLevel),this.maxAutoLevel)},set:function(e){this.abrController.nextAutoLevel=Math.max(this.minAutoLevel,e)}},{key:"playingDate",get:function(){return this.streamController.currentProgramDateTime}},{key:"mainForwardBufferInfo",get:function(){return this.streamController.getMainFwdBufferInfo()}},{key:"audioTracks",get:function(){var e=this.audioTrackController;return e?e.audioTracks:[]}},{key:"audioTrack",get:function(){var e=this.audioTrackController;return e?e.audioTrack:-1},set:function(e){var t=this.audioTrackController;t&&(t.audioTrack=e)}},{key:"subtitleTracks",get:function(){var e=this.subtitleTrackController;return e?e.subtitleTracks:[]}},{key:"subtitleTrack",get:function(){var e=this.subtitleTrackController;return e?e.subtitleTrack:-1},set:function(e){var t=this.subtitleTrackController;t&&(t.subtitleTrack=e)}},{key:"media",get:function(){return this._media}},{key:"subtitleDisplay",get:function(){var e=this.subtitleTrackController;return!!e&&e.subtitleDisplay},set:function(e){var t=this.subtitleTrackController;t&&(t.subtitleDisplay=e)}},{key:"lowLatencyMode",get:function(){return this.config.lowLatencyMode},set:function(e){this.config.lowLatencyMode=e}},{key:"liveSyncPosition",get:function(){return this.latencyController.liveSyncPosition}},{key:"latency",get:function(){return this.latencyController.latency}},{key:"maxLatency",get:function(){return this.latencyController.maxLatency}},{key:"targetLatency",get:function(){return this.latencyController.targetLatency}},{key:"drift",get:function(){return this.latencyController.drift}},{key:"forceStartLoad",get:function(){return this.streamController.forceStartLoad}}])&&g(t.prototype,n),y&&g(t,y),Object.defineProperty(t,"prototype",{writable:!1}),e}();y.defaultConfig=void 0},"./src/is-supported.ts":function(e,t,n){"use strict";n.r(t),n.d(t,{changeTypeSupported:function(){return s},isSupported:function(){return a}});var r=n("./src/utils/mediasource-helper.ts");function i(){return self.SourceBuffer||self.WebKitSourceBuffer}function a(){var e=(0,r.getMediaSource)();if(!e)return!1;var t=i(),n=e&&"function"===typeof e.isTypeSupported&&e.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"'),a=!t||t.prototype&&"function"===typeof t.prototype.appendBuffer&&"function"===typeof t.prototype.remove;return!!n&&!!a}function s(){var e,t=i();return"function"===typeof(null===t||void 0===t||null===(e=t.prototype)||void 0===e?void 0:e.changeType)}},"./src/loader/date-range.ts":function(e,t,n){"use strict";n.r(t),n.d(t,{DateRange:function(){return l},DateRangeAttribute:function(){return r}});var r,i,a=n("./src/polyfills/number.ts"),s=n("./src/utils/attr-list.ts"),o=n("./src/utils/logger.ts");function c(){return c=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},c.apply(this,arguments)}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(i=r||(r={})).ID="ID",i.CLASS="CLASS",i.START_DATE="START-DATE",i.DURATION="DURATION",i.END_DATE="END-DATE",i.END_ON_NEXT="END-ON-NEXT",i.PLANNED_DURATION="PLANNED-DURATION",i.SCTE35_OUT="SCTE35-OUT",i.SCTE35_IN="SCTE35-IN";var l=function(){function e(e,t){if(this.attr=void 0,this._startDate=void 0,this._endDate=void 0,this._badValueForSameId=void 0,t){var n=t.attr;for(var i in n)if(Object.prototype.hasOwnProperty.call(e,i)&&e[i]!==n[i]){o.logger.warn('DATERANGE tag attribute: "'+i+'" does not match for tags with ID: "'+e.ID+'"'),this._badValueForSameId=i;break}e=c(new s.AttrList({}),n,e)}if(this.attr=e,this._startDate=new Date(e[r.START_DATE]),r.END_DATE in this.attr){var u=new Date(this.attr[r.END_DATE]);(0,a.isFiniteNumber)(u.getTime())&&(this._endDate=u)}}var t,n,i;return t=e,(n=[{key:"id",get:function(){return this.attr.ID}},{key:"class",get:function(){return this.attr.CLASS}},{key:"startDate",get:function(){return this._startDate}},{key:"endDate",get:function(){if(this._endDate)return this._endDate;var e=this.duration;return null!==e?new Date(this._startDate.getTime()+1e3*e):null}},{key:"duration",get:function(){if(r.DURATION in this.attr){var e=this.attr.decimalFloatingPoint(r.DURATION);if((0,a.isFiniteNumber)(e))return e}else if(this._endDate)return(this._endDate.getTime()-this._startDate.getTime())/1e3;return null}},{key:"plannedDuration",get:function(){return r.PLANNED_DURATION in this.attr?this.attr.decimalFloatingPoint(r.PLANNED_DURATION):null}},{key:"endOnNext",get:function(){return this.attr.bool(r.END_ON_NEXT)}},{key:"isValid",get:function(){return!!this.id&&!this._badValueForSameId&&(0,a.isFiniteNumber)(this.startDate.getTime())&&(null===this.duration||this.duration>=0)&&(!this.endOnNext||!!this.class)}}])&&u(t.prototype,n),i&&u(t,i),Object.defineProperty(t,"prototype",{writable:!1}),e}()},"./src/loader/fragment-loader.ts":function(e,t,n){"use strict";n.r(t),n.d(t,{LoadError:function(){return f},default:function(){return d}});var r=n("./src/polyfills/number.ts"),i=n("./src/errors.ts");function a(e){var t="function"===typeof Map?new Map:void 0;return a=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return s(e,arguments,u(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),c(r,e)},a(e)}function s(e,t,n){return s=o()?Reflect.construct.bind():function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&c(i,n.prototype),i},s.apply(null,arguments)}function o(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function c(e,t){return c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},c(e,t)}function u(e){return u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},u(e)}var l=Math.pow(2,17),d=function(){function e(e){this.config=void 0,this.loader=null,this.partLoadTimeout=-1,this.config=e}var t=e.prototype;return t.destroy=function(){this.loader&&(this.loader.destroy(),this.loader=null)},t.abort=function(){this.loader&&this.loader.abort()},t.load=function(e,t){var n=this,r=e.url;if(!r)return Promise.reject(new f({type:i.ErrorTypes.NETWORK_ERROR,details:i.ErrorDetails.FRAG_LOAD_ERROR,fatal:!1,frag:e,networkDetails:null},"Fragment does not have a "+(r?"part list":"url")));this.abort();var a=this.config,s=a.fLoader,o=a.loader;return new Promise((function(r,c){n.loader&&n.loader.destroy();var u=n.loader=e.loader=s?new s(a):new o(a),d=h(e),p={timeout:a.fragLoadingTimeOut,maxRetry:0,retryDelay:0,maxRetryDelay:a.fragLoadingMaxRetryTimeout,highWaterMark:"initSegment"===e.sn?1/0:l};e.stats=u.stats,u.load(d,p,{onSuccess:function(t,i,a,s){n.resetLoader(e,u),r({frag:e,part:null,payload:t.data,networkDetails:s})},onError:function(t,r,a){n.resetLoader(e,u),c(new f({type:i.ErrorTypes.NETWORK_ERROR,details:i.ErrorDetails.FRAG_LOAD_ERROR,fatal:!1,frag:e,response:t,networkDetails:a}))},onAbort:function(t,r,a){n.resetLoader(e,u),c(new f({type:i.ErrorTypes.NETWORK_ERROR,details:i.ErrorDetails.INTERNAL_ABORTED,fatal:!1,frag:e,networkDetails:a}))},onTimeout:function(t,r,a){n.resetLoader(e,u),c(new f({type:i.ErrorTypes.NETWORK_ERROR,details:i.ErrorDetails.FRAG_LOAD_TIMEOUT,fatal:!1,frag:e,networkDetails:a}))},onProgress:function(n,r,i,a){t&&t({frag:e,part:null,payload:i,networkDetails:a})}})}))},t.loadPart=function(e,t,n){var r=this;this.abort();var a=this.config,s=a.fLoader,o=a.loader;return new Promise((function(c,u){r.loader&&r.loader.destroy();var d=r.loader=e.loader=s?new s(a):new o(a),p=h(e,t),v={timeout:a.fragLoadingTimeOut,maxRetry:0,retryDelay:0,maxRetryDelay:a.fragLoadingMaxRetryTimeout,highWaterMark:l};t.stats=d.stats,d.load(p,v,{onSuccess:function(i,a,s,o){r.resetLoader(e,d),r.updateStatsFromPart(e,t);var u={frag:e,part:t,payload:i.data,networkDetails:o};n(u),c(u)},onError:function(n,a,s){r.resetLoader(e,d),u(new f({type:i.ErrorTypes.NETWORK_ERROR,details:i.ErrorDetails.FRAG_LOAD_ERROR,fatal:!1,frag:e,part:t,response:n,networkDetails:s}))},onAbort:function(n,a,s){e.stats.aborted=t.stats.aborted,r.resetLoader(e,d),u(new f({type:i.ErrorTypes.NETWORK_ERROR,details:i.ErrorDetails.INTERNAL_ABORTED,fatal:!1,frag:e,part:t,networkDetails:s}))},onTimeout:function(n,a,s){r.resetLoader(e,d),u(new f({type:i.ErrorTypes.NETWORK_ERROR,details:i.ErrorDetails.FRAG_LOAD_TIMEOUT,fatal:!1,frag:e,part:t,networkDetails:s}))}})}))},t.updateStatsFromPart=function(e,t){var n=e.stats,r=t.stats,i=r.total;if(n.loaded+=r.loaded,i){var a=Math.round(e.duration/t.duration),s=Math.min(Math.round(n.loaded/i),a),o=(a-s)*Math.round(n.loaded/s);n.total=n.loaded+o}else n.total=Math.max(n.loaded,n.total);var c=n.loading,u=r.loading;c.start?c.first+=u.first-u.start:(c.start=u.start,c.first=u.first),c.end=u.end},t.resetLoader=function(e,t){e.loader=null,this.loader===t&&(self.clearTimeout(this.partLoadTimeout),this.loader=null),t.destroy()},e}();function h(e,t){void 0===t&&(t=null);var n=t||e,i={frag:e,part:t,responseType:"arraybuffer",url:n.url,headers:{},rangeStart:0,rangeEnd:0},a=n.byteRangeStartOffset,s=n.byteRangeEndOffset;return(0,r.isFiniteNumber)(a)&&(0,r.isFiniteNumber)(s)&&(i.rangeStart=a,i.rangeEnd=s),i}var f=function(e){var t,n;function r(t){for(var n,r=arguments.length,i=new Array(r>1?r-1:0),a=1;a<r;a++)i[a-1]=arguments[a];return(n=e.call.apply(e,[this].concat(i))||this).data=void 0,n.data=t,n}return n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,c(t,n),r}(a(Error))},"./src/loader/fragment.ts":function(e,t,n){"use strict";n.r(t),n.d(t,{BaseSegment:function(){return p},ElementaryStreamTypes:function(){return r},Fragment:function(){return v},Part:function(){return m}});var r,i,a=n("./src/polyfills/number.ts"),s=n("./node_modules/url-toolkit/src/url-toolkit.js"),o=n("./src/utils/logger.ts"),c=n("./src/loader/level-key.ts"),u=n("./src/loader/load-stats.ts");function l(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,d(e,t)}function d(e,t){return d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},d(e,t)}function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e,t,n){return t&&h(e.prototype,t),n&&h(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(i=r||(r={})).AUDIO="audio",i.VIDEO="video",i.AUDIOVIDEO="audiovideo";var p=function(){function e(e){var t;this._byteRange=null,this._url=null,this.baseurl=void 0,this.relurl=void 0,this.elementaryStreams=((t={})[r.AUDIO]=null,t[r.VIDEO]=null,t[r.AUDIOVIDEO]=null,t),this.baseurl=e}return e.prototype.setByteRange=function(e,t){var n=e.split("@",2),r=[];1===n.length?r[0]=t?t.byteRangeEndOffset:0:r[0]=parseInt(n[1]),r[1]=parseInt(n[0])+r[0],this._byteRange=r},f(e,[{key:"byteRange",get:function(){return this._byteRange?this._byteRange:[]}},{key:"byteRangeStartOffset",get:function(){return this.byteRange[0]}},{key:"byteRangeEndOffset",get:function(){return this.byteRange[1]}},{key:"url",get:function(){return!this._url&&this.baseurl&&this.relurl&&(this._url=(0,s.buildAbsoluteURL)(this.baseurl,this.relurl,{alwaysNormalize:!0})),this._url||""},set:function(e){this._url=e}}]),e}(),v=function(e){function t(t,n){var r;return(r=e.call(this,n)||this)._decryptdata=null,r.rawProgramDateTime=null,r.programDateTime=null,r.tagList=[],r.duration=0,r.sn=0,r.levelkey=void 0,r.type=void 0,r.loader=null,r.level=-1,r.cc=0,r.startPTS=void 0,r.endPTS=void 0,r.appendedPTS=void 0,r.startDTS=void 0,r.endDTS=void 0,r.start=0,r.deltaPTS=void 0,r.maxStartPTS=void 0,r.minEndPTS=void 0,r.stats=new u.LoadStats,r.urlId=0,r.data=void 0,r.bitrateTest=!1,r.title=null,r.initSegment=null,r.type=t,r}l(t,e);var n=t.prototype;return n.createInitializationVector=function(e){for(var t=new Uint8Array(16),n=12;n<16;n++)t[n]=e>>8*(15-n)&255;return t},n.setDecryptDataFromLevelKey=function(e,t){var n=e;return"AES-128"===(null===e||void 0===e?void 0:e.method)&&e.uri&&!e.iv&&((n=c.LevelKey.fromURI(e.uri)).method=e.method,n.iv=this.createInitializationVector(t),n.keyFormat="identity"),n},n.setElementaryStreamInfo=function(e,t,n,r,i,a){void 0===a&&(a=!1);var s=this.elementaryStreams,o=s[e];o?(o.startPTS=Math.min(o.startPTS,t),o.endPTS=Math.max(o.endPTS,n),o.startDTS=Math.min(o.startDTS,r),o.endDTS=Math.max(o.endDTS,i)):s[e]={startPTS:t,endPTS:n,startDTS:r,endDTS:i,partial:a}},n.clearElementaryStreamInfo=function(){var e=this.elementaryStreams;e[r.AUDIO]=null,e[r.VIDEO]=null,e[r.AUDIOVIDEO]=null},f(t,[{key:"decryptdata",get:function(){if(!this.levelkey&&!this._decryptdata)return null;if(!this._decryptdata&&this.levelkey){var e=this.sn;"number"!==typeof e&&(this.levelkey&&"AES-128"===this.levelkey.method&&!this.levelkey.iv&&o.logger.warn('missing IV for initialization segment with method="'+this.levelkey.method+'" - compliance issue'),e=0),this._decryptdata=this.setDecryptDataFromLevelKey(this.levelkey,e)}return this._decryptdata}},{key:"end",get:function(){return this.start+this.duration}},{key:"endProgramDateTime",get:function(){if(null===this.programDateTime)return null;if(!(0,a.isFiniteNumber)(this.programDateTime))return null;var e=(0,a.isFiniteNumber)(this.duration)?this.duration:0;return this.programDateTime+1e3*e}},{key:"encrypted",get:function(){var e;return!(null===(e=this.decryptdata)||void 0===e||!e.keyFormat||!this.decryptdata.uri)}}]),t}(p),m=function(e){function t(t,n,r,i,a){var s;(s=e.call(this,r)||this).fragOffset=0,s.duration=0,s.gap=!1,s.independent=!1,s.relurl=void 0,s.fragment=void 0,s.index=void 0,s.stats=new u.LoadStats,s.duration=t.decimalFloatingPoint("DURATION"),s.gap=t.bool("GAP"),s.independent=t.bool("INDEPENDENT"),s.relurl=t.enumeratedString("URI"),s.fragment=n,s.index=i;var o=t.enumeratedString("BYTERANGE");return o&&s.setByteRange(o,a),a&&(s.fragOffset=a.fragOffset+a.duration),s}return l(t,e),f(t,[{key:"start",get:function(){return this.fragment.start+this.fragOffset}},{key:"end",get:function(){return this.start+this.duration}},{key:"loaded",get:function(){var e=this.elementaryStreams;return!!(e.audio||e.video||e.audiovideo)}}]),t}(p)},"./src/loader/key-loader.ts":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return s}});var r=n("./src/events.ts"),i=n("./src/errors.ts"),a=n("./src/utils/logger.ts"),s=function(){function e(e){this.hls=void 0,this.loaders={},this.decryptkey=null,this.decrypturl=null,this.hls=e,this.registerListeners()}var t=e.prototype;return t.startLoad=function(e){},t.stopLoad=function(){this.destroyInternalLoaders()},t.registerListeners=function(){this.hls.on(r.Events.KEY_LOADING,this.onKeyLoading,this)},t.unregisterListeners=function(){this.hls.off(r.Events.KEY_LOADING,this.onKeyLoading)},t.destroyInternalLoaders=function(){for(var e in this.loaders){var t=this.loaders[e];t&&t.destroy()}this.loaders={}},t.destroy=function(){this.unregisterListeners(),this.destroyInternalLoaders()},t.onKeyLoading=function(e,t){var n=t.frag,i=n.type,s=this.loaders[i];if(n.decryptdata){var o=n.decryptdata.uri;if(o!==this.decrypturl||null===this.decryptkey){var c=this.hls.config;if(s&&(a.logger.warn("abort previous key loader for type:"+i),s.abort()),!o)return void a.logger.warn("key uri is falsy");var u=c.loader,l=n.loader=this.loaders[i]=new u(c);this.decrypturl=o,this.decryptkey=null;var d={url:o,frag:n,responseType:"arraybuffer"},h={timeout:c.fragLoadingTimeOut,maxRetry:0,retryDelay:c.fragLoadingRetryDelay,maxRetryDelay:c.fragLoadingMaxRetryTimeout,highWaterMark:0},f={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this)};l.load(d,h,f)}else this.decryptkey&&(n.decryptdata.key=this.decryptkey,this.hls.trigger(r.Events.KEY_LOADED,{frag:n}))}else a.logger.warn("Missing decryption data on fragment in onKeyLoading")},t.loadsuccess=function(e,t,n){var i=n.frag;i.decryptdata?(this.decryptkey=i.decryptdata.key=new Uint8Array(e.data),i.loader=null,delete this.loaders[i.type],this.hls.trigger(r.Events.KEY_LOADED,{frag:i})):a.logger.error("after key load, decryptdata unset")},t.loaderror=function(e,t){var n=t.frag,a=n.loader;a&&a.abort(),delete this.loaders[n.type],this.hls.trigger(r.Events.ERROR,{type:i.ErrorTypes.NETWORK_ERROR,details:i.ErrorDetails.KEY_LOAD_ERROR,fatal:!1,frag:n,response:e})},t.loadtimeout=function(e,t){var n=t.frag,a=n.loader;a&&a.abort(),delete this.loaders[n.type],this.hls.trigger(r.Events.ERROR,{type:i.ErrorTypes.NETWORK_ERROR,details:i.ErrorDetails.KEY_LOAD_TIMEOUT,fatal:!1,frag:n})},e}()},"./src/loader/level-details.ts":function(e,t,n){"use strict";n.r(t),n.d(t,{LevelDetails:function(){return a}});var r=n("./src/polyfills/number.ts");function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var a=function(){function e(e){this.PTSKnown=!1,this.alignedSliding=!1,this.averagetargetduration=void 0,this.endCC=0,this.endSN=0,this.fragments=void 0,this.fragmentHint=void 0,this.partList=null,this.dateRanges=void 0,this.live=!0,this.ageHeader=0,this.advancedDateTime=void 0,this.updated=!0,this.advanced=!0,this.availabilityDelay=void 0,this.misses=0,this.needSidxRanges=!1,this.startCC=0,this.startSN=0,this.startTimeOffset=null,this.targetduration=0,this.totalduration=0,this.type=null,this.url=void 0,this.m3u8="",this.version=null,this.canBlockReload=!1,this.canSkipUntil=0,this.canSkipDateRanges=!1,this.skippedSegments=0,this.recentlyRemovedDateranges=void 0,this.partHoldBack=0,this.holdBack=0,this.partTarget=0,this.preloadHint=void 0,this.renditionReports=void 0,this.tuneInGoal=0,this.deltaUpdateFailed=void 0,this.driftStartTime=0,this.driftEndTime=0,this.driftStart=0,this.driftEnd=0,this.fragments=[],this.dateRanges={},this.url=e}var t,n,a;return e.prototype.reloaded=function(e){if(!e)return this.advanced=!0,void(this.updated=!0);var t=this.lastPartSn-e.lastPartSn,n=this.lastPartIndex-e.lastPartIndex;this.updated=this.endSN!==e.endSN||!!n||!!t,this.advanced=this.endSN>e.endSN||t>0||0===t&&n>0,this.updated||this.advanced?this.misses=Math.floor(.6*e.misses):this.misses=e.misses+1,this.availabilityDelay=e.availabilityDelay},t=e,(n=[{key:"hasProgramDateTime",get:function(){return!!this.fragments.length&&(0,r.isFiniteNumber)(this.fragments[this.fragments.length-1].programDateTime)}},{key:"levelTargetDuration",get:function(){return this.averagetargetduration||this.targetduration||10}},{key:"drift",get:function(){var e=this.driftEndTime-this.driftStartTime;return e>0?1e3*(this.driftEnd-this.driftStart)/e:1}},{key:"edge",get:function(){return this.partEnd||this.fragmentEnd}},{key:"partEnd",get:function(){var e;return null!==(e=this.partList)&&void 0!==e&&e.length?this.partList[this.partList.length-1].end:this.fragmentEnd}},{key:"fragmentEnd",get:function(){var e;return null!==(e=this.fragments)&&void 0!==e&&e.length?this.fragments[this.fragments.length-1].end:0}},{key:"age",get:function(){return this.advancedDateTime?Math.max(Date.now()-this.advancedDateTime,0)/1e3:0}},{key:"lastPartIndex",get:function(){var e;return null!==(e=this.partList)&&void 0!==e&&e.length?this.partList[this.partList.length-1].index:-1}},{key:"lastPartSn",get:function(){var e;return null!==(e=this.partList)&&void 0!==e&&e.length?this.partList[this.partList.length-1].fragment.sn:this.endSN}}])&&i(t.prototype,n),a&&i(t,a),Object.defineProperty(t,"prototype",{writable:!1}),e}()},"./src/loader/level-key.ts":function(e,t,n){"use strict";n.r(t),n.d(t,{LevelKey:function(){return a}});var r=n("./node_modules/url-toolkit/src/url-toolkit.js");function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var a=function(){function e(e,t){this._uri=null,this.method=null,this.keyFormat=null,this.keyFormatVersions=null,this.keyID=null,this.key=null,this.iv=null,this._uri=t?(0,r.buildAbsoluteURL)(e,t,{alwaysNormalize:!0}):e}var t,n,a;return e.fromURL=function(t,n){return new e(t,n)},e.fromURI=function(t){return new e(t)},t=e,(n=[{key:"uri",get:function(){return this._uri}}])&&i(t.prototype,n),a&&i(t,a),Object.defineProperty(t,"prototype",{writable:!1}),e}()},"./src/loader/load-stats.ts":function(e,t,n){"use strict";n.r(t),n.d(t,{LoadStats:function(){return r}});var r=function(){this.aborted=!1,this.loaded=0,this.retry=0,this.total=0,this.chunkCount=0,this.bwEstimate=0,this.loading={start:0,first:0,end:0},this.parsing={start:0,end:0},this.buffering={start:0,first:0,end:0}}},"./src/loader/m3u8-parser.ts":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return g}});var r=n("./src/polyfills/number.ts"),i=n("./node_modules/url-toolkit/src/url-toolkit.js"),a=n("./src/loader/date-range.ts"),s=n("./src/loader/fragment.ts"),o=n("./src/loader/level-details.ts"),c=n("./src/loader/level-key.ts"),u=n("./src/utils/attr-list.ts"),l=n("./src/utils/logger.ts"),d=n("./src/utils/codecs.ts"),h=/#EXT-X-STREAM-INF:([^\r\n]*)(?:[\r\n](?:#[^\r\n]*)?)*([^\r\n]+)|#EXT-X-SESSION-DATA:([^\r\n]*)[\r\n]+/g,f=/#EXT-X-MEDIA:(.*)/g,p=new RegExp([/#EXTINF:\s*(\d*(?:\.\d+)?)(?:,(.*)\s+)?/.source,/(?!#) *(\S[\S ]*)/.source,/#EXT-X-BYTERANGE:*(.+)/.source,/#EXT-X-PROGRAM-DATE-TIME:(.+)/.source,/#.*/.source].join("|"),"g"),v=new RegExp([/#(EXTM3U)/.source,/#EXT-X-(DATERANGE|KEY|MAP|PART|PART-INF|PLAYLIST-TYPE|PRELOAD-HINT|RENDITION-REPORT|SERVER-CONTROL|SKIP|START):(.+)/.source,/#EXT-X-(BITRATE|DISCONTINUITY-SEQUENCE|MEDIA-SEQUENCE|TARGETDURATION|VERSION): *(\d+)/.source,/#EXT-X-(DISCONTINUITY|ENDLIST|GAP)/.source,/(#)([^:]*):(.*)/.source,/(#)(.*)(?:.*)\r?\n?/.source].join("|")),m=/\.(mp4|m4s|m4v|m4a)$/i,g=function(){function e(){}return e.findGroup=function(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(r.id===t)return r}},e.convertAVC1ToAVCOTI=function(e){var t=e.split(".");if(t.length>2){var n=t.shift()+".";return n+=parseInt(t.shift()).toString(16),n+=("000"+parseInt(t.shift()).toString(16)).slice(-4)}return e},e.resolve=function(e,t){return i.buildAbsoluteURL(t,e,{alwaysNormalize:!0})},e.parseMasterPlaylist=function(t,n){var r,i=[],a=[],s={},o=!1;for(h.lastIndex=0;null!=(r=h.exec(t));)if(r[1]){var c,l=new u.AttrList(r[1]),d={attrs:l,bitrate:l.decimalInteger("AVERAGE-BANDWIDTH")||l.decimalInteger("BANDWIDTH"),name:l.NAME,url:e.resolve(r[2],n)},f=l.decimalResolution("RESOLUTION");f&&(d.width=f.width,d.height=f.height),y((l.CODECS||"").split(/[ ,]+/).filter((function(e){return e})),d),d.videoCodec&&-1!==d.videoCodec.indexOf("avc1")&&(d.videoCodec=e.convertAVC1ToAVCOTI(d.videoCodec)),null!==(c=d.unknownCodecs)&&void 0!==c&&c.length||a.push(d),i.push(d)}else if(r[3]){var p=new u.AttrList(r[3]);p["DATA-ID"]&&(o=!0,s[p["DATA-ID"]]=p)}return{levels:a.length>0&&a.length<i.length?a:i,sessionData:o?s:null}},e.parseMasterPlaylistMedia=function(t,n,r,i){var a;void 0===i&&(i=[]);var s=[],o=0;for(f.lastIndex=0;null!==(a=f.exec(t));){var c=new u.AttrList(a[1]);if(c.TYPE===r){var l={attrs:c,bitrate:0,id:o++,groupId:c["GROUP-ID"],instreamId:c["INSTREAM-ID"],name:c.NAME||c.LANGUAGE||"",type:r,default:c.bool("DEFAULT"),autoselect:c.bool("AUTOSELECT"),forced:c.bool("FORCED"),lang:c.LANGUAGE,url:c.URI?e.resolve(c.URI,n):""};if(i.length){var d=e.findGroup(i,l.groupId)||i[0];b(l,d,"audioCodec"),b(l,d,"textCodec")}s.push(l)}}return s},e.parseLevelPlaylist=function(e,t,n,d,h){var f,g,y,b=new o.LevelDetails(t),w=b.fragments,T=null,E=0,_=0,S=0,A=0,C=null,I=new s.Fragment(d,t),R=-1,P=!1;for(p.lastIndex=0,b.m3u8=e;null!==(f=p.exec(e));){P&&(P=!1,(I=new s.Fragment(d,t)).start=S,I.sn=E,I.cc=A,I.level=n,T&&(I.initSegment=T,I.rawProgramDateTime=T.rawProgramDateTime,T.rawProgramDateTime=null));var D=f[1];if(D){I.duration=parseFloat(D);var N=(" "+f[2]).slice(1);I.title=N||null,I.tagList.push(N?["INF",D,N]:["INF",D])}else if(f[3])(0,r.isFiniteNumber)(I.duration)&&(I.start=S,y&&(I.levelkey=y),I.sn=E,I.level=n,I.cc=A,I.urlId=h,w.push(I),I.relurl=(" "+f[3]).slice(1),k(I,C),C=I,S+=I.duration,E++,_=0,P=!0);else if(f[4]){var O=(" "+f[4]).slice(1);C?I.setByteRange(O,C):I.setByteRange(O)}else if(f[5])I.rawProgramDateTime=(" "+f[5]).slice(1),I.tagList.push(["PROGRAM-DATE-TIME",I.rawProgramDateTime]),-1===R&&(R=w.length);else{if(!(f=f[0].match(v))){l.logger.warn("No matches on slow regex match for level playlist!");continue}for(g=1;g<f.length&&"undefined"===typeof f[g];g++);var L=(" "+f[g]).slice(1),M=(" "+f[g+1]).slice(1),j=f[g+2]?(" "+f[g+2]).slice(1):"";switch(L){case"PLAYLIST-TYPE":b.type=M.toUpperCase();break;case"MEDIA-SEQUENCE":E=b.startSN=parseInt(M);break;case"SKIP":var F=new u.AttrList(M),U=F.decimalInteger("SKIPPED-SEGMENTS");if((0,r.isFiniteNumber)(U)){b.skippedSegments=U;for(var B=U;B--;)w.unshift(null);E+=U}var G=F.enumeratedString("RECENTLY-REMOVED-DATERANGES");G&&(b.recentlyRemovedDateranges=G.split("\t"));break;case"TARGETDURATION":b.targetduration=parseFloat(M);break;case"VERSION":b.version=parseInt(M);break;case"EXTM3U":break;case"ENDLIST":b.live=!1;break;case"#":(M||j)&&I.tagList.push(j?[M,j]:[M]);break;case"DISCONTINUITY":A++,I.tagList.push(["DIS"]);break;case"GAP":I.tagList.push([L]);break;case"BITRATE":I.tagList.push([L,M]);break;case"DATERANGE":var V=new u.AttrList(M),H=new a.DateRange(V,b.dateRanges[V.ID]);H.isValid||b.skippedSegments?b.dateRanges[H.id]=H:l.logger.warn('Ignoring invalid DATERANGE tag: "'+M+'"'),I.tagList.push(["EXT-X-DATERANGE",M]);break;case"DISCONTINUITY-SEQUENCE":A=parseInt(M);break;case"KEY":var z,W=new u.AttrList(M),K=W.enumeratedString("METHOD"),q=W.URI,Y=W.hexadecimalInteger("IV"),J=W.enumeratedString("KEYFORMATVERSIONS"),Q=W.enumeratedString("KEYID"),X=null!=(z=W.enumeratedString("KEYFORMAT"))?z:"identity";if(["com.apple.streamingkeydelivery","com.microsoft.playready","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed","com.widevine"].indexOf(X)>-1){l.logger.warn("Keyformat "+X+" is not supported from the manifest");continue}if("identity"!==X)continue;K&&(y=c.LevelKey.fromURL(t,q),q&&["AES-128","SAMPLE-AES","SAMPLE-AES-CENC"].indexOf(K)>=0&&(y.method=K,y.keyFormat=X,Q&&(y.keyID=Q),J&&(y.keyFormatVersions=J),y.iv=Y));break;case"START":var Z=new u.AttrList(M).decimalFloatingPoint("TIME-OFFSET");(0,r.isFiniteNumber)(Z)&&(b.startTimeOffset=Z);break;case"MAP":var $=new u.AttrList(M);if(I.duration){var ee=new s.Fragment(d,t);x(ee,$,n,y),T=ee,I.initSegment=T,T.rawProgramDateTime&&!I.rawProgramDateTime&&(I.rawProgramDateTime=T.rawProgramDateTime)}else x(I,$,n,y),T=I,P=!0;break;case"SERVER-CONTROL":var te=new u.AttrList(M);b.canBlockReload=te.bool("CAN-BLOCK-RELOAD"),b.canSkipUntil=te.optionalFloat("CAN-SKIP-UNTIL",0),b.canSkipDateRanges=b.canSkipUntil>0&&te.bool("CAN-SKIP-DATERANGES"),b.partHoldBack=te.optionalFloat("PART-HOLD-BACK",0),b.holdBack=te.optionalFloat("HOLD-BACK",0);break;case"PART-INF":var ne=new u.AttrList(M);b.partTarget=ne.decimalFloatingPoint("PART-TARGET");break;case"PART":var re=b.partList;re||(re=b.partList=[]);var ie=_>0?re[re.length-1]:void 0,ae=_++,se=new s.Part(new u.AttrList(M),I,t,ae,ie);re.push(se),I.duration+=se.duration;break;case"PRELOAD-HINT":var oe=new u.AttrList(M);b.preloadHint=oe;break;case"RENDITION-REPORT":var ce=new u.AttrList(M);b.renditionReports=b.renditionReports||[],b.renditionReports.push(ce);break;default:l.logger.warn("line parsed but not handled: "+f)}}}C&&!C.relurl?(w.pop(),S-=C.duration,b.partList&&(b.fragmentHint=C)):b.partList&&(k(I,C),I.cc=A,b.fragmentHint=I);var ue=w.length,le=w[0],de=w[ue-1];if((S+=b.skippedSegments*b.targetduration)>0&&ue&&de){b.averagetargetduration=S/ue;var he=de.sn;b.endSN="initSegment"!==he?he:0,le&&(b.startCC=le.cc,le.initSegment||b.fragments.every((function(e){return e.relurl&&function(e){var t,n;return m.test(null!=(t=null===(n=i.parseURL(e))||void 0===n?void 0:n.path)?t:"")}(e.relurl)}))&&(l.logger.warn("MP4 fragments found but no init segment (probably no MAP, incomplete M3U8), trying to fetch SIDX"),(I=new s.Fragment(d,t)).relurl=de.relurl,I.level=n,I.sn="initSegment",le.initSegment=I,b.needSidxRanges=!0))}else b.endSN=0,b.startCC=0;return b.fragmentHint&&(S+=b.fragmentHint.duration),b.totalduration=S,b.endCC=A,R>0&&function(e,t){for(var n=e[t],r=t;r--;){var i=e[r];if(!i)return;i.programDateTime=n.programDateTime-1e3*i.duration,n=i}}(w,R),b},e}();function y(e,t){["video","audio","text"].forEach((function(n){var r=e.filter((function(e){return(0,d.isCodecType)(e,n)}));if(r.length){var i=r.filter((function(e){return 0===e.lastIndexOf("avc1",0)||0===e.lastIndexOf("mp4a",0)}));t[n+"Codec"]=i.length>0?i[0]:r[0],e=e.filter((function(e){return-1===r.indexOf(e)}))}})),t.unknownCodecs=e}function b(e,t,n){var r=t[n];r&&(e[n]=r)}function k(e,t){e.rawProgramDateTime?e.programDateTime=Date.parse(e.rawProgramDateTime):null!==t&&void 0!==t&&t.programDateTime&&(e.programDateTime=t.endProgramDateTime),(0,r.isFiniteNumber)(e.programDateTime)||(e.programDateTime=null,e.rawProgramDateTime=null)}function x(e,t,n,r){e.relurl=t.URI,t.BYTERANGE&&e.setByteRange(t.BYTERANGE),e.level=n,e.sn="initSegment",r&&(e.levelkey=r),e.initSegment=null}},"./src/loader/playlist-loader.ts":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return h}});var r=n("./src/polyfills/number.ts"),i=n("./src/events.ts"),a=n("./src/errors.ts"),s=n("./src/utils/logger.ts"),o=n("./src/utils/mp4-tools.ts"),c=n("./src/loader/m3u8-parser.ts"),u=n("./src/types/loader.ts"),l=n("./src/utils/attr-list.ts");function d(e,t){var n=e.url;return void 0!==n&&0!==n.indexOf("data:")||(n=t.url),n}var h=function(){function e(e){this.hls=void 0,this.loaders=Object.create(null),this.hls=e,this.registerListeners()}var t=e.prototype;return t.startLoad=function(e){},t.stopLoad=function(){this.destroyInternalLoaders()},t.registerListeners=function(){var e=this.hls;e.on(i.Events.MANIFEST_LOADING,this.onManifestLoading,this),e.on(i.Events.LEVEL_LOADING,this.onLevelLoading,this),e.on(i.Events.AUDIO_TRACK_LOADING,this.onAudioTrackLoading,this),e.on(i.Events.SUBTITLE_TRACK_LOADING,this.onSubtitleTrackLoading,this)},t.unregisterListeners=function(){var e=this.hls;e.off(i.Events.MANIFEST_LOADING,this.onManifestLoading,this),e.off(i.Events.LEVEL_LOADING,this.onLevelLoading,this),e.off(i.Events.AUDIO_TRACK_LOADING,this.onAudioTrackLoading,this),e.off(i.Events.SUBTITLE_TRACK_LOADING,this.onSubtitleTrackLoading,this)},t.createInternalLoader=function(e){var t=this.hls.config,n=t.pLoader,r=t.loader,i=new(n||r)(t);return e.loader=i,this.loaders[e.type]=i,i},t.getInternalLoader=function(e){return this.loaders[e.type]},t.resetInternalLoader=function(e){this.loaders[e]&&delete this.loaders[e]},t.destroyInternalLoaders=function(){for(var e in this.loaders){var t=this.loaders[e];t&&t.destroy(),this.resetInternalLoader(e)}},t.destroy=function(){this.unregisterListeners(),this.destroyInternalLoaders()},t.onManifestLoading=function(e,t){var n=t.url;this.load({id:null,groupId:null,level:0,responseType:"text",type:u.PlaylistContextType.MANIFEST,url:n,deliveryDirectives:null})},t.onLevelLoading=function(e,t){var n=t.id,r=t.level,i=t.url,a=t.deliveryDirectives;this.load({id:n,groupId:null,level:r,responseType:"text",type:u.PlaylistContextType.LEVEL,url:i,deliveryDirectives:a})},t.onAudioTrackLoading=function(e,t){var n=t.id,r=t.groupId,i=t.url,a=t.deliveryDirectives;this.load({id:n,groupId:r,level:null,responseType:"text",type:u.PlaylistContextType.AUDIO_TRACK,url:i,deliveryDirectives:a})},t.onSubtitleTrackLoading=function(e,t){var n=t.id,r=t.groupId,i=t.url,a=t.deliveryDirectives;this.load({id:n,groupId:r,level:null,responseType:"text",type:u.PlaylistContextType.SUBTITLE_TRACK,url:i,deliveryDirectives:a})},t.load=function(e){var t,n,r,i,a,o,c=this.hls.config,l=this.getInternalLoader(e);if(l){var d=l.context;if(d&&d.url===e.url)return void s.logger.trace("[playlist-loader]: playlist request ongoing");s.logger.log("[playlist-loader]: aborting previous loader for type: "+e.type),l.abort()}switch(e.type){case u.PlaylistContextType.MANIFEST:n=c.manifestLoadingMaxRetry,r=c.manifestLoadingTimeOut,i=c.manifestLoadingRetryDelay,a=c.manifestLoadingMaxRetryTimeout;break;case u.PlaylistContextType.LEVEL:case u.PlaylistContextType.AUDIO_TRACK:case u.PlaylistContextType.SUBTITLE_TRACK:n=0,r=c.levelLoadingTimeOut;break;default:n=c.levelLoadingMaxRetry,r=c.levelLoadingTimeOut,i=c.levelLoadingRetryDelay,a=c.levelLoadingMaxRetryTimeout}if(l=this.createInternalLoader(e),null!==(t=e.deliveryDirectives)&&void 0!==t&&t.part&&(e.type===u.PlaylistContextType.LEVEL&&null!==e.level?o=this.hls.levels[e.level].details:e.type===u.PlaylistContextType.AUDIO_TRACK&&null!==e.id?o=this.hls.audioTracks[e.id].details:e.type===u.PlaylistContextType.SUBTITLE_TRACK&&null!==e.id&&(o=this.hls.subtitleTracks[e.id].details),o)){var h=o.partTarget,f=o.targetduration;h&&f&&(r=Math.min(1e3*Math.max(3*h,.8*f),r))}var p={timeout:r,maxRetry:n,retryDelay:i,maxRetryDelay:a,highWaterMark:0},v={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this)};l.load(e,p,v)},t.loadsuccess=function(e,t,n,r){if(void 0===r&&(r=null),n.isSidxRequest)return this.handleSidxRequest(e,n),void this.handlePlaylistLoaded(e,t,n,r);this.resetInternalLoader(n.type);var i=e.data;0===i.indexOf("#EXTM3U")?(t.parsing.start=performance.now(),i.indexOf("#EXTINF:")>0||i.indexOf("#EXT-X-TARGETDURATION:")>0?this.handleTrackOrLevelPlaylist(e,t,n,r):this.handleMasterPlaylist(e,t,n,r)):this.handleManifestParsingError(e,n,"no EXTM3U delimiter",r)},t.loaderror=function(e,t,n){void 0===n&&(n=null),this.handleNetworkError(t,n,!1,e)},t.loadtimeout=function(e,t,n){void 0===n&&(n=null),this.handleNetworkError(t,n,!0)},t.handleMasterPlaylist=function(e,t,n,r){var a=this.hls,o=e.data,u=d(e,n),h=c.default.parseMasterPlaylist(o,u),f=h.levels,p=h.sessionData;if(f.length){var v=f.map((function(e){return{id:e.attrs.AUDIO,audioCodec:e.audioCodec}})),m=f.map((function(e){return{id:e.attrs.SUBTITLES,textCodec:e.textCodec}})),g=c.default.parseMasterPlaylistMedia(o,u,"AUDIO",v),y=c.default.parseMasterPlaylistMedia(o,u,"SUBTITLES",m),b=c.default.parseMasterPlaylistMedia(o,u,"CLOSED-CAPTIONS");g.length&&(g.some((function(e){return!e.url}))||!f[0].audioCodec||f[0].attrs.AUDIO||(s.logger.log("[playlist-loader]: audio codec signaled in quality level, but no embedded audio track signaled, create one"),g.unshift({type:"main",name:"main",default:!1,autoselect:!1,forced:!1,id:-1,attrs:new l.AttrList({}),bitrate:0,url:""}))),a.trigger(i.Events.MANIFEST_LOADED,{levels:f,audioTracks:g,subtitles:y,captions:b,url:u,stats:t,networkDetails:r,sessionData:p})}else this.handleManifestParsingError(e,n,"no level found in manifest",r)},t.handleTrackOrLevelPlaylist=function(e,t,n,s){var o=this.hls,h=n.id,f=n.level,p=n.type,v=d(e,n),m=(0,r.isFiniteNumber)(h)?h:0,g=(0,r.isFiniteNumber)(f)?f:m,y=function(e){switch(e.type){case u.PlaylistContextType.AUDIO_TRACK:return u.PlaylistLevelType.AUDIO;case u.PlaylistContextType.SUBTITLE_TRACK:return u.PlaylistLevelType.SUBTITLE;default:return u.PlaylistLevelType.MAIN}}(n),b=c.default.parseLevelPlaylist(e.data,v,g,y,m);if(b.fragments.length){if(p===u.PlaylistContextType.MANIFEST){var k={attrs:new l.AttrList({}),bitrate:0,details:b,name:"",url:v};o.trigger(i.Events.MANIFEST_LOADED,{levels:[k],audioTracks:[],url:v,stats:t,networkDetails:s,sessionData:null})}if(t.parsing.end=performance.now(),b.needSidxRanges){var x,w=null===(x=b.fragments[0].initSegment)||void 0===x?void 0:x.url;this.load({url:w,isSidxRequest:!0,type:p,level:f,levelDetails:b,id:h,groupId:null,rangeStart:0,rangeEnd:2048,responseType:"arraybuffer",deliveryDirectives:null})}else n.levelDetails=b,this.handlePlaylistLoaded(e,t,n,s)}else o.trigger(i.Events.ERROR,{type:a.ErrorTypes.NETWORK_ERROR,details:a.ErrorDetails.LEVEL_EMPTY_ERROR,fatal:!1,url:v,reason:"no fragments found in level",level:"number"===typeof n.level?n.level:void 0})},t.handleSidxRequest=function(e,t){var n=new Uint8Array(e.data),r=(0,o.findBox)(n,["sidx"])[0];if(r){var i=(0,o.parseSegmentIndex)(r);if(i){var a=i.references,s=t.levelDetails;a.forEach((function(e,t){var r=e.info,i=s.fragments[t];if(0===i.byteRange.length&&i.setByteRange(String(1+r.end-r.start)+"@"+String(r.start)),i.initSegment){var a=(0,o.findBox)(n,["moov"])[0],c=a?a.length:null;i.initSegment.setByteRange(String(c)+"@0")}}))}}},t.handleManifestParsingError=function(e,t,n,r){this.hls.trigger(i.Events.ERROR,{type:a.ErrorTypes.NETWORK_ERROR,details:a.ErrorDetails.MANIFEST_PARSING_ERROR,fatal:t.type===u.PlaylistContextType.MANIFEST,url:e.url,reason:n,response:e,context:t,networkDetails:r})},t.handleNetworkError=function(e,t,n,r){void 0===n&&(n=!1),s.logger.warn("[playlist-loader]: A network "+(n?"timeout":"error")+" occurred while loading "+e.type+" level: "+e.level+" id: "+e.id+' group-id: "'+e.groupId+'"');var o=a.ErrorDetails.UNKNOWN,c=!1,l=this.getInternalLoader(e);switch(e.type){case u.PlaylistContextType.MANIFEST:o=n?a.ErrorDetails.MANIFEST_LOAD_TIMEOUT:a.ErrorDetails.MANIFEST_LOAD_ERROR,c=!0;break;case u.PlaylistContextType.LEVEL:o=n?a.ErrorDetails.LEVEL_LOAD_TIMEOUT:a.ErrorDetails.LEVEL_LOAD_ERROR,c=!1;break;case u.PlaylistContextType.AUDIO_TRACK:o=n?a.ErrorDetails.AUDIO_TRACK_LOAD_TIMEOUT:a.ErrorDetails.AUDIO_TRACK_LOAD_ERROR,c=!1;break;case u.PlaylistContextType.SUBTITLE_TRACK:o=n?a.ErrorDetails.SUBTITLE_TRACK_LOAD_TIMEOUT:a.ErrorDetails.SUBTITLE_LOAD_ERROR,c=!1}l&&this.resetInternalLoader(e.type);var d={type:a.ErrorTypes.NETWORK_ERROR,details:o,fatal:c,url:e.url,loader:l,context:e,networkDetails:t};r&&(d.response=r),this.hls.trigger(i.Events.ERROR,d)},t.handlePlaylistLoaded=function(e,t,n,r){var a=n.type,s=n.level,o=n.id,c=n.groupId,l=n.loader,d=n.levelDetails,h=n.deliveryDirectives;if(null!==d&&void 0!==d&&d.targetduration){if(l)switch(d.live&&(l.getCacheAge&&(d.ageHeader=l.getCacheAge()||0),l.getCacheAge&&!isNaN(d.ageHeader)||(d.ageHeader=0)),a){case u.PlaylistContextType.MANIFEST:case u.PlaylistContextType.LEVEL:this.hls.trigger(i.Events.LEVEL_LOADED,{details:d,level:s||0,id:o||0,stats:t,networkDetails:r,deliveryDirectives:h});break;case u.PlaylistContextType.AUDIO_TRACK:this.hls.trigger(i.Events.AUDIO_TRACK_LOADED,{details:d,id:o||0,groupId:c||"",stats:t,networkDetails:r,deliveryDirectives:h});break;case u.PlaylistContextType.SUBTITLE_TRACK:this.hls.trigger(i.Events.SUBTITLE_TRACK_LOADED,{details:d,id:o||0,groupId:c||"",stats:t,networkDetails:r,deliveryDirectives:h})}}else this.handleManifestParsingError(e,n,"invalid target duration",r)},e}()},"./src/polyfills/number.ts":function(e,t,n){"use strict";n.r(t),n.d(t,{MAX_SAFE_INTEGER:function(){return i},isFiniteNumber:function(){return r}});var r=Number.isFinite||function(e){return"number"===typeof e&&isFinite(e)},i=Number.MAX_SAFE_INTEGER||9007199254740991},"./src/remux/aac-helper.ts":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return r}});var r=function(){function e(){}return e.getSilentFrame=function(e,t){if("mp4a.40.2"===e){if(1===t)return new Uint8Array([0,200,0,128,35,128]);if(2===t)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(3===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(4===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(5===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(6===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224])}else{if(1===t)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(2===t)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(3===t)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94])}},e}()},"./src/remux/mp4-generator.ts":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return a}});var r=Math.pow(2,32)-1,i=function(){function e(){}return e.init=function(){var t;for(t in e.types={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],".mp3":[],mvex:[],mvhd:[],pasp:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[]},e.types)e.types.hasOwnProperty(t)&&(e.types[t]=[t.charCodeAt(0),t.charCodeAt(1),t.charCodeAt(2),t.charCodeAt(3)]);var n=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),r=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);e.HDLR_TYPES={video:n,audio:r};var i=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),a=new Uint8Array([0,0,0,0,0,0,0,0]);e.STTS=e.STSC=e.STCO=a,e.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),e.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),e.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),e.STSD=new Uint8Array([0,0,0,0,0,0,0,1]);var s=new Uint8Array([105,115,111,109]),o=new Uint8Array([97,118,99,49]),c=new Uint8Array([0,0,0,1]);e.FTYP=e.box(e.types.ftyp,s,c,s,o),e.DINF=e.box(e.types.dinf,e.box(e.types.dref,i))},e.box=function(e){for(var t=8,n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];for(var a=r.length,s=a;a--;)t+=r[a].byteLength;var o=new Uint8Array(t);for(o[0]=t>>24&255,o[1]=t>>16&255,o[2]=t>>8&255,o[3]=255&t,o.set(e,4),a=0,t=8;a<s;a++)o.set(r[a],t),t+=r[a].byteLength;return o},e.hdlr=function(t){return e.box(e.types.hdlr,e.HDLR_TYPES[t])},e.mdat=function(t){return e.box(e.types.mdat,t)},e.mdhd=function(t,n){n*=t;var i=Math.floor(n/(r+1)),a=Math.floor(n%(r+1));return e.box(e.types.mdhd,new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,t>>24&255,t>>16&255,t>>8&255,255&t,i>>24,i>>16&255,i>>8&255,255&i,a>>24,a>>16&255,a>>8&255,255&a,85,196,0,0]))},e.mdia=function(t){return e.box(e.types.mdia,e.mdhd(t.timescale,t.duration),e.hdlr(t.type),e.minf(t))},e.mfhd=function(t){return e.box(e.types.mfhd,new Uint8Array([0,0,0,0,t>>24,t>>16&255,t>>8&255,255&t]))},e.minf=function(t){return"audio"===t.type?e.box(e.types.minf,e.box(e.types.smhd,e.SMHD),e.DINF,e.stbl(t)):e.box(e.types.minf,e.box(e.types.vmhd,e.VMHD),e.DINF,e.stbl(t))},e.moof=function(t,n,r){return e.box(e.types.moof,e.mfhd(t),e.traf(r,n))},e.moov=function(t){for(var n=t.length,r=[];n--;)r[n]=e.trak(t[n]);return e.box.apply(null,[e.types.moov,e.mvhd(t[0].timescale,t[0].duration)].concat(r).concat(e.mvex(t)))},e.mvex=function(t){for(var n=t.length,r=[];n--;)r[n]=e.trex(t[n]);return e.box.apply(null,[e.types.mvex].concat(r))},e.mvhd=function(t,n){n*=t;var i=Math.floor(n/(r+1)),a=Math.floor(n%(r+1)),s=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,t>>24&255,t>>16&255,t>>8&255,255&t,i>>24,i>>16&255,i>>8&255,255&i,a>>24,a>>16&255,a>>8&255,255&a,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return e.box(e.types.mvhd,s)},e.sdtp=function(t){var n,r,i=t.samples||[],a=new Uint8Array(4+i.length);for(n=0;n<i.length;n++)r=i[n].flags,a[n+4]=r.dependsOn<<4|r.isDependedOn<<2|r.hasRedundancy;return e.box(e.types.sdtp,a)},e.stbl=function(t){return e.box(e.types.stbl,e.stsd(t),e.box(e.types.stts,e.STTS),e.box(e.types.stsc,e.STSC),e.box(e.types.stsz,e.STSZ),e.box(e.types.stco,e.STCO))},e.avc1=function(t){var n,r,i,a=[],s=[];for(n=0;n<t.sps.length;n++)i=(r=t.sps[n]).byteLength,a.push(i>>>8&255),a.push(255&i),a=a.concat(Array.prototype.slice.call(r));for(n=0;n<t.pps.length;n++)i=(r=t.pps[n]).byteLength,s.push(i>>>8&255),s.push(255&i),s=s.concat(Array.prototype.slice.call(r));var o=e.box(e.types.avcC,new Uint8Array([1,a[3],a[4],a[5],255,224|t.sps.length].concat(a).concat([t.pps.length]).concat(s))),c=t.width,u=t.height,l=t.pixelRatio[0],d=t.pixelRatio[1];return e.box(e.types.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,c>>8&255,255&c,u>>8&255,255&u,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),o,e.box(e.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),e.box(e.types.pasp,new Uint8Array([l>>24,l>>16&255,l>>8&255,255&l,d>>24,d>>16&255,d>>8&255,255&d])))},e.esds=function(e){var t=e.config.length;return new Uint8Array([0,0,0,0,3,23+t,0,1,0,4,15+t,64,21,0,0,0,0,0,0,0,0,0,0,0,5].concat([t]).concat(e.config).concat([6,1,2]))},e.mp4a=function(t){var n=t.samplerate;return e.box(e.types.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,t.channelCount,0,16,0,0,0,0,n>>8&255,255&n,0,0]),e.box(e.types.esds,e.esds(t)))},e.mp3=function(t){var n=t.samplerate;return e.box(e.types[".mp3"],new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,t.channelCount,0,16,0,0,0,0,n>>8&255,255&n,0,0]))},e.stsd=function(t){return"audio"===t.type?"mp3"===t.segmentCodec&&"mp3"===t.codec?e.box(e.types.stsd,e.STSD,e.mp3(t)):e.box(e.types.stsd,e.STSD,e.mp4a(t)):e.box(e.types.stsd,e.STSD,e.avc1(t))},e.tkhd=function(t){var n=t.id,i=t.duration*t.timescale,a=t.width,s=t.height,o=Math.floor(i/(r+1)),c=Math.floor(i%(r+1));return e.box(e.types.tkhd,new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,n>>24&255,n>>16&255,n>>8&255,255&n,0,0,0,0,o>>24,o>>16&255,o>>8&255,255&o,c>>24,c>>16&255,c>>8&255,255&c,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,a>>8&255,255&a,0,0,s>>8&255,255&s,0,0]))},e.traf=function(t,n){var i=e.sdtp(t),a=t.id,s=Math.floor(n/(r+1)),o=Math.floor(n%(r+1));return e.box(e.types.traf,e.box(e.types.tfhd,new Uint8Array([0,0,0,0,a>>24,a>>16&255,a>>8&255,255&a])),e.box(e.types.tfdt,new Uint8Array([1,0,0,0,s>>24,s>>16&255,s>>8&255,255&s,o>>24,o>>16&255,o>>8&255,255&o])),e.trun(t,i.length+16+20+8+16+8+8),i)},e.trak=function(t){return t.duration=t.duration||4294967295,e.box(e.types.trak,e.tkhd(t),e.mdia(t))},e.trex=function(t){var n=t.id;return e.box(e.types.trex,new Uint8Array([0,0,0,0,n>>24,n>>16&255,n>>8&255,255&n,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]))},e.trun=function(t,n){var r,i,a,s,o,c,u=t.samples||[],l=u.length,d=12+16*l,h=new Uint8Array(d);for(n+=8+d,h.set(["video"===t.type?1:0,0,15,1,l>>>24&255,l>>>16&255,l>>>8&255,255&l,n>>>24&255,n>>>16&255,n>>>8&255,255&n],0),r=0;r<l;r++)a=(i=u[r]).duration,s=i.size,o=i.flags,c=i.cts,h.set([a>>>24&255,a>>>16&255,a>>>8&255,255&a,s>>>24&255,s>>>16&255,s>>>8&255,255&s,o.isLeading<<2|o.dependsOn,o.isDependedOn<<6|o.hasRedundancy<<4|o.paddingValue<<1|o.isNonSync,61440&o.degradPrio,15&o.degradPrio,c>>>24&255,c>>>16&255,c>>>8&255,255&c],12+16*r);return e.box(e.types.trun,h)},e.initSegment=function(t){e.types||e.init();var n=e.moov(t),r=new Uint8Array(e.FTYP.byteLength+n.byteLength);return r.set(e.FTYP),r.set(n,e.FTYP.byteLength),r},e}();i.types=void 0,i.HDLR_TYPES=void 0,i.STTS=void 0,i.STSC=void 0,i.STCO=void 0,i.STSZ=void 0,i.VMHD=void 0,i.SMHD=void 0,i.STSD=void 0,i.FTYP=void 0,i.DINF=void 0;var a=i},"./src/remux/mp4-remuxer.ts":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return p},flushTextTrackMetadataCueSamples:function(){return m},flushTextTrackUserdataCueSamples:function(){return g},normalizePts:function(){return v}});var r=n("./src/polyfills/number.ts"),i=n("./src/remux/aac-helper.ts"),a=n("./src/remux/mp4-generator.ts"),s=n("./src/events.ts"),o=n("./src/errors.ts"),c=n("./src/utils/logger.ts"),u=n("./src/types/loader.ts"),l=n("./src/utils/timescale-conversion.ts");function d(){return d=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},d.apply(this,arguments)}var h=null,f=null,p=function(){function e(e,t,n,r){if(void 0===r&&(r=""),this.observer=void 0,this.config=void 0,this.typeSupported=void 0,this.ISGenerated=!1,this._initPTS=void 0,this._initDTS=void 0,this.nextAvcDts=null,this.nextAudioPts=null,this.videoSampleDuration=null,this.isAudioContiguous=!1,this.isVideoContiguous=!1,this.observer=e,this.config=t,this.typeSupported=n,this.ISGenerated=!1,null===h){var i=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);h=i?parseInt(i[1]):0}if(null===f){var a=navigator.userAgent.match(/Safari\/(\d+)/i);f=a?parseInt(a[1]):0}}var t=e.prototype;return t.destroy=function(){},t.resetTimeStamp=function(e){c.logger.log("[mp4-remuxer]: initPTS & initDTS reset"),this._initPTS=this._initDTS=e},t.resetNextTimestamp=function(){c.logger.log("[mp4-remuxer]: reset next timestamp"),this.isVideoContiguous=!1,this.isAudioContiguous=!1},t.resetInitSegment=function(){c.logger.log("[mp4-remuxer]: ISGenerated flag reset"),this.ISGenerated=!1},t.getVideoStartPts=function(e){var t=!1,n=e.reduce((function(e,n){var r=n.pts-e;return r<-4294967296?(t=!0,v(e,n.pts)):r>0?e:n.pts}),e[0].pts);return t&&c.logger.debug("PTS rollover detected"),n},t.remux=function(e,t,n,r,i,a,s,o){var l,d,h,f,p,y,b=i,k=i,x=e.pid>-1,w=t.pid>-1,T=t.samples.length,E=e.samples.length>0,_=s&&T>0||T>1;if((!x||E)&&(!w||_)||this.ISGenerated||s){this.ISGenerated||(h=this.generateIS(e,t,i));var S,A=this.isVideoContiguous,C=-1;if(_&&(C=function(e){for(var t=0;t<e.length;t++)if(e[t].key)return t;return-1}(t.samples),!A&&this.config.forceKeyFrameOnDiscontinuity))if(y=!0,C>0){c.logger.warn("[mp4-remuxer]: Dropped "+C+" out of "+T+" video samples due to a missing keyframe");var I=this.getVideoStartPts(t.samples);t.samples=t.samples.slice(C),t.dropped+=C,S=k+=(t.samples[0].pts-I)/t.inputTimeScale}else-1===C&&(c.logger.warn("[mp4-remuxer]: No keyframe found out of "+T+" video samples"),y=!1);if(this.ISGenerated){if(E&&_){var R=this.getVideoStartPts(t.samples),P=(v(e.samples[0].pts,R)-R)/t.inputTimeScale;b+=Math.max(0,P),k+=Math.max(0,-P)}if(E){if(e.samplerate||(c.logger.warn("[mp4-remuxer]: regenerate InitSegment as audio detected"),h=this.generateIS(e,t,i)),d=this.remuxAudio(e,b,this.isAudioContiguous,a,w||_||o===u.PlaylistLevelType.AUDIO?k:void 0),_){var D=d?d.endPTS-d.startPTS:0;t.inputTimeScale||(c.logger.warn("[mp4-remuxer]: regenerate InitSegment as video detected"),h=this.generateIS(e,t,i)),l=this.remuxVideo(t,k,A,D)}}else _&&(l=this.remuxVideo(t,k,A,0));l&&(l.firstKeyFrame=C,l.independent=-1!==C,l.firstKeyFramePTS=S)}}return this.ISGenerated&&(n.samples.length&&(p=m(n,i,this._initPTS,this._initDTS)),r.samples.length&&(f=g(r,i,this._initPTS))),{audio:d,video:l,initSegment:h,independent:y,text:f,id3:p}},t.generateIS=function(e,t,n){var i,s,o,c=e.samples,u=t.samples,l=this.typeSupported,d={},h=!(0,r.isFiniteNumber)(this._initPTS),f="audio/mp4";if(h&&(i=s=1/0),e.config&&c.length&&(e.timescale=e.samplerate,"mp3"===e.segmentCodec&&(l.mpeg?(f="audio/mpeg",e.codec=""):l.mp3&&(e.codec="mp3")),d.audio={id:"audio",container:f,codec:e.codec,initSegment:"mp3"===e.segmentCodec&&l.mpeg?new Uint8Array(0):a.default.initSegment([e]),metadata:{channelCount:e.channelCount}},h&&(o=e.inputTimeScale,i=s=c[0].pts-Math.round(o*n))),t.sps&&t.pps&&u.length&&(t.timescale=t.inputTimeScale,d.video={id:"main",container:"video/mp4",codec:t.codec,initSegment:a.default.initSegment([t]),metadata:{width:t.width,height:t.height}},h)){o=t.inputTimeScale;var p=this.getVideoStartPts(u),m=Math.round(o*n);s=Math.min(s,v(u[0].dts,p)-m),i=Math.min(i,p-m)}if(Object.keys(d).length)return this.ISGenerated=!0,h&&(this._initPTS=i,this._initDTS=s),{tracks:d,initPTS:i,timescale:o}},t.remuxVideo=function(e,t,n,r){var i,u,p=e.inputTimeScale,m=e.samples,g=[],b=m.length,k=this._initPTS,x=this.nextAvcDts,w=8,T=this.videoSampleDuration,E=Number.POSITIVE_INFINITY,_=Number.NEGATIVE_INFINITY,S=!1;n&&null!==x||(x=t*p-(m[0].pts-v(m[0].dts,m[0].pts)));for(var A=0;A<b;A++){var C=m[A];C.pts=v(C.pts-k,x),C.dts=v(C.dts-k,x),C.dts<m[A>0?A-1:A].dts&&(S=!0)}S&&m.sort((function(e,t){var n=e.dts-t.dts,r=e.pts-t.pts;return n||r})),i=m[0].dts;var I=(u=m[m.length-1].dts)-i,R=I?Math.round(I/(b-1)):T||e.inputTimeScale/30;if(n){var P=i-x,D=P>R,N=P<-1;if((D||N)&&(D?c.logger.warn("AVC: "+(0,l.toMsFromMpegTsClock)(P,!0)+" ms ("+P+"dts) hole between fragments detected, filling it"):c.logger.warn("AVC: "+(0,l.toMsFromMpegTsClock)(-P,!0)+" ms ("+P+"dts) overlapping between fragments detected"),!N||x>m[0].pts)){i=x;var O=m[0].pts-P;m[0].dts=i,m[0].pts=O,c.logger.log("Video: First PTS/DTS adjusted: "+(0,l.toMsFromMpegTsClock)(O,!0)+"/"+(0,l.toMsFromMpegTsClock)(i,!0)+", delta: "+(0,l.toMsFromMpegTsClock)(P,!0)+" ms")}}i=Math.max(0,i);for(var L=0,M=0,j=0;j<b;j++){for(var F=m[j],U=F.units,B=U.length,G=0,V=0;V<B;V++)G+=U[V].data.length;M+=G,L+=B,F.length=G,F.dts=Math.max(F.dts,i),E=Math.min(F.pts,E),_=Math.max(F.pts,_)}u=m[b-1].dts;var H,z=M+4*L+8;try{H=new Uint8Array(z)}catch(ke){return void this.observer.emit(s.Events.ERROR,s.Events.ERROR,{type:o.ErrorTypes.MUX_ERROR,details:o.ErrorDetails.REMUX_ALLOC_ERROR,fatal:!1,bytes:z,reason:"fail allocating video mdat "+z})}var W=new DataView(H.buffer);W.setUint32(0,z),H.set(a.default.types.mdat,4);for(var K=!1,q=Number.POSITIVE_INFINITY,Y=Number.POSITIVE_INFINITY,J=Number.NEGATIVE_INFINITY,Q=Number.NEGATIVE_INFINITY,X=0;X<b;X++){for(var Z=m[X],$=Z.units,ee=0,te=0,ne=$.length;te<ne;te++){var re=$[te],ie=re.data,ae=re.data.byteLength;W.setUint32(w,ae),w+=4,H.set(ie,w),w+=ae,ee+=4+ae}var se=void 0;if(X<b-1)T=m[X+1].dts-Z.dts,se=m[X+1].pts-Z.pts;else{var oe=this.config,ce=X>0?Z.dts-m[X-1].dts:R;if(se=X>0?Z.pts-m[X-1].pts:R,oe.stretchShortVideoTrack&&null!==this.nextAudioPts){var ue=Math.floor(oe.maxBufferHole*p),le=(r?E+r*p:this.nextAudioPts)-Z.pts;le>ue?((T=le-ce)<0?T=ce:K=!0,c.logger.log("[mp4-remuxer]: It is approximately "+le/90+" ms to the next segment; using duration "+T/90+" ms for the last video frame.")):T=ce}else T=ce}var de=Math.round(Z.pts-Z.dts);q=Math.min(q,T),J=Math.max(J,T),Y=Math.min(Y,se),Q=Math.max(Q,se),g.push(new y(Z.key,T,ee,de))}if(g.length)if(h){if(h<70){var he=g[0].flags;he.dependsOn=2,he.isNonSync=0}}else if(f&&Q-Y<J-q&&R/J<.025&&0===g[0].cts){c.logger.warn("Found irregular gaps in sample duration. Using PTS instead of DTS to determine MP4 sample duration.");for(var fe=i,pe=0,ve=g.length;pe<ve;pe++){var me=fe+g[pe].duration,ge=fe+g[pe].cts;if(pe<ve-1){var ye=me+g[pe+1].cts;g[pe].duration=ye-ge}else g[pe].duration=pe?g[pe-1].duration:R;g[pe].cts=0,fe=me}}console.assert(null!==T,"mp4SampleDuration must be computed"),T=K||!T?R:T,this.nextAvcDts=x=u+T,this.videoSampleDuration=T,this.isVideoContiguous=!0;var be={data1:a.default.moof(e.sequenceNumber++,i,d({},e,{samples:g})),data2:H,startPTS:E/p,endPTS:(_+T)/p,startDTS:i/p,endDTS:x/p,type:"video",hasAudio:!1,hasVideo:!0,nb:g.length,dropped:e.dropped};return e.samples=[],e.dropped=0,console.assert(H.length,"MDAT length must not be zero"),be},t.remuxAudio=function(e,t,n,r,u){var l=e.inputTimeScale,h=l/(e.samplerate?e.samplerate:l),f="aac"===e.segmentCodec?1024:1152,p=f*h,m=this._initPTS,g="mp3"===e.segmentCodec&&this.typeSupported.mpeg,b=[],k=void 0!==u,x=e.samples,w=g?0:8,T=this.nextAudioPts||-1,E=t*l;if(this.isAudioContiguous=n=n||x.length&&T>0&&(r&&Math.abs(E-T)<9e3||Math.abs(v(x[0].pts-m,E)-T)<20*p),x.forEach((function(e){e.pts=v(e.pts-m,E)})),!n||T<0){if(x=x.filter((function(e){return e.pts>=0})),!x.length)return;T=0===u?0:r&&!k?Math.max(0,E):x[0].pts}if("aac"===e.segmentCodec)for(var _=this.config.maxAudioFramesDrift,S=0,A=T;S<x.length;S++){var C=x[S],I=C.pts,R=I-A,P=Math.abs(1e3*R/l);if(R<=-_*p&&k)0===S&&(c.logger.warn("Audio frame @ "+(I/l).toFixed(3)+"s overlaps nextAudioPts by "+Math.round(1e3*R/l)+" ms."),this.nextAudioPts=T=A=I);else if(R>=_*p&&P<1e4&&k){var D=Math.round(R/p);(A=I-D*p)<0&&(D--,A+=p),0===S&&(this.nextAudioPts=T=A),c.logger.warn("[mp4-remuxer]: Injecting "+D+" audio frame @ "+(A/l).toFixed(3)+"s due to "+Math.round(1e3*R/l)+" ms gap.");for(var N=0;N<D;N++){var O=Math.max(A,0),L=i.default.getSilentFrame(e.manifestCodec||e.codec,e.channelCount);L||(c.logger.log("[mp4-remuxer]: Unable to get silent frame for given audio codec; duplicating last frame instead."),L=C.unit.subarray()),x.splice(S,0,{unit:L,pts:O}),A+=p,S++}}C.pts=A,A+=p}for(var M,j=null,F=null,U=0,B=x.length;B--;)U+=x[B].unit.byteLength;for(var G=0,V=x.length;G<V;G++){var H=x[G],z=H.unit,W=H.pts;if(null!==F)b[G-1].duration=Math.round((W-F)/h);else{if(n&&"aac"===e.segmentCodec&&(W=T),j=W,!(U>0))return;U+=w;try{M=new Uint8Array(U)}catch($){return void this.observer.emit(s.Events.ERROR,s.Events.ERROR,{type:o.ErrorTypes.MUX_ERROR,details:o.ErrorDetails.REMUX_ALLOC_ERROR,fatal:!1,bytes:U,reason:"fail allocating audio mdat "+U})}g||(new DataView(M.buffer).setUint32(0,U),M.set(a.default.types.mdat,4))}M.set(z,w);var K=z.byteLength;w+=K,b.push(new y(!0,f,K,0)),F=W}var q=b.length;if(q){var Y=b[b.length-1];this.nextAudioPts=T=F+h*Y.duration;var J=g?new Uint8Array(0):a.default.moof(e.sequenceNumber++,j/h,d({},e,{samples:b}));e.samples=[];var Q=j/l,X=T/l,Z={data1:J,data2:M,startPTS:Q,endPTS:X,startDTS:Q,endDTS:X,type:"audio",hasAudio:!0,hasVideo:!1,nb:q};return this.isAudioContiguous=!0,console.assert(M.length,"MDAT length must not be zero"),Z}},t.remuxEmptyAudio=function(e,t,n,r){var a=e.inputTimeScale,s=a/(e.samplerate?e.samplerate:a),o=this.nextAudioPts,u=(null!==o?o:r.startDTS*a)+this._initDTS,l=r.endDTS*a+this._initDTS,d=1024*s,h=Math.ceil((l-u)/d),f=i.default.getSilentFrame(e.manifestCodec||e.codec,e.channelCount);if(c.logger.warn("[mp4-remuxer]: remux empty Audio"),f){for(var p=[],v=0;v<h;v++){var m=u+v*d;p.push({unit:f,pts:m,dts:m})}return e.samples=p,this.remuxAudio(e,t,n,!1)}c.logger.trace("[mp4-remuxer]: Unable to remuxEmptyAudio since we were unable to get a silent frame for given audio codec")},e}();function v(e,t){var n;if(null===t)return e;for(n=t<e?-8589934592:8589934592;Math.abs(e-t)>4294967296;)e+=n;return e}function m(e,t,n,r){var i=e.samples.length;if(i){for(var a=e.inputTimeScale,s=0;s<i;s++){var o=e.samples[s];o.pts=v(o.pts-n,t*a)/a,o.dts=v(o.dts-r,t*a)/a}var c=e.samples;return e.samples=[],{samples:c}}}function g(e,t,n){var r=e.samples.length;if(r){for(var i=e.inputTimeScale,a=0;a<r;a++){var s=e.samples[a];s.pts=v(s.pts-n,t*i)/i}e.samples.sort((function(e,t){return e.pts-t.pts}));var o=e.samples;return e.samples=[],{samples:o}}}var y=function(e,t,n,r){this.size=void 0,this.duration=void 0,this.cts=void 0,this.flags=void 0,this.duration=t,this.size=n,this.cts=r,this.flags=new b(e)},b=function(e){this.isLeading=0,this.isDependedOn=0,this.hasRedundancy=0,this.degradPrio=0,this.dependsOn=1,this.isNonSync=1,this.dependsOn=e?2:1,this.isNonSync=e?0:1}},"./src/remux/passthrough-remuxer.ts":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return u}});var r=n("./src/polyfills/number.ts"),i=n("./src/remux/mp4-remuxer.ts"),a=n("./src/utils/mp4-tools.ts"),s=n("./src/loader/fragment.ts"),o=n("./src/utils/logger.ts");function c(e,t){var n=null===e||void 0===e?void 0:e.codec;return n&&n.length>4?n:"hvc1"===n||"hev1"===n?"hvc1.1.c.L120.90":"av01"===n?"av01.0.04M.08":"avc1"===n||t===s.ElementaryStreamTypes.VIDEO?"avc1.42e01e":"mp4a.40.5"}var u=function(){function e(){this.emitInitSegment=!1,this.audioCodec=void 0,this.videoCodec=void 0,this.initData=void 0,this.initPTS=void 0,this.initTracks=void 0,this.lastEndTime=null}var t=e.prototype;return t.destroy=function(){},t.resetTimeStamp=function(e){this.initPTS=e,this.lastEndTime=null},t.resetNextTimestamp=function(){this.lastEndTime=null},t.resetInitSegment=function(e,t,n){this.audioCodec=t,this.videoCodec=n,this.generateInitSegment(e),this.emitInitSegment=!0},t.generateInitSegment=function(e){var t=this.audioCodec,n=this.videoCodec;if(!e||!e.byteLength)return this.initTracks=void 0,void(this.initData=void 0);var r=this.initData=(0,a.parseInitSegment)(e);t||(t=c(r.audio,s.ElementaryStreamTypes.AUDIO)),n||(n=c(r.video,s.ElementaryStreamTypes.VIDEO));var i={};r.audio&&r.video?i.audiovideo={container:"video/mp4",codec:t+","+n,initSegment:e,id:"main"}:r.audio?i.audio={container:"audio/mp4",codec:t,initSegment:e,id:"audio"}:r.video?i.video={container:"video/mp4",codec:n,initSegment:e,id:"main"}:o.logger.warn("[passthrough-remuxer.ts]: initSegment does not contain moov or trak boxes."),this.initTracks=i},t.remux=function(e,t,n,s,c){var u,l=this.initPTS,d=this.lastEndTime,h={audio:void 0,video:void 0,text:s,id3:n,initSegment:void 0};(0,r.isFiniteNumber)(d)||(d=this.lastEndTime=c||0);var f=t.samples;if(!f||!f.length)return h;var p={initPTS:void 0,timescale:1},v=this.initData;if(v&&v.length||(this.generateInitSegment(f),v=this.initData),!v||!v.length)return o.logger.warn("[passthrough-remuxer.ts]: Failed to generate initSegment."),h;this.emitInitSegment&&(p.tracks=this.initTracks,this.emitInitSegment=!1);var m=(0,a.getStartDTS)(v,f);(0,r.isFiniteNumber)(l)||(this.initPTS=p.initPTS=l=m-c);var g=(0,a.getDuration)(f,v),y=e?m-l:d,b=y+g;(0,a.offsetStartDTS)(v,f,l),g>0?this.lastEndTime=b:(o.logger.warn("Duration parsed from mp4 should be greater than zero"),this.resetNextTimestamp());var k=!!v.audio,x=!!v.video,w="";k&&(w+="audio"),x&&(w+="video");var T={data1:f,startPTS:y,startDTS:y,endPTS:b,endDTS:b,type:w,hasAudio:k,hasVideo:x,nb:1,dropped:0};h.audio="audio"===T.type?T:void 0,h.video="audio"!==T.type?T:void 0,h.initSegment=p;var E=null!=(u=this.initPTS)?u:0;return h.id3=(0,i.flushTextTrackMetadataCueSamples)(n,c,E,E),s.samples.length&&(h.text=(0,i.flushTextTrackUserdataCueSamples)(s,c,E)),h},e}()},"./src/task-loop.ts":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return r}});var r=function(){function e(){this._boundTick=void 0,this._tickTimer=null,this._tickInterval=null,this._tickCallCount=0,this._boundTick=this.tick.bind(this)}var t=e.prototype;return t.destroy=function(){this.onHandlerDestroying(),this.onHandlerDestroyed()},t.onHandlerDestroying=function(){this.clearNextTick(),this.clearInterval()},t.onHandlerDestroyed=function(){},t.hasInterval=function(){return!!this._tickInterval},t.hasNextTick=function(){return!!this._tickTimer},t.setInterval=function(e){return!this._tickInterval&&(this._tickInterval=self.setInterval(this._boundTick,e),!0)},t.clearInterval=function(){return!!this._tickInterval&&(self.clearInterval(this._tickInterval),this._tickInterval=null,!0)},t.clearNextTick=function(){return!!this._tickTimer&&(self.clearTimeout(this._tickTimer),this._tickTimer=null,!0)},t.tick=function(){this._tickCallCount++,1===this._tickCallCount&&(this.doTick(),this._tickCallCount>1&&this.tickImmediate(),this._tickCallCount=0)},t.tickImmediate=function(){this.clearNextTick(),this._tickTimer=self.setTimeout(this._boundTick,0)},t.doTick=function(){},e}()},"./src/types/cmcd.ts":function(e,t,n){"use strict";n.r(t),n.d(t,{CMCDObjectType:function(){return r},CMCDStreamType:function(){return o},CMCDStreamingFormat:function(){return a},CMCDVersion:function(){return u}});var r,i,a,s,o,c,u=1;(i=r||(r={})).MANIFEST="m",i.AUDIO="a",i.VIDEO="v",i.MUXED="av",i.INIT="i",i.CAPTION="c",i.TIMED_TEXT="tt",i.KEY="k",i.OTHER="o",(s=a||(a={})).DASH="d",s.HLS="h",s.SMOOTH="s",s.OTHER="o",(c=o||(o={})).VOD="v",c.LIVE="l"},"./src/types/demuxer.ts":function(e,t,n){"use strict";var r,i;n.r(t),n.d(t,{MetadataSchema:function(){return r}}),(i=r||(r={})).audioId3="org.id3",i.dateRange="com.apple.quicktime.HLS",i.emsg="https://aomedia.org/emsg/ID3"},"./src/types/level.ts":function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var i,a;function s(e,t){var n=e.canSkipUntil,r=e.canSkipDateRanges,a=e.endSN;return n&&(void 0!==t?t-a:0)<n?r?i.v2:i.Yes:i.No}n.r(t),n.d(t,{HlsSkip:function(){return i},HlsUrlParameters:function(){return o},Level:function(){return c},getSkipValue:function(){return s}}),(a=i||(i={})).No="",a.Yes="YES",a.v2="v2";var o=function(){function e(e,t,n){this.msn=void 0,this.part=void 0,this.skip=void 0,this.msn=e,this.part=t,this.skip=n}return e.prototype.addDirectives=function(e){var t=new self.URL(e);return void 0!==this.msn&&t.searchParams.set("_HLS_msn",this.msn.toString()),void 0!==this.part&&t.searchParams.set("_HLS_part",this.part.toString()),this.skip&&t.searchParams.set("_HLS_skip",this.skip),t.toString()},e}(),c=function(){function e(e){this.attrs=void 0,this.audioCodec=void 0,this.bitrate=void 0,this.codecSet=void 0,this.height=void 0,this.id=void 0,this.name=void 0,this.videoCodec=void 0,this.width=void 0,this.unknownCodecs=void 0,this.audioGroupIds=void 0,this.details=void 0,this.fragmentError=0,this.loadError=0,this.loaded=void 0,this.realBitrate=0,this.textGroupIds=void 0,this.url=void 0,this._urlId=0,this.url=[e.url],this.attrs=e.attrs,this.bitrate=e.bitrate,e.details&&(this.details=e.details),this.id=e.id||0,this.name=e.name,this.width=e.width||0,this.height=e.height||0,this.audioCodec=e.audioCodec,this.videoCodec=e.videoCodec,this.unknownCodecs=e.unknownCodecs,this.codecSet=[e.videoCodec,e.audioCodec].filter((function(e){return e})).join(",").replace(/\.[^.,]+/g,"")}var t,n,i;return t=e,(n=[{key:"maxBitrate",get:function(){return Math.max(this.realBitrate,this.bitrate)}},{key:"uri",get:function(){return this.url[this._urlId]||""}},{key:"urlId",get:function(){return this._urlId},set:function(e){var t=e%this.url.length;this._urlId!==t&&(this.details=void 0,this._urlId=t)}}])&&r(t.prototype,n),i&&r(t,i),Object.defineProperty(t,"prototype",{writable:!1}),e}()},"./src/types/loader.ts":function(e,t,n){"use strict";var r,i,a,s;n.r(t),n.d(t,{PlaylistContextType:function(){return r},PlaylistLevelType:function(){return a}}),(i=r||(r={})).MANIFEST="manifest",i.LEVEL="level",i.AUDIO_TRACK="audioTrack",i.SUBTITLE_TRACK="subtitleTrack",(s=a||(a={})).MAIN="main",s.AUDIO="audio",s.SUBTITLE="subtitle"},"./src/types/transmuxer.ts":function(e,t,n){"use strict";n.r(t),n.d(t,{ChunkMetadata:function(){return r}});var r=function(e,t,n,r,i,a){void 0===r&&(r=0),void 0===i&&(i=-1),void 0===a&&(a=!1),this.level=void 0,this.sn=void 0,this.part=void 0,this.id=void 0,this.size=void 0,this.partial=void 0,this.transmuxing={start:0,executeStart:0,executeEnd:0,end:0},this.buffering={audio:{start:0,executeStart:0,executeEnd:0,end:0},video:{start:0,executeStart:0,executeEnd:0,end:0},audiovideo:{start:0,executeStart:0,executeEnd:0,end:0}},this.level=e,this.sn=t,this.id=n,this.size=r,this.part=i,this.partial=a}},"./src/utils/attr-list.ts":function(e,t,n){"use strict";n.r(t),n.d(t,{AttrList:function(){return a}});var r=/^(\d+)x(\d+)$/,i=/\s*(.+?)\s*=((?:\".*?\")|.*?)(?:,|$)/g,a=function(){function e(t){for(var n in"string"===typeof t&&(t=e.parseAttrList(t)),t)t.hasOwnProperty(n)&&(this[n]=t[n])}var t=e.prototype;return t.decimalInteger=function(e){var t=parseInt(this[e],10);return t>Number.MAX_SAFE_INTEGER?1/0:t},t.hexadecimalInteger=function(e){if(this[e]){var t=(this[e]||"0x").slice(2);t=(1&t.length?"0":"")+t;for(var n=new Uint8Array(t.length/2),r=0;r<t.length/2;r++)n[r]=parseInt(t.slice(2*r,2*r+2),16);return n}return null},t.hexadecimalIntegerAsNumber=function(e){var t=parseInt(this[e],16);return t>Number.MAX_SAFE_INTEGER?1/0:t},t.decimalFloatingPoint=function(e){return parseFloat(this[e])},t.optionalFloat=function(e,t){var n=this[e];return n?parseFloat(n):t},t.enumeratedString=function(e){return this[e]},t.bool=function(e){return"YES"===this[e]},t.decimalResolution=function(e){var t=r.exec(this[e]);if(null!==t)return{width:parseInt(t[1],10),height:parseInt(t[2],10)}},e.parseAttrList=function(e){var t,n={};for(i.lastIndex=0;null!==(t=i.exec(e));){var r=t[2];0===r.indexOf('"')&&r.lastIndexOf('"')===r.length-1&&(r=r.slice(1,-1)),n[t[1]]=r}return n},e}()},"./src/utils/binary-search.ts":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return r}});var r={search:function(e,t){for(var n=0,r=e.length-1,i=null,a=null;n<=r;){var s=t(a=e[i=(n+r)/2|0]);if(s>0)n=i+1;else{if(!(s<0))return a;r=i-1}}return null}}},"./src/utils/buffer-helper.ts":function(e,t,n){"use strict";n.r(t),n.d(t,{BufferHelper:function(){return a}});var r=n("./src/utils/logger.ts"),i={length:0,start:function(){return 0},end:function(){return 0}},a=function(){function e(){}return e.isBuffered=function(t,n){try{if(t)for(var r=e.getBuffered(t),i=0;i<r.length;i++)if(n>=r.start(i)&&n<=r.end(i))return!0}catch(a){}return!1},e.bufferInfo=function(t,n,r){try{if(t){var i,a=e.getBuffered(t),s=[];for(i=0;i<a.length;i++)s.push({start:a.start(i),end:a.end(i)});return this.bufferedInfo(s,n,r)}}catch(o){}return{len:0,start:n,end:n,nextStart:void 0}},e.bufferedInfo=function(e,t,n){t=Math.max(0,t),e.sort((function(e,t){var n=e.start-t.start;return n||t.end-e.end}));var r=[];if(n)for(var i=0;i<e.length;i++){var a=r.length;if(a){var s=r[a-1].end;e[i].start-s<n?e[i].end>s&&(r[a-1].end=e[i].end):r.push(e[i])}else r.push(e[i])}else r=e;for(var o,c=0,u=t,l=t,d=0;d<r.length;d++){var h=r[d].start,f=r[d].end;if(t+n>=h&&t<f)u=h,c=(l=f)-t;else if(t+n<h){o=h;break}}return{len:c,start:u||0,end:l||0,nextStart:o}},e.getBuffered=function(e){try{return e.buffered}catch(t){return r.logger.log("failed to get media.buffered",t),i}},e}()},"./src/utils/cea-608-parser.ts":function(e,t,n){"use strict";n.r(t),n.d(t,{CaptionScreen:function(){return b},Row:function(){return y},default:function(){return T}});var r,i=n("./src/utils/logger.ts"),a={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},s=function(e){var t=e;return a.hasOwnProperty(e)&&(t=a[e]),String.fromCharCode(t)},o=15,c=100,u={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},l={17:2,18:4,21:6,22:8,23:10,19:13,20:15},d={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14},h={25:2,26:4,29:6,30:8,31:10,27:13,28:15},f=["white","green","blue","cyan","red","yellow","magenta","black","transparent"];!function(e){e[e.ERROR=0]="ERROR",e[e.TEXT=1]="TEXT",e[e.WARNING=2]="WARNING",e[e.INFO=2]="INFO",e[e.DEBUG=3]="DEBUG",e[e.DATA=3]="DATA"}(r||(r={}));var p=function(){function e(){this.time=null,this.verboseLevel=r.ERROR}return e.prototype.log=function(e,t){this.verboseLevel>=e&&i.logger.log(this.time+" ["+e+"] "+t)},e}(),v=function(e){for(var t=[],n=0;n<e.length;n++)t.push(e[n].toString(16));return t},m=function(){function e(e,t,n,r,i){this.foreground=void 0,this.underline=void 0,this.italics=void 0,this.background=void 0,this.flash=void 0,this.foreground=e||"white",this.underline=t||!1,this.italics=n||!1,this.background=r||"black",this.flash=i||!1}var t=e.prototype;return t.reset=function(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1},t.setStyles=function(e){for(var t=["foreground","underline","italics","background","flash"],n=0;n<t.length;n++){var r=t[n];e.hasOwnProperty(r)&&(this[r]=e[r])}},t.isDefault=function(){return"white"===this.foreground&&!this.underline&&!this.italics&&"black"===this.background&&!this.flash},t.equals=function(e){return this.foreground===e.foreground&&this.underline===e.underline&&this.italics===e.italics&&this.background===e.background&&this.flash===e.flash},t.copy=function(e){this.foreground=e.foreground,this.underline=e.underline,this.italics=e.italics,this.background=e.background,this.flash=e.flash},t.toString=function(){return"color="+this.foreground+", underline="+this.underline+", italics="+this.italics+", background="+this.background+", flash="+this.flash},e}(),g=function(){function e(e,t,n,r,i,a){this.uchar=void 0,this.penState=void 0,this.uchar=e||" ",this.penState=new m(t,n,r,i,a)}var t=e.prototype;return t.reset=function(){this.uchar=" ",this.penState.reset()},t.setChar=function(e,t){this.uchar=e,this.penState.copy(t)},t.setPenState=function(e){this.penState.copy(e)},t.equals=function(e){return this.uchar===e.uchar&&this.penState.equals(e.penState)},t.copy=function(e){this.uchar=e.uchar,this.penState.copy(e.penState)},t.isEmpty=function(){return" "===this.uchar&&this.penState.isDefault()},e}(),y=function(){function e(e){this.chars=void 0,this.pos=void 0,this.currPenState=void 0,this.cueStartTime=void 0,this.logger=void 0,this.chars=[];for(var t=0;t<c;t++)this.chars.push(new g);this.logger=e,this.pos=0,this.currPenState=new m}var t=e.prototype;return t.equals=function(e){for(var t=!0,n=0;n<c;n++)if(!this.chars[n].equals(e.chars[n])){t=!1;break}return t},t.copy=function(e){for(var t=0;t<c;t++)this.chars[t].copy(e.chars[t])},t.isEmpty=function(){for(var e=!0,t=0;t<c;t++)if(!this.chars[t].isEmpty()){e=!1;break}return e},t.setCursor=function(e){this.pos!==e&&(this.pos=e),this.pos<0?(this.logger.log(r.DEBUG,"Negative cursor position "+this.pos),this.pos=0):this.pos>c&&(this.logger.log(r.DEBUG,"Too large cursor position "+this.pos),this.pos=c)},t.moveCursor=function(e){var t=this.pos+e;if(e>1)for(var n=this.pos+1;n<t+1;n++)this.chars[n].setPenState(this.currPenState);this.setCursor(t)},t.backSpace=function(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState)},t.insertChar=function(e){e>=144&&this.backSpace();var t=s(e);this.pos>=c?this.logger.log(r.ERROR,"Cannot insert "+e.toString(16)+" ("+t+") at position "+this.pos+". Skipping it!"):(this.chars[this.pos].setChar(t,this.currPenState),this.moveCursor(1))},t.clearFromPos=function(e){var t;for(t=e;t<c;t++)this.chars[t].reset()},t.clear=function(){this.clearFromPos(0),this.pos=0,this.currPenState.reset()},t.clearToEndOfRow=function(){this.clearFromPos(this.pos)},t.getTextString=function(){for(var e=[],t=!0,n=0;n<c;n++){var r=this.chars[n].uchar;" "!==r&&(t=!1),e.push(r)}return t?"":e.join("")},t.setPenStyles=function(e){this.currPenState.setStyles(e),this.chars[this.pos].setPenState(this.currPenState)},e}(),b=function(){function e(e){this.rows=void 0,this.currRow=void 0,this.nrRollUpRows=void 0,this.lastOutputScreen=void 0,this.logger=void 0,this.rows=[];for(var t=0;t<o;t++)this.rows.push(new y(e));this.logger=e,this.currRow=14,this.nrRollUpRows=null,this.lastOutputScreen=null,this.reset()}var t=e.prototype;return t.reset=function(){for(var e=0;e<o;e++)this.rows[e].clear();this.currRow=14},t.equals=function(e){for(var t=!0,n=0;n<o;n++)if(!this.rows[n].equals(e.rows[n])){t=!1;break}return t},t.copy=function(e){for(var t=0;t<o;t++)this.rows[t].copy(e.rows[t])},t.isEmpty=function(){for(var e=!0,t=0;t<o;t++)if(!this.rows[t].isEmpty()){e=!1;break}return e},t.backSpace=function(){this.rows[this.currRow].backSpace()},t.clearToEndOfRow=function(){this.rows[this.currRow].clearToEndOfRow()},t.insertChar=function(e){this.rows[this.currRow].insertChar(e)},t.setPen=function(e){this.rows[this.currRow].setPenStyles(e)},t.moveCursor=function(e){this.rows[this.currRow].moveCursor(e)},t.setCursor=function(e){this.logger.log(r.INFO,"setCursor: "+e),this.rows[this.currRow].setCursor(e)},t.setPAC=function(e){this.logger.log(r.INFO,"pacData = "+JSON.stringify(e));var t=e.row-1;if(this.nrRollUpRows&&t<this.nrRollUpRows-1&&(t=this.nrRollUpRows-1),this.nrRollUpRows&&this.currRow!==t){for(var n=0;n<o;n++)this.rows[n].clear();var i=this.currRow+1-this.nrRollUpRows,a=this.lastOutputScreen;if(a){var s=a.rows[i].cueStartTime,c=this.logger.time;if(s&&null!==c&&s<c)for(var u=0;u<this.nrRollUpRows;u++)this.rows[t-this.nrRollUpRows+u+1].copy(a.rows[i+u])}}this.currRow=t;var l=this.rows[this.currRow];if(null!==e.indent){var d=e.indent,h=Math.max(d-1,0);l.setCursor(e.indent),e.color=l.chars[h].penState.foreground}var f={foreground:e.color,underline:e.underline,italics:e.italics,background:"black",flash:!1};this.setPen(f)},t.setBkgData=function(e){this.logger.log(r.INFO,"bkgData = "+JSON.stringify(e)),this.backSpace(),this.setPen(e),this.insertChar(32)},t.setRollUpRows=function(e){this.nrRollUpRows=e},t.rollUp=function(){if(null!==this.nrRollUpRows){this.logger.log(r.TEXT,this.getDisplayText());var e=this.currRow+1-this.nrRollUpRows,t=this.rows.splice(e,1)[0];t.clear(),this.rows.splice(this.currRow,0,t),this.logger.log(r.INFO,"Rolling up")}else this.logger.log(r.DEBUG,"roll_up but nrRollUpRows not set yet")},t.getDisplayText=function(e){e=e||!1;for(var t=[],n="",r=-1,i=0;i<o;i++){var a=this.rows[i].getTextString();a&&(r=i+1,e?t.push("Row "+r+": '"+a+"'"):t.push(a.trim()))}return t.length>0&&(n=e?"["+t.join(" | ")+"]":t.join("\n")),n},t.getTextAndFormat=function(){return this.rows},e}(),k=function(){function e(e,t,n){this.chNr=void 0,this.outputFilter=void 0,this.mode=void 0,this.verbose=void 0,this.displayedMemory=void 0,this.nonDisplayedMemory=void 0,this.lastOutputScreen=void 0,this.currRollUpRow=void 0,this.writeScreen=void 0,this.cueStartTime=void 0,this.logger=void 0,this.chNr=e,this.outputFilter=t,this.mode=null,this.verbose=0,this.displayedMemory=new b(n),this.nonDisplayedMemory=new b(n),this.lastOutputScreen=new b(n),this.currRollUpRow=this.displayedMemory.rows[14],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null,this.logger=n}var t=e.prototype;return t.reset=function(){this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),this.outputFilter.reset(),this.currRollUpRow=this.displayedMemory.rows[14],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null},t.getHandler=function(){return this.outputFilter},t.setHandler=function(e){this.outputFilter=e},t.setPAC=function(e){this.writeScreen.setPAC(e)},t.setBkgData=function(e){this.writeScreen.setBkgData(e)},t.setMode=function(e){e!==this.mode&&(this.mode=e,this.logger.log(r.INFO,"MODE="+e),"MODE_POP-ON"===this.mode?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset()),"MODE_ROLL-UP"!==this.mode&&(this.displayedMemory.nrRollUpRows=null,this.nonDisplayedMemory.nrRollUpRows=null),this.mode=e)},t.insertChars=function(e){for(var t=0;t<e.length;t++)this.writeScreen.insertChar(e[t]);var n=this.writeScreen===this.displayedMemory?"DISP":"NON_DISP";this.logger.log(r.INFO,n+": "+this.writeScreen.getDisplayText(!0)),"MODE_PAINT-ON"!==this.mode&&"MODE_ROLL-UP"!==this.mode||(this.logger.log(r.TEXT,"DISPLAYED: "+this.displayedMemory.getDisplayText(!0)),this.outputDataUpdate())},t.ccRCL=function(){this.logger.log(r.INFO,"RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON")},t.ccBS=function(){this.logger.log(r.INFO,"BS - BackSpace"),"MODE_TEXT"!==this.mode&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory&&this.outputDataUpdate())},t.ccAOF=function(){},t.ccAON=function(){},t.ccDER=function(){this.logger.log(r.INFO,"DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()},t.ccRU=function(e){this.logger.log(r.INFO,"RU("+e+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(e)},t.ccFON=function(){this.logger.log(r.INFO,"FON - Flash On"),this.writeScreen.setPen({flash:!0})},t.ccRDC=function(){this.logger.log(r.INFO,"RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")},t.ccTR=function(){this.logger.log(r.INFO,"TR"),this.setMode("MODE_TEXT")},t.ccRTD=function(){this.logger.log(r.INFO,"RTD"),this.setMode("MODE_TEXT")},t.ccEDM=function(){this.logger.log(r.INFO,"EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate(!0)},t.ccCR=function(){this.logger.log(r.INFO,"CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate(!0)},t.ccENM=function(){this.logger.log(r.INFO,"ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset()},t.ccEOC=function(){if(this.logger.log(r.INFO,"EOC - End Of Caption"),"MODE_POP-ON"===this.mode){var e=this.displayedMemory;this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=e,this.writeScreen=this.nonDisplayedMemory,this.logger.log(r.TEXT,"DISP: "+this.displayedMemory.getDisplayText())}this.outputDataUpdate(!0)},t.ccTO=function(e){this.logger.log(r.INFO,"TO("+e+") - Tab Offset"),this.writeScreen.moveCursor(e)},t.ccMIDROW=function(e){var t={flash:!1};if(t.underline=e%2===1,t.italics=e>=46,t.italics)t.foreground="white";else{var n=Math.floor(e/2)-16;t.foreground=["white","green","blue","cyan","red","yellow","magenta"][n]}this.logger.log(r.INFO,"MIDROW: "+JSON.stringify(t)),this.writeScreen.setPen(t)},t.outputDataUpdate=function(e){void 0===e&&(e=!1);var t=this.logger.time;null!==t&&this.outputFilter&&(null!==this.cueStartTime||this.displayedMemory.isEmpty()?this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue(this.cueStartTime,t,this.lastOutputScreen),e&&this.outputFilter.dispatchCue&&this.outputFilter.dispatchCue(),this.cueStartTime=this.displayedMemory.isEmpty()?null:t):this.cueStartTime=t,this.lastOutputScreen.copy(this.displayedMemory))},t.cueSplitAtTime=function(e){this.outputFilter&&(this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,e,this.displayedMemory),this.cueStartTime=e))},e}();function x(e,t,n){n.a=e,n.b=t}function w(e,t,n){return n.a===e&&n.b===t}var T=function(){function e(e,t,n){this.channels=void 0,this.currentChannel=0,this.cmdHistory=void 0,this.logger=void 0;var r=new p;this.channels=[null,new k(e,t,r),new k(e+1,n,r)],this.cmdHistory={a:null,b:null},this.logger=r}var t=e.prototype;return t.getHandler=function(e){return this.channels[e].getHandler()},t.setHandler=function(e,t){this.channels[e].setHandler(t)},t.addData=function(e,t){var n,i,a,s=!1;this.logger.time=e;for(var o=0;o<t.length;o+=2)if(i=127&t[o],a=127&t[o+1],0!==i||0!==a){if(this.logger.log(r.DATA,"["+v([t[o],t[o+1]])+"] -> ("+v([i,a])+")"),(n=this.parseCmd(i,a))||(n=this.parseMidrow(i,a)),n||(n=this.parsePAC(i,a)),n||(n=this.parseBackgroundAttributes(i,a)),!n&&(s=this.parseChars(i,a))){var c=this.currentChannel;c&&c>0?this.channels[c].insertChars(s):this.logger.log(r.WARNING,"No channel found yet. TEXT-MODE?")}n||s||this.logger.log(r.WARNING,"Couldn't parse cleaned data "+v([i,a])+" orig: "+v([t[o],t[o+1]]))}},t.parseCmd=function(e,t){var n=this.cmdHistory;if(!((20===e||28===e||21===e||29===e)&&t>=32&&t<=47)&&!((23===e||31===e)&&t>=33&&t<=35))return!1;if(w(e,t,n))return x(null,null,n),this.logger.log(r.DEBUG,"Repeated command ("+v([e,t])+") is dropped"),!0;var i=20===e||21===e||23===e?1:2,a=this.channels[i];return 20===e||21===e||28===e||29===e?32===t?a.ccRCL():33===t?a.ccBS():34===t?a.ccAOF():35===t?a.ccAON():36===t?a.ccDER():37===t?a.ccRU(2):38===t?a.ccRU(3):39===t?a.ccRU(4):40===t?a.ccFON():41===t?a.ccRDC():42===t?a.ccTR():43===t?a.ccRTD():44===t?a.ccEDM():45===t?a.ccCR():46===t?a.ccENM():47===t&&a.ccEOC():a.ccTO(t-32),x(e,t,n),this.currentChannel=i,!0},t.parseMidrow=function(e,t){var n=0;if((17===e||25===e)&&t>=32&&t<=47){if((n=17===e?1:2)!==this.currentChannel)return this.logger.log(r.ERROR,"Mismatch channel in midrow parsing"),!1;var i=this.channels[n];return!!i&&(i.ccMIDROW(t),this.logger.log(r.DEBUG,"MIDROW ("+v([e,t])+")"),!0)}return!1},t.parsePAC=function(e,t){var n,r=this.cmdHistory;if(!((e>=17&&e<=23||e>=25&&e<=31)&&t>=64&&t<=127)&&!((16===e||24===e)&&t>=64&&t<=95))return!1;if(w(e,t,r))return x(null,null,r),!0;var i=e<=23?1:2;n=t>=64&&t<=95?1===i?u[e]:d[e]:1===i?l[e]:h[e];var a=this.channels[i];return!!a&&(a.setPAC(this.interpretPAC(n,t)),x(e,t,r),this.currentChannel=i,!0)},t.interpretPAC=function(e,t){var n,r={color:null,italics:!1,indent:null,underline:!1,row:e};return n=t>95?t-96:t-64,r.underline=1===(1&n),n<=13?r.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(n/2)]:n<=15?(r.italics=!0,r.color="white"):r.indent=4*Math.floor((n-16)/2),r},t.parseChars=function(e,t){var n,i,a=null,o=null;if(e>=25?(n=2,o=e-8):(n=1,o=e),o>=17&&o<=19?(i=17===o?t+80:18===o?t+112:t+144,this.logger.log(r.INFO,"Special char '"+s(i)+"' in channel "+n),a=[i]):e>=32&&e<=127&&(a=0===t?[e]:[e,t]),a){var c=v(a);this.logger.log(r.DEBUG,"Char codes =  "+c.join(",")),x(e,t,this.cmdHistory)}return a},t.parseBackgroundAttributes=function(e,t){var n;if(!((16===e||24===e)&&t>=32&&t<=47)&&!((23===e||31===e)&&t>=45&&t<=47))return!1;var r={};16===e||24===e?(n=Math.floor((t-32)/2),r.background=f[n],t%2===1&&(r.background=r.background+"_semi")):45===t?r.background="transparent":(r.foreground="black",47===t&&(r.underline=!0));var i=e<=23?1:2;return this.channels[i].setBkgData(r),x(e,t,this.cmdHistory),!0},t.reset=function(){for(var e=0;e<Object.keys(this.channels).length;e++){var t=this.channels[e];t&&t.reset()}this.cmdHistory={a:null,b:null}},t.cueSplitAtTime=function(e){for(var t=0;t<this.channels.length;t++){var n=this.channels[t];n&&n.cueSplitAtTime(e)}},e}()},"./src/utils/codecs.ts":function(e,t,n){"use strict";n.r(t),n.d(t,{isCodecSupportedInMp4:function(){return a},isCodecType:function(){return i}});var r={audio:{a3ds:!0,"ac-3":!0,"ac-4":!0,alac:!0,alaw:!0,dra1:!0,"dts+":!0,"dts-":!0,dtsc:!0,dtse:!0,dtsh:!0,"ec-3":!0,enca:!0,g719:!0,g726:!0,m4ae:!0,mha1:!0,mha2:!0,mhm1:!0,mhm2:!0,mlpa:!0,mp4a:!0,"raw ":!0,Opus:!0,opus:!0,samr:!0,sawb:!0,sawp:!0,sevc:!0,sqcp:!0,ssmv:!0,twos:!0,ulaw:!0},video:{avc1:!0,avc2:!0,avc3:!0,avc4:!0,avcp:!0,av01:!0,drac:!0,dva1:!0,dvav:!0,dvh1:!0,dvhe:!0,encv:!0,hev1:!0,hvc1:!0,mjp2:!0,mp4v:!0,mvc1:!0,mvc2:!0,mvc3:!0,mvc4:!0,resv:!0,rv60:!0,s263:!0,svc1:!0,svc2:!0,"vc-1":!0,vp08:!0,vp09:!0},text:{stpp:!0,wvtt:!0}};function i(e,t){var n=r[t];return!!n&&!0===n[e.slice(0,4)]}function a(e,t){return MediaSource.isTypeSupported((t||"video")+'/mp4;codecs="'+e+'"')}},"./src/utils/cues.ts":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return o}});var r=n("./src/utils/vttparser.ts"),i=n("./src/utils/webvtt-parser.ts"),a=n("./src/utils/texttrack-utils.ts"),s=/\s/,o={newCue:function(e,t,n,o){for(var c,u,l,d,h,f=[],p=self.VTTCue||self.TextTrackCue,v=0;v<o.rows.length;v++)if(l=!0,d=0,h="",!(c=o.rows[v]).isEmpty()){for(var m=0;m<c.chars.length;m++)s.test(c.chars[m].uchar)&&l?d++:(h+=c.chars[m].uchar,l=!1);c.cueStartTime=t,t===n&&(n+=1e-4),d>=16?d--:d++;var g=(0,r.fixLineBreaks)(h.trim()),y=(0,i.generateCueId)(t,n,g);e&&e.cues&&e.cues.getCueById(y)||((u=new p(t,n,g)).id=y,u.line=v+1,u.align="left",u.position=10+Math.min(80,10*Math.floor(8*d/32)),f.push(u))}return e&&f.length&&(f.sort((function(e,t){return"auto"===e.line||"auto"===t.line?0:e.line>8&&t.line>8?t.line-e.line:e.line-t.line})),f.forEach((function(t){return(0,a.addCueToTrack)(e,t)}))),f}}},"./src/utils/discontinuities.ts":function(e,t,n){"use strict";n.r(t),n.d(t,{adjustSlidingStart:function(){return l},alignMediaPlaylistByPDT:function(){return f},alignPDT:function(){return h},alignStream:function(){return d},findDiscontinuousReferenceFrag:function(){return c},findFirstFragWithCC:function(){return s},shouldAlignOnDiscontinuities:function(){return o}});var r=n("./src/polyfills/number.ts"),i=n("./src/utils/logger.ts"),a=n("./src/controller/level-helper.ts");function s(e,t){for(var n=null,r=0,i=e.length;r<i;r++){var a=e[r];if(a&&a.cc===t){n=a;break}}return n}function o(e,t,n){return!(!t.details||!(n.endCC>n.startCC||e&&e.cc<n.startCC))}function c(e,t,n){void 0===n&&(n=0);var r=e.fragments,a=t.fragments;if(a.length&&r.length){var o=s(r,a[0].cc);if(o&&(!o||o.startPTS))return o;i.logger.log("No frag in previous level to align on")}else i.logger.log("No fragments to align")}function u(e,t){if(e){var n=e.start+t;e.start=e.startPTS=n,e.endPTS=n+e.duration}}function l(e,t){for(var n=t.fragments,r=0,i=n.length;r<i;r++)u(n[r],e);t.fragmentHint&&u(t.fragmentHint,e),t.alignedSliding=!0}function d(e,t,n){t&&(function(e,t,n){if(o(e,n,t)){var a=c(n.details,t);a&&(0,r.isFiniteNumber)(a.start)&&(i.logger.log("Adjusting PTS using last level due to CC increase within current level "+t.url),l(a.start,t))}}(e,n,t),!n.alignedSliding&&t.details&&h(n,t.details),n.alignedSliding||!t.details||n.skippedSegments||(0,a.adjustSliding)(t.details,n))}function h(e,t){if(t.fragments.length&&e.hasProgramDateTime&&t.hasProgramDateTime){var n=t.fragments[0].programDateTime,a=e.fragments[0].programDateTime,s=(a-n)/1e3+t.fragments[0].start;s&&(0,r.isFiniteNumber)(s)&&(i.logger.log("Adjusting PTS using programDateTime delta "+(a-n)+"ms, sliding:"+s.toFixed(3)+" "+e.url+" "),l(s,e))}}function f(e,t){if(e.hasProgramDateTime&&t.hasProgramDateTime){var n=e.fragments,r=t.fragments;if(n.length&&r.length){var i=r[Math.round(r.length/2)-1],a=s(n,i.cc)||n[Math.round(n.length/2)-1],o=i.programDateTime,c=a.programDateTime;null!==o&&null!==c&&l((c-o)/1e3-(a.start-i.start),e)}}}},"./src/utils/ewma-bandwidth-estimator.ts":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return i}});var r=n("./src/utils/ewma.ts"),i=function(){function e(e,t,n){this.defaultEstimate_=void 0,this.minWeight_=void 0,this.minDelayMs_=void 0,this.slow_=void 0,this.fast_=void 0,this.defaultEstimate_=n,this.minWeight_=.001,this.minDelayMs_=50,this.slow_=new r.default(e),this.fast_=new r.default(t)}var t=e.prototype;return t.update=function(e,t){var n=this.slow_,i=this.fast_;this.slow_.halfLife!==e&&(this.slow_=new r.default(e,n.getEstimate(),n.getTotalWeight())),this.fast_.halfLife!==t&&(this.fast_=new r.default(t,i.getEstimate(),i.getTotalWeight()))},t.sample=function(e,t){var n=(e=Math.max(e,this.minDelayMs_))/1e3,r=8*t/n;this.fast_.sample(n,r),this.slow_.sample(n,r)},t.canEstimate=function(){var e=this.fast_;return e&&e.getTotalWeight()>=this.minWeight_},t.getEstimate=function(){return this.canEstimate()?Math.min(this.fast_.getEstimate(),this.slow_.getEstimate()):this.defaultEstimate_},t.destroy=function(){},e}()},"./src/utils/ewma.ts":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return r}});var r=function(){function e(e,t,n){void 0===t&&(t=0),void 0===n&&(n=0),this.halfLife=void 0,this.alpha_=void 0,this.estimate_=void 0,this.totalWeight_=void 0,this.halfLife=e,this.alpha_=e?Math.exp(Math.log(.5)/e):0,this.estimate_=t,this.totalWeight_=n}var t=e.prototype;return t.sample=function(e,t){var n=Math.pow(this.alpha_,e);this.estimate_=t*(1-n)+n*this.estimate_,this.totalWeight_+=e},t.getTotalWeight=function(){return this.totalWeight_},t.getEstimate=function(){if(this.alpha_){var e=1-Math.pow(this.alpha_,this.totalWeight_);if(e)return this.estimate_/e}return this.estimate_},e}()},"./src/utils/fetch-loader.ts":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return m},fetchSupported:function(){return h}});var r=n("./src/polyfills/number.ts"),i=n("./src/loader/load-stats.ts"),a=n("./src/demux/chunk-cache.ts");function s(e){var t="function"===typeof Map?new Map:void 0;return s=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return o(e,arguments,l(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),u(r,e)},s(e)}function o(e,t,n){return o=c()?Reflect.construct.bind():function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&u(i,n.prototype),i},o.apply(null,arguments)}function c(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function u(e,t){return u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},u(e,t)}function l(e){return l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},l(e)}function d(){return d=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},d.apply(this,arguments)}function h(){if(self.fetch&&self.AbortController&&self.ReadableStream&&self.Request)try{return new self.ReadableStream({}),!0}catch(e){}return!1}var f=function(){function e(e){this.fetchSetup=void 0,this.requestTimeout=void 0,this.request=void 0,this.response=void 0,this.controller=void 0,this.context=void 0,this.config=null,this.callbacks=null,this.stats=void 0,this.loader=null,this.fetchSetup=e.fetchSetup||p,this.controller=new self.AbortController,this.stats=new i.LoadStats}var t=e.prototype;return t.destroy=function(){this.loader=this.callbacks=null,this.abortInternal()},t.abortInternal=function(){var e=this.response;e&&e.ok||(this.stats.aborted=!0,this.controller.abort())},t.abort=function(){var e;this.abortInternal(),null!==(e=this.callbacks)&&void 0!==e&&e.onAbort&&this.callbacks.onAbort(this.stats,this.context,this.response)},t.load=function(e,t,n){var i=this,a=this.stats;if(a.loading.start)throw new Error("Loader can only be used once.");a.loading.start=self.performance.now();var s=function(e,t){var n={method:"GET",mode:"cors",credentials:"same-origin",signal:t,headers:new self.Headers(d({},e.headers))};return e.rangeEnd&&n.headers.set("Range","bytes="+e.rangeStart+"-"+String(e.rangeEnd-1)),n}(e,this.controller.signal),o=n.onProgress,c="arraybuffer"===e.responseType,u=c?"byteLength":"length";this.context=e,this.config=t,this.callbacks=n,this.request=this.fetchSetup(e,s),self.clearTimeout(this.requestTimeout),this.requestTimeout=self.setTimeout((function(){i.abortInternal(),n.onTimeout(a,e,i.response)}),t.timeout),self.fetch(this.request).then((function(n){if(i.response=i.loader=n,!n.ok){var s=n.status,u=n.statusText;throw new v(u||"fetch, bad network response",s,n)}return a.loading.first=Math.max(self.performance.now(),a.loading.start),a.total=parseInt(n.headers.get("Content-Length")||"0"),o&&(0,r.isFiniteNumber)(t.highWaterMark)?i.loadProgressively(n,a,e,t.highWaterMark,o):c?n.arrayBuffer():n.text()})).then((function(s){var c=i.response;self.clearTimeout(i.requestTimeout),a.loading.end=Math.max(self.performance.now(),a.loading.first);var l=s[u];l&&(a.loaded=a.total=l);var d={url:c.url,data:s};o&&!(0,r.isFiniteNumber)(t.highWaterMark)&&o(a,e,s,c),n.onSuccess(d,a,e,c)})).catch((function(t){if(self.clearTimeout(i.requestTimeout),!a.aborted){var r=t&&t.code||0,s=t?t.message:null;n.onError({code:r,text:s},e,t?t.details:null)}}))},t.getCacheAge=function(){var e=null;if(this.response){var t=this.response.headers.get("age");e=t?parseFloat(t):null}return e},t.loadProgressively=function(e,t,n,r,i){void 0===r&&(r=0);var s=new a.default,o=e.body.getReader();return function a(){return o.read().then((function(o){if(o.done)return s.dataLength&&i(t,n,s.flush(),e),Promise.resolve(new ArrayBuffer(0));var c=o.value,u=c.length;return t.loaded+=u,u<r||s.dataLength?(s.push(c),s.dataLength>=r&&i(t,n,s.flush(),e)):i(t,n,c,e),a()})).catch((function(){return Promise.reject()}))}()},e}();function p(e,t){return new self.Request(e.url,t)}var v=function(e){var t,n;function r(t,n,r){var i;return(i=e.call(this,t)||this).code=void 0,i.details=void 0,i.code=n,i.details=r,i}return n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,u(t,n),r}(s(Error)),m=f},"./src/utils/imsc1-ttml-parser.ts":function(e,t,n){"use strict";n.r(t),n.d(t,{IMSC1_CODEC:function(){return l},parseIMSC1:function(){return p}});var r=n("./src/utils/mp4-tools.ts"),i=n("./src/utils/vttparser.ts"),a=n("./src/utils/vttcue.ts"),s=n("./src/demux/id3.ts"),o=n("./src/utils/timescale-conversion.ts"),c=n("./src/utils/webvtt-parser.ts");function u(){return u=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u.apply(this,arguments)}var l="stpp.ttml.im1t",d=/^(\d{2,}):(\d{2}):(\d{2}):(\d{2})\.?(\d+)?$/,h=/^(\d*(?:\.\d*)?)(h|m|s|ms|f|t)$/,f={left:"start",center:"center",right:"end",start:"start",end:"end"};function p(e,t,n,i,l){var d=(0,r.findBox)(new Uint8Array(e),["mdat"]);if(0!==d.length){var h=d.map((function(e){return(0,s.utf8ArrayToStr)(e)})),p=(0,o.toTimescaleFromScale)(t,1,n);try{h.forEach((function(e){return i(function(e,t){var n=(new DOMParser).parseFromString(e,"text/xml").getElementsByTagName("tt")[0];if(!n)throw new Error("Invalid ttml");var r={frameRate:30,subFrameRate:1,frameRateMultiplier:0,tickRate:0},i=Object.keys(r).reduce((function(e,t){return e[t]=n.getAttribute("ttp:"+t)||r[t],e}),{}),s="preserve"!==n.getAttribute("xml:space"),o=m(v(n,"styling","style")),l=m(v(n,"layout","region")),d=v(n,"body","[begin]");return[].map.call(d,(function(e){var n=g(e,s);if(!n||!e.hasAttribute("begin"))return null;var r=k(e.getAttribute("begin"),i),d=k(e.getAttribute("dur"),i),h=k(e.getAttribute("end"),i);if(null===r)throw b(e);if(null===h){if(null===d)throw b(e);h=r+d}var p=new a.default(r-t,h-t,n);p.id=(0,c.generateCueId)(p.startTime,p.endTime,p.text);var v=l[e.getAttribute("region")],m=o[e.getAttribute("style")];p.position=10,p.size=80;var x=function(e,t,n){var r="http://www.w3.org/ns/ttml#styling",i=null,a=["displayAlign","textAlign","color","backgroundColor","fontSize","fontFamily"],s=null!==e&&void 0!==e&&e.hasAttribute("style")?e.getAttribute("style"):null;return s&&n.hasOwnProperty(s)&&(i=n[s]),a.reduce((function(n,a){var s=y(t,r,a)||y(e,r,a)||y(i,r,a);return s&&(n[a]=s),n}),{})}(v,m,o),w=x.textAlign;if(w){var T=f[w];T&&(p.lineAlign=T),p.align=w}return u(p,x),p})).filter((function(e){return null!==e}))}(e,p))}))}catch(x){l(x)}}else l(new Error("Could not parse IMSC1 mdat"))}function v(e,t,n){var r=e.getElementsByTagName(t)[0];return r?[].slice.call(r.querySelectorAll(n)):[]}function m(e){return e.reduce((function(e,t){var n=t.getAttribute("xml:id");return n&&(e[n]=t),e}),{})}function g(e,t){return[].slice.call(e.childNodes).reduce((function(e,n,r){var i;return"br"===n.nodeName&&r?e+"\n":null!==(i=n.childNodes)&&void 0!==i&&i.length?g(n,t):t?e+n.textContent.trim().replace(/\s+/g," "):e+n.textContent}),"")}function y(e,t,n){return e&&e.hasAttributeNS(t,n)?e.getAttributeNS(t,n):null}function b(e){return new Error("Could not parse ttml timestamp "+e)}function k(e,t){if(!e)return null;var n=(0,i.parseTimeStamp)(e);return null===n&&(d.test(e)?n=function(e,t){var n=d.exec(e),r=(0|n[4])+(0|n[5])/t.subFrameRate;return 3600*(0|n[1])+60*(0|n[2])+(0|n[3])+r/t.frameRate}(e,t):h.test(e)&&(n=function(e,t){var n=h.exec(e),r=Number(n[1]);switch(n[2]){case"h":return 3600*r;case"m":return 60*r;case"ms":return 1e3*r;case"f":return r/t.frameRate;case"t":return r/t.tickRate}return r}(e,t))),n}},"./src/utils/logger.ts":function(e,t,n){"use strict";n.r(t),n.d(t,{enableLogs:function(){return o},logger:function(){return c}});var r=function(){},i={trace:r,debug:r,log:r,warn:r,info:r,error:r},a=i;function s(e){var t=self.console[e];return t?t.bind(self.console,"["+e+"] >"):r}function o(e,t){if(self.console&&!0===e||"object"===typeof e){!function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];n.forEach((function(t){a[t]=e[t]?e[t].bind(e):s(t)}))}(e,"debug","log","info","warn","error");try{a.log('Debug logs enabled for "'+t+'"')}catch(n){a=i}}else a=i}var c=i},"./src/utils/mediakeys-helper.ts":function(e,t,n){"use strict";var r,i;n.r(t),n.d(t,{KeySystems:function(){return r},requestMediaKeySystemAccess:function(){return a}}),(i=r||(r={})).WIDEVINE="com.widevine.alpha",i.PLAYREADY="com.microsoft.playready";var a="undefined"!==typeof self&&self.navigator&&self.navigator.requestMediaKeySystemAccess?self.navigator.requestMediaKeySystemAccess.bind(self.navigator):null},"./src/utils/mediasource-helper.ts":function(e,t,n){"use strict";function r(){return self.MediaSource||self.WebKitMediaSource}n.r(t),n.d(t,{getMediaSource:function(){return r}})},"./src/utils/mp4-tools.ts":function(e,t,n){"use strict";n.r(t),n.d(t,{RemuxerTrackIdConfig:function(){return c},appendUint8Array:function(){return w},bin2str:function(){return u},computeRawDurationFromSamples:function(){return b},discardEPB:function(){return S},findBox:function(){return p},getDuration:function(){return y},getStartDTS:function(){return g},offsetStartDTS:function(){return k},parseEmsg:function(){return A},parseInitSegment:function(){return m},parseSEIMessageFromNALu:function(){return _},parseSamples:function(){return T},parseSegmentIndex:function(){return v},readSint32:function(){return h},readUint16:function(){return l},readUint32:function(){return d},segmentValidRange:function(){return x},writeUint32:function(){return f}});var r=n("./src/utils/typed-array.ts"),i=n("./src/loader/fragment.ts"),a=n("./src/demux/id3.ts"),s=Math.pow(2,32)-1,o=[].push,c={video:1,audio:2,id3:3,text:4};function u(e){return String.fromCharCode.apply(null,e)}function l(e,t){var n=e[t]<<8|e[t+1];return n<0?65536+n:n}function d(e,t){var n=h(e,t);return n<0?4294967296+n:n}function h(e,t){return e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3]}function f(e,t,n){e[t]=n>>24,e[t+1]=n>>16&255,e[t+2]=n>>8&255,e[t+3]=255&n}function p(e,t){var n=[];if(!t.length)return n;for(var r=e.byteLength,i=0;i<r;){var a=d(e,i),s=a>1?i+a:r;if(u(e.subarray(i+4,i+8))===t[0])if(1===t.length)n.push(e.subarray(i+8,s));else{var c=p(e.subarray(i+8,s),t.slice(1));c.length&&o.apply(n,c)}i=s}return n}function v(e){var t=[],n=e[0],r=8,i=d(e,r);r+=4,r+=0===n?8:16,r+=2;var a=e.length+0,s=l(e,r);r+=2;for(var o=0;o<s;o++){var c=r,u=d(e,c);c+=4;var h=2147483647&u;if(1===(2147483648&u)>>>31)return console.warn("SIDX has hierarchical references (not supported)"),null;var f=d(e,c);c+=4,t.push({referenceSize:h,subsegmentDuration:f,info:{duration:f/i,start:a,end:a+h-1}}),a+=h,r=c+=4}return{earliestPresentationTime:0,timescale:i,version:n,referencesCount:s,references:t}}function m(e){for(var t=[],n=p(e,["moov","trak"]),r=0;r<n.length;r++){var a=n[r],s=p(a,["tkhd"])[0];if(s){var o=s[0],c=0===o?12:20,l=d(s,c),h=p(a,["mdia","mdhd"])[0];if(h){var f=d(h,c=0===(o=h[0])?12:20),v=p(a,["mdia","hdlr"])[0];if(v){var m=u(v.subarray(8,12)),g={soun:i.ElementaryStreamTypes.AUDIO,vide:i.ElementaryStreamTypes.VIDEO}[m];if(g){var y=p(a,["mdia","minf","stbl","stsd"])[0],b=void 0;y&&(b=u(y.subarray(12,16))),t[l]={timescale:f,type:g},t[g]={timescale:f,id:l,codec:b}}}}}}return p(e,["moov","mvex","trex"]).forEach((function(e){var n=d(e,4),r=t[n];r&&(r.default={duration:d(e,12),flags:d(e,20)})})),t}function g(e,t){return p(t,["moof","traf"]).reduce((function(t,n){var r=p(n,["tfdt"])[0],i=r[0],a=p(n,["tfhd"]).reduce((function(t,n){var a=d(n,4),s=e[a];if(s){var o=d(r,4);1===i&&(o*=Math.pow(2,32),o+=d(r,8));var c=o/(s.timescale||9e4);if(isFinite(c)&&(null===t||c<t))return c}return t}),null);return null!==a&&isFinite(a)&&(null===t||a<t)?a:t}),null)||0}function y(e,t){for(var n=0,r=0,a=0,s=p(e,["moof","traf"]),o=0;o<s.length;o++){var c=s[o],u=p(c,["tfhd"])[0],l=t[d(u,4)];if(l){var h=l.default,f=d(u,0)|(null===h||void 0===h?void 0:h.flags),m=null===h||void 0===h?void 0:h.duration;8&f&&(m=d(u,2&f?12:8));for(var g=l.timescale||9e4,y=p(c,["trun"]),k=0;k<y.length;k++)!(n=b(y[k]))&&m&&(n=m*d(y[k],4)),l.type===i.ElementaryStreamTypes.VIDEO?r+=n/g:l.type===i.ElementaryStreamTypes.AUDIO&&(a+=n/g)}}if(0===r&&0===a){for(var x=0,w=p(e,["sidx"]),T=0;T<w.length;T++){var E=v(w[T]);null!==E&&void 0!==E&&E.references&&(x+=E.references.reduce((function(e,t){return e+t.info.duration||0}),0))}return x}return r||a}function b(e){var t=d(e,0),n=8;1&t&&(n+=4),4&t&&(n+=4);for(var r=0,i=d(e,4),a=0;a<i;a++)256&t&&(r+=d(e,n),n+=4),512&t&&(n+=4),1024&t&&(n+=4),2048&t&&(n+=4);return r}function k(e,t,n){p(t,["moof","traf"]).forEach((function(t){p(t,["tfhd"]).forEach((function(r){var i=d(r,4),a=e[i];if(a){var o=a.timescale||9e4;p(t,["tfdt"]).forEach((function(e){var t=e[0],r=d(e,4);if(0===t)r-=n*o,f(e,4,r=Math.max(r,0));else{r*=Math.pow(2,32),r+=d(e,8),r-=n*o,r=Math.max(r,0);var i=Math.floor(r/(s+1)),a=Math.floor(r%(s+1));f(e,4,i),f(e,8,a)}}))}}))}))}function x(e){var t={valid:null,remainder:null},n=p(e,["moof"]);if(!n)return t;if(n.length<2)return t.remainder=e,t;var i=n[n.length-1];return t.valid=(0,r.sliceUint8)(e,0,i.byteOffset-8),t.remainder=(0,r.sliceUint8)(e,i.byteOffset-8),t}function w(e,t){var n=new Uint8Array(e.length+t.length);return n.set(e),n.set(t,e.length),n}function T(e,t){var n=[],r=t.samples,a=t.timescale,s=t.id,o=!1;return p(r,["moof"]).map((function(c){var u=c.byteOffset-8;p(c,["traf"]).map((function(c){var l=p(c,["tfdt"]).map((function(e){var t=e[0],n=d(e,4);return 1===t&&(n*=Math.pow(2,32),n+=d(e,8)),n/a}))[0];return void 0!==l&&(e=l),p(c,["tfhd"]).map((function(l){var f=d(l,4),v=16777215&d(l,0),m=0,g=0!==(16&v),y=0,b=0!==(32&v),k=8;f===s&&(0!==(1&v)&&(k+=8),0!==(2&v)&&(k+=4),0!==(8&v)&&(m=d(l,k),k+=4),g&&(y=d(l,k),k+=4),b&&(k+=4),"video"===t.type&&(o=function(e){if(!e)return!1;var t=e.indexOf("."),n=t<0?e:e.substring(0,t);return"hvc1"===n||"hev1"===n||"dvh1"===n||"dvhe"===n}(t.codec)),p(c,["trun"]).map((function(s){var c=s[0],l=16777215&d(s,0),f=0!==(1&l),p=0,v=0!==(4&l),g=0!==(256&l),b=0,k=0!==(512&l),x=0,w=0!==(1024&l),T=0!==(2048&l),S=0,A=d(s,4),C=8;f&&(p=d(s,C),C+=4),v&&(C+=4);for(var I=p+u,R=0;R<A;R++){if(g?(b=d(s,C),C+=4):b=m,k?(x=d(s,C),C+=4):x=y,w&&(C+=4),T&&(S=0===c?d(s,C):h(s,C),C+=4),t.type===i.ElementaryStreamTypes.VIDEO)for(var P=0;P<x;){var D=d(r,I);E(o,r[I+=4])&&_(r.subarray(I,I+D),o?2:1,e+S/a,n),I+=D,P+=D+4}e+=b/a}})))}))}))})),n}function E(e,t){if(e){var n=t>>1&63;return 39===n||40===n}return 6===(31&t)}function _(e,t,n,r){var i=S(e),s=0;s+=t;for(var o=0,c=0,u=!1,h=0;s<i.length;){o=0;do{if(s>=i.length)break;o+=h=i[s++]}while(255===h);c=0;do{if(s>=i.length)break;c+=h=i[s++]}while(255===h);var f=i.length-s;if(!u&&4===o&&s<i.length){if(u=!0,181===i[s++]){var p=l(i,s);if(s+=2,49===p){var v=d(i,s);if(s+=4,1195456820===v){var m=i[s++];if(3===m){var g=i[s++],y=64&g,b=y?2+3*(31&g):0,k=new Uint8Array(b);if(y){k[0]=g;for(var x=1;x<b;x++)k[x]=i[s++]}r.push({type:m,payloadType:o,pts:n,bytes:k})}}}}}else if(5===o&&c<f){if(u=!0,c>16){for(var w=[],T=0;T<16;T++){var E=i[s++].toString(16);w.push(1==E.length?"0"+E:E),3!==T&&5!==T&&7!==T&&9!==T||w.push("-")}for(var _=c-16,A=new Uint8Array(_),C=0;C<_;C++)A[C]=i[s++];r.push({payloadType:o,pts:n,uuid:w.join(""),userData:(0,a.utf8ArrayToStr)(A),userDataBytes:A})}}else if(c<f)s+=c;else if(c>f)break}}function S(e){for(var t=e.byteLength,n=[],r=1;r<t-2;)0===e[r]&&0===e[r+1]&&3===e[r+2]?(n.push(r+2),r+=2):r++;if(0===n.length)return e;var i=t-n.length,a=new Uint8Array(i),s=0;for(r=0;r<i;s++,r++)s===n[0]&&(s++,n.shift()),a[r]=e[s];return a}function A(e){var t=e[0],n="",r="",i=0,a=0,s=0,o=0,c=0,l=0;if(0===t){for(;"\0"!==u(e.subarray(l,l+1));)n+=u(e.subarray(l,l+1)),l+=1;for(n+=u(e.subarray(l,l+1)),l+=1;"\0"!==u(e.subarray(l,l+1));)r+=u(e.subarray(l,l+1)),l+=1;r+=u(e.subarray(l,l+1)),l+=1,i=d(e,12),a=d(e,16),o=d(e,20),c=d(e,24),l=28}else if(1===t){i=d(e,l+=4);var h=d(e,l+=4),f=d(e,l+=4);for(l+=4,s=Math.pow(2,32)*h+f,Number.isSafeInteger(s)||(s=Number.MAX_SAFE_INTEGER,console.warn("Presentation time exceeds safe integer limit and wrapped to max safe integer in parsing emsg box")),o=d(e,l),c=d(e,l+=4),l+=4;"\0"!==u(e.subarray(l,l+1));)n+=u(e.subarray(l,l+1)),l+=1;for(n+=u(e.subarray(l,l+1)),l+=1;"\0"!==u(e.subarray(l,l+1));)r+=u(e.subarray(l,l+1)),l+=1;r+=u(e.subarray(l,l+1)),l+=1}return{schemeIdUri:n,value:r,timeScale:i,presentationTime:s,presentationTimeDelta:a,eventDuration:o,id:c,payload:e.subarray(l,e.byteLength)}}},"./src/utils/output-filter.ts":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return r}});var r=function(){function e(e,t){this.timelineController=void 0,this.cueRanges=[],this.trackName=void 0,this.startTime=null,this.endTime=null,this.screen=null,this.timelineController=e,this.trackName=t}var t=e.prototype;return t.dispatchCue=function(){null!==this.startTime&&(this.timelineController.addCues(this.trackName,this.startTime,this.endTime,this.screen,this.cueRanges),this.startTime=null)},t.newCue=function(e,t,n){(null===this.startTime||this.startTime>e)&&(this.startTime=e),this.endTime=t,this.screen=n,this.timelineController.createCaptionsTrack(this.trackName)},t.reset=function(){this.cueRanges=[],this.startTime=null},e}()},"./src/utils/texttrack-utils.ts":function(e,t,n){"use strict";n.r(t),n.d(t,{addCueToTrack:function(){return a},clearCurrentCues:function(){return s},getCuesInRange:function(){return c},removeCuesInRange:function(){return o},sendAddTrackEvent:function(){return i}});var r=n("./src/utils/logger.ts");function i(e,t){var n;try{n=new Event("addtrack")}catch(r){(n=document.createEvent("Event")).initEvent("addtrack",!1,!1)}n.track=e,t.dispatchEvent(n)}function a(e,t){var n=e.mode;if("disabled"===n&&(e.mode="hidden"),e.cues&&!e.cues.getCueById(t.id))try{if(e.addCue(t),!e.cues.getCueById(t.id))throw new Error("addCue is failed for: "+t)}catch(a){r.logger.debug("[texttrack-utils]: "+a);var i=new self.TextTrackCue(t.startTime,t.endTime,t.text);i.id=t.id,e.addCue(i)}"disabled"===n&&(e.mode=n)}function s(e){var t=e.mode;if("disabled"===t&&(e.mode="hidden"),e.cues)for(var n=e.cues.length;n--;)e.removeCue(e.cues[n]);"disabled"===t&&(e.mode=t)}function o(e,t,n,r){var i=e.mode;if("disabled"===i&&(e.mode="hidden"),e.cues&&e.cues.length>0)for(var a=c(e.cues,t,n),s=0;s<a.length;s++)r&&!r(a[s])||e.removeCue(a[s]);"disabled"===i&&(e.mode=i)}function c(e,t,n){var r=[],i=function(e,t){if(t<e[0].startTime)return 0;var n=e.length-1;if(t>e[n].endTime)return-1;for(var r=0,i=n;r<=i;){var a=Math.floor((i+r)/2);if(t<e[a].startTime)i=a-1;else{if(!(t>e[a].startTime&&r<n))return a;r=a+1}}return e[r].startTime-t<t-e[i].startTime?r:i}(e,t);if(i>-1)for(var a=i,s=e.length;a<s;a++){var o=e[a];if(o.startTime>=t&&o.endTime<=n)r.push(o);else if(o.startTime>n)return r}return r}},"./src/utils/time-ranges.ts":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return r}});var r={toString:function(e){for(var t="",n=e.length,r=0;r<n;r++)t+="["+e.start(r).toFixed(3)+","+e.end(r).toFixed(3)+"]";return t}}},"./src/utils/timescale-conversion.ts":function(e,t,n){"use strict";function r(e,t,n,r){void 0===n&&(n=1),void 0===r&&(r=!1);var i=e*t*n;return r?Math.round(i):i}function i(e,t,n,i){return void 0===n&&(n=1),void 0===i&&(i=!1),r(e,t,1/n,i)}function a(e,t){return void 0===t&&(t=!1),r(e,1e3,1/9e4,t)}function s(e,t){return void 0===t&&(t=1),r(e,9e4,1/t)}n.r(t),n.d(t,{toMpegTsClockFromTimescale:function(){return s},toMsFromMpegTsClock:function(){return a},toTimescaleFromBase:function(){return r},toTimescaleFromScale:function(){return i}})},"./src/utils/typed-array.ts":function(e,t,n){"use strict";function r(e,t,n){return Uint8Array.prototype.slice?e.slice(t,n):new Uint8Array(Array.prototype.slice.call(e,t,n))}n.r(t),n.d(t,{sliceUint8:function(){return r}})},"./src/utils/vttcue.ts":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return r}});var r=function(){if("undefined"!==typeof self&&self.VTTCue)return self.VTTCue;var e=["","lr","rl"],t=["start","middle","end","left","right"];function n(e,t){if("string"!==typeof t)return!1;if(!Array.isArray(e))return!1;var n=t.toLowerCase();return!!~e.indexOf(n)&&n}function r(e){return n(t,e)}function i(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(var i=1;i<arguments.length;i++){var a=arguments[i];for(var s in a)e[s]=a[s]}return e}function a(t,a,s){var o=this,c={enumerable:!0};o.hasBeenReset=!1;var u="",l=!1,d=t,h=a,f=s,p=null,v="",m=!0,g="auto",y="start",b=50,k="middle",x=50,w="middle";Object.defineProperty(o,"id",i({},c,{get:function(){return u},set:function(e){u=""+e}})),Object.defineProperty(o,"pauseOnExit",i({},c,{get:function(){return l},set:function(e){l=!!e}})),Object.defineProperty(o,"startTime",i({},c,{get:function(){return d},set:function(e){if("number"!==typeof e)throw new TypeError("Start time must be set to a number.");d=e,this.hasBeenReset=!0}})),Object.defineProperty(o,"endTime",i({},c,{get:function(){return h},set:function(e){if("number"!==typeof e)throw new TypeError("End time must be set to a number.");h=e,this.hasBeenReset=!0}})),Object.defineProperty(o,"text",i({},c,{get:function(){return f},set:function(e){f=""+e,this.hasBeenReset=!0}})),Object.defineProperty(o,"region",i({},c,{get:function(){return p},set:function(e){p=e,this.hasBeenReset=!0}})),Object.defineProperty(o,"vertical",i({},c,{get:function(){return v},set:function(t){var r=function(t){return n(e,t)}(t);if(!1===r)throw new SyntaxError("An invalid or illegal string was specified.");v=r,this.hasBeenReset=!0}})),Object.defineProperty(o,"snapToLines",i({},c,{get:function(){return m},set:function(e){m=!!e,this.hasBeenReset=!0}})),Object.defineProperty(o,"line",i({},c,{get:function(){return g},set:function(e){if("number"!==typeof e&&"auto"!==e)throw new SyntaxError("An invalid number or illegal string was specified.");g=e,this.hasBeenReset=!0}})),Object.defineProperty(o,"lineAlign",i({},c,{get:function(){return y},set:function(e){var t=r(e);if(!t)throw new SyntaxError("An invalid or illegal string was specified.");y=t,this.hasBeenReset=!0}})),Object.defineProperty(o,"position",i({},c,{get:function(){return b},set:function(e){if(e<0||e>100)throw new Error("Position must be between 0 and 100.");b=e,this.hasBeenReset=!0}})),Object.defineProperty(o,"positionAlign",i({},c,{get:function(){return k},set:function(e){var t=r(e);if(!t)throw new SyntaxError("An invalid or illegal string was specified.");k=t,this.hasBeenReset=!0}})),Object.defineProperty(o,"size",i({},c,{get:function(){return x},set:function(e){if(e<0||e>100)throw new Error("Size must be between 0 and 100.");x=e,this.hasBeenReset=!0}})),Object.defineProperty(o,"align",i({},c,{get:function(){return w},set:function(e){var t=r(e);if(!t)throw new SyntaxError("An invalid or illegal string was specified.");w=t,this.hasBeenReset=!0}})),o.displayState=void 0}return a.prototype.getCueAsHTML=function(){return self.WebVTT.convertCueToDOMTree(self,this.text)},a}()},"./src/utils/vttparser.ts":function(e,t,n){"use strict";n.r(t),n.d(t,{VTTParser:function(){return h},fixLineBreaks:function(){return d},parseTimeStamp:function(){return a}});var r=n("./src/utils/vttcue.ts"),i=function(){function e(){}return e.prototype.decode=function(e,t){if(!e)return"";if("string"!==typeof e)throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(e))},e}();function a(e){function t(e,t,n,r){return 3600*(0|e)+60*(0|t)+(0|n)+parseFloat(r||0)}var n=e.match(/^(?:(\d+):)?(\d{2}):(\d{2})(\.\d+)?/);return n?parseFloat(n[2])>59?t(n[2],n[3],0,n[4]):t(n[1],n[2],n[3],n[4]):null}var s=function(){function e(){this.values=Object.create(null)}var t=e.prototype;return t.set=function(e,t){this.get(e)||""===t||(this.values[e]=t)},t.get=function(e,t,n){return n?this.has(e)?this.values[e]:t[n]:this.has(e)?this.values[e]:t},t.has=function(e){return e in this.values},t.alt=function(e,t,n){for(var r=0;r<n.length;++r)if(t===n[r]){this.set(e,t);break}},t.integer=function(e,t){/^-?\d+$/.test(t)&&this.set(e,parseInt(t,10))},t.percent=function(e,t){if(/^([\d]{1,3})(\.[\d]*)?%$/.test(t)){var n=parseFloat(t);if(n>=0&&n<=100)return this.set(e,n),!0}return!1},e}();function o(e,t,n,r){var i=r?e.split(r):[e];for(var a in i)if("string"===typeof i[a]){var s=i[a].split(n);2===s.length&&t(s[0],s[1])}}var c=new r.default(0,0,""),u="middle"===c.align?"middle":"center";function l(e,t,n){var r=e;function i(){var t=a(e);if(null===t)throw new Error("Malformed timestamp: "+r);return e=e.replace(/^[^\sa-zA-Z-]+/,""),t}function l(){e=e.replace(/^\s+/,"")}if(l(),t.startTime=i(),l(),"--\x3e"!==e.slice(0,3))throw new Error("Malformed time stamp (time stamps must be separated by '--\x3e'): "+r);e=e.slice(3),l(),t.endTime=i(),l(),function(e,t){var r=new s;o(e,(function(e,t){var i;switch(e){case"region":for(var a=n.length-1;a>=0;a--)if(n[a].id===t){r.set(e,n[a].region);break}break;case"vertical":r.alt(e,t,["rl","lr"]);break;case"line":i=t.split(","),r.integer(e,i[0]),r.percent(e,i[0])&&r.set("snapToLines",!1),r.alt(e,i[0],["auto"]),2===i.length&&r.alt("lineAlign",i[1],["start",u,"end"]);break;case"position":i=t.split(","),r.percent(e,i[0]),2===i.length&&r.alt("positionAlign",i[1],["start",u,"end","line-left","line-right","auto"]);break;case"size":r.percent(e,t);break;case"align":r.alt(e,t,["start",u,"end","left","right"])}}),/:/,/\s/),t.region=r.get("region",null),t.vertical=r.get("vertical","");var i=r.get("line","auto");"auto"===i&&-1===c.line&&(i=-1),t.line=i,t.lineAlign=r.get("lineAlign","start"),t.snapToLines=r.get("snapToLines",!0),t.size=r.get("size",100),t.align=r.get("align",u);var a=r.get("position","auto");"auto"===a&&50===c.position&&(a="start"===t.align||"left"===t.align?0:"end"===t.align||"right"===t.align?100:50),t.position=a}(e,t)}function d(e){return e.replace(/<br(?: \/)?>/gi,"\n")}var h=function(){function e(){this.state="INITIAL",this.buffer="",this.decoder=new i,this.regionList=[],this.cue=null,this.oncue=void 0,this.onparsingerror=void 0,this.onflush=void 0}var t=e.prototype;return t.parse=function(e){var t=this;function n(){var e=t.buffer,n=0;for(e=d(e);n<e.length&&"\r"!==e[n]&&"\n"!==e[n];)++n;var r=e.slice(0,n);return"\r"===e[n]&&++n,"\n"===e[n]&&++n,t.buffer=e.slice(n),r}e&&(t.buffer+=t.decoder.decode(e,{stream:!0}));try{var i="";if("INITIAL"===t.state){if(!/\r\n|\n/.test(t.buffer))return this;var a=(i=n()).match(/^(\xef\xbb\xbf)?WEBVTT([ \t].*)?$/);if(!a||!a[0])throw new Error("Malformed WebVTT signature.");t.state="HEADER"}for(var s=!1;t.buffer;){if(!/\r\n|\n/.test(t.buffer))return this;switch(s?s=!1:i=n(),t.state){case"HEADER":/:/.test(i)?o(i,(function(e,t){}),/:/):i||(t.state="ID");continue;case"NOTE":i||(t.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(i)){t.state="NOTE";break}if(!i)continue;if(t.cue=new r.default(0,0,""),t.state="CUE",-1===i.indexOf("--\x3e")){t.cue.id=i;continue}case"CUE":if(!t.cue){t.state="BADCUE";continue}try{l(i,t.cue,t.regionList)}catch(u){t.cue=null,t.state="BADCUE";continue}t.state="CUETEXT";continue;case"CUETEXT":var c=-1!==i.indexOf("--\x3e");if(!i||c&&(s=!0)){t.oncue&&t.cue&&t.oncue(t.cue),t.cue=null,t.state="ID";continue}if(null===t.cue)continue;t.cue.text&&(t.cue.text+="\n"),t.cue.text+=i;continue;case"BADCUE":i||(t.state="ID")}}}catch(u){"CUETEXT"===t.state&&t.cue&&t.oncue&&t.oncue(t.cue),t.cue=null,t.state="INITIAL"===t.state?"BADWEBVTT":"BADCUE"}return this},t.flush=function(){var e=this;try{if((e.cue||"HEADER"===e.state)&&(e.buffer+="\n\n",e.parse()),"INITIAL"===e.state||"BADWEBVTT"===e.state)throw new Error("Malformed WebVTT signature.")}catch(t){e.onparsingerror&&e.onparsingerror(t)}return e.onflush&&e.onflush(),this},e}()},"./src/utils/webvtt-parser.ts":function(e,t,n){"use strict";n.r(t),n.d(t,{generateCueId:function(){return d},parseWebVTT:function(){return h}});var r=n("./src/polyfills/number.ts"),i=n("./src/utils/vttparser.ts"),a=n("./src/demux/id3.ts"),s=n("./src/utils/timescale-conversion.ts"),o=n("./src/remux/mp4-remuxer.ts"),c=/\r\n|\n\r|\n|\r/g,u=function(e,t,n){return void 0===n&&(n=0),e.slice(n,n+t.length)===t},l=function(e){for(var t=5381,n=e.length;n;)t=33*t^e.charCodeAt(--n);return(t>>>0).toString()};function d(e,t,n){return l(e.toString())+l(t.toString())+l(n)}function h(e,t,n,l,h,f,p,v){var m,g=new i.VTTParser,y=(0,a.utf8ArrayToStr)(new Uint8Array(e)).trim().replace(c,"\n").split("\n"),b=[],k=(0,s.toMpegTsClockFromTimescale)(t,n),x="00:00.000",w=0,T=0,E=!0;g.oncue=function(e){var t=l[h],n=l.ccOffset,r=(w-k)/9e4;null!==t&&void 0!==t&&t.new&&(void 0!==T?n=l.ccOffset=t.start:function(e,t,n){var r=e[t],i=e[r.prevCC];if(!i||!i.new&&r.new)return e.ccOffset=e.presentationOffset=r.start,void(r.new=!1);for(;null!==(a=i)&&void 0!==a&&a.new;){var a;e.ccOffset+=r.start-i.start,r.new=!1,i=e[(r=i).prevCC]}e.presentationOffset=n}(l,h,r)),r&&(n=r-l.presentationOffset);var i=e.endTime-e.startTime,a=(0,o.normalizePts)(9e4*(e.startTime+n-T),9e4*f)/9e4;e.startTime=Math.max(a,0),e.endTime=Math.max(a+i,0);var s=e.text.trim();e.text=decodeURIComponent(encodeURIComponent(s)),e.id||(e.id=d(e.startTime,e.endTime,s)),e.endTime>0&&b.push(e)},g.onparsingerror=function(e){m=e},g.onflush=function(){m?v(m):p(b)},y.forEach((function(e){if(E){if(u(e,"X-TIMESTAMP-MAP=")){E=!1,e.slice(16).split(",").forEach((function(e){u(e,"LOCAL:")?x=e.slice(6):u(e,"MPEGTS:")&&(w=parseInt(e.slice(7)))}));try{T=function(e){var t=parseInt(e.slice(-3)),n=parseInt(e.slice(-6,-4)),i=parseInt(e.slice(-9,-7)),a=e.length>9?parseInt(e.substring(0,e.indexOf(":"))):0;if(!(0,r.isFiniteNumber)(t)||!(0,r.isFiniteNumber)(n)||!(0,r.isFiniteNumber)(i)||!(0,r.isFiniteNumber)(a))throw Error("Malformed X-TIMESTAMP-MAP: Local:"+e);return t+=1e3*n,(t+=6e4*i)+36e5*a}(x)/1e3}catch(t){m=t}return}""===e&&(E=!1)}g.parse(e+"\n")})),g.flush()}},"./src/utils/xhr-loader.ts":function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return s}});var r=n("./src/utils/logger.ts"),i=n("./src/loader/load-stats.ts"),a=/^age:\s*[\d.]+\s*$/m,s=function(){function e(e){this.xhrSetup=void 0,this.requestTimeout=void 0,this.retryTimeout=void 0,this.retryDelay=void 0,this.config=null,this.callbacks=null,this.context=void 0,this.loader=null,this.stats=void 0,this.xhrSetup=e?e.xhrSetup:null,this.stats=new i.LoadStats,this.retryDelay=0}var t=e.prototype;return t.destroy=function(){this.callbacks=null,this.abortInternal(),this.loader=null,this.config=null},t.abortInternal=function(){var e=this.loader;self.clearTimeout(this.requestTimeout),self.clearTimeout(this.retryTimeout),e&&(e.onreadystatechange=null,e.onprogress=null,4!==e.readyState&&(this.stats.aborted=!0,e.abort()))},t.abort=function(){var e;this.abortInternal(),null!==(e=this.callbacks)&&void 0!==e&&e.onAbort&&this.callbacks.onAbort(this.stats,this.context,this.loader)},t.load=function(e,t,n){if(this.stats.loading.start)throw new Error("Loader can only be used once.");this.stats.loading.start=self.performance.now(),this.context=e,this.config=t,this.callbacks=n,this.retryDelay=t.retryDelay,this.loadInternal()},t.loadInternal=function(){var e=this.config,t=this.context;if(e){var n=this.loader=new self.XMLHttpRequest,r=this.stats;r.loading.first=0,r.loaded=0;var i=this.xhrSetup;try{if(i)try{i(n,t.url)}catch(o){n.open("GET",t.url,!0),i(n,t.url)}n.readyState||n.open("GET",t.url,!0);var a=this.context.headers;if(a)for(var s in a)n.setRequestHeader(s,a[s])}catch(o){return void this.callbacks.onError({code:n.status,text:o.message},t,n)}t.rangeEnd&&n.setRequestHeader("Range","bytes="+t.rangeStart+"-"+(t.rangeEnd-1)),n.onreadystatechange=this.readystatechange.bind(this),n.onprogress=this.loadprogress.bind(this),n.responseType=t.responseType,self.clearTimeout(this.requestTimeout),this.requestTimeout=self.setTimeout(this.loadtimeout.bind(this),e.timeout),n.send()}},t.readystatechange=function(){var e=this.context,t=this.loader,n=this.stats;if(e&&t){var i=t.readyState,a=this.config;if(!n.aborted&&i>=2)if(self.clearTimeout(this.requestTimeout),0===n.loading.first&&(n.loading.first=Math.max(self.performance.now(),n.loading.start)),4===i){t.onreadystatechange=null,t.onprogress=null;var s=t.status,o="arraybuffer"===t.responseType;if(s>=200&&s<300&&(o&&t.response||null!==t.responseText)){var c,u;if(n.loading.end=Math.max(self.performance.now(),n.loading.first),u=o?(c=t.response).byteLength:(c=t.responseText).length,n.loaded=n.total=u,!this.callbacks)return;var l=this.callbacks.onProgress;if(l&&l(n,e,c,t),!this.callbacks)return;var d={url:t.responseURL,data:c};this.callbacks.onSuccess(d,n,e,t)}else n.retry>=a.maxRetry||s>=400&&s<499?(r.logger.error(s+" while loading "+e.url),this.callbacks.onError({code:s,text:t.statusText},e,t)):(r.logger.warn(s+" while loading "+e.url+", retrying in "+this.retryDelay+"..."),this.abortInternal(),this.loader=null,self.clearTimeout(this.retryTimeout),this.retryTimeout=self.setTimeout(this.loadInternal.bind(this),this.retryDelay),this.retryDelay=Math.min(2*this.retryDelay,a.maxRetryDelay),n.retry++)}else self.clearTimeout(this.requestTimeout),this.requestTimeout=self.setTimeout(this.loadtimeout.bind(this),a.timeout)}},t.loadtimeout=function(){r.logger.warn("timeout while loading "+this.context.url);var e=this.callbacks;e&&(this.abortInternal(),e.onTimeout(this.stats,this.context,this.loader))},t.loadprogress=function(e){var t=this.stats;t.loaded=e.loaded,e.lengthComputable&&(t.total=e.total)},t.getCacheAge=function(){var e=null;if(this.loader&&a.test(this.loader.getAllResponseHeaders())){var t=this.loader.getResponseHeader("age");e=t?parseFloat(t):null}return e},e}()},"./node_modules/eventemitter3/index.js":function(e){"use strict";var t=Object.prototype.hasOwnProperty,n="~";function r(){}function i(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function a(e,t,r,a,s){if("function"!==typeof r)throw new TypeError("The listener must be a function");var o=new i(r,a||e,s),c=n?n+t:t;return e._events[c]?e._events[c].fn?e._events[c]=[e._events[c],o]:e._events[c].push(o):(e._events[c]=o,e._eventsCount++),e}function s(e,t){0===--e._eventsCount?e._events=new r:delete e._events[t]}function o(){this._events=new r,this._eventsCount=0}Object.create&&(r.prototype=Object.create(null),(new r).__proto__||(n=!1)),o.prototype.eventNames=function(){var e,r,i=[];if(0===this._eventsCount)return i;for(r in e=this._events)t.call(e,r)&&i.push(n?r.slice(1):r);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(e)):i},o.prototype.listeners=function(e){var t=n?n+e:e,r=this._events[t];if(!r)return[];if(r.fn)return[r.fn];for(var i=0,a=r.length,s=new Array(a);i<a;i++)s[i]=r[i].fn;return s},o.prototype.listenerCount=function(e){var t=n?n+e:e,r=this._events[t];return r?r.fn?1:r.length:0},o.prototype.emit=function(e,t,r,i,a,s){var o=n?n+e:e;if(!this._events[o])return!1;var c,u,l=this._events[o],d=arguments.length;if(l.fn){switch(l.once&&this.removeListener(e,l.fn,void 0,!0),d){case 1:return l.fn.call(l.context),!0;case 2:return l.fn.call(l.context,t),!0;case 3:return l.fn.call(l.context,t,r),!0;case 4:return l.fn.call(l.context,t,r,i),!0;case 5:return l.fn.call(l.context,t,r,i,a),!0;case 6:return l.fn.call(l.context,t,r,i,a,s),!0}for(u=1,c=new Array(d-1);u<d;u++)c[u-1]=arguments[u];l.fn.apply(l.context,c)}else{var h,f=l.length;for(u=0;u<f;u++)switch(l[u].once&&this.removeListener(e,l[u].fn,void 0,!0),d){case 1:l[u].fn.call(l[u].context);break;case 2:l[u].fn.call(l[u].context,t);break;case 3:l[u].fn.call(l[u].context,t,r);break;case 4:l[u].fn.call(l[u].context,t,r,i);break;default:if(!c)for(h=1,c=new Array(d-1);h<d;h++)c[h-1]=arguments[h];l[u].fn.apply(l[u].context,c)}}return!0},o.prototype.on=function(e,t,n){return a(this,e,t,n,!1)},o.prototype.once=function(e,t,n){return a(this,e,t,n,!0)},o.prototype.removeListener=function(e,t,r,i){var a=n?n+e:e;if(!this._events[a])return this;if(!t)return s(this,a),this;var o=this._events[a];if(o.fn)o.fn!==t||i&&!o.once||r&&o.context!==r||s(this,a);else{for(var c=0,u=[],l=o.length;c<l;c++)(o[c].fn!==t||i&&!o[c].once||r&&o[c].context!==r)&&u.push(o[c]);u.length?this._events[a]=1===u.length?u[0]:u:s(this,a)}return this},o.prototype.removeAllListeners=function(e){var t;return e?(t=n?n+e:e,this._events[t]&&s(this,t)):(this._events=new r,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=n,o.EventEmitter=o,e.exports=o},"./node_modules/url-toolkit/src/url-toolkit.js":function(e){!function(t){var n=/^(?=((?:[a-zA-Z0-9+\-.]+:)?))\1(?=((?:\/\/[^\/?#]*)?))\2(?=((?:(?:[^?#\/]*\/)*[^;?#\/]*)?))\3((?:;[^?#]*)?)(\?[^#]*)?(#[^]*)?$/,r=/^(?=([^\/?#]*))\1([^]*)$/,i=/(?:\/|^)\.(?=\/)/g,a=/(?:\/|^)\.\.\/(?!\.\.\/)[^\/]*(?=\/)/g,s={buildAbsoluteURL:function(e,t,n){if(n=n||{},e=e.trim(),!(t=t.trim())){if(!n.alwaysNormalize)return e;var i=s.parseURL(e);if(!i)throw new Error("Error trying to parse base URL.");return i.path=s.normalizePath(i.path),s.buildURLFromParts(i)}var a=s.parseURL(t);if(!a)throw new Error("Error trying to parse relative URL.");if(a.scheme)return n.alwaysNormalize?(a.path=s.normalizePath(a.path),s.buildURLFromParts(a)):t;var o=s.parseURL(e);if(!o)throw new Error("Error trying to parse base URL.");if(!o.netLoc&&o.path&&"/"!==o.path[0]){var c=r.exec(o.path);o.netLoc=c[1],o.path=c[2]}o.netLoc&&!o.path&&(o.path="/");var u={scheme:o.scheme,netLoc:a.netLoc,path:null,params:a.params,query:a.query,fragment:a.fragment};if(!a.netLoc&&(u.netLoc=o.netLoc,"/"!==a.path[0]))if(a.path){var l=o.path,d=l.substring(0,l.lastIndexOf("/")+1)+a.path;u.path=s.normalizePath(d)}else u.path=o.path,a.params||(u.params=o.params,a.query||(u.query=o.query));return null===u.path&&(u.path=n.alwaysNormalize?s.normalizePath(a.path):a.path),s.buildURLFromParts(u)},parseURL:function(e){var t=n.exec(e);return t?{scheme:t[1]||"",netLoc:t[2]||"",path:t[3]||"",params:t[4]||"",query:t[5]||"",fragment:t[6]||""}:null},normalizePath:function(e){for(e=e.split("").reverse().join("").replace(i,"");e.length!==(e=e.replace(a,"")).length;);return e.split("").reverse().join("")},buildURLFromParts:function(e){return e.scheme+e.netLoc+e.path+e.params+e.query+e.fragment}};e.exports=s}()}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var a=t[r]={exports:{}};return e[r].call(a.exports,a,a.exports,n),a.exports}n.m=e,n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var r=n("./src/hls.ts");return r=r.default}()},e.exports=t())},110:function(e,t,n){"use strict";var r=n(309),i={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},a={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},s={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},o={};function c(e){return r.isMemo(e)?s:o[e.$$typeof]||i}o[r.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},o[r.Memo]=s;var u=Object.defineProperty,l=Object.getOwnPropertyNames,d=Object.getOwnPropertySymbols,h=Object.getOwnPropertyDescriptor,f=Object.getPrototypeOf,p=Object.prototype;e.exports=function e(t,n,r){if("string"!==typeof n){if(p){var i=f(n);i&&i!==p&&e(t,i,r)}var s=l(n);d&&(s=s.concat(d(n)));for(var o=c(t),v=c(n),m=0;m<s.length;++m){var g=s[m];if(!a[g]&&(!r||!r[g])&&(!v||!v[g])&&(!o||!o[g])){var y=h(n,g);try{u(t,g,y)}catch(b){}}}}return t}},746:function(e,t){"use strict";var n="function"===typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,i=n?Symbol.for("react.portal"):60106,a=n?Symbol.for("react.fragment"):60107,s=n?Symbol.for("react.strict_mode"):60108,o=n?Symbol.for("react.profiler"):60114,c=n?Symbol.for("react.provider"):60109,u=n?Symbol.for("react.context"):60110,l=n?Symbol.for("react.async_mode"):60111,d=n?Symbol.for("react.concurrent_mode"):60111,h=n?Symbol.for("react.forward_ref"):60112,f=n?Symbol.for("react.suspense"):60113,p=n?Symbol.for("react.suspense_list"):60120,v=n?Symbol.for("react.memo"):60115,m=n?Symbol.for("react.lazy"):60116,g=n?Symbol.for("react.block"):60121,y=n?Symbol.for("react.fundamental"):60117,b=n?Symbol.for("react.responder"):60118,k=n?Symbol.for("react.scope"):60119;function x(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case l:case d:case a:case o:case s:case f:return e;default:switch(e=e&&e.$$typeof){case u:case h:case m:case v:case c:return e;default:return t}}case i:return t}}}function w(e){return x(e)===d}t.AsyncMode=l,t.ConcurrentMode=d,t.ContextConsumer=u,t.ContextProvider=c,t.Element=r,t.ForwardRef=h,t.Fragment=a,t.Lazy=m,t.Memo=v,t.Portal=i,t.Profiler=o,t.StrictMode=s,t.Suspense=f,t.isAsyncMode=function(e){return w(e)||x(e)===l},t.isConcurrentMode=w,t.isContextConsumer=function(e){return x(e)===u},t.isContextProvider=function(e){return x(e)===c},t.isElement=function(e){return"object"===typeof e&&null!==e&&e.$$typeof===r},t.isForwardRef=function(e){return x(e)===h},t.isFragment=function(e){return x(e)===a},t.isLazy=function(e){return x(e)===m},t.isMemo=function(e){return x(e)===v},t.isPortal=function(e){return x(e)===i},t.isProfiler=function(e){return x(e)===o},t.isStrictMode=function(e){return x(e)===s},t.isSuspense=function(e){return x(e)===f},t.isValidElementType=function(e){return"string"===typeof e||"function"===typeof e||e===a||e===d||e===o||e===s||e===f||e===p||"object"===typeof e&&null!==e&&(e.$$typeof===m||e.$$typeof===v||e.$$typeof===c||e.$$typeof===u||e.$$typeof===h||e.$$typeof===y||e.$$typeof===b||e.$$typeof===k||e.$$typeof===g)},t.typeOf=x},309:function(e,t,n){"use strict";e.exports=n(746)},426:function(e,t,n){(e=n.nmd(e)).exports=function(){"use strict";var t,n;function r(){return t.apply(null,arguments)}function i(e){t=e}function a(e){return e instanceof Array||"[object Array]"===Object.prototype.toString.call(e)}function s(e){return null!=e&&"[object Object]"===Object.prototype.toString.call(e)}function o(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function c(e){if(Object.getOwnPropertyNames)return 0===Object.getOwnPropertyNames(e).length;var t;for(t in e)if(o(e,t))return!1;return!0}function u(e){return void 0===e}function l(e){return"number"===typeof e||"[object Number]"===Object.prototype.toString.call(e)}function d(e){return e instanceof Date||"[object Date]"===Object.prototype.toString.call(e)}function h(e,t){var n,r=[],i=e.length;for(n=0;n<i;++n)r.push(t(e[n],n));return r}function f(e,t){for(var n in t)o(t,n)&&(e[n]=t[n]);return o(t,"toString")&&(e.toString=t.toString),o(t,"valueOf")&&(e.valueOf=t.valueOf),e}function p(e,t,n,r){return Yn(e,t,n,r,!0).utc()}function v(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidEra:null,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],era:null,meridiem:null,rfc2822:!1,weekdayMismatch:!1}}function m(e){return null==e._pf&&(e._pf=v()),e._pf}function g(e){if(null==e._isValid){var t=m(e),r=n.call(t.parsedDateParts,(function(e){return null!=e})),i=!isNaN(e._d.getTime())&&t.overflow<0&&!t.empty&&!t.invalidEra&&!t.invalidMonth&&!t.invalidWeekday&&!t.weekdayMismatch&&!t.nullInput&&!t.invalidFormat&&!t.userInvalidated&&(!t.meridiem||t.meridiem&&r);if(e._strict&&(i=i&&0===t.charsLeftOver&&0===t.unusedTokens.length&&void 0===t.bigHour),null!=Object.isFrozen&&Object.isFrozen(e))return i;e._isValid=i}return e._isValid}function y(e){var t=p(NaN);return null!=e?f(m(t),e):m(t).userInvalidated=!0,t}n=Array.prototype.some?Array.prototype.some:function(e){var t,n=Object(this),r=n.length>>>0;for(t=0;t<r;t++)if(t in n&&e.call(this,n[t],t,n))return!0;return!1};var b=r.momentProperties=[],k=!1;function x(e,t){var n,r,i,a=b.length;if(u(t._isAMomentObject)||(e._isAMomentObject=t._isAMomentObject),u(t._i)||(e._i=t._i),u(t._f)||(e._f=t._f),u(t._l)||(e._l=t._l),u(t._strict)||(e._strict=t._strict),u(t._tzm)||(e._tzm=t._tzm),u(t._isUTC)||(e._isUTC=t._isUTC),u(t._offset)||(e._offset=t._offset),u(t._pf)||(e._pf=m(t)),u(t._locale)||(e._locale=t._locale),a>0)for(n=0;n<a;n++)u(i=t[r=b[n]])||(e[r]=i);return e}function w(e){x(this,e),this._d=new Date(null!=e._d?e._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),!1===k&&(k=!0,r.updateOffset(this),k=!1)}function T(e){return e instanceof w||null!=e&&null!=e._isAMomentObject}function E(e){!1===r.suppressDeprecationWarnings&&"undefined"!==typeof console&&console.warn&&console.warn("Deprecation warning: "+e)}function _(e,t){var n=!0;return f((function(){if(null!=r.deprecationHandler&&r.deprecationHandler(null,e),n){var i,a,s,c=[],u=arguments.length;for(a=0;a<u;a++){if(i="","object"===typeof arguments[a]){for(s in i+="\n["+a+"] ",arguments[0])o(arguments[0],s)&&(i+=s+": "+arguments[0][s]+", ");i=i.slice(0,-2)}else i=arguments[a];c.push(i)}E(e+"\nArguments: "+Array.prototype.slice.call(c).join("")+"\n"+(new Error).stack),n=!1}return t.apply(this,arguments)}),t)}var S,A={};function C(e,t){null!=r.deprecationHandler&&r.deprecationHandler(e,t),A[e]||(E(t),A[e]=!0)}function I(e){return"undefined"!==typeof Function&&e instanceof Function||"[object Function]"===Object.prototype.toString.call(e)}function R(e){var t,n;for(n in e)o(e,n)&&(I(t=e[n])?this[n]=t:this["_"+n]=t);this._config=e,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)}function P(e,t){var n,r=f({},e);for(n in t)o(t,n)&&(s(e[n])&&s(t[n])?(r[n]={},f(r[n],e[n]),f(r[n],t[n])):null!=t[n]?r[n]=t[n]:delete r[n]);for(n in e)o(e,n)&&!o(t,n)&&s(e[n])&&(r[n]=f({},r[n]));return r}function D(e){null!=e&&this.set(e)}r.suppressDeprecationWarnings=!1,r.deprecationHandler=null,S=Object.keys?Object.keys:function(e){var t,n=[];for(t in e)o(e,t)&&n.push(t);return n};var N={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"};function O(e,t,n){var r=this._calendar[e]||this._calendar.sameElse;return I(r)?r.call(t,n):r}function L(e,t,n){var r=""+Math.abs(e),i=t-r.length;return(e>=0?n?"+":"":"-")+Math.pow(10,Math.max(0,i)).toString().substr(1)+r}var M=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,j=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,F={},U={};function B(e,t,n,r){var i=r;"string"===typeof r&&(i=function(){return this[r]()}),e&&(U[e]=i),t&&(U[t[0]]=function(){return L(i.apply(this,arguments),t[1],t[2])}),n&&(U[n]=function(){return this.localeData().ordinal(i.apply(this,arguments),e)})}function G(e){return e.match(/\[[\s\S]/)?e.replace(/^\[|\]$/g,""):e.replace(/\\/g,"")}function V(e){var t,n,r=e.match(M);for(t=0,n=r.length;t<n;t++)U[r[t]]?r[t]=U[r[t]]:r[t]=G(r[t]);return function(t){var i,a="";for(i=0;i<n;i++)a+=I(r[i])?r[i].call(t,e):r[i];return a}}function H(e,t){return e.isValid()?(t=z(t,e.localeData()),F[t]=F[t]||V(t),F[t](e)):e.localeData().invalidDate()}function z(e,t){var n=5;function r(e){return t.longDateFormat(e)||e}for(j.lastIndex=0;n>=0&&j.test(e);)e=e.replace(j,r),j.lastIndex=0,n-=1;return e}var W={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};function K(e){var t=this._longDateFormat[e],n=this._longDateFormat[e.toUpperCase()];return t||!n?t:(this._longDateFormat[e]=n.match(M).map((function(e){return"MMMM"===e||"MM"===e||"DD"===e||"dddd"===e?e.slice(1):e})).join(""),this._longDateFormat[e])}var q="Invalid date";function Y(){return this._invalidDate}var J="%d",Q=/\d{1,2}/;function X(e){return this._ordinal.replace("%d",e)}var Z={future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function $(e,t,n,r){var i=this._relativeTime[n];return I(i)?i(e,t,n,r):i.replace(/%d/i,e)}function ee(e,t){var n=this._relativeTime[e>0?"future":"past"];return I(n)?n(t):n.replace(/%s/i,t)}var te={};function ne(e,t){var n=e.toLowerCase();te[n]=te[n+"s"]=te[t]=e}function re(e){return"string"===typeof e?te[e]||te[e.toLowerCase()]:void 0}function ie(e){var t,n,r={};for(n in e)o(e,n)&&(t=re(n))&&(r[t]=e[n]);return r}var ae={};function se(e,t){ae[e]=t}function oe(e){var t,n=[];for(t in e)o(e,t)&&n.push({unit:t,priority:ae[t]});return n.sort((function(e,t){return e.priority-t.priority})),n}function ce(e){return e%4===0&&e%100!==0||e%400===0}function ue(e){return e<0?Math.ceil(e)||0:Math.floor(e)}function le(e){var t=+e,n=0;return 0!==t&&isFinite(t)&&(n=ue(t)),n}function de(e,t){return function(n){return null!=n?(fe(this,e,n),r.updateOffset(this,t),this):he(this,e)}}function he(e,t){return e.isValid()?e._d["get"+(e._isUTC?"UTC":"")+t]():NaN}function fe(e,t,n){e.isValid()&&!isNaN(n)&&("FullYear"===t&&ce(e.year())&&1===e.month()&&29===e.date()?(n=le(n),e._d["set"+(e._isUTC?"UTC":"")+t](n,e.month(),$e(n,e.month()))):e._d["set"+(e._isUTC?"UTC":"")+t](n))}function pe(e){return I(this[e=re(e)])?this[e]():this}function ve(e,t){if("object"===typeof e){var n,r=oe(e=ie(e)),i=r.length;for(n=0;n<i;n++)this[r[n].unit](e[r[n].unit])}else if(I(this[e=re(e)]))return this[e](t);return this}var me,ge=/\d/,ye=/\d\d/,be=/\d{3}/,ke=/\d{4}/,xe=/[+-]?\d{6}/,we=/\d\d?/,Te=/\d\d\d\d?/,Ee=/\d\d\d\d\d\d?/,_e=/\d{1,3}/,Se=/\d{1,4}/,Ae=/[+-]?\d{1,6}/,Ce=/\d+/,Ie=/[+-]?\d+/,Re=/Z|[+-]\d\d:?\d\d/gi,Pe=/Z|[+-]\d\d(?::?\d\d)?/gi,De=/[+-]?\d+(\.\d{1,3})?/,Ne=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i;function Oe(e,t,n){me[e]=I(t)?t:function(e,r){return e&&n?n:t}}function Le(e,t){return o(me,e)?me[e](t._strict,t._locale):new RegExp(Me(e))}function Me(e){return je(e.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,(function(e,t,n,r,i){return t||n||r||i})))}function je(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}me={};var Fe={};function Ue(e,t){var n,r,i=t;for("string"===typeof e&&(e=[e]),l(t)&&(i=function(e,n){n[t]=le(e)}),r=e.length,n=0;n<r;n++)Fe[e[n]]=i}function Be(e,t){Ue(e,(function(e,n,r,i){r._w=r._w||{},t(e,r._w,r,i)}))}function Ge(e,t,n){null!=t&&o(Fe,e)&&Fe[e](t,n._a,n,e)}var Ve,He=0,ze=1,We=2,Ke=3,qe=4,Ye=5,Je=6,Qe=7,Xe=8;function Ze(e,t){return(e%t+t)%t}function $e(e,t){if(isNaN(e)||isNaN(t))return NaN;var n=Ze(t,12);return e+=(t-n)/12,1===n?ce(e)?29:28:31-n%7%2}Ve=Array.prototype.indexOf?Array.prototype.indexOf:function(e){var t;for(t=0;t<this.length;++t)if(this[t]===e)return t;return-1},B("M",["MM",2],"Mo",(function(){return this.month()+1})),B("MMM",0,0,(function(e){return this.localeData().monthsShort(this,e)})),B("MMMM",0,0,(function(e){return this.localeData().months(this,e)})),ne("month","M"),se("month",8),Oe("M",we),Oe("MM",we,ye),Oe("MMM",(function(e,t){return t.monthsShortRegex(e)})),Oe("MMMM",(function(e,t){return t.monthsRegex(e)})),Ue(["M","MM"],(function(e,t){t[ze]=le(e)-1})),Ue(["MMM","MMMM"],(function(e,t,n,r){var i=n._locale.monthsParse(e,r,n._strict);null!=i?t[ze]=i:m(n).invalidMonth=e}));var et="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),tt="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),nt=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,rt=Ne,it=Ne;function at(e,t){return e?a(this._months)?this._months[e.month()]:this._months[(this._months.isFormat||nt).test(t)?"format":"standalone"][e.month()]:a(this._months)?this._months:this._months.standalone}function st(e,t){return e?a(this._monthsShort)?this._monthsShort[e.month()]:this._monthsShort[nt.test(t)?"format":"standalone"][e.month()]:a(this._monthsShort)?this._monthsShort:this._monthsShort.standalone}function ot(e,t,n){var r,i,a,s=e.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],r=0;r<12;++r)a=p([2e3,r]),this._shortMonthsParse[r]=this.monthsShort(a,"").toLocaleLowerCase(),this._longMonthsParse[r]=this.months(a,"").toLocaleLowerCase();return n?"MMM"===t?-1!==(i=Ve.call(this._shortMonthsParse,s))?i:null:-1!==(i=Ve.call(this._longMonthsParse,s))?i:null:"MMM"===t?-1!==(i=Ve.call(this._shortMonthsParse,s))||-1!==(i=Ve.call(this._longMonthsParse,s))?i:null:-1!==(i=Ve.call(this._longMonthsParse,s))||-1!==(i=Ve.call(this._shortMonthsParse,s))?i:null}function ct(e,t,n){var r,i,a;if(this._monthsParseExact)return ot.call(this,e,t,n);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),r=0;r<12;r++){if(i=p([2e3,r]),n&&!this._longMonthsParse[r]&&(this._longMonthsParse[r]=new RegExp("^"+this.months(i,"").replace(".","")+"$","i"),this._shortMonthsParse[r]=new RegExp("^"+this.monthsShort(i,"").replace(".","")+"$","i")),n||this._monthsParse[r]||(a="^"+this.months(i,"")+"|^"+this.monthsShort(i,""),this._monthsParse[r]=new RegExp(a.replace(".",""),"i")),n&&"MMMM"===t&&this._longMonthsParse[r].test(e))return r;if(n&&"MMM"===t&&this._shortMonthsParse[r].test(e))return r;if(!n&&this._monthsParse[r].test(e))return r}}function ut(e,t){var n;if(!e.isValid())return e;if("string"===typeof t)if(/^\d+$/.test(t))t=le(t);else if(!l(t=e.localeData().monthsParse(t)))return e;return n=Math.min(e.date(),$e(e.year(),t)),e._d["set"+(e._isUTC?"UTC":"")+"Month"](t,n),e}function lt(e){return null!=e?(ut(this,e),r.updateOffset(this,!0),this):he(this,"Month")}function dt(){return $e(this.year(),this.month())}function ht(e){return this._monthsParseExact?(o(this,"_monthsRegex")||pt.call(this),e?this._monthsShortStrictRegex:this._monthsShortRegex):(o(this,"_monthsShortRegex")||(this._monthsShortRegex=rt),this._monthsShortStrictRegex&&e?this._monthsShortStrictRegex:this._monthsShortRegex)}function ft(e){return this._monthsParseExact?(o(this,"_monthsRegex")||pt.call(this),e?this._monthsStrictRegex:this._monthsRegex):(o(this,"_monthsRegex")||(this._monthsRegex=it),this._monthsStrictRegex&&e?this._monthsStrictRegex:this._monthsRegex)}function pt(){function e(e,t){return t.length-e.length}var t,n,r=[],i=[],a=[];for(t=0;t<12;t++)n=p([2e3,t]),r.push(this.monthsShort(n,"")),i.push(this.months(n,"")),a.push(this.months(n,"")),a.push(this.monthsShort(n,""));for(r.sort(e),i.sort(e),a.sort(e),t=0;t<12;t++)r[t]=je(r[t]),i[t]=je(i[t]);for(t=0;t<24;t++)a[t]=je(a[t]);this._monthsRegex=new RegExp("^("+a.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+i.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+r.join("|")+")","i")}function vt(e){return ce(e)?366:365}B("Y",0,0,(function(){var e=this.year();return e<=9999?L(e,4):"+"+e})),B(0,["YY",2],0,(function(){return this.year()%100})),B(0,["YYYY",4],0,"year"),B(0,["YYYYY",5],0,"year"),B(0,["YYYYYY",6,!0],0,"year"),ne("year","y"),se("year",1),Oe("Y",Ie),Oe("YY",we,ye),Oe("YYYY",Se,ke),Oe("YYYYY",Ae,xe),Oe("YYYYYY",Ae,xe),Ue(["YYYYY","YYYYYY"],He),Ue("YYYY",(function(e,t){t[He]=2===e.length?r.parseTwoDigitYear(e):le(e)})),Ue("YY",(function(e,t){t[He]=r.parseTwoDigitYear(e)})),Ue("Y",(function(e,t){t[He]=parseInt(e,10)})),r.parseTwoDigitYear=function(e){return le(e)+(le(e)>68?1900:2e3)};var mt=de("FullYear",!0);function gt(){return ce(this.year())}function yt(e,t,n,r,i,a,s){var o;return e<100&&e>=0?(o=new Date(e+400,t,n,r,i,a,s),isFinite(o.getFullYear())&&o.setFullYear(e)):o=new Date(e,t,n,r,i,a,s),o}function bt(e){var t,n;return e<100&&e>=0?((n=Array.prototype.slice.call(arguments))[0]=e+400,t=new Date(Date.UTC.apply(null,n)),isFinite(t.getUTCFullYear())&&t.setUTCFullYear(e)):t=new Date(Date.UTC.apply(null,arguments)),t}function kt(e,t,n){var r=7+t-n;return-(7+bt(e,0,r).getUTCDay()-t)%7+r-1}function xt(e,t,n,r,i){var a,s,o=1+7*(t-1)+(7+n-r)%7+kt(e,r,i);return o<=0?s=vt(a=e-1)+o:o>vt(e)?(a=e+1,s=o-vt(e)):(a=e,s=o),{year:a,dayOfYear:s}}function wt(e,t,n){var r,i,a=kt(e.year(),t,n),s=Math.floor((e.dayOfYear()-a-1)/7)+1;return s<1?r=s+Tt(i=e.year()-1,t,n):s>Tt(e.year(),t,n)?(r=s-Tt(e.year(),t,n),i=e.year()+1):(i=e.year(),r=s),{week:r,year:i}}function Tt(e,t,n){var r=kt(e,t,n),i=kt(e+1,t,n);return(vt(e)-r+i)/7}function Et(e){return wt(e,this._week.dow,this._week.doy).week}B("w",["ww",2],"wo","week"),B("W",["WW",2],"Wo","isoWeek"),ne("week","w"),ne("isoWeek","W"),se("week",5),se("isoWeek",5),Oe("w",we),Oe("ww",we,ye),Oe("W",we),Oe("WW",we,ye),Be(["w","ww","W","WW"],(function(e,t,n,r){t[r.substr(0,1)]=le(e)}));var _t={dow:0,doy:6};function St(){return this._week.dow}function At(){return this._week.doy}function Ct(e){var t=this.localeData().week(this);return null==e?t:this.add(7*(e-t),"d")}function It(e){var t=wt(this,1,4).week;return null==e?t:this.add(7*(e-t),"d")}function Rt(e,t){return"string"!==typeof e?e:isNaN(e)?"number"===typeof(e=t.weekdaysParse(e))?e:null:parseInt(e,10)}function Pt(e,t){return"string"===typeof e?t.weekdaysParse(e)%7||7:isNaN(e)?null:e}function Dt(e,t){return e.slice(t,7).concat(e.slice(0,t))}B("d",0,"do","day"),B("dd",0,0,(function(e){return this.localeData().weekdaysMin(this,e)})),B("ddd",0,0,(function(e){return this.localeData().weekdaysShort(this,e)})),B("dddd",0,0,(function(e){return this.localeData().weekdays(this,e)})),B("e",0,0,"weekday"),B("E",0,0,"isoWeekday"),ne("day","d"),ne("weekday","e"),ne("isoWeekday","E"),se("day",11),se("weekday",11),se("isoWeekday",11),Oe("d",we),Oe("e",we),Oe("E",we),Oe("dd",(function(e,t){return t.weekdaysMinRegex(e)})),Oe("ddd",(function(e,t){return t.weekdaysShortRegex(e)})),Oe("dddd",(function(e,t){return t.weekdaysRegex(e)})),Be(["dd","ddd","dddd"],(function(e,t,n,r){var i=n._locale.weekdaysParse(e,r,n._strict);null!=i?t.d=i:m(n).invalidWeekday=e})),Be(["d","e","E"],(function(e,t,n,r){t[r]=le(e)}));var Nt="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),Ot="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),Lt="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),Mt=Ne,jt=Ne,Ft=Ne;function Ut(e,t){var n=a(this._weekdays)?this._weekdays:this._weekdays[e&&!0!==e&&this._weekdays.isFormat.test(t)?"format":"standalone"];return!0===e?Dt(n,this._week.dow):e?n[e.day()]:n}function Bt(e){return!0===e?Dt(this._weekdaysShort,this._week.dow):e?this._weekdaysShort[e.day()]:this._weekdaysShort}function Gt(e){return!0===e?Dt(this._weekdaysMin,this._week.dow):e?this._weekdaysMin[e.day()]:this._weekdaysMin}function Vt(e,t,n){var r,i,a,s=e.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],r=0;r<7;++r)a=p([2e3,1]).day(r),this._minWeekdaysParse[r]=this.weekdaysMin(a,"").toLocaleLowerCase(),this._shortWeekdaysParse[r]=this.weekdaysShort(a,"").toLocaleLowerCase(),this._weekdaysParse[r]=this.weekdays(a,"").toLocaleLowerCase();return n?"dddd"===t?-1!==(i=Ve.call(this._weekdaysParse,s))?i:null:"ddd"===t?-1!==(i=Ve.call(this._shortWeekdaysParse,s))?i:null:-1!==(i=Ve.call(this._minWeekdaysParse,s))?i:null:"dddd"===t?-1!==(i=Ve.call(this._weekdaysParse,s))||-1!==(i=Ve.call(this._shortWeekdaysParse,s))||-1!==(i=Ve.call(this._minWeekdaysParse,s))?i:null:"ddd"===t?-1!==(i=Ve.call(this._shortWeekdaysParse,s))||-1!==(i=Ve.call(this._weekdaysParse,s))||-1!==(i=Ve.call(this._minWeekdaysParse,s))?i:null:-1!==(i=Ve.call(this._minWeekdaysParse,s))||-1!==(i=Ve.call(this._weekdaysParse,s))||-1!==(i=Ve.call(this._shortWeekdaysParse,s))?i:null}function Ht(e,t,n){var r,i,a;if(this._weekdaysParseExact)return Vt.call(this,e,t,n);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),r=0;r<7;r++){if(i=p([2e3,1]).day(r),n&&!this._fullWeekdaysParse[r]&&(this._fullWeekdaysParse[r]=new RegExp("^"+this.weekdays(i,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[r]=new RegExp("^"+this.weekdaysShort(i,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[r]=new RegExp("^"+this.weekdaysMin(i,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[r]||(a="^"+this.weekdays(i,"")+"|^"+this.weekdaysShort(i,"")+"|^"+this.weekdaysMin(i,""),this._weekdaysParse[r]=new RegExp(a.replace(".",""),"i")),n&&"dddd"===t&&this._fullWeekdaysParse[r].test(e))return r;if(n&&"ddd"===t&&this._shortWeekdaysParse[r].test(e))return r;if(n&&"dd"===t&&this._minWeekdaysParse[r].test(e))return r;if(!n&&this._weekdaysParse[r].test(e))return r}}function zt(e){if(!this.isValid())return null!=e?this:NaN;var t=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=e?(e=Rt(e,this.localeData()),this.add(e-t,"d")):t}function Wt(e){if(!this.isValid())return null!=e?this:NaN;var t=(this.day()+7-this.localeData()._week.dow)%7;return null==e?t:this.add(e-t,"d")}function Kt(e){if(!this.isValid())return null!=e?this:NaN;if(null!=e){var t=Pt(e,this.localeData());return this.day(this.day()%7?t:t-7)}return this.day()||7}function qt(e){return this._weekdaysParseExact?(o(this,"_weekdaysRegex")||Qt.call(this),e?this._weekdaysStrictRegex:this._weekdaysRegex):(o(this,"_weekdaysRegex")||(this._weekdaysRegex=Mt),this._weekdaysStrictRegex&&e?this._weekdaysStrictRegex:this._weekdaysRegex)}function Yt(e){return this._weekdaysParseExact?(o(this,"_weekdaysRegex")||Qt.call(this),e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(o(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=jt),this._weekdaysShortStrictRegex&&e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)}function Jt(e){return this._weekdaysParseExact?(o(this,"_weekdaysRegex")||Qt.call(this),e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(o(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=Ft),this._weekdaysMinStrictRegex&&e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)}function Qt(){function e(e,t){return t.length-e.length}var t,n,r,i,a,s=[],o=[],c=[],u=[];for(t=0;t<7;t++)n=p([2e3,1]).day(t),r=je(this.weekdaysMin(n,"")),i=je(this.weekdaysShort(n,"")),a=je(this.weekdays(n,"")),s.push(r),o.push(i),c.push(a),u.push(r),u.push(i),u.push(a);s.sort(e),o.sort(e),c.sort(e),u.sort(e),this._weekdaysRegex=new RegExp("^("+u.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+c.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+o.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+s.join("|")+")","i")}function Xt(){return this.hours()%12||12}function Zt(){return this.hours()||24}function $t(e,t){B(e,0,0,(function(){return this.localeData().meridiem(this.hours(),this.minutes(),t)}))}function en(e,t){return t._meridiemParse}function tn(e){return"p"===(e+"").toLowerCase().charAt(0)}B("H",["HH",2],0,"hour"),B("h",["hh",2],0,Xt),B("k",["kk",2],0,Zt),B("hmm",0,0,(function(){return""+Xt.apply(this)+L(this.minutes(),2)})),B("hmmss",0,0,(function(){return""+Xt.apply(this)+L(this.minutes(),2)+L(this.seconds(),2)})),B("Hmm",0,0,(function(){return""+this.hours()+L(this.minutes(),2)})),B("Hmmss",0,0,(function(){return""+this.hours()+L(this.minutes(),2)+L(this.seconds(),2)})),$t("a",!0),$t("A",!1),ne("hour","h"),se("hour",13),Oe("a",en),Oe("A",en),Oe("H",we),Oe("h",we),Oe("k",we),Oe("HH",we,ye),Oe("hh",we,ye),Oe("kk",we,ye),Oe("hmm",Te),Oe("hmmss",Ee),Oe("Hmm",Te),Oe("Hmmss",Ee),Ue(["H","HH"],Ke),Ue(["k","kk"],(function(e,t,n){var r=le(e);t[Ke]=24===r?0:r})),Ue(["a","A"],(function(e,t,n){n._isPm=n._locale.isPM(e),n._meridiem=e})),Ue(["h","hh"],(function(e,t,n){t[Ke]=le(e),m(n).bigHour=!0})),Ue("hmm",(function(e,t,n){var r=e.length-2;t[Ke]=le(e.substr(0,r)),t[qe]=le(e.substr(r)),m(n).bigHour=!0})),Ue("hmmss",(function(e,t,n){var r=e.length-4,i=e.length-2;t[Ke]=le(e.substr(0,r)),t[qe]=le(e.substr(r,2)),t[Ye]=le(e.substr(i)),m(n).bigHour=!0})),Ue("Hmm",(function(e,t,n){var r=e.length-2;t[Ke]=le(e.substr(0,r)),t[qe]=le(e.substr(r))})),Ue("Hmmss",(function(e,t,n){var r=e.length-4,i=e.length-2;t[Ke]=le(e.substr(0,r)),t[qe]=le(e.substr(r,2)),t[Ye]=le(e.substr(i))}));var nn=/[ap]\.?m?\.?/i,rn=de("Hours",!0);function an(e,t,n){return e>11?n?"pm":"PM":n?"am":"AM"}var sn,on={calendar:N,longDateFormat:W,invalidDate:q,ordinal:J,dayOfMonthOrdinalParse:Q,relativeTime:Z,months:et,monthsShort:tt,week:_t,weekdays:Nt,weekdaysMin:Lt,weekdaysShort:Ot,meridiemParse:nn},cn={},un={};function ln(e,t){var n,r=Math.min(e.length,t.length);for(n=0;n<r;n+=1)if(e[n]!==t[n])return n;return r}function dn(e){return e?e.toLowerCase().replace("_","-"):e}function hn(e){for(var t,n,r,i,a=0;a<e.length;){for(t=(i=dn(e[a]).split("-")).length,n=(n=dn(e[a+1]))?n.split("-"):null;t>0;){if(r=pn(i.slice(0,t).join("-")))return r;if(n&&n.length>=t&&ln(i,n)>=t-1)break;t--}a++}return sn}function fn(e){return null!=e.match("^[^/\\\\]*$")}function pn(t){var n=null;if(void 0===cn[t]&&e&&e.exports&&fn(t))try{n=sn._abbr,Object(function(){var e=new Error("Cannot find module 'undefined'");throw e.code="MODULE_NOT_FOUND",e}()),vn(n)}catch(r){cn[t]=null}return cn[t]}function vn(e,t){var n;return e&&((n=u(t)?yn(e):mn(e,t))?sn=n:"undefined"!==typeof console&&console.warn&&console.warn("Locale "+e+" not found. Did you forget to load it?")),sn._abbr}function mn(e,t){if(null!==t){var n,r=on;if(t.abbr=e,null!=cn[e])C("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),r=cn[e]._config;else if(null!=t.parentLocale)if(null!=cn[t.parentLocale])r=cn[t.parentLocale]._config;else{if(null==(n=pn(t.parentLocale)))return un[t.parentLocale]||(un[t.parentLocale]=[]),un[t.parentLocale].push({name:e,config:t}),null;r=n._config}return cn[e]=new D(P(r,t)),un[e]&&un[e].forEach((function(e){mn(e.name,e.config)})),vn(e),cn[e]}return delete cn[e],null}function gn(e,t){if(null!=t){var n,r,i=on;null!=cn[e]&&null!=cn[e].parentLocale?cn[e].set(P(cn[e]._config,t)):(null!=(r=pn(e))&&(i=r._config),t=P(i,t),null==r&&(t.abbr=e),(n=new D(t)).parentLocale=cn[e],cn[e]=n),vn(e)}else null!=cn[e]&&(null!=cn[e].parentLocale?(cn[e]=cn[e].parentLocale,e===vn()&&vn(e)):null!=cn[e]&&delete cn[e]);return cn[e]}function yn(e){var t;if(e&&e._locale&&e._locale._abbr&&(e=e._locale._abbr),!e)return sn;if(!a(e)){if(t=pn(e))return t;e=[e]}return hn(e)}function bn(){return S(cn)}function kn(e){var t,n=e._a;return n&&-2===m(e).overflow&&(t=n[ze]<0||n[ze]>11?ze:n[We]<1||n[We]>$e(n[He],n[ze])?We:n[Ke]<0||n[Ke]>24||24===n[Ke]&&(0!==n[qe]||0!==n[Ye]||0!==n[Je])?Ke:n[qe]<0||n[qe]>59?qe:n[Ye]<0||n[Ye]>59?Ye:n[Je]<0||n[Je]>999?Je:-1,m(e)._overflowDayOfYear&&(t<He||t>We)&&(t=We),m(e)._overflowWeeks&&-1===t&&(t=Qe),m(e)._overflowWeekday&&-1===t&&(t=Xe),m(e).overflow=t),e}var xn=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,wn=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d|))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Tn=/Z|[+-]\d\d(?::?\d\d)?/,En=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/],["YYYYMM",/\d{6}/,!1],["YYYY",/\d{4}/,!1]],_n=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],Sn=/^\/?Date\((-?\d+)/i,An=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,Cn={UT:0,GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};function In(e){var t,n,r,i,a,s,o=e._i,c=xn.exec(o)||wn.exec(o),u=En.length,l=_n.length;if(c){for(m(e).iso=!0,t=0,n=u;t<n;t++)if(En[t][1].exec(c[1])){i=En[t][0],r=!1!==En[t][2];break}if(null==i)return void(e._isValid=!1);if(c[3]){for(t=0,n=l;t<n;t++)if(_n[t][1].exec(c[3])){a=(c[2]||" ")+_n[t][0];break}if(null==a)return void(e._isValid=!1)}if(!r&&null!=a)return void(e._isValid=!1);if(c[4]){if(!Tn.exec(c[4]))return void(e._isValid=!1);s="Z"}e._f=i+(a||"")+(s||""),Gn(e)}else e._isValid=!1}function Rn(e,t,n,r,i,a){var s=[Pn(e),tt.indexOf(t),parseInt(n,10),parseInt(r,10),parseInt(i,10)];return a&&s.push(parseInt(a,10)),s}function Pn(e){var t=parseInt(e,10);return t<=49?2e3+t:t<=999?1900+t:t}function Dn(e){return e.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function Nn(e,t,n){return!e||Ot.indexOf(e)===new Date(t[0],t[1],t[2]).getDay()||(m(n).weekdayMismatch=!0,n._isValid=!1,!1)}function On(e,t,n){if(e)return Cn[e];if(t)return 0;var r=parseInt(n,10),i=r%100;return(r-i)/100*60+i}function Ln(e){var t,n=An.exec(Dn(e._i));if(n){if(t=Rn(n[4],n[3],n[2],n[5],n[6],n[7]),!Nn(n[1],t,e))return;e._a=t,e._tzm=On(n[8],n[9],n[10]),e._d=bt.apply(null,e._a),e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),m(e).rfc2822=!0}else e._isValid=!1}function Mn(e){var t=Sn.exec(e._i);null===t?(In(e),!1===e._isValid&&(delete e._isValid,Ln(e),!1===e._isValid&&(delete e._isValid,e._strict?e._isValid=!1:r.createFromInputFallback(e)))):e._d=new Date(+t[1])}function jn(e,t,n){return null!=e?e:null!=t?t:n}function Fn(e){var t=new Date(r.now());return e._useUTC?[t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()]:[t.getFullYear(),t.getMonth(),t.getDate()]}function Un(e){var t,n,r,i,a,s=[];if(!e._d){for(r=Fn(e),e._w&&null==e._a[We]&&null==e._a[ze]&&Bn(e),null!=e._dayOfYear&&(a=jn(e._a[He],r[He]),(e._dayOfYear>vt(a)||0===e._dayOfYear)&&(m(e)._overflowDayOfYear=!0),n=bt(a,0,e._dayOfYear),e._a[ze]=n.getUTCMonth(),e._a[We]=n.getUTCDate()),t=0;t<3&&null==e._a[t];++t)e._a[t]=s[t]=r[t];for(;t<7;t++)e._a[t]=s[t]=null==e._a[t]?2===t?1:0:e._a[t];24===e._a[Ke]&&0===e._a[qe]&&0===e._a[Ye]&&0===e._a[Je]&&(e._nextDay=!0,e._a[Ke]=0),e._d=(e._useUTC?bt:yt).apply(null,s),i=e._useUTC?e._d.getUTCDay():e._d.getDay(),null!=e._tzm&&e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),e._nextDay&&(e._a[Ke]=24),e._w&&"undefined"!==typeof e._w.d&&e._w.d!==i&&(m(e).weekdayMismatch=!0)}}function Bn(e){var t,n,r,i,a,s,o,c,u;null!=(t=e._w).GG||null!=t.W||null!=t.E?(a=1,s=4,n=jn(t.GG,e._a[He],wt(Jn(),1,4).year),r=jn(t.W,1),((i=jn(t.E,1))<1||i>7)&&(c=!0)):(a=e._locale._week.dow,s=e._locale._week.doy,u=wt(Jn(),a,s),n=jn(t.gg,e._a[He],u.year),r=jn(t.w,u.week),null!=t.d?((i=t.d)<0||i>6)&&(c=!0):null!=t.e?(i=t.e+a,(t.e<0||t.e>6)&&(c=!0)):i=a),r<1||r>Tt(n,a,s)?m(e)._overflowWeeks=!0:null!=c?m(e)._overflowWeekday=!0:(o=xt(n,r,i,a,s),e._a[He]=o.year,e._dayOfYear=o.dayOfYear)}function Gn(e){if(e._f!==r.ISO_8601)if(e._f!==r.RFC_2822){e._a=[],m(e).empty=!0;var t,n,i,a,s,o,c,u=""+e._i,l=u.length,d=0;for(c=(i=z(e._f,e._locale).match(M)||[]).length,t=0;t<c;t++)a=i[t],(n=(u.match(Le(a,e))||[])[0])&&((s=u.substr(0,u.indexOf(n))).length>0&&m(e).unusedInput.push(s),u=u.slice(u.indexOf(n)+n.length),d+=n.length),U[a]?(n?m(e).empty=!1:m(e).unusedTokens.push(a),Ge(a,n,e)):e._strict&&!n&&m(e).unusedTokens.push(a);m(e).charsLeftOver=l-d,u.length>0&&m(e).unusedInput.push(u),e._a[Ke]<=12&&!0===m(e).bigHour&&e._a[Ke]>0&&(m(e).bigHour=void 0),m(e).parsedDateParts=e._a.slice(0),m(e).meridiem=e._meridiem,e._a[Ke]=Vn(e._locale,e._a[Ke],e._meridiem),null!==(o=m(e).era)&&(e._a[He]=e._locale.erasConvertYear(o,e._a[He])),Un(e),kn(e)}else Ln(e);else In(e)}function Vn(e,t,n){var r;return null==n?t:null!=e.meridiemHour?e.meridiemHour(t,n):null!=e.isPM?((r=e.isPM(n))&&t<12&&(t+=12),r||12!==t||(t=0),t):t}function Hn(e){var t,n,r,i,a,s,o=!1,c=e._f.length;if(0===c)return m(e).invalidFormat=!0,void(e._d=new Date(NaN));for(i=0;i<c;i++)a=0,s=!1,t=x({},e),null!=e._useUTC&&(t._useUTC=e._useUTC),t._f=e._f[i],Gn(t),g(t)&&(s=!0),a+=m(t).charsLeftOver,a+=10*m(t).unusedTokens.length,m(t).score=a,o?a<r&&(r=a,n=t):(null==r||a<r||s)&&(r=a,n=t,s&&(o=!0));f(e,n||t)}function zn(e){if(!e._d){var t=ie(e._i),n=void 0===t.day?t.date:t.day;e._a=h([t.year,t.month,n,t.hour,t.minute,t.second,t.millisecond],(function(e){return e&&parseInt(e,10)})),Un(e)}}function Wn(e){var t=new w(kn(Kn(e)));return t._nextDay&&(t.add(1,"d"),t._nextDay=void 0),t}function Kn(e){var t=e._i,n=e._f;return e._locale=e._locale||yn(e._l),null===t||void 0===n&&""===t?y({nullInput:!0}):("string"===typeof t&&(e._i=t=e._locale.preparse(t)),T(t)?new w(kn(t)):(d(t)?e._d=t:a(n)?Hn(e):n?Gn(e):qn(e),g(e)||(e._d=null),e))}function qn(e){var t=e._i;u(t)?e._d=new Date(r.now()):d(t)?e._d=new Date(t.valueOf()):"string"===typeof t?Mn(e):a(t)?(e._a=h(t.slice(0),(function(e){return parseInt(e,10)})),Un(e)):s(t)?zn(e):l(t)?e._d=new Date(t):r.createFromInputFallback(e)}function Yn(e,t,n,r,i){var o={};return!0!==t&&!1!==t||(r=t,t=void 0),!0!==n&&!1!==n||(r=n,n=void 0),(s(e)&&c(e)||a(e)&&0===e.length)&&(e=void 0),o._isAMomentObject=!0,o._useUTC=o._isUTC=i,o._l=n,o._i=e,o._f=t,o._strict=r,Wn(o)}function Jn(e,t,n,r){return Yn(e,t,n,r,!1)}r.createFromInputFallback=_("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",(function(e){e._d=new Date(e._i+(e._useUTC?" UTC":""))})),r.ISO_8601=function(){},r.RFC_2822=function(){};var Qn=_("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",(function(){var e=Jn.apply(null,arguments);return this.isValid()&&e.isValid()?e<this?this:e:y()})),Xn=_("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",(function(){var e=Jn.apply(null,arguments);return this.isValid()&&e.isValid()?e>this?this:e:y()}));function Zn(e,t){var n,r;if(1===t.length&&a(t[0])&&(t=t[0]),!t.length)return Jn();for(n=t[0],r=1;r<t.length;++r)t[r].isValid()&&!t[r][e](n)||(n=t[r]);return n}function $n(){return Zn("isBefore",[].slice.call(arguments,0))}function er(){return Zn("isAfter",[].slice.call(arguments,0))}var tr=function(){return Date.now?Date.now():+new Date},nr=["year","quarter","month","week","day","hour","minute","second","millisecond"];function rr(e){var t,n,r=!1,i=nr.length;for(t in e)if(o(e,t)&&(-1===Ve.call(nr,t)||null!=e[t]&&isNaN(e[t])))return!1;for(n=0;n<i;++n)if(e[nr[n]]){if(r)return!1;parseFloat(e[nr[n]])!==le(e[nr[n]])&&(r=!0)}return!0}function ir(){return this._isValid}function ar(){return Cr(NaN)}function sr(e){var t=ie(e),n=t.year||0,r=t.quarter||0,i=t.month||0,a=t.week||t.isoWeek||0,s=t.day||0,o=t.hour||0,c=t.minute||0,u=t.second||0,l=t.millisecond||0;this._isValid=rr(t),this._milliseconds=+l+1e3*u+6e4*c+1e3*o*60*60,this._days=+s+7*a,this._months=+i+3*r+12*n,this._data={},this._locale=yn(),this._bubble()}function or(e){return e instanceof sr}function cr(e){return e<0?-1*Math.round(-1*e):Math.round(e)}function ur(e,t,n){var r,i=Math.min(e.length,t.length),a=Math.abs(e.length-t.length),s=0;for(r=0;r<i;r++)(n&&e[r]!==t[r]||!n&&le(e[r])!==le(t[r]))&&s++;return s+a}function lr(e,t){B(e,0,0,(function(){var e=this.utcOffset(),n="+";return e<0&&(e=-e,n="-"),n+L(~~(e/60),2)+t+L(~~e%60,2)}))}lr("Z",":"),lr("ZZ",""),Oe("Z",Pe),Oe("ZZ",Pe),Ue(["Z","ZZ"],(function(e,t,n){n._useUTC=!0,n._tzm=hr(Pe,e)}));var dr=/([\+\-]|\d\d)/gi;function hr(e,t){var n,r,i=(t||"").match(e);return null===i?null:0===(r=60*(n=((i[i.length-1]||[])+"").match(dr)||["-",0,0])[1]+le(n[2]))?0:"+"===n[0]?r:-r}function fr(e,t){var n,i;return t._isUTC?(n=t.clone(),i=(T(e)||d(e)?e.valueOf():Jn(e).valueOf())-n.valueOf(),n._d.setTime(n._d.valueOf()+i),r.updateOffset(n,!1),n):Jn(e).local()}function pr(e){return-Math.round(e._d.getTimezoneOffset())}function vr(e,t,n){var i,a=this._offset||0;if(!this.isValid())return null!=e?this:NaN;if(null!=e){if("string"===typeof e){if(null===(e=hr(Pe,e)))return this}else Math.abs(e)<16&&!n&&(e*=60);return!this._isUTC&&t&&(i=pr(this)),this._offset=e,this._isUTC=!0,null!=i&&this.add(i,"m"),a!==e&&(!t||this._changeInProgress?Nr(this,Cr(e-a,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,r.updateOffset(this,!0),this._changeInProgress=null)),this}return this._isUTC?a:pr(this)}function mr(e,t){return null!=e?("string"!==typeof e&&(e=-e),this.utcOffset(e,t),this):-this.utcOffset()}function gr(e){return this.utcOffset(0,e)}function yr(e){return this._isUTC&&(this.utcOffset(0,e),this._isUTC=!1,e&&this.subtract(pr(this),"m")),this}function br(){if(null!=this._tzm)this.utcOffset(this._tzm,!1,!0);else if("string"===typeof this._i){var e=hr(Re,this._i);null!=e?this.utcOffset(e):this.utcOffset(0,!0)}return this}function kr(e){return!!this.isValid()&&(e=e?Jn(e).utcOffset():0,(this.utcOffset()-e)%60===0)}function xr(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function wr(){if(!u(this._isDSTShifted))return this._isDSTShifted;var e,t={};return x(t,this),(t=Kn(t))._a?(e=t._isUTC?p(t._a):Jn(t._a),this._isDSTShifted=this.isValid()&&ur(t._a,e.toArray())>0):this._isDSTShifted=!1,this._isDSTShifted}function Tr(){return!!this.isValid()&&!this._isUTC}function Er(){return!!this.isValid()&&this._isUTC}function _r(){return!!this.isValid()&&this._isUTC&&0===this._offset}r.updateOffset=function(){};var Sr=/^(-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,Ar=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function Cr(e,t){var n,r,i,a=e,s=null;return or(e)?a={ms:e._milliseconds,d:e._days,M:e._months}:l(e)||!isNaN(+e)?(a={},t?a[t]=+e:a.milliseconds=+e):(s=Sr.exec(e))?(n="-"===s[1]?-1:1,a={y:0,d:le(s[We])*n,h:le(s[Ke])*n,m:le(s[qe])*n,s:le(s[Ye])*n,ms:le(cr(1e3*s[Je]))*n}):(s=Ar.exec(e))?(n="-"===s[1]?-1:1,a={y:Ir(s[2],n),M:Ir(s[3],n),w:Ir(s[4],n),d:Ir(s[5],n),h:Ir(s[6],n),m:Ir(s[7],n),s:Ir(s[8],n)}):null==a?a={}:"object"===typeof a&&("from"in a||"to"in a)&&(i=Pr(Jn(a.from),Jn(a.to)),(a={}).ms=i.milliseconds,a.M=i.months),r=new sr(a),or(e)&&o(e,"_locale")&&(r._locale=e._locale),or(e)&&o(e,"_isValid")&&(r._isValid=e._isValid),r}function Ir(e,t){var n=e&&parseFloat(e.replace(",","."));return(isNaN(n)?0:n)*t}function Rr(e,t){var n={};return n.months=t.month()-e.month()+12*(t.year()-e.year()),e.clone().add(n.months,"M").isAfter(t)&&--n.months,n.milliseconds=+t-+e.clone().add(n.months,"M"),n}function Pr(e,t){var n;return e.isValid()&&t.isValid()?(t=fr(t,e),e.isBefore(t)?n=Rr(e,t):((n=Rr(t,e)).milliseconds=-n.milliseconds,n.months=-n.months),n):{milliseconds:0,months:0}}function Dr(e,t){return function(n,r){var i;return null===r||isNaN(+r)||(C(t,"moment()."+t+"(period, number) is deprecated. Please use moment()."+t+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),i=n,n=r,r=i),Nr(this,Cr(n,r),e),this}}function Nr(e,t,n,i){var a=t._milliseconds,s=cr(t._days),o=cr(t._months);e.isValid()&&(i=null==i||i,o&&ut(e,he(e,"Month")+o*n),s&&fe(e,"Date",he(e,"Date")+s*n),a&&e._d.setTime(e._d.valueOf()+a*n),i&&r.updateOffset(e,s||o))}Cr.fn=sr.prototype,Cr.invalid=ar;var Or=Dr(1,"add"),Lr=Dr(-1,"subtract");function Mr(e){return"string"===typeof e||e instanceof String}function jr(e){return T(e)||d(e)||Mr(e)||l(e)||Ur(e)||Fr(e)||null===e||void 0===e}function Fr(e){var t,n,r=s(e)&&!c(e),i=!1,a=["years","year","y","months","month","M","days","day","d","dates","date","D","hours","hour","h","minutes","minute","m","seconds","second","s","milliseconds","millisecond","ms"],u=a.length;for(t=0;t<u;t+=1)n=a[t],i=i||o(e,n);return r&&i}function Ur(e){var t=a(e),n=!1;return t&&(n=0===e.filter((function(t){return!l(t)&&Mr(e)})).length),t&&n}function Br(e){var t,n,r=s(e)&&!c(e),i=!1,a=["sameDay","nextDay","lastDay","nextWeek","lastWeek","sameElse"];for(t=0;t<a.length;t+=1)n=a[t],i=i||o(e,n);return r&&i}function Gr(e,t){var n=e.diff(t,"days",!0);return n<-6?"sameElse":n<-1?"lastWeek":n<0?"lastDay":n<1?"sameDay":n<2?"nextDay":n<7?"nextWeek":"sameElse"}function Vr(e,t){1===arguments.length&&(arguments[0]?jr(arguments[0])?(e=arguments[0],t=void 0):Br(arguments[0])&&(t=arguments[0],e=void 0):(e=void 0,t=void 0));var n=e||Jn(),i=fr(n,this).startOf("day"),a=r.calendarFormat(this,i)||"sameElse",s=t&&(I(t[a])?t[a].call(this,n):t[a]);return this.format(s||this.localeData().calendar(a,this,Jn(n)))}function Hr(){return new w(this)}function zr(e,t){var n=T(e)?e:Jn(e);return!(!this.isValid()||!n.isValid())&&("millisecond"===(t=re(t)||"millisecond")?this.valueOf()>n.valueOf():n.valueOf()<this.clone().startOf(t).valueOf())}function Wr(e,t){var n=T(e)?e:Jn(e);return!(!this.isValid()||!n.isValid())&&("millisecond"===(t=re(t)||"millisecond")?this.valueOf()<n.valueOf():this.clone().endOf(t).valueOf()<n.valueOf())}function Kr(e,t,n,r){var i=T(e)?e:Jn(e),a=T(t)?t:Jn(t);return!!(this.isValid()&&i.isValid()&&a.isValid())&&("("===(r=r||"()")[0]?this.isAfter(i,n):!this.isBefore(i,n))&&(")"===r[1]?this.isBefore(a,n):!this.isAfter(a,n))}function qr(e,t){var n,r=T(e)?e:Jn(e);return!(!this.isValid()||!r.isValid())&&("millisecond"===(t=re(t)||"millisecond")?this.valueOf()===r.valueOf():(n=r.valueOf(),this.clone().startOf(t).valueOf()<=n&&n<=this.clone().endOf(t).valueOf()))}function Yr(e,t){return this.isSame(e,t)||this.isAfter(e,t)}function Jr(e,t){return this.isSame(e,t)||this.isBefore(e,t)}function Qr(e,t,n){var r,i,a;if(!this.isValid())return NaN;if(!(r=fr(e,this)).isValid())return NaN;switch(i=6e4*(r.utcOffset()-this.utcOffset()),t=re(t)){case"year":a=Xr(this,r)/12;break;case"month":a=Xr(this,r);break;case"quarter":a=Xr(this,r)/3;break;case"second":a=(this-r)/1e3;break;case"minute":a=(this-r)/6e4;break;case"hour":a=(this-r)/36e5;break;case"day":a=(this-r-i)/864e5;break;case"week":a=(this-r-i)/6048e5;break;default:a=this-r}return n?a:ue(a)}function Xr(e,t){if(e.date()<t.date())return-Xr(t,e);var n=12*(t.year()-e.year())+(t.month()-e.month()),r=e.clone().add(n,"months");return-(n+(t-r<0?(t-r)/(r-e.clone().add(n-1,"months")):(t-r)/(e.clone().add(n+1,"months")-r)))||0}function Zr(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function $r(e){if(!this.isValid())return null;var t=!0!==e,n=t?this.clone().utc():this;return n.year()<0||n.year()>9999?H(n,t?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):I(Date.prototype.toISOString)?t?this.toDate().toISOString():new Date(this.valueOf()+60*this.utcOffset()*1e3).toISOString().replace("Z",H(n,"Z")):H(n,t?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")}function ei(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var e,t,n,r,i="moment",a="";return this.isLocal()||(i=0===this.utcOffset()?"moment.utc":"moment.parseZone",a="Z"),e="["+i+'("]',t=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",n="-MM-DD[T]HH:mm:ss.SSS",r=a+'[")]',this.format(e+t+n+r)}function ti(e){e||(e=this.isUtc()?r.defaultFormatUtc:r.defaultFormat);var t=H(this,e);return this.localeData().postformat(t)}function ni(e,t){return this.isValid()&&(T(e)&&e.isValid()||Jn(e).isValid())?Cr({to:this,from:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()}function ri(e){return this.from(Jn(),e)}function ii(e,t){return this.isValid()&&(T(e)&&e.isValid()||Jn(e).isValid())?Cr({from:this,to:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()}function ai(e){return this.to(Jn(),e)}function si(e){var t;return void 0===e?this._locale._abbr:(null!=(t=yn(e))&&(this._locale=t),this)}r.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",r.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";var oi=_("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",(function(e){return void 0===e?this.localeData():this.locale(e)}));function ci(){return this._locale}var ui=1e3,li=60*ui,di=60*li,hi=3506328*di;function fi(e,t){return(e%t+t)%t}function pi(e,t,n){return e<100&&e>=0?new Date(e+400,t,n)-hi:new Date(e,t,n).valueOf()}function vi(e,t,n){return e<100&&e>=0?Date.UTC(e+400,t,n)-hi:Date.UTC(e,t,n)}function mi(e){var t,n;if(void 0===(e=re(e))||"millisecond"===e||!this.isValid())return this;switch(n=this._isUTC?vi:pi,e){case"year":t=n(this.year(),0,1);break;case"quarter":t=n(this.year(),this.month()-this.month()%3,1);break;case"month":t=n(this.year(),this.month(),1);break;case"week":t=n(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":t=n(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":t=n(this.year(),this.month(),this.date());break;case"hour":t=this._d.valueOf(),t-=fi(t+(this._isUTC?0:this.utcOffset()*li),di);break;case"minute":t=this._d.valueOf(),t-=fi(t,li);break;case"second":t=this._d.valueOf(),t-=fi(t,ui)}return this._d.setTime(t),r.updateOffset(this,!0),this}function gi(e){var t,n;if(void 0===(e=re(e))||"millisecond"===e||!this.isValid())return this;switch(n=this._isUTC?vi:pi,e){case"year":t=n(this.year()+1,0,1)-1;break;case"quarter":t=n(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":t=n(this.year(),this.month()+1,1)-1;break;case"week":t=n(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":t=n(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":t=n(this.year(),this.month(),this.date()+1)-1;break;case"hour":t=this._d.valueOf(),t+=di-fi(t+(this._isUTC?0:this.utcOffset()*li),di)-1;break;case"minute":t=this._d.valueOf(),t+=li-fi(t,li)-1;break;case"second":t=this._d.valueOf(),t+=ui-fi(t,ui)-1}return this._d.setTime(t),r.updateOffset(this,!0),this}function yi(){return this._d.valueOf()-6e4*(this._offset||0)}function bi(){return Math.floor(this.valueOf()/1e3)}function ki(){return new Date(this.valueOf())}function xi(){var e=this;return[e.year(),e.month(),e.date(),e.hour(),e.minute(),e.second(),e.millisecond()]}function wi(){var e=this;return{years:e.year(),months:e.month(),date:e.date(),hours:e.hours(),minutes:e.minutes(),seconds:e.seconds(),milliseconds:e.milliseconds()}}function Ti(){return this.isValid()?this.toISOString():null}function Ei(){return g(this)}function _i(){return f({},m(this))}function Si(){return m(this).overflow}function Ai(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}function Ci(e,t){var n,i,a,s=this._eras||yn("en")._eras;for(n=0,i=s.length;n<i;++n)switch("string"===typeof s[n].since&&(a=r(s[n].since).startOf("day"),s[n].since=a.valueOf()),typeof s[n].until){case"undefined":s[n].until=1/0;break;case"string":a=r(s[n].until).startOf("day").valueOf(),s[n].until=a.valueOf()}return s}function Ii(e,t,n){var r,i,a,s,o,c=this.eras();for(e=e.toUpperCase(),r=0,i=c.length;r<i;++r)if(a=c[r].name.toUpperCase(),s=c[r].abbr.toUpperCase(),o=c[r].narrow.toUpperCase(),n)switch(t){case"N":case"NN":case"NNN":if(s===e)return c[r];break;case"NNNN":if(a===e)return c[r];break;case"NNNNN":if(o===e)return c[r]}else if([a,s,o].indexOf(e)>=0)return c[r]}function Ri(e,t){var n=e.since<=e.until?1:-1;return void 0===t?r(e.since).year():r(e.since).year()+(t-e.offset)*n}function Pi(){var e,t,n,r=this.localeData().eras();for(e=0,t=r.length;e<t;++e){if(n=this.clone().startOf("day").valueOf(),r[e].since<=n&&n<=r[e].until)return r[e].name;if(r[e].until<=n&&n<=r[e].since)return r[e].name}return""}function Di(){var e,t,n,r=this.localeData().eras();for(e=0,t=r.length;e<t;++e){if(n=this.clone().startOf("day").valueOf(),r[e].since<=n&&n<=r[e].until)return r[e].narrow;if(r[e].until<=n&&n<=r[e].since)return r[e].narrow}return""}function Ni(){var e,t,n,r=this.localeData().eras();for(e=0,t=r.length;e<t;++e){if(n=this.clone().startOf("day").valueOf(),r[e].since<=n&&n<=r[e].until)return r[e].abbr;if(r[e].until<=n&&n<=r[e].since)return r[e].abbr}return""}function Oi(){var e,t,n,i,a=this.localeData().eras();for(e=0,t=a.length;e<t;++e)if(n=a[e].since<=a[e].until?1:-1,i=this.clone().startOf("day").valueOf(),a[e].since<=i&&i<=a[e].until||a[e].until<=i&&i<=a[e].since)return(this.year()-r(a[e].since).year())*n+a[e].offset;return this.year()}function Li(e){return o(this,"_erasNameRegex")||Vi.call(this),e?this._erasNameRegex:this._erasRegex}function Mi(e){return o(this,"_erasAbbrRegex")||Vi.call(this),e?this._erasAbbrRegex:this._erasRegex}function ji(e){return o(this,"_erasNarrowRegex")||Vi.call(this),e?this._erasNarrowRegex:this._erasRegex}function Fi(e,t){return t.erasAbbrRegex(e)}function Ui(e,t){return t.erasNameRegex(e)}function Bi(e,t){return t.erasNarrowRegex(e)}function Gi(e,t){return t._eraYearOrdinalRegex||Ce}function Vi(){var e,t,n=[],r=[],i=[],a=[],s=this.eras();for(e=0,t=s.length;e<t;++e)r.push(je(s[e].name)),n.push(je(s[e].abbr)),i.push(je(s[e].narrow)),a.push(je(s[e].name)),a.push(je(s[e].abbr)),a.push(je(s[e].narrow));this._erasRegex=new RegExp("^("+a.join("|")+")","i"),this._erasNameRegex=new RegExp("^("+r.join("|")+")","i"),this._erasAbbrRegex=new RegExp("^("+n.join("|")+")","i"),this._erasNarrowRegex=new RegExp("^("+i.join("|")+")","i")}function Hi(e,t){B(0,[e,e.length],0,t)}function zi(e){return Qi.call(this,e,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)}function Wi(e){return Qi.call(this,e,this.isoWeek(),this.isoWeekday(),1,4)}function Ki(){return Tt(this.year(),1,4)}function qi(){return Tt(this.isoWeekYear(),1,4)}function Yi(){var e=this.localeData()._week;return Tt(this.year(),e.dow,e.doy)}function Ji(){var e=this.localeData()._week;return Tt(this.weekYear(),e.dow,e.doy)}function Qi(e,t,n,r,i){var a;return null==e?wt(this,r,i).year:(t>(a=Tt(e,r,i))&&(t=a),Xi.call(this,e,t,n,r,i))}function Xi(e,t,n,r,i){var a=xt(e,t,n,r,i),s=bt(a.year,0,a.dayOfYear);return this.year(s.getUTCFullYear()),this.month(s.getUTCMonth()),this.date(s.getUTCDate()),this}function Zi(e){return null==e?Math.ceil((this.month()+1)/3):this.month(3*(e-1)+this.month()%3)}B("N",0,0,"eraAbbr"),B("NN",0,0,"eraAbbr"),B("NNN",0,0,"eraAbbr"),B("NNNN",0,0,"eraName"),B("NNNNN",0,0,"eraNarrow"),B("y",["y",1],"yo","eraYear"),B("y",["yy",2],0,"eraYear"),B("y",["yyy",3],0,"eraYear"),B("y",["yyyy",4],0,"eraYear"),Oe("N",Fi),Oe("NN",Fi),Oe("NNN",Fi),Oe("NNNN",Ui),Oe("NNNNN",Bi),Ue(["N","NN","NNN","NNNN","NNNNN"],(function(e,t,n,r){var i=n._locale.erasParse(e,r,n._strict);i?m(n).era=i:m(n).invalidEra=e})),Oe("y",Ce),Oe("yy",Ce),Oe("yyy",Ce),Oe("yyyy",Ce),Oe("yo",Gi),Ue(["y","yy","yyy","yyyy"],He),Ue(["yo"],(function(e,t,n,r){var i;n._locale._eraYearOrdinalRegex&&(i=e.match(n._locale._eraYearOrdinalRegex)),n._locale.eraYearOrdinalParse?t[He]=n._locale.eraYearOrdinalParse(e,i):t[He]=parseInt(e,10)})),B(0,["gg",2],0,(function(){return this.weekYear()%100})),B(0,["GG",2],0,(function(){return this.isoWeekYear()%100})),Hi("gggg","weekYear"),Hi("ggggg","weekYear"),Hi("GGGG","isoWeekYear"),Hi("GGGGG","isoWeekYear"),ne("weekYear","gg"),ne("isoWeekYear","GG"),se("weekYear",1),se("isoWeekYear",1),Oe("G",Ie),Oe("g",Ie),Oe("GG",we,ye),Oe("gg",we,ye),Oe("GGGG",Se,ke),Oe("gggg",Se,ke),Oe("GGGGG",Ae,xe),Oe("ggggg",Ae,xe),Be(["gggg","ggggg","GGGG","GGGGG"],(function(e,t,n,r){t[r.substr(0,2)]=le(e)})),Be(["gg","GG"],(function(e,t,n,i){t[i]=r.parseTwoDigitYear(e)})),B("Q",0,"Qo","quarter"),ne("quarter","Q"),se("quarter",7),Oe("Q",ge),Ue("Q",(function(e,t){t[ze]=3*(le(e)-1)})),B("D",["DD",2],"Do","date"),ne("date","D"),se("date",9),Oe("D",we),Oe("DD",we,ye),Oe("Do",(function(e,t){return e?t._dayOfMonthOrdinalParse||t._ordinalParse:t._dayOfMonthOrdinalParseLenient})),Ue(["D","DD"],We),Ue("Do",(function(e,t){t[We]=le(e.match(we)[0])}));var $i=de("Date",!0);function ea(e){var t=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==e?t:this.add(e-t,"d")}B("DDD",["DDDD",3],"DDDo","dayOfYear"),ne("dayOfYear","DDD"),se("dayOfYear",4),Oe("DDD",_e),Oe("DDDD",be),Ue(["DDD","DDDD"],(function(e,t,n){n._dayOfYear=le(e)})),B("m",["mm",2],0,"minute"),ne("minute","m"),se("minute",14),Oe("m",we),Oe("mm",we,ye),Ue(["m","mm"],qe);var ta=de("Minutes",!1);B("s",["ss",2],0,"second"),ne("second","s"),se("second",15),Oe("s",we),Oe("ss",we,ye),Ue(["s","ss"],Ye);var na,ra,ia=de("Seconds",!1);for(B("S",0,0,(function(){return~~(this.millisecond()/100)})),B(0,["SS",2],0,(function(){return~~(this.millisecond()/10)})),B(0,["SSS",3],0,"millisecond"),B(0,["SSSS",4],0,(function(){return 10*this.millisecond()})),B(0,["SSSSS",5],0,(function(){return 100*this.millisecond()})),B(0,["SSSSSS",6],0,(function(){return 1e3*this.millisecond()})),B(0,["SSSSSSS",7],0,(function(){return 1e4*this.millisecond()})),B(0,["SSSSSSSS",8],0,(function(){return 1e5*this.millisecond()})),B(0,["SSSSSSSSS",9],0,(function(){return 1e6*this.millisecond()})),ne("millisecond","ms"),se("millisecond",16),Oe("S",_e,ge),Oe("SS",_e,ye),Oe("SSS",_e,be),na="SSSS";na.length<=9;na+="S")Oe(na,Ce);function aa(e,t){t[Je]=le(1e3*("0."+e))}for(na="S";na.length<=9;na+="S")Ue(na,aa);function sa(){return this._isUTC?"UTC":""}function oa(){return this._isUTC?"Coordinated Universal Time":""}ra=de("Milliseconds",!1),B("z",0,0,"zoneAbbr"),B("zz",0,0,"zoneName");var ca=w.prototype;function ua(e){return Jn(1e3*e)}function la(){return Jn.apply(null,arguments).parseZone()}function da(e){return e}ca.add=Or,ca.calendar=Vr,ca.clone=Hr,ca.diff=Qr,ca.endOf=gi,ca.format=ti,ca.from=ni,ca.fromNow=ri,ca.to=ii,ca.toNow=ai,ca.get=pe,ca.invalidAt=Si,ca.isAfter=zr,ca.isBefore=Wr,ca.isBetween=Kr,ca.isSame=qr,ca.isSameOrAfter=Yr,ca.isSameOrBefore=Jr,ca.isValid=Ei,ca.lang=oi,ca.locale=si,ca.localeData=ci,ca.max=Xn,ca.min=Qn,ca.parsingFlags=_i,ca.set=ve,ca.startOf=mi,ca.subtract=Lr,ca.toArray=xi,ca.toObject=wi,ca.toDate=ki,ca.toISOString=$r,ca.inspect=ei,"undefined"!==typeof Symbol&&null!=Symbol.for&&(ca[Symbol.for("nodejs.util.inspect.custom")]=function(){return"Moment<"+this.format()+">"}),ca.toJSON=Ti,ca.toString=Zr,ca.unix=bi,ca.valueOf=yi,ca.creationData=Ai,ca.eraName=Pi,ca.eraNarrow=Di,ca.eraAbbr=Ni,ca.eraYear=Oi,ca.year=mt,ca.isLeapYear=gt,ca.weekYear=zi,ca.isoWeekYear=Wi,ca.quarter=ca.quarters=Zi,ca.month=lt,ca.daysInMonth=dt,ca.week=ca.weeks=Ct,ca.isoWeek=ca.isoWeeks=It,ca.weeksInYear=Yi,ca.weeksInWeekYear=Ji,ca.isoWeeksInYear=Ki,ca.isoWeeksInISOWeekYear=qi,ca.date=$i,ca.day=ca.days=zt,ca.weekday=Wt,ca.isoWeekday=Kt,ca.dayOfYear=ea,ca.hour=ca.hours=rn,ca.minute=ca.minutes=ta,ca.second=ca.seconds=ia,ca.millisecond=ca.milliseconds=ra,ca.utcOffset=vr,ca.utc=gr,ca.local=yr,ca.parseZone=br,ca.hasAlignedHourOffset=kr,ca.isDST=xr,ca.isLocal=Tr,ca.isUtcOffset=Er,ca.isUtc=_r,ca.isUTC=_r,ca.zoneAbbr=sa,ca.zoneName=oa,ca.dates=_("dates accessor is deprecated. Use date instead.",$i),ca.months=_("months accessor is deprecated. Use month instead",lt),ca.years=_("years accessor is deprecated. Use year instead",mt),ca.zone=_("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",mr),ca.isDSTShifted=_("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",wr);var ha=D.prototype;function fa(e,t,n,r){var i=yn(),a=p().set(r,t);return i[n](a,e)}function pa(e,t,n){if(l(e)&&(t=e,e=void 0),e=e||"",null!=t)return fa(e,t,n,"month");var r,i=[];for(r=0;r<12;r++)i[r]=fa(e,r,n,"month");return i}function va(e,t,n,r){"boolean"===typeof e?(l(t)&&(n=t,t=void 0),t=t||""):(n=t=e,e=!1,l(t)&&(n=t,t=void 0),t=t||"");var i,a=yn(),s=e?a._week.dow:0,o=[];if(null!=n)return fa(t,(n+s)%7,r,"day");for(i=0;i<7;i++)o[i]=fa(t,(i+s)%7,r,"day");return o}function ma(e,t){return pa(e,t,"months")}function ga(e,t){return pa(e,t,"monthsShort")}function ya(e,t,n){return va(e,t,n,"weekdays")}function ba(e,t,n){return va(e,t,n,"weekdaysShort")}function ka(e,t,n){return va(e,t,n,"weekdaysMin")}ha.calendar=O,ha.longDateFormat=K,ha.invalidDate=Y,ha.ordinal=X,ha.preparse=da,ha.postformat=da,ha.relativeTime=$,ha.pastFuture=ee,ha.set=R,ha.eras=Ci,ha.erasParse=Ii,ha.erasConvertYear=Ri,ha.erasAbbrRegex=Mi,ha.erasNameRegex=Li,ha.erasNarrowRegex=ji,ha.months=at,ha.monthsShort=st,ha.monthsParse=ct,ha.monthsRegex=ft,ha.monthsShortRegex=ht,ha.week=Et,ha.firstDayOfYear=At,ha.firstDayOfWeek=St,ha.weekdays=Ut,ha.weekdaysMin=Gt,ha.weekdaysShort=Bt,ha.weekdaysParse=Ht,ha.weekdaysRegex=qt,ha.weekdaysShortRegex=Yt,ha.weekdaysMinRegex=Jt,ha.isPM=tn,ha.meridiem=an,vn("en",{eras:[{since:"0001-01-01",until:1/0,offset:1,name:"Anno Domini",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-1/0,offset:1,name:"Before Christ",narrow:"BC",abbr:"BC"}],dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var t=e%10;return e+(1===le(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th")}}),r.lang=_("moment.lang is deprecated. Use moment.locale instead.",vn),r.langData=_("moment.langData is deprecated. Use moment.localeData instead.",yn);var xa=Math.abs;function wa(){var e=this._data;return this._milliseconds=xa(this._milliseconds),this._days=xa(this._days),this._months=xa(this._months),e.milliseconds=xa(e.milliseconds),e.seconds=xa(e.seconds),e.minutes=xa(e.minutes),e.hours=xa(e.hours),e.months=xa(e.months),e.years=xa(e.years),this}function Ta(e,t,n,r){var i=Cr(t,n);return e._milliseconds+=r*i._milliseconds,e._days+=r*i._days,e._months+=r*i._months,e._bubble()}function Ea(e,t){return Ta(this,e,t,1)}function _a(e,t){return Ta(this,e,t,-1)}function Sa(e){return e<0?Math.floor(e):Math.ceil(e)}function Aa(){var e,t,n,r,i,a=this._milliseconds,s=this._days,o=this._months,c=this._data;return a>=0&&s>=0&&o>=0||a<=0&&s<=0&&o<=0||(a+=864e5*Sa(Ia(o)+s),s=0,o=0),c.milliseconds=a%1e3,e=ue(a/1e3),c.seconds=e%60,t=ue(e/60),c.minutes=t%60,n=ue(t/60),c.hours=n%24,s+=ue(n/24),o+=i=ue(Ca(s)),s-=Sa(Ia(i)),r=ue(o/12),o%=12,c.days=s,c.months=o,c.years=r,this}function Ca(e){return 4800*e/146097}function Ia(e){return 146097*e/4800}function Ra(e){if(!this.isValid())return NaN;var t,n,r=this._milliseconds;if("month"===(e=re(e))||"quarter"===e||"year"===e)switch(t=this._days+r/864e5,n=this._months+Ca(t),e){case"month":return n;case"quarter":return n/3;case"year":return n/12}else switch(t=this._days+Math.round(Ia(this._months)),e){case"week":return t/7+r/6048e5;case"day":return t+r/864e5;case"hour":return 24*t+r/36e5;case"minute":return 1440*t+r/6e4;case"second":return 86400*t+r/1e3;case"millisecond":return Math.floor(864e5*t)+r;default:throw new Error("Unknown unit "+e)}}function Pa(){return this.isValid()?this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*le(this._months/12):NaN}function Da(e){return function(){return this.as(e)}}var Na=Da("ms"),Oa=Da("s"),La=Da("m"),Ma=Da("h"),ja=Da("d"),Fa=Da("w"),Ua=Da("M"),Ba=Da("Q"),Ga=Da("y");function Va(){return Cr(this)}function Ha(e){return e=re(e),this.isValid()?this[e+"s"]():NaN}function za(e){return function(){return this.isValid()?this._data[e]:NaN}}var Wa=za("milliseconds"),Ka=za("seconds"),qa=za("minutes"),Ya=za("hours"),Ja=za("days"),Qa=za("months"),Xa=za("years");function Za(){return ue(this.days()/7)}var $a=Math.round,es={ss:44,s:45,m:45,h:22,d:26,w:null,M:11};function ts(e,t,n,r,i){return i.relativeTime(t||1,!!n,e,r)}function ns(e,t,n,r){var i=Cr(e).abs(),a=$a(i.as("s")),s=$a(i.as("m")),o=$a(i.as("h")),c=$a(i.as("d")),u=$a(i.as("M")),l=$a(i.as("w")),d=$a(i.as("y")),h=a<=n.ss&&["s",a]||a<n.s&&["ss",a]||s<=1&&["m"]||s<n.m&&["mm",s]||o<=1&&["h"]||o<n.h&&["hh",o]||c<=1&&["d"]||c<n.d&&["dd",c];return null!=n.w&&(h=h||l<=1&&["w"]||l<n.w&&["ww",l]),(h=h||u<=1&&["M"]||u<n.M&&["MM",u]||d<=1&&["y"]||["yy",d])[2]=t,h[3]=+e>0,h[4]=r,ts.apply(null,h)}function rs(e){return void 0===e?$a:"function"===typeof e&&($a=e,!0)}function is(e,t){return void 0!==es[e]&&(void 0===t?es[e]:(es[e]=t,"s"===e&&(es.ss=t-1),!0))}function as(e,t){if(!this.isValid())return this.localeData().invalidDate();var n,r,i=!1,a=es;return"object"===typeof e&&(t=e,e=!1),"boolean"===typeof e&&(i=e),"object"===typeof t&&(a=Object.assign({},es,t),null!=t.s&&null==t.ss&&(a.ss=t.s-1)),r=ns(this,!i,a,n=this.localeData()),i&&(r=n.pastFuture(+this,r)),n.postformat(r)}var ss=Math.abs;function os(e){return(e>0)-(e<0)||+e}function cs(){if(!this.isValid())return this.localeData().invalidDate();var e,t,n,r,i,a,s,o,c=ss(this._milliseconds)/1e3,u=ss(this._days),l=ss(this._months),d=this.asSeconds();return d?(e=ue(c/60),t=ue(e/60),c%=60,e%=60,n=ue(l/12),l%=12,r=c?c.toFixed(3).replace(/\.?0+$/,""):"",i=d<0?"-":"",a=os(this._months)!==os(d)?"-":"",s=os(this._days)!==os(d)?"-":"",o=os(this._milliseconds)!==os(d)?"-":"",i+"P"+(n?a+n+"Y":"")+(l?a+l+"M":"")+(u?s+u+"D":"")+(t||e||c?"T":"")+(t?o+t+"H":"")+(e?o+e+"M":"")+(c?o+r+"S":"")):"P0D"}var us=sr.prototype;return us.isValid=ir,us.abs=wa,us.add=Ea,us.subtract=_a,us.as=Ra,us.asMilliseconds=Na,us.asSeconds=Oa,us.asMinutes=La,us.asHours=Ma,us.asDays=ja,us.asWeeks=Fa,us.asMonths=Ua,us.asQuarters=Ba,us.asYears=Ga,us.valueOf=Pa,us._bubble=Aa,us.clone=Va,us.get=Ha,us.milliseconds=Wa,us.seconds=Ka,us.minutes=qa,us.hours=Ya,us.days=Ja,us.weeks=Za,us.months=Qa,us.years=Xa,us.humanize=as,us.toISOString=cs,us.toString=cs,us.toJSON=cs,us.locale=si,us.localeData=ci,us.toIsoString=_("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",cs),us.lang=oi,B("X",0,0,"unix"),B("x",0,0,"valueOf"),Oe("x",Ie),Oe("X",De),Ue("X",(function(e,t,n){n._d=new Date(1e3*parseFloat(e))})),Ue("x",(function(e,t,n){n._d=new Date(le(e))})),r.version="2.29.4",i(Jn),r.fn=ca,r.min=$n,r.max=er,r.now=tr,r.utc=p,r.unix=ua,r.months=ma,r.isDate=d,r.locale=vn,r.invalid=y,r.duration=Cr,r.isMoment=T,r.weekdays=ya,r.parseZone=la,r.localeData=yn,r.isDuration=or,r.monthsShort=ga,r.weekdaysMin=ka,r.defineLocale=mn,r.updateLocale=gn,r.locales=bn,r.weekdaysShort=ba,r.normalizeUnits=re,r.relativeTimeRounding=rs,r.relativeTimeThreshold=is,r.calendarFormat=Gr,r.prototype=ca,r.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"},r}()},463:function(e,t,n){"use strict";var r=n(791),i=n(296);function a(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=new Set,o={};function c(e,t){u(e,t),u(e+"Capture",t)}function u(e,t){for(o[e]=t,e=0;e<t.length;e++)s.add(t[e])}var l=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),d=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},p={};function v(e,t,n,r,i,a,s){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=s}var m={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){m[e]=new v(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];m[t]=new v(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){m[e]=new v(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){m[e]=new v(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){m[e]=new v(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){m[e]=new v(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){m[e]=new v(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){m[e]=new v(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){m[e]=new v(e,5,!1,e.toLowerCase(),null,!1,!1)}));var g=/[\-:]([a-z])/g;function y(e){return e[1].toUpperCase()}function b(e,t,n,r){var i=m.hasOwnProperty(t)?m[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!d.call(p,e)||!d.call(f,e)&&(h.test(e)?p[e]=!0:(f[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(g,y);m[t]=new v(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(g,y);m[t]=new v(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(g,y);m[t]=new v(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){m[e]=new v(e,1,!1,e.toLowerCase(),null,!1,!1)})),m.xlinkHref=new v("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){m[e]=new v(e,1,!1,e.toLowerCase(),null,!0,!0)}));var k=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,x=Symbol.for("react.element"),w=Symbol.for("react.portal"),T=Symbol.for("react.fragment"),E=Symbol.for("react.strict_mode"),_=Symbol.for("react.profiler"),S=Symbol.for("react.provider"),A=Symbol.for("react.context"),C=Symbol.for("react.forward_ref"),I=Symbol.for("react.suspense"),R=Symbol.for("react.suspense_list"),P=Symbol.for("react.memo"),D=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var N=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var O=Symbol.iterator;function L(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=O&&e[O]||e["@@iterator"])?e:null}var M,j=Object.assign;function F(e){if(void 0===M)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);M=t&&t[1]||""}return"\n"+M+e}var U=!1;function B(e,t){if(!e||U)return"";U=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var r=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){r=u}e.call(t.prototype)}else{try{throw Error()}catch(u){r=u}e()}}catch(u){if(u&&r&&"string"===typeof u.stack){for(var i=u.stack.split("\n"),a=r.stack.split("\n"),s=i.length-1,o=a.length-1;1<=s&&0<=o&&i[s]!==a[o];)o--;for(;1<=s&&0<=o;s--,o--)if(i[s]!==a[o]){if(1!==s||1!==o)do{if(s--,0>--o||i[s]!==a[o]){var c="\n"+i[s].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}}while(1<=s&&0<=o);break}}}finally{U=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?F(e):""}function G(e){switch(e.tag){case 5:return F(e.type);case 16:return F("Lazy");case 13:return F("Suspense");case 19:return F("SuspenseList");case 0:case 2:case 15:return e=B(e.type,!1);case 11:return e=B(e.type.render,!1);case 1:return e=B(e.type,!0);default:return""}}function V(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case T:return"Fragment";case w:return"Portal";case _:return"Profiler";case E:return"StrictMode";case I:return"Suspense";case R:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case A:return(e.displayName||"Context")+".Consumer";case S:return(e._context.displayName||"Context")+".Provider";case C:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case P:return null!==(t=e.displayName||null)?t:V(e.type)||"Memo";case D:t=e._payload,e=e._init;try{return V(e(t))}catch(n){}}return null}function H(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return V(t);case 8:return t===E?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function z(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function W(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function K(e){e._valueTracker||(e._valueTracker=function(e){var t=W(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function q(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=W(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Y(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function J(e,t){var n=t.checked;return j({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function Q(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=z(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function X(e,t){null!=(t=t.checked)&&b(e,"checked",t,!1)}function Z(e,t){X(e,t);var n=z(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,z(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function $(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&Y(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+z(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(a(91));return j({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(a(92));if(te(n)){if(1<n.length)throw Error(a(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:z(n)}}function ae(e,t){var n=z(t.value),r=z(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function se(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function oe(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ce(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?oe(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ue,le,de=(le=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ue=ue||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ue.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return le(e,t)}))}:le);function he(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var fe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function ve(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||fe.hasOwnProperty(e)&&fe[e]?(""+t).trim():t+"px"}function me(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=ve(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(fe).forEach((function(e){pe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),fe[t]=fe[e]}))}));var ge=j({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ye(e,t){if(t){if(ge[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(a(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(a(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(a(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(a(62))}}function be(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ke=null;function xe(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var we=null,Te=null,Ee=null;function _e(e){if(e=bi(e)){if("function"!==typeof we)throw Error(a(280));var t=e.stateNode;t&&(t=xi(t),we(e.stateNode,e.type,t))}}function Se(e){Te?Ee?Ee.push(e):Ee=[e]:Te=e}function Ae(){if(Te){var e=Te,t=Ee;if(Ee=Te=null,_e(e),t)for(e=0;e<t.length;e++)_e(t[e])}}function Ce(e,t){return e(t)}function Ie(){}var Re=!1;function Pe(e,t,n){if(Re)return e(t,n);Re=!0;try{return Ce(e,t,n)}finally{Re=!1,(null!==Te||null!==Ee)&&(Ie(),Ae())}}function De(e,t){var n=e.stateNode;if(null===n)return null;var r=xi(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(a(231,t,typeof n));return n}var Ne=!1;if(l)try{var Oe={};Object.defineProperty(Oe,"passive",{get:function(){Ne=!0}}),window.addEventListener("test",Oe,Oe),window.removeEventListener("test",Oe,Oe)}catch(le){Ne=!1}function Le(e,t,n,r,i,a,s,o,c){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(l){this.onError(l)}}var Me=!1,je=null,Fe=!1,Ue=null,Be={onError:function(e){Me=!0,je=e}};function Ge(e,t,n,r,i,a,s,o,c){Me=!1,je=null,Le.apply(Be,arguments)}function Ve(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function He(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function ze(e){if(Ve(e)!==e)throw Error(a(188))}function We(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=Ve(e)))throw Error(a(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var s=i.alternate;if(null===s){if(null!==(r=i.return)){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return ze(i),e;if(s===r)return ze(i),t;s=s.sibling}throw Error(a(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,c=i.child;c;){if(c===n){o=!0,n=i,r=s;break}if(c===r){o=!0,r=i,n=s;break}c=c.sibling}if(!o){for(c=s.child;c;){if(c===n){o=!0,n=s,r=i;break}if(c===r){o=!0,r=s,n=i;break}c=c.sibling}if(!o)throw Error(a(189))}}if(n.alternate!==r)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?e:t}(e))?Ke(e):null}function Ke(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Ke(e);if(null!==t)return t;e=e.sibling}return null}var qe=i.unstable_scheduleCallback,Ye=i.unstable_cancelCallback,Je=i.unstable_shouldYield,Qe=i.unstable_requestPaint,Xe=i.unstable_now,Ze=i.unstable_getCurrentPriorityLevel,$e=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,at=null;var st=Math.clz32?Math.clz32:function(e){return 0===(e>>>=0)?32:31-(ot(e)/ct|0)|0},ot=Math.log,ct=Math.LN2;var ut=64,lt=4194304;function dt(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,a=e.pingedLanes,s=268435455&n;if(0!==s){var o=s&~i;0!==o?r=dt(o):0!==(a&=s)&&(r=dt(a))}else 0!==(s=n&~i)?r=dt(s):0!==a&&(r=dt(a));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(a=t&-t)||16===i&&0!==(4194240&a)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-st(t)),r|=e[n],t&=~i;return r}function ft(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function vt(){var e=ut;return 0===(4194240&(ut<<=1))&&(ut=64),e}function mt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function gt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-st(t)]=n}function yt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-st(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var bt=0;function kt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var xt,wt,Tt,Et,_t,St=!1,At=[],Ct=null,It=null,Rt=null,Pt=new Map,Dt=new Map,Nt=[],Ot="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Lt(e,t){switch(e){case"focusin":case"focusout":Ct=null;break;case"dragenter":case"dragleave":It=null;break;case"mouseover":case"mouseout":Rt=null;break;case"pointerover":case"pointerout":Pt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Dt.delete(t.pointerId)}}function Mt(e,t,n,r,i,a){return null===e||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[i]},null!==t&&(null!==(t=bi(t))&&wt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function jt(e){var t=yi(e.target);if(null!==t){var n=Ve(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=He(n)))return e.blockedOn=t,void _t(e.priority,(function(){Tt(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ft(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Jt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=bi(n))&&wt(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);ke=r,n.target.dispatchEvent(r),ke=null,t.shift()}return!0}function Ut(e,t,n){Ft(e)&&n.delete(t)}function Bt(){St=!1,null!==Ct&&Ft(Ct)&&(Ct=null),null!==It&&Ft(It)&&(It=null),null!==Rt&&Ft(Rt)&&(Rt=null),Pt.forEach(Ut),Dt.forEach(Ut)}function Gt(e,t){e.blockedOn===t&&(e.blockedOn=null,St||(St=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Bt)))}function Vt(e){function t(t){return Gt(t,e)}if(0<At.length){Gt(At[0],e);for(var n=1;n<At.length;n++){var r=At[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Ct&&Gt(Ct,e),null!==It&&Gt(It,e),null!==Rt&&Gt(Rt,e),Pt.forEach(t),Dt.forEach(t),n=0;n<Nt.length;n++)(r=Nt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Nt.length&&null===(n=Nt[0]).blockedOn;)jt(n),null===n.blockedOn&&Nt.shift()}var Ht=k.ReactCurrentBatchConfig,zt=!0;function Wt(e,t,n,r){var i=bt,a=Ht.transition;Ht.transition=null;try{bt=1,qt(e,t,n,r)}finally{bt=i,Ht.transition=a}}function Kt(e,t,n,r){var i=bt,a=Ht.transition;Ht.transition=null;try{bt=4,qt(e,t,n,r)}finally{bt=i,Ht.transition=a}}function qt(e,t,n,r){if(zt){var i=Jt(e,t,n,r);if(null===i)zr(e,t,r,Yt,n),Lt(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return Ct=Mt(Ct,e,t,n,r,i),!0;case"dragenter":return It=Mt(It,e,t,n,r,i),!0;case"mouseover":return Rt=Mt(Rt,e,t,n,r,i),!0;case"pointerover":var a=i.pointerId;return Pt.set(a,Mt(Pt.get(a)||null,e,t,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,Dt.set(a,Mt(Dt.get(a)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Lt(e,r),4&t&&-1<Ot.indexOf(e)){for(;null!==i;){var a=bi(i);if(null!==a&&xt(a),null===(a=Jt(e,t,n,r))&&zr(e,t,r,Yt,n),a===i)break;i=a}null!==i&&r.stopPropagation()}else zr(e,t,r,null,n)}}var Yt=null;function Jt(e,t,n,r){if(Yt=null,null!==(e=yi(e=xe(r))))if(null===(t=Ve(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=He(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Yt=e,null}function Qt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Ze()){case $e:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Xt=null,Zt=null,$t=null;function en(){if($t)return $t;var e,t,n=Zt,r=n.length,i="value"in Xt?Xt.value:Xt.textContent,a=i.length;for(e=0;e<r&&n[e]===i[e];e++);var s=r-e;for(t=1;t<=s&&n[r-t]===i[a-t];t++);return $t=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function an(e){function t(t,n,r,i,a){for(var s in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(s)&&(t=e[s],this[s]=t?t(i):i[s]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return j(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var sn,on,cn,un={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ln=an(un),dn=j({},un,{view:0,detail:0}),hn=an(dn),fn=j({},dn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:_n,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==cn&&(cn&&"mousemove"===e.type?(sn=e.screenX-cn.screenX,on=e.screenY-cn.screenY):on=sn=0,cn=e),sn)},movementY:function(e){return"movementY"in e?e.movementY:on}}),pn=an(fn),vn=an(j({},fn,{dataTransfer:0})),mn=an(j({},dn,{relatedTarget:0})),gn=an(j({},un,{animationName:0,elapsedTime:0,pseudoElement:0})),yn=j({},un,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),bn=an(yn),kn=an(j({},un,{data:0})),xn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},wn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Tn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function En(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Tn[e])&&!!t[e]}function _n(){return En}var Sn=j({},dn,{key:function(e){if(e.key){var t=xn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?wn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:_n,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),An=an(Sn),Cn=an(j({},fn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),In=an(j({},dn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:_n})),Rn=an(j({},un,{propertyName:0,elapsedTime:0,pseudoElement:0})),Pn=j({},fn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Dn=an(Pn),Nn=[9,13,27,32],On=l&&"CompositionEvent"in window,Ln=null;l&&"documentMode"in document&&(Ln=document.documentMode);var Mn=l&&"TextEvent"in window&&!Ln,jn=l&&(!On||Ln&&8<Ln&&11>=Ln),Fn=String.fromCharCode(32),Un=!1;function Bn(e,t){switch(e){case"keyup":return-1!==Nn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Gn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Vn=!1;var Hn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function zn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Hn[e.type]:"textarea"===t}function Wn(e,t,n,r){Se(r),0<(t=Kr(t,"onChange")).length&&(n=new ln("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Kn=null,qn=null;function Yn(e){Fr(e,0)}function Jn(e){if(q(ki(e)))return e}function Qn(e,t){if("change"===e)return t}var Xn=!1;if(l){var Zn;if(l){var $n="oninput"in document;if(!$n){var er=document.createElement("div");er.setAttribute("oninput","return;"),$n="function"===typeof er.oninput}Zn=$n}else Zn=!1;Xn=Zn&&(!document.documentMode||9<document.documentMode)}function tr(){Kn&&(Kn.detachEvent("onpropertychange",nr),qn=Kn=null)}function nr(e){if("value"===e.propertyName&&Jn(qn)){var t=[];Wn(t,qn,e,xe(e)),Pe(Yn,t)}}function rr(e,t,n){"focusin"===e?(tr(),qn=n,(Kn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Jn(qn)}function ar(e,t){if("click"===e)return Jn(t)}function sr(e,t){if("input"===e||"change"===e)return Jn(t)}var or="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function cr(e,t){if(or(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!d.call(t,i)||!or(e[i],t[i]))return!1}return!0}function ur(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function lr(e,t){var n,r=ur(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=ur(r)}}function dr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?dr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function hr(){for(var e=window,t=Y();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=Y((e=t.contentWindow).document)}return t}function fr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pr(e){var t=hr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&dr(n.ownerDocument.documentElement,n)){if(null!==r&&fr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,a=Math.min(r.start,i);r=void 0===r.end?a:Math.min(r.end,i),!e.extend&&a>r&&(i=r,r=a,a=i),i=lr(n,a);var s=lr(n,r);i&&s&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==s.node||e.focusOffset!==s.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),a>r?(e.addRange(t),e.extend(s.node,s.offset)):(t.setEnd(s.node,s.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var vr=l&&"documentMode"in document&&11>=document.documentMode,mr=null,gr=null,yr=null,br=!1;function kr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;br||null==mr||mr!==Y(r)||("selectionStart"in(r=mr)&&fr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},yr&&cr(yr,r)||(yr=r,0<(r=Kr(gr,"onSelect")).length&&(t=new ln("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=mr)))}function xr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var wr={animationend:xr("Animation","AnimationEnd"),animationiteration:xr("Animation","AnimationIteration"),animationstart:xr("Animation","AnimationStart"),transitionend:xr("Transition","TransitionEnd")},Tr={},Er={};function _r(e){if(Tr[e])return Tr[e];if(!wr[e])return e;var t,n=wr[e];for(t in n)if(n.hasOwnProperty(t)&&t in Er)return Tr[e]=n[t];return e}l&&(Er=document.createElement("div").style,"AnimationEvent"in window||(delete wr.animationend.animation,delete wr.animationiteration.animation,delete wr.animationstart.animation),"TransitionEvent"in window||delete wr.transitionend.transition);var Sr=_r("animationend"),Ar=_r("animationiteration"),Cr=_r("animationstart"),Ir=_r("transitionend"),Rr=new Map,Pr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Dr(e,t){Rr.set(e,t),c(t,[e])}for(var Nr=0;Nr<Pr.length;Nr++){var Or=Pr[Nr];Dr(Or.toLowerCase(),"on"+(Or[0].toUpperCase()+Or.slice(1)))}Dr(Sr,"onAnimationEnd"),Dr(Ar,"onAnimationIteration"),Dr(Cr,"onAnimationStart"),Dr("dblclick","onDoubleClick"),Dr("focusin","onFocus"),Dr("focusout","onBlur"),Dr(Ir,"onTransitionEnd"),u("onMouseEnter",["mouseout","mouseover"]),u("onMouseLeave",["mouseout","mouseover"]),u("onPointerEnter",["pointerout","pointerover"]),u("onPointerLeave",["pointerout","pointerover"]),c("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),c("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),c("onBeforeInput",["compositionend","keypress","textInput","paste"]),c("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Lr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Mr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Lr));function jr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,s,o,c,u){if(Ge.apply(this,arguments),Me){if(!Me)throw Error(a(198));var l=je;Me=!1,je=null,Fe||(Fe=!0,Ue=l)}}(r,t,void 0,e),e.currentTarget=null}function Fr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var s=r.length-1;0<=s;s--){var o=r[s],c=o.instance,u=o.currentTarget;if(o=o.listener,c!==a&&i.isPropagationStopped())break e;jr(i,o,u),a=c}else for(s=0;s<r.length;s++){if(c=(o=r[s]).instance,u=o.currentTarget,o=o.listener,c!==a&&i.isPropagationStopped())break e;jr(i,o,u),a=c}}}if(Fe)throw e=Ue,Fe=!1,Ue=null,e}function Ur(e,t){var n=t[vi];void 0===n&&(n=t[vi]=new Set);var r=e+"__bubble";n.has(r)||(Hr(t,e,2,!1),n.add(r))}function Br(e,t,n){var r=0;t&&(r|=4),Hr(n,e,r,t)}var Gr="_reactListening"+Math.random().toString(36).slice(2);function Vr(e){if(!e[Gr]){e[Gr]=!0,s.forEach((function(t){"selectionchange"!==t&&(Mr.has(t)||Br(t,!1,e),Br(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Gr]||(t[Gr]=!0,Br("selectionchange",!1,t))}}function Hr(e,t,n,r){switch(Qt(t)){case 1:var i=Wt;break;case 4:i=Kt;break;default:i=qt}n=i.bind(null,t,n,e),i=void 0,!Ne||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function zr(e,t,n,r,i){var a=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var s=r.tag;if(3===s||4===s){var o=r.stateNode.containerInfo;if(o===i||8===o.nodeType&&o.parentNode===i)break;if(4===s)for(s=r.return;null!==s;){var c=s.tag;if((3===c||4===c)&&((c=s.stateNode.containerInfo)===i||8===c.nodeType&&c.parentNode===i))return;s=s.return}for(;null!==o;){if(null===(s=yi(o)))return;if(5===(c=s.tag)||6===c){r=a=s;continue e}o=o.parentNode}}r=r.return}Pe((function(){var r=a,i=xe(n),s=[];e:{var o=Rr.get(e);if(void 0!==o){var c=ln,u=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":c=An;break;case"focusin":u="focus",c=mn;break;case"focusout":u="blur",c=mn;break;case"beforeblur":case"afterblur":c=mn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":c=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":c=vn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":c=In;break;case Sr:case Ar:case Cr:c=gn;break;case Ir:c=Rn;break;case"scroll":c=hn;break;case"wheel":c=Dn;break;case"copy":case"cut":case"paste":c=bn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":c=Cn}var l=0!==(4&t),d=!l&&"scroll"===e,h=l?null!==o?o+"Capture":null:o;l=[];for(var f,p=r;null!==p;){var v=(f=p).stateNode;if(5===f.tag&&null!==v&&(f=v,null!==h&&(null!=(v=De(p,h))&&l.push(Wr(p,v,f)))),d)break;p=p.return}0<l.length&&(o=new c(o,u,null,n,i),s.push({event:o,listeners:l}))}}if(0===(7&t)){if(c="mouseout"===e||"pointerout"===e,(!(o="mouseover"===e||"pointerover"===e)||n===ke||!(u=n.relatedTarget||n.fromElement)||!yi(u)&&!u[pi])&&(c||o)&&(o=i.window===i?i:(o=i.ownerDocument)?o.defaultView||o.parentWindow:window,c?(c=r,null!==(u=(u=n.relatedTarget||n.toElement)?yi(u):null)&&(u!==(d=Ve(u))||5!==u.tag&&6!==u.tag)&&(u=null)):(c=null,u=r),c!==u)){if(l=pn,v="onMouseLeave",h="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(l=Cn,v="onPointerLeave",h="onPointerEnter",p="pointer"),d=null==c?o:ki(c),f=null==u?o:ki(u),(o=new l(v,p+"leave",c,n,i)).target=d,o.relatedTarget=f,v=null,yi(i)===r&&((l=new l(h,p+"enter",u,n,i)).target=f,l.relatedTarget=d,v=l),d=v,c&&u)e:{for(h=u,p=0,f=l=c;f;f=qr(f))p++;for(f=0,v=h;v;v=qr(v))f++;for(;0<p-f;)l=qr(l),p--;for(;0<f-p;)h=qr(h),f--;for(;p--;){if(l===h||null!==h&&l===h.alternate)break e;l=qr(l),h=qr(h)}l=null}else l=null;null!==c&&Yr(s,o,c,l,!1),null!==u&&null!==d&&Yr(s,d,u,l,!0)}if("select"===(c=(o=r?ki(r):window).nodeName&&o.nodeName.toLowerCase())||"input"===c&&"file"===o.type)var m=Qn;else if(zn(o))if(Xn)m=sr;else{m=ir;var g=rr}else(c=o.nodeName)&&"input"===c.toLowerCase()&&("checkbox"===o.type||"radio"===o.type)&&(m=ar);switch(m&&(m=m(e,r))?Wn(s,m,n,i):(g&&g(e,o,r),"focusout"===e&&(g=o._wrapperState)&&g.controlled&&"number"===o.type&&ee(o,"number",o.value)),g=r?ki(r):window,e){case"focusin":(zn(g)||"true"===g.contentEditable)&&(mr=g,gr=r,yr=null);break;case"focusout":yr=gr=mr=null;break;case"mousedown":br=!0;break;case"contextmenu":case"mouseup":case"dragend":br=!1,kr(s,n,i);break;case"selectionchange":if(vr)break;case"keydown":case"keyup":kr(s,n,i)}var y;if(On)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else Vn?Bn(e,n)&&(b="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(b="onCompositionStart");b&&(jn&&"ko"!==n.locale&&(Vn||"onCompositionStart"!==b?"onCompositionEnd"===b&&Vn&&(y=en()):(Zt="value"in(Xt=i)?Xt.value:Xt.textContent,Vn=!0)),0<(g=Kr(r,b)).length&&(b=new kn(b,e,null,n,i),s.push({event:b,listeners:g}),y?b.data=y:null!==(y=Gn(n))&&(b.data=y))),(y=Mn?function(e,t){switch(e){case"compositionend":return Gn(t);case"keypress":return 32!==t.which?null:(Un=!0,Fn);case"textInput":return(e=t.data)===Fn&&Un?null:e;default:return null}}(e,n):function(e,t){if(Vn)return"compositionend"===e||!On&&Bn(e,t)?(e=en(),$t=Zt=Xt=null,Vn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return jn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Kr(r,"onBeforeInput")).length&&(i=new kn("onBeforeInput","beforeinput",null,n,i),s.push({event:i,listeners:r}),i.data=y))}Fr(s,t)}))}function Wr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Kr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,a=i.stateNode;5===i.tag&&null!==a&&(i=a,null!=(a=De(e,n))&&r.unshift(Wr(e,a,i)),null!=(a=De(e,t))&&r.push(Wr(e,a,i))),e=e.return}return r}function qr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Yr(e,t,n,r,i){for(var a=t._reactName,s=[];null!==n&&n!==r;){var o=n,c=o.alternate,u=o.stateNode;if(null!==c&&c===r)break;5===o.tag&&null!==u&&(o=u,i?null!=(c=De(n,a))&&s.unshift(Wr(n,c,o)):i||null!=(c=De(n,a))&&s.push(Wr(n,c,o))),n=n.return}0!==s.length&&e.push({event:t,listeners:s})}var Jr=/\r\n?/g,Qr=/\u0000|\uFFFD/g;function Xr(e){return("string"===typeof e?e:""+e).replace(Jr,"\n").replace(Qr,"")}function Zr(e,t,n){if(t=Xr(t),Xr(e)!==t&&n)throw Error(a(425))}function $r(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,ai="function"===typeof Promise?Promise:void 0,si="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof ai?function(e){return ai.resolve(null).then(e).catch(oi)}:ri;function oi(e){setTimeout((function(){throw e}))}function ci(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void Vt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);Vt(t)}function ui(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function li(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var di=Math.random().toString(36).slice(2),hi="__reactFiber$"+di,fi="__reactProps$"+di,pi="__reactContainer$"+di,vi="__reactEvents$"+di,mi="__reactListeners$"+di,gi="__reactHandles$"+di;function yi(e){var t=e[hi];if(t)return t;for(var n=e.parentNode;n;){if(t=n[pi]||n[hi]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=li(e);null!==e;){if(n=e[hi])return n;e=li(e)}return t}n=(e=n).parentNode}return null}function bi(e){return!(e=e[hi]||e[pi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function ki(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(a(33))}function xi(e){return e[fi]||null}var wi=[],Ti=-1;function Ei(e){return{current:e}}function _i(e){0>Ti||(e.current=wi[Ti],wi[Ti]=null,Ti--)}function Si(e,t){Ti++,wi[Ti]=e.current,e.current=t}var Ai={},Ci=Ei(Ai),Ii=Ei(!1),Ri=Ai;function Pi(e,t){var n=e.type.contextTypes;if(!n)return Ai;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,a={};for(i in n)a[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Di(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Ni(){_i(Ii),_i(Ci)}function Oi(e,t,n){if(Ci.current!==Ai)throw Error(a(168));Si(Ci,t),Si(Ii,n)}function Li(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(a(108,H(e)||"Unknown",i));return j({},n,r)}function Mi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ai,Ri=Ci.current,Si(Ci,e),Si(Ii,Ii.current),!0}function ji(e,t,n){var r=e.stateNode;if(!r)throw Error(a(169));n?(e=Li(e,t,Ri),r.__reactInternalMemoizedMergedChildContext=e,_i(Ii),_i(Ci),Si(Ci,e)):_i(Ii),Si(Ii,n)}var Fi=null,Ui=!1,Bi=!1;function Gi(e){null===Fi?Fi=[e]:Fi.push(e)}function Vi(){if(!Bi&&null!==Fi){Bi=!0;var e=0,t=bt;try{var n=Fi;for(bt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Fi=null,Ui=!1}catch(i){throw null!==Fi&&(Fi=Fi.slice(e+1)),qe($e,Vi),i}finally{bt=t,Bi=!1}}return null}var Hi=[],zi=0,Wi=null,Ki=0,qi=[],Yi=0,Ji=null,Qi=1,Xi="";function Zi(e,t){Hi[zi++]=Ki,Hi[zi++]=Wi,Wi=e,Ki=t}function $i(e,t,n){qi[Yi++]=Qi,qi[Yi++]=Xi,qi[Yi++]=Ji,Ji=e;var r=Qi;e=Xi;var i=32-st(r)-1;r&=~(1<<i),n+=1;var a=32-st(t)+i;if(30<a){var s=i-i%5;a=(r&(1<<s)-1).toString(32),r>>=s,i-=s,Qi=1<<32-st(t)+i|n<<i|r,Xi=a+e}else Qi=1<<a|n<<i|r,Xi=e}function ea(e){null!==e.return&&(Zi(e,1),$i(e,1,0))}function ta(e){for(;e===Wi;)Wi=Hi[--zi],Hi[zi]=null,Ki=Hi[--zi],Hi[zi]=null;for(;e===Ji;)Ji=qi[--Yi],qi[Yi]=null,Xi=qi[--Yi],qi[Yi]=null,Qi=qi[--Yi],qi[Yi]=null}var na=null,ra=null,ia=!1,aa=null;function sa(e,t){var n=Pu(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function oa(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,na=e,ra=ui(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,na=e,ra=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Ji?{id:Qi,overflow:Xi}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Pu(18,null,null,0)).stateNode=t,n.return=e,e.child=n,na=e,ra=null,!0);default:return!1}}function ca(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function ua(e){if(ia){var t=ra;if(t){var n=t;if(!oa(e,t)){if(ca(e))throw Error(a(418));t=ui(n.nextSibling);var r=na;t&&oa(e,t)?sa(r,n):(e.flags=-4097&e.flags|2,ia=!1,na=e)}}else{if(ca(e))throw Error(a(418));e.flags=-4097&e.flags|2,ia=!1,na=e}}}function la(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;na=e}function da(e){if(e!==na)return!1;if(!ia)return la(e),ia=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=ra)){if(ca(e))throw ha(),Error(a(418));for(;t;)sa(e,t),t=ui(t.nextSibling)}if(la(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ra=ui(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ra=null}}else ra=na?ui(e.stateNode.nextSibling):null;return!0}function ha(){for(var e=ra;e;)e=ui(e.nextSibling)}function fa(){ra=na=null,ia=!1}function pa(e){null===aa?aa=[e]:aa.push(e)}var va=k.ReactCurrentBatchConfig;function ma(e,t){if(e&&e.defaultProps){for(var n in t=j({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var ga=Ei(null),ya=null,ba=null,ka=null;function xa(){ka=ba=ya=null}function wa(e){var t=ga.current;_i(ga),e._currentValue=t}function Ta(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Ea(e,t){ya=e,ka=ba=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(ko=!0),e.firstContext=null)}function _a(e){var t=e._currentValue;if(ka!==e)if(e={context:e,memoizedValue:t,next:null},null===ba){if(null===ya)throw Error(a(308));ba=e,ya.dependencies={lanes:0,firstContext:e}}else ba=ba.next=e;return t}var Sa=null;function Aa(e){null===Sa?Sa=[e]:Sa.push(e)}function Ca(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,Aa(t)):(n.next=i.next,i.next=n),t.interleaved=n,Ia(e,r)}function Ia(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Ra=!1;function Pa(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Da(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Na(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Oa(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Cc)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Ia(e,n)}return null===(i=r.interleaved)?(t.next=t,Aa(r)):(t.next=i.next,i.next=t),r.interleaved=t,Ia(e,n)}function La(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}function Ma(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var s={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===a?i=a=s:a=a.next=s,n=n.next}while(null!==n);null===a?i=a=t:a=a.next=t}else i=a=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function ja(e,t,n,r){var i=e.updateQueue;Ra=!1;var a=i.firstBaseUpdate,s=i.lastBaseUpdate,o=i.shared.pending;if(null!==o){i.shared.pending=null;var c=o,u=c.next;c.next=null,null===s?a=u:s.next=u,s=c;var l=e.alternate;null!==l&&((o=(l=l.updateQueue).lastBaseUpdate)!==s&&(null===o?l.firstBaseUpdate=u:o.next=u,l.lastBaseUpdate=c))}if(null!==a){var d=i.baseState;for(s=0,l=u=c=null,o=a;;){var h=o.lane,f=o.eventTime;if((r&h)===h){null!==l&&(l=l.next={eventTime:f,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var p=e,v=o;switch(h=t,f=n,v.tag){case 1:if("function"===typeof(p=v.payload)){d=p.call(f,d,h);break e}d=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(h="function"===typeof(p=v.payload)?p.call(f,d,h):p)||void 0===h)break e;d=j({},d,h);break e;case 2:Ra=!0}}null!==o.callback&&0!==o.lane&&(e.flags|=64,null===(h=i.effects)?i.effects=[o]:h.push(o))}else f={eventTime:f,lane:h,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===l?(u=l=f,c=d):l=l.next=f,s|=h;if(null===(o=o.next)){if(null===(o=i.shared.pending))break;o=(h=o).next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}if(null===l&&(c=d),i.baseState=c,i.firstBaseUpdate=u,i.lastBaseUpdate=l,null!==(t=i.shared.interleaved)){i=t;do{s|=i.lane,i=i.next}while(i!==t)}else null===a&&(i.shared.lanes=0);Mc|=s,e.lanes=s,e.memoizedState=d}}function Fa(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(a(191,i));i.call(r)}}}var Ua=(new r.Component).refs;function Ba(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:j({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var Ga={isMounted:function(e){return!!(e=e._reactInternals)&&Ve(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=eu(),i=tu(e),a=Na(r,i);a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=Oa(e,a,i))&&(nu(t,e,i,r),La(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=eu(),i=tu(e),a=Na(r,i);a.tag=1,a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=Oa(e,a,i))&&(nu(t,e,i,r),La(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=eu(),r=tu(e),i=Na(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=Oa(e,i,r))&&(nu(t,e,r,n),La(t,e,r))}};function Va(e,t,n,r,i,a,s){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,a,s):!t.prototype||!t.prototype.isPureReactComponent||(!cr(n,r)||!cr(i,a))}function Ha(e,t,n){var r=!1,i=Ai,a=t.contextType;return"object"===typeof a&&null!==a?a=_a(a):(i=Di(t)?Ri:Ci.current,a=(r=null!==(r=t.contextTypes)&&void 0!==r)?Pi(e,i):Ai),t=new t(n,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=Ga,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function za(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Ga.enqueueReplaceState(t,t.state,null)}function Wa(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=Ua,Pa(e);var a=t.contextType;"object"===typeof a&&null!==a?i.context=_a(a):(a=Di(t)?Ri:Ci.current,i.context=Pi(e,a)),i.state=e.memoizedState,"function"===typeof(a=t.getDerivedStateFromProps)&&(Ba(e,t,a,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&Ga.enqueueReplaceState(i,i.state,null),ja(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function Ka(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(a(309));var r=n.stateNode}if(!r)throw Error(a(147,e));var i=r,s=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===s?t.ref:(t=function(e){var t=i.refs;t===Ua&&(t=i.refs={}),null===e?delete t[s]:t[s]=e},t._stringRef=s,t)}if("string"!==typeof e)throw Error(a(284));if(!n._owner)throw Error(a(290,e))}return e}function qa(e,t){throw e=Object.prototype.toString.call(t),Error(a(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Ya(e){return(0,e._init)(e._payload)}function Ja(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Nu(e,t)).index=0,e.sibling=null,e}function s(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function o(t){return e&&null===t.alternate&&(t.flags|=2),t}function c(e,t,n,r){return null===t||6!==t.tag?((t=ju(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function u(e,t,n,r){var a=n.type;return a===T?d(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===a||"object"===typeof a&&null!==a&&a.$$typeof===D&&Ya(a)===t.type)?((r=i(t,n.props)).ref=Ka(e,t,n),r.return=e,r):((r=Ou(n.type,n.key,n.props,null,e.mode,r)).ref=Ka(e,t,n),r.return=e,r)}function l(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Fu(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function d(e,t,n,r,a){return null===t||7!==t.tag?((t=Lu(n,e.mode,r,a)).return=e,t):((t=i(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=ju(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case x:return(n=Ou(t.type,t.key,t.props,null,e.mode,n)).ref=Ka(e,null,t),n.return=e,n;case w:return(t=Fu(t,e.mode,n)).return=e,t;case D:return h(e,(0,t._init)(t._payload),n)}if(te(t)||L(t))return(t=Lu(t,e.mode,n,null)).return=e,t;qa(e,t)}return null}function f(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:c(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case x:return n.key===i?u(e,t,n,r):null;case w:return n.key===i?l(e,t,n,r):null;case D:return f(e,t,(i=n._init)(n._payload),r)}if(te(n)||L(n))return null!==i?null:d(e,t,n,r,null);qa(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return c(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case x:return u(t,e=e.get(null===r.key?n:r.key)||null,r,i);case w:return l(t,e=e.get(null===r.key?n:r.key)||null,r,i);case D:return p(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||L(r))return d(t,e=e.get(n)||null,r,i,null);qa(t,r)}return null}function v(i,a,o,c){for(var u=null,l=null,d=a,v=a=0,m=null;null!==d&&v<o.length;v++){d.index>v?(m=d,d=null):m=d.sibling;var g=f(i,d,o[v],c);if(null===g){null===d&&(d=m);break}e&&d&&null===g.alternate&&t(i,d),a=s(g,a,v),null===l?u=g:l.sibling=g,l=g,d=m}if(v===o.length)return n(i,d),ia&&Zi(i,v),u;if(null===d){for(;v<o.length;v++)null!==(d=h(i,o[v],c))&&(a=s(d,a,v),null===l?u=d:l.sibling=d,l=d);return ia&&Zi(i,v),u}for(d=r(i,d);v<o.length;v++)null!==(m=p(d,i,v,o[v],c))&&(e&&null!==m.alternate&&d.delete(null===m.key?v:m.key),a=s(m,a,v),null===l?u=m:l.sibling=m,l=m);return e&&d.forEach((function(e){return t(i,e)})),ia&&Zi(i,v),u}function m(i,o,c,u){var l=L(c);if("function"!==typeof l)throw Error(a(150));if(null==(c=l.call(c)))throw Error(a(151));for(var d=l=null,v=o,m=o=0,g=null,y=c.next();null!==v&&!y.done;m++,y=c.next()){v.index>m?(g=v,v=null):g=v.sibling;var b=f(i,v,y.value,u);if(null===b){null===v&&(v=g);break}e&&v&&null===b.alternate&&t(i,v),o=s(b,o,m),null===d?l=b:d.sibling=b,d=b,v=g}if(y.done)return n(i,v),ia&&Zi(i,m),l;if(null===v){for(;!y.done;m++,y=c.next())null!==(y=h(i,y.value,u))&&(o=s(y,o,m),null===d?l=y:d.sibling=y,d=y);return ia&&Zi(i,m),l}for(v=r(i,v);!y.done;m++,y=c.next())null!==(y=p(v,i,m,y.value,u))&&(e&&null!==y.alternate&&v.delete(null===y.key?m:y.key),o=s(y,o,m),null===d?l=y:d.sibling=y,d=y);return e&&v.forEach((function(e){return t(i,e)})),ia&&Zi(i,m),l}return function e(r,a,s,c){if("object"===typeof s&&null!==s&&s.type===T&&null===s.key&&(s=s.props.children),"object"===typeof s&&null!==s){switch(s.$$typeof){case x:e:{for(var u=s.key,l=a;null!==l;){if(l.key===u){if((u=s.type)===T){if(7===l.tag){n(r,l.sibling),(a=i(l,s.props.children)).return=r,r=a;break e}}else if(l.elementType===u||"object"===typeof u&&null!==u&&u.$$typeof===D&&Ya(u)===l.type){n(r,l.sibling),(a=i(l,s.props)).ref=Ka(r,l,s),a.return=r,r=a;break e}n(r,l);break}t(r,l),l=l.sibling}s.type===T?((a=Lu(s.props.children,r.mode,c,s.key)).return=r,r=a):((c=Ou(s.type,s.key,s.props,null,r.mode,c)).ref=Ka(r,a,s),c.return=r,r=c)}return o(r);case w:e:{for(l=s.key;null!==a;){if(a.key===l){if(4===a.tag&&a.stateNode.containerInfo===s.containerInfo&&a.stateNode.implementation===s.implementation){n(r,a.sibling),(a=i(a,s.children||[])).return=r,r=a;break e}n(r,a);break}t(r,a),a=a.sibling}(a=Fu(s,r.mode,c)).return=r,r=a}return o(r);case D:return e(r,a,(l=s._init)(s._payload),c)}if(te(s))return v(r,a,s,c);if(L(s))return m(r,a,s,c);qa(r,s)}return"string"===typeof s&&""!==s||"number"===typeof s?(s=""+s,null!==a&&6===a.tag?(n(r,a.sibling),(a=i(a,s)).return=r,r=a):(n(r,a),(a=ju(s,r.mode,c)).return=r,r=a),o(r)):n(r,a)}}var Qa=Ja(!0),Xa=Ja(!1),Za={},$a=Ei(Za),es=Ei(Za),ts=Ei(Za);function ns(e){if(e===Za)throw Error(a(174));return e}function rs(e,t){switch(Si(ts,t),Si(es,e),Si($a,Za),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:ce(null,"");break;default:t=ce(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}_i($a),Si($a,t)}function is(){_i($a),_i(es),_i(ts)}function as(e){ns(ts.current);var t=ns($a.current),n=ce(t,e.type);t!==n&&(Si(es,e),Si($a,n))}function ss(e){es.current===e&&(_i($a),_i(es))}var os=Ei(0);function cs(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var us=[];function ls(){for(var e=0;e<us.length;e++)us[e]._workInProgressVersionPrimary=null;us.length=0}var ds=k.ReactCurrentDispatcher,hs=k.ReactCurrentBatchConfig,fs=0,ps=null,vs=null,ms=null,gs=!1,ys=!1,bs=0,ks=0;function xs(){throw Error(a(321))}function ws(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!or(e[n],t[n]))return!1;return!0}function Ts(e,t,n,r,i,s){if(fs=s,ps=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ds.current=null===e||null===e.memoizedState?so:oo,e=n(r,i),ys){s=0;do{if(ys=!1,bs=0,25<=s)throw Error(a(301));s+=1,ms=vs=null,t.updateQueue=null,ds.current=co,e=n(r,i)}while(ys)}if(ds.current=ao,t=null!==vs&&null!==vs.next,fs=0,ms=vs=ps=null,gs=!1,t)throw Error(a(300));return e}function Es(){var e=0!==bs;return bs=0,e}function _s(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===ms?ps.memoizedState=ms=e:ms=ms.next=e,ms}function Ss(){if(null===vs){var e=ps.alternate;e=null!==e?e.memoizedState:null}else e=vs.next;var t=null===ms?ps.memoizedState:ms.next;if(null!==t)ms=t,vs=e;else{if(null===e)throw Error(a(310));e={memoizedState:(vs=e).memoizedState,baseState:vs.baseState,baseQueue:vs.baseQueue,queue:vs.queue,next:null},null===ms?ps.memoizedState=ms=e:ms=ms.next=e}return ms}function As(e,t){return"function"===typeof t?t(e):t}function Cs(e){var t=Ss(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=vs,i=r.baseQueue,s=n.pending;if(null!==s){if(null!==i){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(null!==i){s=i.next,r=r.baseState;var c=o=null,u=null,l=s;do{var d=l.lane;if((fs&d)===d)null!==u&&(u=u.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),r=l.hasEagerState?l.eagerState:e(r,l.action);else{var h={lane:d,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};null===u?(c=u=h,o=r):u=u.next=h,ps.lanes|=d,Mc|=d}l=l.next}while(null!==l&&l!==s);null===u?o=r:u.next=c,or(r,t.memoizedState)||(ko=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=u,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{s=i.lane,ps.lanes|=s,Mc|=s,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Is(e){var t=Ss(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,s=t.memoizedState;if(null!==i){n.pending=null;var o=i=i.next;do{s=e(s,o.action),o=o.next}while(o!==i);or(s,t.memoizedState)||(ko=!0),t.memoizedState=s,null===t.baseQueue&&(t.baseState=s),n.lastRenderedState=s}return[s,r]}function Rs(){}function Ps(e,t){var n=ps,r=Ss(),i=t(),s=!or(r.memoizedState,i);if(s&&(r.memoizedState=i,ko=!0),r=r.queue,Hs(Os.bind(null,n,r,e),[e]),r.getSnapshot!==t||s||null!==ms&&1&ms.memoizedState.tag){if(n.flags|=2048,Fs(9,Ns.bind(null,n,r,i,t),void 0,null),null===Ic)throw Error(a(349));0!==(30&fs)||Ds(n,t,i)}return i}function Ds(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=ps.updateQueue)?(t={lastEffect:null,stores:null},ps.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Ns(e,t,n,r){t.value=n,t.getSnapshot=r,Ls(t)&&Ms(e)}function Os(e,t,n){return n((function(){Ls(t)&&Ms(e)}))}function Ls(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!or(e,n)}catch(r){return!0}}function Ms(e){var t=Ia(e,1);null!==t&&nu(t,e,1,-1)}function js(e){var t=_s();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:As,lastRenderedState:e},t.queue=e,e=e.dispatch=to.bind(null,ps,e),[t.memoizedState,e]}function Fs(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=ps.updateQueue)?(t={lastEffect:null,stores:null},ps.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Us(){return Ss().memoizedState}function Bs(e,t,n,r){var i=_s();ps.flags|=e,i.memoizedState=Fs(1|t,n,void 0,void 0===r?null:r)}function Gs(e,t,n,r){var i=Ss();r=void 0===r?null:r;var a=void 0;if(null!==vs){var s=vs.memoizedState;if(a=s.destroy,null!==r&&ws(r,s.deps))return void(i.memoizedState=Fs(t,n,a,r))}ps.flags|=e,i.memoizedState=Fs(1|t,n,a,r)}function Vs(e,t){return Bs(8390656,8,e,t)}function Hs(e,t){return Gs(2048,8,e,t)}function zs(e,t){return Gs(4,2,e,t)}function Ws(e,t){return Gs(4,4,e,t)}function Ks(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function qs(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Gs(4,4,Ks.bind(null,t,e),n)}function Ys(){}function Js(e,t){var n=Ss();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ws(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Qs(e,t){var n=Ss();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ws(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Xs(e,t,n){return 0===(21&fs)?(e.baseState&&(e.baseState=!1,ko=!0),e.memoizedState=n):(or(n,t)||(n=vt(),ps.lanes|=n,Mc|=n,e.baseState=!0),t)}function Zs(e,t){var n=bt;bt=0!==n&&4>n?n:4,e(!0);var r=hs.transition;hs.transition={};try{e(!1),t()}finally{bt=n,hs.transition=r}}function $s(){return Ss().memoizedState}function eo(e,t,n){var r=tu(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},no(e))ro(t,n);else if(null!==(n=Ca(e,t,n,r))){nu(n,e,r,eu()),io(n,t,r)}}function to(e,t,n){var r=tu(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(no(e))ro(t,i);else{var a=e.alternate;if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var s=t.lastRenderedState,o=a(s,n);if(i.hasEagerState=!0,i.eagerState=o,or(o,s)){var c=t.interleaved;return null===c?(i.next=i,Aa(t)):(i.next=c.next,c.next=i),void(t.interleaved=i)}}catch(u){}null!==(n=Ca(e,t,i,r))&&(nu(n,e,r,i=eu()),io(n,t,r))}}function no(e){var t=e.alternate;return e===ps||null!==t&&t===ps}function ro(e,t){ys=gs=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function io(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}var ao={readContext:_a,useCallback:xs,useContext:xs,useEffect:xs,useImperativeHandle:xs,useInsertionEffect:xs,useLayoutEffect:xs,useMemo:xs,useReducer:xs,useRef:xs,useState:xs,useDebugValue:xs,useDeferredValue:xs,useTransition:xs,useMutableSource:xs,useSyncExternalStore:xs,useId:xs,unstable_isNewReconciler:!1},so={readContext:_a,useCallback:function(e,t){return _s().memoizedState=[e,void 0===t?null:t],e},useContext:_a,useEffect:Vs,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Bs(4194308,4,Ks.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Bs(4194308,4,e,t)},useInsertionEffect:function(e,t){return Bs(4,2,e,t)},useMemo:function(e,t){var n=_s();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=_s();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=eo.bind(null,ps,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},_s().memoizedState=e},useState:js,useDebugValue:Ys,useDeferredValue:function(e){return _s().memoizedState=e},useTransition:function(){var e=js(!1),t=e[0];return e=Zs.bind(null,e[1]),_s().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=ps,i=_s();if(ia){if(void 0===n)throw Error(a(407));n=n()}else{if(n=t(),null===Ic)throw Error(a(349));0!==(30&fs)||Ds(r,t,n)}i.memoizedState=n;var s={value:n,getSnapshot:t};return i.queue=s,Vs(Os.bind(null,r,s,e),[e]),r.flags|=2048,Fs(9,Ns.bind(null,r,s,n,t),void 0,null),n},useId:function(){var e=_s(),t=Ic.identifierPrefix;if(ia){var n=Xi;t=":"+t+"R"+(n=(Qi&~(1<<32-st(Qi)-1)).toString(32)+n),0<(n=bs++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=ks++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},oo={readContext:_a,useCallback:Js,useContext:_a,useEffect:Hs,useImperativeHandle:qs,useInsertionEffect:zs,useLayoutEffect:Ws,useMemo:Qs,useReducer:Cs,useRef:Us,useState:function(){return Cs(As)},useDebugValue:Ys,useDeferredValue:function(e){return Xs(Ss(),vs.memoizedState,e)},useTransition:function(){return[Cs(As)[0],Ss().memoizedState]},useMutableSource:Rs,useSyncExternalStore:Ps,useId:$s,unstable_isNewReconciler:!1},co={readContext:_a,useCallback:Js,useContext:_a,useEffect:Hs,useImperativeHandle:qs,useInsertionEffect:zs,useLayoutEffect:Ws,useMemo:Qs,useReducer:Is,useRef:Us,useState:function(){return Is(As)},useDebugValue:Ys,useDeferredValue:function(e){var t=Ss();return null===vs?t.memoizedState=e:Xs(t,vs.memoizedState,e)},useTransition:function(){return[Is(As)[0],Ss().memoizedState]},useMutableSource:Rs,useSyncExternalStore:Ps,useId:$s,unstable_isNewReconciler:!1};function uo(e,t){try{var n="",r=t;do{n+=G(r),r=r.return}while(r);var i=n}catch(a){i="\nError generating stack: "+a.message+"\n"+a.stack}return{value:e,source:t,stack:i,digest:null}}function lo(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function ho(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var fo="function"===typeof WeakMap?WeakMap:Map;function po(e,t,n){(n=Na(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){zc||(zc=!0,Wc=r),ho(0,t)},n}function vo(e,t,n){(n=Na(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){ho(0,t)}}var a=e.stateNode;return null!==a&&"function"===typeof a.componentDidCatch&&(n.callback=function(){ho(0,t),"function"!==typeof r&&(null===Kc?Kc=new Set([this]):Kc.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function mo(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new fo;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=_u.bind(null,e,t,n),t.then(e,e))}function go(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function yo(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Na(-1,1)).tag=2,Oa(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var bo=k.ReactCurrentOwner,ko=!1;function xo(e,t,n,r){t.child=null===e?Xa(t,null,n,r):Qa(t,e.child,n,r)}function wo(e,t,n,r,i){n=n.render;var a=t.ref;return Ea(t,i),r=Ts(e,t,n,r,a,i),n=Es(),null===e||ko?(ia&&n&&ea(t),t.flags|=1,xo(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,zo(e,t,i))}function To(e,t,n,r,i){if(null===e){var a=n.type;return"function"!==typeof a||Du(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Ou(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,Eo(e,t,a,r,i))}if(a=e.child,0===(e.lanes&i)){var s=a.memoizedProps;if((n=null!==(n=n.compare)?n:cr)(s,r)&&e.ref===t.ref)return zo(e,t,i)}return t.flags|=1,(e=Nu(a,r)).ref=t.ref,e.return=t,t.child=e}function Eo(e,t,n,r,i){if(null!==e){var a=e.memoizedProps;if(cr(a,r)&&e.ref===t.ref){if(ko=!1,t.pendingProps=r=a,0===(e.lanes&i))return t.lanes=e.lanes,zo(e,t,i);0!==(131072&e.flags)&&(ko=!0)}}return Ao(e,t,n,r,i)}function _o(e,t,n){var r=t.pendingProps,i=r.children,a=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Si(Nc,Dc),Dc|=n;else{if(0===(1073741824&n))return e=null!==a?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Si(Nc,Dc),Dc|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==a?a.baseLanes:n,Si(Nc,Dc),Dc|=r}else null!==a?(r=a.baseLanes|n,t.memoizedState=null):r=n,Si(Nc,Dc),Dc|=r;return xo(e,t,i,n),t.child}function So(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Ao(e,t,n,r,i){var a=Di(n)?Ri:Ci.current;return a=Pi(t,a),Ea(t,i),n=Ts(e,t,n,r,a,i),r=Es(),null===e||ko?(ia&&r&&ea(t),t.flags|=1,xo(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,zo(e,t,i))}function Co(e,t,n,r,i){if(Di(n)){var a=!0;Mi(t)}else a=!1;if(Ea(t,i),null===t.stateNode)Ho(e,t),Ha(t,n,r),Wa(t,n,r,i),r=!0;else if(null===e){var s=t.stateNode,o=t.memoizedProps;s.props=o;var c=s.context,u=n.contextType;"object"===typeof u&&null!==u?u=_a(u):u=Pi(t,u=Di(n)?Ri:Ci.current);var l=n.getDerivedStateFromProps,d="function"===typeof l||"function"===typeof s.getSnapshotBeforeUpdate;d||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(o!==r||c!==u)&&za(t,s,r,u),Ra=!1;var h=t.memoizedState;s.state=h,ja(t,r,s,i),c=t.memoizedState,o!==r||h!==c||Ii.current||Ra?("function"===typeof l&&(Ba(t,n,l,r),c=t.memoizedState),(o=Ra||Va(t,n,o,r,h,c,u))?(d||"function"!==typeof s.UNSAFE_componentWillMount&&"function"!==typeof s.componentWillMount||("function"===typeof s.componentWillMount&&s.componentWillMount(),"function"===typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount()),"function"===typeof s.componentDidMount&&(t.flags|=4194308)):("function"===typeof s.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),s.props=r,s.state=c,s.context=u,r=o):("function"===typeof s.componentDidMount&&(t.flags|=4194308),r=!1)}else{s=t.stateNode,Da(e,t),o=t.memoizedProps,u=t.type===t.elementType?o:ma(t.type,o),s.props=u,d=t.pendingProps,h=s.context,"object"===typeof(c=n.contextType)&&null!==c?c=_a(c):c=Pi(t,c=Di(n)?Ri:Ci.current);var f=n.getDerivedStateFromProps;(l="function"===typeof f||"function"===typeof s.getSnapshotBeforeUpdate)||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(o!==d||h!==c)&&za(t,s,r,c),Ra=!1,h=t.memoizedState,s.state=h,ja(t,r,s,i);var p=t.memoizedState;o!==d||h!==p||Ii.current||Ra?("function"===typeof f&&(Ba(t,n,f,r),p=t.memoizedState),(u=Ra||Va(t,n,u,r,h,p,c)||!1)?(l||"function"!==typeof s.UNSAFE_componentWillUpdate&&"function"!==typeof s.componentWillUpdate||("function"===typeof s.componentWillUpdate&&s.componentWillUpdate(r,p,c),"function"===typeof s.UNSAFE_componentWillUpdate&&s.UNSAFE_componentWillUpdate(r,p,c)),"function"===typeof s.componentDidUpdate&&(t.flags|=4),"function"===typeof s.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof s.componentDidUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof s.getSnapshotBeforeUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),s.props=r,s.state=p,s.context=c,r=u):("function"!==typeof s.componentDidUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof s.getSnapshotBeforeUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return Io(e,t,n,r,a,i)}function Io(e,t,n,r,i,a){So(e,t);var s=0!==(128&t.flags);if(!r&&!s)return i&&ji(t,n,!1),zo(e,t,a);r=t.stateNode,bo.current=t;var o=s&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&s?(t.child=Qa(t,e.child,null,a),t.child=Qa(t,null,o,a)):xo(e,t,o,a),t.memoizedState=r.state,i&&ji(t,n,!0),t.child}function Ro(e){var t=e.stateNode;t.pendingContext?Oi(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Oi(0,t.context,!1),rs(e,t.containerInfo)}function Po(e,t,n,r,i){return fa(),pa(i),t.flags|=256,xo(e,t,n,r),t.child}var Do,No,Oo,Lo={dehydrated:null,treeContext:null,retryLane:0};function Mo(e){return{baseLanes:e,cachePool:null,transitions:null}}function jo(e,t,n){var r,i=t.pendingProps,s=os.current,o=!1,c=0!==(128&t.flags);if((r=c)||(r=(null===e||null!==e.memoizedState)&&0!==(2&s)),r?(o=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(s|=1),Si(os,1&s),null===e)return ua(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(c=i.children,e=i.fallback,o?(i=t.mode,o=t.child,c={mode:"hidden",children:c},0===(1&i)&&null!==o?(o.childLanes=0,o.pendingProps=c):o=Mu(c,i,0,null),e=Lu(e,i,n,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=Mo(n),t.memoizedState=Lo,e):Fo(t,c));if(null!==(s=e.memoizedState)&&null!==(r=s.dehydrated))return function(e,t,n,r,i,s,o){if(n)return 256&t.flags?(t.flags&=-257,Uo(e,t,o,r=lo(Error(a(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(s=r.fallback,i=t.mode,r=Mu({mode:"visible",children:r.children},i,0,null),(s=Lu(s,i,o,null)).flags|=2,r.return=t,s.return=t,r.sibling=s,t.child=r,0!==(1&t.mode)&&Qa(t,e.child,null,o),t.child.memoizedState=Mo(o),t.memoizedState=Lo,s);if(0===(1&t.mode))return Uo(e,t,o,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var c=r.dgst;return r=c,Uo(e,t,o,r=lo(s=Error(a(419)),r,void 0))}if(c=0!==(o&e.childLanes),ko||c){if(null!==(r=Ic)){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|o))?0:i)&&i!==s.retryLane&&(s.retryLane=i,Ia(e,i),nu(r,e,i,-1))}return vu(),Uo(e,t,o,r=lo(Error(a(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=Au.bind(null,e),i._reactRetry=t,null):(e=s.treeContext,ra=ui(i.nextSibling),na=t,ia=!0,aa=null,null!==e&&(qi[Yi++]=Qi,qi[Yi++]=Xi,qi[Yi++]=Ji,Qi=e.id,Xi=e.overflow,Ji=t),(t=Fo(t,r.children)).flags|=4096,t)}(e,t,c,i,r,s,n);if(o){o=i.fallback,c=t.mode,r=(s=e.child).sibling;var u={mode:"hidden",children:i.children};return 0===(1&c)&&t.child!==s?((i=t.child).childLanes=0,i.pendingProps=u,t.deletions=null):(i=Nu(s,u)).subtreeFlags=14680064&s.subtreeFlags,null!==r?o=Nu(r,o):(o=Lu(o,c,n,null)).flags|=2,o.return=t,i.return=t,i.sibling=o,t.child=i,i=o,o=t.child,c=null===(c=e.child.memoizedState)?Mo(n):{baseLanes:c.baseLanes|n,cachePool:null,transitions:c.transitions},o.memoizedState=c,o.childLanes=e.childLanes&~n,t.memoizedState=Lo,i}return e=(o=e.child).sibling,i=Nu(o,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function Fo(e,t){return(t=Mu({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Uo(e,t,n,r){return null!==r&&pa(r),Qa(t,e.child,null,n),(e=Fo(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Bo(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Ta(e.return,t,n)}function Go(e,t,n,r,i){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i)}function Vo(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail;if(xo(e,t,r.children,n),0!==(2&(r=os.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Bo(e,n,t);else if(19===e.tag)Bo(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Si(os,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===cs(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Go(t,!1,i,n,a);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===cs(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Go(t,!0,n,null,a);break;case"together":Go(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ho(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function zo(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Mc|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(n=Nu(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Nu(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Wo(e,t){if(!ia)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Ko(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function qo(e,t,n){var r=t.pendingProps;switch(ta(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ko(t),null;case 1:case 17:return Di(t.type)&&Ni(),Ko(t),null;case 3:return r=t.stateNode,is(),_i(Ii),_i(Ci),ls(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(da(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==aa&&(su(aa),aa=null))),Ko(t),null;case 5:ss(t);var i=ns(ts.current);if(n=t.type,null!==e&&null!=t.stateNode)No(e,t,n,r),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(a(166));return Ko(t),null}if(e=ns($a.current),da(t)){r=t.stateNode,n=t.type;var s=t.memoizedProps;switch(r[hi]=t,r[fi]=s,e=0!==(1&t.mode),n){case"dialog":Ur("cancel",r),Ur("close",r);break;case"iframe":case"object":case"embed":Ur("load",r);break;case"video":case"audio":for(i=0;i<Lr.length;i++)Ur(Lr[i],r);break;case"source":Ur("error",r);break;case"img":case"image":case"link":Ur("error",r),Ur("load",r);break;case"details":Ur("toggle",r);break;case"input":Q(r,s),Ur("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Ur("invalid",r);break;case"textarea":ie(r,s),Ur("invalid",r)}for(var c in ye(n,s),i=null,s)if(s.hasOwnProperty(c)){var u=s[c];"children"===c?"string"===typeof u?r.textContent!==u&&(!0!==s.suppressHydrationWarning&&Zr(r.textContent,u,e),i=["children",u]):"number"===typeof u&&r.textContent!==""+u&&(!0!==s.suppressHydrationWarning&&Zr(r.textContent,u,e),i=["children",""+u]):o.hasOwnProperty(c)&&null!=u&&"onScroll"===c&&Ur("scroll",r)}switch(n){case"input":K(r),$(r,s,!0);break;case"textarea":K(r),se(r);break;case"select":case"option":break;default:"function"===typeof s.onClick&&(r.onclick=$r)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{c=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=oe(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=c.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=c.createElement(n,{is:r.is}):(e=c.createElement(n),"select"===n&&(c=e,r.multiple?c.multiple=!0:r.size&&(c.size=r.size))):e=c.createElementNS(e,n),e[hi]=t,e[fi]=r,Do(e,t),t.stateNode=e;e:{switch(c=be(n,r),n){case"dialog":Ur("cancel",e),Ur("close",e),i=r;break;case"iframe":case"object":case"embed":Ur("load",e),i=r;break;case"video":case"audio":for(i=0;i<Lr.length;i++)Ur(Lr[i],e);i=r;break;case"source":Ur("error",e),i=r;break;case"img":case"image":case"link":Ur("error",e),Ur("load",e),i=r;break;case"details":Ur("toggle",e),i=r;break;case"input":Q(e,r),i=J(e,r),Ur("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=j({},r,{value:void 0}),Ur("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),Ur("invalid",e)}for(s in ye(n,i),u=i)if(u.hasOwnProperty(s)){var l=u[s];"style"===s?me(e,l):"dangerouslySetInnerHTML"===s?null!=(l=l?l.__html:void 0)&&de(e,l):"children"===s?"string"===typeof l?("textarea"!==n||""!==l)&&he(e,l):"number"===typeof l&&he(e,""+l):"suppressContentEditableWarning"!==s&&"suppressHydrationWarning"!==s&&"autoFocus"!==s&&(o.hasOwnProperty(s)?null!=l&&"onScroll"===s&&Ur("scroll",e):null!=l&&b(e,s,l,c))}switch(n){case"input":K(e),$(e,r,!1);break;case"textarea":K(e),se(e);break;case"option":null!=r.value&&e.setAttribute("value",""+z(r.value));break;case"select":e.multiple=!!r.multiple,null!=(s=r.value)?ne(e,!!r.multiple,s,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=$r)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Ko(t),null;case 6:if(e&&null!=t.stateNode)Oo(0,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(a(166));if(n=ns(ts.current),ns($a.current),da(t)){if(r=t.stateNode,n=t.memoizedProps,r[hi]=t,(s=r.nodeValue!==n)&&null!==(e=na))switch(e.tag){case 3:Zr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Zr(r.nodeValue,n,0!==(1&e.mode))}s&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[hi]=t,t.stateNode=r}return Ko(t),null;case 13:if(_i(os),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(ia&&null!==ra&&0!==(1&t.mode)&&0===(128&t.flags))ha(),fa(),t.flags|=98560,s=!1;else if(s=da(t),null!==r&&null!==r.dehydrated){if(null===e){if(!s)throw Error(a(318));if(!(s=null!==(s=t.memoizedState)?s.dehydrated:null))throw Error(a(317));s[hi]=t}else fa(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Ko(t),s=!1}else null!==aa&&(su(aa),aa=null),s=!0;if(!s)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&os.current)?0===Oc&&(Oc=3):vu())),null!==t.updateQueue&&(t.flags|=4),Ko(t),null);case 4:return is(),null===e&&Vr(t.stateNode.containerInfo),Ko(t),null;case 10:return wa(t.type._context),Ko(t),null;case 19:if(_i(os),null===(s=t.memoizedState))return Ko(t),null;if(r=0!==(128&t.flags),null===(c=s.rendering))if(r)Wo(s,!1);else{if(0!==Oc||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(c=cs(e))){for(t.flags|=128,Wo(s,!1),null!==(r=c.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(s=n).flags&=14680066,null===(c=s.alternate)?(s.childLanes=0,s.lanes=e,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=c.childLanes,s.lanes=c.lanes,s.child=c.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=c.memoizedProps,s.memoizedState=c.memoizedState,s.updateQueue=c.updateQueue,s.type=c.type,e=c.dependencies,s.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Si(os,1&os.current|2),t.child}e=e.sibling}null!==s.tail&&Xe()>Vc&&(t.flags|=128,r=!0,Wo(s,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=cs(c))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Wo(s,!0),null===s.tail&&"hidden"===s.tailMode&&!c.alternate&&!ia)return Ko(t),null}else 2*Xe()-s.renderingStartTime>Vc&&1073741824!==n&&(t.flags|=128,r=!0,Wo(s,!1),t.lanes=4194304);s.isBackwards?(c.sibling=t.child,t.child=c):(null!==(n=s.last)?n.sibling=c:t.child=c,s.last=c)}return null!==s.tail?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=Xe(),t.sibling=null,n=os.current,Si(os,r?1&n|2:1&n),t):(Ko(t),null);case 22:case 23:return du(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Dc)&&(Ko(t),6&t.subtreeFlags&&(t.flags|=8192)):Ko(t),null;case 24:case 25:return null}throw Error(a(156,t.tag))}function Yo(e,t){switch(ta(t),t.tag){case 1:return Di(t.type)&&Ni(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return is(),_i(Ii),_i(Ci),ls(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return ss(t),null;case 13:if(_i(os),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(a(340));fa()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return _i(os),null;case 4:return is(),null;case 10:return wa(t.type._context),null;case 22:case 23:return du(),null;default:return null}}Do=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},No=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,ns($a.current);var a,s=null;switch(n){case"input":i=J(e,i),r=J(e,r),s=[];break;case"select":i=j({},i,{value:void 0}),r=j({},r,{value:void 0}),s=[];break;case"textarea":i=re(e,i),r=re(e,r),s=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=$r)}for(l in ye(n,r),n=null,i)if(!r.hasOwnProperty(l)&&i.hasOwnProperty(l)&&null!=i[l])if("style"===l){var c=i[l];for(a in c)c.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else"dangerouslySetInnerHTML"!==l&&"children"!==l&&"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&"autoFocus"!==l&&(o.hasOwnProperty(l)?s||(s=[]):(s=s||[]).push(l,null));for(l in r){var u=r[l];if(c=null!=i?i[l]:void 0,r.hasOwnProperty(l)&&u!==c&&(null!=u||null!=c))if("style"===l)if(c){for(a in c)!c.hasOwnProperty(a)||u&&u.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in u)u.hasOwnProperty(a)&&c[a]!==u[a]&&(n||(n={}),n[a]=u[a])}else n||(s||(s=[]),s.push(l,n)),n=u;else"dangerouslySetInnerHTML"===l?(u=u?u.__html:void 0,c=c?c.__html:void 0,null!=u&&c!==u&&(s=s||[]).push(l,u)):"children"===l?"string"!==typeof u&&"number"!==typeof u||(s=s||[]).push(l,""+u):"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&(o.hasOwnProperty(l)?(null!=u&&"onScroll"===l&&Ur("scroll",e),s||c===u||(s=[])):(s=s||[]).push(l,u))}n&&(s=s||[]).push("style",n);var l=s;(t.updateQueue=l)&&(t.flags|=4)}},Oo=function(e,t,n,r){n!==r&&(t.flags|=4)};var Jo=!1,Qo=!1,Xo="function"===typeof WeakSet?WeakSet:Set,Zo=null;function $o(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Eu(e,t,r)}else n.current=null}function ec(e,t,n){try{n()}catch(r){Eu(e,t,r)}}var tc=!1;function nc(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var a=i.destroy;i.destroy=void 0,void 0!==a&&ec(t,n,a)}i=i.next}while(i!==r)}}function rc(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function ic(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function ac(e){var t=e.alternate;null!==t&&(e.alternate=null,ac(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[hi],delete t[fi],delete t[vi],delete t[mi],delete t[gi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function sc(e){return 5===e.tag||3===e.tag||4===e.tag}function oc(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||sc(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function cc(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=$r));else if(4!==r&&null!==(e=e.child))for(cc(e,t,n),e=e.sibling;null!==e;)cc(e,t,n),e=e.sibling}function uc(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(uc(e,t,n),e=e.sibling;null!==e;)uc(e,t,n),e=e.sibling}var lc=null,dc=!1;function hc(e,t,n){for(n=n.child;null!==n;)fc(e,t,n),n=n.sibling}function fc(e,t,n){if(at&&"function"===typeof at.onCommitFiberUnmount)try{at.onCommitFiberUnmount(it,n)}catch(o){}switch(n.tag){case 5:Qo||$o(n,t);case 6:var r=lc,i=dc;lc=null,hc(e,t,n),dc=i,null!==(lc=r)&&(dc?(e=lc,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):lc.removeChild(n.stateNode));break;case 18:null!==lc&&(dc?(e=lc,n=n.stateNode,8===e.nodeType?ci(e.parentNode,n):1===e.nodeType&&ci(e,n),Vt(e)):ci(lc,n.stateNode));break;case 4:r=lc,i=dc,lc=n.stateNode.containerInfo,dc=!0,hc(e,t,n),lc=r,dc=i;break;case 0:case 11:case 14:case 15:if(!Qo&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var a=i,s=a.destroy;a=a.tag,void 0!==s&&(0!==(2&a)||0!==(4&a))&&ec(n,t,s),i=i.next}while(i!==r)}hc(e,t,n);break;case 1:if(!Qo&&($o(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(o){Eu(n,t,o)}hc(e,t,n);break;case 21:hc(e,t,n);break;case 22:1&n.mode?(Qo=(r=Qo)||null!==n.memoizedState,hc(e,t,n),Qo=r):hc(e,t,n);break;default:hc(e,t,n)}}function pc(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Xo),t.forEach((function(t){var r=Cu.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function vc(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var s=e,o=t,c=o;e:for(;null!==c;){switch(c.tag){case 5:lc=c.stateNode,dc=!1;break e;case 3:case 4:lc=c.stateNode.containerInfo,dc=!0;break e}c=c.return}if(null===lc)throw Error(a(160));fc(s,o,i),lc=null,dc=!1;var u=i.alternate;null!==u&&(u.return=null),i.return=null}catch(l){Eu(i,t,l)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)mc(t,e),t=t.sibling}function mc(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(vc(t,e),gc(e),4&r){try{nc(3,e,e.return),rc(3,e)}catch(m){Eu(e,e.return,m)}try{nc(5,e,e.return)}catch(m){Eu(e,e.return,m)}}break;case 1:vc(t,e),gc(e),512&r&&null!==n&&$o(n,n.return);break;case 5:if(vc(t,e),gc(e),512&r&&null!==n&&$o(n,n.return),32&e.flags){var i=e.stateNode;try{he(i,"")}catch(m){Eu(e,e.return,m)}}if(4&r&&null!=(i=e.stateNode)){var s=e.memoizedProps,o=null!==n?n.memoizedProps:s,c=e.type,u=e.updateQueue;if(e.updateQueue=null,null!==u)try{"input"===c&&"radio"===s.type&&null!=s.name&&X(i,s),be(c,o);var l=be(c,s);for(o=0;o<u.length;o+=2){var d=u[o],h=u[o+1];"style"===d?me(i,h):"dangerouslySetInnerHTML"===d?de(i,h):"children"===d?he(i,h):b(i,d,h,l)}switch(c){case"input":Z(i,s);break;case"textarea":ae(i,s);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var p=s.value;null!=p?ne(i,!!s.multiple,p,!1):f!==!!s.multiple&&(null!=s.defaultValue?ne(i,!!s.multiple,s.defaultValue,!0):ne(i,!!s.multiple,s.multiple?[]:"",!1))}i[fi]=s}catch(m){Eu(e,e.return,m)}}break;case 6:if(vc(t,e),gc(e),4&r){if(null===e.stateNode)throw Error(a(162));i=e.stateNode,s=e.memoizedProps;try{i.nodeValue=s}catch(m){Eu(e,e.return,m)}}break;case 3:if(vc(t,e),gc(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Vt(t.containerInfo)}catch(m){Eu(e,e.return,m)}break;case 4:default:vc(t,e),gc(e);break;case 13:vc(t,e),gc(e),8192&(i=e.child).flags&&(s=null!==i.memoizedState,i.stateNode.isHidden=s,!s||null!==i.alternate&&null!==i.alternate.memoizedState||(Gc=Xe())),4&r&&pc(e);break;case 22:if(d=null!==n&&null!==n.memoizedState,1&e.mode?(Qo=(l=Qo)||d,vc(t,e),Qo=l):vc(t,e),gc(e),8192&r){if(l=null!==e.memoizedState,(e.stateNode.isHidden=l)&&!d&&0!==(1&e.mode))for(Zo=e,d=e.child;null!==d;){for(h=Zo=d;null!==Zo;){switch(p=(f=Zo).child,f.tag){case 0:case 11:case 14:case 15:nc(4,f,f.return);break;case 1:$o(f,f.return);var v=f.stateNode;if("function"===typeof v.componentWillUnmount){r=f,n=f.return;try{t=r,v.props=t.memoizedProps,v.state=t.memoizedState,v.componentWillUnmount()}catch(m){Eu(r,n,m)}}break;case 5:$o(f,f.return);break;case 22:if(null!==f.memoizedState){xc(h);continue}}null!==p?(p.return=f,Zo=p):xc(h)}d=d.sibling}e:for(d=null,h=e;;){if(5===h.tag){if(null===d){d=h;try{i=h.stateNode,l?"function"===typeof(s=i.style).setProperty?s.setProperty("display","none","important"):s.display="none":(c=h.stateNode,o=void 0!==(u=h.memoizedProps.style)&&null!==u&&u.hasOwnProperty("display")?u.display:null,c.style.display=ve("display",o))}catch(m){Eu(e,e.return,m)}}}else if(6===h.tag){if(null===d)try{h.stateNode.nodeValue=l?"":h.memoizedProps}catch(m){Eu(e,e.return,m)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:vc(t,e),gc(e),4&r&&pc(e);case 21:}}function gc(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(sc(n)){var r=n;break e}n=n.return}throw Error(a(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(he(i,""),r.flags&=-33),uc(e,oc(e),i);break;case 3:case 4:var s=r.stateNode.containerInfo;cc(e,oc(e),s);break;default:throw Error(a(161))}}catch(o){Eu(e,e.return,o)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function yc(e,t,n){Zo=e,bc(e,t,n)}function bc(e,t,n){for(var r=0!==(1&e.mode);null!==Zo;){var i=Zo,a=i.child;if(22===i.tag&&r){var s=null!==i.memoizedState||Jo;if(!s){var o=i.alternate,c=null!==o&&null!==o.memoizedState||Qo;o=Jo;var u=Qo;if(Jo=s,(Qo=c)&&!u)for(Zo=i;null!==Zo;)c=(s=Zo).child,22===s.tag&&null!==s.memoizedState?wc(i):null!==c?(c.return=s,Zo=c):wc(i);for(;null!==a;)Zo=a,bc(a,t,n),a=a.sibling;Zo=i,Jo=o,Qo=u}kc(e)}else 0!==(8772&i.subtreeFlags)&&null!==a?(a.return=i,Zo=a):kc(e)}}function kc(e){for(;null!==Zo;){var t=Zo;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Qo||rc(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Qo)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:ma(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;null!==s&&Fa(t,s,r);break;case 3:var o=t.updateQueue;if(null!==o){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Fa(t,o,n)}break;case 5:var c=t.stateNode;if(null===n&&4&t.flags){n=c;var u=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var l=t.alternate;if(null!==l){var d=l.memoizedState;if(null!==d){var h=d.dehydrated;null!==h&&Vt(h)}}}break;default:throw Error(a(163))}Qo||512&t.flags&&ic(t)}catch(f){Eu(t,t.return,f)}}if(t===e){Zo=null;break}if(null!==(n=t.sibling)){n.return=t.return,Zo=n;break}Zo=t.return}}function xc(e){for(;null!==Zo;){var t=Zo;if(t===e){Zo=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Zo=n;break}Zo=t.return}}function wc(e){for(;null!==Zo;){var t=Zo;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{rc(4,t)}catch(c){Eu(t,n,c)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(c){Eu(t,i,c)}}var a=t.return;try{ic(t)}catch(c){Eu(t,a,c)}break;case 5:var s=t.return;try{ic(t)}catch(c){Eu(t,s,c)}}}catch(c){Eu(t,t.return,c)}if(t===e){Zo=null;break}var o=t.sibling;if(null!==o){o.return=t.return,Zo=o;break}Zo=t.return}}var Tc,Ec=Math.ceil,_c=k.ReactCurrentDispatcher,Sc=k.ReactCurrentOwner,Ac=k.ReactCurrentBatchConfig,Cc=0,Ic=null,Rc=null,Pc=0,Dc=0,Nc=Ei(0),Oc=0,Lc=null,Mc=0,jc=0,Fc=0,Uc=null,Bc=null,Gc=0,Vc=1/0,Hc=null,zc=!1,Wc=null,Kc=null,qc=!1,Yc=null,Jc=0,Qc=0,Xc=null,Zc=-1,$c=0;function eu(){return 0!==(6&Cc)?Xe():-1!==Zc?Zc:Zc=Xe()}function tu(e){return 0===(1&e.mode)?1:0!==(2&Cc)&&0!==Pc?Pc&-Pc:null!==va.transition?(0===$c&&($c=vt()),$c):0!==(e=bt)?e:e=void 0===(e=window.event)?16:Qt(e.type)}function nu(e,t,n,r){if(50<Qc)throw Qc=0,Xc=null,Error(a(185));gt(e,n,r),0!==(2&Cc)&&e===Ic||(e===Ic&&(0===(2&Cc)&&(jc|=n),4===Oc&&ou(e,Pc)),ru(e,r),1===n&&0===Cc&&0===(1&t.mode)&&(Vc=Xe()+500,Ui&&Vi()))}function ru(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,a=e.pendingLanes;0<a;){var s=31-st(a),o=1<<s,c=i[s];-1===c?0!==(o&n)&&0===(o&r)||(i[s]=ft(o,t)):c<=t&&(e.expiredLanes|=o),a&=~o}}(e,t);var r=ht(e,e===Ic?Pc:0);if(0===r)null!==n&&Ye(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Ye(n),1===t)0===e.tag?function(e){Ui=!0,Gi(e)}(cu.bind(null,e)):Gi(cu.bind(null,e)),si((function(){0===(6&Cc)&&Vi()})),n=null;else{switch(kt(r)){case 1:n=$e;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Iu(n,iu.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function iu(e,t){if(Zc=-1,$c=0,0!==(6&Cc))throw Error(a(327));var n=e.callbackNode;if(wu()&&e.callbackNode!==n)return null;var r=ht(e,e===Ic?Pc:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=mu(e,r);else{t=r;var i=Cc;Cc|=2;var s=pu();for(Ic===e&&Pc===t||(Hc=null,Vc=Xe()+500,hu(e,t));;)try{yu();break}catch(c){fu(e,c)}xa(),_c.current=s,Cc=i,null!==Rc?t=0:(Ic=null,Pc=0,t=Oc)}if(0!==t){if(2===t&&(0!==(i=pt(e))&&(r=i,t=au(e,i))),1===t)throw n=Lc,hu(e,0),ou(e,r),ru(e,Xe()),n;if(6===t)ou(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],a=i.getSnapshot;i=i.value;try{if(!or(a(),i))return!1}catch(o){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=mu(e,r))&&(0!==(s=pt(e))&&(r=s,t=au(e,s))),1===t))throw n=Lc,hu(e,0),ou(e,r),ru(e,Xe()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(a(345));case 2:case 5:xu(e,Bc,Hc);break;case 3:if(ou(e,r),(130023424&r)===r&&10<(t=Gc+500-Xe())){if(0!==ht(e,0))break;if(((i=e.suspendedLanes)&r)!==r){eu(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(xu.bind(null,e,Bc,Hc),t);break}xu(e,Bc,Hc);break;case 4:if(ou(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var o=31-st(r);s=1<<o,(o=t[o])>i&&(i=o),r&=~s}if(r=i,10<(r=(120>(r=Xe()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Ec(r/1960))-r)){e.timeoutHandle=ri(xu.bind(null,e,Bc,Hc),r);break}xu(e,Bc,Hc);break;default:throw Error(a(329))}}}return ru(e,Xe()),e.callbackNode===n?iu.bind(null,e):null}function au(e,t){var n=Uc;return e.current.memoizedState.isDehydrated&&(hu(e,t).flags|=256),2!==(e=mu(e,t))&&(t=Bc,Bc=n,null!==t&&su(t)),e}function su(e){null===Bc?Bc=e:Bc.push.apply(Bc,e)}function ou(e,t){for(t&=~Fc,t&=~jc,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-st(t),r=1<<n;e[n]=-1,t&=~r}}function cu(e){if(0!==(6&Cc))throw Error(a(327));wu();var t=ht(e,0);if(0===(1&t))return ru(e,Xe()),null;var n=mu(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=au(e,r))}if(1===n)throw n=Lc,hu(e,0),ou(e,t),ru(e,Xe()),n;if(6===n)throw Error(a(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,xu(e,Bc,Hc),ru(e,Xe()),null}function uu(e,t){var n=Cc;Cc|=1;try{return e(t)}finally{0===(Cc=n)&&(Vc=Xe()+500,Ui&&Vi())}}function lu(e){null!==Yc&&0===Yc.tag&&0===(6&Cc)&&wu();var t=Cc;Cc|=1;var n=Ac.transition,r=bt;try{if(Ac.transition=null,bt=1,e)return e()}finally{bt=r,Ac.transition=n,0===(6&(Cc=t))&&Vi()}}function du(){Dc=Nc.current,_i(Nc)}function hu(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==Rc)for(n=Rc.return;null!==n;){var r=n;switch(ta(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Ni();break;case 3:is(),_i(Ii),_i(Ci),ls();break;case 5:ss(r);break;case 4:is();break;case 13:case 19:_i(os);break;case 10:wa(r.type._context);break;case 22:case 23:du()}n=n.return}if(Ic=e,Rc=e=Nu(e.current,null),Pc=Dc=t,Oc=0,Lc=null,Fc=jc=Mc=0,Bc=Uc=null,null!==Sa){for(t=0;t<Sa.length;t++)if(null!==(r=(n=Sa[t]).interleaved)){n.interleaved=null;var i=r.next,a=n.pending;if(null!==a){var s=a.next;a.next=i,r.next=s}n.pending=r}Sa=null}return e}function fu(e,t){for(;;){var n=Rc;try{if(xa(),ds.current=ao,gs){for(var r=ps.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}gs=!1}if(fs=0,ms=vs=ps=null,ys=!1,bs=0,Sc.current=null,null===n||null===n.return){Oc=1,Lc=t,Rc=null;break}e:{var s=e,o=n.return,c=n,u=t;if(t=Pc,c.flags|=32768,null!==u&&"object"===typeof u&&"function"===typeof u.then){var l=u,d=c,h=d.tag;if(0===(1&d.mode)&&(0===h||11===h||15===h)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var p=go(o);if(null!==p){p.flags&=-257,yo(p,o,c,0,t),1&p.mode&&mo(s,l,t),u=l;var v=(t=p).updateQueue;if(null===v){var m=new Set;m.add(u),t.updateQueue=m}else v.add(u);break e}if(0===(1&t)){mo(s,l,t),vu();break e}u=Error(a(426))}else if(ia&&1&c.mode){var g=go(o);if(null!==g){0===(65536&g.flags)&&(g.flags|=256),yo(g,o,c,0,t),pa(uo(u,c));break e}}s=u=uo(u,c),4!==Oc&&(Oc=2),null===Uc?Uc=[s]:Uc.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t,Ma(s,po(0,u,t));break e;case 1:c=u;var y=s.type,b=s.stateNode;if(0===(128&s.flags)&&("function"===typeof y.getDerivedStateFromError||null!==b&&"function"===typeof b.componentDidCatch&&(null===Kc||!Kc.has(b)))){s.flags|=65536,t&=-t,s.lanes|=t,Ma(s,vo(s,c,t));break e}}s=s.return}while(null!==s)}ku(n)}catch(k){t=k,Rc===n&&null!==n&&(Rc=n=n.return);continue}break}}function pu(){var e=_c.current;return _c.current=ao,null===e?ao:e}function vu(){0!==Oc&&3!==Oc&&2!==Oc||(Oc=4),null===Ic||0===(268435455&Mc)&&0===(268435455&jc)||ou(Ic,Pc)}function mu(e,t){var n=Cc;Cc|=2;var r=pu();for(Ic===e&&Pc===t||(Hc=null,hu(e,t));;)try{gu();break}catch(i){fu(e,i)}if(xa(),Cc=n,_c.current=r,null!==Rc)throw Error(a(261));return Ic=null,Pc=0,Oc}function gu(){for(;null!==Rc;)bu(Rc)}function yu(){for(;null!==Rc&&!Je();)bu(Rc)}function bu(e){var t=Tc(e.alternate,e,Dc);e.memoizedProps=e.pendingProps,null===t?ku(e):Rc=t,Sc.current=null}function ku(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=qo(n,t,Dc)))return void(Rc=n)}else{if(null!==(n=Yo(n,t)))return n.flags&=32767,void(Rc=n);if(null===e)return Oc=6,void(Rc=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Rc=t);Rc=t=e}while(null!==t);0===Oc&&(Oc=5)}function xu(e,t,n){var r=bt,i=Ac.transition;try{Ac.transition=null,bt=1,function(e,t,n,r){do{wu()}while(null!==Yc);if(0!==(6&Cc))throw Error(a(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(a(177));e.callbackNode=null,e.callbackPriority=0;var s=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-st(n),a=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~a}}(e,s),e===Ic&&(Rc=Ic=null,Pc=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||qc||(qc=!0,Iu(tt,(function(){return wu(),null}))),s=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||s){s=Ac.transition,Ac.transition=null;var o=bt;bt=1;var c=Cc;Cc|=4,Sc.current=null,function(e,t){if(ei=zt,fr(e=hr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch(x){n=null;break e}var o=0,c=-1,u=-1,l=0,d=0,h=e,f=null;t:for(;;){for(var p;h!==n||0!==i&&3!==h.nodeType||(c=o+i),h!==s||0!==r&&3!==h.nodeType||(u=o+r),3===h.nodeType&&(o+=h.nodeValue.length),null!==(p=h.firstChild);)f=h,h=p;for(;;){if(h===e)break t;if(f===n&&++l===i&&(c=o),f===s&&++d===r&&(u=o),null!==(p=h.nextSibling))break;f=(h=f).parentNode}h=p}n=-1===c||-1===u?null:{start:c,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},zt=!1,Zo=t;null!==Zo;)if(e=(t=Zo).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Zo=e;else for(;null!==Zo;){t=Zo;try{var v=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==v){var m=v.memoizedProps,g=v.memoizedState,y=t.stateNode,b=y.getSnapshotBeforeUpdate(t.elementType===t.type?m:ma(t.type,m),g);y.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var k=t.stateNode.containerInfo;1===k.nodeType?k.textContent="":9===k.nodeType&&k.documentElement&&k.removeChild(k.documentElement);break;default:throw Error(a(163))}}catch(x){Eu(t,t.return,x)}if(null!==(e=t.sibling)){e.return=t.return,Zo=e;break}Zo=t.return}v=tc,tc=!1}(e,n),mc(n,e),pr(ti),zt=!!ei,ti=ei=null,e.current=n,yc(n,e,i),Qe(),Cc=c,bt=o,Ac.transition=s}else e.current=n;if(qc&&(qc=!1,Yc=e,Jc=i),0===(s=e.pendingLanes)&&(Kc=null),function(e){if(at&&"function"===typeof at.onCommitFiberRoot)try{at.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),ru(e,Xe()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)r((i=t[n]).value,{componentStack:i.stack,digest:i.digest});if(zc)throw zc=!1,e=Wc,Wc=null,e;0!==(1&Jc)&&0!==e.tag&&wu(),0!==(1&(s=e.pendingLanes))?e===Xc?Qc++:(Qc=0,Xc=e):Qc=0,Vi()}(e,t,n,r)}finally{Ac.transition=i,bt=r}return null}function wu(){if(null!==Yc){var e=kt(Jc),t=Ac.transition,n=bt;try{if(Ac.transition=null,bt=16>e?16:e,null===Yc)var r=!1;else{if(e=Yc,Yc=null,Jc=0,0!==(6&Cc))throw Error(a(331));var i=Cc;for(Cc|=4,Zo=e.current;null!==Zo;){var s=Zo,o=s.child;if(0!==(16&Zo.flags)){var c=s.deletions;if(null!==c){for(var u=0;u<c.length;u++){var l=c[u];for(Zo=l;null!==Zo;){var d=Zo;switch(d.tag){case 0:case 11:case 15:nc(8,d,s)}var h=d.child;if(null!==h)h.return=d,Zo=h;else for(;null!==Zo;){var f=(d=Zo).sibling,p=d.return;if(ac(d),d===l){Zo=null;break}if(null!==f){f.return=p,Zo=f;break}Zo=p}}}var v=s.alternate;if(null!==v){var m=v.child;if(null!==m){v.child=null;do{var g=m.sibling;m.sibling=null,m=g}while(null!==m)}}Zo=s}}if(0!==(2064&s.subtreeFlags)&&null!==o)o.return=s,Zo=o;else e:for(;null!==Zo;){if(0!==(2048&(s=Zo).flags))switch(s.tag){case 0:case 11:case 15:nc(9,s,s.return)}var y=s.sibling;if(null!==y){y.return=s.return,Zo=y;break e}Zo=s.return}}var b=e.current;for(Zo=b;null!==Zo;){var k=(o=Zo).child;if(0!==(2064&o.subtreeFlags)&&null!==k)k.return=o,Zo=k;else e:for(o=b;null!==Zo;){if(0!==(2048&(c=Zo).flags))try{switch(c.tag){case 0:case 11:case 15:rc(9,c)}}catch(w){Eu(c,c.return,w)}if(c===o){Zo=null;break e}var x=c.sibling;if(null!==x){x.return=c.return,Zo=x;break e}Zo=c.return}}if(Cc=i,Vi(),at&&"function"===typeof at.onPostCommitFiberRoot)try{at.onPostCommitFiberRoot(it,e)}catch(w){}r=!0}return r}finally{bt=n,Ac.transition=t}}return!1}function Tu(e,t,n){e=Oa(e,t=po(0,t=uo(n,t),1),1),t=eu(),null!==e&&(gt(e,1,t),ru(e,t))}function Eu(e,t,n){if(3===e.tag)Tu(e,e,n);else for(;null!==t;){if(3===t.tag){Tu(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Kc||!Kc.has(r))){t=Oa(t,e=vo(t,e=uo(n,e),1),1),e=eu(),null!==t&&(gt(t,1,e),ru(t,e));break}}t=t.return}}function _u(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=eu(),e.pingedLanes|=e.suspendedLanes&n,Ic===e&&(Pc&n)===n&&(4===Oc||3===Oc&&(130023424&Pc)===Pc&&500>Xe()-Gc?hu(e,0):Fc|=n),ru(e,t)}function Su(e,t){0===t&&(0===(1&e.mode)?t=1:(t=lt,0===(130023424&(lt<<=1))&&(lt=4194304)));var n=eu();null!==(e=Ia(e,t))&&(gt(e,t,n),ru(e,n))}function Au(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Su(e,n)}function Cu(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(a(314))}null!==r&&r.delete(t),Su(e,n)}function Iu(e,t){return qe(e,t)}function Ru(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Pu(e,t,n,r){return new Ru(e,t,n,r)}function Du(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Nu(e,t){var n=e.alternate;return null===n?((n=Pu(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Ou(e,t,n,r,i,s){var o=2;if(r=e,"function"===typeof e)Du(e)&&(o=1);else if("string"===typeof e)o=5;else e:switch(e){case T:return Lu(n.children,i,s,t);case E:o=8,i|=8;break;case _:return(e=Pu(12,n,t,2|i)).elementType=_,e.lanes=s,e;case I:return(e=Pu(13,n,t,i)).elementType=I,e.lanes=s,e;case R:return(e=Pu(19,n,t,i)).elementType=R,e.lanes=s,e;case N:return Mu(n,i,s,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case S:o=10;break e;case A:o=9;break e;case C:o=11;break e;case P:o=14;break e;case D:o=16,r=null;break e}throw Error(a(130,null==e?e:typeof e,""))}return(t=Pu(o,n,t,i)).elementType=e,t.type=r,t.lanes=s,t}function Lu(e,t,n,r){return(e=Pu(7,e,r,t)).lanes=n,e}function Mu(e,t,n,r){return(e=Pu(22,e,r,t)).elementType=N,e.lanes=n,e.stateNode={isHidden:!1},e}function ju(e,t,n){return(e=Pu(6,e,null,t)).lanes=n,e}function Fu(e,t,n){return(t=Pu(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Uu(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=mt(0),this.expirationTimes=mt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=mt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Bu(e,t,n,r,i,a,s,o,c){return e=new Uu(e,t,n,o,c),1===t?(t=1,!0===a&&(t|=8)):t=0,a=Pu(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Pa(a),e}function Gu(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:w,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}function Vu(e){if(!e)return Ai;e:{if(Ve(e=e._reactInternals)!==e||1!==e.tag)throw Error(a(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Di(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(a(171))}if(1===e.tag){var n=e.type;if(Di(n))return Li(e,n,t)}return t}function Hu(e,t,n,r,i,a,s,o,c){return(e=Bu(n,r,!0,e,0,a,0,o,c)).context=Vu(null),n=e.current,(a=Na(r=eu(),i=tu(n))).callback=void 0!==t&&null!==t?t:null,Oa(n,a,i),e.current.lanes=i,gt(e,i,r),ru(e,r),e}function zu(e,t,n,r){var i=t.current,a=eu(),s=tu(i);return n=Vu(n),null===t.context?t.context=n:t.pendingContext=n,(t=Na(a,s)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Oa(i,t,s))&&(nu(e,i,s,a),La(e,i,s)),s}function Wu(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Ku(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function qu(e,t){Ku(e,t),(e=e.alternate)&&Ku(e,t)}Tc=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ii.current)ko=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return ko=!1,function(e,t,n){switch(t.tag){case 3:Ro(t),fa();break;case 5:as(t);break;case 1:Di(t.type)&&Mi(t);break;case 4:rs(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Si(ga,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Si(os,1&os.current),t.flags|=128,null):0!==(n&t.child.childLanes)?jo(e,t,n):(Si(os,1&os.current),null!==(e=zo(e,t,n))?e.sibling:null);Si(os,1&os.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return Vo(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Si(os,os.current),r)break;return null;case 22:case 23:return t.lanes=0,_o(e,t,n)}return zo(e,t,n)}(e,t,n);ko=0!==(131072&e.flags)}else ko=!1,ia&&0!==(1048576&t.flags)&&$i(t,Ki,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Ho(e,t),e=t.pendingProps;var i=Pi(t,Ci.current);Ea(t,n),i=Ts(null,t,r,e,i,n);var s=Es();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Di(r)?(s=!0,Mi(t)):s=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Pa(t),i.updater=Ga,t.stateNode=i,i._reactInternals=t,Wa(t,r,e,n),t=Io(null,t,r,!0,s,n)):(t.tag=0,ia&&s&&ea(t),xo(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Ho(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Du(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===C)return 11;if(e===P)return 14}return 2}(r),e=ma(r,e),i){case 0:t=Ao(null,t,r,e,n);break e;case 1:t=Co(null,t,r,e,n);break e;case 11:t=wo(null,t,r,e,n);break e;case 14:t=To(null,t,r,ma(r.type,e),n);break e}throw Error(a(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,Ao(e,t,r,i=t.elementType===r?i:ma(r,i),n);case 1:return r=t.type,i=t.pendingProps,Co(e,t,r,i=t.elementType===r?i:ma(r,i),n);case 3:e:{if(Ro(t),null===e)throw Error(a(387));r=t.pendingProps,i=(s=t.memoizedState).element,Da(e,t),ja(t,r,null,n);var o=t.memoizedState;if(r=o.element,s.isDehydrated){if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=s,t.memoizedState=s,256&t.flags){t=Po(e,t,r,n,i=uo(Error(a(423)),t));break e}if(r!==i){t=Po(e,t,r,n,i=uo(Error(a(424)),t));break e}for(ra=ui(t.stateNode.containerInfo.firstChild),na=t,ia=!0,aa=null,n=Xa(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(fa(),r===i){t=zo(e,t,n);break e}xo(e,t,r,n)}t=t.child}return t;case 5:return as(t),null===e&&ua(t),r=t.type,i=t.pendingProps,s=null!==e?e.memoizedProps:null,o=i.children,ni(r,i)?o=null:null!==s&&ni(r,s)&&(t.flags|=32),So(e,t),xo(e,t,o,n),t.child;case 6:return null===e&&ua(t),null;case 13:return jo(e,t,n);case 4:return rs(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Qa(t,null,r,n):xo(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,wo(e,t,r,i=t.elementType===r?i:ma(r,i),n);case 7:return xo(e,t,t.pendingProps,n),t.child;case 8:case 12:return xo(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,s=t.memoizedProps,o=i.value,Si(ga,r._currentValue),r._currentValue=o,null!==s)if(or(s.value,o)){if(s.children===i.children&&!Ii.current){t=zo(e,t,n);break e}}else for(null!==(s=t.child)&&(s.return=t);null!==s;){var c=s.dependencies;if(null!==c){o=s.child;for(var u=c.firstContext;null!==u;){if(u.context===r){if(1===s.tag){(u=Na(-1,n&-n)).tag=2;var l=s.updateQueue;if(null!==l){var d=(l=l.shared).pending;null===d?u.next=u:(u.next=d.next,d.next=u),l.pending=u}}s.lanes|=n,null!==(u=s.alternate)&&(u.lanes|=n),Ta(s.return,n,t),c.lanes|=n;break}u=u.next}}else if(10===s.tag)o=s.type===t.type?null:s.child;else if(18===s.tag){if(null===(o=s.return))throw Error(a(341));o.lanes|=n,null!==(c=o.alternate)&&(c.lanes|=n),Ta(o,n,t),o=s.sibling}else o=s.child;if(null!==o)o.return=s;else for(o=s;null!==o;){if(o===t){o=null;break}if(null!==(s=o.sibling)){s.return=o.return,o=s;break}o=o.return}s=o}xo(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Ea(t,n),r=r(i=_a(i)),t.flags|=1,xo(e,t,r,n),t.child;case 14:return i=ma(r=t.type,t.pendingProps),To(e,t,r,i=ma(r.type,i),n);case 15:return Eo(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:ma(r,i),Ho(e,t),t.tag=1,Di(r)?(e=!0,Mi(t)):e=!1,Ea(t,n),Ha(t,r,i),Wa(t,r,i,n),Io(null,t,r,!0,e,n);case 19:return Vo(e,t,n);case 22:return _o(e,t,n)}throw Error(a(156,t.tag))};var Yu="function"===typeof reportError?reportError:function(e){console.error(e)};function Ju(e){this._internalRoot=e}function Qu(e){this._internalRoot=e}function Xu(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Zu(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function $u(){}function el(e,t,n,r,i){var a=n._reactRootContainer;if(a){var s=a;if("function"===typeof i){var o=i;i=function(){var e=Wu(s);o.call(e)}}zu(t,s,e,i)}else s=function(e,t,n,r,i){if(i){if("function"===typeof r){var a=r;r=function(){var e=Wu(s);a.call(e)}}var s=Hu(t,r,e,0,null,!1,0,"",$u);return e._reactRootContainer=s,e[pi]=s.current,Vr(8===e.nodeType?e.parentNode:e),lu(),s}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var o=r;r=function(){var e=Wu(c);o.call(e)}}var c=Bu(e,0,!1,null,0,!1,0,"",$u);return e._reactRootContainer=c,e[pi]=c.current,Vr(8===e.nodeType?e.parentNode:e),lu((function(){zu(t,c,n,r)})),c}(n,t,e,i,r);return Wu(s)}Qu.prototype.render=Ju.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(a(409));zu(e,t,null,null)},Qu.prototype.unmount=Ju.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;lu((function(){zu(null,e,null,null)})),t[pi]=null}},Qu.prototype.unstable_scheduleHydration=function(e){if(e){var t=Et();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Nt.length&&0!==t&&t<Nt[n].priority;n++);Nt.splice(n,0,e),0===n&&jt(e)}},xt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=dt(t.pendingLanes);0!==n&&(yt(t,1|n),ru(t,Xe()),0===(6&Cc)&&(Vc=Xe()+500,Vi()))}break;case 13:lu((function(){var t=Ia(e,1);if(null!==t){var n=eu();nu(t,e,1,n)}})),qu(e,1)}},wt=function(e){if(13===e.tag){var t=Ia(e,134217728);if(null!==t)nu(t,e,134217728,eu());qu(e,134217728)}},Tt=function(e){if(13===e.tag){var t=tu(e),n=Ia(e,t);if(null!==n)nu(n,e,t,eu());qu(e,t)}},Et=function(){return bt},_t=function(e,t){var n=bt;try{return bt=e,t()}finally{bt=n}},we=function(e,t,n){switch(t){case"input":if(Z(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=xi(r);if(!i)throw Error(a(90));q(r),Z(r,i)}}}break;case"textarea":ae(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ce=uu,Ie=lu;var tl={usingClientEntryPoint:!1,Events:[bi,ki,xi,Se,Ae,uu]},nl={findFiberByHostInstance:yi,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},rl={bundleType:nl.bundleType,version:nl.version,rendererPackageName:nl.rendererPackageName,rendererConfig:nl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:k.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=We(e))?null:e.stateNode},findFiberByHostInstance:nl.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var il=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!il.isDisabled&&il.supportsFiber)try{it=il.inject(rl),at=il}catch(le){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tl,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Xu(t))throw Error(a(200));return Gu(e,t,null,n)},t.createRoot=function(e,t){if(!Xu(e))throw Error(a(299));var n=!1,r="",i=Yu;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=Bu(e,1,!1,null,0,n,0,r,i),e[pi]=t.current,Vr(8===e.nodeType?e.parentNode:e),new Ju(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(a(188));throw e=Object.keys(e).join(","),Error(a(268,e))}return e=null===(e=We(t))?null:e.stateNode},t.flushSync=function(e){return lu(e)},t.hydrate=function(e,t,n){if(!Zu(t))throw Error(a(200));return el(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Xu(e))throw Error(a(405));var r=null!=n&&n.hydratedSources||null,i=!1,s="",o=Yu;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(s=n.identifierPrefix),void 0!==n.onRecoverableError&&(o=n.onRecoverableError)),t=Hu(t,null,e,1,null!=n?n:null,i,0,s,o),e[pi]=t.current,Vr(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Qu(t)},t.render=function(e,t,n){if(!Zu(t))throw Error(a(200));return el(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Zu(e))throw Error(a(40));return!!e._reactRootContainer&&(lu((function(){el(null,null,e,!1,(function(){e._reactRootContainer=null,e[pi]=null}))})),!0)},t.unstable_batchedUpdates=uu,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Zu(n))throw Error(a(200));if(null==e||void 0===e._reactInternals)throw Error(a(38));return el(e,t,n,!1,r)},t.version="18.2.0-next-9e3b772b8-20220608"},250:function(e,t,n){"use strict";var r=n(164);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},164:function(e,t,n){"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(463)},48:function(module,__unused_webpack_exports,__webpack_require__){!function(e,t){module.exports=t(__webpack_require__(791))}(0,(function(__WEBPACK_EXTERNAL_MODULE__98__){return function(){var __webpack_modules__={759:function(e,t,n){"use strict";n.d(t,{Z:function(){return f}});var r,i=n(98),a=n.n(i),s=n(697),o=n.n(s);function c(){return c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},c.apply(this,arguments)}e=n.hmd(e),(r="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&r(e),"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;var u=function(e){var t=e.breakLabel,n=e.breakClassName,r=e.breakLinkClassName,i=e.breakHandler,s=e.getEventListener,o=n||"break";return a().createElement("li",{className:o},a().createElement("a",c({className:r,role:"button",tabIndex:"0",onKeyPress:i},s(i)),t))};u.propTypes={breakLabel:o().oneOfType([o().string,o().node]),breakClassName:o().string,breakLinkClassName:o().string,breakHandler:o().func.isRequired,getEventListener:o().func.isRequired};var l,d,h=u,f=h;(l="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(l.register(u,"BreakView","/home/yoan/work/oss/react-paginate/react_components/BreakView.js"),l.register(h,"default","/home/yoan/work/oss/react-paginate/react_components/BreakView.js")),(d="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&d(e)},770:function(e,t,n){"use strict";n.d(t,{Z:function(){return f}});var r,i=n(98),a=n.n(i),s=n(697),o=n.n(s);function c(){return c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},c.apply(this,arguments)}e=n.hmd(e),(r="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&r(e),"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;var u=function(e){var t=e.pageClassName,n=e.pageLinkClassName,r=e.page,i=e.selected,s=e.activeClassName,o=e.activeLinkClassName,u=e.getEventListener,l=e.pageSelectedHandler,d=e.href,h=e.extraAriaContext,f=e.pageLabelBuilder,p=e.rel,v=e.ariaLabel||"Page "+r+(h?" "+h:""),m=null;return i&&(m="page",v=e.ariaLabel||"Page "+r+" is your current page",t=void 0!==t?t+" "+s:s,void 0!==n?void 0!==o&&(n=n+" "+o):n=o),a().createElement("li",{className:t},a().createElement("a",c({rel:p,role:d?void 0:"button",className:n,href:d,tabIndex:i?"-1":"0","aria-label":v,"aria-current":m,onKeyPress:l},u(l)),f(r)))};u.propTypes={pageSelectedHandler:o().func.isRequired,selected:o().bool.isRequired,pageClassName:o().string,pageLinkClassName:o().string,activeClassName:o().string,activeLinkClassName:o().string,extraAriaContext:o().string,href:o().string,ariaLabel:o().string,page:o().number.isRequired,getEventListener:o().func.isRequired,pageLabelBuilder:o().func.isRequired,rel:o().string};var l,d,h=u,f=h;(l="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(l.register(u,"PageView","/home/yoan/work/oss/react-paginate/react_components/PageView.js"),l.register(h,"default","/home/yoan/work/oss/react-paginate/react_components/PageView.js")),(d="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&d(e)},214:function _(module,__webpack_exports__,__nested_webpack_require_5475__){"use strict";__nested_webpack_require_5475__.d(__webpack_exports__,{Z:function(){return PaginationBoxView}});var react__WEBPACK_IMPORTED_MODULE_0__=__nested_webpack_require_5475__(98),react__WEBPACK_IMPORTED_MODULE_0___default=__nested_webpack_require_5475__.n(react__WEBPACK_IMPORTED_MODULE_0__),prop_types__WEBPACK_IMPORTED_MODULE_1__=__nested_webpack_require_5475__(697),prop_types__WEBPACK_IMPORTED_MODULE_1___default=__nested_webpack_require_5475__.n(prop_types__WEBPACK_IMPORTED_MODULE_1__),_PageView__WEBPACK_IMPORTED_MODULE_2__=__nested_webpack_require_5475__(770),_BreakView__WEBPACK_IMPORTED_MODULE_3__=__nested_webpack_require_5475__(759),_utils__WEBPACK_IMPORTED_MODULE_4__=__nested_webpack_require_5475__(923),enterModule;function _typeof(e){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof(e)}function _extends(){return _extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},_extends.apply(this,arguments)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return _setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},_setPrototypeOf(e,t)}function _createSuper(e){var t=_isNativeReflectConstruct();return function(){var n,r=_getPrototypeOf(e);if(t){var i=_getPrototypeOf(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return _possibleConstructorReturn(this,n)}}function _possibleConstructorReturn(e,t){if(t&&("object"===_typeof(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(e)}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function _getPrototypeOf(e){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},_getPrototypeOf(e)}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}module=__nested_webpack_require_5475__.hmd(module),enterModule="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0,enterModule&&enterModule(module);var __signature__="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e},PaginationBoxView=function(_Component){_inherits(PaginationBoxView,_Component);var _super=_createSuper(PaginationBoxView);function PaginationBoxView(e){var t,n;return _classCallCheck(this,PaginationBoxView),_defineProperty(_assertThisInitialized(t=_super.call(this,e)),"handlePreviousPage",(function(e){var n=t.state.selected;t.handleClick(e,null,n>0?n-1:void 0,{isPrevious:!0})})),_defineProperty(_assertThisInitialized(t),"handleNextPage",(function(e){var n=t.state.selected,r=t.props.pageCount;t.handleClick(e,null,n<r-1?n+1:void 0,{isNext:!0})})),_defineProperty(_assertThisInitialized(t),"handlePageSelected",(function(e,n){if(t.state.selected===e)return t.callActiveCallback(e),void t.handleClick(n,null,void 0,{isActive:!0});t.handleClick(n,null,e)})),_defineProperty(_assertThisInitialized(t),"handlePageChange",(function(e){t.state.selected!==e&&(t.setState({selected:e}),t.callCallback(e))})),_defineProperty(_assertThisInitialized(t),"getEventListener",(function(e){return _defineProperty({},t.props.eventListener,e)})),_defineProperty(_assertThisInitialized(t),"handleClick",(function(e,n,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=i.isPrevious,s=void 0!==a&&a,o=i.isNext,c=void 0!==o&&o,u=i.isBreak,l=void 0!==u&&u,d=i.isActive,h=void 0!==d&&d;e.preventDefault?e.preventDefault():e.returnValue=!1;var f=t.state.selected,p=t.props.onClick,v=r;if(p){var m=p({index:n,selected:f,nextSelectedPage:r,event:e,isPrevious:s,isNext:c,isBreak:l,isActive:h});if(!1===m)return;Number.isInteger(m)&&(v=m)}void 0!==v&&t.handlePageChange(v)})),_defineProperty(_assertThisInitialized(t),"handleBreakClick",(function(e,n){var r=t.state.selected;t.handleClick(n,e,r<e?t.getForwardJump():t.getBackwardJump(),{isBreak:!0})})),_defineProperty(_assertThisInitialized(t),"callCallback",(function(e){void 0!==t.props.onPageChange&&"function"==typeof t.props.onPageChange&&t.props.onPageChange({selected:e})})),_defineProperty(_assertThisInitialized(t),"callActiveCallback",(function(e){void 0!==t.props.onPageActive&&"function"==typeof t.props.onPageActive&&t.props.onPageActive({selected:e})})),_defineProperty(_assertThisInitialized(t),"getElementPageRel",(function(e){var n=t.state.selected,r=t.props,i=r.nextPageRel,a=r.prevPageRel,s=r.selectedPageRel;return n-1===e?a:n===e?s:n+1===e?i:void 0})),_defineProperty(_assertThisInitialized(t),"pagination",(function(){var e=[],n=t.props,r=n.pageRangeDisplayed,i=n.pageCount,a=n.marginPagesDisplayed,s=n.breakLabel,o=n.breakClassName,c=n.breakLinkClassName,u=t.state.selected;if(i<=r)for(var l=0;l<i;l++)e.push(t.getPageElement(l));else{var d=r/2,h=r-d;u>i-r/2?d=r-(h=i-u):u<r/2&&(h=r-(d=u));var f,p,v=function(e){return t.getPageElement(e)},m=[];for(f=0;f<i;f++){var g=f+1;g<=a||g>i-a||f>=u-d&&f<=u+(0===u&&r>1?h-1:h)?m.push({type:"page",index:f,display:v(f)}):s&&m.length>0&&m[m.length-1].display!==p&&(r>0||a>0)&&(p=react__WEBPACK_IMPORTED_MODULE_0___default().createElement(_BreakView__WEBPACK_IMPORTED_MODULE_3__.Z,{key:f,breakLabel:s,breakClassName:o,breakLinkClassName:c,breakHandler:t.handleBreakClick.bind(null,f),getEventListener:t.getEventListener}),m.push({type:"break",index:f,display:p}))}m.forEach((function(t,n){var r=t;"break"===t.type&&m[n-1]&&"page"===m[n-1].type&&m[n+1]&&"page"===m[n+1].type&&m[n+1].index-m[n-1].index<=2&&(r={type:"page",index:t.index,display:v(t.index)}),e.push(r.display)}))}return e})),void 0!==e.initialPage&&void 0!==e.forcePage&&console.warn("(react-paginate): Both initialPage (".concat(e.initialPage,") and forcePage (").concat(e.forcePage,") props are provided, which is discouraged.")+" Use exclusively forcePage prop for a controlled component.\nSee https://reactjs.org/docs/forms.html#controlled-components"),n=e.initialPage?e.initialPage:e.forcePage?e.forcePage:0,t.state={selected:n},t}return _createClass(PaginationBoxView,[{key:"componentDidMount",value:function(){var e=this.props,t=e.initialPage,n=e.disableInitialCallback,r=e.extraAriaContext,i=e.pageCount,a=e.forcePage;void 0===t||n||this.callCallback(t),r&&console.warn("DEPRECATED (react-paginate): The extraAriaContext prop is deprecated. You should now use the ariaLabelBuilder instead."),Number.isInteger(i)||console.warn("(react-paginate): The pageCount prop value provided is not an integer (".concat(i,"). Did you forget a Math.ceil()?")),void 0!==t&&t>i-1&&console.warn("(react-paginate): The initialPage prop provided is greater than the maximum page index from pageCount prop (".concat(t," > ").concat(i-1,").")),void 0!==a&&a>i-1&&console.warn("(react-paginate): The forcePage prop provided is greater than the maximum page index from pageCount prop (".concat(a," > ").concat(i-1,")."))}},{key:"componentDidUpdate",value:function(e){void 0!==this.props.forcePage&&this.props.forcePage!==e.forcePage&&(this.props.forcePage>this.props.pageCount-1&&console.warn("(react-paginate): The forcePage prop provided is greater than the maximum page index from pageCount prop (".concat(this.props.forcePage," > ").concat(this.props.pageCount-1,").")),this.setState({selected:this.props.forcePage})),Number.isInteger(e.pageCount)&&!Number.isInteger(this.props.pageCount)&&console.warn("(react-paginate): The pageCount prop value provided is not an integer (".concat(this.props.pageCount,"). Did you forget a Math.ceil()?"))}},{key:"getForwardJump",value:function(){var e=this.state.selected,t=this.props,n=t.pageCount,r=e+t.pageRangeDisplayed;return r>=n?n-1:r}},{key:"getBackwardJump",value:function(){var e=this.state.selected-this.props.pageRangeDisplayed;return e<0?0:e}},{key:"getElementHref",value:function(e){var t=this.props,n=t.hrefBuilder,r=t.pageCount,i=t.hrefAllControls;if(n)return i||e>=0&&e<r?n(e+1,r,this.state.selected):void 0}},{key:"ariaLabelBuilder",value:function(e){var t=e===this.state.selected;if(this.props.ariaLabelBuilder&&e>=0&&e<this.props.pageCount){var n=this.props.ariaLabelBuilder(e+1,t);return this.props.extraAriaContext&&!t&&(n=n+" "+this.props.extraAriaContext),n}}},{key:"getPageElement",value:function(e){var t=this.state.selected,n=this.props,r=n.pageClassName,i=n.pageLinkClassName,a=n.activeClassName,s=n.activeLinkClassName,o=n.extraAriaContext,c=n.pageLabelBuilder;return react__WEBPACK_IMPORTED_MODULE_0___default().createElement(_PageView__WEBPACK_IMPORTED_MODULE_2__.Z,{key:e,pageSelectedHandler:this.handlePageSelected.bind(null,e),selected:t===e,rel:this.getElementPageRel(e),pageClassName:r,pageLinkClassName:i,activeClassName:a,activeLinkClassName:s,extraAriaContext:o,href:this.getElementHref(e),ariaLabel:this.ariaLabelBuilder(e),page:e+1,pageLabelBuilder:c,getEventListener:this.getEventListener})}},{key:"render",value:function(){var e=this.props.renderOnZeroPageCount;if(0===this.props.pageCount&&void 0!==e)return e?e(this.props):e;var t=this.props,n=t.disabledClassName,r=t.disabledLinkClassName,i=t.pageCount,a=t.className,s=t.containerClassName,o=t.previousLabel,c=t.previousClassName,u=t.previousLinkClassName,l=t.previousAriaLabel,d=t.prevRel,h=t.nextLabel,f=t.nextClassName,p=t.nextLinkClassName,v=t.nextAriaLabel,m=t.nextRel,g=this.state.selected,y=0===g,b=g===i-1,k="".concat((0,_utils__WEBPACK_IMPORTED_MODULE_4__.m)(c)).concat(y?" ".concat((0,_utils__WEBPACK_IMPORTED_MODULE_4__.m)(n)):""),x="".concat((0,_utils__WEBPACK_IMPORTED_MODULE_4__.m)(f)).concat(b?" ".concat((0,_utils__WEBPACK_IMPORTED_MODULE_4__.m)(n)):""),w="".concat((0,_utils__WEBPACK_IMPORTED_MODULE_4__.m)(u)).concat(y?" ".concat((0,_utils__WEBPACK_IMPORTED_MODULE_4__.m)(r)):""),T="".concat((0,_utils__WEBPACK_IMPORTED_MODULE_4__.m)(p)).concat(b?" ".concat((0,_utils__WEBPACK_IMPORTED_MODULE_4__.m)(r)):""),E=y?"true":"false",_=b?"true":"false";return react__WEBPACK_IMPORTED_MODULE_0___default().createElement("ul",{className:a||s},react__WEBPACK_IMPORTED_MODULE_0___default().createElement("li",{className:k},react__WEBPACK_IMPORTED_MODULE_0___default().createElement("a",_extends({className:w,href:this.getElementHref(g-1),tabIndex:y?"-1":"0",role:"button",onKeyPress:this.handlePreviousPage,"aria-disabled":E,"aria-label":l,rel:d},this.getEventListener(this.handlePreviousPage)),o)),this.pagination(),react__WEBPACK_IMPORTED_MODULE_0___default().createElement("li",{className:x},react__WEBPACK_IMPORTED_MODULE_0___default().createElement("a",_extends({className:T,href:this.getElementHref(g+1),tabIndex:b?"-1":"0",role:"button",onKeyPress:this.handleNextPage,"aria-disabled":_,"aria-label":v,rel:m},this.getEventListener(this.handleNextPage)),h)))}},{key:"__reactstandin__regenerateByEval",value:function __reactstandin__regenerateByEval(key,code){this[key]=eval(code)}}]),PaginationBoxView}(react__WEBPACK_IMPORTED_MODULE_0__.Component),reactHotLoader,leaveModule;_defineProperty(PaginationBoxView,"propTypes",{pageCount:prop_types__WEBPACK_IMPORTED_MODULE_1___default().number.isRequired,pageRangeDisplayed:prop_types__WEBPACK_IMPORTED_MODULE_1___default().number,marginPagesDisplayed:prop_types__WEBPACK_IMPORTED_MODULE_1___default().number,previousLabel:prop_types__WEBPACK_IMPORTED_MODULE_1___default().node,previousAriaLabel:prop_types__WEBPACK_IMPORTED_MODULE_1___default().string,prevPageRel:prop_types__WEBPACK_IMPORTED_MODULE_1___default().string,prevRel:prop_types__WEBPACK_IMPORTED_MODULE_1___default().string,nextLabel:prop_types__WEBPACK_IMPORTED_MODULE_1___default().node,nextAriaLabel:prop_types__WEBPACK_IMPORTED_MODULE_1___default().string,nextPageRel:prop_types__WEBPACK_IMPORTED_MODULE_1___default().string,nextRel:prop_types__WEBPACK_IMPORTED_MODULE_1___default().string,breakLabel:prop_types__WEBPACK_IMPORTED_MODULE_1___default().oneOfType([prop_types__WEBPACK_IMPORTED_MODULE_1___default().string,prop_types__WEBPACK_IMPORTED_MODULE_1___default().node]),hrefBuilder:prop_types__WEBPACK_IMPORTED_MODULE_1___default().func,hrefAllControls:prop_types__WEBPACK_IMPORTED_MODULE_1___default().bool,onPageChange:prop_types__WEBPACK_IMPORTED_MODULE_1___default().func,onPageActive:prop_types__WEBPACK_IMPORTED_MODULE_1___default().func,onClick:prop_types__WEBPACK_IMPORTED_MODULE_1___default().func,initialPage:prop_types__WEBPACK_IMPORTED_MODULE_1___default().number,forcePage:prop_types__WEBPACK_IMPORTED_MODULE_1___default().number,disableInitialCallback:prop_types__WEBPACK_IMPORTED_MODULE_1___default().bool,containerClassName:prop_types__WEBPACK_IMPORTED_MODULE_1___default().string,className:prop_types__WEBPACK_IMPORTED_MODULE_1___default().string,pageClassName:prop_types__WEBPACK_IMPORTED_MODULE_1___default().string,pageLinkClassName:prop_types__WEBPACK_IMPORTED_MODULE_1___default().string,pageLabelBuilder:prop_types__WEBPACK_IMPORTED_MODULE_1___default().func,activeClassName:prop_types__WEBPACK_IMPORTED_MODULE_1___default().string,activeLinkClassName:prop_types__WEBPACK_IMPORTED_MODULE_1___default().string,previousClassName:prop_types__WEBPACK_IMPORTED_MODULE_1___default().string,nextClassName:prop_types__WEBPACK_IMPORTED_MODULE_1___default().string,previousLinkClassName:prop_types__WEBPACK_IMPORTED_MODULE_1___default().string,nextLinkClassName:prop_types__WEBPACK_IMPORTED_MODULE_1___default().string,disabledClassName:prop_types__WEBPACK_IMPORTED_MODULE_1___default().string,disabledLinkClassName:prop_types__WEBPACK_IMPORTED_MODULE_1___default().string,breakClassName:prop_types__WEBPACK_IMPORTED_MODULE_1___default().string,breakLinkClassName:prop_types__WEBPACK_IMPORTED_MODULE_1___default().string,extraAriaContext:prop_types__WEBPACK_IMPORTED_MODULE_1___default().string,ariaLabelBuilder:prop_types__WEBPACK_IMPORTED_MODULE_1___default().func,eventListener:prop_types__WEBPACK_IMPORTED_MODULE_1___default().string,renderOnZeroPageCount:prop_types__WEBPACK_IMPORTED_MODULE_1___default().func,selectedPageRel:prop_types__WEBPACK_IMPORTED_MODULE_1___default().string}),_defineProperty(PaginationBoxView,"defaultProps",{pageRangeDisplayed:2,marginPagesDisplayed:3,activeClassName:"selected",previousLabel:"Previous",previousClassName:"previous",previousAriaLabel:"Previous page",prevPageRel:"prev",prevRel:"prev",nextLabel:"Next",nextClassName:"next",nextAriaLabel:"Next page",nextPageRel:"next",nextRel:"next",breakLabel:"...",disabledClassName:"disabled",disableInitialCallback:!1,pageLabelBuilder:function(e){return e},eventListener:"onClick",renderOnZeroPageCount:void 0,selectedPageRel:"canonical",hrefAllControls:!1}),reactHotLoader="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0,reactHotLoader&&reactHotLoader.register(PaginationBoxView,"PaginationBoxView","/home/yoan/work/oss/react-paginate/react_components/PaginationBoxView.js"),leaveModule="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0,leaveModule&&leaveModule(module)},351:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return c}});var r,i=n(214);e=n.hmd(e),(r="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&r(e),"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;var a,s,o=i.Z,c=o;(a="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&a.register(o,"default","/home/yoan/work/oss/react-paginate/react_components/index.js"),(s="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&s(e)},923:function(e,t,n){"use strict";var r,i,a;function s(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return null!=e?e:t}n.d(t,{m:function(){return s}}),e=n.hmd(e),(r="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&r(e),"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature,(i="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&i.register(s,"classNameIfDefined","/home/yoan/work/oss/react-paginate/react_components/utils.js"),(a="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&a(e)},703:function(e,t,n){"use strict";var r=n(414);function i(){}function a(){}a.resetWarningCache=i,e.exports=function(){function e(e,t,n,i,a,s){if(s!==r){var o=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw o.name="Invariant Violation",o}}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:a,resetWarningCache:i};return n.PropTypes=n,n}},697:function(e,t,n){e.exports=n(703)()},414:function(e){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},98:function(e){"use strict";e.exports=__WEBPACK_EXTERNAL_MODULE__98__}},__webpack_module_cache__={};function __nested_webpack_require_32585__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var n=__webpack_module_cache__[e]={id:e,loaded:!1,exports:{}};return __webpack_modules__[e](n,n.exports,__nested_webpack_require_32585__),n.loaded=!0,n.exports}__nested_webpack_require_32585__.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return __nested_webpack_require_32585__.d(t,{a:t}),t},__nested_webpack_require_32585__.d=function(e,t){for(var n in t)__nested_webpack_require_32585__.o(t,n)&&!__nested_webpack_require_32585__.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},__nested_webpack_require_32585__.hmd=function(e){return(e=Object.create(e)).children||(e.children=[]),Object.defineProperty(e,"exports",{enumerable:!0,set:function(){throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+e.id)}}),e},__nested_webpack_require_32585__.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},__nested_webpack_require_32585__.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var __webpack_exports__=__nested_webpack_require_32585__(351);return __webpack_exports__}()}))},459:function(e,t){"use strict";var n,r=Symbol.for("react.element"),i=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),c=Symbol.for("react.provider"),u=Symbol.for("react.context"),l=Symbol.for("react.server_context"),d=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),f=Symbol.for("react.suspense_list"),p=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),m=Symbol.for("react.offscreen");function g(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case a:case o:case s:case h:case f:return e;default:switch(e=e&&e.$$typeof){case l:case u:case d:case v:case p:case c:return e;default:return t}}case i:return t}}}n=Symbol.for("react.module.reference")},900:function(e,t,n){"use strict";n(459)},374:function(e,t,n){"use strict";var r=n(791),i=Symbol.for("react.element"),a=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,c={key:!0,ref:!0,__self:!0,__source:!0};function u(e,t,n){var r,a={},u=null,l=null;for(r in void 0!==n&&(u=""+n),void 0!==t.key&&(u=""+t.key),void 0!==t.ref&&(l=t.ref),t)s.call(t,r)&&!c.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===a[r]&&(a[r]=t[r]);return{$$typeof:i,type:e,key:u,ref:l,props:a,_owner:o.current}}t.Fragment=a,t.jsx=u,t.jsxs=u},117:function(e,t){"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),c=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),f=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,m={};function g(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}function y(){}function b(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}g.prototype.isReactComponent={},g.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},g.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=g.prototype;var k=b.prototype=new y;k.constructor=b,v(k,g.prototype),k.isPureReactComponent=!0;var x=Array.isArray,w=Object.prototype.hasOwnProperty,T={current:null},E={key:!0,ref:!0,__self:!0,__source:!0};function _(e,t,r){var i,a={},s=null,o=null;if(null!=t)for(i in void 0!==t.ref&&(o=t.ref),void 0!==t.key&&(s=""+t.key),t)w.call(t,i)&&!E.hasOwnProperty(i)&&(a[i]=t[i]);var c=arguments.length-2;if(1===c)a.children=r;else if(1<c){for(var u=Array(c),l=0;l<c;l++)u[l]=arguments[l+2];a.children=u}if(e&&e.defaultProps)for(i in c=e.defaultProps)void 0===a[i]&&(a[i]=c[i]);return{$$typeof:n,type:e,key:s,ref:o,props:a,_owner:T.current}}function S(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var A=/\/+/g;function C(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function I(e,t,i,a,s){var o=typeof e;"undefined"!==o&&"boolean"!==o||(e=null);var c=!1;if(null===e)c=!0;else switch(o){case"string":case"number":c=!0;break;case"object":switch(e.$$typeof){case n:case r:c=!0}}if(c)return s=s(c=e),e=""===a?"."+C(c,0):a,x(s)?(i="",null!=e&&(i=e.replace(A,"$&/")+"/"),I(s,t,i,"",(function(e){return e}))):null!=s&&(S(s)&&(s=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(s,i+(!s.key||c&&c.key===s.key?"":(""+s.key).replace(A,"$&/")+"/")+e)),t.push(s)),1;if(c=0,a=""===a?".":a+":",x(e))for(var u=0;u<e.length;u++){var l=a+C(o=e[u],u);c+=I(o,t,i,l,s)}else if(l=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=f&&e[f]||e["@@iterator"])?e:null}(e),"function"===typeof l)for(e=l.call(e),u=0;!(o=e.next()).done;)c+=I(o=o.value,t,i,l=a+C(o,u++),s);else if("object"===o)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return c}function R(e,t,n){if(null==e)return e;var r=[],i=0;return I(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function P(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var D={current:null},N={transition:null},O={ReactCurrentDispatcher:D,ReactCurrentBatchConfig:N,ReactCurrentOwner:T};t.Children={map:R,forEach:function(e,t,n){R(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return R(e,(function(){t++})),t},toArray:function(e){return R(e,(function(e){return e}))||[]},only:function(e){if(!S(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=g,t.Fragment=i,t.Profiler=s,t.PureComponent=b,t.StrictMode=a,t.Suspense=l,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=O,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=v({},e.props),a=e.key,s=e.ref,o=e._owner;if(null!=t){if(void 0!==t.ref&&(s=t.ref,o=T.current),void 0!==t.key&&(a=""+t.key),e.type&&e.type.defaultProps)var c=e.type.defaultProps;for(u in t)w.call(t,u)&&!E.hasOwnProperty(u)&&(i[u]=void 0===t[u]&&void 0!==c?c[u]:t[u])}var u=arguments.length-2;if(1===u)i.children=r;else if(1<u){c=Array(u);for(var l=0;l<u;l++)c[l]=arguments[l+2];i.children=c}return{$$typeof:n,type:e.type,key:a,ref:s,props:i,_owner:o}},t.createContext=function(e){return(e={$$typeof:c,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:o,_context:e},e.Consumer=e},t.createElement=_,t.createFactory=function(e){var t=_.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:u,render:e}},t.isValidElement=S,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:P}},t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=N.transition;N.transition={};try{e()}finally{N.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return D.current.useCallback(e,t)},t.useContext=function(e){return D.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return D.current.useDeferredValue(e)},t.useEffect=function(e,t){return D.current.useEffect(e,t)},t.useId=function(){return D.current.useId()},t.useImperativeHandle=function(e,t,n){return D.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return D.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return D.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return D.current.useMemo(e,t)},t.useReducer=function(e,t,n){return D.current.useReducer(e,t,n)},t.useRef=function(e){return D.current.useRef(e)},t.useState=function(e){return D.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return D.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return D.current.useTransition()},t.version="18.2.0"},791:function(e,t,n){"use strict";e.exports=n(117)},184:function(e,t,n){"use strict";e.exports=n(374)},813:function(e,t){"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<a(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,s=i>>>1;r<s;){var o=2*(r+1)-1,c=e[o],u=o+1,l=e[u];if(0>a(c,n))u<i&&0>a(l,c)?(e[r]=l,e[u]=n,r=u):(e[r]=c,e[o]=n,r=o);else{if(!(u<i&&0>a(l,n)))break e;e[r]=l,e[u]=n,r=u}}}return t}function a(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,c=o.now();t.unstable_now=function(){return o.now()-c}}var u=[],l=[],d=1,h=null,f=3,p=!1,v=!1,m=!1,g="function"===typeof setTimeout?setTimeout:null,y="function"===typeof clearTimeout?clearTimeout:null,b="undefined"!==typeof setImmediate?setImmediate:null;function k(e){for(var t=r(l);null!==t;){if(null===t.callback)i(l);else{if(!(t.startTime<=e))break;i(l),t.sortIndex=t.expirationTime,n(u,t)}t=r(l)}}function x(e){if(m=!1,k(e),!v)if(null!==r(u))v=!0,N(w);else{var t=r(l);null!==t&&O(x,t.startTime-e)}}function w(e,n){v=!1,m&&(m=!1,y(S),S=-1),p=!0;var a=f;try{for(k(n),h=r(u);null!==h&&(!(h.expirationTime>n)||e&&!I());){var s=h.callback;if("function"===typeof s){h.callback=null,f=h.priorityLevel;var o=s(h.expirationTime<=n);n=t.unstable_now(),"function"===typeof o?h.callback=o:h===r(u)&&i(u),k(n)}else i(u);h=r(u)}if(null!==h)var c=!0;else{var d=r(l);null!==d&&O(x,d.startTime-n),c=!1}return c}finally{h=null,f=a,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var T,E=!1,_=null,S=-1,A=5,C=-1;function I(){return!(t.unstable_now()-C<A)}function R(){if(null!==_){var e=t.unstable_now();C=e;var n=!0;try{n=_(!0,e)}finally{n?T():(E=!1,_=null)}}else E=!1}if("function"===typeof b)T=function(){b(R)};else if("undefined"!==typeof MessageChannel){var P=new MessageChannel,D=P.port2;P.port1.onmessage=R,T=function(){D.postMessage(null)}}else T=function(){g(R,0)};function N(e){_=e,E||(E=!0,T())}function O(e,n){S=g((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){v||p||(v=!0,N(w))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return r(u)},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},t.unstable_scheduleCallback=function(e,i,a){var s=t.unstable_now();switch("object"===typeof a&&null!==a?a="number"===typeof(a=a.delay)&&0<a?s+a:s:a=s,e){case 1:var o=-1;break;case 2:o=250;break;case 5:o=1073741823;break;case 4:o=1e4;break;default:o=5e3}return e={id:d++,callback:i,priorityLevel:e,startTime:a,expirationTime:o=a+o,sortIndex:-1},a>s?(e.sortIndex=a,n(l,e),null===r(u)&&e===r(l)&&(m?(y(S),S=-1):m=!0,O(x,a-s))):(e.sortIndex=o,n(u,e),v||p||(v=!0,N(w))),e},t.unstable_shouldYield=I,t.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}},296:function(e,t,n){"use strict";e.exports=n(813)},712:function(e){var t=e.exports={v:[{name:"version",reg:/^(\d*)$/}],o:[{name:"origin",reg:/^(\S*) (\d*) (\d*) (\S*) IP(\d) (\S*)/,names:["username","sessionId","sessionVersion","netType","ipVer","address"],format:"%s %s %d %s IP%d %s"}],s:[{name:"name"}],i:[{name:"description"}],u:[{name:"uri"}],e:[{name:"email"}],p:[{name:"phone"}],z:[{name:"timezones"}],r:[{name:"repeats"}],t:[{name:"timing",reg:/^(\d*) (\d*)/,names:["start","stop"],format:"%d %d"}],c:[{name:"connection",reg:/^IN IP(\d) (\S*)/,names:["version","ip"],format:"IN IP%d %s"}],b:[{push:"bandwidth",reg:/^(TIAS|AS|CT|RR|RS):(\d*)/,names:["type","limit"],format:"%s:%s"}],m:[{reg:/^(\w*) (\d*) ([\w/]*)(?: (.*))?/,names:["type","port","protocol","payloads"],format:"%s %d %s %s"}],a:[{push:"rtp",reg:/^rtpmap:(\d*) ([\w\-.]*)(?:\s*\/(\d*)(?:\s*\/(\S*))?)?/,names:["payload","codec","rate","encoding"],format:function(e){return e.encoding?"rtpmap:%d %s/%s/%s":e.rate?"rtpmap:%d %s/%s":"rtpmap:%d %s"}},{push:"fmtp",reg:/^fmtp:(\d*) ([\S| ]*)/,names:["payload","config"],format:"fmtp:%d %s"},{name:"control",reg:/^control:(.*)/,format:"control:%s"},{name:"rtcp",reg:/^rtcp:(\d*)(?: (\S*) IP(\d) (\S*))?/,names:["port","netType","ipVer","address"],format:function(e){return null!=e.address?"rtcp:%d %s IP%d %s":"rtcp:%d"}},{push:"rtcpFbTrrInt",reg:/^rtcp-fb:(\*|\d*) trr-int (\d*)/,names:["payload","value"],format:"rtcp-fb:%s trr-int %d"},{push:"rtcpFb",reg:/^rtcp-fb:(\*|\d*) ([\w-_]*)(?: ([\w-_]*))?/,names:["payload","type","subtype"],format:function(e){return null!=e.subtype?"rtcp-fb:%s %s %s":"rtcp-fb:%s %s"}},{push:"ext",reg:/^extmap:(\d+)(?:\/(\w+))?(?: (urn:ietf:params:rtp-hdrext:encrypt))? (\S*)(?: (\S*))?/,names:["value","direction","encrypt-uri","uri","config"],format:function(e){return"extmap:%d"+(e.direction?"/%s":"%v")+(e["encrypt-uri"]?" %s":"%v")+" %s"+(e.config?" %s":"")}},{name:"extmapAllowMixed",reg:/^(extmap-allow-mixed)/},{push:"crypto",reg:/^crypto:(\d*) ([\w_]*) (\S*)(?: (\S*))?/,names:["id","suite","config","sessionConfig"],format:function(e){return null!=e.sessionConfig?"crypto:%d %s %s %s":"crypto:%d %s %s"}},{name:"setup",reg:/^setup:(\w*)/,format:"setup:%s"},{name:"connectionType",reg:/^connection:(new|existing)/,format:"connection:%s"},{name:"mid",reg:/^mid:([^\s]*)/,format:"mid:%s"},{name:"msid",reg:/^msid:(.*)/,format:"msid:%s"},{name:"ptime",reg:/^ptime:(\d*(?:\.\d*)*)/,format:"ptime:%d"},{name:"maxptime",reg:/^maxptime:(\d*(?:\.\d*)*)/,format:"maxptime:%d"},{name:"direction",reg:/^(sendrecv|recvonly|sendonly|inactive)/},{name:"icelite",reg:/^(ice-lite)/},{name:"iceUfrag",reg:/^ice-ufrag:(\S*)/,format:"ice-ufrag:%s"},{name:"icePwd",reg:/^ice-pwd:(\S*)/,format:"ice-pwd:%s"},{name:"fingerprint",reg:/^fingerprint:(\S*) (\S*)/,names:["type","hash"],format:"fingerprint:%s %s"},{push:"candidates",reg:/^candidate:(\S*) (\d*) (\S*) (\d*) (\S*) (\d*) typ (\S*)(?: raddr (\S*) rport (\d*))?(?: tcptype (\S*))?(?: generation (\d*))?(?: network-id (\d*))?(?: network-cost (\d*))?/,names:["foundation","component","transport","priority","ip","port","type","raddr","rport","tcptype","generation","network-id","network-cost"],format:function(e){var t="candidate:%s %d %s %d %s %d typ %s";return t+=null!=e.raddr?" raddr %s rport %d":"%v%v",t+=null!=e.tcptype?" tcptype %s":"%v",null!=e.generation&&(t+=" generation %d"),t+=null!=e["network-id"]?" network-id %d":"%v",t+=null!=e["network-cost"]?" network-cost %d":"%v"}},{name:"endOfCandidates",reg:/^(end-of-candidates)/},{name:"remoteCandidates",reg:/^remote-candidates:(.*)/,format:"remote-candidates:%s"},{name:"iceOptions",reg:/^ice-options:(\S*)/,format:"ice-options:%s"},{push:"ssrcs",reg:/^ssrc:(\d*) ([\w_-]*)(?::(.*))?/,names:["id","attribute","value"],format:function(e){var t="ssrc:%d";return null!=e.attribute&&(t+=" %s",null!=e.value&&(t+=":%s")),t}},{push:"ssrcGroups",reg:/^ssrc-group:([\x21\x23\x24\x25\x26\x27\x2A\x2B\x2D\x2E\w]*) (.*)/,names:["semantics","ssrcs"],format:"ssrc-group:%s %s"},{name:"msidSemantic",reg:/^msid-semantic:\s?(\w*) (\S*)/,names:["semantic","token"],format:"msid-semantic: %s %s"},{push:"groups",reg:/^group:(\w*) (.*)/,names:["type","mids"],format:"group:%s %s"},{name:"rtcpMux",reg:/^(rtcp-mux)/},{name:"rtcpRsize",reg:/^(rtcp-rsize)/},{name:"sctpmap",reg:/^sctpmap:([\w_/]*) (\S*)(?: (\S*))?/,names:["sctpmapNumber","app","maxMessageSize"],format:function(e){return null!=e.maxMessageSize?"sctpmap:%s %s %s":"sctpmap:%s %s"}},{name:"xGoogleFlag",reg:/^x-google-flag:([^\s]*)/,format:"x-google-flag:%s"},{push:"rids",reg:/^rid:([\d\w]+) (\w+)(?: ([\S| ]*))?/,names:["id","direction","params"],format:function(e){return e.params?"rid:%s %s %s":"rid:%s %s"}},{push:"imageattrs",reg:new RegExp("^imageattr:(\\d+|\\*)[\\s\\t]+(send|recv)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*)(?:[\\s\\t]+(recv|send)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*))?"),names:["pt","dir1","attrs1","dir2","attrs2"],format:function(e){return"imageattr:%s %s %s"+(e.dir2?" %s %s":"")}},{name:"simulcast",reg:new RegExp("^simulcast:(send|recv) ([a-zA-Z0-9\\-_~;,]+)(?:\\s?(send|recv) ([a-zA-Z0-9\\-_~;,]+))?$"),names:["dir1","list1","dir2","list2"],format:function(e){return"simulcast:%s %s"+(e.dir2?" %s %s":"")}},{name:"simulcast_03",reg:/^simulcast:[\s\t]+([\S+\s\t]+)$/,names:["value"],format:"simulcast: %s"},{name:"framerate",reg:/^framerate:(\d+(?:$|\.\d+))/,format:"framerate:%s"},{name:"sourceFilter",reg:/^source-filter: *(excl|incl) (\S*) (IP4|IP6|\*) (\S*) (.*)/,names:["filterMode","netType","addressTypes","destAddress","srcList"],format:"source-filter: %s %s %s %s %s"},{name:"bundleOnly",reg:/^(bundle-only)/},{name:"label",reg:/^label:(.+)/,format:"label:%s"},{name:"sctpPort",reg:/^sctp-port:(\d+)$/,format:"sctp-port:%s"},{name:"maxMessageSize",reg:/^max-message-size:(\d+)$/,format:"max-message-size:%s"},{push:"tsRefClocks",reg:/^ts-refclk:([^\s=]*)(?:=(\S*))?/,names:["clksrc","clksrcExt"],format:function(e){return"ts-refclk:%s"+(null!=e.clksrcExt?"=%s":"")}},{name:"mediaClk",reg:/^mediaclk:(?:id=(\S*))? *([^\s=]*)(?:=(\S*))?(?: *rate=(\d+)\/(\d+))?/,names:["id","mediaClockName","mediaClockValue","rateNumerator","rateDenominator"],format:function(e){var t="mediaclk:";return t+=null!=e.id?"id=%s %s":"%v%s",t+=null!=e.mediaClockValue?"=%s":"",t+=null!=e.rateNumerator?" rate=%s":"",t+=null!=e.rateDenominator?"/%s":""}},{name:"keywords",reg:/^keywds:(.+)$/,format:"keywds:%s"},{name:"content",reg:/^content:(.+)/,format:"content:%s"},{name:"bfcpFloorCtrl",reg:/^floorctrl:(c-only|s-only|c-s)/,format:"floorctrl:%s"},{name:"bfcpConfId",reg:/^confid:(\d+)/,format:"confid:%s"},{name:"bfcpUserId",reg:/^userid:(\d+)/,format:"userid:%s"},{name:"bfcpFloorId",reg:/^floorid:(.+) (?:m-stream|mstrm):(.+)/,names:["id","mStream"],format:"floorid:%s mstrm:%s"},{push:"invalid",names:["value"]}]};Object.keys(t).forEach((function(e){t[e].forEach((function(e){e.reg||(e.reg=/(.*)/),e.format||(e.format="%s")}))}))},861:function(e,t,n){var r=n(775),i=n(921);t.cW=i,t.Qc=r.parse,r.parseParams,r.parseFmtpConfig,r.parsePayloads,r.parseRemoteCandidates,r.parseImageAttributes,r.parseSimulcastStreamList},775:function(e,t,n){var r=function(e){return String(Number(e))===e?Number(e):e},i=function(e,t,n){var i=e.name&&e.names;e.push&&!t[e.push]?t[e.push]=[]:i&&!t[e.name]&&(t[e.name]={});var a=e.push?{}:i?t[e.name]:t;!function(e,t,n,i){if(i&&!n)t[i]=r(e[1]);else for(var a=0;a<n.length;a+=1)null!=e[a+1]&&(t[n[a]]=r(e[a+1]))}(n.match(e.reg),a,e.names,e.name),e.push&&t[e.push].push(a)},a=n(712),s=RegExp.prototype.test.bind(/^([a-z])=(.*)/);t.parse=function(e){var t={},n=[],r=t;return e.split(/(\r\n|\r|\n)/).filter(s).forEach((function(e){var t=e[0],s=e.slice(2);"m"===t&&(n.push({rtp:[],fmtp:[]}),r=n[n.length-1]);for(var o=0;o<(a[t]||[]).length;o+=1){var c=a[t][o];if(c.reg.test(s))return i(c,r,s)}})),t.media=n,t};var o=function(e,t){var n=t.split(/=(.+)/,2);return 2===n.length?e[n[0]]=r(n[1]):1===n.length&&t.length>1&&(e[n[0]]=void 0),e};t.parseParams=function(e){return e.split(/;\s?/).reduce(o,{})},t.parseFmtpConfig=t.parseParams,t.parsePayloads=function(e){return e.toString().split(" ").map(Number)},t.parseRemoteCandidates=function(e){for(var t=[],n=e.split(" ").map(r),i=0;i<n.length;i+=3)t.push({component:n[i],ip:n[i+1],port:n[i+2]});return t},t.parseImageAttributes=function(e){return e.split(" ").map((function(e){return e.substring(1,e.length-1).split(",").reduce(o,{})}))},t.parseSimulcastStreamList=function(e){return e.split(";").map((function(e){return e.split(",").map((function(e){var t,n=!1;return"~"!==e[0]?t=r(e):(t=r(e.substring(1,e.length)),n=!0),{scid:t,paused:n}}))}))}},921:function(e,t,n){var r=n(712),i=/%[sdv%]/g,a=function(e){var t=1,n=arguments,r=n.length;return e.replace(i,(function(e){if(t>=r)return e;var i=n[t];switch(t+=1,e){case"%%":return"%";case"%s":return String(i);case"%d":return Number(i);case"%v":return""}}))},s=function(e,t,n){var r=[e+"="+(t.format instanceof Function?t.format(t.push?n:n[t.name]):t.format)];if(t.names)for(var i=0;i<t.names.length;i+=1){var s=t.names[i];t.name?r.push(n[t.name][s]):r.push(n[t.names[i]])}else r.push(n[t.name]);return a.apply(null,r)},o=["v","o","s","i","u","e","p","c","b","t","r","z","a"],c=["i","c","b","a"];e.exports=function(e,t){t=t||{},null==e.version&&(e.version=0),null==e.name&&(e.name=" "),e.media.forEach((function(e){null==e.payloads&&(e.payloads="")}));var n=t.outerOrder||o,i=t.innerOrder||c,a=[];return n.forEach((function(t){r[t].forEach((function(n){n.name in e&&null!=e[n.name]?a.push(s(t,n,e)):n.push in e&&null!=e[n.push]&&e[n.push].forEach((function(e){a.push(s(t,n,e))}))}))})),e.media.forEach((function(e){a.push(s("m",r.m[0],e)),i.forEach((function(t){r[t].forEach((function(n){n.name in e&&null!=e[n.name]?a.push(s(t,n,e)):n.push in e&&null!=e[n.push]&&e[n.push].forEach((function(e){a.push(s(t,n,e))}))}))}))})),a.join("\r\n")+"\r\n"}},800:function(e){"use strict";var t={generateIdentifier:function(){return Math.random().toString(36).substr(2,10)}};t.localCName=t.generateIdentifier(),t.splitLines=function(e){return e.trim().split("\n").map((function(e){return e.trim()}))},t.splitSections=function(e){return e.split("\nm=").map((function(e,t){return(t>0?"m="+e:e).trim()+"\r\n"}))},t.getDescription=function(e){var n=t.splitSections(e);return n&&n[0]},t.getMediaSections=function(e){var n=t.splitSections(e);return n.shift(),n},t.matchPrefix=function(e,n){return t.splitLines(e).filter((function(e){return 0===e.indexOf(n)}))},t.parseCandidate=function(e){for(var t,n={foundation:(t=0===e.indexOf("a=candidate:")?e.substring(12).split(" "):e.substring(10).split(" "))[0],component:{1:"rtp",2:"rtcp"}[t[1]]||t[1],protocol:t[2].toLowerCase(),priority:parseInt(t[3],10),ip:t[4],address:t[4],port:parseInt(t[5],10),type:t[7]},r=8;r<t.length;r+=2)switch(t[r]){case"raddr":n.relatedAddress=t[r+1];break;case"rport":n.relatedPort=parseInt(t[r+1],10);break;case"tcptype":n.tcpType=t[r+1];break;case"ufrag":n.ufrag=t[r+1],n.usernameFragment=t[r+1];break;default:void 0===n[t[r]]&&(n[t[r]]=t[r+1])}return n},t.writeCandidate=function(e){var t=[];t.push(e.foundation);var n=e.component;"rtp"===n?t.push(1):"rtcp"===n?t.push(2):t.push(n),t.push(e.protocol.toUpperCase()),t.push(e.priority),t.push(e.address||e.ip),t.push(e.port);var r=e.type;return t.push("typ"),t.push(r),"host"!==r&&e.relatedAddress&&e.relatedPort&&(t.push("raddr"),t.push(e.relatedAddress),t.push("rport"),t.push(e.relatedPort)),e.tcpType&&"tcp"===e.protocol.toLowerCase()&&(t.push("tcptype"),t.push(e.tcpType)),(e.usernameFragment||e.ufrag)&&(t.push("ufrag"),t.push(e.usernameFragment||e.ufrag)),"candidate:"+t.join(" ")},t.parseIceOptions=function(e){return e.substr(14).split(" ")},t.parseRtpMap=function(e){var t=e.substr(9).split(" "),n={payloadType:parseInt(t.shift(),10)};return t=t[0].split("/"),n.name=t[0],n.clockRate=parseInt(t[1],10),n.channels=3===t.length?parseInt(t[2],10):1,n.numChannels=n.channels,n},t.writeRtpMap=function(e){var t=e.payloadType;void 0!==e.preferredPayloadType&&(t=e.preferredPayloadType);var n=e.channels||e.numChannels||1;return"a=rtpmap:"+t+" "+e.name+"/"+e.clockRate+(1!==n?"/"+n:"")+"\r\n"},t.parseExtmap=function(e){var t=e.substr(9).split(" ");return{id:parseInt(t[0],10),direction:t[0].indexOf("/")>0?t[0].split("/")[1]:"sendrecv",uri:t[1]}},t.writeExtmap=function(e){return"a=extmap:"+(e.id||e.preferredId)+(e.direction&&"sendrecv"!==e.direction?"/"+e.direction:"")+" "+e.uri+"\r\n"},t.parseFmtp=function(e){for(var t,n={},r=e.substr(e.indexOf(" ")+1).split(";"),i=0;i<r.length;i++)n[(t=r[i].trim().split("="))[0].trim()]=t[1];return n},t.writeFmtp=function(e){var t="",n=e.payloadType;if(void 0!==e.preferredPayloadType&&(n=e.preferredPayloadType),e.parameters&&Object.keys(e.parameters).length){var r=[];Object.keys(e.parameters).forEach((function(t){void 0!==e.parameters[t]?r.push(t+"="+e.parameters[t]):r.push(t)})),t+="a=fmtp:"+n+" "+r.join(";")+"\r\n"}return t},t.parseRtcpFb=function(e){var t=e.substr(e.indexOf(" ")+1).split(" ");return{type:t.shift(),parameter:t.join(" ")}},t.writeRtcpFb=function(e){var t="",n=e.payloadType;return void 0!==e.preferredPayloadType&&(n=e.preferredPayloadType),e.rtcpFeedback&&e.rtcpFeedback.length&&e.rtcpFeedback.forEach((function(e){t+="a=rtcp-fb:"+n+" "+e.type+(e.parameter&&e.parameter.length?" "+e.parameter:"")+"\r\n"})),t},t.parseSsrcMedia=function(e){var t=e.indexOf(" "),n={ssrc:parseInt(e.substr(7,t-7),10)},r=e.indexOf(":",t);return r>-1?(n.attribute=e.substr(t+1,r-t-1),n.value=e.substr(r+1)):n.attribute=e.substr(t+1),n},t.parseSsrcGroup=function(e){var t=e.substr(13).split(" ");return{semantics:t.shift(),ssrcs:t.map((function(e){return parseInt(e,10)}))}},t.getMid=function(e){var n=t.matchPrefix(e,"a=mid:")[0];if(n)return n.substr(6)},t.parseFingerprint=function(e){var t=e.substr(14).split(" ");return{algorithm:t[0].toLowerCase(),value:t[1].toUpperCase()}},t.getDtlsParameters=function(e,n){return{role:"auto",fingerprints:t.matchPrefix(e+n,"a=fingerprint:").map(t.parseFingerprint)}},t.writeDtlsParameters=function(e,t){var n="a=setup:"+t+"\r\n";return e.fingerprints.forEach((function(e){n+="a=fingerprint:"+e.algorithm+" "+e.value+"\r\n"})),n},t.parseCryptoLine=function(e){var t=e.substr(9).split(" ");return{tag:parseInt(t[0],10),cryptoSuite:t[1],keyParams:t[2],sessionParams:t.slice(3)}},t.writeCryptoLine=function(e){return"a=crypto:"+e.tag+" "+e.cryptoSuite+" "+("object"===typeof e.keyParams?t.writeCryptoKeyParams(e.keyParams):e.keyParams)+(e.sessionParams?" "+e.sessionParams.join(" "):"")+"\r\n"},t.parseCryptoKeyParams=function(e){if(0!==e.indexOf("inline:"))return null;var t=e.substr(7).split("|");return{keyMethod:"inline",keySalt:t[0],lifeTime:t[1],mkiValue:t[2]?t[2].split(":")[0]:void 0,mkiLength:t[2]?t[2].split(":")[1]:void 0}},t.writeCryptoKeyParams=function(e){return e.keyMethod+":"+e.keySalt+(e.lifeTime?"|"+e.lifeTime:"")+(e.mkiValue&&e.mkiLength?"|"+e.mkiValue+":"+e.mkiLength:"")},t.getCryptoParameters=function(e,n){return t.matchPrefix(e+n,"a=crypto:").map(t.parseCryptoLine)},t.getIceParameters=function(e,n){var r=t.matchPrefix(e+n,"a=ice-ufrag:")[0],i=t.matchPrefix(e+n,"a=ice-pwd:")[0];return r&&i?{usernameFragment:r.substr(12),password:i.substr(10)}:null},t.writeIceParameters=function(e){var t="a=ice-ufrag:"+e.usernameFragment+"\r\na=ice-pwd:"+e.password+"\r\n";return e.iceLite&&(t+="a=ice-lite\r\n"),t},t.parseRtpParameters=function(e){for(var n={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},r=t.splitLines(e)[0].split(" "),i=3;i<r.length;i++){var a=r[i],s=t.matchPrefix(e,"a=rtpmap:"+a+" ")[0];if(s){var o=t.parseRtpMap(s),c=t.matchPrefix(e,"a=fmtp:"+a+" ");switch(o.parameters=c.length?t.parseFmtp(c[0]):{},o.rtcpFeedback=t.matchPrefix(e,"a=rtcp-fb:"+a+" ").map(t.parseRtcpFb),n.codecs.push(o),o.name.toUpperCase()){case"RED":case"ULPFEC":n.fecMechanisms.push(o.name.toUpperCase())}}}return t.matchPrefix(e,"a=extmap:").forEach((function(e){n.headerExtensions.push(t.parseExtmap(e))})),n},t.writeRtpDescription=function(e,n){var r="";r+="m="+e+" ",r+=n.codecs.length>0?"9":"0",r+=" UDP/TLS/RTP/SAVPF ",r+=n.codecs.map((function(e){return void 0!==e.preferredPayloadType?e.preferredPayloadType:e.payloadType})).join(" ")+"\r\n",r+="c=IN IP4 0.0.0.0\r\n",r+="a=rtcp:9 IN IP4 0.0.0.0\r\n",n.codecs.forEach((function(e){r+=t.writeRtpMap(e),r+=t.writeFmtp(e),r+=t.writeRtcpFb(e)}));var i=0;return n.codecs.forEach((function(e){e.maxptime>i&&(i=e.maxptime)})),i>0&&(r+="a=maxptime:"+i+"\r\n"),n.headerExtensions&&n.headerExtensions.forEach((function(e){r+=t.writeExtmap(e)})),r},t.parseRtpEncodingParameters=function(e){var n,r=[],i=t.parseRtpParameters(e),a=-1!==i.fecMechanisms.indexOf("RED"),s=-1!==i.fecMechanisms.indexOf("ULPFEC"),o=t.matchPrefix(e,"a=ssrc:").map((function(e){return t.parseSsrcMedia(e)})).filter((function(e){return"cname"===e.attribute})),c=o.length>0&&o[0].ssrc,u=t.matchPrefix(e,"a=ssrc-group:FID").map((function(e){return e.substr(17).split(" ").map((function(e){return parseInt(e,10)}))}));u.length>0&&u[0].length>1&&u[0][0]===c&&(n=u[0][1]),i.codecs.forEach((function(e){if("RTX"===e.name.toUpperCase()&&e.parameters.apt){var t={ssrc:c,codecPayloadType:parseInt(e.parameters.apt,10)};c&&n&&(t.rtx={ssrc:n}),r.push(t),a&&((t=JSON.parse(JSON.stringify(t))).fec={ssrc:c,mechanism:s?"red+ulpfec":"red"},r.push(t))}})),0===r.length&&c&&r.push({ssrc:c});var l=t.matchPrefix(e,"b=");return l.length&&(l=0===l[0].indexOf("b=TIAS:")?parseInt(l[0].substr(7),10):0===l[0].indexOf("b=AS:")?1e3*parseInt(l[0].substr(5),10)*.95-16e3:void 0,r.forEach((function(e){e.maxBitrate=l}))),r},t.parseRtcpParameters=function(e){var n={},r=t.matchPrefix(e,"a=ssrc:").map((function(e){return t.parseSsrcMedia(e)})).filter((function(e){return"cname"===e.attribute}))[0];r&&(n.cname=r.value,n.ssrc=r.ssrc);var i=t.matchPrefix(e,"a=rtcp-rsize");n.reducedSize=i.length>0,n.compound=0===i.length;var a=t.matchPrefix(e,"a=rtcp-mux");return n.mux=a.length>0,n},t.writeRtcpParameters=function(e){var t="";return e.reducedSize&&(t+="a=rtcp-rsize\r\n"),e.mux&&(t+="a=rtcp-mux\r\n"),void 0!==e.ssrc&&e.cname&&(t+="a=ssrc:"+e.ssrc+" cname:"+e.cname+"\r\n"),t},t.parseMsid=function(e){var n,r=t.matchPrefix(e,"a=msid:");if(1===r.length)return{stream:(n=r[0].substr(7).split(" "))[0],track:n[1]};var i=t.matchPrefix(e,"a=ssrc:").map((function(e){return t.parseSsrcMedia(e)})).filter((function(e){return"msid"===e.attribute}));return i.length>0?{stream:(n=i[0].value.split(" "))[0],track:n[1]}:void 0},t.parseSctpDescription=function(e){var n,r=t.parseMLine(e),i=t.matchPrefix(e,"a=max-message-size:");i.length>0&&(n=parseInt(i[0].substr(19),10)),isNaN(n)&&(n=65536);var a=t.matchPrefix(e,"a=sctp-port:");if(a.length>0)return{port:parseInt(a[0].substr(12),10),protocol:r.fmt,maxMessageSize:n};var s=t.matchPrefix(e,"a=sctpmap:");if(s.length>0){var o=s[0].substr(10).split(" ");return{port:parseInt(o[0],10),protocol:o[1],maxMessageSize:n}}},t.writeSctpDescription=function(e,t){var n=[];return n="DTLS/SCTP"!==e.protocol?["m="+e.kind+" 9 "+e.protocol+" "+t.protocol+"\r\n","c=IN IP4 0.0.0.0\r\n","a=sctp-port:"+t.port+"\r\n"]:["m="+e.kind+" 9 "+e.protocol+" "+t.port+"\r\n","c=IN IP4 0.0.0.0\r\n","a=sctpmap:"+t.port+" "+t.protocol+" 65535\r\n"],void 0!==t.maxMessageSize&&n.push("a=max-message-size:"+t.maxMessageSize+"\r\n"),n.join("")},t.generateSessionId=function(){return Math.random().toString().substr(2,21)},t.writeSessionBoilerplate=function(e,n,r){var i=void 0!==n?n:2;return"v=0\r\no="+(r||"thisisadapterortc")+" "+(e||t.generateSessionId())+" "+i+" IN IP4 127.0.0.1\r\ns=-\r\nt=0 0\r\n"},t.getDirection=function(e,n){for(var r=t.splitLines(e),i=0;i<r.length;i++)switch(r[i]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return r[i].substr(2)}return n?t.getDirection(n):"sendrecv"},t.getKind=function(e){return t.splitLines(e)[0].split(" ")[0].substr(2)},t.isRejected=function(e){return"0"===e.split(" ",2)[1]},t.parseMLine=function(e){var n=t.splitLines(e)[0].substr(2).split(" ");return{kind:n[0],port:parseInt(n[1],10),protocol:n[2],fmt:n.slice(3).join(" ")}},t.parseOLine=function(e){var n=t.matchPrefix(e,"o=")[0].substr(2).split(" ");return{username:n[0],sessionId:n[1],sessionVersion:parseInt(n[2],10),netType:n[3],addressType:n[4],address:n[5]}},t.isValidSDP=function(e){if("string"!==typeof e||0===e.length)return!1;for(var n=t.splitLines(e),r=0;r<n.length;r++)if(n[r].length<2||"="!==n[r].charAt(1))return!1;return!0},e.exports=t},210:function(e,t,n){var r;!function(i,a){"use strict";var s="function",o="undefined",c="object",u="string",l="model",d="name",h="type",f="vendor",p="version",v="architecture",m="console",g="mobile",y="tablet",b="smarttv",k="wearable",x="embedded",w="Amazon",T="Apple",E="ASUS",_="BlackBerry",S="Firefox",A="Google",C="Huawei",I="LG",R="Microsoft",P="Motorola",D="Opera",N="Samsung",O="Sharp",L="Sony",M="Xiaomi",j="Zebra",F="Facebook",U=function(e){for(var t={},n=0;n<e.length;n++)t[e[n].toUpperCase()]=e[n];return t},B=function(e,t){return typeof e===u&&-1!==G(t).indexOf(G(e))},G=function(e){return e.toLowerCase()},V=function(e,t){if(typeof e===u)return e=e.replace(/^\s\s*/,"").replace(/\s\s*$/,""),typeof t===o?e:e.substring(0,350)},H=function(e,t){for(var n,r,i,o,u,l,d=0;d<t.length&&!u;){var h=t[d],f=t[d+1];for(n=r=0;n<h.length&&!u;)if(u=h[n++].exec(e))for(i=0;i<f.length;i++)l=u[++r],typeof(o=f[i])===c&&o.length>0?2===o.length?typeof o[1]==s?this[o[0]]=o[1].call(this,l):this[o[0]]=o[1]:3===o.length?typeof o[1]!==s||o[1].exec&&o[1].test?this[o[0]]=l?l.replace(o[1],o[2]):a:this[o[0]]=l?o[1].call(this,l,o[2]):a:4===o.length&&(this[o[0]]=l?o[3].call(this,l.replace(o[1],o[2])):a):this[o]=l||a;d+=2}},z=function(e,t){for(var n in t)if(typeof t[n]===c&&t[n].length>0){for(var r=0;r<t[n].length;r++)if(B(t[n][r],e))return"?"===n?a:n}else if(B(t[n],e))return"?"===n?a:n;return e},W={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},K={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[p,[d,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[p,[d,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[d,p],[/opios[\/ ]+([\w\.]+)/i],[p,[d,"Opera Mini"]],[/\bopr\/([\w\.]+)/i],[p,[d,D]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/ ]?([\w\.]*)/i,/(avant |iemobile|slim)(?:browser)?[\/ ]?([\w\.]*)/i,/(ba?idubrowser)[\/ ]?([\w\.]+)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale|qqbrowserlite|qq|duckduckgo)\/([-\w\.]+)/i,/(weibo)__([\d\.]+)/i],[d,p],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[p,[d,"UCBrowser"]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i],[p,[d,"WeChat(Win) Desktop"]],[/micromessenger\/([\w\.]+)/i],[p,[d,"WeChat"]],[/konqueror\/([\w\.]+)/i],[p,[d,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[p,[d,"IE"]],[/yabrowser\/([\w\.]+)/i],[p,[d,"Yandex"]],[/(avast|avg)\/([\w\.]+)/i],[[d,/(.+)/,"$1 Secure Browser"],p],[/\bfocus\/([\w\.]+)/i],[p,[d,"Firefox Focus"]],[/\bopt\/([\w\.]+)/i],[p,[d,"Opera Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[p,[d,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[p,[d,"Dolphin"]],[/coast\/([\w\.]+)/i],[p,[d,"Opera Coast"]],[/miuibrowser\/([\w\.]+)/i],[p,[d,"MIUI Browser"]],[/fxios\/([-\w\.]+)/i],[p,[d,S]],[/\bqihu|(qi?ho?o?|360)browser/i],[[d,"360 Browser"]],[/(oculus|samsung|sailfish|huawei)browser\/([\w\.]+)/i],[[d,/(.+)/,"$1 Browser"],p],[/(comodo_dragon)\/([\w\.]+)/i],[[d,/_/g," "],p],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|baiduboxapp|2345Explorer)[\/ ]?([\w\.]+)/i],[d,p],[/(metasr)[\/ ]?([\w\.]+)/i,/(lbbrowser)/i,/\[(linkedin)app\]/i],[d],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[d,F],p],[/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(chromium|instagram)[\/ ]([-\w\.]+)/i],[d,p],[/\bgsa\/([\w\.]+) .*safari\//i],[p,[d,"GSA"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[p,[d,"Chrome Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[d,"Chrome WebView"],p],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[p,[d,"Android Browser"]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[d,p],[/version\/([\w\.\,]+) .*mobile\/\w+ (safari)/i],[p,[d,"Mobile Safari"]],[/version\/([\w(\.|\,)]+) .*(mobile ?safari|safari)/i],[p,d],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[d,[p,z,{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}]],[/(webkit|khtml)\/([\w\.]+)/i],[d,p],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[d,"Netscape"],p],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[p,[d,"Firefox Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i],[d,p]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[v,"amd64"]],[/(ia32(?=;))/i],[[v,G]],[/((?:i[346]|x)86)[;\)]/i],[[v,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[v,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[v,"armhf"]],[/windows (ce|mobile); ppc;/i],[[v,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[v,/ower/,"",G]],[/(sun4\w)[;\)]/i],[[v,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[v,G]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[l,[f,N],[h,y]],[/\b((?:s[cgp]h|gt|sm)-\w+|galaxy nexus)/i,/samsung[- ]([-\w]+)/i,/sec-(sgh\w+)/i],[l,[f,N],[h,g]],[/\((ip(?:hone|od)[\w ]*);/i],[l,[f,T],[h,g]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[l,[f,T],[h,y]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[l,[f,C],[h,y]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[l,[f,C],[h,g]],[/\b(poco[\w ]+)(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\))/i],[[l,/_/g," "],[f,M],[h,g]],[/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[l,/_/g," "],[f,M],[h,y]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[l,[f,"OPPO"],[h,g]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[l,[f,"Vivo"],[h,g]],[/\b(rmx[12]\d{3})(?: bui|;|\))/i],[l,[f,"Realme"],[h,g]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[l,[f,P],[h,g]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[l,[f,P],[h,y]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[l,[f,I],[h,y]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[l,[f,I],[h,g]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[l,[f,"Lenovo"],[h,y]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[l,/_/g," "],[f,"Nokia"],[h,g]],[/(pixel c)\b/i],[l,[f,A],[h,y]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[l,[f,A],[h,g]],[/droid.+ (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[l,[f,L],[h,g]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[l,"Xperia Tablet"],[f,L],[h,y]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[l,[f,"OnePlus"],[h,g]],[/(alexa)webm/i,/(kf[a-z]{2}wi)( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[l,[f,w],[h,y]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[l,/(.+)/g,"Fire Phone $1"],[f,w],[h,g]],[/(playbook);[-\w\),; ]+(rim)/i],[l,f,[h,y]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[l,[f,_],[h,g]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[l,[f,E],[h,y]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[l,[f,E],[h,g]],[/(nexus 9)/i],[l,[f,"HTC"],[h,y]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic|sony(?!-bra))[-_ ]?([-\w]*)/i],[f,[l,/_/g," "],[h,g]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[l,[f,"Acer"],[h,y]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[l,[f,"Meizu"],[h,g]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[l,[f,O],[h,g]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[f,l,[h,g]],[/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[f,l,[h,y]],[/(surface duo)/i],[l,[f,R],[h,y]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[l,[f,"Fairphone"],[h,g]],[/(u304aa)/i],[l,[f,"AT&T"],[h,g]],[/\bsie-(\w*)/i],[l,[f,"Siemens"],[h,g]],[/\b(rct\w+) b/i],[l,[f,"RCA"],[h,y]],[/\b(venue[\d ]{2,7}) b/i],[l,[f,"Dell"],[h,y]],[/\b(q(?:mv|ta)\w+) b/i],[l,[f,"Verizon"],[h,y]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[l,[f,"Barnes & Noble"],[h,y]],[/\b(tm\d{3}\w+) b/i],[l,[f,"NuVision"],[h,y]],[/\b(k88) b/i],[l,[f,"ZTE"],[h,y]],[/\b(nx\d{3}j) b/i],[l,[f,"ZTE"],[h,g]],[/\b(gen\d{3}) b.+49h/i],[l,[f,"Swiss"],[h,g]],[/\b(zur\d{3}) b/i],[l,[f,"Swiss"],[h,y]],[/\b((zeki)?tb.*\b) b/i],[l,[f,"Zeki"],[h,y]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[f,"Dragon Touch"],l,[h,y]],[/\b(ns-?\w{0,9}) b/i],[l,[f,"Insignia"],[h,y]],[/\b((nxa|next)-?\w{0,9}) b/i],[l,[f,"NextBook"],[h,y]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[f,"Voice"],l,[h,g]],[/\b(lvtel\-)?(v1[12]) b/i],[[f,"LvTel"],l,[h,g]],[/\b(ph-1) /i],[l,[f,"Essential"],[h,g]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[l,[f,"Envizen"],[h,y]],[/\b(trio[-\w\. ]+) b/i],[l,[f,"MachSpeed"],[h,y]],[/\btu_(1491) b/i],[l,[f,"Rotor"],[h,y]],[/(shield[\w ]+) b/i],[l,[f,"Nvidia"],[h,y]],[/(sprint) (\w+)/i],[f,l,[h,g]],[/(kin\.[onetw]{3})/i],[[l,/\./g," "],[f,R],[h,g]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[l,[f,j],[h,y]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[l,[f,j],[h,g]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[f,l,[h,m]],[/droid.+; (shield) bui/i],[l,[f,"Nvidia"],[h,m]],[/(playstation [345portablevi]+)/i],[l,[f,L],[h,m]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[l,[f,R],[h,m]],[/smart-tv.+(samsung)/i],[f,[h,b]],[/hbbtv.+maple;(\d+)/i],[[l,/^/,"SmartTV"],[f,N],[h,b]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[f,I],[h,b]],[/(apple) ?tv/i],[f,[l,"Apple TV"],[h,b]],[/crkey/i],[[l,"Chromecast"],[f,A],[h,b]],[/droid.+aft(\w)( bui|\))/i],[l,[f,w],[h,b]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[l,[f,O],[h,b]],[/(bravia[\w ]+)( bui|\))/i],[l,[f,L],[h,b]],[/(mitv-\w{5}) bui/i],[l,[f,M],[h,b]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w ]*; *(\w[^;]*);([^;]*)/i],[[f,V],[l,V],[h,b]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[h,b]],[/((pebble))app/i],[f,l,[h,k]],[/droid.+; (glass) \d/i],[l,[f,A],[h,k]],[/droid.+; (wt63?0{2,3})\)/i],[l,[f,j],[h,k]],[/(quest( 2)?)/i],[l,[f,F],[h,k]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[f,[h,x]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+? mobile safari/i],[l,[h,g]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[l,[h,y]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[h,y]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[h,g]],[/(android[-\w\. ]{0,9});.+buil/i],[l,[f,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[p,[d,"EdgeHTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[p,[d,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i],[d,p],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[p,d]],os:[[/microsoft (windows) (vista|xp)/i],[d,p],[/(windows) nt 6\.2; (arm)/i,/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i,/(windows)[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i],[d,[p,z,W]],[/(win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[d,"Windows"],[p,z,W]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/cfnetwork\/.+darwin/i],[[p,/_/g,"."],[d,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[d,"Mac OS"],[p,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[p,d],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[d,p],[/\(bb(10);/i],[p,[d,_]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[p,[d,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[p,[d,"Firefox OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[p,[d,"webOS"]],[/crkey\/([\d\.]+)/i],[p,[d,"Chromecast"]],[/(cros) [\w]+ ([\w\.]+\w)/i],[[d,"Chromium OS"],p],[/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[d,p],[/(sunos) ?([\w\.\d]*)/i],[[d,"Solaris"],p],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux)/i,/(unix) ?([\w\.]*)/i],[d,p]]},q=function e(t,n){if(typeof t===c&&(n=t,t=a),!(this instanceof e))return new e(t,n).getResult();var r=t||(typeof i!==o&&i.navigator&&i.navigator.userAgent?i.navigator.userAgent:""),s=n?function(e,t){var n={};for(var r in e)t[r]&&t[r].length%2===0?n[r]=t[r].concat(e[r]):n[r]=e[r];return n}(K,n):K;return this.getBrowser=function(){var e,t={};return t.name=a,t.version=a,H.call(t,r,s.browser),t.major=typeof(e=t.version)===u?e.replace(/[^\d\.]/g,"").split(".")[0]:a,t},this.getCPU=function(){var e={};return e.architecture=a,H.call(e,r,s.cpu),e},this.getDevice=function(){var e={};return e.vendor=a,e.model=a,e.type=a,H.call(e,r,s.device),e},this.getEngine=function(){var e={};return e.name=a,e.version=a,H.call(e,r,s.engine),e},this.getOS=function(){var e={};return e.name=a,e.version=a,H.call(e,r,s.os),e},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return r},this.setUA=function(e){return r=typeof e===u&&e.length>350?V(e,350):e,this},this.setUA(r),this};q.VERSION="1.0.32",q.BROWSER=U([d,p,"major"]),q.CPU=U([v]),q.DEVICE=U([l,f,h,m,g,b,y,k,x]),q.ENGINE=q.OS=U([d,p]),typeof t!==o?(e.exports&&(t=e.exports=q),t.UAParser=q):n.amdO?(r=function(){return q}.call(t,n,t,e))===a||(e.exports=r):typeof i!==o&&(i.UAParser=q);var Y=typeof i!==o&&(i.jQuery||i.Zepto);if(Y&&!Y.ua){var J=new q;Y.ua=J.getResult(),Y.ua.get=function(){return J.getUA()},Y.ua.set=function(e){J.setUA(e);var t=J.getResult();for(var n in t)Y.ua[n]=t[n]}}}("object"===typeof window?window:this)},561:function(e,t,n){"use strict";var r=n(791);var i="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},a=r.useState,s=r.useEffect,o=r.useLayoutEffect,c=r.useDebugValue;function u(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!i(e,n)}catch(r){return!0}}var l="undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement?function(e,t){return t()}:function(e,t){var n=t(),r=a({inst:{value:n,getSnapshot:t}}),i=r[0].inst,l=r[1];return o((function(){i.value=n,i.getSnapshot=t,u(i)&&l({inst:i})}),[e,n,t]),s((function(){return u(i)&&l({inst:i}),e((function(){u(i)&&l({inst:i})}))}),[e]),c(n),n};t.useSyncExternalStore=void 0!==r.useSyncExternalStore?r.useSyncExternalStore:l},595:function(e,t,n){"use strict";var r=n(791),i=n(248);var a="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},s=i.useSyncExternalStore,o=r.useRef,c=r.useEffect,u=r.useMemo,l=r.useDebugValue;t.useSyncExternalStoreWithSelector=function(e,t,n,r,i){var d=o(null);if(null===d.current){var h={hasValue:!1,value:null};d.current=h}else h=d.current;d=u((function(){function e(e){if(!c){if(c=!0,s=e,e=r(e),void 0!==i&&h.hasValue){var t=h.value;if(i(t,e))return o=t}return o=e}if(t=o,a(s,e))return t;var n=r(e);return void 0!==i&&i(t,n)?t:(s=e,o=n)}var s,o,c=!1,u=void 0===n?null:n;return[function(){return e(t())},null===u?void 0:function(){return e(u())}]}),[t,n,r,i]);var f=s(e,d[0],d[1]);return c((function(){h.hasValue=!0,h.value=f}),[f]),l(f),f}},248:function(e,t,n){"use strict";e.exports=n(561)},327:function(e,t,n){"use strict";e.exports=n(595)}},__webpack_module_cache__={};function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var n=__webpack_module_cache__[e]={id:e,loaded:!1,exports:{}};return __webpack_modules__[e].call(n.exports,n,n.exports,__webpack_require__),n.loaded=!0,n.exports}__webpack_require__.m=__webpack_modules__,__webpack_require__.amdO={},__webpack_require__.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return __webpack_require__.d(t,{a:t}),t},__webpack_require__.d=function(e,t){for(var n in t)__webpack_require__.o(t,n)&&!__webpack_require__.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},__webpack_require__.f={},__webpack_require__.e=function(e){return Promise.all(Object.keys(__webpack_require__.f).reduce((function(t,n){return __webpack_require__.f[n](e,t),t}),[]))},__webpack_require__.u=function(e){return"static/js/"+e+".6f52e74a.chunk.js"},__webpack_require__.miniCssF=function(e){},__webpack_require__.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),__webpack_require__.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){var e={},t="madrasha-e-rumi:";__webpack_require__.l=function(n,r,i,a){if(e[n])e[n].push(r);else{var s,o;if(void 0!==i)for(var c=document.getElementsByTagName("script"),u=0;u<c.length;u++){var l=c[u];if(l.getAttribute("src")==n||l.getAttribute("data-webpack")==t+i){s=l;break}}s||(o=!0,(s=document.createElement("script")).charset="utf-8",s.timeout=120,__webpack_require__.nc&&s.setAttribute("nonce",__webpack_require__.nc),s.setAttribute("data-webpack",t+i),s.src=n),e[n]=[r];var d=function(t,r){s.onerror=s.onload=null,clearTimeout(h);var i=e[n];if(delete e[n],s.parentNode&&s.parentNode.removeChild(s),i&&i.forEach((function(e){return e(r)})),t)return t(r)},h=setTimeout(d.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=d.bind(null,s.onerror),s.onload=d.bind(null,s.onload),o&&document.head.appendChild(s)}}}(),__webpack_require__.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},__webpack_require__.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e},__webpack_require__.p="/",function(){var e={179:0};__webpack_require__.f.j=function(t,n){var r=__webpack_require__.o(e,t)?e[t]:void 0;if(0!==r)if(r)n.push(r[2]);else{var i=new Promise((function(n,i){r=e[t]=[n,i]}));n.push(r[2]=i);var a=__webpack_require__.p+__webpack_require__.u(t),s=new Error;__webpack_require__.l(a,(function(n){if(__webpack_require__.o(e,t)&&(0!==(r=e[t])&&(e[t]=void 0),r)){var i=n&&("load"===n.type?"missing":n.type),a=n&&n.target&&n.target.src;s.message="Loading chunk "+t+" failed.\n("+i+": "+a+")",s.name="ChunkLoadError",s.type=i,s.request=a,r[1](s)}}),"chunk-"+t,t)}};var t=function(t,n){var r,i,a=n[0],s=n[1],o=n[2],c=0;if(a.some((function(t){return 0!==e[t]}))){for(r in s)__webpack_require__.o(s,r)&&(__webpack_require__.m[r]=s[r]);if(o)o(__webpack_require__)}for(t&&t(n);c<a.length;c++)i=a[c],__webpack_require__.o(e,i)&&e[i]&&e[i][0](),e[i]=0},n=self.webpackChunkmadrasha_e_rumi=self.webpackChunkmadrasha_e_rumi||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}();var __webpack_exports__={};!function(){"use strict";var e={};__webpack_require__.r(e),__webpack_require__.d(e,{fixNegotiationNeeded:function(){return gh},shimAddTrackRemoveTrack:function(){return vh},shimAddTrackRemoveTrackWithNative:function(){return ph},shimGetDisplayMedia:function(){return ch},shimGetSendersWithDtmf:function(){return dh},shimGetStats:function(){return hh},shimGetUserMedia:function(){return oh},shimMediaStream:function(){return uh},shimOnTrack:function(){return lh},shimPeerConnection:function(){return mh},shimSenderReceiverGetStats:function(){return fh}});var t={};__webpack_require__.r(t),__webpack_require__.d(t,{shimAddTransceiver:function(){return Sh},shimCreateAnswer:function(){return Ih},shimCreateOffer:function(){return Ch},shimGetDisplayMedia:function(){return bh},shimGetParameters:function(){return Ah},shimGetUserMedia:function(){return yh},shimOnTrack:function(){return kh},shimPeerConnection:function(){return xh},shimRTCDataChannel:function(){return _h},shimReceiverGetStats:function(){return Th},shimRemoveStream:function(){return Eh},shimSenderGetStats:function(){return wh}});var n={};__webpack_require__.r(n),__webpack_require__.d(n,{shimAudioContext:function(){return Fh},shimCallbacksAPI:function(){return Dh},shimConstraints:function(){return Oh},shimCreateOfferLegacy:function(){return jh},shimGetUserMedia:function(){return Nh},shimLocalStreamsAPI:function(){return Rh},shimRTCIceServerUrls:function(){return Lh},shimRemoteStreamsAPI:function(){return Ph},shimTrackEventTransceiver:function(){return Mh}});var r={};__webpack_require__.r(r),__webpack_require__.d(r,{removeExtmapAllowMixed:function(){return Kh},shimAddIceCandidateNullOrEmpty:function(){return qh},shimConnectionState:function(){return Wh},shimMaxMessageSize:function(){return Hh},shimParameterlessSetLocalDescription:function(){return Yh},shimRTCIceCandidate:function(){return Gh},shimRTCIceCandidateRelayProtocol:function(){return Vh},shimSendThrowTypeError:function(){return zh}});var i,a=__webpack_require__(791),s=__webpack_require__(250);function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function c(e,t){if(e){if("string"===typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(e,t):void 0}}function u(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a,s,o=[],c=!0,u=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(o.push(r.value),o.length!==t);c=!0);}catch(l){u=!0,i=l}finally{try{if(!c&&null!=n.return&&(s=n.return(),Object(s)!==s))return}finally{if(u)throw i}}return o}}(e,t)||c(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(){return l=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(i||(i={}));var d=function(e){return e};var h="beforeunload",f="popstate";function p(e){e.preventDefault(),e.returnValue=""}function v(){var e=[];return{get length(){return e.length},push:function(t){return e.push(t),function(){e=e.filter((function(e){return e!==t}))}},call:function(t){e.forEach((function(e){return e&&e(t)}))}}}function m(){return Math.random().toString(36).substr(2,8)}function g(e){var t=e.pathname,n=void 0===t?"/":t,r=e.search,i=void 0===r?"":r,a=e.hash,s=void 0===a?"":a;return i&&"?"!==i&&(n+="?"===i.charAt(0)?i:"?"+i),s&&"#"!==s&&(n+="#"===s.charAt(0)?s:"#"+s),n}function y(e){var t={};if(e){var n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));var r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}var b=(0,a.createContext)(null);var k=(0,a.createContext)(null);var x=(0,a.createContext)({outlet:null,matches:[]});function w(e,t){if(!e)throw new Error(t)}function T(e,t,n){void 0===n&&(n="/");var r=P(("string"===typeof t?y(t):t).pathname||"/",n);if(null==r)return null;var i=E(e);!function(e){e.sort((function(e,t){return e.score!==t.score?t.score-e.score:function(e,t){var n=e.length===t.length&&e.slice(0,-1).every((function(e,n){return e===t[n]}));return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((function(e){return e.childrenIndex})),t.routesMeta.map((function(e){return e.childrenIndex})))}))}(i);for(var a=null,s=0;null==a&&s<i.length;++s)a=C(i[s],r);return a}function E(e,t,n,r){return void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r=""),e.forEach((function(e,i){var a={relativePath:e.path||"",caseSensitive:!0===e.caseSensitive,childrenIndex:i,route:e};a.relativePath.startsWith("/")&&(a.relativePath.startsWith(r)||w(!1),a.relativePath=a.relativePath.slice(r.length));var s=D([r,a.relativePath]),o=n.concat(a);e.children&&e.children.length>0&&(!0===e.index&&w(!1),E(e.children,t,o,s)),(null!=e.path||e.index)&&t.push({path:s,score:A(s,e.index),routesMeta:o})})),t}var _=/^:\w+$/,S=function(e){return"*"===e};function A(e,t){var n=e.split("/"),r=n.length;return n.some(S)&&(r+=-2),t&&(r+=2),n.filter((function(e){return!S(e)})).reduce((function(e,t){return e+(_.test(t)?3:""===t?1:10)}),r)}function C(e,t){for(var n=e.routesMeta,r={},i="/",a=[],s=0;s<n.length;++s){var o=n[s],c=s===n.length-1,u="/"===i?t:t.slice(i.length)||"/",l=I({path:o.relativePath,caseSensitive:o.caseSensitive,end:c},u);if(!l)return null;Object.assign(r,l.params);var d=o.route;a.push({params:r,pathname:D([i,l.pathname]),pathnameBase:N(D([i,l.pathnameBase])),route:d}),"/"!==l.pathnameBase&&(i=D([i,l.pathnameBase]))}return a}function I(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});var n=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);var r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/:(\w+)/g,(function(e,t){return r.push(t),"([^\\/]+)"}));e.endsWith("*")?(r.push("*"),i+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):i+=n?"\\/*$":"(?:(?=[.~-]|%[0-9A-F]{2})|\\b|\\/|$)";return[new RegExp(i,t?void 0:"i"),r]}(e.path,e.caseSensitive,e.end),r=u(n,2),i=r[0],a=r[1],s=t.match(i);if(!s)return null;var o=s[0],c=o.replace(/(.)\/+$/,"$1"),l=s.slice(1);return{params:a.reduce((function(e,t,n){if("*"===t){var r=l[n]||"";c=o.slice(0,o.length-r.length).replace(/(.)\/+$/,"$1")}return e[t]=function(e,t){try{return decodeURIComponent(e)}catch(n){return e}}(l[n]||""),e}),{}),pathname:o,pathnameBase:c,pattern:e}}function R(e,t,n){var r,i="string"===typeof e?y(e):e,a=""===e||""===i.pathname?"/":i.pathname;if(null==a)r=n;else{var s=t.length-1;if(a.startsWith("..")){for(var o=a.split("/");".."===o[0];)o.shift(),s-=1;i.pathname=o.join("/")}r=s>=0?t[s]:"/"}var c=function(e,t){void 0===t&&(t="/");var n="string"===typeof e?y(e):e,r=n.pathname,i=n.search,a=void 0===i?"":i,s=n.hash,o=void 0===s?"":s,c=r?r.startsWith("/")?r:function(e,t){var n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((function(e){".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)})),n.length>1?n.join("/"):"/"}(r,t):t;return{pathname:c,search:O(a),hash:L(o)}}(i,r);return a&&"/"!==a&&a.endsWith("/")&&!c.pathname.endsWith("/")&&(c.pathname+="/"),c}function P(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;var n=e.charAt(t.length);return n&&"/"!==n?null:e.slice(t.length)||"/"}var D=function(e){return e.join("/").replace(/\/\/+/g,"/")},N=function(e){return e.replace(/\/+$/,"").replace(/^\/*/,"/")},O=function(e){return e&&"?"!==e?e.startsWith("?")?e:"?"+e:""},L=function(e){return e&&"#"!==e?e.startsWith("#")?e:"#"+e:""};function M(e){j()||w(!1);var t=(0,a.useContext)(b),n=t.basename,r=t.navigator,i=G(e),s=i.hash,o=i.pathname,c=i.search,u=o;if("/"!==n){var l=function(e){return""===e||""===e.pathname?"/":"string"===typeof e?y(e).pathname:e.pathname}(e),d=null!=l&&l.endsWith("/");u="/"===o?n+(d?"/":""):D([n,o])}return r.createHref({pathname:u,search:c,hash:s})}function j(){return null!=(0,a.useContext)(k)}function F(){return j()||w(!1),(0,a.useContext)(k).location}function U(){j()||w(!1);var e=(0,a.useContext)(b),t=e.basename,n=e.navigator,r=(0,a.useContext)(x).matches,i=F().pathname,s=JSON.stringify(r.map((function(e){return e.pathnameBase}))),o=(0,a.useRef)(!1);(0,a.useEffect)((function(){o.current=!0}));var c=(0,a.useCallback)((function(e,r){if(void 0===r&&(r={}),o.current)if("number"!==typeof e){var a=R(e,JSON.parse(s),i);"/"!==t&&(a.pathname=D([t,a.pathname])),(r.replace?n.replace:n.push)(a,r.state)}else n.go(e)}),[t,n,s,i]);return c}var B=(0,a.createContext)(null);function G(e){var t=(0,a.useContext)(x).matches,n=F().pathname,r=JSON.stringify(t.map((function(e){return e.pathnameBase})));return(0,a.useMemo)((function(){return R(e,JSON.parse(r),n)}),[e,r,n])}function V(e,t){return void 0===t&&(t=[]),null==e?null:e.reduceRight((function(n,r,i){return(0,a.createElement)(x.Provider,{children:void 0!==r.route.element?r.route.element:n,value:{outlet:n,matches:t.concat(e.slice(0,i+1))}})}),null)}function H(e){var t=e.to,n=e.replace,r=e.state;j()||w(!1);var i=U();return(0,a.useEffect)((function(){i(t,{replace:n,state:r})})),null}function z(e){return function(e){var t=(0,a.useContext)(x).outlet;return t?(0,a.createElement)(B.Provider,{value:e},t):t}(e.context)}function W(e){w(!1)}function K(e){var t=e.basename,n=void 0===t?"/":t,r=e.children,s=void 0===r?null:r,o=e.location,c=e.navigationType,u=void 0===c?i.Pop:c,l=e.navigator,d=e.static,h=void 0!==d&&d;j()&&w(!1);var f=N(n),p=(0,a.useMemo)((function(){return{basename:f,navigator:l,static:h}}),[f,l,h]);"string"===typeof o&&(o=y(o));var v=o,m=v.pathname,g=void 0===m?"/":m,x=v.search,T=void 0===x?"":x,E=v.hash,_=void 0===E?"":E,S=v.state,A=void 0===S?null:S,C=v.key,I=void 0===C?"default":C,R=(0,a.useMemo)((function(){var e=P(g,f);return null==e?null:{pathname:e,search:T,hash:_,state:A,key:I}}),[f,g,T,_,A,I]);return null==R?null:(0,a.createElement)(b.Provider,{value:p},(0,a.createElement)(k.Provider,{children:s,value:{location:R,navigationType:u}}))}function q(e){var t=e.children,n=e.location;return function(e,t){j()||w(!1);var n,r=(0,a.useContext)(x).matches,i=r[r.length-1],s=i?i.params:{},o=(i&&i.pathname,i?i.pathnameBase:"/"),c=(i&&i.route,F());if(t){var u,l="string"===typeof t?y(t):t;"/"===o||(null==(u=l.pathname)?void 0:u.startsWith(o))||w(!1),n=l}else n=c;var d=n.pathname||"/",h=T(e,{pathname:"/"===o?d:d.slice(o.length)||"/"});return V(h&&h.map((function(e){return Object.assign({},e,{params:Object.assign({},s,e.params),pathname:D([o,e.pathname]),pathnameBase:"/"===e.pathnameBase?o:D([o,e.pathnameBase])})})),r)}(Y(t),n)}function Y(e){var t=[];return a.Children.forEach(e,(function(e){if((0,a.isValidElement)(e))if(e.type!==a.Fragment){e.type!==W&&w(!1);var n={caseSensitive:e.props.caseSensitive,element:e.props.element,index:e.props.index,path:e.props.path};e.props.children&&(n.children=Y(e.props.children)),t.push(n)}else t.push.apply(t,Y(e.props.children))})),t}function J(e){return J="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},J(e)}function Q(e){var t=function(e,t){if("object"!==J(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==J(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===J(t)?t:String(t)}function X(e,t,n){return(t=Q(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Z(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function $(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Z(Object(n),!0).forEach((function(t){X(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Z(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ee(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function te(e){return function(e){if(Array.isArray(e))return o(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||c(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ne(e){var t,n,r="";if("string"==typeof e||"number"==typeof e)r+=e;else if("object"==typeof e)if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(n=ne(e[t]))&&(r&&(r+=" "),r+=n);else for(t in e)e[t]&&(r&&(r+=" "),r+=t);return r}var re=function(){for(var e,t,n=0,r="";n<arguments.length;)(e=arguments[n++])&&(t=ne(e))&&(r&&(r+=" "),r+=t);return r},ie=["theme","type"],ae=["delay","staleId"],se=function(e){return"number"==typeof e&&!isNaN(e)},oe=function(e){return"string"==typeof e},ce=function(e){return"function"==typeof e},ue=function(e){return oe(e)||ce(e)?e:null},le=function(e){return(0,a.isValidElement)(e)||oe(e)||ce(e)||se(e)};function de(e){var t=e.enter,n=e.exit,r=e.appendPosition,i=void 0!==r&&r,s=e.collapse,o=void 0===s||s,c=e.collapseDuration,u=void 0===c?300:c;return function(e){var r=e.children,s=e.position,c=e.preventExitTransition,l=e.done,d=e.nodeRef,h=e.isIn,f=i?"".concat(t,"--").concat(s):t,p=i?"".concat(n,"--").concat(s):n,v=(0,a.useRef)(0);return(0,a.useLayoutEffect)((function(){var e,t=d.current,n=f.split(" "),r=function e(r){var i;r.target===d.current&&(t.dispatchEvent(new Event("d")),t.removeEventListener("animationend",e),t.removeEventListener("animationcancel",e),0===v.current&&"animationcancel"!==r.type&&(i=t.classList).remove.apply(i,te(n)))};(e=t.classList).add.apply(e,te(n)),t.addEventListener("animationend",r),t.addEventListener("animationcancel",r)}),[]),(0,a.useEffect)((function(){var e=d.current,t=function t(){e.removeEventListener("animationend",t),o?function(e,t,n){void 0===n&&(n=300);var r=e.scrollHeight,i=e.style;requestAnimationFrame((function(){i.minHeight="initial",i.height=r+"px",i.transition="all ".concat(n,"ms"),requestAnimationFrame((function(){i.height="0",i.padding="0",i.margin="0",setTimeout(t,n)}))}))}(e,l,u):l()};h||(c?t():(v.current=1,e.className+=" ".concat(p),e.addEventListener("animationend",t)))}),[h]),a.createElement(a.Fragment,null,r)}}function he(e,t){return{content:e.content,containerId:e.props.containerId,id:e.props.toastId,theme:e.props.theme,type:e.props.type,data:e.props.data||{},isLoading:e.props.isLoading,icon:e.props.icon,status:t}}var fe={list:new Map,emitQueue:new Map,on:function(e,t){return this.list.has(e)||this.list.set(e,[]),this.list.get(e).push(t),this},off:function(e,t){if(t){var n=this.list.get(e).filter((function(e){return e!==t}));return this.list.set(e,n),this}return this.list.delete(e),this},cancelEmit:function(e){var t=this.emitQueue.get(e);return t&&(t.forEach(clearTimeout),this.emitQueue.delete(e)),this},emit:function(e){var t=arguments,n=this;this.list.has(e)&&this.list.get(e).forEach((function(r){var i=setTimeout((function(){r.apply(void 0,te([].slice.call(t,1)))}),0);n.emitQueue.has(e)||n.emitQueue.set(e,[]),n.emitQueue.get(e).push(i)}))}},pe=function(e){var t=e.theme,n=e.type,r=ee(e,ie);return a.createElement("svg",$({viewBox:"0 0 24 24",width:"100%",height:"100%",fill:"colored"===t?"currentColor":"var(--toastify-icon-color-".concat(n,")")},r))},ve={info:function(e){return a.createElement(pe,$({},e),a.createElement("path",{d:"M12 0a12 12 0 1012 12A12.013 12.013 0 0012 0zm.25 5a1.5 1.5 0 11-1.5 1.5 1.5 1.5 0 011.5-1.5zm2.25 13.5h-4a1 1 0 010-2h.75a.25.25 0 00.25-.25v-4.5a.25.25 0 00-.25-.25h-.75a1 1 0 010-2h1a2 2 0 012 2v4.75a.25.25 0 00.25.25h.75a1 1 0 110 2z"}))},warning:function(e){return a.createElement(pe,$({},e),a.createElement("path",{d:"M23.32 17.191L15.438 2.184C14.728.833 13.416 0 11.996 0c-1.42 0-2.733.833-3.443 2.184L.533 17.448a4.744 4.744 0 000 4.368C1.243 23.167 2.555 24 3.975 24h16.05C22.22 24 24 22.044 24 19.632c0-.904-.251-1.746-.68-2.44zm-9.622 1.46c0 1.033-.724 1.823-1.698 1.823s-1.698-.79-1.698-1.822v-.043c0-1.028.724-1.822 1.698-1.822s1.698.79 1.698 1.822v.043zm.039-12.285l-.84 8.06c-.057.581-.408.943-.897.943-.49 0-.84-.367-.896-.942l-.84-8.065c-.057-.624.25-1.095.779-1.095h1.91c.528.005.84.476.784 1.1z"}))},success:function(e){return a.createElement(pe,$({},e),a.createElement("path",{d:"M12 0a12 12 0 1012 12A12.014 12.014 0 0012 0zm6.927 8.2l-6.845 9.289a1.011 1.011 0 01-1.43.188l-4.888-3.908a1 1 0 111.25-1.562l4.076 3.261 6.227-8.451a1 1 0 111.61 1.183z"}))},error:function(e){return a.createElement(pe,$({},e),a.createElement("path",{d:"M11.983 0a12.206 12.206 0 00-8.51 3.653A11.8 11.8 0 000 12.207 11.779 11.779 0 0011.8 24h.214A12.111 12.111 0 0024 11.791 11.766 11.766 0 0011.983 0zM10.5 16.542a1.476 1.476 0 011.449-1.53h.027a1.527 1.527 0 011.523 1.47 1.475 1.475 0 01-1.449 1.53h-.027a1.529 1.529 0 01-1.523-1.47zM11 12.5v-6a1 1 0 012 0v6a1 1 0 11-2 0z"}))},spinner:function(){return a.createElement("div",{className:"Toastify__spinner"})}};function me(e){var t=(0,a.useReducer)((function(e){return e+1}),0),n=u(t,2)[1],r=u((0,a.useState)([]),2),i=r[0],s=r[1],o=(0,a.useRef)(null),c=(0,a.useRef)(new Map).current,l=function(e){return-1!==i.indexOf(e)},d=(0,a.useRef)({toastKey:1,displayedToast:0,count:0,queue:[],props:e,containerId:null,isToastActive:l,getToast:function(e){return c.get(e)}}).current;function h(e){var t=e.containerId;!d.props.limit||t&&d.containerId!==t||(d.count-=d.queue.length,d.queue=[])}function f(e){s((function(t){return null==e?[]:t.filter((function(t){return t!==e}))}))}function p(){var e=d.queue.shift();m(e.toastContent,e.toastProps,e.staleId)}function v(e,t){var r=t.delay,i=t.staleId,s=ee(t,ae);if(le(e)&&!function(e){return!o.current||d.props.enableMultiContainer&&e.containerId!==d.props.containerId||c.has(e.toastId)&&null==e.updateId}(s)){var u=s.toastId,l=s.updateId,h=s.data,v=d.props,g=function(){return f(u)},y=null==l;y&&d.count++;var b,k,x=$($($({},v),{},{style:v.toastStyle,key:d.toastKey++},s),{},{toastId:u,updateId:l,data:h,closeToast:g,isIn:!1,className:ue(s.className||v.toastClassName),bodyClassName:ue(s.bodyClassName||v.bodyClassName),progressClassName:ue(s.progressClassName||v.progressClassName),autoClose:!s.isLoading&&(b=s.autoClose,k=v.autoClose,!1===b||se(b)&&b>0?b:k),deleteToast:function(){var e=he(c.get(u),"removed");c.delete(u),fe.emit(4,e);var t=d.queue.length;if(d.count=null==u?d.count-d.displayedToast:d.count-1,d.count<0&&(d.count=0),t>0){var r=null==u?d.props.limit:1;if(1===t||1===r)d.displayedToast++,p();else{var i=r>t?t:r;d.displayedToast=i;for(var a=0;a<i;a++)p()}}else n()}});x.iconOut=function(e){var t=e.theme,n=e.type,r=e.isLoading,i=e.icon,s=null,o={theme:t,type:n};return!1===i||(ce(i)?s=i(o):(0,a.isValidElement)(i)?s=(0,a.cloneElement)(i,o):oe(i)||se(i)?s=i:r?s=ve.spinner():function(e){return e in ve}(n)&&(s=ve[n](o))),s}(x),ce(s.onOpen)&&(x.onOpen=s.onOpen),ce(s.onClose)&&(x.onClose=s.onClose),x.closeButton=v.closeButton,!1===s.closeButton||le(s.closeButton)?x.closeButton=s.closeButton:!0===s.closeButton&&(x.closeButton=!le(v.closeButton)||v.closeButton);var w=e;(0,a.isValidElement)(e)&&!oe(e.type)?w=(0,a.cloneElement)(e,{closeToast:g,toastProps:x,data:h}):ce(e)&&(w=e({closeToast:g,toastProps:x,data:h})),v.limit&&v.limit>0&&d.count>v.limit&&y?d.queue.push({toastContent:w,toastProps:x,staleId:i}):se(r)?setTimeout((function(){m(w,x,i)}),r):m(w,x,i)}}function m(e,t,n){var r=t.toastId;n&&c.delete(n);var i={content:e,props:t};c.set(r,i),s((function(e){return[].concat(te(e),[r]).filter((function(e){return e!==n}))})),fe.emit(4,he(i,null==i.props.updateId?"added":"updated"))}return(0,a.useEffect)((function(){return d.containerId=e.containerId,fe.cancelEmit(3).on(0,v).on(1,(function(e){return o.current&&f(e)})).on(5,h).emit(2,d),function(){c.clear(),fe.emit(3,d)}}),[]),(0,a.useEffect)((function(){d.props=e,d.isToastActive=l,d.displayedToast=i.length})),{getToastToRender:function(t){var n=new Map,r=Array.from(c.values());return e.newestOnTop&&r.reverse(),r.forEach((function(e){var t=e.props.position;n.has(t)||n.set(t,[]),n.get(t).push(e)})),Array.from(n,(function(e){return t(e[0],e[1])}))},containerRef:o,isToastActive:l}}function ge(e){return e.targetTouches&&e.targetTouches.length>=1?e.targetTouches[0].clientX:e.clientX}function ye(e){return e.targetTouches&&e.targetTouches.length>=1?e.targetTouches[0].clientY:e.clientY}function be(e){var t=u((0,a.useState)(!1),2),n=t[0],r=t[1],i=u((0,a.useState)(!1),2),s=i[0],o=i[1],c=(0,a.useRef)(null),l=(0,a.useRef)({start:0,x:0,y:0,delta:0,removalDistance:0,canCloseOnClick:!0,canDrag:!1,boundingRect:null,didMove:!1}).current,d=(0,a.useRef)(e),h=e.autoClose,f=e.pauseOnHover,p=e.closeToast,v=e.onClick,m=e.closeOnClick;function g(t){if(e.draggable){"touchstart"===t.nativeEvent.type&&t.nativeEvent.preventDefault(),l.didMove=!1,document.addEventListener("mousemove",x),document.addEventListener("mouseup",w),document.addEventListener("touchmove",x),document.addEventListener("touchend",w);var n=c.current;l.canCloseOnClick=!0,l.canDrag=!0,l.boundingRect=n.getBoundingClientRect(),n.style.transition="",l.x=ge(t.nativeEvent),l.y=ye(t.nativeEvent),"x"===e.draggableDirection?(l.start=l.x,l.removalDistance=n.offsetWidth*(e.draggablePercent/100)):(l.start=l.y,l.removalDistance=n.offsetHeight*(80===e.draggablePercent?1.5*e.draggablePercent:e.draggablePercent/100))}}function y(t){if(l.boundingRect){var n=l.boundingRect,r=n.top,i=n.bottom,a=n.left,s=n.right;"touchend"!==t.nativeEvent.type&&e.pauseOnHover&&l.x>=a&&l.x<=s&&l.y>=r&&l.y<=i?k():b()}}function b(){r(!0)}function k(){r(!1)}function x(t){var r=c.current;l.canDrag&&r&&(l.didMove=!0,n&&k(),l.x=ge(t),l.y=ye(t),l.delta="x"===e.draggableDirection?l.x-l.start:l.y-l.start,l.start!==l.x&&(l.canCloseOnClick=!1),r.style.transform="translate".concat(e.draggableDirection,"(").concat(l.delta,"px)"),r.style.opacity=""+(1-Math.abs(l.delta/l.removalDistance)))}function w(){document.removeEventListener("mousemove",x),document.removeEventListener("mouseup",w),document.removeEventListener("touchmove",x),document.removeEventListener("touchend",w);var t=c.current;if(l.canDrag&&l.didMove&&t){if(l.canDrag=!1,Math.abs(l.delta)>l.removalDistance)return o(!0),void e.closeToast();t.style.transition="transform 0.2s, opacity 0.2s",t.style.transform="translate".concat(e.draggableDirection,"(0)"),t.style.opacity="1"}}(0,a.useEffect)((function(){d.current=e})),(0,a.useEffect)((function(){return c.current&&c.current.addEventListener("d",b,{once:!0}),ce(e.onOpen)&&e.onOpen((0,a.isValidElement)(e.children)&&e.children.props),function(){var e=d.current;ce(e.onClose)&&e.onClose((0,a.isValidElement)(e.children)&&e.children.props)}}),[]),(0,a.useEffect)((function(){return e.pauseOnFocusLoss&&(document.hasFocus()||k(),window.addEventListener("focus",b),window.addEventListener("blur",k)),function(){e.pauseOnFocusLoss&&(window.removeEventListener("focus",b),window.removeEventListener("blur",k))}}),[e.pauseOnFocusLoss]);var T={onMouseDown:g,onTouchStart:g,onMouseUp:y,onTouchEnd:y};return h&&f&&(T.onMouseEnter=k,T.onMouseLeave=b),m&&(T.onClick=function(e){v&&v(e),l.canCloseOnClick&&p()}),{playToast:b,pauseToast:k,isRunning:n,preventExitTransition:s,toastRef:c,eventHandlers:T}}function ke(e){var t=e.closeToast,n=e.theme,r=e.ariaLabel,i=void 0===r?"close":r;return a.createElement("button",{className:"Toastify__close-button Toastify__close-button--".concat(n),type:"button",onClick:function(e){e.stopPropagation(),t(e)},"aria-label":i},a.createElement("svg",{"aria-hidden":"true",viewBox:"0 0 14 16"},a.createElement("path",{fillRule:"evenodd",d:"M7.71 8.23l3.75 3.75-1.48 1.48-3.75-3.75-3.75 3.75L1 11.98l3.75-3.75L1 4.48 2.48 3l3.75 3.75L9.98 3l1.48 1.48-3.75 3.75z"})))}function xe(e){var t=e.delay,n=e.isRunning,r=e.closeToast,i=e.type,s=void 0===i?"default":i,o=e.hide,c=e.className,u=e.style,l=e.controlledProgress,d=e.progress,h=e.rtl,f=e.isIn,p=e.theme,v=o||l&&0===d,m=$($({},u),{},{animationDuration:"".concat(t,"ms"),animationPlayState:n?"running":"paused",opacity:v?0:1});l&&(m.transform="scaleX(".concat(d,")"));var g=re("Toastify__progress-bar",l?"Toastify__progress-bar--controlled":"Toastify__progress-bar--animated","Toastify__progress-bar-theme--".concat(p),"Toastify__progress-bar--".concat(s),{"Toastify__progress-bar--rtl":h}),y=ce(c)?c({rtl:h,type:s,defaultClassName:g}):re(g,c);return a.createElement("div",X({role:"progressbar","aria-hidden":v?"true":"false","aria-label":"notification timer",className:y,style:m},l&&d>=1?"onTransitionEnd":"onAnimationEnd",l&&d<1?null:function(){f&&r()}))}var we=function(e){var t=be(e),n=t.isRunning,r=t.preventExitTransition,i=t.toastRef,s=t.eventHandlers,o=e.closeButton,c=e.children,u=e.autoClose,l=e.onClick,d=e.type,h=e.hideProgressBar,f=e.closeToast,p=e.transition,v=e.position,m=e.className,g=e.style,y=e.bodyClassName,b=e.bodyStyle,k=e.progressClassName,x=e.progressStyle,w=e.updateId,T=e.role,E=e.progress,_=e.rtl,S=e.toastId,A=e.deleteToast,C=e.isIn,I=e.isLoading,R=e.iconOut,P=e.closeOnClick,D=e.theme,N=re("Toastify__toast","Toastify__toast-theme--".concat(D),"Toastify__toast--".concat(d),{"Toastify__toast--rtl":_},{"Toastify__toast--close-on-click":P}),O=ce(m)?m({rtl:_,position:v,type:d,defaultClassName:N}):re(N,m),L=!!E||!u,M={closeToast:f,type:d,theme:D},j=null;return!1===o||(j=ce(o)?o(M):(0,a.isValidElement)(o)?(0,a.cloneElement)(o,M):ke(M)),a.createElement(p,{isIn:C,done:A,position:v,preventExitTransition:r,nodeRef:i},a.createElement("div",$($({id:S,onClick:l,className:O},s),{},{style:g,ref:i}),a.createElement("div",$($({},C&&{role:T}),{},{className:ce(y)?y({type:d}):re("Toastify__toast-body",y),style:b}),null!=R&&a.createElement("div",{className:re("Toastify__toast-icon",{"Toastify--animate-icon Toastify__zoom-enter":!I})},R),a.createElement("div",null,c)),j,a.createElement(xe,$($({},w&&!L?{key:"pb-".concat(w)}:{}),{},{rtl:_,theme:D,delay:u,isRunning:n,isIn:C,closeToast:f,hide:h,type:d,style:x,className:k,controlledProgress:L,progress:E||0}))))},Te=function(e,t){return void 0===t&&(t=!1),{enter:"Toastify--animate Toastify__".concat(e,"-enter"),exit:"Toastify--animate Toastify__".concat(e,"-exit"),appendPosition:t}},Ee=de(Te("bounce",!0)),_e=(de(Te("slide",!0)),de(Te("zoom")),de(Te("flip")),(0,a.forwardRef)((function(e,t){var n=me(e),r=n.getToastToRender,i=n.containerRef,s=n.isToastActive,o=e.className,c=e.style,u=e.rtl,l=e.containerId;function d(e){var t=re("Toastify__toast-container","Toastify__toast-container--".concat(e),{"Toastify__toast-container--rtl":u});return ce(o)?o({position:e,rtl:u,defaultClassName:t}):re(t,ue(o))}return(0,a.useEffect)((function(){t&&(t.current=i.current)}),[]),a.createElement("div",{ref:i,className:"Toastify",id:l},r((function(e,t){var n=t.length?$({},c):$($({},c),{},{pointerEvents:"none"});return a.createElement("div",{className:d(e),style:n,key:"container-".concat(e)},t.map((function(e,n){var r=e.content,i=e.props;return a.createElement(we,$($({},i),{},{isIn:s(i.toastId),style:$($({},i.style),{},{"--nth":n+1,"--len":t.length}),key:"toast-".concat(i.key)}),r)})))})))})));_e.displayName="ToastContainer",_e.defaultProps={position:"top-right",transition:Ee,autoClose:5e3,closeButton:ke,pauseOnHover:!0,pauseOnFocusLoss:!0,closeOnClick:!0,draggable:!0,draggablePercent:80,draggableDirection:"x",role:"alert",theme:"light"};var Se,Ae=new Map,Ce=[],Ie=1;function Re(){return""+Ie++}function Pe(e){return e&&(oe(e.toastId)||se(e.toastId))?e.toastId:Re()}function De(e,t){return Ae.size>0?fe.emit(0,e,t):Ce.push({content:e,options:t}),t.toastId}function Ne(e,t){return $($({},t),{},{type:t&&t.type||e,toastId:Pe(t)})}function Oe(e){return function(t,n){return De(t,Ne(e,n))}}function Le(e,t){return De(e,Ne("default",t))}Le.loading=function(e,t){return De(e,Ne("default",$({isLoading:!0,autoClose:!1,closeOnClick:!1,closeButton:!1,draggable:!1},t)))},Le.promise=function(e,t,n){var r,i=t.pending,a=t.error,s=t.success;i&&(r=oe(i)?Le.loading(i,n):Le.loading(i.render,$($({},n),i)));var o={isLoading:null,autoClose:null,closeOnClick:null,closeButton:null,draggable:null,delay:100},c=function(e,t,i){if(null!=t){var a=$($($({type:e},o),n),{},{data:i}),s=oe(t)?{render:t}:t;return r?Le.update(r,$($({},a),s)):Le(s.render,$($({},a),s)),i}Le.dismiss(r)},u=ce(e)?e():e;return u.then((function(e){return c("success",s,e)})).catch((function(e){return c("error",a,e)})),u},Le.success=Oe("success"),Le.info=Oe("info"),Le.error=Oe("error"),Le.warning=Oe("warning"),Le.warn=Le.warning,Le.dark=function(e,t){return De(e,Ne("default",$({theme:"dark"},t)))},Le.dismiss=function(e){Ae.size>0?fe.emit(1,e):Ce=Ce.filter((function(t){return null!=e&&t.options.toastId!==e}))},Le.clearWaitingQueue=function(e){return void 0===e&&(e={}),fe.emit(5,e)},Le.isActive=function(e){var t=!1;return Ae.forEach((function(n){n.isToastActive&&n.isToastActive(e)&&(t=!0)})),t},Le.update=function(e,t){void 0===t&&(t={}),setTimeout((function(){var n=function(e,t){var n=t.containerId,r=Ae.get(n||Se);return r&&r.getToast(e)}(e,t);if(n){var r=n.props,i=n.content,a=$($($({},r),t),{},{toastId:t.toastId||e,updateId:Re()});a.toastId!==e&&(a.staleId=e);var s=a.render||i;delete a.render,De(s,a)}}),0)},Le.done=function(e){Le.update(e,{progress:1})},Le.onChange=function(e){return fe.on(4,e),function(){fe.off(4,e)}},Le.POSITION={TOP_LEFT:"top-left",TOP_RIGHT:"top-right",TOP_CENTER:"top-center",BOTTOM_LEFT:"bottom-left",BOTTOM_RIGHT:"bottom-right",BOTTOM_CENTER:"bottom-center"},Le.TYPE={INFO:"info",SUCCESS:"success",WARNING:"warning",ERROR:"error",DEFAULT:"default"},fe.on(2,(function(e){Se=e.containerId||e,Ae.set(Se,e),Ce.forEach((function(e){fe.emit(0,e.content,e.options)})),Ce=[]})).on(3,(function(e){Ae.delete(e.containerId||e),0===Ae.size&&fe.off(0).off(1).off(5)}));__webpack_require__.p;var Me=__webpack_require__(184),je=function(){return(0,Me.jsx)("div",{className:"flex h-screen items-center justify-center ",children:(0,Me.jsx)("div",{className:"w-16 h-16 border-b-2 border-gray-900 rounded-full animate-spin"})})},Fe=__webpack_require__.p+"static/media/play.cd8ad4544ed8e14fa385.png",Ue=__webpack_require__(48),Be=__webpack_require__.n(Ue),Ge=function(e){var t=e.setAudioData,n=u((0,a.useState)([]),2),r=n[0],i=n[1],s=u((0,a.useState)(!0),2),o=s[0],c=s[1],l=u((0,a.useState)([]),2),d=l[0],h=l[1],f=u((0,a.useState)(!1),2),p=f[0],v=f[1],m=u((0,a.useState)(0),2),g=m[0],y=m[1],b=u((0,a.useState)(0),2),k=b[0],x=b[1],w=u((0,a.useState)(8),2),T=w[0],E=w[1];if((0,a.useEffect)((function(){fetch("http://128.140.52.151:5000/getanswer").then((function(e){return e.json()})).then((function(e){y(Math.ceil(e.length/8))}))}),[]),(0,a.useEffect)((function(){fetch("http://128.140.52.151:5000/getanswer").then((function(e){return e.json()})).then((function(e){i(e),c(!1)}))}),[]),o)return(0,Me.jsx)(je,{});var _=0,S=8;return(0,Me.jsxs)("div",{className:"w-10/12 lg:w-11/12 mx-auto mt-16 relative",children:[(0,Me.jsx)("h1",{className:"text-3xl border-b-4 border-accent font-bold mt-8 inline-block",children:"\u09ae\u09c1\u09ab\u09a4\u09bf \u09b6\u09ab\u09bf \u09b8\u09be\u09b9\u09c7\u09ac (\u09a6\u09be\u0983 \u09ac\u09be\u0983)\u098f\u09b0 \u09b8\u0995\u09b2 \u09aa\u09cd\u09b0\u09b6\u09cd\u09a8-\u0989\u09a4\u09cd\u09a4\u09b0 \u09b8\u09ae\u09c2\u09b9"}),(0,Me.jsx)("br",{}),(0,Me.jsx)("div",{className:"flex justify-center items-center my-4",children:(0,Me.jsxs)("div",{class:"form-control w-80",children:[(0,Me.jsx)("label",{class:"label",children:(0,Me.jsx)("span",{class:"label-text font-bold",children:"\u09aa\u09cd\u09b0\u09b6\u09cd\u09a8\u09c7\u09b0 \u09ac\u09bf\u09b7\u09df \u09b2\u09bf\u0996\u09c7 \u0985\u09a8\u09c1\u09b8\u09a8\u09cd\u09a7\u09be\u09a8 \u0995\u09b0\u09c1\u09a8"})}),(0,Me.jsx)("input",{onMouseDown:function(){x(_),E(S)},onChange:function(e){var t=e.target.value,n=r.filter((function(e){return e.question.includes(t)}));h(n),v(!0)},type:"text",placeholder:"\u09aa\u09cd\u09b0\u09b6\u09cd\u09a8\u09c7\u09b0 \u09ac\u09bf\u09b7\u09df \u09b2\u09bf\u0996\u09c1\u09a8",class:"input input-bordered input-accent w-full max-w-xs"})]})}),(0,Me.jsx)("hr",{}),(0,Me.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-5",children:p?d.slice(k,T).map((function(e){return(0,Me.jsxs)("div",{style:{height:"200px"},className:"shadow-xl bg-white hover:shadow-accent active:shadow-red-400 p-5 rounded-r-3xl rounded-tl-3xl text-left relative",children:[(0,Me.jsxs)("h3",{className:"text-lg font-bold min-h-8",children:["\u09aa\u09cd\u09b0\u09b6\u09cd\u09a8\u0983 ",e.question]}),(0,Me.jsxs)("h3",{className:"text-base",children:[(0,Me.jsx)("span",{className:"font-bold",children:"\u0989\u09a4\u09cd\u09a4\u09b0 \u09a8\u0982\u0983"})," ",e.answer_no,"  ",(0,Me.jsx)("span",{className:"font-bold",children:"  \u09ac\u09bf\u09ad\u09be\u0997\u0983"})," ",e.category]}),(0,Me.jsx)("div",{className:"mt-4 text-center absolute bottom-8 left-32",children:(0,Me.jsx)("label",{onClick:function(){return t(e)},for:"my-modal-6",class:"btn btn-accent btn-circle text-white font-bold",children:(0,Me.jsx)("img",{width:"200px",src:Fe,alt:""})})})]})})):r.slice(k,T).map((function(e){return(0,Me.jsxs)("div",{style:{height:"200px"},className:"shadow-xl bg-white hover:shadow-accent active:shadow-red-400 p-5 rounded-r-3xl rounded-tl-3xl text-left relative",children:[(0,Me.jsxs)("h3",{className:"text-lg font-bold min-h-8",children:["\u09aa\u09cd\u09b0\u09b6\u09cd\u09a8\u0983 ",e.question]}),(0,Me.jsxs)("h3",{className:"text-base",children:[(0,Me.jsx)("span",{className:"font-bold",children:"\u0989\u09a4\u09cd\u09a4\u09b0 \u09a8\u0982\u0983"})," ",e.answer_no,"  ",(0,Me.jsx)("span",{className:"font-bold",children:"  \u09ac\u09bf\u09ad\u09be\u0997\u0983"})," ",e.category]}),(0,Me.jsx)("div",{className:"mt-4 text-center absolute bottom-8 left-32",children:(0,Me.jsx)("label",{onClick:function(){return t(e)},for:"my-modal-6",class:"btn btn-accent btn-circle text-white font-bold",children:(0,Me.jsx)("img",{width:"200px",src:Fe,alt:""})})})]})}))}),(0,Me.jsx)("div",{className:"my-8",children:(0,Me.jsx)(Be(),{previousLabel:"\u09aa\u09c2\u09b0\u09cd\u09ac\u09ac\u09b0\u09cd\u09a4\u09c0",nextLabel:"\u09aa\u09b0\u09ac\u09b0\u09cd\u09a4\u09c0",breakLabel:"...",pageCount:g,marginPagesDisplayed:3,pageRangeDisplayed:6,onPageChange:function(e){_=e.selected+1<3?_*e.selected+8:_*e.selected+8+8,e.selected+1<=1&&(_=0,S=8),S=S*e.selected+8,x(_),E(S)},containerClassName:"btn-group justify-center",pageClassName:"btn btn-accent text-white",activeClassName:"btn bg-white text-black",previousClassName:"btn btn-accent text-white",nextClassName:"btn btn-accent text-white",breakClassName:"btn btn-accent text-white"})})]})},Ve=function(e){var t=e.setAudioData,n=u((0,a.useState)([]),2),r=n[0],i=n[1],s=u((0,a.useState)(!0),2),o=s[0],c=s[1],l=u((0,a.useState)([]),2),d=l[0],h=l[1],f=u((0,a.useState)(!1),2),p=f[0],v=f[1],m=u((0,a.useState)(0),2),g=m[0],y=m[1],b=u((0,a.useState)(0),2),k=b[0],x=b[1],w=u((0,a.useState)(8),2),T=w[0],E=w[1];if((0,a.useEffect)((function(){fetch("http://128.140.52.151:5000/gethomeboyans").then((function(e){return e.json()})).then((function(e){y(Math.ceil(e.length/8))}))}),[]),(0,a.useEffect)((function(){fetch("http://128.140.52.151:5000/gethomeboyans").then((function(e){return e.json()})).then((function(e){i(e),c(!1)}))}),[]),o)return(0,Me.jsx)(je,{});var _=0,S=8;return(0,Me.jsxs)("div",{className:"w-10/12 lg:w-11/12 mx-auto mt-16 relative",children:[(0,Me.jsx)("h1",{className:"text-3xl border-b-4 border-accent font-bold mt-8 inline-block",children:"\u09ae\u09c1\u09ab\u09a4\u09bf \u09b6\u09ab\u09bf \u09b8\u09be\u09b9\u09c7\u09ac (\u09a6\u09be\u0983 \u09ac\u09be\u0983)\u098f\u09b0 \u09b8\u0995\u09b2 \u09ac\u09df\u09be\u09a8 \u09b8\u09ae\u09c2\u09b9"}),(0,Me.jsx)("br",{}),(0,Me.jsx)("div",{className:"flex justify-center items-center my-4",children:(0,Me.jsxs)("div",{class:"form-control w-80",children:[(0,Me.jsx)("label",{class:"label",children:(0,Me.jsx)("span",{class:"label-text font-bold",children:"\u09ac\u09df\u09be\u09a8\u09c7\u09b0 \u09ac\u09bf\u09b7\u09df \u09b2\u09bf\u0996\u09c7 \u0985\u09a8\u09c1\u09b8\u09a8\u09cd\u09a7\u09be\u09a8 \u0995\u09b0\u09c1\u09a8"})}),(0,Me.jsx)("input",{onMouseDown:function(){x(_),E(S)},onChange:function(e){var t=e.target.value,n=r.filter((function(e){return e.name.includes(t)}));h(n),v(!0)},type:"text",placeholder:"\u09ac\u09df\u09be\u09a8\u09c7\u09b0 \u09ac\u09bf\u09b7\u09df \u09b2\u09bf\u0996\u09c1\u09a8",class:"input input-bordered input-accent w-full max-w-xs"})]})}),(0,Me.jsx)("hr",{}),(0,Me.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-5",children:p?d.slice(k,T).map((function(e){return(0,Me.jsxs)("div",{style:{height:"370px"},className:"shadow-xl bg-white hover:shadow-accent active:shadow-red-400 p-5 rounded-r-3xl rounded-tl-3xl text-left relative",children:[(0,Me.jsxs)("h3",{className:"text-lg font-bold min-h-8",children:["\u09ac\u09df\u09be\u09a8\u09c7\u09b0 \u09ac\u09bf\u09b7\u09df\u0983 ",e.name]}),(0,Me.jsxs)("h3",{className:"text-base",children:[(0,Me.jsx)("span",{className:"font-bold",children:"\u09b8\u09cd\u09a5\u09be\u09a8\u0983 "}),e.place]}),(0,Me.jsxs)("h3",{className:"text-base",children:[(0,Me.jsx)("span",{className:"font-bold",children:"\u09a4\u09be\u09b0\u09bf\u0996\u0983"})," ",e.date,"  ",(0,Me.jsx)("span",{className:"font-bold",children:"  \u09ac\u09bf\u09ad\u09be\u0997\u0983"})," ",e.category]}),(0,Me.jsx)("p",{className:"my-4",children:e.description}),(0,Me.jsx)("div",{className:"mt-4 text-center absolute bottom-8 left-32",children:(0,Me.jsx)("label",{onClick:function(){return t(e)},for:"my-modal-6",class:"btn btn-accent btn-circle text-white font-bold",children:(0,Me.jsx)("img",{width:"200px",src:Fe,alt:""})})})]})})):r.slice(k,T).map((function(e){return(0,Me.jsxs)("div",{style:{height:"370px"},className:"shadow-xl bg-white hover:shadow-accent active:shadow-red-400 p-5 rounded-r-3xl rounded-tl-3xl text-left relative",children:[(0,Me.jsxs)("h3",{className:"text-lg font-bold min-h-8",children:["\u09ac\u09df\u09be\u09a8\u09c7\u09b0 \u09ac\u09bf\u09b7\u09df\u0983 ",e.name]}),(0,Me.jsxs)("h3",{className:"text-base",children:[(0,Me.jsx)("span",{className:"font-bold",children:"\u09b8\u09cd\u09a5\u09be\u09a8\u0983 "}),e.place]}),(0,Me.jsxs)("h3",{className:"text-base",children:[(0,Me.jsx)("span",{className:"font-bold",children:"\u09a4\u09be\u09b0\u09bf\u0996\u0983"})," ",e.date,"  ",(0,Me.jsx)("span",{className:"font-bold",children:"  \u09ac\u09bf\u09ad\u09be\u0997\u0983"})," ",e.category]}),(0,Me.jsx)("p",{className:"my-4",children:e.description}),(0,Me.jsx)("div",{className:"mt-4 text-center absolute bottom-8 left-32",children:(0,Me.jsx)("label",{onClick:function(){return t(e)},for:"my-modal-6",class:"btn btn-accent btn-circle text-white font-bold",children:(0,Me.jsx)("img",{width:"200px",src:Fe,alt:""})})})]})}))}),(0,Me.jsx)("div",{className:"my-8",children:(0,Me.jsx)(Be(),{previousLabel:"\u09aa\u09c2\u09b0\u09cd\u09ac\u09ac\u09b0\u09cd\u09a4\u09c0",nextLabel:"\u09aa\u09b0\u09ac\u09b0\u09cd\u09a4\u09c0",breakLabel:"...",pageCount:g,marginPagesDisplayed:3,pageRangeDisplayed:6,onPageChange:function(e){_=e.selected+1<3?_*e.selected+8:_*e.selected+8+8,e.selected+1<=1&&(_=0,S=8),S=S*e.selected+8,x(_),E(S)},containerClassName:"btn-group justify-center",pageClassName:"btn btn-accent text-white",activeClassName:"btn bg-white text-black",previousClassName:"btn btn-accent text-white",nextClassName:"btn btn-accent text-white",breakClassName:"btn btn-accent text-white"})})]})},He=function(){var e=u((0,a.useState)([]),2),t=e[0],n=e[1],r=u((0,a.useState)([]),2),i=r[0],s=r[1],o=u((0,a.useState)(""),2),c=(o[0],o[1]),l=u((0,a.useState)(""),2),d=(l[0],l[1]),h=u((0,a.useState)(""),2),f=h[0],p=h[1];(0,a.useEffect)((function(){fetch("http://128.140.52.151:5000/getcategories").then((function(e){return e.json()})).then((function(e){n(e)}))}),[t]),(0,a.useEffect)((function(){fetch("http://128.140.52.151:5000/getsubjects").then((function(e){return e.json()})).then((function(e){s(e)}))}),[t]);return(0,Me.jsxs)("div",{children:[(0,Me.jsx)("h1",{className:"text-3xl border-b-4 border-accent mt-28 inline-block",children:"\u098f\u0995\u099f\u09bf \u09a8\u09a4\u09c1\u09a8 \u09ac\u09df\u09be\u09a8\u09c7\u09b0 \u0993\u09a1\u09bf\u0993 \u09af\u09cb\u0997 \u0995\u09b0\u09c1\u09a8"}),(0,Me.jsxs)("form",{onSubmit:function(e){e.preventDefault();var t=e.target.category.value,n=e.target.subject.value,r=e.target.date.value,i=e.target.name.value,a=e.target.place.value,s="https://docs.google.com/uc?export=download&id=".concat(f),o=e.target.description.value,u={date:r,name:i,category:t,subject:n,place:a,link:s,description:o,mainCategory:"boyan"};fetch("http://128.140.52.151:5000/addboyans",{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify(u)}).then((function(e){return e.json()})).then((function(t){e.target.reset(),c(n),d(i),console.log(n)})),fetch("http://128.140.52.151:5000/latest",{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify(u)}).then((function(e){return e.json()})).then((function(e){console.log(e)}))},className:"mt-8 flex justify-center items-center flex-col",children:[(0,Me.jsxs)("div",{class:"form-control w-80",children:[(0,Me.jsx)("label",{class:"label",children:(0,Me.jsx)("span",{class:"label-text",children:"\u09a4\u09be\u09b0\u09bf\u0996 \u09ac\u09be\u099b\u09be\u0987 \u0995\u09b0\u09c1\u09a8"})}),(0,Me.jsx)("input",{name:"date",type:"date",placeholder:"\u09a4\u09be\u09b0\u09bf\u0996",class:"input input-bordered w-full max-w-xs"})]}),(0,Me.jsxs)("div",{class:"form-control w-80",children:[(0,Me.jsx)("label",{class:"label",children:(0,Me.jsx)("span",{class:"label-text",children:"\u09ac\u09bf\u09ad\u09be\u0997 \u09ac\u09be\u099b\u09be\u0987 \u0995\u09b0\u09c1\u09a8"})}),(0,Me.jsx)("select",{name:"category",class:"select select-bordered w-full max-w-xs",children:t.map((function(e){return(0,Me.jsx)("option",{children:e.categoryName})}))})]}),(0,Me.jsxs)("div",{class:"form-control w-80",children:[(0,Me.jsx)("label",{class:"label",children:(0,Me.jsx)("span",{class:"label-text",children:"\u09ac\u09bf\u09b7\u09df \u09ac\u09be\u099b\u09be\u0987 \u0995\u09b0\u09c1\u09a8"})}),(0,Me.jsx)("select",{name:"subject",class:"select select-bordered w-full max-w-xs",children:i.map((function(e){return(0,Me.jsx)("option",{children:e.subjectName})}))})]}),(0,Me.jsxs)("div",{class:"form-control w-80",children:[(0,Me.jsx)("label",{class:"label",children:(0,Me.jsx)("span",{class:"label-text",children:"\u0993\u09a1\u09bf\u0993 \u09a8\u09be\u09ae"})}),(0,Me.jsx)("input",{name:"name",type:"text",placeholder:"\u0993\u09a1\u09bf\u0993 \u09a8\u09be\u09ae",class:"input input-bordered w-full max-w-xs"})]}),(0,Me.jsxs)("div",{class:"form-control w-80",children:[(0,Me.jsx)("label",{class:"label",children:(0,Me.jsx)("span",{class:"label-text",children:"\u09ac\u09df\u09be\u09a8\u09c7\u09b0 \u09b8\u09cd\u09a5\u09be\u09a8"})}),(0,Me.jsx)("input",{name:"place",type:"text",placeholder:"\u09ac\u09df\u09be\u09a8\u09c7\u09b0 \u09b8\u09cd\u09a5\u09be\u09a8",class:"input input-bordered w-full max-w-xs"})]}),(0,Me.jsxs)("div",{class:"form-control w-80",children:[(0,Me.jsx)("label",{class:"label",children:(0,Me.jsx)("span",{class:"label-text",children:"\u0993\u09a1\u09bf\u0993 \u09ab\u09be\u0987\u09b2"})}),(0,Me.jsx)("input",{type:"file",id:"customFile",placeholder:"\u0993\u09a1\u09bf\u0993 \u09ab\u09be\u0987\u09b2",onChange:function(e){return function(e){var t=e.target.files[0],n=new FileReader;n.readAsDataURL(e.target.files[0]),n.onload=function(e){var r={dataReq:{data:n.result.split(",")[1],name:t.name,type:t.type},fname:"uploadFilesToGoogleDrive"};fetch("https://script.google.com/macros/s/AKfycbwYKgy85mYgpiT7U3mV2T6vum0yKg_I-AAJegLuNfeosEO_HligOW_ic_M1mW8pUqk/exec",{method:"POST",body:JSON.stringify(r)}).then((function(e){return e.json()})).then((function(e){e.id&&(Le.success("\u09ab\u09be\u0987\u09b2 \u0986\u09aa\u09b2\u09cb\u09a1 \u09b9\u09df\u09c7\u099b\u09c7"),p(e.id))})).catch((function(e){return console.log(e)}))}}(e)}})]}),(0,Me.jsxs)("div",{class:"form-control w-80",children:[(0,Me.jsx)("label",{class:"label",children:(0,Me.jsx)("span",{class:"label-text",children:"\u09ac\u09bf\u09ac\u09b0\u09a3"})}),(0,Me.jsx)("textarea",{name:"description",class:"textarea textarea-bordered",placeholder:"\u09ac\u09bf\u09ac\u09b0\u09a3 \u09b2\u09bf\u0996\u09c1\u09a8"})]}),(0,Me.jsx)("button",{disabled:!f,className:"btn btn-md btn-accent text-white my-4 rounded-md",type:"submit",children:"\u0993\u09a1\u09bf\u0993 \u09af\u09cb\u0997 \u0995\u09b0\u09c1\u09a8"})]})]})},ze=function(){var e=u((0,a.useState)([]),2),t=e[0],n=e[1];(0,a.useEffect)((function(){fetch("http://128.140.52.151:5000/getcategories").then((function(e){return e.json()})).then((function(e){n(e)}))}),[t]);return(0,Me.jsxs)("div",{className:"",children:[(0,Me.jsx)("h1",{className:"text-3xl border-b-4 border-accent mt-28 inline-block",children:"\u098f\u0995\u099f\u09bf \u09a8\u09a4\u09c1\u09a8 \u09ac\u09df\u09be\u09a8\u09c7\u09b0 \u09ac\u09bf\u09ad\u09be\u0997 \u09af\u09cb\u0997 \u0995\u09b0\u09c1\u09a8"}),(0,Me.jsxs)("form",{onSubmit:function(e){e.preventDefault();var t=e.target.category.value;console.log(t);var n={categoryName:t};fetch("http://128.140.52.151:5000/categories",{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify(n)}).then((function(e){return e.json()})).then((function(t){console.log(t),e.target.reset()}))},className:"mt-16 flex justify-center items-center flex-col",children:[(0,Me.jsxs)("div",{class:"form-control w-80",children:[(0,Me.jsx)("label",{class:"label",children:(0,Me.jsx)("span",{class:"label-text",children:"\u09ac\u09bf\u09ad\u09be\u0997\u09c7\u09b0 \u09a8\u09be\u09ae"})}),(0,Me.jsx)("input",{name:"category",type:"text",placeholder:"\u09ac\u09bf\u09ad\u09be\u0997\u09c7\u09b0 \u09a8\u09be\u09ae \u09b2\u09bf\u0996\u09c1\u09a8",class:"input input-bordered w-full max-w-xs"})]}),(0,Me.jsx)("button",{className:"btn btn-md btn-accent text-white mt-4 rounded-md",type:"submit",children:"\u09ac\u09bf\u09ad\u09be\u0997 \u09af\u09cb\u0997 \u0995\u09b0\u09c1\u09a8"})]}),(0,Me.jsx)("div",{class:"overflow-x-auto my-8",children:(0,Me.jsxs)("table",{class:"table w-full",children:[(0,Me.jsx)("thead",{children:(0,Me.jsxs)("tr",{children:[(0,Me.jsx)("th",{children:"\u0995\u09cd\u09b0\u09ae\u09bf\u0995"}),(0,Me.jsx)("th",{children:"\u09ac\u09bf\u09ad\u09be\u0997\u09c7\u09b0 \u09a8\u09be\u09ae"}),(0,Me.jsx)("th",{children:"\u098f\u0995\u09b6\u09a8"})]})}),(0,Me.jsx)("tbody",{children:t.map((function(e,t){return(0,Me.jsxs)("tr",{children:[(0,Me.jsx)("td",{children:t+1}),(0,Me.jsx)("td",{children:e.categoryName}),(0,Me.jsx)("td",{children:(0,Me.jsx)("button",{className:"btn btn-xs btn-error text-white",children:"\u09ae\u09c1\u099b\u09c7 \u09ab\u09c7\u09b2\u09c1\u09a8"})})]})}))})]})})]})},We=function(){var e=u((0,a.useState)([]),2),t=e[0],n=e[1],r=u((0,a.useState)(""),2),i=r[0],s=r[1];(0,a.useEffect)((function(){fetch("http://128.140.52.151:5000/get_qa_categories").then((function(e){return e.json()})).then((function(e){n(e)}))}),[t]);var o="https://drive.google.com/file/d/1uIGHYwTDutJqn-WD_5gIsufKpPn_Cfoh/view?usp=sharing".slice(0,-17).substring(32),c="https://docs.google.com/uc?export=download&id=".concat(o);console.log(c);return(0,Me.jsxs)("div",{children:[(0,Me.jsx)("h1",{className:"text-3xl border-b-4 border-accent mt-28 inline-block",children:"\u098f\u0995\u099f\u09bf \u09a8\u09a4\u09c1\u09a8 \u09aa\u09cd\u09b0\u09b6\u09cd\u09a8-\u0989\u09a4\u09cd\u09a4\u09b0\u09c7\u09b0 \u0993\u09a1\u09bf\u0993 \u09af\u09cb\u0997 \u0995\u09b0\u09c1\u09a8"}),(0,Me.jsxs)("form",{onSubmit:function(e){e.preventDefault();var t=e.target.category.value,n=e.target.question.value,r=e.target.answer_no.value,a="https://docs.google.com/uc?export=download&id=".concat(i),s={question:n,answer_no:r,category:t,link:a,mainCategory:"answers"};fetch("http://128.140.52.151:5000/addanswer",{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify(s)}).then((function(e){return e.json()})).then((function(t){console.log(t),e.target.reset()})),fetch("http://128.140.52.151:5000/latest",{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify(s)}).then((function(e){return e.json()})).then((function(e){console.log(e)}))},className:"mt-8 flex justify-center items-center flex-col",children:[(0,Me.jsxs)("div",{class:"form-control w-80",children:[(0,Me.jsx)("label",{class:"label",children:(0,Me.jsx)("span",{class:"label-text",children:"\u09ac\u09bf\u09ad\u09be\u0997 \u09ac\u09be\u099b\u09be\u0987 \u0995\u09b0\u09c1\u09a8"})}),(0,Me.jsx)("select",{name:"category",class:"select select-bordered w-full max-w-xs",children:t.map((function(e){return(0,Me.jsx)("option",{children:e.categoryName})}))})]}),(0,Me.jsxs)("div",{class:"form-control w-80",children:[(0,Me.jsx)("label",{class:"label",children:(0,Me.jsx)("span",{class:"label-text",children:"\u09aa\u09cd\u09b0\u09b6\u09cd\u09a8"})}),(0,Me.jsx)("input",{name:"question",type:"text",placeholder:"\u09aa\u09cd\u09b0\u09b6\u09cd\u09a8 \u09b2\u09bf\u0996\u09c1\u09a8",class:"input input-bordered w-full max-w-xs"})]}),(0,Me.jsxs)("div",{class:"form-control w-80",children:[(0,Me.jsx)("label",{class:"label",children:(0,Me.jsx)("span",{class:"label-text",children:"\u0993\u09a1\u09bf\u0993 \u09ab\u09be\u0987\u09b2"})}),(0,Me.jsx)("input",{type:"file",id:"customFile",placeholder:"\u0993\u09a1\u09bf\u0993 \u09ab\u09be\u0987\u09b2",onChange:function(e){return function(e){var t=e.target.files[0],n=new FileReader;n.readAsDataURL(e.target.files[0]),n.onload=function(e){var r={dataReq:{data:n.result.split(",")[1],name:t.name,type:t.type},fname:"uploadFilesToGoogleDrive"};fetch("https://script.google.com/macros/s/AKfycbwYKgy85mYgpiT7U3mV2T6vum0yKg_I-AAJegLuNfeosEO_HligOW_ic_M1mW8pUqk/exec",{method:"POST",body:JSON.stringify(r)}).then((function(e){return e.json()})).then((function(e){e.id&&(Le.success("\u09ab\u09be\u0987\u09b2 \u0986\u09aa\u09b2\u09cb\u09a1 \u09b9\u09df\u09c7\u099b\u09c7"),s(e.id))})).catch((function(e){return console.log(e)}))}}(e)}})]}),(0,Me.jsxs)("div",{class:"form-control w-80",children:[(0,Me.jsx)("label",{class:"label",children:(0,Me.jsx)("span",{class:"label-text",children:"\u0989\u09a4\u09cd\u09a4\u09b0 \u09a8\u0982"})}),(0,Me.jsx)("input",{name:"answer_no",type:"text",placeholder:"\u0989\u09a4\u09cd\u09a4\u09b0 \u09a8\u0982",class:"input input-bordered w-full max-w-xs"})]}),(0,Me.jsx)("button",{disabled:!i,className:"btn btn-md btn-accent text-white my-4 rounded-md",type:"submit",children:"\u09aa\u09cd\u09b0\u09b6\u09cd\u09a8 \u09af\u09cb\u0997 \u0995\u09b0\u09c1\u09a8"})]})]})},Ke=function(){var e=u((0,a.useState)([]),2),t=e[0],n=e[1];(0,a.useEffect)((function(){fetch("http://128.140.52.151:5000/get_qa_categories").then((function(e){return e.json()})).then((function(e){n(e)}))}),[t]);return(0,Me.jsxs)("div",{children:[(0,Me.jsx)("h1",{className:"text-3xl border-b-4 border-accent mt-28 inline-block",children:"\u098f\u0995\u099f\u09bf \u09a8\u09a4\u09c1\u09a8 \u09aa\u09cd\u09b0\u09b6\u09cd\u09a8-\u0989\u09a4\u09cd\u09a4\u09b0 \u09ac\u09bf\u09ad\u09be\u0997 \u09af\u09cb\u0997 \u0995\u09b0\u09c1\u09a8"}),(0,Me.jsxs)("form",{onSubmit:function(e){e.preventDefault();var t=e.target.category.value;console.log(t);var n={categoryName:t};fetch("http://128.140.52.151:5000/qa_categories",{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify(n)}).then((function(e){return e.json()})).then((function(t){console.log(t),e.target.reset()}))},className:"mt-16 flex justify-center items-center flex-col",children:[(0,Me.jsxs)("div",{class:"form-control w-80",children:[(0,Me.jsx)("label",{class:"label",children:(0,Me.jsx)("span",{class:"label-text",children:"\u09ac\u09bf\u09ad\u09be\u0997\u09c7\u09b0 \u09a8\u09be\u09ae"})}),(0,Me.jsx)("input",{name:"category",type:"text",placeholder:"\u09ac\u09bf\u09ad\u09be\u0997\u09c7\u09b0 \u09a8\u09be\u09ae \u09b2\u09bf\u0996\u09c1\u09a8",class:"input input-bordered w-full max-w-xs"})]}),(0,Me.jsx)("button",{className:"btn btn-md btn-accent text-white mt-4 rounded-md",type:"submit",children:"\u09ac\u09bf\u09ad\u09be\u0997 \u09af\u09cb\u0997 \u0995\u09b0\u09c1\u09a8"})]}),(0,Me.jsx)("div",{class:"overflow-x-auto my-8",children:(0,Me.jsxs)("table",{class:"table w-full",children:[(0,Me.jsx)("thead",{children:(0,Me.jsxs)("tr",{children:[(0,Me.jsx)("th",{children:"\u0995\u09cd\u09b0\u09ae\u09bf\u0995"}),(0,Me.jsx)("th",{children:"\u09ac\u09bf\u09ad\u09be\u0997\u09c7\u09b0 \u09a8\u09be\u09ae"}),(0,Me.jsx)("th",{children:"\u098f\u0995\u09b6\u09a8"})]})}),(0,Me.jsx)("tbody",{children:t.map((function(e,t){return(0,Me.jsxs)("tr",{children:[(0,Me.jsx)("td",{children:t+1}),(0,Me.jsx)("td",{children:e.categoryName}),(0,Me.jsx)("td",{children:(0,Me.jsx)("button",{className:"btn btn-xs btn-error text-white",children:"\u09ae\u09c1\u099b\u09c7 \u09ab\u09c7\u09b2\u09c1\u09a8"})})]})}))})]})})]})};function qe(){return qe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},qe.apply(this,arguments)}function Ye(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}var Je=["onClick","reloadDocument","replace","state","target","to"];function Qe(e){var t=e.basename,n=e.children,r=e.window,s=(0,a.useRef)();null==s.current&&(s.current=function(e){void 0===e&&(e={});var t=e.window,n=void 0===t?document.defaultView:t,r=n.history;function a(){var e=n.location,t=e.pathname,i=e.search,a=e.hash,s=r.state||{};return[s.idx,d({pathname:t,search:i,hash:a,state:s.usr||null,key:s.key||"default"})]}var s=null;n.addEventListener(f,(function(){if(s)x.call(s),s=null;else{var e=i.Pop,t=a(),n=t[0],r=t[1];if(x.length){if(null!=n){var o=u-n;o&&(s={action:e,location:r,retry:function(){A(-1*o)}},A(o))}}else S(e)}}));var o=i.Pop,c=a(),u=c[0],b=c[1],k=v(),x=v();function w(e){return"string"===typeof e?e:g(e)}function T(e,t){return void 0===t&&(t=null),d(l({pathname:b.pathname,hash:"",search:""},"string"===typeof e?y(e):e,{state:t,key:m()}))}function E(e,t){return[{usr:e.state,key:e.key,idx:t},w(e)]}function _(e,t,n){return!x.length||(x.call({action:e,location:t,retry:n}),!1)}function S(e){o=e;var t=a();u=t[0],b=t[1],k.call({action:o,location:b})}function A(e){r.go(e)}null==u&&(u=0,r.replaceState(l({},r.state,{idx:u}),""));var C={get action(){return o},get location(){return b},createHref:w,push:function e(t,a){var s=i.Push,o=T(t,a);if(_(s,o,(function(){e(t,a)}))){var c=E(o,u+1),l=c[0],d=c[1];try{r.pushState(l,"",d)}catch(h){n.location.assign(d)}S(s)}},replace:function e(t,n){var a=i.Replace,s=T(t,n);if(_(a,s,(function(){e(t,n)}))){var o=E(s,u),c=o[0],l=o[1];r.replaceState(c,"",l),S(a)}},go:A,back:function(){A(-1)},forward:function(){A(1)},listen:function(e){return k.push(e)},block:function(e){var t=x.push(e);return 1===x.length&&n.addEventListener(h,p),function(){t(),x.length||n.removeEventListener(h,p)}}};return C}({window:r}));var o=s.current,c=u((0,a.useState)({action:o.action,location:o.location}),2),b=c[0],k=c[1];return(0,a.useLayoutEffect)((function(){return o.listen(k)}),[o]),(0,a.createElement)(K,{basename:t,children:n,location:b.location,navigationType:b.action,navigator:o})}var Xe=(0,a.forwardRef)((function(e,t){var n=e.onClick,r=e.reloadDocument,i=e.replace,s=void 0!==i&&i,o=e.state,c=e.target,u=e.to,l=Ye(e,Je),d=M(u),h=function(e,t){var n=void 0===t?{}:t,r=n.target,i=n.replace,s=n.state,o=U(),c=F(),u=G(e);return(0,a.useCallback)((function(t){if(0===t.button&&(!r||"_self"===r)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(t)){t.preventDefault();var n=!!i||g(c)===g(u);o(e,{replace:n,state:s})}}),[c,o,u,i,s,r,e])}(u,{replace:s,state:o,target:c});return(0,a.createElement)("a",qe({},l,{href:d,onClick:function(e){n&&n(e),e.defaultPrevented||r||h(e)},ref:t,target:c}))}));var Ze=function(){return(0,Me.jsxs)("div",{children:[(0,Me.jsx)("h1",{className:"mt-40 font-bold",children:"\u09ae\u09be\u09a6\u09b0\u09be\u09b8\u09be-\u098f-\u099c\u09be\u09b2\u09be\u09b2 \u0989\u09a6\u09cd\u09a6\u09c0\u09a8 \u09b0\u09c1\u09ae\u09c0\u09b0 \u09a1\u09cd\u09af\u09be\u09b6\u09ac\u09cb\u09b0\u09cd\u09a1/\u098f\u09a1\u09ae\u09bf\u09a8 \u09aa\u09cd\u09af\u09be\u09a8\u09c7\u09b2 \u098f \u09b8\u09cd\u09ac\u09be\u0997\u09a4\u09ae"}),(0,Me.jsx)("h2",{children:"\u09ac\u09be\u09ae \u09a6\u09bf\u0995 (\u0995\u09ae\u09cd\u09aa\u09bf\u0989\u099f\u09be\u09b0) \u0985\u09a5\u09ac\u09be \u09a1\u09be\u09a8 \u09a6\u09bf\u0995\u09c7\u09b0 \u0989\u09aa\u09b0\u09c7\u09b0 \u0995\u09cb\u09a8\u09be (\u09ae\u09cb\u09ac\u09be\u0987\u09b2) \u09a5\u09c7\u0995\u09c7 \u0985\u09aa\u09b6\u09a8 \u09ac\u09be\u099b\u09be\u0987 \u0995\u09b0\u09c1\u09a8 "})]})},$e=function(){return(0,Me.jsxs)("div",{class:"drawer drawer-mobile",children:[(0,Me.jsx)("input",{id:"my-drawer-2",type:"checkbox",class:"drawer-toggle"}),(0,Me.jsx)("div",{class:"drawer-content text-center",children:(0,Me.jsx)("div",{className:"w-11/12 mx-auto",children:(0,Me.jsx)(z,{})})}),(0,Me.jsxs)("div",{class:"drawer-side mt-20",children:[(0,Me.jsx)("label",{for:"my-drawer-2",class:"drawer-overlay"}),(0,Me.jsxs)("ul",{class:"menu p-4 overflow-y-auto w-80 bg-accent text-white font-semibold",children:[(0,Me.jsx)("li",{className:"bg-blue-400",children:(0,Me.jsx)(Xe,{to:"/dashboard/addcategory",children:"\u09ac\u09df\u09be\u09a8\u09c7\u09b0 \u09ac\u09bf\u09ad\u09be\u0997 \u09af\u09cb\u0997 \u0995\u09b0\u09c1\u09a8"})}),(0,Me.jsx)("li",{className:"bg-blue-400",children:(0,Me.jsx)(Xe,{to:"/dashboard/addsubject",children:"\u09ac\u09df\u09be\u09a8\u09c7\u09b0 \u09ac\u09bf\u09b7\u09df \u09af\u09cb\u0997 \u0995\u09b0\u09c1\u09a8"})}),(0,Me.jsx)("li",{className:"bg-blue-400",children:(0,Me.jsx)(Xe,{to:"/dashboard/add_qa_category",children:"\u09aa\u09cd\u09b0\u09b6\u09cd\u09a8-\u0989\u09a4\u09cd\u09a4\u09b0 \u09ac\u09bf\u09ad\u09be\u0997 \u09af\u09cb\u0997 \u0995\u09b0\u09c1\u09a8"})}),(0,Me.jsx)("li",{className:"bg-red-300",children:(0,Me.jsx)(Xe,{to:"/dashboard/addaudio",children:"\u09ac\u09df\u09be\u09a8\u09c7\u09b0 \u0993\u09a1\u09bf\u0993 \u09af\u09cb\u0997 \u0995\u09b0\u09c1\u09a8"})}),(0,Me.jsx)("li",{className:"bg-red-300",children:(0,Me.jsx)(Xe,{to:"/dashboard/add_qa_audio",children:"\u09aa\u09cd\u09b0\u09b6\u09cd\u09a8-\u0989\u09a4\u09cd\u09a4\u09b0 \u0993\u09a1\u09bf\u0993 \u09af\u09cb\u0997 \u0995\u09b0\u09c1\u09a8"})}),(0,Me.jsx)("li",{className:"bg-red-300",children:(0,Me.jsx)(Xe,{to:"/dashboard/add_kobita_audio",children:"\u0995\u09ac\u09bf\u09a4\u09be\u09b0 \u0993\u09a1\u09bf\u0993 \u09af\u09cb\u0997 \u0995\u09b0\u09c1\u09a8"})}),(0,Me.jsx)("li",{className:"bg-red-300",children:(0,Me.jsx)(Xe,{to:"/dashboard/add_short_audio",children:"\u099b\u09cb\u099f \u09ac\u09df\u09be\u09a8\u09c7\u09b0 \u0993\u09a1\u09bf\u0993 \u09af\u09cb\u0997 \u0995\u09b0\u09c1\u09a8"})}),(0,Me.jsx)("li",{className:"bg-red-300",children:(0,Me.jsx)(Xe,{to:"/dashboard/add_books",children:"\u09ac\u0987\u09df\u09c7\u09b0 \u09ab\u09be\u0987\u09b2 \u09af\u09cb\u0997 \u0995\u09b0\u09c1\u09a8"})}),(0,Me.jsx)("li",{className:"bg-red-300",children:(0,Me.jsx)(Xe,{to:"/dashboard/add_notice",children:"\u09a8\u09cb\u099f\u09bf\u09b6 \u09af\u09cb\u0997 \u0995\u09b0\u09c1\u09a8"})}),(0,Me.jsx)("li",{className:"bg-orange-300",children:(0,Me.jsx)(Xe,{to:"/dashboard/boyan_list",children:"\u09ac\u09df\u09be\u09a8\u09c7\u09b0 \u0993\u09a1\u09bf\u0993 \u09b8\u09ae\u09cd\u09aa\u09be\u09a6\u09a8\u09be"})}),(0,Me.jsx)("li",{className:"bg-orange-300",children:(0,Me.jsx)(Xe,{to:"/dashboard/qa_list",children:"\u09aa\u09cd\u09b0\u09b6\u09cd\u09a8-\u0989\u09a4\u09cd\u09a4\u09b0 \u0993\u09a1\u09bf\u0993 \u09b8\u09ae\u09cd\u09aa\u09be\u09a6\u09a8\u09be"})}),(0,Me.jsx)("li",{className:"bg-orange-300",children:(0,Me.jsx)(Xe,{to:"/dashboard/kobita_list",children:"\u0995\u09ac\u09bf\u09a4\u09be\u09b0 \u0993\u09a1\u09bf\u0993 \u09b8\u09ae\u09cd\u09aa\u09be\u09a6\u09a8\u09be"})})]})]})]})};function et(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function tt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Q(r.key),r)}}function nt(e,t,n){return t&&tt(e.prototype,t),n&&tt(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function rt(e,t){return rt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},rt(e,t)}function it(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&rt(e,t)}function at(e){return at=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},at(e)}function st(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function ot(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ct(e,t){if(t&&("object"===J(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return ot(e)}function ut(e){var t=st();return function(){var n,r=at(e);if(t){var i=at(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return ct(this,n)}}var lt=function(e){it(n,e);var t=ut(n);function n(e){var r;return et(this,n),(r=t.call(this,e)).handleCompass=function(e){e.webkitCompassHeading?r.setState({angle:e.webkitCompassHeading}):r.setState({angle:e.alpha})},r.state={angle:0},r}return nt(n,[{key:"componentDidMount",value:function(){this.watchCompass()}},{key:"componentWillUnmount",value:function(){this.stopWatchingCompass()}},{key:"watchCompass",value:function(){window.DeviceOrientationEvent?window.addEventListener("deviceorientation",this.handleCompass):console.warn("Compass not supported in this browser.")}},{key:"stopWatchingCompass",value:function(){window.DeviceOrientationEvent&&window.removeEventListener("deviceorientation",this.handleCompass)}},{key:"render",value:function(){var e=this.state.angle;return(0,Me.jsx)("div",{className:"compass my-40",children:(0,Me.jsx)("div",{className:"arrow",style:{transform:"rotate(".concat(e,"deg)")}})})}}]),n}(a.Component),dt=function(){return(0,Me.jsxs)("div",{className:"my-28 p-8",children:[(0,Me.jsx)("h3",{className:"text-xl font-bold",children:"\u09b8\u09ac\u09c1\u099c\u09c7\u09b0 \u09b8\u09ae\u09be\u09b0\u09cb\u09b9\u09c7 \u0997\u09a1\u09bc\u09c7 \u0993\u09a0\u09be \u0986\u09aa\u09a8\u09be\u09a6\u09c7\u09b0 \u09aa\u09b0\u09bf\u099a\u09bf\u09a4  \u09b8\u09c1\u09a8\u09be\u09ae\u09a7\u09a8\u09cd\u09af \u09a6\u09cd\u09ac\u09c0\u09a8\u09bf \u09b6\u09bf\u0995\u09cd\u09b7\u09be \u09aa\u09cd\u09b0\u09a4\u09bf\u09b7\u09cd\u09a0\u09be\u09a8 \u09ae\u09be\u09a6\u09b0\u09be\u09b8\u09be-\u098f \u099c\u09be\u09b2\u09be\u09b2\u09c1\u09a6\u09cd\u09a6\u09c0\u09a8 \u09b0\u09c1\u09ae\u09c0 \u098f\u09b0 \u09b8\u0995\u09b2 \u09ac\u09bf\u09ad\u09be\u0997\u09c7 \u09ad\u09b0\u09cd\u09a4\u09bf \u099a\u09b2\u09bf\u09a4\u09c7\u099b\u09c7\u0964"}),(0,Me.jsx)("h4",{className:"font-semibold text-left mt-4",children:"\u09ac\u09bf\u09ad\u09be\u0997 \u09b8\u09ae\u09c2\u09b9\u0983"}),(0,Me.jsx)("p",{className:"text-justify",children:"\u09a8\u09c2\u09b0\u09be\u09a8\u09c0 \u09ae\u0995\u09cd\u09a4\u09ac\u0964\u09ac\u09bf\u09b6\u09c1\u09a6\u09cd\u09a7 \u09a8\u09be\u099c\u09c7\u09b0\u09be\u0964\u09b9\u09c7\u09ab\u099c\u099c\u09c1\u09b2 \u0995\u09cb\u09b0\u0986\u09a8 \u0993 \u0995\u09bf\u09a4\u09be\u09ac \u09ac\u09bf\u09ad\u09be\u0997\u09c7\u09b0 \u09aa\u09cd\u09b0\u09a5\u09ae \u09a6\u09c1\u0987 \u099c\u09be\u09ae\u09be\u09a4  \u09a4\u09a5\u09be \u0996\u09c2\u09b8\u09c1\u09b8\u09c0 \u0993 \u09a4\u09be\u0987\u09b8\u09c0\u09b0 \u099c\u09be\u09ae\u09be\u09a4\u09c7 \u09ad\u09b0\u09cd\u09a4\u09bf \u099a\u09b2\u09bf\u09a4\u09c7\u099b\u09c7\u0964 \u09ae\u09a8\u09c7 \u09b0\u09be\u0996\u09be\u09ac\u09c7\u09a8! \u09ae\u09be\u09a6\u09b0\u09be\u09b8\u09be-\u098f \u099c\u09be\u09b2\u09be\u09b2\u09c1\u09a6\u09cd\u09a6\u09c0\u09a8 \u09b0\u09c1\u09ae\u09c0 \u09b8\u09ac\u09c1\u099c \u09b6\u09cd\u09af\u09be\u09ae\u09b2 \u0993 \u09a6\u0996\u09bf\u09a8\u09be \u09b9\u09be\u0993\u09af\u09bc\u09be\u09b0 \u09ae\u09a8\u09ae\u09c1\u0997\u09cd\u09a7\u0995\u09b0 \u09a8\u09bf\u09b0\u09bf\u09ac\u09bf\u09b2\u09bf \u09aa\u09b0\u09bf\u09ac\u09c7\u09b6\u09c7 \u09a4\u09be\u09b2\u09c0\u09ae \u0993 \u09a4\u09b0\u09ac\u09bf\u09df\u09be\u09a4\u09c7\u09b0 \u09b8\u09ae\u09a8\u09cd\u09ac\u09af\u09bc\u09c7 \u0997\u09a1\u09bc\u09c7 \u0993\u09a0\u09be  \u098f\u0995 \u0996\u09be\u09b2\u09c7\u099b \u09a6\u09cd\u09ac\u09c0\u09a8\u09bf \u09b6\u09bf\u0995\u09cd\u09b7\u09be \u09aa\u09cd\u09b0\u09a4\u09bf\u09b7\u09cd\u09a0\u09be\u09a8\u0964 \u09af\u09c7\u0996\u09be\u09a8\u09c7 \u0986\u09aa\u09a8\u09be\u09b0 \u09b8\u09a8\u09cd\u09a4\u09be\u09a8\u0995\u09c7 \u0986\u09a6\u09b0\u09cd\u09b6\u09ac\u09be\u09a8 \u09ae\u09be\u09a8\u09c1\u09b7 \u09b9\u09bf\u09b8\u09be\u09ac\u09c7 \u0997\u09dc\u09c7 \u09a4\u09cb\u09b2\u09be\u09b0 \u09b2\u0995\u09cd\u09b7\u09cd\u09af\u09c7 \u09b2\u09c7\u0996\u09be \u09aa\u09dc\u09be\u09b0 \u09b8\u09be\u09a5\u09c7 \u09b8\u09be\u09a5\u09c7 \u0986\u09ae\u09b2\u09bf \u099c\u09c0\u09ac\u09a8 \u09a4\u09c8\u09b0\u09c0\u09b0 \u09aa\u09c2\u09b0\u09cd\u09a3\u09be\u0999\u09cd\u0997 \u09ab\u09bf\u0995\u09bf\u09b0 \u0995\u09b0\u09be \u09b9\u09af\u09bc\u0964 \u09ac\u09bf\u09b6\u09c7\u09b7 \u09a6\u09cd\u09b0\u09b7\u09cd\u099f\u09ac\u09cd\u09af\u0983 \u09ae\u09c7\u09a7\u09be\u09ac\u09c0.\u098f\u09a4\u09bf\u09ae.\u0997\u09b0\u09bf\u09ac.\u0993 \u0985\u09b8\u09b9\u09be\u09af\u09bc \u099b\u09be\u098f\u09a6\u09c7\u09b0 \u099c\u09a8\u09cd\u09af \u09ac\u09bf\u09b6\u09c7\u09b7 \u09b8\u09c1\u09af\u09cb\u0997 \u09b0\u09df\u09c7\u099b\u09c7\u0964"}),(0,Me.jsx)("h4",{className:"font-semibold text-left mt-4",children:"\u09af\u09be\u09a4\u09be\u09df\u09be\u09a4\u0983"}),(0,Me.jsxs)("address",{className:"text-left",children:["\u09e7\u0964\u099c\u09df\u09aa\u09be\u09dc\u09be \u0995\u09b2\u09c7\u099c \u09ae\u09cb\u09dc \u0993 \u09a6\u09cb\u09b9\u09be\u09b0 \u09ac\u09be\u099c\u09be\u09b0 \u09b9\u09a4\u09c7 \u09a8\u09bf\u0995\u09dc\u09be \u0997\u09be\u09b0\u09cd\u09ae\u09c7\u09a8\u09cd\u099f\u09b8\u09c7\u09b0 \u09b8\u09be\u09ae\u09a8\u09c7 \u09b0\u09c1\u09ae\u09c0 \u09a8\u0997\u09b0\u0964",(0,Me.jsx)("br",{}),"\u09e8\u0964\u09a8\u09ac\u09be\u09ac\u0997\u099e\u09cd\u099c \u09a6\u09bf\u0998\u09bf\u09b0 \u09aa\u09be\u09dc \u09b9\u09a4\u09c7 \u0996\u09be\u09ae\u09be\u09b0 \u09ac\u09be\u09dc\u09c0\u09b0 \u09b8\u09be\u09ae\u09a8\u09c7 \u09b0\u09c1\u09ae\u09c0 \u09a8\u0997\u09b0\u0964 ",(0,Me.jsx)("br",{}),"\u09af\u09cb\u0997\u09be\u09af\u09cb\u0997 \u09a8\u09be\u09ae\u09cd\u09ac\u09be\u09b0\u0983 01758053022 ",(0,Me.jsx)("br",{}),"\u09ae\u09c1\u09ab\u09a4\u09bf \u09ae\u09c1\u09b9\u09be\u09ae\u09cd\u09ae\u09a6 \u09b6\u09ab\u09c0 \u09aa\u09cd\u09b0\u09bf\u09a8\u09cd\u09b8\u09bf\u09aa\u09be\u09b2 \u0985\u09a4\u09cd\u09b0 \u09ae\u09be\u09a6\u09cd\u09b0\u09be\u09b8\u09be\u0964"]})]})},ht=__webpack_require__.p+"static/media/madrasha.742529ae3a3e2c0ac0b4.webp",ft=function(){return(0,Me.jsxs)("div",{class:"hero min-h-screen",style:{backgroundImage:"url(".concat(ht,")")},children:[(0,Me.jsx)("div",{class:"hero-overlay bg-opacity-60"}),(0,Me.jsx)("div",{class:"hero-content text-center text-neutral-content",children:(0,Me.jsxs)("div",{class:"max-w-md",children:[(0,Me.jsx)("h1",{class:"mb-5 text-5xl font-bold",children:"\u09ad\u09b0\u09cd\u09a4\u09bf \u099a\u09b2\u099b\u09c7 \u09ad\u09b0\u09cd\u09a4\u09bf \u099a\u09b2\u099b\u09c7"}),(0,Me.jsxs)("p",{class:"mb-5 font-semibold",children:["\u09b8\u09ac\u09c1\u099c\u09c7\u09b0 \u09b8\u09ae\u09be\u09b0\u09cb\u09b9\u09c7 \u0997\u09a1\u09bc\u09c7 \u0993\u09a0\u09be \u0986\u09aa\u09a8\u09be\u09a6\u09c7\u09b0 \u09aa\u09b0\u09bf\u099a\u09bf\u09a4  \u09b8\u09c1\u09a8\u09be\u09ae\u09a7\u09a8\u09cd\u09af \u09a6\u09cd\u09ac\u09c0\u09a8\u09bf \u09b6\u09bf\u0995\u09cd\u09b7\u09be \u09aa\u09cd\u09b0\u09a4\u09bf\u09b7\u09cd\u09a0\u09be\u09a8 ",(0,Me.jsx)("span",{className:"font-bold",children:"\u09ae\u09be\u09a6\u09b0\u09be\u09b8\u09be-\u098f \u099c\u09be\u09b2\u09be\u09b2\u09c1\u09a6\u09cd\u09a6\u09c0\u09a8 \u09b0\u09c1\u09ae\u09c0"})," \u098f\u09b0 \u09b8\u0995\u09b2 \u09ac\u09bf\u09ad\u09be\u0997\u09c7 \u09ad\u09b0\u09cd\u09a4\u09bf \u099a\u09b2\u099b\u09c7\u0964 "]}),(0,Me.jsx)(Xe,{to:"/notice",class:"btn btn-accent font-bolder text-white",children:"\u09ac\u09bf\u09b8\u09cd\u09a4\u09be\u09b0\u09bf\u09a4 \u099c\u09be\u09a8\u09c1\u09a8"})]})})]})},pt=function(e){e.setAudioData;return(0,Me.jsxs)("div",{children:[(0,Me.jsx)(ft,{}),(0,Me.jsx)(dt,{})]})},vt=function(){return(0,Me.jsx)("div",{className:"my-40 flex justify-center items-center",children:(0,Me.jsx)("h1",{className:"text-2xl font-bold",children:"\u0995\u09be\u099c \u099a\u09b2\u099b\u09c7"})})},mt=function(e){var t=e.audioData;return(0,Me.jsxs)("div",{children:[(0,Me.jsx)("input",{type:"checkbox",id:"my-modal-6",class:"modal-toggle"}),(0,Me.jsx)("div",{class:"modal modal-bottom sm:modal-middle",children:(0,Me.jsxs)("div",{class:"modal-box",children:[(0,Me.jsxs)("h3",{class:"font-bold text-lg",children:[null===t||void 0===t?void 0:t.name," ",null===t||void 0===t?void 0:t.date]}),(0,Me.jsx)("audio",{className:"mx-auto mt-4",src:null===t||void 0===t?void 0:t.link,controls:!0,autoPlay:!0}),(0,Me.jsx)("div",{class:"modal-action",children:(0,Me.jsx)("label",{for:"my-modal-6",class:"btn btn-sm btn-circle btn-accent font-bold text-3xl text-white absolute right-2 top-2",children:(0,Me.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:(0,Me.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M20 12H4"})})})})]})})]})},gt={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},yt=a.createContext&&a.createContext(gt),bt=function(){return bt=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},bt.apply(this,arguments)},kt=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};function xt(e){return e&&e.map((function(e,t){return a.createElement(e.tag,bt({key:t},e.attr),xt(e.child))}))}function wt(e){return function(t){return a.createElement(Tt,bt({attr:bt({},e.attr)},t),xt(e.child))}}function Tt(e){var t=function(t){var n,r=e.attr,i=e.size,s=e.title,o=kt(e,["attr","size","title"]),c=i||t.size||"1em";return t.className&&(n=t.className),e.className&&(n=(n?n+" ":"")+e.className),a.createElement("svg",bt({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,r,o,{className:n,style:bt(bt({color:e.color||t.color},t.style),e.style),height:c,width:c,xmlns:"http://www.w3.org/2000/svg"}),s&&a.createElement("title",null,s),e.children)};return void 0!==yt?a.createElement(yt.Consumer,null,(function(e){return t(e)})):t(gt)}function Et(e){return wt({tag:"svg",attr:{viewBox:"0 0 1024 1024"},child:[{tag:"path",attr:{d:"M512 624c93.9 0 170-75.2 170-168V232c0-92.8-76.1-168-170-168s-170 75.2-170 168v224c0 92.8 76.1 168 170 168zm330-170c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8 0 140.3-113.7 254-254 254S258 594.3 258 454c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8 0 168.7 126.6 307.9 290 327.6V884H326.7c-13.7 0-24.7 14.3-24.7 32v36c0 4.4 2.8 8 6.2 8h407.6c3.4 0 6.2-3.6 6.2-8v-36c0-17.7-11-32-24.7-32H548V782.1c165.3-18 294-158 294-328.1z"}}]})(e)}function _t(e){return wt({tag:"svg",attr:{viewBox:"0 0 1024 1024"},child:[{tag:"path",attr:{d:"M946.5 505L534.6 93.4a31.93 31.93 0 0 0-45.2 0L77.5 505c-12 12-18.8 28.3-18.8 45.3 0 35.3 28.7 64 64 64h43.4V908c0 17.7 14.3 32 32 32H448V716h112v224h265.9c17.7 0 32-14.3 32-32V614.3h43.4c17 0 33.3-6.7 45.3-18.8 24.9-25 24.9-65.5-.1-90.5z"}}]})(e)}function St(e){return wt({tag:"svg",attr:{viewBox:"0 0 1024 1024"},child:[{tag:"path",attr:{d:"M880 112c-3.8 0-7.7.7-11.6 2.3L292 345.9H128c-8.8 0-16 7.4-16 16.6v299c0 9.2 7.2 16.6 16 16.6h101.6c-3.7 11.6-5.6 23.9-5.6 36.4 0 65.9 53.8 119.5 120 119.5 55.4 0 102.1-37.6 115.9-88.4l408.6 164.2c3.9 1.5 7.8 2.3 11.6 2.3 16.9 0 32-14.2 32-33.2V145.2C912 126.2 897 112 880 112zM344 762.3c-26.5 0-48-21.4-48-47.8 0-11.2 3.9-21.9 11-30.4l84.9 34.1c-2 24.6-22.7 44.1-47.9 44.1z"}}]})(e)}function At(e){return wt({tag:"svg",attr:{viewBox:"0 0 1024 1024"},child:[{tag:"path",attr:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 708c-22.1 0-40-17.9-40-40s17.9-40 40-40 40 17.9 40 40-17.9 40-40 40zm62.9-219.5a48.3 48.3 0 0 0-30.9 44.8V620c0 4.4-3.6 8-8 8h-48c-4.4 0-8-3.6-8-8v-21.5c0-23.1 6.7-45.9 19.9-64.9 12.9-18.6 30.9-32.8 52.1-40.9 34-13.1 56-41.6 56-72.7 0-44.1-43.1-80-96-80s-96 35.9-96 80v7.6c0 4.4-3.6 8-8 8h-48c-4.4 0-8-3.6-8-8V420c0-39.3 17.2-76 48.4-103.3C430.4 290.4 470 276 512 276s81.6 14.5 111.6 40.7C654.8 344 672 380.7 672 420c0 57.8-38.1 109.8-97.1 132.5z"}}]})(e)}function Ct(e){return wt({tag:"svg",attr:{viewBox:"0 0 1024 1024"},child:[{tag:"path",attr:{d:"M505.7 661a8 8 0 0 0 12.6 0l112-141.7c4.1-5.2.4-12.9-6.3-12.9h-74.1V168c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v338.3H400c-6.7 0-10.4 7.7-6.3 12.9l112 141.8zM878 626h-60c-4.4 0-8 3.6-8 8v154H214V634c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v198c0 17.7 14.3 32 32 32h684c17.7 0 32-14.3 32-32V634c0-4.4-3.6-8-8-8z"}}]})(e)}function It(e){return wt({tag:"svg",attr:{viewBox:"0 0 1024 1024"},child:[{tag:"path",attr:{d:"M762 164h-64c-4.4 0-8 3.6-8 8v688c0 4.4 3.6 8 8 8h64c4.4 0 8-3.6 8-8V172c0-4.4-3.6-8-8-8zm-508 0v72.4c0 9.5 4.2 18.4 11.4 24.5L564.6 512 265.4 763.1c-7.2 6.1-11.4 15-11.4 24.5V860c0 6.8 7.9 10.5 13.1 6.1L689 512 267.1 157.9A7.95 7.95 0 0 0 254 164z"}}]})(e)}function Rt(e){return wt({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"g",attr:{},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M4.929 2.929l1.414 1.414A7.975 7.975 0 0 0 4 10c0 2.21.895 4.21 2.343 5.657L4.93 17.07A9.969 9.969 0 0 1 2 10a9.969 9.969 0 0 1 2.929-7.071zm14.142 0A9.969 9.969 0 0 1 22 10a9.969 9.969 0 0 1-2.929 7.071l-1.414-1.414A7.975 7.975 0 0 0 20 10c0-2.21-.895-4.21-2.343-5.657L19.07 2.93zM7.757 5.757l1.415 1.415A3.987 3.987 0 0 0 8 10c0 1.105.448 2.105 1.172 2.828l-1.415 1.415A5.981 5.981 0 0 1 6 10c0-1.657.672-3.157 1.757-4.243zm8.486 0A5.981 5.981 0 0 1 18 10a5.981 5.981 0 0 1-1.757 4.243l-1.415-1.415A3.987 3.987 0 0 0 16 10a3.987 3.987 0 0 0-1.172-2.828l1.415-1.415zM12 12a2 2 0 1 1 0-4 2 2 0 0 1 0 4zm0 2c.58 0 1.077.413 1.184.983L14.5 22h-5l1.316-7.017c.107-.57.604-.983 1.184-.983z"}}]}]})(e)}function Pt(e){return wt({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M168.8 32.89l-32.6 32.53 21.3 21.17L190 54.08zm33.9 33.96l-9.9 9.91 123 123.04 9.9-9.9zm159.4 18.06c-3.7 0-7.4.1-10.9.3-31.9 1.78-56.7 11.76-78.3 26.39l65.5 65.6c3.5 7.3 52 96.2 65.5 123.3-9.7-6.4-123.4-65.4-123.4-65.4l-15.3-15.2v140.3c23.9-14.6 50.1-27.7 83.6-31.2 37.5-4 83.5 4.3 144.2 33.1V118.7c-51.7-22.99-93.3-32.89-127.2-33.69-1.3 0-2.5-.11-3.7-.1zm-230.8 1.03C100.4 88.93 63.44 99 19.05 118.7v243.4C79.85 333.3 125.8 325 163.3 329c33 5.2 58.1 15.8 83.6 31.2V201.6c-38.6-38.5-77.1-77.1-115.6-115.66zm48.8 3.55l-9.9 9.89 123 123.02 9.9-9.9zM336 205.1l-27.5 27.5 55.1 27.6zM143.8 346.7c-32 .3-71.85 9.8-124.75 36v42.5c60.8-28.8 106.75-37.1 144.25-33.1 18.6 2 34.9 6.9 49.8 13.3-4.7 6.1-9.3 13.3-13.9 21.7h117.2c-6-8.2-11.8-15.4-17.7-21.6 15-6.5 31.4-11.4 50.1-13.4 37.5-4 83.5 4.3 144.2 33.1v-42.5c-53.1-26.3-93.1-35.9-125.2-36h-3.1c-4.8.1-9.4.4-13.9.9-34 3.6-59.6 18-85.6 34.4-5.7-.8-13-1.8-18.3-.9-27.2-16.2-58.2-30.4-85.5-33.5-5.6-.6-11.5-.9-17.6-.9z"}}]})(e)}function Dt(e){return wt({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M247 27v80h18V27h-18zm-63.992 53.602l-16.631 6.886 15.309 36.955 16.628-6.886-15.306-36.955zm145.984 0l-15.306 36.955 16.628 6.886 15.309-36.955-16.63-6.886zM77.795 92.068l-12.727 12.727 56.569 56.568 12.726-12.726-56.568-56.569zm356.41 0l-56.568 56.569 12.726 12.726 56.569-56.568-12.727-12.727zM256 145.994a118.919 118.919 0 0 0-59.5 15.95c-34.215 19.754-56.177 55.048-59.129 94.056H374.63c-2.952-39.008-24.914-74.302-59.129-94.057a118.919 118.919 0 0 0-59.5-15.949zM66.488 195.377l-6.886 16.63 36.955 15.307 6.886-16.628-36.955-15.31zm379.024 0l-36.955 15.309 6.886 16.628 36.955-15.306-6.886-16.631zM24 274v18h464v-18H24zm200 62v64h-32l64 80 64-80h-32v-64h-64z"}}]})(e)}function Nt(e){return wt({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M19.875 3H4.125C2.953 3 2 3.897 2 5v14c0 1.103.953 2 2.125 2h15.75C21.047 21 22 20.103 22 19V5c0-1.103-.953-2-2.125-2zm0 16H4.125c-.057 0-.096-.016-.113-.016-.007 0-.011.002-.012.008L3.988 5.046c.007-.01.052-.046.137-.046h15.75c.079.001.122.028.125.008l.012 13.946c-.007.01-.052.046-.137.046z"}},{tag:"path",attr:{d:"M6 7h6v6H6zm7 8H6v2h12v-2h-4zm1-4h4v2h-4zm0-4h4v2h-4z"}}]})(e)}function Ot(e){return wt({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{d:"M21.731 2.269a2.625 2.625 0 00-3.712 0l-1.157 1.157 3.712 3.712 1.157-1.157a2.625 2.625 0 000-3.712zM19.513 8.199l-3.712-3.712-8.4 8.4a5.25 5.25 0 00-1.32 2.214l-.8 2.685a.75.75 0 00.933.933l2.685-.8a5.25 5.25 0 002.214-1.32l8.4-8.4z"}},{tag:"path",attr:{d:"M5.25 5.25a3 3 0 00-3 3v10.5a3 3 0 003 3h10.5a3 3 0 003-3V13.5a.75.75 0 00-1.5 0v5.25a1.5 1.5 0 01-1.5 1.5H5.25a1.5 1.5 0 01-1.5-1.5V8.25a1.5 1.5 0 011.5-1.5h5.25a.75.75 0 000-1.5H5.25z"}}]})(e)}function Lt(e){return wt({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M464 48c-67.61.29-117.87 9.6-154.24 25.69-27.14 12-37.76 21.08-37.76 51.84V448c41.57-37.5 78.46-48 224-48V48zM48 48c67.61.29 117.87 9.6 154.24 25.69 27.14 12 37.76 21.08 37.76 51.84V448c-41.57-37.5-78.46-48-224-48V48z"}}]})(e)}var Mt=function(){var e=u((0,a.useState)(),2),t=e[0],n=e[1];console.log(t);var r=window.location.href.split("/").pop(),i=F();return(0,a.useEffect)((function(){fetch("http://128.140.52.151:5000/getlive").then((function(e){return e.json()})).then((function(e){var t;return n(null===(t=e[0])||void 0===t?void 0:t.live)}))}),[]),(0,Me.jsx)("div",{className:"",children:"/mobile"===i.pathname?(0,Me.jsxs)("div",{style:{backgroundColor:"rgba(255, 99, 71, 0)"},className:"grid grid-cols-5 gap-px w-full mx-auto fixed bottom-px  shadow-xl",children:[(0,Me.jsx)(Xe,{to:"/mobile",className:"p-2 h-12 flex flex-col justify-center items-center  ",children:(0,Me.jsxs)("div",{className:"bg-white w-28   p-5 flex flex-col items-center hover:text-success",children:[(0,Me.jsx)(_t,{className:"text-xl text-black hover:text-success"}),(0,Me.jsx)("p",{className:"font-medium text-xs",children:"\u09b9\u09cb\u09ae"})]})}),(0,Me.jsx)(Xe,{to:"/new_topics",className:"p-2  h-12 flex flex-col justify-center items-center ",children:(0,Me.jsxs)("div",{className:"bg-white  w-28   p-5 flex flex-col items-center hover:text-success",children:[(0,Me.jsx)(Nt,{className:"text-xl text-black hover:text-success"}),(0,Me.jsx)("p",{className:"font-medium text-xs z-30",children:"\u09a8\u09a4\u09c1\u09a8 \u09ac\u09bf\u09b7\u09df"})]})}),(0,Me.jsx)(Xe,{to:"/mobile_live",className:"p-2  h-12 flex flex-col justify-center items-center",children:(0,Me.jsxs)("div",{className:"bg-white  w-28  p-4 flex flex-col items-center rounded-full hover:text-success ",children:[(0,Me.jsx)("p",{className:"text-xs font-medium",children:"\u09b2\u09be\u0987\u09ad"}),(0,Me.jsx)(Rt,{className:"text-2xl text-black hover:text-success  w-16"}),!0===t?(0,Me.jsx)("p",{className:"text-xs font-fold text-green-700 z-20 mb-4",children:"\u099a\u09be\u09b2\u09c1 \u0986\u099b\u09c7"}):(0,Me.jsx)("p",{className:"text-xs font-bold z-20 mb-4 text-red-700",children:"\u09ac\u09a8\u09cd\u09a7 \u0986\u099b\u09c7"})]})}),(0,Me.jsx)(Xe,{to:"/mobile_notice",className:"  p-2 h-12 flex flex-col justify-center items-center ",children:(0,Me.jsxs)("div",{className:"bg-white w-28  p-5 flex flex-col hover:text-success items-center",children:[(0,Me.jsx)(St,{className:"text-xl text-black hover:text-success"}),(0,Me.jsx)("p",{className:"font-medium text-xs",children:"\u09a8\u09cb\u099f\u09bf\u09b8"})]})}),(0,Me.jsx)(Xe,{to:"/register",className:"  p-2 h-12 flex flex-col justify-center items-center ",children:(0,Me.jsxs)("div",{className:"bg-white w-28  p-5 flex flex-col items-center hover:text-success",children:[(0,Me.jsx)(Pt,{className:"text-xl text-black hover:text-success"}),(0,Me.jsx)("p",{className:"font-medium text-xs",children:"\u09b0\u09c7\u099c\u09bf\u09b8\u09cd\u099f\u09be\u09b0"})]})})]}):"/mobile_boyans"===i.pathname?(0,Me.jsxs)("div",{style:{backgroundColor:"rgba(255, 99, 71, 0)"},className:"grid grid-cols-5 gap-px w-full shadow-2xl mx-auto fixed bottom-px",children:[(0,Me.jsx)(Xe,{to:"/mobile",className:"p-2 h-12 flex flex-col justify-center items-center  ",children:(0,Me.jsxs)("div",{className:"bg-gray-100 w-28   p-5 flex flex-col items-center hover:text-success",children:[(0,Me.jsx)(_t,{className:"text-xl text-black hover:text-success"}),(0,Me.jsx)("p",{className:"font-medium text-xs",children:"\u09b9\u09cb\u09ae"})]})}),(0,Me.jsx)(Xe,{to:"/answer_category",className:"p-2  h-12 flex flex-col justify-center items-center ",children:(0,Me.jsxs)("div",{className:"bg-gray-100  w-28  p-5 flex flex-col items-center hover:text-success",children:[(0,Me.jsx)(At,{className:"text-xl text-black hover:text-success"}),(0,Me.jsx)("p",{className:"font-medium text-xs",children:"\u09aa\u09cd\u09b0\u09b6\u09cd\u09a8 \u0989\u09a4\u09cd\u09a4\u09b0"})]})}),(0,Me.jsx)(Xe,{to:"/mobile_kobita",className:"p-2  h-12 flex flex-col justify-center items-center ",children:(0,Me.jsxs)("div",{className:"bg-gray-100  w-28  p-5 flex flex-col items-center hover:text-success",children:[(0,Me.jsx)(Ot,{className:"text-xl text-black hover:text-success"}),(0,Me.jsx)("p",{className:"font-medium text-xs",children:"\u0995\u09ac\u09bf\u09a4\u09be"})]})}),(0,Me.jsx)(Xe,{to:"/books",className:"p-2  h-12 flex flex-col justify-center items-center ",children:(0,Me.jsxs)("div",{className:"bg-gray-100  w-28  p-5 flex flex-col items-center hover:text-success",children:[(0,Me.jsx)(Lt,{className:"text-xl text-black hover:text-success"}),(0,Me.jsx)("p",{className:"font-medium text-xs",children:"\u0995\u09bf\u09a4\u09be\u09ac\u09be\u09a6\u09c0"})]})}),(0,Me.jsx)(Xe,{to:"/new_topics",className:"p-2  h-12 flex flex-col justify-center items-center ",children:(0,Me.jsxs)("div",{className:"bg-gray-100  w-28   p-5 flex flex-col items-center hover:text-success",children:[(0,Me.jsx)(Nt,{className:"text-xl text-black hover:text-success"}),(0,Me.jsx)("p",{className:"font-medium text-xs z-30",children:"\u09a8\u09a4\u09c1\u09a8 \u09ac\u09bf\u09b7\u09df"})]})})]}):"/mobile_answers"===i.pathname?(0,Me.jsxs)("div",{style:{backgroundColor:"rgba(255, 99, 71, 0)"},className:"grid grid-cols-5 gap-px w-full shadow-2xl mx-auto fixed bottom-px",children:[(0,Me.jsx)(Xe,{to:"/mobile",className:"p-2 h-12 flex flex-col justify-center items-center  ",children:(0,Me.jsxs)("div",{className:"bg-gray-100 w-28   p-5 flex flex-col items-center hover:text-success",children:[(0,Me.jsx)(_t,{className:"text-xl text-black hover:text-success"}),(0,Me.jsx)("p",{className:"font-medium text-xs",children:"\u09b9\u09cb\u09ae"})]})}),(0,Me.jsx)(Xe,{to:"/boyan_category",className:"p-2  h-12 flex flex-col justify-center items-center ",children:(0,Me.jsxs)("div",{className:"bg-gray-100  w-28  p-5 flex flex-col items-center hover:text-success",children:[(0,Me.jsx)(Et,{className:"text-xl text-black hover:text-success"}),(0,Me.jsx)("p",{className:"font-medium text-xs",children:"\u09ac\u09df\u09be\u09a8"})]})}),(0,Me.jsx)(Xe,{to:"/mobile_kobita",className:"p-2  h-12 flex flex-col justify-center items-center ",children:(0,Me.jsxs)("div",{className:"bg-gray-100  w-28  p-5 flex flex-col items-center hover:text-success",children:[(0,Me.jsx)(Ot,{className:"text-xl text-black hover:text-success"}),(0,Me.jsx)("p",{className:"font-medium text-xs",children:"\u0995\u09ac\u09bf\u09a4\u09be"})]})}),(0,Me.jsx)(Xe,{to:"/books",className:"p-2  h-12 flex flex-col justify-center items-center ",children:(0,Me.jsxs)("div",{className:"bg-gray-100  w-28  p-5 flex flex-col items-center hover:text-success",children:[(0,Me.jsx)(Lt,{className:"text-xl text-black hover:text-success"}),(0,Me.jsx)("p",{className:"font-medium text-xs",children:"\u0995\u09bf\u09a4\u09be\u09ac\u09be\u09a6\u09c0"})]})}),(0,Me.jsx)(Xe,{to:"/new_topics",className:"p-2  h-12 flex flex-col justify-center items-center ",children:(0,Me.jsxs)("div",{className:"bg-gray-100  w-28   p-5 flex flex-col items-center hover:text-success",children:[(0,Me.jsx)(Nt,{className:"text-xl text-black hover:text-success"}),(0,Me.jsx)("p",{className:"font-medium text-xs z-30",children:"\u09a8\u09a4\u09c1\u09a8 \u09ac\u09bf\u09b7\u09df"})]})})]}):"/mobile_kobita"===i.pathname?(0,Me.jsxs)("div",{style:{backgroundColor:"rgba(255, 99, 71, 0)"},className:"grid grid-cols-5 gap-px w-full shadow-2xl mx-auto fixed bottom-px",children:[(0,Me.jsx)(Xe,{to:"/mobile",className:"p-2 h-12 flex flex-col justify-center items-center  ",children:(0,Me.jsxs)("div",{className:"bg-gray-100 w-28   p-5 flex flex-col items-center hover:text-success",children:[(0,Me.jsx)(_t,{className:"text-xl text-black hover:text-success"}),(0,Me.jsx)("p",{className:"font-medium text-xs",children:"\u09b9\u09cb\u09ae"})]})}),(0,Me.jsx)(Xe,{to:"/boyan_category",className:"p-2  h-12 flex flex-col justify-center items-center ",children:(0,Me.jsxs)("div",{className:"bg-gray-100  w-28  p-5 flex flex-col items-center hover:text-success",children:[(0,Me.jsx)(Et,{className:"text-xl text-black hover:text-success"}),(0,Me.jsx)("p",{className:"font-medium text-xs",children:"\u09ac\u09df\u09be\u09a8"})]})}),(0,Me.jsx)(Xe,{to:"/answer_category",className:"p-2  h-12 flex flex-col justify-center items-center ",children:(0,Me.jsxs)("div",{className:"bg-gray-100  w-28  p-5 flex flex-col items-center hover:text-success",children:[(0,Me.jsx)(At,{className:"text-xl text-black hover:text-success"}),(0,Me.jsx)("p",{className:"font-medium text-xs",children:"\u09aa\u09cd\u09b0\u09b6\u09cd\u09a8 \u0989\u09a4\u09cd\u09a4\u09b0"})]})}),(0,Me.jsx)(Xe,{to:"/books",className:"p-2  h-12 flex flex-col justify-center items-center ",children:(0,Me.jsxs)("div",{className:"bg-gray-100  w-28  p-5 flex flex-col items-center hover:text-success",children:[(0,Me.jsx)(Lt,{className:"text-xl text-black hover:text-success"}),(0,Me.jsx)("p",{className:"font-medium text-xs",children:"\u0995\u09bf\u09a4\u09be\u09ac\u09be\u09a6\u09c0"})]})}),(0,Me.jsx)(Xe,{to:"/new_topics",className:"p-2  h-12 flex flex-col justify-center items-center ",children:(0,Me.jsxs)("div",{className:"bg-gray-100  w-28   p-5 flex flex-col items-center hover:text-success",children:[(0,Me.jsx)(Nt,{className:"text-xl text-black hover:text-success"}),(0,Me.jsx)("p",{className:"font-medium text-xs z-30",children:"\u09a8\u09a4\u09c1\u09a8 \u09ac\u09bf\u09b7\u09df"})]})})]}):"/mobile_live"===i.pathname||"/app_details"===i.pathname||"/mobile_quran"===i.pathname||i.pathname==="/mobile_quran/".concat(r)?(0,Me.jsxs)("div",{style:{backgroundColor:"rgba(255, 99, 71, 0)"},className:"grid grid-cols-5 gap-px w-full shadow-2xl mx-auto fixed bottom-px",children:[(0,Me.jsx)(Xe,{to:"/mobile",className:"p-2 h-12 flex flex-col justify-center items-center  ",children:(0,Me.jsxs)("div",{className:"bg-gray-100 w-28   p-5 flex flex-col items-center hover:text-success",children:[(0,Me.jsx)(_t,{className:"text-xl text-black hover:text-success"}),(0,Me.jsx)("p",{className:"font-medium text-xs",children:"\u09b9\u09cb\u09ae"})]})}),(0,Me.jsx)(Xe,{to:"/boyan_category",className:"p-2  h-12 flex flex-col justify-center items-center ",children:(0,Me.jsxs)("div",{className:"bg-gray-100  w-28  p-5 flex flex-col items-center hover:text-success",children:[(0,Me.jsx)(Et,{className:"text-xl text-black hover:text-success"}),(0,Me.jsx)("p",{className:"font-medium text-xs",children:"\u09ac\u09df\u09be\u09a8"})]})}),(0,Me.jsx)(Xe,{to:"/answer_category",className:"p-2  h-12 flex flex-col justify-center items-center ",children:(0,Me.jsxs)("div",{className:"bg-gray-100  w-28  p-5 flex flex-col items-center hover:text-success",children:[(0,Me.jsx)(At,{className:"text-xl text-black hover:text-success"}),(0,Me.jsx)("p",{className:"font-medium text-xs",children:"\u09aa\u09cd\u09b0\u09b6\u09cd\u09a8 \u0989\u09a4\u09cd\u09a4\u09b0"})]})}),(0,Me.jsx)(Xe,{to:"/mobile_kobita",className:"p-2  h-12 flex flex-col justify-center items-center ",children:(0,Me.jsxs)("div",{className:"bg-gray-100  w-28  p-5 flex flex-col items-center hover:text-success",children:[(0,Me.jsx)(Ot,{className:"text-xl text-black hover:text-success"}),(0,Me.jsx)("p",{className:"font-medium text-xs",children:"\u0995\u09ac\u09bf\u09a4\u09be"})]})}),(0,Me.jsx)(Xe,{to:"/books",className:"p-2  h-12 flex flex-col justify-center items-center ",children:(0,Me.jsxs)("div",{className:"bg-gray-100  w-28  p-5 flex flex-col items-center hover:text-success",children:[(0,Me.jsx)(Lt,{className:"text-xl text-black hover:text-success"}),(0,Me.jsx)("p",{className:"font-medium text-xs",children:"\u0995\u09bf\u09a4\u09be\u09ac\u09be\u09a6\u09c0"})]})})]}):"/boyan_category"===i.pathname||"/boyan_subject"===i.pathname?(0,Me.jsxs)("div",{style:{backgroundColor:"rgba(255, 99, 71, 0)"},className:"grid grid-cols-5 gap-px w-full shadow-2xl mx-auto fixed bottom-px",children:[(0,Me.jsx)(Xe,{to:"/mobile",className:"p-2 h-12 flex flex-col justify-center items-center  ",children:(0,Me.jsxs)("div",{className:"bg-gray-100 w-28   p-5 flex flex-col items-center hover:text-success",children:[(0,Me.jsx)(_t,{className:"text-xl text-black hover:text-success"}),(0,Me.jsx)("p",{className:"font-medium text-xs",children:"\u09b9\u09cb\u09ae"})]})}),(0,Me.jsx)(Xe,{to:"/answer_category",className:"p-2  h-12 flex flex-col justify-center items-center ",children:(0,Me.jsxs)("div",{className:"bg-gray-100  w-28  p-5 flex flex-col items-center hover:text-success",children:[(0,Me.jsx)(At,{className:"text-xl text-black hover:text-success"}),(0,Me.jsx)("p",{className:"font-medium text-xs",children:"\u09aa\u09cd\u09b0\u09b6\u09cd\u09a8 \u0989\u09a4\u09cd\u09a4\u09b0"})]})}),(0,Me.jsx)(Xe,{to:"/mobile_kobita",className:"p-2  h-12 flex flex-col justify-center items-center ",children:(0,Me.jsxs)("div",{className:"bg-gray-100  w-28  p-5 flex flex-col items-center hover:text-success",children:[(0,Me.jsx)(Ot,{className:"text-xl text-black hover:text-success"}),(0,Me.jsx)("p",{className:"font-medium text-xs",children:"\u0995\u09ac\u09bf\u09a4\u09be"})]})}),(0,Me.jsx)(Xe,{to:"/books",className:"p-2  h-12 flex flex-col justify-center items-center ",children:(0,Me.jsxs)("div",{className:"bg-gray-100  w-28  p-5 flex flex-col items-center hover:text-success",children:[(0,Me.jsx)(Lt,{className:"text-xl text-black hover:text-success"}),(0,Me.jsx)("p",{className:"font-medium text-xs",children:"\u0995\u09bf\u09a4\u09be\u09ac\u09be\u09a6\u09c0"})]})}),(0,Me.jsx)(Xe,{to:"/new_topics",className:"p-2  h-12 flex flex-col justify-center items-center ",children:(0,Me.jsxs)("div",{className:"bg-gray-100  w-28   p-5 flex flex-col items-center hover:text-success",children:[(0,Me.jsx)(Nt,{className:"text-xl text-black hover:text-success"}),(0,Me.jsx)("p",{className:"font-medium text-xs z-30",children:"\u09a8\u09a4\u09c1\u09a8 \u09ac\u09bf\u09b7\u09df"})]})})]}):"/prayer_times"===i.pathname||"/books"===i.pathname||"/new_topics"===i.pathname||"/mobile_notice"===i.pathname||"/register"===i.pathname||"/boyan_month"===i.pathname?(0,Me.jsxs)("div",{style:{backgroundColor:"rgba(255, 99, 71, 0)"},className:"grid grid-cols-5 gap-px w-full shadow-2xl mx-auto fixed bottom-px",children:[(0,Me.jsx)(Xe,{to:"/mobile",className:"p-2 h-12 flex flex-col justify-center items-center  ",children:(0,Me.jsxs)("div",{className:"bg-gray-100 w-28   p-5 flex flex-col items-center hover:text-success",children:[(0,Me.jsx)(_t,{className:"text-xl text-black hover:text-success"}),(0,Me.jsx)("p",{className:"font-medium text-xs",children:"\u09b9\u09cb\u09ae"})]})}),(0,Me.jsx)(Xe,{to:"/boyan_category",className:"p-2  h-12 flex flex-col justify-center items-center ",children:(0,Me.jsxs)("div",{className:"bg-gray-100  w-28  p-5 flex flex-col items-center hover:text-success",children:[(0,Me.jsx)(Et,{className:"text-xl text-black hover:text-success"}),(0,Me.jsx)("p",{className:"font-medium text-xs",children:"\u09ac\u09df\u09be\u09a8"})]})}),(0,Me.jsx)(Xe,{to:"/answer_category",className:"p-2  h-12 flex flex-col justify-center items-center ",children:(0,Me.jsxs)("div",{className:"bg-gray-100  w-28  p-5 flex flex-col items-center hover:text-success",children:[(0,Me.jsx)(At,{className:"text-xl text-black hover:text-success"}),(0,Me.jsx)("p",{className:"font-medium text-xs",children:"\u09aa\u09cd\u09b0\u09b6\u09cd\u09a8 \u0989\u09a4\u09cd\u09a4\u09b0"})]})}),(0,Me.jsx)(Xe,{to:"/mobile_kobita",className:"p-2  h-12 flex flex-col justify-center items-center ",children:(0,Me.jsxs)("div",{className:"bg-gray-100  w-28  p-5 flex flex-col items-center hover:text-success",children:[(0,Me.jsx)(Ot,{className:"text-xl text-black hover:text-success"}),(0,Me.jsx)("p",{className:"font-medium text-xs",children:"\u0995\u09ac\u09bf\u09a4\u09be"})]})}),(0,Me.jsx)(Xe,{to:"/books",className:"p-2  h-12 flex flex-col justify-center items-center ",children:(0,Me.jsxs)("div",{className:"bg-gray-100  w-28  p-5 flex flex-col items-center hover:text-success",children:[(0,Me.jsx)(Lt,{className:"text-xl text-black hover:text-success"}),(0,Me.jsx)("p",{className:"font-medium text-xs",children:"\u0995\u09bf\u09a4\u09be\u09ac\u09be\u09a6\u09c0"})]})})]}):"/answer_category"===i.pathname?(0,Me.jsxs)("div",{style:{backgroundColor:"rgba(255, 99, 71, 0)"},className:"grid grid-cols-5 gap-px w-full shadow-2xl mx-auto fixed bottom-px",children:[(0,Me.jsx)(Xe,{to:"/mobile",className:"p-2 h-12 flex flex-col justify-center items-center  ",children:(0,Me.jsxs)("div",{className:"bg-gray-100 w-28   p-5 flex flex-col items-center hover:text-success",children:[(0,Me.jsx)(_t,{className:"text-xl text-black hover:text-success"}),(0,Me.jsx)("p",{className:"font-medium text-xs",children:"\u09b9\u09cb\u09ae"})]})}),(0,Me.jsx)(Xe,{to:"/boyan_category",className:"p-2  h-12 flex flex-col justify-center items-center ",children:(0,Me.jsxs)("div",{className:"bg-gray-100  w-28  p-5 flex flex-col items-center hover:text-success",children:[(0,Me.jsx)(Et,{className:"text-xl text-black hover:text-success"}),(0,Me.jsx)("p",{className:"font-medium text-xs",children:"\u09ac\u09df\u09be\u09a8"})]})}),(0,Me.jsx)(Xe,{to:"/mobile_kobita",className:"p-2  h-12 flex flex-col justify-center items-center ",children:(0,Me.jsxs)("div",{className:"bg-gray-100  w-28  p-5 flex flex-col items-center hover:text-success",children:[(0,Me.jsx)(Ot,{className:"text-xl text-black hover:text-success"}),(0,Me.jsx)("p",{className:"font-medium text-xs",children:"\u0995\u09ac\u09bf\u09a4\u09be"})]})}),(0,Me.jsx)(Xe,{to:"/books",className:"p-2  h-12 flex flex-col justify-center items-center ",children:(0,Me.jsxs)("div",{className:"bg-gray-100  w-28  p-5 flex flex-col items-center hover:text-success",children:[(0,Me.jsx)(Lt,{className:"text-xl text-black hover:text-success"}),(0,Me.jsx)("p",{className:"font-medium text-xs",children:"\u0995\u09bf\u09a4\u09be\u09ac\u09be\u09a6\u09c0"})]})}),(0,Me.jsx)(Xe,{to:"/new_topics",className:"p-2  h-12 flex flex-col justify-center items-center ",children:(0,Me.jsxs)("div",{className:"bg-gray-100  w-28   p-5 flex flex-col items-center hover:text-success",children:[(0,Me.jsx)(Nt,{className:"text-xl text-black hover:text-success"}),(0,Me.jsx)("p",{className:"font-medium text-xs z-30",children:"\u09a8\u09a4\u09c1\u09a8 \u09ac\u09bf\u09b7\u09df"})]})})]}):"/shorts"===i.pathname||"/quran_recitation"===i.pathname?(0,Me.jsxs)("div",{style:{backgroundColor:"rgba(255, 99, 71, 0)"},className:"grid grid-cols-5 gap-px w-full shadow-2xl mx-auto fixed bottom-px",children:[(0,Me.jsx)(Xe,{to:"/mobile",className:"p-2 h-12 flex flex-col justify-center items-center  ",children:(0,Me.jsxs)("div",{className:"bg-gray-100 w-28   p-5 flex flex-col items-center hover:text-success",children:[(0,Me.jsx)(_t,{className:"text-xl text-black hover:text-success"}),(0,Me.jsx)("p",{className:"font-medium text-xs",children:"\u09b9\u09cb\u09ae"})]})}),(0,Me.jsx)(Xe,{to:"/boyan_category",className:"p-2  h-12 flex flex-col justify-center items-center ",children:(0,Me.jsxs)("div",{className:"bg-gray-100  w-28  p-5 flex flex-col items-center hover:text-success",children:[(0,Me.jsx)(Et,{className:"text-xl text-black hover:text-success"}),(0,Me.jsx)("p",{className:"font-medium text-xs",children:"\u09ac\u09df\u09be\u09a8"})]})}),(0,Me.jsx)(Xe,{to:"/answer_category",className:"p-2  h-12 flex flex-col justify-center items-center ",children:(0,Me.jsxs)("div",{className:"bg-gray-100  w-28  p-5 flex flex-col items-center hover:text-success",children:[(0,Me.jsx)(At,{className:"text-xl text-black hover:text-success"}),(0,Me.jsx)("p",{className:"font-medium text-xs",children:"\u09aa\u09cd\u09b0\u09b6\u09cd\u09a8 \u0989\u09a4\u09cd\u09a4\u09b0"})]})}),(0,Me.jsx)(Xe,{to:"/mobile_kobita",className:"p-2  h-12 flex flex-col justify-center items-center ",children:(0,Me.jsxs)("div",{className:"bg-gray-100  w-28  p-5 flex flex-col items-center hover:text-success",children:[(0,Me.jsx)(Ot,{className:"text-xl text-black hover:text-success"}),(0,Me.jsx)("p",{className:"font-medium text-xs",children:"\u0995\u09ac\u09bf\u09a4\u09be"})]})}),(0,Me.jsx)(Xe,{to:"/books",className:"p-2  h-12 flex flex-col justify-center items-center ",children:(0,Me.jsxs)("div",{className:"bg-gray-100  w-28  p-5 flex flex-col items-center hover:text-success",children:[(0,Me.jsx)(Lt,{className:"text-xl text-black hover:text-success"}),(0,Me.jsx)("p",{className:"font-medium text-xs",children:"\u0995\u09bf\u09a4\u09be\u09ac\u09be\u09a6\u09c0"})]})})]}):(0,Me.jsxs)("footer",{class:"footer p-10 bg-neutral text-neutral-content",children:[(0,Me.jsxs)("div",{children:[(0,Me.jsx)("span",{class:"footer-title",children:"\u09ac\u09bf\u09ad\u09be\u0997 \u09b8\u09ae\u09c2\u09b9"}),(0,Me.jsx)("a",{class:"link link-hover",children:"\u09ac\u09df\u09be\u09a8"}),(0,Me.jsx)("a",{class:"link link-hover",children:"\u09aa\u09cd\u09b0\u09b6\u09cd\u09a8-\u0989\u09a4\u09cd\u09a4\u09b0"}),(0,Me.jsx)("a",{class:"link link-hover",children:"\u0995\u09ac\u09bf\u09a4\u09be"}),(0,Me.jsx)("a",{class:"link link-hover",children:"\u09b6\u09c7\u09b0"})]}),(0,Me.jsxs)("div",{children:[(0,Me.jsx)("span",{class:"footer-title",children:"\u09ac\u09bf\u09ad\u09be\u0997 \u09b8\u09ae\u09c2\u09b9"}),(0,Me.jsx)("a",{class:"link link-hover",children:"\u09ac\u09df\u09be\u09a8"}),(0,Me.jsx)("a",{class:"link link-hover",children:"\u09aa\u09cd\u09b0\u09b6\u09cd\u09a8-\u0989\u09a4\u09cd\u09a4\u09b0"}),(0,Me.jsx)("a",{class:"link link-hover",children:"\u0995\u09ac\u09bf\u09a4\u09be"}),(0,Me.jsx)("a",{class:"link link-hover",children:"\u09b6\u09c7\u09b0"})]}),(0,Me.jsxs)("div",{children:[(0,Me.jsx)("span",{class:"footer-title",children:"\u09ac\u09bf\u09ad\u09be\u0997 \u09b8\u09ae\u09c2\u09b9"}),(0,Me.jsx)("a",{class:"link link-hover",children:"\u09ac\u09df\u09be\u09a8"}),(0,Me.jsx)("a",{class:"link link-hover",children:"\u09aa\u09cd\u09b0\u09b6\u09cd\u09a8-\u0989\u09a4\u09cd\u09a4\u09b0"}),(0,Me.jsx)("a",{class:"link link-hover",children:"\u0995\u09ac\u09bf\u09a4\u09be"}),(0,Me.jsx)("a",{class:"link link-hover",children:"\u09b6\u09c7\u09b0"})]}),(0,Me.jsx)("p",{children:" \u09ae\u09be\u09a6\u09b0\u09be\u09b8\u09be-\u098f \u099c\u09be\u09b2\u09be\u09b2\u09c1\u09a6\u09cd\u09a6\u09c0\u09a8 \u09b0\u09c1\u09ae\u09c0 \u09e8\u09e6\u09e8\u09e8"})]})})};function jt(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=at(e)););return e}function Ft(){return Ft="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=jt(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},Ft.apply(this,arguments)}function Ut(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=c(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,o=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){o=!0,a=e},f:function(){try{s||null==n.return||n.return()}finally{if(o)throw a}}}}function Bt(){Bt=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",o=i.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(C){c=function(e,t,n){return e[t]=n}}function u(e,t,n,i){var a=t&&t.prototype instanceof h?t:h,s=Object.create(a.prototype),o=new _(i||[]);return r(s,"_invoke",{value:x(e,n,o)}),s}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(C){return{type:"throw",arg:C}}}e.wrap=u;var d={};function h(){}function f(){}function p(){}var v={};c(v,a,(function(){return this}));var m=Object.getPrototypeOf,g=m&&m(m(S([])));g&&g!==t&&n.call(g,a)&&(v=g);var y=p.prototype=h.prototype=Object.create(v);function b(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function k(e,t){function i(r,a,s,o){var c=l(e[r],e,a);if("throw"!==c.type){var u=c.arg,d=u.value;return d&&"object"==J(d)&&n.call(d,"__await")?t.resolve(d.__await).then((function(e){i("next",e,s,o)}),(function(e){i("throw",e,s,o)})):t.resolve(d).then((function(e){u.value=e,s(u)}),(function(e){return i("throw",e,s,o)}))}o(c.arg)}var a;r(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){i(e,n,t,r)}))}return a=a?a.then(r,r):r()}})}function x(e,t,n){var r="suspendedStart";return function(i,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw a;return A()}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var o=w(s,n);if(o){if(o===d)continue;return o}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var c=l(e,t,n);if("normal"===c.type){if(r=n.done?"completed":"suspendedYield",c.arg===d)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r="completed",n.method="throw",n.arg=c.arg)}}}function w(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,w(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),d;var i=l(r,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,d;var a=i.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function T(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function _(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(T,this),this.reset(!0)}function S(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,i=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:A}}function A(){return{value:void 0,done:!0}}return f.prototype=p,r(y,"constructor",{value:p,configurable:!0}),r(p,"constructor",{value:f,configurable:!0}),f.displayName=c(p,o,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,c(e,o,"GeneratorFunction")),e.prototype=Object.create(y),e},e.awrap=function(e){return{__await:e}},b(k.prototype),c(k.prototype,s,(function(){return this})),e.AsyncIterator=k,e.async=function(t,n,r,i,a){void 0===a&&(a=Promise);var s=new k(u(t,n,r,i),a);return e.isGeneratorFunction(n)?s:s.next().then((function(e){return e.done?e.value:s.next()}))},b(y),c(y,o,"Generator"),c(y,a,(function(){return this})),c(y,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=S,_.prototype={constructor:_,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(E),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return s.type="throw",s.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var o=n.call(a,"catchLoc"),c=n.call(a,"finallyLoc");if(o&&c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(o){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var s=a?a.completion:{};return s.type=e,s.arg=t,a?(this.method="next",this.next=a.finallyLoc,d):this.complete(s)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),E(n),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;E(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:S(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),d}},e}function Gt(e,t,n,r,i,a,s){try{var o=e[a](s),c=o.value}catch(u){return void n(u)}o.done?t(c):Promise.resolve(c).then(r,i)}function Vt(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function s(e){Gt(a,r,i,s,o,"next",e)}function o(e){Gt(a,r,i,s,o,"throw",e)}s(void 0)}))}}function Ht(e,t,n){return Ht=st()?Reflect.construct.bind():function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&rt(i,n.prototype),i},Ht.apply(null,arguments)}function zt(e){var t="function"===typeof Map?new Map:void 0;return zt=function(e){if(null===e||!function(e){return-1!==Function.toString.call(e).indexOf("[native code]")}(e))return e;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return Ht(e,arguments,at(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),rt(n,e)},zt(e)}var Wt=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},Kt={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray:function(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<e.length;i+=3){var a=e[i],s=i+1<e.length,o=s?e[i+1]:0,c=i+2<e.length,u=c?e[i+2]:0,l=a>>2,d=(3&a)<<4|o>>4,h=(15&o)<<2|u>>6,f=63&u;c||(f=64,s||(h=64)),r.push(n[l],n[d],n[h],n[f])}return r.join("")},encodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(Wt(e),t)},decodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){for(var t=[],n=0,r=0;n<e.length;){var i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){var a=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&a)}else if(i>239&&i<365){var s=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(s>>10)),t[r++]=String.fromCharCode(56320+(1023&s))}else{var o=e[n++],c=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&c)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray:function(e,t){this.init_();for(var n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<e.length;){var a=n[e.charAt(i++)],s=i<e.length?n[e.charAt(i)]:0,o=++i<e.length?n[e.charAt(i)]:64,c=++i<e.length?n[e.charAt(i)]:64;if(++i,null==a||null==s||null==o||null==c)throw Error();var u=a<<2|s>>4;if(r.push(u),64!==o){var l=s<<4&240|o>>2;if(r.push(l),64!==c){var d=o<<6&192|c;r.push(d)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},qt=function(e){return function(e){var t=Wt(e);return Kt.encodeByteArray(t,!0)}(e).replace(/\./g,"")},Yt=function(e){try{return Kt.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function Jt(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function Qt(){try{return"object"===typeof indexedDB}catch(e){return!1}}var Xt=function(){return function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof __webpack_require__.g)return __webpack_require__.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__},Zt=function(){try{return Xt()||function(){if("undefined"!==typeof process){var e={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0}}()||function(){if("undefined"!==typeof document){var e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}var t=e&&Yt(e[1]);return t&&JSON.parse(t)}}()}catch(e){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(e))}},$t=function(e){var t,n;return null===(n=null===(t=Zt())||void 0===t?void 0:t.emulatorHosts)||void 0===n?void 0:n[e]},en=function(){var e;return null===(e=Zt())||void 0===e?void 0:e.config},tn=function(e){var t;return null===(t=Zt())||void 0===t?void 0:t["_".concat(e)]},nn=function(){function e(){var t=this;et(this,e),this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return nt(e,[{key:"wrapCallback",value:function(e){var t=this;return function(n,r){n?t.reject(n):t.resolve(r),"function"===typeof e&&(t.promise.catch((function(){})),1===e.length?e(n):e(n,r))}}}]),e}();var rn=function(e){it(n,e);var t=ut(n);function n(e,r,i){var a;return et(this,n),(a=t.call(this,r)).code=e,a.customData=i,a.name="FirebaseError",Object.setPrototypeOf(ot(a),n.prototype),Error.captureStackTrace&&Error.captureStackTrace(ot(a),an.prototype.create),a}return nt(n)}(zt(Error)),an=function(){function e(t,n,r){et(this,e),this.service=t,this.serviceName=n,this.errors=r}return nt(e,[{key:"create",value:function(e){var t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?sn(r,t):"Error",a="".concat(this.serviceName,": ").concat(i," (").concat(n,")."),s=new rn(n,a,t);return s}}]),e}();function sn(e,t){return e.replace(on,(function(e,n){var r=t[n];return null!=r?String(r):"<".concat(n,"?>")}))}var on=/\{\$([^}]+)}/g;function cn(e,t){if(e===t)return!0;for(var n=Object.keys(e),r=Object.keys(t),i=0,a=n;i<a.length;i++){var s=a[i];if(!r.includes(s))return!1;var o=e[s],c=t[s];if(un(o)&&un(c)){if(!cn(o,c))return!1}else if(o!==c)return!1}for(var u=0,l=r;u<l.length;u++){var d=l[u];if(!n.includes(d))return!1}return!0}function un(e){return null!==e&&"object"===typeof e}function ln(e){for(var t=[],n=function(){var e=u(i[r],2),n=e[0],a=e[1];Array.isArray(a)?a.forEach((function(e){t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(a))},r=0,i=Object.entries(e);r<i.length;r++)n();return t.length?"&"+t.join("&"):""}function dn(e){var t={};return e.replace(/^\?/,"").split("&").forEach((function(e){if(e){var n=u(e.split("="),2),r=n[0],i=n[1];t[decodeURIComponent(r)]=decodeURIComponent(i)}})),t}function hn(e){var t=e.indexOf("?");if(!t)return"";var n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}var fn=function(){function e(t,n){var r=this;et(this,e),this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then((function(){t(r)})).catch((function(e){r.error(e)}))}return nt(e,[{key:"next",value:function(e){this.forEachObserver((function(t){t.next(e)}))}},{key:"error",value:function(e){this.forEachObserver((function(t){t.error(e)})),this.close(e)}},{key:"complete",value:function(){this.forEachObserver((function(e){e.complete()})),this.close()}},{key:"subscribe",value:function(e,t,n){var r,i=this;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=Ut(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i in e&&"function"===typeof e[i])return!0}}catch(a){r.e(a)}finally{r.f()}return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n}).next&&(r.next=pn),void 0===r.error&&(r.error=pn),void 0===r.complete&&(r.complete=pn);var a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(e){}})),this.observers.push(r),a}},{key:"unsubscribeOne",value:function(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}},{key:"forEachObserver",value:function(e){if(!this.finalized)for(var t=0;t<this.observers.length;t++)this.sendOne(t,e)}},{key:"sendOne",value:function(e,t){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[e])try{t(n.observers[e])}catch(r){"undefined"!==typeof console&&console.error&&console.error(r)}}))}},{key:"close",value:function(e){var t=this;this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((function(){t.observers=void 0,t.onNoObservers=void 0})))}}]),e}();function pn(){}function vn(e){return e&&e._delegate?e._delegate:e}var mn=function(){function e(t,n,r){et(this,e),this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return nt(e,[{key:"setInstantiationMode",value:function(e){return this.instantiationMode=e,this}},{key:"setMultipleInstances",value:function(e){return this.multipleInstances=e,this}},{key:"setServiceProps",value:function(e){return this.serviceProps=e,this}},{key:"setInstanceCreatedCallback",value:function(e){return this.onInstanceCreated=e,this}}]),e}(),gn="[DEFAULT]",yn=function(){function e(t,n){et(this,e),this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return nt(e,[{key:"get",value:function(e){var t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){var n=new nn;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:t});r&&n.resolve(r)}catch(i){}}return this.instancesDeferred.get(t).promise}},{key:"getImmediate",value:function(e){var t,n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}}},{key:"getComponent",value:function(){return this.component}},{key:"setComponent",value:function(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:gn})}catch(c){}var t,n=Ut(this.instancesDeferred.entries());try{for(n.s();!(t=n.n()).done;){var r=u(t.value,2),i=r[0],a=r[1],s=this.normalizeInstanceIdentifier(i);try{var o=this.getOrInitializeService({instanceIdentifier:s});a.resolve(o)}catch(c){}}}catch(l){n.e(l)}finally{n.f()}}}},{key:"clearInstance",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:gn;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}},{key:"delete",value:function(){var e=Vt(Bt().mark((function e(){var t;return Bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Array.from(this.instances.values()),e.next=3,Promise.all([].concat(te(t.filter((function(e){return"INTERNAL"in e})).map((function(e){return e.INTERNAL.delete()}))),te(t.filter((function(e){return"_delete"in e})).map((function(e){return e._delete()})))));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"isComponentSet",value:function(){return null!=this.component}},{key:"isInitialized",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:gn;return this.instances.has(e)}},{key:"getOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:gn;return this.instancesOptions.get(e)||{}}},{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.options,n=void 0===t?{}:t,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error("".concat(this.name,"(").concat(r,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));var i,a=this.getOrInitializeService({instanceIdentifier:r,options:n}),s=Ut(this.instancesDeferred.entries());try{for(s.s();!(i=s.n()).done;){var o=u(i.value,2),c=o[0],l=o[1],d=this.normalizeInstanceIdentifier(c);r===d&&l.resolve(a)}}catch(h){s.e(h)}finally{s.f()}return a}},{key:"onInit",value:function(e,t){var n,r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);var a=this.instances.get(r);return a&&e(a,r),function(){i.delete(e)}}},{key:"invokeOnInitCallbacks",value:function(e,t){var n=this.onInitCallbacks.get(t);if(n){var r,i=Ut(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;try{a(e,t)}catch(s){}}}catch(o){i.e(o)}finally{i.f()}}}},{key:"getOrInitializeService",value:function(e){var t,n=e.instanceIdentifier,r=e.options,i=void 0===r?{}:r,a=this.instances.get(n);if(!a&&this.component&&(a=this.component.instanceFactory(this.container,{instanceIdentifier:(t=n,t===gn?void 0:t),options:i}),this.instances.set(n,a),this.instancesOptions.set(n,i),this.invokeOnInitCallbacks(a,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,a)}catch(s){}return a||null}},{key:"normalizeInstanceIdentifier",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:gn;return this.component?this.component.multipleInstances?e:gn:e}},{key:"shouldAutoInitialize",value:function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}]),e}();var bn,kn,xn=function(){function e(t){et(this,e),this.name=t,this.providers=new Map}return nt(e,[{key:"addComponent",value:function(e){var t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}},{key:"addOrOverwriteComponent",value:function(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}},{key:"getProvider",value:function(e){if(this.providers.has(e))return this.providers.get(e);var t=new yn(e,this);return this.providers.set(e,t),t}},{key:"getProviders",value:function(){return Array.from(this.providers.values())}}]),e}(),wn=[];!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(kn||(kn={}));var Tn={debug:kn.DEBUG,verbose:kn.VERBOSE,info:kn.INFO,warn:kn.WARN,error:kn.ERROR,silent:kn.SILENT},En=kn.INFO,_n=(X(bn={},kn.DEBUG,"log"),X(bn,kn.VERBOSE,"log"),X(bn,kn.INFO,"info"),X(bn,kn.WARN,"warn"),X(bn,kn.ERROR,"error"),bn),Sn=function(e,t){if(!(t<e.logLevel)){var n=(new Date).toISOString(),r=_n[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i,a=arguments.length,s=new Array(a>2?a-2:0),o=2;o<a;o++)s[o-2]=arguments[o];(i=console)[r].apply(i,["[".concat(n,"]  ").concat(e.name,":")].concat(s))}},An=function(){function e(t){et(this,e),this.name=t,this._logLevel=En,this._logHandler=Sn,this._userLogHandler=null,wn.push(this)}return nt(e,[{key:"logLevel",get:function(){return this._logLevel},set:function(e){if(!(e in kn))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}},{key:"setLogLevel",value:function(e){this._logLevel="string"===typeof e?Tn[e]:e}},{key:"logHandler",get:function(){return this._logHandler},set:function(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}},{key:"userLogHandler",get:function(){return this._userLogHandler},set:function(e){this._userLogHandler=e}},{key:"debug",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,kn.DEBUG].concat(t)),this._logHandler.apply(this,[this,kn.DEBUG].concat(t))}},{key:"log",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,kn.VERBOSE].concat(t)),this._logHandler.apply(this,[this,kn.VERBOSE].concat(t))}},{key:"info",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,kn.INFO].concat(t)),this._logHandler.apply(this,[this,kn.INFO].concat(t))}},{key:"warn",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,kn.WARN].concat(t)),this._logHandler.apply(this,[this,kn.WARN].concat(t))}},{key:"error",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,kn.ERROR].concat(t)),this._logHandler.apply(this,[this,kn.ERROR].concat(t))}}]),e}();var Cn,In;var Rn=new WeakMap,Pn=new WeakMap,Dn=new WeakMap,Nn=new WeakMap,On=new WeakMap;var Ln={get:function(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return Pn.get(e);if("objectStoreNames"===t)return e.objectStoreNames||Dn.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Fn(e[t])},set:function(e,t,n){return e[t]=n,!0},has:function(e,t){return e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e}};function Mn(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(In||(In=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(Un(this),n),Fn(Rn.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Fn(e.apply(Un(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];var a=e.call.apply(e,[Un(this),t].concat(r));return Dn.set(a,t.sort?t.sort():[t]),Fn(a)}}function jn(e){return"function"===typeof e?Mn(e):(e instanceof IDBTransaction&&function(e){if(!Pn.has(e)){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("complete",i),e.removeEventListener("error",a),e.removeEventListener("abort",a)},i=function(){t(),r()},a=function(){n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",a),e.addEventListener("abort",a)}));Pn.set(e,t)}}(e),t=e,(Cn||(Cn=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some((function(e){return t instanceof e}))?new Proxy(e,Ln):e);var t}function Fn(e){if(e instanceof IDBRequest)return function(e){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("success",i),e.removeEventListener("error",a)},i=function(){t(Fn(e.result)),r()},a=function(){n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",a)}));return t.then((function(t){t instanceof IDBCursor&&Rn.set(t,e)})).catch((function(){})),On.set(t,e),t}(e);if(Nn.has(e))return Nn.get(e);var t=jn(e);return t!==e&&(Nn.set(e,t),On.set(t,e)),t}var Un=function(e){return On.get(e)};var Bn,Gn,Vn=["get","getKey","getAll","getAllKeys","count"],Hn=["put","add","delete","clear"],zn=new Map;function Wn(e,t){if(e instanceof IDBDatabase&&!(t in e)&&"string"===typeof t){if(zn.get(t))return zn.get(t);var n=t.replace(/FromIndex$/,""),r=t!==n,i=Hn.includes(n);if(n in(r?IDBIndex:IDBObjectStore).prototype&&(i||Vn.includes(n))){var a=function(){var e=Vt(Bt().mark((function e(t){var a,s,o,c,u,l,d=arguments;return Bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(s=this.transaction(t,i?"readwrite":"readonly"),o=s.store,c=d.length,u=new Array(c>1?c-1:0),l=1;l<c;l++)u[l-1]=d[l];return r&&(o=o.index(u.shift())),e.next=6,Promise.all([(a=o)[n].apply(a,u),i&&s.done]);case 6:return e.abrupt("return",e.sent[0]);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}();return zn.set(t,a),a}}}Ln=function(e){return $($({},e),{},{get:function(t,n,r){return Wn(t,n)||e.get(t,n,r)},has:function(t,n){return!!Wn(t,n)||e.has(t,n)}})}(Ln);var Kn=function(){function e(t){et(this,e),this.container=t}return nt(e,[{key:"getPlatformInfoString",value:function(){return this.container.getProviders().map((function(e){if(function(e){var t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){var t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((function(e){return e})).join(" ")}}]),e}();var qn="@firebase/app",Yn="0.9.0",Jn=new An("@firebase/app"),Qn="[DEFAULT]",Xn=(X(Bn={},qn,"fire-core"),X(Bn,"@firebase/app-compat","fire-core-compat"),X(Bn,"@firebase/analytics","fire-analytics"),X(Bn,"@firebase/analytics-compat","fire-analytics-compat"),X(Bn,"@firebase/app-check","fire-app-check"),X(Bn,"@firebase/app-check-compat","fire-app-check-compat"),X(Bn,"@firebase/auth","fire-auth"),X(Bn,"@firebase/auth-compat","fire-auth-compat"),X(Bn,"@firebase/database","fire-rtdb"),X(Bn,"@firebase/database-compat","fire-rtdb-compat"),X(Bn,"@firebase/functions","fire-fn"),X(Bn,"@firebase/functions-compat","fire-fn-compat"),X(Bn,"@firebase/installations","fire-iid"),X(Bn,"@firebase/installations-compat","fire-iid-compat"),X(Bn,"@firebase/messaging","fire-fcm"),X(Bn,"@firebase/messaging-compat","fire-fcm-compat"),X(Bn,"@firebase/performance","fire-perf"),X(Bn,"@firebase/performance-compat","fire-perf-compat"),X(Bn,"@firebase/remote-config","fire-rc"),X(Bn,"@firebase/remote-config-compat","fire-rc-compat"),X(Bn,"@firebase/storage","fire-gcs"),X(Bn,"@firebase/storage-compat","fire-gcs-compat"),X(Bn,"@firebase/firestore","fire-fst"),X(Bn,"@firebase/firestore-compat","fire-fst-compat"),X(Bn,"fire-js","fire-js"),X(Bn,"firebase","fire-js-all"),Bn),Zn=new Map,$n=new Map;function er(e,t){try{e.container.addComponent(t)}catch(n){Jn.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),n)}}function tr(e){var t=e.name;if($n.has(t))return Jn.debug("There were multiple attempts to register component ".concat(t,".")),!1;$n.set(t,e);var n,r=Ut(Zn.values());try{for(r.s();!(n=r.n()).done;){er(n.value,e)}}catch(i){r.e(i)}finally{r.f()}return!0}function nr(e,t){var n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}var rr=(X(Gn={},"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),X(Gn,"bad-app-name","Illegal App name: '{$appName}"),X(Gn,"duplicate-app","Firebase App named '{$appName}' already exists with different options or config"),X(Gn,"app-deleted","Firebase App named '{$appName}' already deleted"),X(Gn,"no-options","Need to provide options, when not being deployed to hosting via source."),X(Gn,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),X(Gn,"invalid-log-argument","First argument to `onLog` must be null or a function."),X(Gn,"idb-open","Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}."),X(Gn,"idb-get","Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}."),X(Gn,"idb-set","Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}."),X(Gn,"idb-delete","Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."),Gn),ir=new an("app","Firebase",rr),ar=function(){function e(t,n,r){var i=this;et(this,e),this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new mn("app",(function(){return i}),"PUBLIC"))}return nt(e,[{key:"automaticDataCollectionEnabled",get:function(){return this.checkDestroyed(),this._automaticDataCollectionEnabled},set:function(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this.checkDestroyed(),this._name}},{key:"options",get:function(){return this.checkDestroyed(),this._options}},{key:"config",get:function(){return this.checkDestroyed(),this._config}},{key:"container",get:function(){return this._container}},{key:"isDeleted",get:function(){return this._isDeleted},set:function(e){this._isDeleted=e}},{key:"checkDestroyed",value:function(){if(this.isDeleted)throw ir.create("app-deleted",{appName:this._name})}}]),e}(),sr="9.15.0";function or(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if("object"!==typeof t){var r=t;t={name:r}}var i=Object.assign({name:Qn,automaticDataCollectionEnabled:!1},t),a=i.name;if("string"!==typeof a||!a)throw ir.create("bad-app-name",{appName:String(a)});if(n||(n=en()),!n)throw ir.create("no-options");var s=Zn.get(a);if(s){if(cn(n,s.options)&&cn(i,s.config))return s;throw ir.create("duplicate-app",{appName:a})}var o,c=new xn(a),u=Ut($n.values());try{for(u.s();!(o=u.n()).done;){var l=o.value;c.addComponent(l)}}catch(h){u.e(h)}finally{u.f()}var d=new ar(n,i,c);return Zn.set(a,d),d}function cr(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Qn,t=Zn.get(e);if(!t&&e===Qn)return or();if(!t)throw ir.create("no-app",{appName:e});return t}function ur(e,t,n){var r,i=null!==(r=Xn[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));var a=i.match(/\s|\//),s=t.match(/\s|\//);if(a||s){var o=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return a&&o.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),a&&s&&o.push("and"),s&&o.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void Jn.warn(o.join(" "))}tr(new mn("".concat(i,"-version"),(function(){return{library:i,version:t}}),"VERSION"))}var lr="firebase-heartbeat-store",dr=null;function hr(){return dr||(dr=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.blocked,i=n.upgrade,a=n.blocking,s=n.terminated,o=indexedDB.open(e,t),c=Fn(o);return i&&o.addEventListener("upgradeneeded",(function(e){i(Fn(o.result),e.oldVersion,e.newVersion,Fn(o.transaction))})),r&&o.addEventListener("blocked",(function(){return r()})),c.then((function(e){s&&e.addEventListener("close",(function(){return s()})),a&&e.addEventListener("versionchange",(function(){return a()}))})).catch((function(){})),c}("firebase-heartbeat-database",1,{upgrade:function(e,t){if(0===t)e.createObjectStore(lr)}}).catch((function(e){throw ir.create("idb-open",{originalErrorMessage:e.message})}))),dr}function fr(e){return pr.apply(this,arguments)}function pr(){return pr=Vt(Bt().mark((function e(t){var n,r;return Bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,hr();case 3:return n=e.sent,e.abrupt("return",n.transaction(lr).objectStore(lr).get(gr(t)));case 7:e.prev=7,e.t0=e.catch(0),e.t0 instanceof rn?Jn.warn(e.t0.message):(r=ir.create("idb-get",{originalErrorMessage:null===e.t0||void 0===e.t0?void 0:e.t0.message}),Jn.warn(r.message));case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),pr.apply(this,arguments)}function vr(e,t){return mr.apply(this,arguments)}function mr(){return mr=Vt(Bt().mark((function e(t,n){var r,i,a,s;return Bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,hr();case 3:return r=e.sent,i=r.transaction(lr,"readwrite"),a=i.objectStore(lr),e.next=8,a.put(n,gr(t));case 8:return e.abrupt("return",i.done);case 11:e.prev=11,e.t0=e.catch(0),e.t0 instanceof rn?Jn.warn(e.t0.message):(s=ir.create("idb-set",{originalErrorMessage:null===e.t0||void 0===e.t0?void 0:e.t0.message}),Jn.warn(s.message));case 14:case"end":return e.stop()}}),e,null,[[0,11]])}))),mr.apply(this,arguments)}function gr(e){return"".concat(e.name,"!").concat(e.options.appId)}var yr=function(){function e(t){var n=this;et(this,e),this.container=t,this._heartbeatsCache=null;var r=this.container.getProvider("app").getImmediate();this._storage=new wr(r),this._heartbeatsCachePromise=this._storage.read().then((function(e){return n._heartbeatsCache=e,e}))}return nt(e,[{key:"triggerHeartbeat",value:function(){var e=Vt(Bt().mark((function e(){var t,n,r;return Bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.container.getProvider("platform-logger").getImmediate(),n=t.getPlatformInfoString(),r=br(),null!==this._heartbeatsCache){e.next=7;break}return e.next=6,this._heartbeatsCachePromise;case 6:this._heartbeatsCache=e.sent;case 7:if(this._heartbeatsCache.lastSentHeartbeatDate!==r&&!this._heartbeatsCache.heartbeats.some((function(e){return e.date===r}))){e.next=11;break}return e.abrupt("return");case 11:this._heartbeatsCache.heartbeats.push({date:r,agent:n});case 12:return this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((function(e){var t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),e.abrupt("return",this._storage.overwrite(this._heartbeatsCache));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getHeartbeatsHeader",value:function(){var e=Vt(Bt().mark((function e(){var t,n,r,i,a;return Bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==this._heartbeatsCache){e.next=3;break}return e.next=3,this._heartbeatsCachePromise;case 3:if(null!==this._heartbeatsCache&&0!==this._heartbeatsCache.heartbeats.length){e.next=5;break}return e.abrupt("return","");case 5:if(t=br(),n=kr(this._heartbeatsCache.heartbeats),r=n.heartbeatsToSend,i=n.unsentEntries,a=qt(JSON.stringify({version:2,heartbeats:r})),this._heartbeatsCache.lastSentHeartbeatDate=t,!(i.length>0)){e.next=15;break}return this._heartbeatsCache.heartbeats=i,e.next=13,this._storage.overwrite(this._heartbeatsCache);case 13:e.next=17;break;case 15:this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache);case 17:return e.abrupt("return",a);case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function br(){return(new Date).toISOString().substring(0,10)}function kr(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024,r=[],i=e.slice(),a=Ut(e);try{var s=function(){var e=t.value,a=r.find((function(t){return t.agent===e.agent}));if(a){if(a.dates.push(e.date),Tr(r)>n)return a.dates.pop(),"break"}else if(r.push({agent:e.agent,dates:[e.date]}),Tr(r)>n)return r.pop(),"break";i=i.slice(1)};for(a.s();!(t=a.n()).done;){var o=s();if("break"===o)break}}catch(c){a.e(c)}finally{a.f()}return{heartbeatsToSend:r,unsentEntries:i}}var xr,wr=function(){function e(t){et(this,e),this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}return nt(e,[{key:"runIndexedDBEnvironmentCheck",value:function(){var e=Vt(Bt().mark((function e(){return Bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Qt()){e.next=4;break}return e.abrupt("return",!1);case 4:return e.abrupt("return",new Promise((function(e,t){try{var n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=function(){i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=function(){n=!1},i.onerror=function(){var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(a){t(a)}})).then((function(){return!0})).catch((function(){return!1})));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"read",value:function(){var e=Vt(Bt().mark((function e(){var t;return Bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return",{heartbeats:[]});case 7:return e.next=9,fr(this.app);case 9:return t=e.sent,e.abrupt("return",t||{heartbeats:[]});case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"overwrite",value:function(){var e=Vt(Bt().mark((function e(t){var n,r;return Bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",vr(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:t.heartbeats}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"add",value:function(){var e=Vt(Bt().mark((function e(t){var n,r;return Bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",vr(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:[].concat(te(r.heartbeats),te(t.heartbeats))}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();function Tr(e){return qt(JSON.stringify({version:2,heartbeats:e})).length}xr="",tr(new mn("platform-logger",(function(e){return new Kn(e)}),"PRIVATE")),tr(new mn("heartbeat",(function(e){return new yr(e)}),"PRIVATE")),ur(qn,Yn,xr),ur(qn,Yn,"esm2017"),ur("fire-js","");function Er(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Object.create;var _r;Object.create;function Sr(){return X({},"dependent-sdk-initialized-before-auth","Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.")}var Ar=Sr,Cr=new an("auth","Firebase",Sr()),Ir=new An("@firebase/auth");function Rr(e){if(Ir.logLevel<=kn.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];Ir.error.apply(Ir,["Auth (".concat(sr,"): ").concat(e)].concat(n))}}function Pr(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw Or.apply(void 0,[e].concat(n))}function Dr(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Or.apply(void 0,[e].concat(n))}function Nr(e,t,n){var r=Object.assign(Object.assign({},Ar()),X({},t,n));return new an("auth","Firebase",r).create(t,{appName:e.name})}function Or(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){var i,a=n[0],s=te(n.slice(1));return s[0]&&(s[0].appName=e.name),(i=e._errorFactory).create.apply(i,[a].concat(te(s)))}return Cr.create.apply(Cr,[e].concat(n))}function Lr(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw Or.apply(void 0,[t].concat(r))}}function Mr(e){var t="INTERNAL ASSERTION FAILED: "+e;throw Rr(t),new Error(t)}function jr(e,t){e||Mr(t)}var Fr=new Map;function Ur(e){jr(e instanceof Function,"Expected a class definition");var t=Fr.get(e);return t?(jr(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,Fr.set(e,t),t)}function Br(e,t){var n=nr(e,"auth");if(n.isInitialized()){var r=n.getImmediate();if(cn(n.getOptions(),null!==t&&void 0!==t?t:{}))return r;Pr(r,"already-initialized")}return n.initialize({options:t})}function Gr(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function Vr(){return"http:"===Hr()||"https:"===Hr()}function Hr(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}function zr(){return!("undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(Vr()||function(){var e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}()||"connection"in navigator))||navigator.onLine}var Wr=function(){function e(t,n){et(this,e),this.shortDelay=t,this.longDelay=n,jr(n>t,"Short delay should be less than long delay!"),this.isMobile="undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Jt())||"object"===typeof navigator&&"ReactNative"===navigator.product}return nt(e,[{key:"get",value:function(){return zr()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}]),e}();function Kr(e,t){jr(e.emulator,"Emulator should always be set here");var n=e.emulator.url;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}var qr=function(){function e(){et(this,e)}return nt(e,null,[{key:"initialize",value:function(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}},{key:"fetch",value:function(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:void Mr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"headers",value:function(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:void Mr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"response",value:function(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:void Mr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}]),e}(),Yr=(X(_r={},"CREDENTIAL_MISMATCH","custom-token-mismatch"),X(_r,"MISSING_CUSTOM_TOKEN","internal-error"),X(_r,"INVALID_IDENTIFIER","invalid-email"),X(_r,"MISSING_CONTINUE_URI","internal-error"),X(_r,"INVALID_PASSWORD","wrong-password"),X(_r,"MISSING_PASSWORD","internal-error"),X(_r,"EMAIL_EXISTS","email-already-in-use"),X(_r,"PASSWORD_LOGIN_DISABLED","operation-not-allowed"),X(_r,"INVALID_IDP_RESPONSE","invalid-credential"),X(_r,"INVALID_PENDING_TOKEN","invalid-credential"),X(_r,"FEDERATED_USER_ID_ALREADY_LINKED","credential-already-in-use"),X(_r,"MISSING_REQ_TYPE","internal-error"),X(_r,"EMAIL_NOT_FOUND","user-not-found"),X(_r,"RESET_PASSWORD_EXCEED_LIMIT","too-many-requests"),X(_r,"EXPIRED_OOB_CODE","expired-action-code"),X(_r,"INVALID_OOB_CODE","invalid-action-code"),X(_r,"MISSING_OOB_CODE","internal-error"),X(_r,"CREDENTIAL_TOO_OLD_LOGIN_AGAIN","requires-recent-login"),X(_r,"INVALID_ID_TOKEN","invalid-user-token"),X(_r,"TOKEN_EXPIRED","user-token-expired"),X(_r,"USER_NOT_FOUND","user-token-expired"),X(_r,"TOO_MANY_ATTEMPTS_TRY_LATER","too-many-requests"),X(_r,"INVALID_CODE","invalid-verification-code"),X(_r,"INVALID_SESSION_INFO","invalid-verification-id"),X(_r,"INVALID_TEMPORARY_PROOF","invalid-credential"),X(_r,"MISSING_SESSION_INFO","missing-verification-id"),X(_r,"SESSION_EXPIRED","code-expired"),X(_r,"MISSING_ANDROID_PACKAGE_NAME","missing-android-pkg-name"),X(_r,"UNAUTHORIZED_DOMAIN","unauthorized-continue-uri"),X(_r,"INVALID_OAUTH_CLIENT_ID","invalid-oauth-client-id"),X(_r,"ADMIN_ONLY_OPERATION","admin-restricted-operation"),X(_r,"INVALID_MFA_PENDING_CREDENTIAL","invalid-multi-factor-session"),X(_r,"MFA_ENROLLMENT_NOT_FOUND","multi-factor-info-not-found"),X(_r,"MISSING_MFA_ENROLLMENT_ID","missing-multi-factor-info"),X(_r,"MISSING_MFA_PENDING_CREDENTIAL","missing-multi-factor-session"),X(_r,"SECOND_FACTOR_EXISTS","second-factor-already-in-use"),X(_r,"SECOND_FACTOR_LIMIT_EXCEEDED","maximum-second-factor-count-exceeded"),X(_r,"BLOCKING_FUNCTION_ERROR_RESPONSE","internal-error"),_r),Jr=new Wr(3e4,6e4);function Qr(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}function Xr(e,t,n,r){return Zr.apply(this,arguments)}function Zr(){return Zr=Vt(Bt().mark((function e(t,n,r,i){var a,s=arguments;return Bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=s.length>4&&void 0!==s[4]?s[4]:{},e.abrupt("return",$r(t,a,Vt(Bt().mark((function e(){var a,s,o,c;return Bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={},s={},i&&("GET"===n?s=i:a={body:JSON.stringify(i)}),o=ln(Object.assign({key:t.config.apiKey},s)).slice(1),e.next=6,t._getAdditionalHeaders();case 6:return(c=e.sent)["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode),e.abrupt("return",qr.fetch()(ri(t,t.config.apiHost,r,o),Object.assign({method:n,headers:c,referrerPolicy:"no-referrer"},a)));case 10:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e)}))),Zr.apply(this,arguments)}function $r(e,t,n){return ei.apply(this,arguments)}function ei(){return ei=Vt(Bt().mark((function e(t,n,r){var i,a,s,o,c,l,d,h,f,p;return Bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t._canInitEmulator=!1,i=Object.assign(Object.assign({},Yr),n),e.prev=2,a=new ii(t),e.next=6,Promise.race([r(),a.promise]);case 6:return s=e.sent,a.clearNetworkTimeout(),e.next=10,s.json();case 10:if(!("needConfirmation"in(o=e.sent))){e.next=13;break}throw ai(t,"account-exists-with-different-credential",o);case 13:if(!s.ok||"errorMessage"in o){e.next=17;break}return e.abrupt("return",o);case 17:if(c=s.ok?o.errorMessage:o.error.message,l=c.split(" : "),d=u(l,2),h=d[0],f=d[1],"FEDERATED_USER_ID_ALREADY_LINKED"!==h){e.next=23;break}throw ai(t,"credential-already-in-use",o);case 23:if("EMAIL_EXISTS"!==h){e.next=27;break}throw ai(t,"email-already-in-use",o);case 27:if("USER_DISABLED"!==h){e.next=29;break}throw ai(t,"user-disabled",o);case 29:if(p=i[h]||h.toLowerCase().replace(/[_\s]+/g,"-"),!f){e.next=34;break}throw Nr(t,p,f);case 34:Pr(t,p);case 35:e.next=42;break;case 37:if(e.prev=37,e.t0=e.catch(2),!(e.t0 instanceof rn)){e.next=41;break}throw e.t0;case 41:Pr(t,"network-request-failed");case 42:case"end":return e.stop()}}),e,null,[[2,37]])}))),ei.apply(this,arguments)}function ti(e,t,n,r){return ni.apply(this,arguments)}function ni(){return ni=Vt(Bt().mark((function e(t,n,r,i){var a,s,o=arguments;return Bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=o.length>4&&void 0!==o[4]?o[4]:{},e.next=3,Xr(t,n,r,i,a);case 3:return"mfaPendingCredential"in(s=e.sent)&&Pr(t,"multi-factor-auth-required",{_serverResponse:s}),e.abrupt("return",s);case 6:case"end":return e.stop()}}),e)}))),ni.apply(this,arguments)}function ri(e,t,n,r){var i="".concat(t).concat(n,"?").concat(r);return e.config.emulator?Kr(e.config,i):"".concat(e.config.apiScheme,"://").concat(i)}var ii=function(){function e(t){var n=this;et(this,e),this.auth=t,this.timer=null,this.promise=new Promise((function(e,t){n.timer=setTimeout((function(){return t(Dr(n.auth,"network-request-failed"))}),Jr.get())}))}return nt(e,[{key:"clearNetworkTimeout",value:function(){clearTimeout(this.timer)}}]),e}();function ai(e,t,n){var r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);var i=Dr(e,t,r);return i.customData._tokenResponse=n,i}function si(e,t){return oi.apply(this,arguments)}function oi(){return oi=Vt(Bt().mark((function e(t,n){return Bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Xr(t,"POST","/v1/accounts:delete",n));case 1:case"end":return e.stop()}}),e)}))),oi.apply(this,arguments)}function ci(e,t){return ui.apply(this,arguments)}function ui(){return ui=Vt(Bt().mark((function e(t,n){return Bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Xr(t,"POST","/v1/accounts:lookup",n));case 1:case"end":return e.stop()}}),e)}))),ui.apply(this,arguments)}function li(e){if(e)try{var t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(n){}}function di(){return di=Vt(Bt().mark((function e(t){var n,r,i,a,s,o,c=arguments;return Bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=c.length>1&&void 0!==c[1]&&c[1],r=vn(t),e.next=4,r.getIdToken(n);case 4:return i=e.sent,Lr((a=fi(i))&&a.exp&&a.auth_time&&a.iat,r.auth,"internal-error"),s="object"===typeof a.firebase?a.firebase:void 0,o=null===s||void 0===s?void 0:s.sign_in_provider,e.abrupt("return",{claims:a,token:i,authTime:li(hi(a.auth_time)),issuedAtTime:li(hi(a.iat)),expirationTime:li(hi(a.exp)),signInProvider:o||null,signInSecondFactor:(null===s||void 0===s?void 0:s.sign_in_second_factor)||null});case 10:case"end":return e.stop()}}),e)}))),di.apply(this,arguments)}function hi(e){return 1e3*Number(e)}function fi(e){var t=u(e.split("."),3),n=t[0],r=t[1],i=t[2];if(void 0===n||void 0===r||void 0===i)return Rr("JWT malformed, contained fewer than 3 sections"),null;try{var a=Yt(r);return a?JSON.parse(a):(Rr("Failed to decode base64 JWT payload"),null)}catch(s){return Rr("Caught error parsing JWT payload as JSON",null===s||void 0===s?void 0:s.toString()),null}}function pi(e,t){return vi.apply(this,arguments)}function vi(){return vi=Vt(Bt().mark((function e(t,n){var r=arguments;return Bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r.length>2&&void 0!==r[2]&&r[2])){e.next=3;break}return e.abrupt("return",n);case 3:return e.prev=3,e.next=6,n;case 6:return e.abrupt("return",e.sent);case 9:if(e.prev=9,e.t0=e.catch(3),!(e.t0 instanceof rn&&mi(e.t0))){e.next=15;break}if(t.auth.currentUser!==t){e.next=15;break}return e.next=15,t.auth.signOut();case 15:throw e.t0;case 16:case"end":return e.stop()}}),e,null,[[3,9]])}))),vi.apply(this,arguments)}function mi(e){var t=e.code;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}var gi=function(){function e(t){et(this,e),this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}return nt(e,[{key:"_start",value:function(){this.isRunning||(this.isRunning=!0,this.schedule())}},{key:"_stop",value:function(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}},{key:"getInterval",value:function(e){var t;if(e){var n=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),n}this.errorBackoff=3e4;var r=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,r)}},{key:"schedule",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isRunning){var n=this.getInterval(t);this.timerId=setTimeout(Vt(Bt().mark((function t(){return Bt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.iteration();case 2:case"end":return t.stop()}}),t)}))),n)}}},{key:"iteration",value:function(){var e=Vt(Bt().mark((function e(){return Bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.user.getIdToken(!0);case 3:e.next=9;break;case 5:return e.prev=5,e.t0=e.catch(0),(null===e.t0||void 0===e.t0?void 0:e.t0.code)==="auth/".concat("network-request-failed")&&this.schedule(!0),e.abrupt("return");case 9:this.schedule();case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(){return e.apply(this,arguments)}}()}]),e}(),yi=function(){function e(t,n){et(this,e),this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}return nt(e,[{key:"_initializeTime",value:function(){this.lastSignInTime=li(this.lastLoginAt),this.creationTime=li(this.createdAt)}},{key:"_copy",value:function(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}},{key:"toJSON",value:function(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}]),e}();function bi(e){return ki.apply(this,arguments)}function ki(){return ki=Vt(Bt().mark((function e(t){var n,r,i,a,s,o,c,u,l,d,h;return Bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.auth,e.next=3,t.getIdToken();case 3:return i=e.sent,e.next=6,pi(t,ci(r,{idToken:i}));case 6:Lr(null===(a=e.sent)||void 0===a?void 0:a.users.length,r,"internal-error"),s=a.users[0],t._notifyReloadListener(s),o=(null===(n=s.providerUserInfo)||void 0===n?void 0:n.length)?Ti(s.providerUserInfo):[],c=wi(t.providerData,o),u=t.isAnonymous,l=!(t.email&&s.passwordHash)&&!(null===c||void 0===c?void 0:c.length),d=!!u&&l,h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:c,metadata:new yi(s.createdAt,s.lastLoginAt),isAnonymous:d},Object.assign(t,h);case 17:case"end":return e.stop()}}),e)}))),ki.apply(this,arguments)}function xi(){return(xi=Vt(Bt().mark((function e(t){var n;return Bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=vn(t),e.next=3,bi(n);case 3:return e.next=5,n.auth._persistUserIfCurrent(n);case 5:n.auth._notifyListenersIfCurrent(n);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function wi(e,t){var n=e.filter((function(e){return!t.some((function(t){return t.providerId===e.providerId}))}));return[].concat(te(n),te(t))}function Ti(e){return e.map((function(e){var t=e.providerId,n=Er(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}}))}function Ei(e,t){return _i.apply(this,arguments)}function _i(){return _i=Vt(Bt().mark((function e(t,n){var r;return Bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$r(t,{},Vt(Bt().mark((function e(){var r,i,a,s,o,c;return Bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=ln({grant_type:"refresh_token",refresh_token:n}).slice(1),i=t.config,a=i.tokenApiHost,s=i.apiKey,o=ri(t,a,"/v1/token","key=".concat(s)),e.next=5,t._getAdditionalHeaders();case 5:return(c=e.sent)["Content-Type"]="application/x-www-form-urlencoded",e.abrupt("return",qr.fetch()(o,{method:"POST",headers:c,body:r}));case 8:case"end":return e.stop()}}),e)}))));case 2:return r=e.sent,e.abrupt("return",{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token});case 4:case"end":return e.stop()}}),e)}))),_i.apply(this,arguments)}var Si=function(){function e(){et(this,e),this.refreshToken=null,this.accessToken=null,this.expirationTime=null}return nt(e,[{key:"isExpired",get:function(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}},{key:"updateFromServerResponse",value:function(e){Lr(e.idToken,"internal-error"),Lr("undefined"!==typeof e.idToken,"internal-error"),Lr("undefined"!==typeof e.refreshToken,"internal-error");var t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):function(e){var t=fi(e);return Lr(t,"internal-error"),Lr("undefined"!==typeof t.exp,"internal-error"),Lr("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}},{key:"getToken",value:function(){var e=Vt(Bt().mark((function e(t){var n,r=arguments;return Bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.length>1&&void 0!==r[1]&&r[1],Lr(!this.accessToken||this.refreshToken,t,"user-token-expired"),n||!this.accessToken||this.isExpired){e.next=4;break}return e.abrupt("return",this.accessToken);case 4:if(!this.refreshToken){e.next=8;break}return e.next=7,this.refresh(t,this.refreshToken);case 7:return e.abrupt("return",this.accessToken);case 8:return e.abrupt("return",null);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"clearRefreshToken",value:function(){this.refreshToken=null}},{key:"refresh",value:function(){var e=Vt(Bt().mark((function e(t,n){var r,i,a,s;return Bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ei(t,n);case 2:r=e.sent,i=r.accessToken,a=r.refreshToken,s=r.expiresIn,this.updateTokensAndExpiration(i,a,Number(s));case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"updateTokensAndExpiration",value:function(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}},{key:"toJSON",value:function(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}},{key:"_assign",value:function(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}},{key:"_clone",value:function(){return Object.assign(new e,this.toJSON())}},{key:"_performRefresh",value:function(){return Mr("not implemented")}}],[{key:"fromJSON",value:function(t,n){var r=n.refreshToken,i=n.accessToken,a=n.expirationTime,s=new e;return r&&(Lr("string"===typeof r,"internal-error",{appName:t}),s.refreshToken=r),i&&(Lr("string"===typeof i,"internal-error",{appName:t}),s.accessToken=i),a&&(Lr("number"===typeof a,"internal-error",{appName:t}),s.expirationTime=a),s}}]),e}();function Ai(e,t){Lr("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}var Ci=function(){function e(t){et(this,e);var n=t.uid,r=t.auth,i=t.stsTokenManager,a=Er(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new gi(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?te(a.providerData):[],this.metadata=new yi(a.createdAt||void 0,a.lastLoginAt||void 0)}return nt(e,[{key:"getIdToken",value:function(){var e=Vt(Bt().mark((function e(t){var n;return Bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,pi(this,this.stsTokenManager.getToken(this.auth,t));case 2:if(Lr(n=e.sent,this.auth,"internal-error"),this.accessToken===n){e.next=9;break}return this.accessToken=n,e.next=8,this.auth._persistUserIfCurrent(this);case 8:this.auth._notifyListenersIfCurrent(this);case 9:return e.abrupt("return",n);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getIdTokenResult",value:function(e){return function(e){return di.apply(this,arguments)}(this,e)}},{key:"reload",value:function(){return function(e){return xi.apply(this,arguments)}(this)}},{key:"_assign",value:function(e){this!==e&&(Lr(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((function(e){return Object.assign({},e)})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}},{key:"_clone",value:function(t){return new e(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}))}},{key:"_onReload",value:function(e){Lr(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}},{key:"_notifyReloadListener",value:function(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}},{key:"_startProactiveRefresh",value:function(){this.proactiveRefresh._start()}},{key:"_stopProactiveRefresh",value:function(){this.proactiveRefresh._stop()}},{key:"_updateTokensIfNecessary",value:function(){var e=Vt(Bt().mark((function e(t){var n,r,i=arguments;return Bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]&&i[1],r=!1,t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),r=!0),!n){e.next=6;break}return e.next=6,bi(this);case 6:return e.next=8,this.auth._persistUserIfCurrent(this);case 8:r&&this.auth._notifyListenersIfCurrent(this);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=Vt(Bt().mark((function e(){var t;return Bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getIdToken();case 2:return t=e.sent,e.next=5,pi(this,si(this.auth,{idToken:t}));case 5:return this.stsTokenManager.clearRefreshToken(),e.abrupt("return",this.auth.signOut());case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"toJSON",value:function(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((function(e){return Object.assign({},e)})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}},{key:"refreshToken",get:function(){return this.stsTokenManager.refreshToken||""}}],[{key:"_fromJSON",value:function(t,n){var r,i,a,s,o,c,u,l,d=null!==(r=n.displayName)&&void 0!==r?r:void 0,h=null!==(i=n.email)&&void 0!==i?i:void 0,f=null!==(a=n.phoneNumber)&&void 0!==a?a:void 0,p=null!==(s=n.photoURL)&&void 0!==s?s:void 0,v=null!==(o=n.tenantId)&&void 0!==o?o:void 0,m=null!==(c=n._redirectEventId)&&void 0!==c?c:void 0,g=null!==(u=n.createdAt)&&void 0!==u?u:void 0,y=null!==(l=n.lastLoginAt)&&void 0!==l?l:void 0,b=n.uid,k=n.emailVerified,x=n.isAnonymous,w=n.providerData,T=n.stsTokenManager;Lr(b&&T,t,"internal-error");var E=Si.fromJSON(this.name,T);Lr("string"===typeof b,t,"internal-error"),Ai(d,t.name),Ai(h,t.name),Lr("boolean"===typeof k,t,"internal-error"),Lr("boolean"===typeof x,t,"internal-error"),Ai(f,t.name),Ai(p,t.name),Ai(v,t.name),Ai(m,t.name),Ai(g,t.name),Ai(y,t.name);var _=new e({uid:b,auth:t,email:h,emailVerified:k,displayName:d,isAnonymous:x,photoURL:p,phoneNumber:f,tenantId:v,stsTokenManager:E,createdAt:g,lastLoginAt:y});return w&&Array.isArray(w)&&(_.providerData=w.map((function(e){return Object.assign({},e)}))),m&&(_._redirectEventId=m),_}},{key:"_fromIdTokenResponse",value:function(){var t=Vt(Bt().mark((function t(n,r){var i,a,s,o=arguments;return Bt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=o.length>2&&void 0!==o[2]&&o[2],(a=new Si).updateFromServerResponse(r),s=new e({uid:r.localId,auth:n,stsTokenManager:a,isAnonymous:i}),t.next=6,bi(s);case 6:return t.abrupt("return",s);case 7:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}]),e}(),Ii=function(){function e(){et(this,e),this.type="NONE",this.storage={}}return nt(e,[{key:"_isAvailable",value:function(){var e=Vt(Bt().mark((function e(){return Bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!0);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=Vt(Bt().mark((function e(t,n){return Bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.storage[t]=n;case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=Vt(Bt().mark((function e(t){var n;return Bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.storage[t],e.abrupt("return",void 0===n?null:n);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=Vt(Bt().mark((function e(t){return Bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:delete this.storage[t];case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),e}();Ii.type="NONE";var Ri=Ii;function Pi(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}var Di=function(){function e(t,n,r){et(this,e),this.persistence=t,this.auth=n,this.userKey=r;var i=this.auth,a=i.config,s=i.name;this.fullUserKey=Pi(this.userKey,a.apiKey,s),this.fullPersistenceKey=Pi("persistence",a.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}return nt(e,[{key:"setCurrentUser",value:function(e){return this.persistence._set(this.fullUserKey,e.toJSON())}},{key:"getCurrentUser",value:function(){var e=Vt(Bt().mark((function e(){var t;return Bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.persistence._get(this.fullUserKey);case 2:return t=e.sent,e.abrupt("return",t?Ci._fromJSON(this.auth,t):null);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"removeCurrentUser",value:function(){return this.persistence._remove(this.fullUserKey)}},{key:"savePersistenceForRedirect",value:function(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}},{key:"setPersistence",value:function(){var e=Vt(Bt().mark((function e(t){var n;return Bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.persistence!==t){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.getCurrentUser();case 4:return n=e.sent,e.next=7,this.removeCurrentUser();case 7:if(this.persistence=t,!n){e.next=10;break}return e.abrupt("return",this.setCurrentUser(n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}}],[{key:"create",value:function(){var t=Vt(Bt().mark((function t(n,r){var i,a,s,o,c,u,l,d,h,f,p,v=arguments;return Bt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=v.length>2&&void 0!==v[2]?v[2]:"authUser",r.length){t.next=3;break}return t.abrupt("return",new e(Ur(Ri),n,i));case 3:return t.next=5,Promise.all(r.map(function(){var e=Vt(Bt().mark((function e(t){return Bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._isAvailable();case 2:if(!e.sent){e.next=4;break}return e.abrupt("return",t);case 4:return e.abrupt("return",void 0);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 5:a=t.sent.filter((function(e){return e})),s=a[0]||Ur(Ri),o=Pi(i,n.config.apiKey,n.name),c=null,u=Ut(r),t.prev=10,u.s();case 12:if((l=u.n()).done){t.next=29;break}return d=l.value,t.prev=14,t.next=17,d._get(o);case 17:if(!(h=t.sent)){t.next=23;break}return f=Ci._fromJSON(n,h),d!==s&&(c=f),s=d,t.abrupt("break",29);case 23:t.next=27;break;case 25:t.prev=25,t.t0=t.catch(14);case 27:t.next=12;break;case 29:t.next=34;break;case 31:t.prev=31,t.t1=t.catch(10),u.e(t.t1);case 34:return t.prev=34,u.f(),t.finish(34);case 37:if(p=a.filter((function(e){return e._shouldAllowMigration})),s._shouldAllowMigration&&p.length){t.next=40;break}return t.abrupt("return",new e(s,n,i));case 40:if(s=p[0],!c){t.next=44;break}return t.next=44,s._set(o,c.toJSON());case 44:return t.next=46,Promise.all(r.map(function(){var e=Vt(Bt().mark((function e(t){return Bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t===s){e.next=8;break}return e.prev=1,e.next=4,t._remove(o);case 4:e.next=8;break;case 6:e.prev=6,e.t0=e.catch(1);case 8:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t){return e.apply(this,arguments)}}()));case 46:return t.abrupt("return",new e(s,n,i));case 47:case"end":return t.stop()}}),t,null,[[10,31,34,37],[14,25]])})));return function(e,n){return t.apply(this,arguments)}}()}]),e}();function Ni(e){var t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(ji(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(Oi(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(Ui(t))return"Blackberry";if(Bi(t))return"Webos";if(Li(t))return"Safari";if((t.includes("chrome/")||Mi(t))&&!t.includes("edge/"))return"Chrome";if(Fi(t))return"Android";var n=e.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);return 2===(null===n||void 0===n?void 0:n.length)?n[1]:"Other"}function Oi(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Jt();return/firefox\//i.test(e)}function Li(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Jt(),t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function Mi(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Jt();return/crios\//i.test(e)}function ji(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Jt();return/iemobile/i.test(e)}function Fi(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Jt();return/android/i.test(e)}function Ui(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Jt();return/blackberry/i.test(e)}function Bi(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Jt();return/webos/i.test(e)}function Gi(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Jt();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function Vi(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Jt();return Gi(t)&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}function Hi(){return function(){var e=Jt();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}()&&10===document.documentMode}function zi(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Jt();return Gi(e)||Fi(e)||Bi(e)||Ui(e)||/windows phone/i.test(e)||ji(e)}function Wi(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=Ni(Jt());break;case"Worker":t="".concat(Ni(Jt()),"-").concat(e);break;default:t=e}var r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(sr,"/").concat(r)}var Ki=function(){function e(t){et(this,e),this.auth=t,this.queue=[]}return nt(e,[{key:"pushCallback",value:function(e,t){var n=this,r=function(t){return new Promise((function(n,r){try{n(e(t))}catch(i){r(i)}}))};r.onAbort=t,this.queue.push(r);var i=this.queue.length-1;return function(){n.queue[i]=function(){return Promise.resolve()}}}},{key:"runMiddleware",value:function(){var e=Vt(Bt().mark((function e(t){var n,r,i,a,s,o,c;return Bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.auth.currentUser!==t){e.next=2;break}return e.abrupt("return");case 2:n=[],e.prev=3,r=Ut(this.queue),e.prev=5,r.s();case 7:if((i=r.n()).done){e.next=14;break}return a=i.value,e.next=11,a(t);case 11:a.onAbort&&n.push(a.onAbort);case 12:e.next=7;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(5),r.e(e.t0);case 19:return e.prev=19,r.f(),e.finish(19);case 22:e.next=30;break;case 24:e.prev=24,e.t1=e.catch(3),n.reverse(),s=Ut(n);try{for(s.s();!(o=s.n()).done;){c=o.value;try{c()}catch(be){}}}catch(u){s.e(u)}finally{s.f()}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===e.t1||void 0===e.t1?void 0:e.t1.message});case 30:case"end":return e.stop()}}),e,this,[[3,24],[5,16,19,22]])})));return function(t){return e.apply(this,arguments)}}()}]),e}(),qi=function(){function e(t,n,r){et(this,e),this.app=t,this.heartbeatServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Ji(this),this.idTokenSubscription=new Ji(this),this.beforeStateQueue=new Ki(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Cr,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=r.sdkClientVersion}return nt(e,[{key:"_initializeWithPersistence",value:function(e,t){var n=this;return t&&(this._popupRedirectResolver=Ur(t)),this._initializationPromise=this.queue(Vt(Bt().mark((function r(){var i,a;return Bt().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!n._deleted){r.next=2;break}return r.abrupt("return");case 2:return r.next=4,Di.create(n,e);case 4:if(n.persistenceManager=r.sent,!n._deleted){r.next=7;break}return r.abrupt("return");case 7:if(!(null===(i=n._popupRedirectResolver)||void 0===i?void 0:i._shouldInitProactively)){r.next=15;break}return r.prev=8,r.next=11,n._popupRedirectResolver._initialize(n);case 11:r.next=15;break;case 13:r.prev=13,r.t0=r.catch(8);case 15:return r.next=17,n.initializeCurrentUser(t);case 17:if(n.lastNotifiedUid=(null===(a=n.currentUser)||void 0===a?void 0:a.uid)||null,!n._deleted){r.next=20;break}return r.abrupt("return");case 20:n._isInitialized=!0;case 21:case"end":return r.stop()}}),r,null,[[8,13]])})))),this._initializationPromise}},{key:"_onStorageEvent",value:function(){var e=Vt(Bt().mark((function e(){var t;return Bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._deleted){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.assertedPersistence.getCurrentUser();case 4:if(t=e.sent,this.currentUser||t){e.next=7;break}return e.abrupt("return");case 7:if(!this.currentUser||!t||this.currentUser.uid!==t.uid){e.next=12;break}return this._currentUser._assign(t),e.next=11,this.currentUser.getIdToken();case 11:return e.abrupt("return");case 12:return e.next=14,this._updateCurrentUser(t,!0);case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeCurrentUser",value:function(){var e=Vt(Bt().mark((function e(t){var n,r,i,a,s,o,c;return Bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.assertedPersistence.getCurrentUser();case 2:if(r=e.sent,i=r,a=!1,!t||!this.config.authDomain){e.next=14;break}return e.next=8,this.getOrInitRedirectPersistenceManager();case 8:return s=null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId,o=null===i||void 0===i?void 0:i._redirectEventId,e.next=12,this.tryRedirectSignIn(t);case 12:c=e.sent,s&&s!==o||!(null===c||void 0===c?void 0:c.user)||(i=c.user,a=!0);case 14:if(i){e.next=16;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 16:if(i._redirectEventId){e.next=32;break}if(!a){e.next=27;break}return e.prev=18,e.next=21,this.beforeStateQueue.runMiddleware(i);case 21:e.next=27;break;case 23:e.prev=23,e.t0=e.catch(18),i=r,this._popupRedirectResolver._overrideRedirectResult(this,(function(){return Promise.reject(e.t0)}));case 27:if(!i){e.next=31;break}return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(i));case 31:return e.abrupt("return",this.directlySetCurrentUser(null));case 32:return Lr(this._popupRedirectResolver,this,"argument-error"),e.next=35,this.getOrInitRedirectPersistenceManager();case 35:if(!this.redirectUser||this.redirectUser._redirectEventId!==i._redirectEventId){e.next=37;break}return e.abrupt("return",this.directlySetCurrentUser(i));case 37:return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(i));case 38:case"end":return e.stop()}}),e,this,[[18,23]])})));return function(t){return e.apply(this,arguments)}}()},{key:"tryRedirectSignIn",value:function(){var e=Vt(Bt().mark((function e(t){var n;return Bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=null,e.prev=1,e.next=4,this._popupRedirectResolver._completeRedirectFn(this,t,!0);case 4:n=e.sent,e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(1),e.next=11,this._setRedirectUser(null);case 11:return e.abrupt("return",n);case 12:case"end":return e.stop()}}),e,this,[[1,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"reloadAndSetCurrentUserOrClear",value:function(){var e=Vt(Bt().mark((function e(t){return Bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,bi(t);case 3:e.next=9;break;case 5:if(e.prev=5,e.t0=e.catch(0),(null===e.t0||void 0===e.t0?void 0:e.t0.code)==="auth/".concat("network-request-failed")){e.next=9;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 9:return e.abrupt("return",this.directlySetCurrentUser(t));case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(t){return e.apply(this,arguments)}}()},{key:"useDeviceLanguage",value:function(){this.languageCode=function(){if("undefined"===typeof navigator)return null;var e=navigator;return e.languages&&e.languages[0]||e.language||null}()}},{key:"_delete",value:function(){var e=Vt(Bt().mark((function e(){return Bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this._deleted=!0;case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"updateCurrentUser",value:function(){var e=Vt(Bt().mark((function e(t){var n;return Bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=t?vn(t):null)&&Lr(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),e.abrupt("return",this._updateCurrentUser(n&&n._clone(this)));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_updateCurrentUser",value:function(){var e=Vt(Bt().mark((function e(t){var n,r=this,i=arguments;return Bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]&&i[1],!this._deleted){e.next=3;break}return e.abrupt("return");case 3:if(t&&Lr(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n){e.next=7;break}return e.next=7,this.beforeStateQueue.runMiddleware(t);case 7:return e.abrupt("return",this.queue(Vt(Bt().mark((function e(){return Bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.directlySetCurrentUser(t);case 2:r.notifyAuthListeners();case 3:case"end":return e.stop()}}),e)})))));case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signOut",value:function(){var e=Vt(Bt().mark((function e(){return Bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.beforeStateQueue.runMiddleware(null);case 2:if(!this.redirectPersistenceManager&&!this._popupRedirectResolver){e.next=5;break}return e.next=5,this._setRedirectUser(null);case 5:return e.abrupt("return",this._updateCurrentUser(null,!0));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setPersistence",value:function(e){var t=this;return this.queue(Vt(Bt().mark((function n(){return Bt().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.assertedPersistence.setPersistence(Ur(e));case 2:case"end":return n.stop()}}),n)}))))}},{key:"_getPersistence",value:function(){return this.assertedPersistence.persistence.type}},{key:"_updateErrorMap",value:function(e){this._errorFactory=new an("auth","Firebase",e())}},{key:"onAuthStateChanged",value:function(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}},{key:"beforeAuthStateChanged",value:function(e,t){return this.beforeStateQueue.pushCallback(e,t)}},{key:"onIdTokenChanged",value:function(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}},{key:"toJSON",value:function(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}},{key:"_setRedirectUser",value:function(){var e=Vt(Bt().mark((function e(t,n){var r;return Bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getOrInitRedirectPersistenceManager(n);case 2:return r=e.sent,e.abrupt("return",null===t?r.removeCurrentUser():r.setCurrentUser(t));case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getOrInitRedirectPersistenceManager",value:function(){var e=Vt(Bt().mark((function e(t){var n;return Bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.redirectPersistenceManager){e.next=9;break}return Lr(n=t&&Ur(t)||this._popupRedirectResolver,this,"argument-error"),e.next=5,Di.create(this,[Ur(n._redirectPersistence)],"redirectUser");case 5:return this.redirectPersistenceManager=e.sent,e.next=8,this.redirectPersistenceManager.getCurrentUser();case 8:this.redirectUser=e.sent;case 9:return e.abrupt("return",this.redirectPersistenceManager);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_redirectUserForId",value:function(){var e=Vt(Bt().mark((function e(t){var n,r;return Bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._isInitialized){e.next=3;break}return e.next=3,this.queue(Vt(Bt().mark((function e(){return Bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))));case 3:if((null===(n=this._currentUser)||void 0===n?void 0:n._redirectEventId)!==t){e.next=5;break}return e.abrupt("return",this._currentUser);case 5:if((null===(r=this.redirectUser)||void 0===r?void 0:r._redirectEventId)!==t){e.next=7;break}return e.abrupt("return",this.redirectUser);case 7:return e.abrupt("return",null);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_persistUserIfCurrent",value:function(){var e=Vt(Bt().mark((function e(t){var n=this;return Bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t!==this.currentUser){e.next=2;break}return e.abrupt("return",this.queue(Vt(Bt().mark((function e(){return Bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",n.directlySetCurrentUser(t));case 1:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_notifyListenersIfCurrent",value:function(e){e===this.currentUser&&this.notifyAuthListeners()}},{key:"_key",value:function(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}},{key:"_startProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}},{key:"_stopProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}},{key:"_currentUser",get:function(){return this.currentUser}},{key:"notifyAuthListeners",value:function(){var e,t;if(this._isInitialized){this.idTokenSubscription.next(this.currentUser);var n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}}},{key:"registerStateListener",value:function(e,t,n,r){var i=this;if(this._deleted)return function(){};var a="function"===typeof t?t:t.next.bind(t),s=this._isInitialized?Promise.resolve():this._initializationPromise;return Lr(s,this,"internal-error"),s.then((function(){return a(i.currentUser)})),"function"===typeof t?e.addObserver(t,n,r):e.addObserver(t)}},{key:"directlySetCurrentUser",value:function(){var e=Vt(Bt().mark((function e(t){return Bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,!t){e.next=8;break}return e.next=6,this.assertedPersistence.setCurrentUser(t);case 6:e.next=10;break;case 8:return e.next=10,this.assertedPersistence.removeCurrentUser();case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"queue",value:function(e){return this.operations=this.operations.then(e,e),this.operations}},{key:"assertedPersistence",get:function(){return Lr(this.persistenceManager,this,"internal-error"),this.persistenceManager}},{key:"_logFramework",value:function(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Wi(this.config.clientPlatform,this._getFrameworks()))}},{key:"_getFrameworks",value:function(){return this.frameworks}},{key:"_getAdditionalHeaders",value:function(){var e=Vt(Bt().mark((function e(){var t,n,r;return Bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=X({},"X-Client-Version",this.clientVersion),this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId),e.next=4,null===(t=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getHeartbeatsHeader();case 4:return(r=e.sent)&&(n["X-Firebase-Client"]=r),e.abrupt("return",n);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function Yi(e){return vn(e)}var Ji=function(){function e(t){var n=this;et(this,e),this.auth=t,this.observer=null,this.addObserver=function(e,t){var n=new fn(e,t);return n.subscribe.bind(n)}((function(e){return n.observer=e}))}return nt(e,[{key:"next",get:function(){return Lr(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}]),e}();function Qi(e,t,n){var r=Yi(e);Lr(r._canInitEmulator,r,"emulator-config-failed"),Lr(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");var i=!!(null===n||void 0===n?void 0:n.disableWarnings),a=Xi(t),s=function(e){var t=Xi(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};var r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){var a=i[1];return{host:a,port:Zi(r.substr(a.length+1))}}var s=u(r.split(":"),2);return{host:s[0],port:Zi(s[1])}}(t),o=s.host,c=s.port,l=null===c?"":":".concat(c);r.config.emulator={url:"".concat(a,"//").concat(o).concat(l,"/")},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:c,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function(){function e(){var e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function Xi(e){var t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function Zi(e){if(!e)return null;var t=Number(e);return isNaN(t)?null:t}var $i=function(){function e(t,n){et(this,e),this.providerId=t,this.signInMethod=n}return nt(e,[{key:"toJSON",value:function(){return Mr("not implemented")}},{key:"_getIdTokenResponse",value:function(e){return Mr("not implemented")}},{key:"_linkToIdToken",value:function(e,t){return Mr("not implemented")}},{key:"_getReauthenticationResolver",value:function(e){return Mr("not implemented")}}]),e}();function ea(e,t){return ta.apply(this,arguments)}function ta(){return ta=Vt(Bt().mark((function e(t,n){return Bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Xr(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)}))),ta.apply(this,arguments)}function na(e,t){return ra.apply(this,arguments)}function ra(){return ra=Vt(Bt().mark((function e(t,n){return Bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ti(t,"POST","/v1/accounts:signInWithPassword",Qr(t,n)));case 1:case"end":return e.stop()}}),e)}))),ra.apply(this,arguments)}function ia(e,t){return aa.apply(this,arguments)}function aa(){return aa=Vt(Bt().mark((function e(t,n){return Bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ti(t,"POST","/v1/accounts:signInWithEmailLink",Qr(t,n)));case 1:case"end":return e.stop()}}),e)}))),aa.apply(this,arguments)}function sa(e,t){return oa.apply(this,arguments)}function oa(){return oa=Vt(Bt().mark((function e(t,n){return Bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ti(t,"POST","/v1/accounts:signInWithEmailLink",Qr(t,n)));case 1:case"end":return e.stop()}}),e)}))),oa.apply(this,arguments)}var ca=function(e){it(n,e);var t=ut(n);function n(e,r,i){var a,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return et(this,n),(a=t.call(this,"password",i))._email=e,a._password=r,a._tenantId=s,a}return nt(n,[{key:"toJSON",value:function(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}},{key:"_getIdTokenResponse",value:function(){var e=Vt(Bt().mark((function e(t){return Bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?4:5;break;case 3:return e.abrupt("return",na(t,{returnSecureToken:!0,email:this._email,password:this._password}));case 4:return e.abrupt("return",ia(t,{email:this._email,oobCode:this._password}));case 5:Pr(t,"internal-error");case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_linkToIdToken",value:function(){var e=Vt(Bt().mark((function e(t,n){return Bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?4:5;break;case 3:return e.abrupt("return",ea(t,{idToken:n,returnSecureToken:!0,email:this._email,password:this._password}));case 4:return e.abrupt("return",sa(t,{idToken:n,email:this._email,oobCode:this._password}));case 5:Pr(t,"internal-error");case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_getReauthenticationResolver",value:function(e){return this._getIdTokenResponse(e)}}],[{key:"_fromEmailAndPassword",value:function(e,t){return new n(e,t,"password")}},{key:"_fromEmailAndCode",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return new n(e,t,"emailLink",r)}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}}]),n}($i);function ua(e,t){return la.apply(this,arguments)}function la(){return la=Vt(Bt().mark((function e(t,n){return Bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ti(t,"POST","/v1/accounts:signInWithIdp",Qr(t,n)));case 1:case"end":return e.stop()}}),e)}))),la.apply(this,arguments)}var da=function(e){it(n,e);var t=ut(n);function n(){var e;return et(this,n),(e=t.apply(this,arguments)).pendingToken=null,e}return nt(n,[{key:"toJSON",value:function(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}},{key:"_getIdTokenResponse",value:function(e){return ua(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,ua(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,ua(e,t)}},{key:"buildRequest",value:function(){var e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{var t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=ln(t)}return e}}],[{key:"_fromParams",value:function(e){var t=new n(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Pr("argument-error"),t}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e,r=t.providerId,i=t.signInMethod,a=Er(t,["providerId","signInMethod"]);if(!r||!i)return null;var s=new n(r,i);return s.idToken=a.idToken||void 0,s.accessToken=a.accessToken||void 0,s.secret=a.secret,s.nonce=a.nonce,s.pendingToken=a.pendingToken||null,s}}]),n}($i);function ha(e,t){return fa.apply(this,arguments)}function fa(){return fa=Vt(Bt().mark((function e(t,n){return Bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Xr(t,"POST","/v1/accounts:sendVerificationCode",Qr(t,n)));case 1:case"end":return e.stop()}}),e)}))),fa.apply(this,arguments)}function pa(){return pa=Vt(Bt().mark((function e(t,n){return Bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ti(t,"POST","/v1/accounts:signInWithPhoneNumber",Qr(t,n)));case 1:case"end":return e.stop()}}),e)}))),pa.apply(this,arguments)}function va(){return va=Vt(Bt().mark((function e(t,n){var r;return Bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ti(t,"POST","/v1/accounts:signInWithPhoneNumber",Qr(t,n));case 2:if(!(r=e.sent).temporaryProof){e.next=5;break}throw ai(t,"account-exists-with-different-credential",r);case 5:return e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)}))),va.apply(this,arguments)}var ma=X({},"USER_NOT_FOUND","user-not-found");function ga(){return ga=Vt(Bt().mark((function e(t,n){var r;return Bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object.assign(Object.assign({},n),{operation:"REAUTH"}),e.abrupt("return",ti(t,"POST","/v1/accounts:signInWithPhoneNumber",Qr(t,r),ma));case 2:case"end":return e.stop()}}),e)}))),ga.apply(this,arguments)}var ya=function(e){it(n,e);var t=ut(n);function n(e){var r;return et(this,n),(r=t.call(this,"phone","phone")).params=e,r}return nt(n,[{key:"_getIdTokenResponse",value:function(e){return function(e,t){return pa.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_linkToIdToken",value:function(e,t){return function(e,t){return va.apply(this,arguments)}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}},{key:"_getReauthenticationResolver",value:function(e){return function(e,t){return ga.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_makeVerificationRequest",value:function(){var e=this.params,t=e.temporaryProof,n=e.phoneNumber,r=e.verificationId,i=e.verificationCode;return t&&n?{temporaryProof:t,phoneNumber:n}:{sessionInfo:r,code:i}}},{key:"toJSON",value:function(){var e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}}],[{key:"_fromVerification",value:function(e,t){return new n({verificationId:e,verificationCode:t})}},{key:"_fromTokenResponse",value:function(e,t){return new n({phoneNumber:e,temporaryProof:t})}},{key:"fromJSON",value:function(e){"string"===typeof e&&(e=JSON.parse(e));var t=e,r=t.verificationId,i=t.verificationCode,a=t.phoneNumber,s=t.temporaryProof;return i||r||a||s?new n({verificationId:r,verificationCode:i,phoneNumber:a,temporaryProof:s}):null}}]),n}($i);var ba=function(){function e(t){var n,r,i,a,s,o;et(this,e);var c=dn(hn(t)),u=null!==(n=c.apiKey)&&void 0!==n?n:null,l=null!==(r=c.oobCode)&&void 0!==r?r:null,d=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(i=c.mode)&&void 0!==i?i:null);Lr(u&&l&&d,"argument-error"),this.apiKey=u,this.operation=d,this.code=l,this.continueUrl=null!==(a=c.continueUrl)&&void 0!==a?a:null,this.languageCode=null!==(s=c.languageCode)&&void 0!==s?s:null,this.tenantId=null!==(o=c.tenantId)&&void 0!==o?o:null}return nt(e,null,[{key:"parseLink",value:function(t){var n=function(e){var t=dn(hn(e)).link,n=t?dn(hn(t)).deep_link_id:null,r=dn(hn(e)).deep_link_id;return(r?dn(hn(r)).link:null)||r||n||t||e}(t);try{return new e(n)}catch(r){return null}}}]),e}();var ka=function(){function e(){et(this,e),this.providerId=e.PROVIDER_ID}return nt(e,null,[{key:"credential",value:function(e,t){return ca._fromEmailAndPassword(e,t)}},{key:"credentialWithLink",value:function(e,t){var n=ba.parseLink(t);return Lr(n,"argument-error"),ca._fromEmailAndCode(e,n.code,n.tenantId)}}]),e}();ka.PROVIDER_ID="password",ka.EMAIL_PASSWORD_SIGN_IN_METHOD="password",ka.EMAIL_LINK_SIGN_IN_METHOD="emailLink";var xa=function(){function e(t){et(this,e),this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}return nt(e,[{key:"setDefaultLanguage",value:function(e){this.defaultLanguageCode=e}},{key:"setCustomParameters",value:function(e){return this.customParameters=e,this}},{key:"getCustomParameters",value:function(){return this.customParameters}}]),e}(),wa=function(e){it(n,e);var t=ut(n);function n(){var e;return et(this,n),(e=t.apply(this,arguments)).scopes=[],e}return nt(n,[{key:"addScope",value:function(e){return this.scopes.includes(e)||this.scopes.push(e),this}},{key:"getScopes",value:function(){return te(this.scopes)}}]),n}(xa),Ta=function(e){it(n,e);var t=ut(n);function n(){return et(this,n),t.call(this,"facebook.com")}return nt(n,null,[{key:"credential",value:function(e){return da._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(r){return null}}}]),n}(wa);Ta.FACEBOOK_SIGN_IN_METHOD="facebook.com",Ta.PROVIDER_ID="facebook.com";var Ea=function(e){it(n,e);var t=ut(n);function n(){var e;return et(this,n),(e=t.call(this,"google.com")).addScope("profile"),e}return nt(n,null,[{key:"credential",value:function(e,t){return da._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthIdToken,i=t.oauthAccessToken;if(!r&&!i)return null;try{return n.credential(r,i)}catch(a){return null}}}]),n}(wa);Ea.GOOGLE_SIGN_IN_METHOD="google.com",Ea.PROVIDER_ID="google.com";var _a=function(e){it(n,e);var t=ut(n);function n(){return et(this,n),t.call(this,"github.com")}return nt(n,null,[{key:"credential",value:function(e){return da._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GITHUB_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(r){return null}}}]),n}(wa);_a.GITHUB_SIGN_IN_METHOD="github.com",_a.PROVIDER_ID="github.com";var Sa=function(e){it(n,e);var t=ut(n);function n(){return et(this,n),t.call(this,"twitter.com")}return nt(n,null,[{key:"credential",value:function(e,t){return da._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthAccessToken,i=t.oauthTokenSecret;if(!r||!i)return null;try{return n.credential(r,i)}catch(a){return null}}}]),n}(wa);Sa.TWITTER_SIGN_IN_METHOD="twitter.com",Sa.PROVIDER_ID="twitter.com";var Aa=function(){function e(t){et(this,e),this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}return nt(e,null,[{key:"_fromIdTokenResponse",value:function(){var t=Vt(Bt().mark((function t(n,r,i){var a,s,o,c,u=arguments;return Bt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=u.length>3&&void 0!==u[3]&&u[3],t.next=3,Ci._fromIdTokenResponse(n,i,a);case 3:return s=t.sent,o=Ca(i),c=new e({user:s,providerId:o,_tokenResponse:i,operationType:r}),t.abrupt("return",c);case 7:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()},{key:"_forOperation",value:function(){var t=Vt(Bt().mark((function t(n,r,i){var a;return Bt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n._updateTokensIfNecessary(i,!0);case 2:return a=Ca(i),t.abrupt("return",new e({user:n,providerId:a,_tokenResponse:i,operationType:r}));case 4:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()}]),e}();function Ca(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}var Ia=function(e){it(n,e);var t=ut(n);function n(e,r,i,a){var s,o;return et(this,n),(s=t.call(this,r.code,r.message)).operationType=i,s.user=a,Object.setPrototypeOf(ot(s),n.prototype),s.customData={appName:e.name,tenantId:null!==(o=e.tenantId)&&void 0!==o?o:void 0,_serverResponse:r.customData._serverResponse,operationType:i},s}return nt(n,null,[{key:"_fromErrorAndOperation",value:function(e,t,r,i){return new n(e,t,r,i)}}]),n}(rn);function Ra(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((function(n){if(n.code==="auth/".concat("multi-factor-auth-required"))throw Ia._fromErrorAndOperation(e,n,t,r);throw n}))}function Pa(e,t){return Da.apply(this,arguments)}function Da(){return Da=Vt(Bt().mark((function e(t,n){var r,i,a=arguments;return Bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>2&&void 0!==a[2]&&a[2],e.t0=pi,e.t1=t,e.t2=n,e.t3=t.auth,e.next=7,t.getIdToken();case 7:return e.t4=e.sent,e.t5=e.t2._linkToIdToken.call(e.t2,e.t3,e.t4),e.t6=r,e.next=12,(0,e.t0)(e.t1,e.t5,e.t6);case 12:return i=e.sent,e.abrupt("return",Aa._forOperation(t,"link",i));case 14:case"end":return e.stop()}}),e)}))),Da.apply(this,arguments)}function Na(e,t){return Oa.apply(this,arguments)}function Oa(){return Oa=Vt(Bt().mark((function e(t,n){var r,i,a,s,o,c,u=arguments;return Bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>2&&void 0!==u[2]&&u[2],i=t.auth,a="reauthenticate",e.prev=3,e.next=6,pi(t,Ra(i,a,n,t),r);case 6:return Lr((s=e.sent).idToken,i,"internal-error"),Lr(o=fi(s.idToken),i,"internal-error"),c=o.sub,Lr(t.uid===c,i,"user-mismatch"),e.abrupt("return",Aa._forOperation(t,a,s));case 15:throw e.prev=15,e.t0=e.catch(3),(null===e.t0||void 0===e.t0?void 0:e.t0.code)==="auth/".concat("user-not-found")&&Pr(i,"user-mismatch"),e.t0;case 19:case"end":return e.stop()}}),e,null,[[3,15]])}))),Oa.apply(this,arguments)}function La(e,t){return Ma.apply(this,arguments)}function Ma(){return Ma=Vt(Bt().mark((function e(t,n){var r,i,a,s,o=arguments;return Bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>2&&void 0!==o[2]&&o[2],i="signIn",e.next=4,Ra(t,i,n);case 4:return a=e.sent,e.next=7,Aa._fromIdTokenResponse(t,i,a);case 7:if(s=e.sent,r){e.next=11;break}return e.next=11,t._updateCurrentUser(s.user);case 11:return e.abrupt("return",s);case 12:case"end":return e.stop()}}),e)}))),Ma.apply(this,arguments)}function ja(e,t){return Fa.apply(this,arguments)}function Fa(){return Fa=Vt(Bt().mark((function e(t,n){return Bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",La(Yi(t),n));case 1:case"end":return e.stop()}}),e)}))),Fa.apply(this,arguments)}function Ua(e,t,n){return ja(vn(e),ka.credential(t,n))}function Ba(e,t,n,r){return vn(e).onIdTokenChanged(t,n,r)}function Ga(e,t,n){return vn(e).beforeAuthStateChanged(t,n)}function Va(e,t){return Xr(e,"POST","/v2/accounts/mfaEnrollment:start",Qr(e,t))}new WeakMap;var Ha="__sak",za=function(){function e(t,n){et(this,e),this.storageRetriever=t,this.type=n}return nt(e,[{key:"_isAvailable",value:function(){try{return this.storage?(this.storage.setItem(Ha,"1"),this.storage.removeItem(Ha),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}},{key:"_set",value:function(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}},{key:"_get",value:function(e){var t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}},{key:"_remove",value:function(e){return this.storage.removeItem(e),Promise.resolve()}},{key:"storage",get:function(){return this.storageRetriever()}}]),e}();var Wa=function(e){it(n,e);var t=ut(n);function n(){var e;return et(this,n),(e=t.call(this,(function(){return window.localStorage}),"LOCAL")).boundEventHandler=function(t,n){return e.onStorageEvent(t,n)},e.listeners={},e.localCache={},e.pollTimer=null,e.safariLocalStorageNotSynced=function(){var e=Jt();return Li(e)||Gi(e)}()&&function(){try{return!(!window||window===window.top)}catch(e){return!1}}(),e.fallbackToPolling=zi(),e._shouldAllowMigration=!0,e}return nt(n,[{key:"forAllChangedKeys",value:function(e){for(var t=0,n=Object.keys(this.listeners);t<n.length;t++){var r=n[t],i=this.storage.getItem(r),a=this.localCache[r];i!==a&&e(r,a,i)}}},{key:"onStorageEvent",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e.key){var r=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){var i=this.storage.getItem(r);if(e.newValue!==i)null!==e.newValue?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!n)return}var a=function(){var e=t.storage.getItem(r);(n||t.localCache[r]!==e)&&t.notifyListeners(r,e)},s=this.storage.getItem(r);Hi()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,10):a()}else this.forAllChangedKeys((function(e,n,r){t.notifyListeners(e,r)}))}},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t?JSON.parse(t):t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval((function(){e.forAllChangedKeys((function(t,n,r){e.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:r}),!0)}))}),1e3)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"attachListener",value:function(){window.addEventListener("storage",this.boundEventHandler)}},{key:"detachListener",value:function(){window.removeEventListener("storage",this.boundEventHandler)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}},{key:"_set",value:function(){var e=Vt(Bt().mark((function e(t,r){return Bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ft(at(n.prototype),"_set",this).call(this,t,r);case 2:this.localCache[t]=JSON.stringify(r);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=Vt(Bt().mark((function e(t){var r;return Bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ft(at(n.prototype),"_get",this).call(this,t);case 2:return r=e.sent,this.localCache[t]=JSON.stringify(r),e.abrupt("return",r);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=Vt(Bt().mark((function e(t){return Bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ft(at(n.prototype),"_remove",this).call(this,t);case 2:delete this.localCache[t];case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(za);Wa.type="LOCAL";var Ka=Wa,qa=function(e){it(n,e);var t=ut(n);function n(){return et(this,n),t.call(this,(function(){return window.sessionStorage}),"SESSION")}return nt(n,[{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),n}(za);qa.type="SESSION";var Ya=qa;function Ja(e){return Promise.all(e.map(function(){var e=Vt(Bt().mark((function e(t){var n;return Bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t;case 3:return n=e.sent,e.abrupt("return",{fulfilled:!0,value:n});case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",{fulfilled:!1,reason:e.t0});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()))}var Qa=function(){function e(t){et(this,e),this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}return nt(e,[{key:"isListeningto",value:function(e){return this.eventTarget===e}},{key:"handleEvent",value:function(){var e=Vt(Bt().mark((function e(t){var n,r,i,a,s,o,c,u;return Bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=(n=t).data,i=r.eventId,a=r.eventType,s=r.data,null===(o=this.handlersMap[a])||void 0===o?void 0:o.size){e.next=5;break}return e.abrupt("return");case 5:return n.ports[0].postMessage({status:"ack",eventId:i,eventType:a}),c=Array.from(o).map(function(){var e=Vt(Bt().mark((function e(t){return Bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t(n.origin,s));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=9,Ja(c);case 9:u=e.sent,n.ports[0].postMessage({status:"done",eventId:i,eventType:a,response:u});case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_subscribe",value:function(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}},{key:"_unsubscribe",value:function(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}],[{key:"_getInstance",value:function(t){var n=this.receivers.find((function(e){return e.isListeningto(t)}));if(n)return n;var r=new e(t);return this.receivers.push(r),r}}]),e}();function Xa(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="",r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}Qa.receivers=[];var Za=function(){function e(t){et(this,e),this.target=t,this.handlers=new Set}return nt(e,[{key:"removeMessageHandler",value:function(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}},{key:"_send",value:function(){var e=Vt(Bt().mark((function e(t,n){var r,i,a,s,o=this,c=arguments;return Bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=c.length>2&&void 0!==c[2]?c[2]:50,i="undefined"!==typeof MessageChannel?new MessageChannel:null){e.next=4;break}throw new Error("connection_unavailable");case 4:return e.abrupt("return",new Promise((function(e,c){var u=Xa("",20);i.port1.start();var l=setTimeout((function(){c(new Error("unsupported_event"))}),r);s={messageChannel:i,onMessage:function(t){var n=t;if(n.data.eventId===u)switch(n.data.status){case"ack":clearTimeout(l),a=setTimeout((function(){c(new Error("timeout"))}),3e3);break;case"done":clearTimeout(a),e(n.data.response);break;default:clearTimeout(l),clearTimeout(a),c(new Error("invalid_response"))}}},o.handlers.add(s),i.port1.addEventListener("message",s.onMessage),o.target.postMessage({eventType:t,eventId:u,data:n},[i.port2])})).finally((function(){s&&o.removeMessageHandler(s)})));case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}();function $a(){return window}function es(){return"undefined"!==typeof $a().WorkerGlobalScope&&"function"===typeof $a().importScripts}function ts(){return ns.apply(this,arguments)}function ns(){return(ns=Vt(Bt().mark((function e(){var t;return Bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===navigator||void 0===navigator?void 0:navigator.serviceWorker){e.next=2;break}return e.abrupt("return",null);case 2:return e.prev=2,e.next=5,navigator.serviceWorker.ready;case 5:return t=e.sent,e.abrupt("return",t.active);case 9:return e.prev=9,e.t0=e.catch(2),e.abrupt("return",null);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}function rs(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}var is="firebaseLocalStorageDb",as="firebaseLocalStorage",ss="fbase_key",os=function(){function e(t){et(this,e),this.request=t}return nt(e,[{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.request.addEventListener("success",(function(){t(e.request.result)})),e.request.addEventListener("error",(function(){n(e.request.error)}))}))}}]),e}();function cs(e,t){return e.transaction([as],t?"readwrite":"readonly").objectStore(as)}function us(){var e=indexedDB.deleteDatabase(is);return new os(e).toPromise()}function ls(){var e=indexedDB.open(is,1);return new Promise((function(t,n){e.addEventListener("error",(function(){n(e.error)})),e.addEventListener("upgradeneeded",(function(){var t=e.result;try{t.createObjectStore(as,{keyPath:ss})}catch(r){n(r)}})),e.addEventListener("success",Vt(Bt().mark((function n(){var r;return Bt().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if((r=e.result).objectStoreNames.contains(as)){n.next=12;break}return r.close(),n.next=5,us();case 5:return n.t0=t,n.next=8,ls();case 8:n.t1=n.sent,(0,n.t0)(n.t1),n.next=13;break;case 12:t(r);case 13:case"end":return n.stop()}}),n)}))))}))}function ds(e,t,n){return hs.apply(this,arguments)}function hs(){return(hs=Vt(Bt().mark((function e(t,n,r){var i,a;return Bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=cs(t,!0).put((X(i={},ss,n),X(i,"value",r),i)),e.abrupt("return",new os(a).toPromise());case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function fs(e,t){return ps.apply(this,arguments)}function ps(){return(ps=Vt(Bt().mark((function e(t,n){var r,i;return Bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=cs(t,!1).get(n),e.next=3,new os(r).toPromise();case 3:return i=e.sent,e.abrupt("return",void 0===i?null:i.value);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function vs(e,t){var n=cs(e,!0).delete(t);return new os(n).toPromise()}var ms=function(){function e(){et(this,e),this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((function(){}),(function(){}))}return nt(e,[{key:"_openDb",value:function(){var e=Vt(Bt().mark((function e(){return Bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.db){e.next=2;break}return e.abrupt("return",this.db);case 2:return e.next=4,ls();case 4:return this.db=e.sent,e.abrupt("return",this.db);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_withRetries",value:function(){var e=Vt(Bt().mark((function e(t){var n,r;return Bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=0;case 1:return e.prev=2,e.next=5,this._openDb();case 5:return r=e.sent,e.next=8,t(r);case 8:return e.abrupt("return",e.sent);case 11:if(e.prev=11,e.t0=e.catch(2),!(n++>3)){e.next=15;break}throw e.t0;case 15:this.db&&(this.db.close(),this.db=void 0);case 16:e.next=1;break;case 18:case"end":return e.stop()}}),e,this,[[2,11]])})));return function(t){return e.apply(this,arguments)}}()},{key:"initializeServiceWorkerMessaging",value:function(){var e=Vt(Bt().mark((function e(){return Bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",es()?this.initializeReceiver():this.initializeSender());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeReceiver",value:function(){var e=Vt(Bt().mark((function e(){var t=this;return Bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.receiver=Qa._getInstance(es()?self:null),this.receiver._subscribe("keyChanged",function(){var e=Vt(Bt().mark((function e(n,r){var i;return Bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._poll();case 2:return i=e.sent,e.abrupt("return",{keyProcessed:i.includes(r.key)});case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),this.receiver._subscribe("ping",function(){var e=Vt(Bt().mark((function e(t,n){return Bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",["keyChanged"]);case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeSender",value:function(){var e=Vt(Bt().mark((function e(){var t,n,r;return Bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ts();case 2:if(this.activeServiceWorker=e.sent,this.activeServiceWorker){e.next=5;break}return e.abrupt("return");case 5:return this.sender=new Za(this.activeServiceWorker),e.next=8,this.sender._send("ping",{},800);case 8:if(r=e.sent){e.next=11;break}return e.abrupt("return");case 11:(null===(t=r[0])||void 0===t?void 0:t.fulfilled)&&(null===(n=r[0])||void 0===n?void 0:n.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyServiceWorker",value:function(){var e=Vt(Bt().mark((function e(t){return Bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.sender&&this.activeServiceWorker&&rs()===this.activeServiceWorker){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50);case 5:e.next=9;break;case 7:e.prev=7,e.t0=e.catch(2);case 9:case"end":return e.stop()}}),e,this,[[2,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_isAvailable",value:function(){var e=Vt(Bt().mark((function e(){var t;return Bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,indexedDB){e.next=3;break}return e.abrupt("return",!1);case 3:return e.next=5,ls();case 5:return t=e.sent,e.next=8,ds(t,Ha,"1");case 8:return e.next=10,vs(t,Ha);case 10:return e.abrupt("return",!0);case 13:e.prev=13,e.t0=e.catch(0);case 15:return e.abrupt("return",!1);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}()},{key:"_withPendingWrite",value:function(){var e=Vt(Bt().mark((function e(t){return Bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.pendingWrites++,e.prev=1,e.next=4,t();case 4:return e.prev=4,this.pendingWrites--,e.finish(4);case 7:case"end":return e.stop()}}),e,this,[[1,,4,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=Vt(Bt().mark((function e(t,n){var r=this;return Bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(Vt(Bt().mark((function e(){return Bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r._withRetries((function(e){return ds(e,t,n)}));case 2:return r.localCache[t]=n,e.abrupt("return",r.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=Vt(Bt().mark((function e(t){var n;return Bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){return fs(e,t)}));case 2:return n=e.sent,this.localCache[t]=n,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=Vt(Bt().mark((function e(t){var n=this;return Bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(Vt(Bt().mark((function e(){return Bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n._withRetries((function(e){return vs(e,t)}));case 2:return delete n.localCache[t],e.abrupt("return",n.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_poll",value:function(){var e=Vt(Bt().mark((function e(){var t,n,r,i,a,s,o,c,u,l,d;return Bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){var t=cs(e,!1).getAll();return new os(t).toPromise()}));case 2:if(t=e.sent){e.next=5;break}return e.abrupt("return",[]);case 5:if(0===this.pendingWrites){e.next=7;break}return e.abrupt("return",[]);case 7:n=[],r=new Set,i=Ut(t);try{for(i.s();!(a=i.n()).done;)s=a.value,o=s.fbase_key,c=s.value,r.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(c)&&(this.notifyListeners(o,c),n.push(o))}catch(h){i.e(h)}finally{i.f()}for(u=0,l=Object.keys(this.localCache);u<l.length;u++)d=l[u],this.localCache[d]&&!r.has(d)&&(this.notifyListeners(d,null),n.push(d));return e.abrupt("return",n);case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval(Vt(Bt().mark((function t(){return Bt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e._poll());case 1:case"end":return t.stop()}}),t)}))),800)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}]),e}();ms.type="LOCAL";var gs=ms;function ys(e,t){return Xr(e,"POST","/v2/accounts/mfaSignIn:start",Qr(e,t))}function bs(e){return new Promise((function(t,n){var r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=function(e){var t=Dr("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)}))}function ks(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}ks("rcb"),new Wr(3e4,6e4);var xs="recaptcha";function ws(e,t,n){return Ts.apply(this,arguments)}function Ts(){return Ts=Vt(Bt().mark((function e(t,n,r){var i,a,s,o,c,u,l,d,h;return Bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.verify();case 2:if(a=e.sent,e.prev=3,Lr("string"===typeof a,t,"argument-error"),Lr(r.type===xs,t,"argument-error"),!("session"in(s="string"===typeof n?{phoneNumber:n}:n))){e.next=26;break}if(o=s.session,!("phoneNumber"in s)){e.next=17;break}return Lr("enroll"===o.type,t,"internal-error"),e.next=13,Va(t,{idToken:o.credential,phoneEnrollmentInfo:{phoneNumber:s.phoneNumber,recaptchaToken:a}});case 13:return c=e.sent,e.abrupt("return",c.phoneSessionInfo.sessionInfo);case 17:return Lr("signin"===o.type,t,"internal-error"),Lr(u=(null===(i=s.multiFactorHint)||void 0===i?void 0:i.uid)||s.multiFactorUid,t,"missing-multi-factor-info"),e.next=22,ys(t,{mfaPendingCredential:o.credential,mfaEnrollmentId:u,phoneSignInInfo:{recaptchaToken:a}});case 22:return l=e.sent,e.abrupt("return",l.phoneResponseInfo.sessionInfo);case 24:e.next=31;break;case 26:return e.next=28,ha(t,{phoneNumber:s.phoneNumber,recaptchaToken:a});case 28:return d=e.sent,h=d.sessionInfo,e.abrupt("return",h);case 31:return e.prev=31,r._reset(),e.finish(31);case 34:case"end":return e.stop()}}),e,null,[[3,,31,34]])}))),Ts.apply(this,arguments)}var Es=function(){function e(t){et(this,e),this.providerId=e.PROVIDER_ID,this.auth=Yi(t)}return nt(e,[{key:"verifyPhoneNumber",value:function(e,t){return ws(this.auth,e,vn(t))}}],[{key:"credential",value:function(e,t){return ya._fromVerification(e,t)}},{key:"credentialFromResult",value:function(t){var n=t;return e.credentialFromTaggedObject(n)}},{key:"credentialFromError",value:function(t){return e.credentialFromTaggedObject(t.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.phoneNumber,r=t.temporaryProof;return n&&r?ya._fromTokenResponse(n,r):null}}]),e}();function _s(e,t){return t?Ur(t):(Lr(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}Es.PROVIDER_ID="phone",Es.PHONE_SIGN_IN_METHOD="phone";var Ss=function(e){it(n,e);var t=ut(n);function n(e){var r;return et(this,n),(r=t.call(this,"custom","custom")).params=e,r}return nt(n,[{key:"_getIdTokenResponse",value:function(e){return ua(e,this._buildIdpRequest())}},{key:"_linkToIdToken",value:function(e,t){return ua(e,this._buildIdpRequest(t))}},{key:"_getReauthenticationResolver",value:function(e){return ua(e,this._buildIdpRequest())}},{key:"_buildIdpRequest",value:function(e){var t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}]),n}($i);function As(e){return La(e.auth,new Ss(e),e.bypassAuthState)}function Cs(e){var t=e.auth,n=e.user;return Lr(n,t,"internal-error"),Na(n,new Ss(e),e.bypassAuthState)}function Is(e){return Rs.apply(this,arguments)}function Rs(){return Rs=Vt(Bt().mark((function e(t){var n,r;return Bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.auth,Lr(r=t.user,n,"internal-error"),e.abrupt("return",Pa(r,new Ss(t),t.bypassAuthState));case 3:case"end":return e.stop()}}),e)}))),Rs.apply(this,arguments)}var Ps=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];et(this,e),this.auth=t,this.resolver=r,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}return nt(e,[{key:"execute",value:function(){var e=this;return new Promise(function(){var t=Vt(Bt().mark((function t(n,r){return Bt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.pendingPromise={resolve:n,reject:r},t.prev=1,t.next=4,e.resolver._initialize(e.auth);case 4:return e.eventManager=t.sent,t.next=7,e.onExecution();case 7:e.eventManager.registerConsumer(e),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),e.reject(t.t0);case 13:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e,n){return t.apply(this,arguments)}}())}},{key:"onAuthEvent",value:function(){var e=Vt(Bt().mark((function e(t){var n,r,i,a,s,o,c;return Bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.urlResponse,r=t.sessionId,i=t.postBody,a=t.tenantId,s=t.error,o=t.type,!s){e.next=4;break}return this.reject(s),e.abrupt("return");case 4:return c={auth:this.auth,requestUri:n,sessionId:r,tenantId:a||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState},e.prev=5,e.t0=this,e.next=9,this.getIdpTask(o)(c);case 9:e.t1=e.sent,e.t0.resolve.call(e.t0,e.t1),e.next=16;break;case 13:e.prev=13,e.t2=e.catch(5),this.reject(e.t2);case 16:case"end":return e.stop()}}),e,this,[[5,13]])})));return function(t){return e.apply(this,arguments)}}()},{key:"onError",value:function(e){this.reject(e)}},{key:"getIdpTask",value:function(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return As;case"linkViaPopup":case"linkViaRedirect":return Is;case"reauthViaPopup":case"reauthViaRedirect":return Cs;default:Pr(this.auth,"internal-error")}}},{key:"resolve",value:function(e){jr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}},{key:"reject",value:function(e){jr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}},{key:"unregisterAndCleanUp",value:function(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}]),e}(),Ds=new Wr(2e3,1e4);var Ns=function(e){it(n,e);var t=ut(n);function n(e,r,i,a,s){var o;return et(this,n),(o=t.call(this,e,r,a,s)).provider=i,o.authWindow=null,o.pollId=null,n.currentPopupAction&&n.currentPopupAction.cancel(),n.currentPopupAction=ot(o),o}return nt(n,[{key:"executeNotNull",value:function(){var e=Vt(Bt().mark((function e(){var t;return Bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.execute();case 2:return Lr(t=e.sent,this.auth,"internal-error"),e.abrupt("return",t);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=Vt(Bt().mark((function e(){var t,n=this;return Bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return jr(1===this.filter.length,"Popup operations only handle one event"),t=Xa(),e.next=4,this.resolver._openPopup(this.auth,this.provider,this.filter[0],t);case 4:this.authWindow=e.sent,this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch((function(e){n.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(function(e){e||n.reject(Dr(n.auth,"web-storage-unsupported"))})),this.pollUserCancellation();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"eventId",get:function(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}},{key:"cancel",value:function(){this.reject(Dr(this.auth,"cancelled-popup-request"))}},{key:"cleanUp",value:function(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,n.currentPopupAction=null}},{key:"pollUserCancellation",value:function(){var e=this;!function t(){var n,r;(null===(r=null===(n=e.authWindow)||void 0===n?void 0:n.window)||void 0===r?void 0:r.closed)?e.pollId=window.setTimeout((function(){e.pollId=null,e.reject(Dr(e.auth,"popup-closed-by-user"))}),2e3):e.pollId=window.setTimeout(t,Ds.get())}()}}]),n}(Ps);Ns.currentPopupAction=null;var Os=new Map,Ls=function(e){it(n,e);var t=ut(n);function n(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return et(this,n),(i=t.call(this,e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,a)).eventId=null,i}return nt(n,[{key:"execute",value:function(){var e=Vt(Bt().mark((function e(){var t,r;return Bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=Os.get(this.auth._key())){e.next=21;break}return e.prev=2,e.next=5,Ms(this.resolver,this.auth);case 5:if(!e.sent){e.next=12;break}return e.next=9,Ft(at(n.prototype),"execute",this).call(this);case 9:e.t0=e.sent,e.next=13;break;case 12:e.t0=null;case 13:r=e.t0,t=function(){return Promise.resolve(r)},e.next=20;break;case 17:e.prev=17,e.t1=e.catch(2),t=function(){return Promise.reject(e.t1)};case 20:Os.set(this.auth._key(),t);case 21:return this.bypassAuthState||Os.set(this.auth._key(),(function(){return Promise.resolve(null)})),e.abrupt("return",t());case 23:case"end":return e.stop()}}),e,this,[[2,17]])})));return function(){return e.apply(this,arguments)}}()},{key:"onAuthEvent",value:function(){var e=Vt(Bt().mark((function e(t){var r;return Bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("signInViaRedirect"!==t.type){e.next=4;break}return e.abrupt("return",Ft(at(n.prototype),"onAuthEvent",this).call(this,t));case 4:if("unknown"!==t.type){e.next=7;break}return this.resolve(null),e.abrupt("return");case 7:if(!t.eventId){e.next=17;break}return e.next=10,this.auth._redirectUserForId(t.eventId);case 10:if(!(r=e.sent)){e.next=16;break}return this.user=r,e.abrupt("return",Ft(at(n.prototype),"onAuthEvent",this).call(this,t));case 16:this.resolve(null);case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=Vt(Bt().mark((function e(){return Bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"cleanUp",value:function(){}}]),n}(Ps);function Ms(e,t){return js.apply(this,arguments)}function js(){return js=Vt(Bt().mark((function e(t,n){var r,i,a;return Bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Bs(n),i=Us(t),e.next=4,i._isAvailable();case 4:if(e.sent){e.next=6;break}return e.abrupt("return",!1);case 6:return e.next=8,i._get(r);case 8:return e.t0=e.sent,a="true"===e.t0,e.next=12,i._remove(r);case 12:return e.abrupt("return",a);case 13:case"end":return e.stop()}}),e)}))),js.apply(this,arguments)}function Fs(e,t){Os.set(e._key(),t)}function Us(e){return Ur(e._redirectPersistence)}function Bs(e){return Pi("pendingRedirect",e.config.apiKey,e.name)}function Gs(e,t){return Vs.apply(this,arguments)}function Vs(){return Vs=Vt(Bt().mark((function e(t,n){var r,i,a,s,o,c=arguments;return Bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>2&&void 0!==c[2]&&c[2],i=Yi(t),a=_s(i,n),s=new Ls(i,a,r),e.next=6,s.execute();case 6:if(!(o=e.sent)||r){e.next=13;break}return delete o.user._redirectEventId,e.next=11,i._persistUserIfCurrent(o.user);case 11:return e.next=13,i._setRedirectUser(null,n);case 13:return e.abrupt("return",o);case 14:case"end":return e.stop()}}),e)}))),Vs.apply(this,arguments)}var Hs=function(){function e(t){et(this,e),this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}return nt(e,[{key:"registerConsumer",value:function(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}},{key:"unregisterConsumer",value:function(e){this.consumers.delete(e)}},{key:"onEvent",value:function(e){var t=this;if(this.hasEventBeenHandled(e))return!1;var n=!1;return this.consumers.forEach((function(r){t.isEventForConsumer(e,r)&&(n=!0,t.sendToConsumer(e,r),t.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Ws(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}},{key:"sendToConsumer",value:function(e,t){var n;if(e.error&&!Ws(e)){var r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(Dr(this.auth,r))}else t.onAuthEvent(e)}},{key:"isEventForConsumer",value:function(e,t){var n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}},{key:"hasEventBeenHandled",value:function(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(zs(e))}},{key:"saveEventToCache",value:function(e){this.cachedEventUids.add(zs(e)),this.lastProcessedEventTime=Date.now()}}]),e}();function zs(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((function(e){return e})).join("-")}function Ws(e){var t=e.type,n=e.error;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}function Ks(e){return qs.apply(this,arguments)}function qs(){return qs=Vt(Bt().mark((function e(t){var n,r=arguments;return Bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:{},e.abrupt("return",Xr(t,"GET","/v1/projects",n));case 2:case"end":return e.stop()}}),e)}))),qs.apply(this,arguments)}var Ys=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Js=/^https?/;function Qs(){return Qs=Vt(Bt().mark((function e(t){var n,r,i,a,s;return Bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.config.emulator){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,Ks(t);case 4:n=e.sent,r=n.authorizedDomains,i=Ut(r),e.prev=7,i.s();case 9:if((a=i.n()).done){e.next=20;break}if(s=a.value,e.prev=11,!Xs(s)){e.next=14;break}return e.abrupt("return");case 14:e.next=18;break;case 16:e.prev=16,e.t0=e.catch(11);case 18:e.next=9;break;case 20:e.next=25;break;case 22:e.prev=22,e.t1=e.catch(7),i.e(e.t1);case 25:return e.prev=25,i.f(),e.finish(25);case 28:Pr(t,"unauthorized-domain");case 29:case"end":return e.stop()}}),e,null,[[7,22,25,28],[11,16]])}))),Qs.apply(this,arguments)}function Xs(e){var t=Gr(),n=new URL(t),r=n.protocol,i=n.hostname;if(e.startsWith("chrome-extension://")){var a=new URL(e);return""===a.hostname&&""===i?"chrome-extension:"===r&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===r&&a.hostname===i}if(!Js.test(r))return!1;if(Ys.test(e))return i===e;var s=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(i)}var Zs=new Wr(3e4,6e4);function $s(){var e=$a().___jsl;if(null===e||void 0===e?void 0:e.H)for(var t=0,n=Object.keys(e.H);t<n.length;t++){var r=n[t];if(e.H[r].r=e.H[r].r||[],e.H[r].L=e.H[r].L||[],e.H[r].r=te(e.H[r].L),e.CP)for(var i=0;i<e.CP.length;i++)e.CP[i]=null}}var eo=null;function to(e){return eo=eo||function(e){return new Promise((function(t,n){var r,i,a;function s(){$s(),gapi.load("gapi.iframes",{callback:function(){t(gapi.iframes.getContext())},ontimeout:function(){$s(),n(Dr(e,"network-request-failed"))},timeout:Zs.get()})}if(null===(i=null===(r=$a().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(a=$a().gapi)||void 0===a?void 0:a.load)){var o=ks("iframefcb");return $a()[o]=function(){gapi.load?s():n(Dr(e,"network-request-failed"))},bs("https://apis.google.com/js/api.js?onload=".concat(o)).catch((function(e){return n(e)}))}s()}})).catch((function(e){throw eo=null,e}))}(e),eo}var no=new Wr(5e3,15e3),ro={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},io=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function ao(e){var t=e.config;Lr(t.authDomain,e,"auth-domain-config-required");var n=t.emulator?Kr(t,"emulator/auth/iframe"):"https://".concat(e.config.authDomain,"/").concat("__/auth/iframe"),r={apiKey:t.apiKey,appName:e.name,v:sr},i=io.get(e.config.apiHost);i&&(r.eid=i);var a=e._getFrameworks();return a.length&&(r.fw=a.join(",")),"".concat(n,"?").concat(ln(r).slice(1))}function so(e){return oo.apply(this,arguments)}function oo(){return oo=Vt(Bt().mark((function e(t){var n,r;return Bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,to(t);case 2:return n=e.sent,Lr(r=$a().gapi,t,"internal-error"),e.abrupt("return",n.open({where:document.body,url:ao(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:ro,dontclear:!0},(function(e){return new Promise(function(){var n=Vt(Bt().mark((function n(r,i){var a,s,o;return Bt().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return o=function(){$a().clearTimeout(s),r(e)},n.next=3,e.restyle({setHideOnLeave:!1});case 3:a=Dr(t,"network-request-failed"),s=$a().setTimeout((function(){i(a)}),no.get()),e.ping(o).then(o,(function(){i(a)}));case 6:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}())})));case 6:case"end":return e.stop()}}),e)}))),oo.apply(this,arguments)}var co={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},uo="_blank",lo="http://localhost",ho=function(){function e(t){et(this,e),this.window=t,this.associatedEvent=null}return nt(e,[{key:"close",value:function(){if(this.window)try{this.window.close()}catch(e){}}}]),e}();function fo(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600,a=Math.max((window.screen.availHeight-i)/2,0).toString(),s=Math.max((window.screen.availWidth-r)/2,0).toString(),o="",c=Object.assign(Object.assign({},co),{width:r.toString(),height:i.toString(),top:a,left:s}),l=Jt().toLowerCase();n&&(o=Mi(l)?uo:n),Oi(l)&&(t=t||lo,c.scrollbars="yes");var d=Object.entries(c).reduce((function(e,t){var n=u(t,2),r=n[0],i=n[1];return"".concat(e).concat(r,"=").concat(i,",")}),"");if(Vi(l)&&"_self"!==o)return po(t||"",o),new ho(null);var h=window.open(t||"",o,d);Lr(h,e,"popup-blocked");try{h.focus()}catch(f){}return new ho(h)}function po(e,t){var n=document.createElement("a");n.href=e,n.target=t;var r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}var vo="__/auth/handler",mo="emulator/auth/handler";function go(e,t,n,r,i,a){Lr(e.config.authDomain,e,"auth-domain-config-required"),Lr(e.config.apiKey,e,"invalid-api-key");var s={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:sr,eventId:i};if(t instanceof xa){t.setDefaultLanguage(e.languageCode),s.providerId=t.providerId||"",function(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}(t.getCustomParameters())||(s.customParameters=JSON.stringify(t.getCustomParameters()));for(var o=0,c=Object.entries(a||{});o<c.length;o++){var l=u(c[o],2),d=l[0],h=l[1];s[d]=h}}if(t instanceof wa){var f=t.getScopes().filter((function(e){return""!==e}));f.length>0&&(s.scopes=f.join(","))}e.tenantId&&(s.tid=e.tenantId);for(var p=s,v=0,m=Object.keys(p);v<m.length;v++){var g=m[v];void 0===p[g]&&delete p[g]}return"".concat(function(e){var t=e.config;if(!t.emulator)return"https://".concat(t.authDomain,"/").concat(vo);return Kr(t,mo)}(e),"?").concat(ln(p).slice(1))}var yo="webStorageSupport",bo=function(){function e(){et(this,e),this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Ya,this._completeRedirectFn=Gs,this._overrideRedirectResult=Fs}return nt(e,[{key:"_openPopup",value:function(){var e=Vt(Bt().mark((function e(t,n,r,i){var a,s;return Bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return jr(null===(a=this.eventManagers[t._key()])||void 0===a?void 0:a.manager,"_initialize() not called before _openPopup()"),s=go(t,n,r,Gr(),i),e.abrupt("return",fo(t,s,Xa()));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_openRedirect",value:function(){var e=Vt(Bt().mark((function e(t,n,r,i){return Bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._originValidation(t);case 2:return a=go(t,n,r,Gr(),i),$a().location.href=a,e.abrupt("return",new Promise((function(){})));case 4:case"end":return e.stop()}var a}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_initialize",value:function(e){var t=this,n=e._key();if(this.eventManagers[n]){var r=this.eventManagers[n],i=r.manager,a=r.promise;return i?Promise.resolve(i):(jr(a,"If manager is not set, promise should be"),a)}var s=this.initAndGetManager(e);return this.eventManagers[n]={promise:s},s.catch((function(){delete t.eventManagers[n]})),s}},{key:"initAndGetManager",value:function(){var e=Vt(Bt().mark((function e(t){var n,r;return Bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,so(t);case 2:return n=e.sent,r=new Hs(t),n.register("authEvent",(function(e){return Lr(null===e||void 0===e?void 0:e.authEvent,t,"invalid-auth-event"),{status:r.onEvent(e.authEvent)?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:r},this.iframes[t._key()]=n,e.abrupt("return",r);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){this.iframes[e._key()].send(yo,{type:yo},(function(n){var r,i=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r.webStorageSupport;void 0!==i&&t(!!i),Pr(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return Qs.apply(this,arguments)}(e)),this.originValidationPromises[t]}},{key:"_shouldInitProactively",get:function(){return zi()||Li()||Gi()}}]),e}(),ko=bo,xo=function(){function e(t){et(this,e),this.factorId=t}return nt(e,[{key:"_process",value:function(e,t,n){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,n);case"signin":return this._finalizeSignIn(e,t.credential);default:return Mr("unexpected MultiFactorSessionType")}}}]),e}(),wo=function(e){it(n,e);var t=ut(n);function n(e){var r;return et(this,n),(r=t.call(this,"phone")).credential=e,r}return nt(n,[{key:"_finalizeEnroll",value:function(e,t,n){return function(e,t){return Xr(e,"POST","/v2/accounts/mfaEnrollment:finalize",Qr(e,t))}(e,{idToken:t,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}},{key:"_finalizeSignIn",value:function(e,t){return function(e,t){return Xr(e,"POST","/v2/accounts/mfaSignIn:finalize",Qr(e,t))}(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}],[{key:"_fromCredential",value:function(e){return new n(e)}}]),n}(xo);(function(){function e(){et(this,e)}return nt(e,null,[{key:"assertion",value:function(e){return wo._fromCredential(e)}}]),e}()).FACTOR_ID="phone";var To="@firebase/auth",Eo="0.21.0",_o=function(){function e(t){et(this,e),this.auth=t,this.internalListeners=new Map}return nt(e,[{key:"getUid",value:function(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}},{key:"getToken",value:function(){var e=Vt(Bt().mark((function e(t){var n;return Bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.assertAuthConfigured(),e.next=3,this.auth._initializationPromise;case 3:if(this.auth.currentUser){e.next=5;break}return e.abrupt("return",null);case 5:return e.next=7,this.auth.currentUser.getIdToken(t);case 7:return n=e.sent,e.abrupt("return",{accessToken:n});case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"addAuthTokenListener",value:function(e){if(this.assertAuthConfigured(),!this.internalListeners.has(e)){var t=this.auth.onIdTokenChanged((function(t){e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}}},{key:"removeAuthTokenListener",value:function(e){this.assertAuthConfigured();var t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}},{key:"assertAuthConfigured",value:function(){Lr(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}},{key:"updateProactiveRefresh",value:function(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}]),e}();var So,Ao=tn("authIdTokenMaxAge")||300,Co=null,Io=function(e){return function(){var t=Vt(Bt().mark((function t(n){var r,i,a;return Bt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=n,!t.t0){t.next=5;break}return t.next=4,n.getIdTokenResult();case 4:t.t0=t.sent;case 5:if(r=t.t0,!((i=r&&((new Date).getTime()-Date.parse(r.issuedAtTime))/1e3)&&i>Ao)){t.next=9;break}return t.abrupt("return");case 9:if(a=null===r||void 0===r?void 0:r.token,Co!==a){t.next=12;break}return t.abrupt("return");case 12:return Co=a,t.next=15,fetch(e,{method:a?"POST":"DELETE",headers:a?{Authorization:"Bearer ".concat(a)}:{}});case 15:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()};function Ro(e,t,n,r){return new(n||(n=Promise))((function(i,a){function s(e){try{c(r.next(e))}catch(t){a(t)}}function o(e){try{c(r.throw(e))}catch(t){a(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,o)}c((r=r.apply(e,t||[])).next())}))}function Po(e,t){var n,r,i,a,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:o(0),throw:o(1),return:o(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function o(a){return function(o){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,r=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){s=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){s.label=a[1];break}if(6===a[0]&&s.label<i[1]){s.label=i[1],i=a;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(a);break}i[2]&&s.ops.pop(),s.trys.pop();continue}a=t.call(e,s)}catch(o){a=[6,o],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,o])}}}So="Browser",tr(new mn("auth",(function(e,t){var n=t.options,r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),a=r.options,s=a.apiKey,o=a.authDomain;return function(e,t){Lr(s&&!s.includes(":"),"invalid-api-key",{appName:e.name}),Lr(!(null===o||void 0===o?void 0:o.includes(":")),"argument-error",{appName:e.name});var r={apiKey:s,authDomain:o,clientPlatform:So,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Wi(So)},i=new qi(e,t,r);return function(e,t){var n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Ur);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(i,n),i}(r,i)}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((function(e,t,n){e.getProvider("auth-internal").initialize()}))),tr(new mn("auth-internal",(function(e){return function(e){return new _o(e)}(Yi(e.getProvider("auth").getImmediate()))}),"PRIVATE").setInstantiationMode("EXPLICIT")),ur(To,Eo,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(So)),ur(To,Eo,"esm2017");var Do=function(){return Do=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},Do.apply(this,arguments)},No=function(e){return{loading:void 0===e||null===e,value:e}},Oo=function(e){var t=e?e():void 0,n=(0,a.useReducer)((function(e,t){switch(t.type){case"error":return Do(Do({},e),{error:t.error,loading:!1,value:void 0});case"reset":return No(t.defaultValue);case"value":return Do(Do({},e),{error:void 0,loading:!1,value:t.value});default:return e}}),No(t)),r=n[0],i=n[1],s=(0,a.useCallback)((function(){var t=e?e():void 0;i({type:"reset",defaultValue:t})}),[e]),o=(0,a.useCallback)((function(e){i({type:"error",error:e})}),[]),c=(0,a.useCallback)((function(e){i({type:"value",value:e})}),[]);return(0,a.useMemo)((function(){return{error:r.error,loading:r.loading,reset:s,setError:o,setValue:c,value:r.value}}),[r.error,r.loading,s,o,c,r.value])},Lo=function(e,t){var n=Oo((function(){return e.currentUser})),r=n.error,i=n.loading,s=n.setError,o=n.setValue,c=n.value;return(0,a.useEffect)((function(){var n=function(e,t,n,r){return vn(e).onAuthStateChanged(t,n,r)}(e,(function(e){return Ro(void 0,void 0,void 0,(function(){var n;return Po(this,(function(r){switch(r.label){case 0:if(!(null===t||void 0===t?void 0:t.onUserChanged))return[3,4];r.label=1;case 1:return r.trys.push([1,3,,4]),[4,t.onUserChanged(e)];case 2:return r.sent(),[3,4];case 3:return n=r.sent(),s(n),[3,4];case 4:return o(e),[2]}}))}))}),s);return function(){n()}}),[e]),[c,i,r]},Mo=function(e){var t=(0,a.useState)(),n=t[0],r=t[1],i=(0,a.useState)(),s=i[0],o=i[1],c=(0,a.useState)(!1),u=c[0],l=c[1],d=(0,a.useCallback)((function(t,n){return Ro(void 0,void 0,void 0,(function(){var i,a;return Po(this,(function(s){switch(s.label){case 0:l(!0),r(void 0),s.label=1;case 1:return s.trys.push([1,3,4,5]),[4,Ua(e,t,n)];case 2:return i=s.sent(),o(i),[2,i];case 3:return a=s.sent(),r(a),[3,5];case 4:return l(!1),[7];case 5:return[2]}}))}))}),[e]);return[d,s,u,n]},jo=__webpack_require__.p+"static/media/headflower.a54832aeba67c7fc223c.jpg",Fo=__webpack_require__.p+"static/media/mobileflower.5bf36aa74595ab6b143b.jpg";ur("firebase","9.15.0","app");var Uo=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:cr(),t=nr(e,"auth");if(t.isInitialized())return t.getImmediate();var n=Br(e,{popupRedirectResolver:ko,persistence:[gs,Ka,Ya]}),r=tn("authTokenSyncURL");if(r){var i=Io(r);Ga(n,i,(function(){return i(n.currentUser)})),Ba(n,(function(e){return i(e)}))}var a=$t("auth");return a&&Qi(n,"http://".concat(a)),n}(or({apiKey:"AIzaSyB37AX3KibzYUuECtOlYPXR6cYHOUC2r5E",authDomain:"khanqah-rumi.firebaseapp.com",projectId:"khanqah-rumi",storageBucket:"khanqah-rumi.appspot.com",messagingSenderId:"773179746810",appId:"1:773179746810:web:125a36583841671d2d5c43"})),Bo=Uo;var Go={origin:[0,0,0],round:4},Vo={a:7,c:6,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,z:0};function Ho(e){for(var t=e.pathValue[e.segmentStart],n=t.toLowerCase(),r=e.data;r.length>=Vo[n]&&("m"===n&&r.length>2?(e.segments.push([t].concat(te(r.splice(0,2)))),n="l",t="m"===t?"l":"L"):e.segments.push([t].concat(te(r.splice(0,Vo[n])))),Vo[n]););}var zo="SVGPathCommander error";function Wo(e){var t=e.index,n=e.pathValue,r=n.charCodeAt(t);return 48===r?(e.param=0,void(e.index+=1)):49===r?(e.param=1,void(e.index+=1)):void(e.err="".concat(zo,': invalid Arc flag "').concat(n[t],'", expecting 0 or 1 at index ').concat(t))}function Ko(e){return e>=48&&e<=57}var qo="Invalid path value";function Yo(e){var t,n=e.max,r=e.pathValue,i=e.index,a=i,s=!1,o=!1,c=!1,u=!1;if(a>=n)e.err="".concat(zo,": ").concat(qo," at index ").concat(a,', "pathValue" is missing param');else if(43!==(t=r.charCodeAt(a))&&45!==t||(a+=1,t=r.charCodeAt(a)),Ko(t)||46===t){if(46!==t){if(s=48===t,a+=1,t=r.charCodeAt(a),s&&a<n&&t&&Ko(t))return void(e.err="".concat(zo,": ").concat(qo," at index ").concat(i,', "').concat(r[i],'" illegal number'));for(;a<n&&Ko(r.charCodeAt(a));)a+=1,o=!0;t=r.charCodeAt(a)}if(46===t){for(u=!0,a+=1;Ko(r.charCodeAt(a));)a+=1,c=!0;t=r.charCodeAt(a)}if(101===t||69===t){if(u&&!o&&!c)return void(e.err="".concat(zo,": ").concat(qo," at index ").concat(a,', "').concat(r[a],'" invalid float exponent'));if(a+=1,43!==(t=r.charCodeAt(a))&&45!==t||(a+=1),!(a<n&&Ko(r.charCodeAt(a))))return void(e.err="".concat(zo,": ").concat(qo," at index ").concat(a,', "').concat(r[a],'" invalid integer exponent'));for(;a<n&&Ko(r.charCodeAt(a));)a+=1}e.index=a,e.param=+e.pathValue.slice(i,a)}else e.err="".concat(zo,": ").concat(qo," at index ").concat(a,', "').concat(r[a],'" is not a number')}function Jo(e){for(var t,n=e.pathValue,r=e.max;e.index<r&&(10===(t=n.charCodeAt(e.index))||13===t||8232===t||8233===t||32===t||9===t||11===t||12===t||160===t||t>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].includes(t));)e.index+=1}function Qo(e){return e>=48&&e<=57||43===e||45===e||46===e}function Xo(e){var t=e.max,n=e.pathValue,r=e.index,i=n.charCodeAt(r),a=Vo[n[r].toLowerCase()];if(e.segmentStart=r,function(e){switch(32|e){case 109:case 122:case 108:case 104:case 118:case 99:case 115:case 113:case 116:case 97:return!0;default:return!1}}(i))if(e.index+=1,Jo(e),e.data=[],a){for(;;){for(var s=a;s>0;s-=1){if(97!=(32|i)||3!==s&&4!==s?Yo(e):Wo(e),e.err.length)return;e.data.push(e.param),Jo(e),e.index<t&&44===n.charCodeAt(e.index)&&(e.index+=1,Jo(e))}if(e.index>=e.max)break;if(!Qo(n.charCodeAt(e.index)))break}Ho(e)}else Ho(e);else e.err="".concat(zo,": ").concat(qo,' "').concat(n[r],'" is not a path command')}function Zo(e){return e.map((function(e){return Array.isArray(e)?te(e):e}))}function $o(e){this.segments=[],this.pathValue=e,this.max=e.length,this.index=0,this.param=0,this.segmentStart=0,this.data=[],this.err=""}function ec(e){return Array.isArray(e)&&e.every((function(e){var t=e[0].toLowerCase();return Vo[t]===e.length-1&&"achlmqstvz".includes(t)}))}function tc(e){if(ec(e))return Zo(e);var t=new $o(e);for(Jo(t);t.index<t.max&&!t.err.length;)Xo(t);return t.err?t.err:t.segments}function nc(e){return ec(e)&&e.every((function(e){var t=u(e,1)[0];return t===t.toUpperCase()}))}function rc(e){if(nc(e))return Zo(e);var t=tc(e),n=0,r=0,i=0,a=0;return t.map((function(e){var t,s=e.slice(1).map(Number),o=u(e,1)[0],c=o.toUpperCase();if("M"===o)return t=u(s,2),n=t[0],r=t[1],i=n,a=r,["M",n,r];var l=[];if(o!==c)switch(c){case"A":l=[c,s[0],s[1],s[2],s[3],s[4],s[5]+n,s[6]+r];break;case"V":l=[c,s[0]+r];break;case"H":l=[c,s[0]+n];break;default:l=[c].concat(te(s.map((function(e,t){return e+(t%2?r:n)}))))}else l=[c].concat(te(s));var d=l.length;switch(c){case"Z":n=i,r=a;break;case"H":var h=u(l,2);n=h[1];break;case"V":var f=u(l,2);r=f[1];break;default:n=l[d-2],r=l[d-1],"M"===c&&(i=n,a=r)}return l}))}function ic(e){return ec(e)&&e.slice(1).every((function(e){var t=u(e,1)[0];return t===t.toLowerCase()}))}function ac(e){if(ic(e))return Zo(e);var t=tc(e),n=0,r=0,i=0,a=0;return t.map((function(e){var t,s=e.slice(1).map(Number),o=u(e,1)[0],c=o.toLowerCase();if("M"===o)return t=u(s,2),n=t[0],r=t[1],i=n,a=r,["M",n,r];var l=[];if(o!==c)switch(c){case"a":l=[c,s[0],s[1],s[2],s[3],s[4],s[5]-n,s[6]-r];break;case"v":l=[c,s[0]-r];break;case"h":l=[c,s[0]-n];break;default:l=[c].concat(te(s.map((function(e,t){return e-(t%2?r:n)}))))}else"m"===o&&(i=s[0]+n,a=s[1]+r),l=[c].concat(te(s));var d=l.length;switch(c){case"z":n=i,r=a;break;case"h":n+=l[1];break;case"v":r+=l[1];break;default:n+=l[d-2],r+=l[d-1]}return l}))}function sc(e,t,n){if(e[n].length>7){e[n].shift();for(var r=e[n],i=n;r.length;)t[n]="A",e.splice(i+=1,0,["C"].concat(te(r.splice(0,6))));e.splice(n,1)}}function oc(e){return nc(e)&&e.every((function(e){var t=u(e,1)[0];return"ACLMQZ".includes(t)}))}function cc(e){return oc(e)&&e.every((function(e){var t=u(e,1)[0];return"MC".includes(t)}))}function uc(e,t){var n=u(e,1)[0],r=t.x1,i=t.y1,a=t.x2,s=t.y2,o=e.slice(1).map(Number),c=e;if("TQ".includes(n)||(t.qx=null,t.qy=null),"H"===n)c=["L",e[1],i];else if("V"===n)c=["L",r,e[1]];else if("S"===n){var l=2*r-a,d=2*i-s;t.x1=l,t.y1=d,c=["C",l,d].concat(te(o))}else if("T"===n){var h=2*r-t.qx,f=2*i-t.qy;t.qx=h,t.qy=f,c=["Q",h,f].concat(te(o))}else if("Q"===n){var p=u(o,2),v=p[0],m=p[1];t.qx=v,t.qy=m}return c}var lc={x1:0,y1:0,x2:0,y2:0,x:0,y:0,qx:null,qy:null};function dc(e){if(oc(e))return Zo(e);for(var t=rc(e),n=$({},lc),r=t.length,i=0;i<r;i+=1){t[i],t[i]=uc(t[i],n);var a=t[i],s=a.length;n.x1=+a[s-2],n.y1=+a[s-1],n.x2=+a[s-4]||n.x1,n.y2=+a[s-3]||n.y1}return t}function hc(e,t,n){return{x:e*Math.cos(n)-t*Math.sin(n),y:e*Math.sin(n)+t*Math.cos(n)}}function fc(e,t,n,r,i,a,s,o,c,l){var d,h,f,p,v,m=e,g=t,y=n,b=r,k=o,x=c,w=120*Math.PI/180,T=Math.PI/180*(+i||0),E=[];if(l){var _=u(l,4);h=_[0],f=_[1],p=_[2],v=_[3]}else{m=(d=hc(m,g,-T)).x,g=d.y;var S=(m-(k=(d=hc(k,x,-T)).x))/2,A=(g-(x=d.y))/2,C=S*S/(y*y)+A*A/(b*b);C>1&&(y*=C=Math.sqrt(C),b*=C);var I=y*y,R=b*b,P=(a===s?-1:1)*Math.sqrt(Math.abs((I*R-I*A*A-R*S*S)/(I*A*A+R*S*S)));p=P*y*A/b+(m+k)/2,v=P*-b*S/y+(g+x)/2,h=Math.asin(((g-v)/b*Math.pow(10,9)>>0)/Math.pow(10,9)),f=Math.asin(((x-v)/b*Math.pow(10,9)>>0)/Math.pow(10,9)),h=m<p?Math.PI-h:h,f=k<p?Math.PI-f:f,h<0&&(h=2*Math.PI+h),f<0&&(f=2*Math.PI+f),s&&h>f&&(h-=2*Math.PI),!s&&f>h&&(f-=2*Math.PI)}var D=f-h;if(Math.abs(D)>w){var N=f,O=k,L=x;f=h+w*(s&&f>h?1:-1),E=fc(k=p+y*Math.cos(f),x=v+b*Math.sin(f),y,b,i,0,s,O,L,[f,N,p,v])}D=f-h;var M=Math.cos(h),j=Math.sin(h),F=Math.cos(f),U=Math.sin(f),B=Math.tan(D/4),G=4/3*y*B,V=4/3*b*B,H=[m,g],z=[m+G*j,g-V*M],W=[k+G*U,x-V*F],K=[k,x];if(z[0]=2*H[0]-z[0],z[1]=2*H[1]-z[1],l)return[].concat(z,W,K,te(E));for(var q=[],Y=0,J=(E=[].concat(z,W,K,te(E))).length;Y<J;Y+=1)q[Y]=Y%2?hc(E[Y-1],E[Y],T).y:hc(E[Y],E[Y+1],T).x;return q}function pc(e,t,n,r,i,a){var s=1/3,o=2/3;return[s*e+o*n,s*t+o*r,s*i+o*n,s*a+o*r,i,a]}function vc(e,t,n){var r=u(e,2),i=r[0],a=r[1],s=u(t,2);return[i+(s[0]-i)*n,a+(s[1]-a)*n]}function mc(e,t){return Math.sqrt((e[0]-t[0])*(e[0]-t[0])+(e[1]-t[1])*(e[1]-t[1]))}function gc(e,t,n,r,i){var a=mc([e,t],[n,r]),s={x:0,y:0};if("number"==typeof i)if(i<=0)s={x:e,y:t};else if(i>=a)s={x:n,y:r};else{var o=u(vc([e,t],[n,r],i/a),2);s={x:o[0],y:o[1]}}return{length:a,point:s,min:{x:Math.min(e,n),y:Math.min(t,r)},max:{x:Math.max(e,n),y:Math.max(t,r)}}}function yc(e,t,n,r){var i=.5,a=[e,t],s=[n,r],o=vc(a,s,i),c=vc(s,o,i),u=vc(o,c,i),l=vc(c,u,i),d=vc(u,l,i),h=gc.apply(void 0,[].concat(a,te(o),te(u),te(d),[i])).point,f=gc.apply(void 0,[].concat(te(d),te(l),te(c),s,[0])).point;return[h.x,h.y,f.x,f.y,n,r]}function bc(e,t){var n,r=u(e,1)[0],i=e.slice(1).map(Number),a=u(i,2),s=a[0],o=a[1],c=t.x1,l=t.y1,d=t.x,h=t.y;switch("TQ".includes(r)||(t.qx=null,t.qy=null),r){case"M":return t.x=s,t.y=o,e;case"A":return n=[c,l].concat(te(i)),["C"].concat(te(fc.apply(void 0,te(n))));case"Q":return t.qx=s,t.qy=o,n=[c,l].concat(te(i)),["C"].concat(te(pc.apply(void 0,te(n))));case"L":return["C"].concat(te(yc(c,l,s,o)));case"Z":return["C"].concat(te(yc(c,l,d,h)))}return e}function kc(e){if(cc(e))return Zo(e);for(var t=dc(e),n=$({},lc),r=[],i="",a=t.length,s=0;s<a;s+=1){i=u(t[s],1)[0],r[s]=i,t[s]=bc(t[s],n),sc(t,r,s),a=t.length;var o=t[s],c=o.length;n.x1=+o[c-2],n.y1=+o[c-1],n.x2=+o[c-4]||n.x1,n.y2=+o[c-3]||n.y1}return t}function xc(e,t){var n=Go.round;if("off"===t||"off"===n)return Zo(e);var r="number"==typeof(n=t>=0?t:n)&&n>=1?Math.pow(10,n):1;return e.map((function(e){var t=e.slice(1).map(Number).map((function(e){return n?Math.round(e*r)/r:Math.round(e)}));return[e[0]].concat(te(t))}))}function wc(e,t){return xc(e,t).map((function(e){return e[0]+e.slice(1).join(" ")})).join("")}function Tc(e){var t=rc(e),n="Z"===t.slice(-1)[0][0],r=dc(t).map((function(e,n){var r=u(e.slice(-2).map(Number),2),i=r[0],a=r[1];return{seg:t[n],n:e,c:t[n][0],x:i,y:a}})).map((function(e,t,r){var i=e.seg,a=e.n,s=t&&r[t-1],o=r[t+1],c=e.c,u=r.length,l=t?r[t-1].x:r[u-1].x,d=t?r[t-1].y:r[u-1].y,h=[];switch(c){case"M":h=n?["Z"]:[c,l,d];break;case"A":h=[c].concat(te(i.slice(1,-3)),[1===i[5]?0:1,l,d]);break;case"C":h=o&&"S"===o.c?["S",i[1],i[2],l,d]:[c,i[3],i[4],i[1],i[2],l,d];break;case"S":h=!s||!"CS".includes(s.c)||o&&"S"===o.c?[c,a[1],a[2],l,d]:["C",a[3],a[4],a[1],a[2],l,d];break;case"Q":h=o&&"T"===o.c?["T",l,d]:[c].concat(te(i.slice(1,-2)),[l,d]);break;case"T":h=!s||!"QT".includes(s.c)||o&&"T"===o.c?[c,l,d]:["Q",a[1],a[2],l,d];break;case"Z":h=["M",l,d];break;case"H":h=[c,l];break;case"V":h=[c,d];break;default:h=[c].concat(te(i.slice(1,-2)),[l,d])}return h}));return n?r.reverse():[r[0]].concat(te(r.slice(1).reverse()))}function Ec(e){var t,n=[],r=-1;return e.forEach((function(e){"M"===e[0]?(t=[e],r+=1):t=[].concat(te(t),[e]),n[r]=t})),n}function _c(e,t,n,r){var i=u(e,1)[0],a=function(e){return Math.round(1e4*e)/1e4},s=e.slice(1).map((function(e){return+e})),o=t.slice(1).map((function(e){return+e})),c=n.x1,l=n.y1,d=n.x2,h=n.y2,f=n.x,p=n.y,v=e,m=u(o.slice(-2),2),g=m[0],y=m[1];if("TQ".includes(i)||(n.qx=null,n.qy=null),["V","H","S","T","Z"].includes(i))v=[i].concat(te(s));else if("L"===i)a(f)===a(g)?v=["V",y]:a(p)===a(y)&&(v=["H",g]);else if("C"===i){var b=u(o,2),k=b[0],x=b[1];"CS".includes(r)&&(a(k)===a(2*c-d)&&a(x)===a(2*l-h)||a(c)===a(2*d-f)&&a(l)===a(2*h-p))&&(v=["S"].concat(te(o.slice(-4)))),n.x1=k,n.y1=x}else if("Q"===i){var w=u(o,2),T=w[0],E=w[1];n.qx=T,n.qy=E,"QT".includes(r)&&(a(T)===a(2*c-d)&&a(E)===a(2*l-h)||a(c)===a(2*d-f)&&a(l)===a(2*h-p))&&(v=["T"].concat(te(o.slice(-2))))}return v}function Sc(e,t){for(var n,r=rc(e),i=dc(r),a=$({},lc),s=[],o=r.length,c="",l="",d=0,h=0,f=0,p=0,v=0;v<o;v+=1){c=u(r[v],1)[0],s[v]=c,v&&(l=s[v-1]),r[v]=_c(r[v],i[v],a,l);var m=r[v],g=m.length;switch(a.x1=+m[g-2],a.y1=+m[g-1],a.x2=+m[g-4]||a.x1,a.y2=+m[g-3]||a.y1,c){case"Z":d=f,h=p;break;case"H":d=u(m,2)[1];break;case"V":h=u(m,2)[1];break;default:d=(n=u(m.slice(-2).map(Number),2))[0],h=n[1],"M"===c&&(f=d,p=h)}a.x=d,a.y=h}var y=xc(r,t),b=xc(ac(r),t);return y.map((function(e,t){return t?e.join("").length<b[t].join("").length?e:b[t]:e}))}function Ac(e){var t=new Uc,n=Array.from(e);if(!n.every((function(e){return!Number.isNaN(e)})))throw TypeError('CSSMatrix: "'.concat(e,'" must only have numbers.'));if(16===n.length){var r=n[0],i=n[1],a=n[2],s=n[3],o=n[4],c=n[5],u=n[6],l=n[7],d=n[8],h=n[9],f=n[10],p=n[11],v=n[12],m=n[13],g=n[14],y=n[15];t.m11=r,t.a=r,t.m21=o,t.c=o,t.m31=d,t.m41=v,t.e=v,t.m12=i,t.b=i,t.m22=c,t.d=c,t.m32=h,t.m42=m,t.f=m,t.m13=a,t.m23=u,t.m33=f,t.m43=g,t.m14=s,t.m24=l,t.m34=p,t.m44=y}else{if(6!==n.length)throw new TypeError("CSSMatrix: expecting an Array of 6/16 values.");var b=n[0],k=n[1],x=n[2],w=n[3],T=n[4],E=n[5];t.m11=b,t.a=b,t.m12=k,t.b=k,t.m21=x,t.c=x,t.m22=w,t.d=w,t.m41=T,t.e=T,t.m42=E,t.f=E}return t}function Cc(e){var t=Object.keys(new Uc);if("object"==typeof e&&t.every((function(t){return t in e})))return Ac([e.m11,e.m12,e.m13,e.m14,e.m21,e.m22,e.m23,e.m24,e.m31,e.m32,e.m33,e.m34,e.m41,e.m42,e.m43,e.m44]);throw TypeError('CSSMatrix: "'.concat(JSON.stringify(e),'" is not a DOMMatrix / CSSMatrix / JSON compatible object.'))}function Ic(e){if("string"!=typeof e)throw TypeError('CSSMatrix: "'.concat(e,'" is not a string.'));var t=String(e).replace(/\s/g,""),n=new Uc,r='CSSMatrix: invalid transform string "'.concat(e,'"');return t.split(")").filter((function(e){return e})).forEach((function(e){var t=u(e.split("("),2),i=t[0],a=t[1];if(!a)throw TypeError(r);var s=a.split(",").map((function(e){return e.includes("rad")?parseFloat(e)*(180/Math.PI):parseFloat(e)})),o=u(s,4),c=o[0],l=o[1],d=o[2],h=o[3],f=[c,l,d],p=[c,l,d,h];if("perspective"===i&&c&&[l,d].every((function(e){return void 0===e})))n.m34=-1/c;else if(i.includes("matrix")&&[6,16].includes(s.length)&&s.every((function(e){return!Number.isNaN(+e)}))){var v=s.map((function(e){return Math.abs(e)<1e-6?0:e}));n=n.multiply(Ac(v))}else if("translate3d"===i&&f.every((function(e){return!Number.isNaN(+e)})))n=n.translate(c,l,d);else if("translate"===i&&c&&void 0===d)n=n.translate(c,l||0,0);else if("rotate3d"===i&&p.every((function(e){return!Number.isNaN(+e)}))&&h)n=n.rotateAxisAngle(c,l,d,h);else if("rotate"===i&&c&&[l,d].every((function(e){return void 0===e})))n=n.rotate(0,0,c);else if("scale3d"===i&&f.every((function(e){return!Number.isNaN(+e)}))&&f.some((function(e){return 1!==e})))n=n.scale(c,l,d);else if("scale"!==i||Number.isNaN(c)||1===c||void 0!==d)if("skew"===i&&(c||!Number.isNaN(c)&&l)&&void 0===d)n=n.skew(c,l||0);else{if(!(/[XYZ]/.test(i)&&c&&[l,d].every((function(e){return void 0===e}))&&["translate","rotate","scale","skew"].some((function(e){return i.includes(e)}))))throw TypeError(r);if(["skewX","skewY"].includes(i))n=n[i](c);else{var m,g=i.replace(/[XYZ]/,""),y=i.replace(g,""),b=["X","Y","Z"].indexOf(y),k="scale"===g?1:0,x=[0===b?c:k,1===b?c:k,2===b?c:k];n=(m=n)[g].apply(m,x)}}else{var w=Number.isNaN(+l)?c:l;n=n.scale(c,w,1)}})),n}function Rc(e,t){return t?[e.a,e.b,e.c,e.d,e.e,e.f]:[e.m11,e.m12,e.m13,e.m14,e.m21,e.m22,e.m23,e.m24,e.m31,e.m32,e.m33,e.m34,e.m41,e.m42,e.m43,e.m44]}function Pc(e,t,n){var r=new Uc;return r.m41=e,r.e=e,r.m42=t,r.f=t,r.m43=n,r}function Dc(e,t,n){var r=new Uc,i=Math.PI/180,a=e*i,s=t*i,o=n*i,c=Math.cos(a),u=-Math.sin(a),l=Math.cos(s),d=-Math.sin(s),h=Math.cos(o),f=-Math.sin(o),p=l*h,v=-l*f;r.m11=p,r.a=p,r.m12=v,r.b=v,r.m13=d;var m=u*d*h+c*f;r.m21=m,r.c=m;var g=c*h-u*d*f;return r.m22=g,r.d=g,r.m23=-u*l,r.m31=u*f-c*d*h,r.m32=u*h+c*d*f,r.m33=c*l,r}function Nc(e,t,n,r){var i=new Uc,a=Math.sqrt(e*e+t*t+n*n);if(0===a)return i;var s=e/a,o=t/a,c=n/a,u=r*(Math.PI/360),l=Math.sin(u),d=Math.cos(u),h=l*l,f=s*s,p=o*o,v=c*c,m=1-2*(p+v)*h;i.m11=m,i.a=m;var g=2*(s*o*h+c*l*d);i.m12=g,i.b=g,i.m13=2*(s*c*h-o*l*d);var y=2*(o*s*h-c*l*d);i.m21=y,i.c=y;var b=1-2*(v+f)*h;return i.m22=b,i.d=b,i.m23=2*(o*c*h+s*l*d),i.m31=2*(c*s*h+o*l*d),i.m32=2*(c*o*h-s*l*d),i.m33=1-2*(f+p)*h,i}function Oc(e,t,n){var r=new Uc;return r.m11=e,r.a=e,r.m22=t,r.d=t,r.m33=n,r}function Lc(e,t){var n=new Uc;if(e){var r=e*Math.PI/180,i=Math.tan(r);n.m21=i,n.c=i}if(t){var a=t*Math.PI/180,s=Math.tan(a);n.m12=s,n.b=s}return n}function Mc(e){return Lc(e,0)}function jc(e){return Lc(0,e)}function Fc(e,t){return Ac([t.m11*e.m11+t.m12*e.m21+t.m13*e.m31+t.m14*e.m41,t.m11*e.m12+t.m12*e.m22+t.m13*e.m32+t.m14*e.m42,t.m11*e.m13+t.m12*e.m23+t.m13*e.m33+t.m14*e.m43,t.m11*e.m14+t.m12*e.m24+t.m13*e.m34+t.m14*e.m44,t.m21*e.m11+t.m22*e.m21+t.m23*e.m31+t.m24*e.m41,t.m21*e.m12+t.m22*e.m22+t.m23*e.m32+t.m24*e.m42,t.m21*e.m13+t.m22*e.m23+t.m23*e.m33+t.m24*e.m43,t.m21*e.m14+t.m22*e.m24+t.m23*e.m34+t.m24*e.m44,t.m31*e.m11+t.m32*e.m21+t.m33*e.m31+t.m34*e.m41,t.m31*e.m12+t.m32*e.m22+t.m33*e.m32+t.m34*e.m42,t.m31*e.m13+t.m32*e.m23+t.m33*e.m33+t.m34*e.m43,t.m31*e.m14+t.m32*e.m24+t.m33*e.m34+t.m34*e.m44,t.m41*e.m11+t.m42*e.m21+t.m43*e.m31+t.m44*e.m41,t.m41*e.m12+t.m42*e.m22+t.m43*e.m32+t.m44*e.m42,t.m41*e.m13+t.m42*e.m23+t.m43*e.m33+t.m44*e.m43,t.m41*e.m14+t.m42*e.m24+t.m43*e.m34+t.m44*e.m44])}var Uc=function(){function e(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];et(this,e);var i=this;if(i.a=1,i.b=0,i.c=0,i.d=1,i.e=0,i.f=0,i.m11=1,i.m12=0,i.m13=0,i.m14=0,i.m21=0,i.m22=1,i.m23=0,i.m24=0,i.m31=0,i.m32=0,i.m33=1,i.m34=0,i.m41=0,i.m42=0,i.m43=0,i.m44=1,n.length){var a=[16,6].some((function(e){return e===n.length}))?n:n[0];return i.setMatrixValue(a)}return i}return nt(e,[{key:"isIdentity",get:function(){var e=this;return 1===e.m11&&0===e.m12&&0===e.m13&&0===e.m14&&0===e.m21&&1===e.m22&&0===e.m23&&0===e.m24&&0===e.m31&&0===e.m32&&1===e.m33&&0===e.m34&&0===e.m41&&0===e.m42&&0===e.m43&&1===e.m44}},{key:"is2D",get:function(){var e=this;return 0===e.m31&&0===e.m32&&1===e.m33&&0===e.m34&&0===e.m43&&1===e.m44}},{key:"setMatrixValue",value:function(t){return"string"==typeof t&&t.length&&"none"!==t?Ic(t):[Array,Float64Array,Float32Array].some((function(e){return t instanceof e}))?Ac(t):[e,DOMMatrix,Object].some((function(e){return t instanceof e}))?Cc(t):this}},{key:"toFloat32Array",value:function(e){return Float32Array.from(Rc(this,e))}},{key:"toFloat64Array",value:function(e){return Float64Array.from(Rc(this,e))}},{key:"toString",value:function(){var e=this.is2D;return"".concat(e?"matrix":"matrix3d","(").concat(this.toFloat64Array(e).join(", "),")")}},{key:"toJSON",value:function(){var e=this.is2D,t=this.isIdentity;return $($({},this),{},{is2D:e,isIdentity:t})}},{key:"multiply",value:function(e){return Fc(this,e)}},{key:"translate",value:function(e,t,n){var r=t,i=n;return void 0===r&&(r=0),void 0===i&&(i=0),Fc(this,Pc(e,r,i))}},{key:"scale",value:function(e,t,n){var r=t,i=n;return void 0===r&&(r=e),void 0===i&&(i=1),Fc(this,Oc(e,r,i))}},{key:"rotate",value:function(e,t,n){var r=e,i=t||0,a=n||0;return"number"==typeof e&&void 0===t&&void 0===n&&(a=r,r=0,i=0),Fc(this,Dc(r,i,a))}},{key:"rotateAxisAngle",value:function(e,t,n,r){if([e,t,n,r].some((function(e){return Number.isNaN(+e)})))throw new TypeError("CSSMatrix: expecting 4 values");return Fc(this,Nc(e,t,n,r))}},{key:"skewX",value:function(e){return Fc(this,Mc(e))}},{key:"skewY",value:function(e){return Fc(this,jc(e))}},{key:"skew",value:function(e,t){return Fc(this,Lc(e,t))}},{key:"transformPoint",value:function(e){var t=this,n=t.m11*e.x+t.m21*e.y+t.m31*e.z+t.m41*e.w,r=t.m12*e.x+t.m22*e.y+t.m32*e.z+t.m42*e.w,i=t.m13*e.x+t.m23*e.y+t.m33*e.z+t.m43*e.w,a=t.m14*e.x+t.m24*e.y+t.m34*e.z+t.m44*e.w;return e instanceof DOMPoint?new DOMPoint(n,r,i,a):{x:n,y:r,z:i,w:a}}}]),e}();function Bc(e,t,n){var r=u(n,3),i=r[0],a=r[1],s=r[2],o=function(e,t){var n,r=Pc.apply(void 0,te(t));return n=u(t,4),r.m44=n[3],[(r=e.multiply(r)).m41,r.m42,r.m43,r.m44]}(e,[].concat(te(t),[0,1])),c=u(o,3),l=c[0],d=c[1]-a,h=c[2]-s;return[(l-i)*(Math.abs(s)/Math.abs(h)||1)+i,d*(Math.abs(s)/Math.abs(h)||1)+a]}function Gc(e,t){var n,r,i,a,s,o,c=0,l=0,d=rc(e),h=t&&Object.keys(t);if(!t||!h.length)return Zo(d);var f=dc(d);if(!t.origin){var p=Go.origin;Object.assign(t,{origin:p})}var v=function(e){var t,n,r,i=new Uc,a=u(e.origin,2),s=a[0],o=a[1],c=e.translate,l=e.rotate,d=e.skew,h=e.scale;return Array.isArray(c)&&c.every((function(e){return!Number.isNaN(+e)}))&&c.some((function(e){return 0!==e}))?i=(t=i).translate.apply(t,te(c)):"number"!=typeof c||Number.isNaN(c)||(i=i.translate(c)),(l||d||h)&&(i=i.translate(s,o),Array.isArray(l)&&l.every((function(e){return!Number.isNaN(+e)}))&&l.some((function(e){return 0!==e}))?i=(n=i).rotate.apply(n,te(l)):"number"!=typeof l||Number.isNaN(l)||(i=i.rotate(l)),Array.isArray(d)&&d.every((function(e){return!Number.isNaN(+e)}))&&d.some((function(e){return 0!==e}))?(i=d[0]?i.skewX(d[0]):i,i=d[1]?i.skewY(d[1]):i):"number"!=typeof d||Number.isNaN(d)||(i=i.skewX(d)),Array.isArray(h)&&h.every((function(e){return!Number.isNaN(+e)}))&&h.some((function(e){return 1!==e}))?i=(r=i).scale.apply(r,te(h)):"number"!=typeof h||Number.isNaN(h)||(i=i.scale(h)),i=i.translate(-s,-o)),i}(t),m=t.origin,g=$({},lc),y=[],b=0,k="",x=[],w=[];if(!v.isIdentity){for(n=0,i=d.length;n<i;n+=1){var T;y=d[n],d[n]&&(T=u(y,1),k=T[0]),w[n]=k,"A"===k&&(y=bc(f[n],g),d[n]=bc(f[n],g),sc(d,w,n),f[n]=bc(f[n],g),sc(f,w,n),i=Math.max(d.length,f.length)),b=(y=f[n]).length,g.x1=+y[b-2],g.y1=+y[b-1],g.x2=+y[b-4]||g.x1,g.y2=+y[b-3]||g.y1;var E={s:d[n],c:d[n][0],x:g.x1,y:g.y1};x=[].concat(te(x),[E])}return x.map((function(e){var t;switch(k=e.c,y=e.s,k){case"L":case"H":case"V":return t=u(Bc(v,[e.x,e.y],m),2),s=t[0],o=t[1],c!==s&&l!==o?y=["L",s,o]:l===o?y=["H",s]:c===s&&(y=["V",o]),c=s,l=o,y;default:for(r=1,a=y.length;r<a;r+=2){var n;n=u(Bc(v,[+y[r],+y[r+1]],m),2),c=n[0],l=n[1],y[r]=c,y[r+1]=l}return y}}))}return Zo(d)}function Vc(e,t){var n=e.x,r=e.y,i=t.x,a=t.y,s=n*i+r*a,o=Math.sqrt((Math.pow(n,2)+Math.pow(r,2))*(Math.pow(i,2)+Math.pow(a,2)));return(n*a-r*i<0?-1:1)*Math.acos(s/o)}function Hc(e,t,n,r,i,a,s,o,c,u){var l=Math.abs,d=Math.sin,h=Math.cos,f=Math.sqrt,p=Math.PI,v=l(n),m=l(r),g=(i%360+360)%360*(p/180);if(e===o&&t===c)return{x:e,y:t};if(0===v||0===m)return gc(e,t,o,c,u).point;var y=(e-o)/2,b=(t-c)/2,k=h(g)*y+d(g)*b,x=-d(g)*y+h(g)*b,w=Math.pow(k,2)/Math.pow(v,2)+Math.pow(x,2)/Math.pow(m,2);w>1&&(v*=f(w),m*=f(w));var T=(Math.pow(v,2)*Math.pow(m,2)-Math.pow(v,2)*Math.pow(x,2)-Math.pow(m,2)*Math.pow(k,2))/(Math.pow(v,2)*Math.pow(x,2)+Math.pow(m,2)*Math.pow(k,2)),E=(a!==s?1:-1)*f(T=T<0?0:T),_=E*(v*x/m),S=E*(-m*k/v),A=h(g)*_-d(g)*S+(e+o)/2,C=d(g)*_+h(g)*S+(t+c)/2,I={x:(k-_)/v,y:(x-S)/m},R=Vc({x:1,y:0},I),P=Vc(I,{x:(-k-_)/v,y:(-x-S)/m});!s&&P>0?P-=2*p:s&&P<0&&(P+=2*p);var D=R+(P%=2*p)*u,N=v*h(D),O=m*d(D);return{x:h(g)*N-d(g)*O+A,y:d(g)*N+h(g)*O+C}}function zc(e,t,n,r,i,a,s,o,c,u){var l="number"==typeof u,d=e,h=t,f=0,p=[d,h,f],v=[d,h],m={x:0,y:0},g=[{x:d,y:h}];l&&u<=0&&(m={x:d,y:h});for(var y=0;y<=300;y+=1){var b;if(d=(b=Hc(e,t,n,r,i,a,s,o,c,y/300)).x,h=b.y,g=[].concat(te(g),[{x:d,y:h}]),f+=mc(v,[d,h]),v=[d,h],l&&f>u&&u>p[2]){var k=(f-u)/(f-p[2]);m={x:v[0]*(1-k)+p[0]*k,y:v[1]*(1-k)+p[1]*k}}p=[d,h,f]}return l&&u>=f&&(m={x:o,y:c}),{length:f,point:m,min:{x:Math.min.apply(Math,te(g.map((function(e){return e.x})))),y:Math.min.apply(Math,te(g.map((function(e){return e.y}))))},max:{x:Math.max.apply(Math,te(g.map((function(e){return e.x})))),y:Math.max.apply(Math,te(g.map((function(e){return e.y}))))}}}function Wc(e,t,n,r,i,a,s,o,c){var u=1-c;return{x:Math.pow(u,3)*e+3*Math.pow(u,2)*c*n+3*u*Math.pow(c,2)*i+Math.pow(c,3)*s,y:Math.pow(u,3)*t+3*Math.pow(u,2)*c*r+3*u*Math.pow(c,2)*a+Math.pow(c,3)*o}}function Kc(e,t,n,r,i,a,s,o,c){var u="number"==typeof c,l=e,d=t,h=0,f=[l,d,h],p=[l,d],v={x:0,y:0},m=[{x:l,y:d}];u&&c<=0&&(v={x:l,y:d});for(var g=0;g<=300;g+=1){var y;if(l=(y=Wc(e,t,n,r,i,a,s,o,g/300)).x,d=y.y,m=[].concat(te(m),[{x:l,y:d}]),h+=mc(p,[l,d]),p=[l,d],u&&h>c&&c>f[2]){var b=(h-c)/(h-f[2]);v={x:p[0]*(1-b)+f[0]*b,y:p[1]*(1-b)+f[1]*b}}f=[l,d,h]}return u&&c>=h&&(v={x:s,y:o}),{length:h,point:v,min:{x:Math.min.apply(Math,te(m.map((function(e){return e.x})))),y:Math.min.apply(Math,te(m.map((function(e){return e.y}))))},max:{x:Math.max.apply(Math,te(m.map((function(e){return e.x})))),y:Math.max.apply(Math,te(m.map((function(e){return e.y}))))}}}function qc(e,t,n,r,i,a,s){var o=1-s;return{x:Math.pow(o,2)*e+2*o*s*n+Math.pow(s,2)*i,y:Math.pow(o,2)*t+2*o*s*r+Math.pow(s,2)*a}}function Yc(e,t,n,r,i,a,s){var o="number"==typeof s,c=e,u=t,l=0,d=[c,u,l],h=[c,u],f={x:0,y:0},p=[{x:c,y:u}];o&&s<=0&&(f={x:c,y:u});for(var v=0;v<=300;v+=1){var m;if(c=(m=qc(e,t,n,r,i,a,v/300)).x,u=m.y,p=[].concat(te(p),[{x:c,y:u}]),l+=mc(h,[c,u]),h=[c,u],o&&l>s&&s>d[2]){var g=(l-s)/(l-d[2]);f={x:h[0]*(1-g)+d[0]*g,y:h[1]*(1-g)+d[1]*g}}d=[c,u,l]}return o&&s>=l&&(f={x:i,y:a}),{length:l,point:f,min:{x:Math.min.apply(Math,te(p.map((function(e){return e.x})))),y:Math.min.apply(Math,te(p.map((function(e){return e.y}))))},max:{x:Math.max.apply(Math,te(p.map((function(e){return e.x})))),y:Math.max.apply(Math,te(p.map((function(e){return e.y}))))}}}function Jc(e,t){for(var n,r,i,a=dc(e),s="number"==typeof t,o=[],c=0,l=0,d=0,h=0,f=[],p=[],v=0,m={x:0,y:0},g=m,y=m,b=m,k=0,x=0,w=a.length;x<w;x+=1){var T,E,_,S,A,C,I;o=(n="M"===(r=u(i=a[x],1)[0]))?o:[c,l].concat(te(i.slice(1))),n?(g=m={x:d=(T=u(i,3))[1],y:h=T[2]},v=0,s&&t<.001&&(b=m)):"L"===r?(v=(E=gc.apply(void 0,te(o).concat([(t||0)-k]))).length,m=E.min,g=E.max,y=E.point):"A"===r?(v=(_=zc.apply(void 0,te(o).concat([(t||0)-k]))).length,m=_.min,g=_.max,y=_.point):"C"===r?(v=(S=Kc.apply(void 0,te(o).concat([(t||0)-k]))).length,m=S.min,g=S.max,y=S.point):"Q"===r?(v=(A=Yc.apply(void 0,te(o).concat([(t||0)-k]))).length,m=A.min,g=A.max,y=A.point):"Z"===r&&(o=[c,l,d,h],v=(C=gc.apply(void 0,te(o).concat([(t||0)-k]))).length,m=C.min,g=C.max,y=C.point),s&&k<t&&k+v>=t&&(b=y),p=[].concat(te(p),[g]),f=[].concat(te(f),[m]),k+=v,c=(I=u("Z"!==r?i.slice(-2):[d,h],2))[0],l=I[1]}return s&&t>=k&&(b={x:c,y:l}),{length:k,point:b,min:{x:Math.min.apply(Math,te(f.map((function(e){return e.x})))),y:Math.min.apply(Math,te(f.map((function(e){return e.y}))))},max:{x:Math.max.apply(Math,te(p.map((function(e){return e.x})))),y:Math.max.apply(Math,te(p.map((function(e){return e.y}))))}}}function Qc(e){if(!e)return{x:0,y:0,width:0,height:0,x2:0,y2:0,cx:0,cy:0,cz:0};var t=Jc(e),n=t.min,r=n.x,i=n.y,a=t.max,s=a.x,o=a.y,c=s-r,u=o-i;return{width:c,height:u,x:r,y:i,x2:s,y2:o,cx:r+c/2,cy:i+u/2,cz:Math.max(c,u)+Math.min(c,u)/2}}function Xc(e){return Jc(e).length}function Zc(e,t){return Jc(e,t).point}Object.assign(Uc,{Translate:Pc,Rotate:Dc,RotateAxisAngle:Nc,Scale:Oc,SkewX:Mc,SkewY:jc,Skew:Lc,Multiply:Fc,fromArray:Ac,fromMatrix:Cc,fromString:Ic,toArray:Rc}),Object.assign(Uc,{Version:"1.0.3"});var $c=function(){function e(t,n){et(this,e);var r=n||{},i=void 0===t;if(i||!t.length)throw TypeError("".concat(zo,': "pathValue" is ').concat(i?"undefined":"empty"));var a=tc(t);if("string"==typeof a)throw TypeError(a);this.segments=a;var s,o,c=this.getBBox(),l=c.width,d=c.height,h=c.cx,f=c.cy,p=c.cz,v=r.round,m=r.origin;if("auto"===v){var g="".concat(Math.floor(Math.max(l,d))).length;s=g>=4?0:4-g}else Number.isInteger(v)||"off"===v?s=v:s=Go.round;if(Array.isArray(m)&&m.length>=2){var y=u(m.map(Number),3),b=y[0],k=y[1],x=y[2];o=[Number.isNaN(b)?h:b,Number.isNaN(k)?f:k,Number.isNaN(x)?p:x]}else o=[h,f,p];return this.round=s,this.origin=o,this}return nt(e,[{key:"getBBox",value:function(){return Qc(this.segments)}},{key:"getTotalLength",value:function(){return Xc(this.segments)}},{key:"getPointAtLength",value:function(e){return Zc(this.segments,e)}},{key:"toAbsolute",value:function(){var e=this.segments;return this.segments=rc(e),this}},{key:"toRelative",value:function(){var e=this.segments;return this.segments=ac(e),this}},{key:"toCurve",value:function(){var e=this.segments;return this.segments=kc(e),this}},{key:"reverse",value:function(e){this.toAbsolute();var t,n=this.segments,r=Ec(n),i=r.length>1?r:0,a=i&&Zo(i).map((function(t,n){return e?n?Tc(t):tc(t):Tc(t)}));return t=i?a.flat(1):e?n:Tc(n),this.segments=Zo(t),this}},{key:"normalize",value:function(){var e=this.segments;return this.segments=dc(e),this}},{key:"optimize",value:function(){var e=this.segments;return this.segments=Sc(e,this.round),this}},{key:"transform",value:function(e){if(!e||"object"!=typeof e||"object"==typeof e&&!["translate","rotate","skew","scale"].some((function(t){return t in e})))return this;var t={};Object.keys(e).forEach((function(n){t[n]=Array.isArray(e[n])?te(e[n]):Number(e[n])}));var n=this.segments,r=u(this.origin,3),i=r[0],a=r[1],s=r[2],o=t.origin;if(Array.isArray(o)&&o.length>=2){var c=u(o.map(Number),3),l=c[0],d=c[1],h=c[2];t.origin=[Number.isNaN(l)?i:l,Number.isNaN(d)?a:d,h||s]}else t.origin=[i,a,s];return this.segments=Gc(n,t),this}},{key:"flipX",value:function(){return this.transform({rotate:[0,180,0]}),this}},{key:"flipY",value:function(){return this.transform({rotate:[180,0,0]}),this}},{key:"toString",value:function(){return wc(this.segments,this.round)}}]),e}();function eu(e){var t=0,n=0,r=0;return kc(e).map((function(e){var i,a;return"M"===e[0]?(i=u(e,3),t=i[1],n=i[2],0):(r=function(e,t,n,r,i,a,s,o){return 3*((o-t)*(n+i)-(s-e)*(r+a)+r*(e-i)-n*(t-a)+o*(i+e/3)-s*(a+t/3))/20}.apply(void 0,[t,n].concat(te(e.slice(1)))),a=u(e.slice(-2),2),t=a[0],n=a[1],r)})).reduce((function(e,t){return e+t}),0)}function tu(e,t){var n=tc(e);if("string"==typeof n)throw TypeError(n);var r=te(n),i=Xc(r),a=r.length-1,s=0,o=0,c=n[0],l=u(c.slice(-2),2),d={x:l[0],y:l[1]};if(a<=0||!t||!Number.isFinite(t))return{segment:c,index:0,length:o,point:d,lengthAtSegment:s};if(t>=i)return o=i-(s=Xc(r=n.slice(0,-1))),{segment:n[a],index:a,length:o,lengthAtSegment:s};for(var h=[];a>0;)c=r[a],o=i-(s=Xc(r=r.slice(0,-1))),i=s,h.push({segment:c,index:a,length:o,lengthAtSegment:s}),a-=1;return h.find((function(e){return e.lengthAtSegment<=t}))}function nu(e,t){for(var n,r,i,a,s=tc(e),o=dc(s),c=Xc(s),u=function(e){var n=e.x-t.x,r=e.y-t.y;return n*n+r*r},l=8,d=0,h=0,f=1/0,p=0;p<=c;p+=l)(d=u(n=Zc(o,p)))<f&&(r=n,h=p,f=d);l/=2;for(var v=0,m=0,g=0,y=0;l>.5;)g=u(i=Zc(o,v=h-l)),y=u(a=Zc(o,m=h+l)),v>=0&&g<f?(r=i,h=v,f=g):m<=c&&y<f?(r=a,h=m,f=y):l/=2;var b=tu(s,h);return{closest:r,distance:Math.sqrt(f),segment:b}}function ru(e){if("string"!=typeof e)return!1;var t=new $o(e);for(Jo(t);t.index<t.max&&!t.err.length;)Xo(t);return!t.err.length&&"mM".includes(t.segments[0][0])}var iu={line:["x1","y1","x2","y2"],circle:["cx","cy","r"],ellipse:["cx","cy","rx","ry"],rect:["width","height","x","y","rx","ry"],polygon:["points"],polyline:["points"],glyph:["d"]},au={CSSMatrix:Uc,parsePathString:tc,isPathArray:ec,isCurveArray:cc,isAbsoluteArray:nc,isRelativeArray:ic,isNormalizedArray:oc,isValidPath:ru,pathToAbsolute:rc,pathToRelative:ac,pathToCurve:kc,pathToString:wc,getDrawDirection:function(e){return eu(kc(e))>=0},getPathArea:eu,getPathBBox:Qc,pathLengthFactory:Jc,getTotalLength:Xc,getPointAtLength:Zc,getClosestPoint:function(e,t){return nu(e,t).closest},getSegmentOfPoint:function(e,t){return nu(e,t).segment},getPropertiesAtPoint:nu,getPropertiesAtLength:tu,getSegmentAtLength:function(e,t){return tu(e,t).segment},isPointInStroke:function(e,t){var n=nu(e,t).distance;return Math.abs(n)<.001},clonePath:Zo,splitPath:Ec,fixPath:function(e){var t=tc(e),n=dc(t),r=t.length,i="Z"===n.slice(-1)[0][0],a=i?r-2:r-1,s=u(n[0].slice(1),2),o=s[0],c=s[1],l=u(n[a].slice(-2),2),d=l[0],h=l[1];return i&&o===d&&c===h?t.slice(0,-1):t},roundPath:xc,optimizePath:Sc,reverseCurve:function(e){var t=e.slice(1).map((function(t,n,r){return[].concat(te(n?r[n-1].slice(-2):e[0].slice(1)),te(t.slice(1)))})).map((function(e){return e.map((function(t,n){return e[e.length-n-2*(1-n%2)]}))})).reverse();return[["M"].concat(te(t[0].slice(0,2)))].concat(te(t.map((function(e){return["C"].concat(te(e.slice(2)))}))))},reversePath:Tc,normalizePath:dc,transformPath:Gc,shapeToPath:function(e,t){var n=Object.keys(iu),r=e.tagName;if(r&&!n.some((function(e){return r===e})))throw TypeError("".concat(zo,': "').concat(r,'" is not SVGElement'));var i=document.createElementNS("http://www.w3.org/2000/svg","path"),a=r||e.type,s={};s.type=a;var o,c=iu[a];r?(c.forEach((function(t){s[t]=e.getAttribute(t)})),Object.values(e.attributes).forEach((function(e){var t=e.name,n=e.value;c.includes(t)||i.setAttribute(t,n)}))):(Object.assign(s,e),Object.keys(s).forEach((function(e){c.includes(e)||"type"===e||i.setAttribute(e.replace(/[A-Z]/g,(function(e){return"-".concat(e.toLowerCase())})),s[e])})));var u=Go.round;return"circle"===a?o=wc(function(e){var t=e.cx,n=e.cy,r=e.r;return[["M",t-r,n],["a",r,r,0,1,0,2*r,0],["a",r,r,0,1,0,-2*r,0]]}(s),u):"ellipse"===a?o=wc(function(e){var t=e.cx,n=e.cy,r=e.rx,i=e.ry;return[["M",t-r,n],["a",r,i,0,1,0,2*r,0],["a",r,i,0,1,0,-2*r,0]]}(s),u):["polyline","polygon"].includes(a)?o=wc(function(e){for(var t=[],n=(e.points||"").trim().split(/[\s|,]/).map(Number),r=0;r<n.length;)t.push([r?"L":"M",n[r],n[r+1]]),r+=2;return"polygon"===e.type?[].concat(t,[["z"]]):t}(s),u):"rect"===a?o=wc(function(e){var t=+e.x||0,n=+e.y||0,r=+e.width,i=+e.height,a=+e.rx,s=+e.ry;return a||s?(a=a||s,s=s||a,2*a>r&&(a-=(2*a-r)/2),2*s>i&&(s-=(2*s-i)/2),[["M",t+a,n],["h",r-2*a],["s",a,0,a,s],["v",i-2*s],["s",0,s,-a,s],["h",2*a-r],["s",-a,0,-a,-s],["v",2*s-i],["s",0,-s,a,-s]]):[["M",t,n],["h",r],["v",i],["H",t],["Z"]]}(s),u):"line"===a?o=wc(function(e){return[["M",e.x1,e.y1],["L",e.x2,e.y2]]}(s),u):"glyph"===a&&(o=r?e.getAttribute("d"):e.d),!!ru(o)&&(i.setAttribute("d",o),t&&r&&(e.before(i,e),e.remove()),i)},options:Go};Object.assign($c,au,{Version:"1.0.5"});var su=function(){var e,t=F(),n=window.location.href.split("/").pop(),r=u(Lo(Bo),3),i=r[0],a=r[1];r[2];return a?(0,Me.jsx)(je,{}):(console.log(i),(0,Me.jsx)(Me.Fragment,{children:"/mobile"===t.pathname?(0,Me.jsx)("div",{"data-aos":"fade-left"}):"/mobile_boyans"===t.pathname||"/mobile_answers"===t.pathname||"/mobile_kobita"===t.pathname||"/mobile_live"===t.pathname||"/app_details"===t.pathname||"/mobile_quran"===t.pathname||t.pathname==="/mobile_quran/".concat(n)?(0,Me.jsxs)("div",{className:"lg:hidden shadow-xl bg-white p-3 fixed top-0 w-full z-30",children:[(0,Me.jsx)("img",{style:{width:"55px"},className:"w-12 absolute top-0 left-0",src:Fo,alt:""}),(0,Me.jsx)("h2",{className:"text-sm font-bold",children:"\u0996\u09be\u09a8\u0995\u09be \u099a\u09bf\u09b6\u09a4\u09bf\u09df\u09be \u098f\u09ae\u09a6\u09be\u09a6\u09bf\u09df\u09be \u0986\u09b6\u09b0\u09be\u09ab\u09bf\u09df\u09be"}),(0,Me.jsx)("p",{className:"text-xs",children:"\u09b0\u09c1\u09ae\u09bf \u09a8\u0997\u09b0, \u09a8\u09ac\u09be\u09ac\u0997\u099e\u09cd\u099c, \u09a2\u09be\u0995\u09be\u0964"}),(0,Me.jsx)("img",{style:{width:"55px"},className:"absolute bottom-0 right-0 rotate-180",src:Fo,alt:""})]}):"/boyan_category"===t.pathname?(0,Me.jsxs)("div",{className:"lg:hidden shadow-xl bg-white p-3 fixed top-0 w-full z-30",children:[(0,Me.jsx)("img",(e={style:{width:"55px"}},X(e,"style",{width:"55px"}),X(e,"className","w-12 absolute top-0 left-0"),X(e,"src",Fo),X(e,"alt",""),e)),(0,Me.jsx)("h2",{className:"text-sm font-bold",children:"\u0996\u09be\u09a8\u0995\u09be \u099a\u09bf\u09b6\u09a4\u09bf\u09df\u09be \u098f\u09ae\u09a6\u09be\u09a6\u09bf\u09df\u09be \u0986\u09b6\u09b0\u09be\u09ab\u09bf\u09df\u09be"}),(0,Me.jsx)("p",{className:"text-xs",children:"\u09b0\u09c1\u09ae\u09bf \u09a8\u0997\u09b0, \u09a8\u09ac\u09be\u09ac\u0997\u099e\u09cd\u099c, \u09a2\u09be\u0995\u09be\u0964"}),(0,Me.jsx)("img",{style:{width:"55px"},className:"absolute bottom-0 right-0 rotate-180",src:Fo,alt:""})]}):"/boyan_subject"===t.pathname||"/prayer_times"===t.pathname||"/books"===t.pathname||"/new_topics"===t.pathname||"/mobile_notice"===t.pathname||"/register"===t.pathname||"/boyan_month"===t.pathname||"/answer_category"===t.pathname||"/shorts"===t.pathname||"/quran_recitation"===t.pathname?(0,Me.jsxs)("div",{className:"lg:hidden shadow-xl bg-white p-3 fixed top-0 w-full z-30",children:[(0,Me.jsx)("img",{style:{width:"55px"},className:"w-12 absolute top-0 left-0",src:Fo,alt:""}),(0,Me.jsx)("h2",{className:"text-sm font-bold",children:"\u0996\u09be\u09a8\u0995\u09be \u099a\u09bf\u09b6\u09a4\u09bf\u09df\u09be \u098f\u09ae\u09a6\u09be\u09a6\u09bf\u09df\u09be \u0986\u09b6\u09b0\u09be\u09ab\u09bf\u09df\u09be"}),(0,Me.jsx)("p",{className:"text-xs",children:"\u09b0\u09c1\u09ae\u09bf \u09a8\u0997\u09b0, \u09a8\u09ac\u09be\u09ac\u0997\u099e\u09cd\u099c, \u09a2\u09be\u0995\u09be\u0964"}),(0,Me.jsx)("img",{style:{width:"55px"},className:"absolute bottom-0 right-0 rotate-180",src:Fo,alt:""})]}):(0,Me.jsxs)("div",{style:{backgroundImage:"url(".concat(jo,")"),backgroundSize:"100px",position:"absolute",top:"-15px"},class:"navbar bg-base-100 shadow-lg h-24 bg-no-repeat z-30",children:[(0,Me.jsxs)("div",{class:"navbar-start",children:[(0,Me.jsxs)("div",{class:"dropdown",children:[(0,Me.jsx)("label",{tabindex:"0",class:"btn btn-ghost lg:hidden",children:(0,Me.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Me.jsx)("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 12h8m-8 6h16"})})}),(0,Me.jsxs)("ul",{tabindex:"0",class:"menu menu-compact dropdown-content mt-3 p-2 shadow bg-base-100 rounded-box w-52",children:[(0,Me.jsx)("li",{children:(0,Me.jsx)(Xe,{to:"/",children:"\u09ae\u09c1\u09b2 \u09aa\u09be\u09a4\u09be"})}),(0,Me.jsx)("li",{children:(0,Me.jsx)(Xe,{to:"/dashboard",children:"\u09a1\u09cd\u09af\u09be\u09b6\u09ac\u09cb\u09b0\u09cd\u09a1"})}),(0,Me.jsx)("li",{children:(0,Me.jsx)(Xe,{to:"/boyans",children:"\u09b8\u0995\u09b2 \u09ac\u09df\u09be\u09a8"})}),(0,Me.jsx)("li",{children:(0,Me.jsx)(Xe,{to:"/answers",children:"\u09b8\u0995\u09b2 \u09aa\u09cd\u09b0\u09b6\u09cd\u09a8-\u0989\u09a4\u09cd\u09a4\u09b0"})}),(0,Me.jsx)("li",{children:(0,Me.jsx)(Xe,{to:"/history",children:"\u0987\u09a4\u09bf\u09b9\u09be\u09b8"})}),(0,Me.jsx)("li",{children:(0,Me.jsx)(Xe,{to:"/notice",children:"\u09a8\u09cb\u099f\u09bf\u09b6"})}),(0,Me.jsx)("li",{children:(0,Me.jsx)(Xe,{to:"/live",children:"\u09b2\u09be\u0987\u09ad \u09ac\u09df\u09be\u09a8"})})]})]}),(0,Me.jsx)(Xe,{to:"/",class:"btn btn-ghost normal-case text-xl text-center mt-4",children:"\u0996\u09be\u09a8\u0995\u09be \u099a\u09bf\u09b6\u09a4\u09bf\u09df\u09be \u098f\u09ae\u09a6\u09be\u09a6\u09bf\u09df\u09be \u0986\u09b6\u09b0\u09be\u09ab\u09bf\u09df\u09be "})]}),(0,Me.jsx)("div",{class:"navbar-center hidden lg:flex",children:(0,Me.jsxs)("ul",{class:"menu menu-horizontal p-0 mt-4",children:[(0,Me.jsx)("li",{children:(0,Me.jsx)(Xe,{to:"/",children:"\u09ae\u09c1\u09b2 \u09aa\u09be\u09a4\u09be"})}),i&&(0,Me.jsx)("li",{children:(0,Me.jsx)(Xe,{to:"/dashboard",children:"\u09a1\u09cd\u09af\u09be\u09b6\u09ac\u09cb\u09b0\u09cd\u09a1"})}),(0,Me.jsx)("li",{children:(0,Me.jsx)(Xe,{to:"/boyans",children:"\u09b8\u0995\u09b2 \u09ac\u09df\u09be\u09a8"})}),(0,Me.jsx)("li",{children:(0,Me.jsx)(Xe,{to:"/answers",children:"\u09b8\u0995\u09b2 \u09aa\u09cd\u09b0\u09b6\u09cd\u09a8-\u0989\u09a4\u09cd\u09a4\u09b0"})}),(0,Me.jsx)("li",{children:(0,Me.jsx)(Xe,{to:"/history",children:"\u0987\u09a4\u09bf\u09b9\u09be\u09b8"})}),(0,Me.jsx)("li",{children:(0,Me.jsx)(Xe,{to:"/notice",children:"\u09a8\u09cb\u099f\u09bf\u09b6"})}),(0,Me.jsx)("li",{children:(0,Me.jsx)(Xe,{to:"/live",children:"\u09b2\u09be\u0987\u09ad \u09ac\u09df\u09be\u09a8"})}),(0,Me.jsx)("li",{children:(0,Me.jsx)(Xe,{className:"".concat(i?"":"hidden"),to:"/live",children:null===i||void 0===i?void 0:i.email.slice(0,7)})}),(0,Me.jsx)("li",{children:i?(0,Me.jsx)(Xe,{onClick:function(){return function(e){return vn(e).signOut()}(Bo)},to:"/",children:"\u09b2\u0997\u0986\u0989\u099f"}):(0,Me.jsx)(Xe,{to:"/login",children:"\u09b2\u0997\u0987\u09a8"})})]})}),"/dashboard"===t.pathname?(0,Me.jsx)("div",{class:"navbar-end",children:(0,Me.jsx)("label",{for:"my-drawer-2",tabindex:"0",class:"btn btn-ghost lg:hidden",children:(0,Me.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Me.jsx)("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 12h8m-8 6h16"})})})}):""]})}))},ou=__webpack_require__.p+"static/media/ecu.f7f721aaf8de871bbb44.gif";var cu=__webpack_require__.p+"static/media/live.9679b38662536624d84695cecd114e7b.svg";var uu=__webpack_require__.p+"static/media/boyan.3ea5d1b5703675e3d2d0b262d36fc676.svg";var lu=__webpack_require__.p+"static/media/question.7ef1c74f133adac5ef434e23a446fbb6.svg";var du=__webpack_require__.p+"static/media/kobita.816f37386763eb8db1987cf939723800.svg";var hu=__webpack_require__.p+"static/media/quran.e9bae48b457d21f67499268678b09c72.svg";var fu=__webpack_require__.p+"static/media/prayer.c325fbe55b11889a5f8d0f55bc8425c0.svg";var pu=__webpack_require__.p+"static/media/book.ccd6b38f39028c43be466b112aa499da.svg";var vu=__webpack_require__.p+"static/media/info.c0f03c3b267c4157d22d3cf3dc87f2a5.svg",mu=(__webpack_require__.p,__webpack_require__.p+"static/media/bg8.211ce839ca2ad404666f.jpg"),gu=(__webpack_require__.p,__webpack_require__(248)),yu=__webpack_require__(327),bu=__webpack_require__(164);var ku=function(e){e()},xu=function(){return ku},wu=(0,a.createContext)(null);function Tu(){return(0,a.useContext)(wu)}var Eu=function(){throw new Error("uSES not initialized!")},_u=Eu,Su=function(e,t){return e===t};function Au(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:wu,t=e===wu?Tu:function(){return(0,a.useContext)(e)};return function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Su;var r=t(),i=r.store,s=r.subscription,o=r.getServerState,c=_u(s.addNestedSub,i.getState,o||i.getState,e,n);return(0,a.useDebugValue)(c),c}}var Cu=Au();__webpack_require__(110),__webpack_require__(900);var Iu={notify:function(){},get:function(){return[]}};function Ru(e,t){var n,r=Iu;function i(){s.onStateChange&&s.onStateChange()}function a(){n||(n=t?t.addNestedSub(i):e.subscribe(i),r=function(){var e=xu(),t=null,n=null;return{clear:function(){t=null,n=null},notify:function(){e((function(){for(var e=t;e;)e.callback(),e=e.next}))},get:function(){for(var e=[],n=t;n;)e.push(n),n=n.next;return e},subscribe:function(e){var r=!0,i=n={callback:e,next:null,prev:n};return i.prev?i.prev.next=i:t=i,function(){r&&null!==t&&(r=!1,i.next?i.next.prev=i.prev:n=i.prev,i.prev?i.prev.next=i.next:t=i.next)}}}}())}var s={addNestedSub:function(e){return a(),r.subscribe(e)},notifyNestedSubs:function(){r.notify()},handleChangeWrapper:i,isSubscribed:function(){return Boolean(n)},trySubscribe:a,tryUnsubscribe:function(){n&&(n(),n=void 0,r.clear(),r=Iu)},getListeners:function(){return r}};return s}var Pu=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement)?a.useLayoutEffect:a.useEffect;var Du=function(e){var t=e.store,n=e.context,r=e.children,i=e.serverState,s=(0,a.useMemo)((function(){var e=Ru(t);return{store:t,subscription:e,getServerState:i?function(){return i}:void 0}}),[t,i]),o=(0,a.useMemo)((function(){return t.getState()}),[t]);Pu((function(){var e=s.subscription;return e.onStateChange=e.notifyNestedSubs,e.trySubscribe(),o!==t.getState()&&e.notifyNestedSubs(),function(){e.tryUnsubscribe(),e.onStateChange=void 0}}),[s,o]);var c=n||wu;return a.createElement(c.Provider,{value:s},r)};function Nu(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:wu,t=e===wu?Tu:function(){return(0,a.useContext)(e)};return function(){return t().store}}var Ou=Nu();function Lu(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:wu,t=e===wu?Ou:Nu(e);return function(){return t().dispatch}}var Mu,ju=Lu();function Fu(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw Error("[Immer] minified error nr: "+e+(n.length?" "+n.map((function(e){return"'"+e+"'"})).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function Uu(e){return!!e&&!!e[Al]}function Bu(e){var t;return!!e&&(function(e){if(!e||"object"!=typeof e)return!1;var t=Object.getPrototypeOf(e);if(null===t)return!0;var n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return n===Object||"function"==typeof n&&Function.toString.call(n)===Cl}(e)||Array.isArray(e)||!!e[Sl]||!!(null===(t=e.constructor)||void 0===t?void 0:t[Sl])||qu(e)||Yu(e))}function Gu(e,t,n){void 0===n&&(n=!1),0===Vu(e)?(n?Object.keys:Il)(e).forEach((function(r){n&&"symbol"==typeof r||t(r,e[r],e)})):e.forEach((function(n,r){return t(r,n,e)}))}function Vu(e){var t=e[Al];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:qu(e)?2:Yu(e)?3:0}function Hu(e,t){return 2===Vu(e)?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function zu(e,t){return 2===Vu(e)?e.get(t):e[t]}function Wu(e,t,n){var r=Vu(e);2===r?e.set(t,n):3===r?(e.delete(t),e.add(n)):e[t]=n}function Ku(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}function qu(e){return wl&&e instanceof Map}function Yu(e){return Tl&&e instanceof Set}function Ju(e){return e.o||e.t}function Qu(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=Rl(e);delete t[Al];for(var n=Il(t),r=0;r<n.length;r++){var i=n[r],a=t[i];!1===a.writable&&(a.writable=!0,a.configurable=!0),(a.get||a.set)&&(t[i]={configurable:!0,writable:!0,enumerable:a.enumerable,value:e[i]})}return Object.create(Object.getPrototypeOf(e),t)}function Xu(e,t){return void 0===t&&(t=!1),$u(e)||Uu(e)||!Bu(e)||(Vu(e)>1&&(e.set=e.add=e.clear=e.delete=Zu),Object.freeze(e),t&&Gu(e,(function(e,t){return Xu(t,!0)}),!0)),e}function Zu(){Fu(2)}function $u(e){return null==e||"object"!=typeof e||Object.isFrozen(e)}function el(e){var t=Pl[e];return t||Fu(18,e),t}function tl(e,t){Pl[e]||(Pl[e]=t)}function nl(){return kl}function rl(e,t){t&&(el("Patches"),e.u=[],e.s=[],e.v=t)}function il(e){al(e),e.p.forEach(ol),e.p=null}function al(e){e===kl&&(kl=e.l)}function sl(e){return kl={p:[],l:kl,h:e,m:!0,_:0}}function ol(e){var t=e[Al];0===t.i||1===t.i?t.j():t.O=!0}function cl(e,t){t._=t.p.length;var n=t.p[0],r=void 0!==e&&e!==n;return t.h.g||el("ES5").S(t,e,r),r?(n[Al].P&&(il(t),Fu(4)),Bu(e)&&(e=ul(t,e),t.l||dl(t,e)),t.u&&el("Patches").M(n[Al].t,e,t.u,t.s)):e=ul(t,n,[]),il(t),t.u&&t.v(t.u,t.s),e!==_l?e:void 0}function ul(e,t,n){if($u(t))return t;var r=t[Al];if(!r)return Gu(t,(function(i,a){return ll(e,r,t,i,a,n)}),!0),t;if(r.A!==e)return t;if(!r.P)return dl(e,r.t,!0),r.t;if(!r.I){r.I=!0,r.A._--;var i=4===r.i||5===r.i?r.o=Qu(r.k):r.o;Gu(3===r.i?new Set(i):i,(function(t,a){return ll(e,r,i,t,a,n)})),dl(e,i,!1),n&&e.u&&el("Patches").N(r,n,e.u,e.s)}return r.o}function ll(e,t,n,r,i,a){if(Uu(i)){var s=ul(e,i,a&&t&&3!==t.i&&!Hu(t.R,r)?a.concat(r):void 0);if(Wu(n,r,s),!Uu(s))return;e.m=!1}if(Bu(i)&&!$u(i)){if(!e.h.D&&e._<1)return;ul(e,i),t&&t.A.l||dl(e,i)}}function dl(e,t,n){void 0===n&&(n=!1),e.h.D&&e.m&&Xu(t,n)}function hl(e,t){var n=e[Al];return(n?Ju(n):e)[t]}function fl(e,t){if(t in e)for(var n=Object.getPrototypeOf(e);n;){var r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=Object.getPrototypeOf(n)}}function pl(e){e.P||(e.P=!0,e.l&&pl(e.l))}function vl(e){e.o||(e.o=Qu(e.t))}function ml(e,t,n){var r=qu(t)?el("MapSet").F(t,n):Yu(t)?el("MapSet").T(t,n):e.g?function(e,t){var n=Array.isArray(e),r={i:n?1:0,A:t?t.A:nl(),P:!1,I:!1,R:{},l:t,t:e,k:null,o:null,j:null,C:!1},i=r,a=Dl;n&&(i=[r],a=Nl);var s=Proxy.revocable(i,a),o=s.revoke,c=s.proxy;return r.k=c,r.j=o,c}(t,n):el("ES5").J(t,n);return(n?n.A:nl()).p.push(r),r}function gl(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return Qu(e)}function yl(){function e(e,t){var n=i[e];return n?n.enumerable=t:i[e]=n={configurable:!0,enumerable:t,get:function(){var t=this[Al];return Dl.get(t,e)},set:function(t){var n=this[Al];Dl.set(n,e,t)}},n}function t(e){for(var t=e.length-1;t>=0;t--){var i=e[t][Al];if(!i.P)switch(i.i){case 5:r(i)&&pl(i);break;case 4:n(i)&&pl(i)}}}function n(e){for(var t=e.t,n=e.k,r=Il(n),i=r.length-1;i>=0;i--){var a=r[i];if(a!==Al){var s=t[a];if(void 0===s&&!Hu(t,a))return!0;var o=n[a],c=o&&o[Al];if(c?c.t!==s:!Ku(o,s))return!0}}var u=!!t[Al];return r.length!==Il(t).length+(u?0:1)}function r(e){var t=e.k;if(t.length!==e.t.length)return!0;var n=Object.getOwnPropertyDescriptor(t,t.length-1);if(n&&!n.get)return!0;for(var r=0;r<t.length;r++)if(!t.hasOwnProperty(r))return!0;return!1}var i={};tl("ES5",{J:function(t,n){var r=Array.isArray(t),i=function(t,n){if(t){for(var r=Array(n.length),i=0;i<n.length;i++)Object.defineProperty(r,""+i,e(i,!0));return r}var a=Rl(n);delete a[Al];for(var s=Il(a),o=0;o<s.length;o++){var c=s[o];a[c]=e(c,t||!!a[c].enumerable)}return Object.create(Object.getPrototypeOf(n),a)}(r,t),a={i:r?5:4,A:n?n.A:nl(),P:!1,I:!1,R:{},l:n,t:t,k:i,o:null,O:!1,C:!1};return Object.defineProperty(i,Al,{value:a,writable:!0}),i},S:function(e,n,i){i?Uu(n)&&n[Al].A===e&&t(e.p):(e.u&&function e(t){if(t&&"object"==typeof t){var n=t[Al];if(n){var i=n.t,a=n.k,s=n.R,o=n.i;if(4===o)Gu(a,(function(t){t!==Al&&(void 0!==i[t]||Hu(i,t)?s[t]||e(a[t]):(s[t]=!0,pl(n)))})),Gu(i,(function(e){void 0!==a[e]||Hu(a,e)||(s[e]=!1,pl(n))}));else if(5===o){if(r(n)&&(pl(n),s.length=!0),a.length<i.length)for(var c=a.length;c<i.length;c++)s[c]=!1;else for(var u=i.length;u<a.length;u++)s[u]=!0;for(var l=Math.min(a.length,i.length),d=0;d<l;d++)a.hasOwnProperty(d)||(s[d]=!0),void 0===s[d]&&e(a[d])}}}}(e.p[0]),t(e.p))},K:function(e){return 4===e.i?n(e):r(e)}})}!function(e){_u=e}(yu.useSyncExternalStoreWithSelector),function(e){e}(gu.useSyncExternalStore),Mu=bu.unstable_batchedUpdates,ku=Mu;var bl,kl,xl="undefined"!=typeof Symbol&&"symbol"==typeof Symbol("x"),wl="undefined"!=typeof Map,Tl="undefined"!=typeof Set,El="undefined"!=typeof Proxy&&void 0!==Proxy.revocable&&"undefined"!=typeof Reflect,_l=xl?Symbol.for("immer-nothing"):((bl={})["immer-nothing"]=!0,bl),Sl=xl?Symbol.for("immer-draftable"):"__$immer_draftable",Al=xl?Symbol.for("immer-state"):"__$immer_state",Cl=("undefined"!=typeof Symbol&&Symbol.iterator,""+Object.prototype.constructor),Il="undefined"!=typeof Reflect&&Reflect.ownKeys?Reflect.ownKeys:void 0!==Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,Rl=Object.getOwnPropertyDescriptors||function(e){var t={};return Il(e).forEach((function(n){t[n]=Object.getOwnPropertyDescriptor(e,n)})),t},Pl={},Dl={get:function(e,t){if(t===Al)return e;var n=Ju(e);if(!Hu(n,t))return function(e,t,n){var r,i=fl(t,n);return i?"value"in i?i.value:null===(r=i.get)||void 0===r?void 0:r.call(e.k):void 0}(e,n,t);var r=n[t];return e.I||!Bu(r)?r:r===hl(e.t,t)?(vl(e),e.o[t]=ml(e.A.h,r,e)):r},has:function(e,t){return t in Ju(e)},ownKeys:function(e){return Reflect.ownKeys(Ju(e))},set:function(e,t,n){var r=fl(Ju(e),t);if(null==r?void 0:r.set)return r.set.call(e.k,n),!0;if(!e.P){var i=hl(Ju(e),t),a=null==i?void 0:i[Al];if(a&&a.t===n)return e.o[t]=n,e.R[t]=!1,!0;if(Ku(n,i)&&(void 0!==n||Hu(e.t,t)))return!0;vl(e),pl(e)}return e.o[t]===n&&(void 0!==n||t in e.o)||Number.isNaN(n)&&Number.isNaN(e.o[t])||(e.o[t]=n,e.R[t]=!0),!0},deleteProperty:function(e,t){return void 0!==hl(e.t,t)||t in e.t?(e.R[t]=!1,vl(e),pl(e)):delete e.R[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var n=Ju(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r?{writable:!0,configurable:1!==e.i||"length"!==t,enumerable:r.enumerable,value:n[t]}:r},defineProperty:function(){Fu(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){Fu(12)}},Nl={};Gu(Dl,(function(e,t){Nl[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}})),Nl.deleteProperty=function(e,t){return Nl.set.call(this,e,t,void 0)},Nl.set=function(e,t,n){return Dl.set.call(this,e[0],t,n,e[0])};var Ol=function(){function e(e){var t=this;this.g=El,this.D=!0,this.produce=function(e,n,r){if("function"==typeof e&&"function"!=typeof n){var i=n;n=e;var a=t;return function(e){var t=this;void 0===e&&(e=i);for(var r=arguments.length,s=Array(r>1?r-1:0),o=1;o<r;o++)s[o-1]=arguments[o];return a.produce(e,(function(e){var r;return(r=n).call.apply(r,[t,e].concat(s))}))}}var s;if("function"!=typeof n&&Fu(6),void 0!==r&&"function"!=typeof r&&Fu(7),Bu(e)){var o=sl(t),c=ml(t,e,void 0),u=!0;try{s=n(c),u=!1}finally{u?il(o):al(o)}return"undefined"!=typeof Promise&&s instanceof Promise?s.then((function(e){return rl(o,r),cl(e,o)}),(function(e){throw il(o),e})):(rl(o,r),cl(s,o))}if(!e||"object"!=typeof e){if(void 0===(s=n(e))&&(s=e),s===_l&&(s=void 0),t.D&&Xu(s,!0),r){var l=[],d=[];el("Patches").M(e,s,l,d),r(l,d)}return s}Fu(21,e)},this.produceWithPatches=function(e,n){if("function"==typeof e)return function(n){for(var r=arguments.length,i=Array(r>1?r-1:0),a=1;a<r;a++)i[a-1]=arguments[a];return t.produceWithPatches(n,(function(t){return e.apply(void 0,[t].concat(i))}))};var r,i,a=t.produce(e,n,(function(e,t){r=e,i=t}));return"undefined"!=typeof Promise&&a instanceof Promise?a.then((function(e){return[e,r,i]})):[a,r,i]},"boolean"==typeof(null==e?void 0:e.useProxies)&&this.setUseProxies(e.useProxies),"boolean"==typeof(null==e?void 0:e.autoFreeze)&&this.setAutoFreeze(e.autoFreeze)}var t=e.prototype;return t.createDraft=function(e){Bu(e)||Fu(8),Uu(e)&&(e=function(e){return Uu(e)||Fu(22,e),function e(t){if(!Bu(t))return t;var n,r=t[Al],i=Vu(t);if(r){if(!r.P&&(r.i<4||!el("ES5").K(r)))return r.t;r.I=!0,n=gl(t,i),r.I=!1}else n=gl(t,i);return Gu(n,(function(t,i){r&&zu(r.t,t)===i||Wu(n,t,e(i))})),3===i?new Set(n):n}(e)}(e));var t=sl(this),n=ml(this,e,void 0);return n[Al].C=!0,al(t),n},t.finishDraft=function(e,t){var n=(e&&e[Al]).A;return rl(n,t),cl(void 0,n)},t.setAutoFreeze=function(e){this.D=e},t.setUseProxies=function(e){e&&!El&&Fu(20),this.g=e},t.applyPatches=function(e,t){var n;for(n=t.length-1;n>=0;n--){var r=t[n];if(0===r.path.length&&"replace"===r.op){e=r.value;break}}n>-1&&(t=t.slice(n+1));var i=el("Patches").$;return Uu(e)?i(e,t):this.produce(e,(function(e){return i(e,t)}))},e}(),Ll=new Ol,Ml=Ll.produce,jl=(Ll.produceWithPatches.bind(Ll),Ll.setAutoFreeze.bind(Ll),Ll.setUseProxies.bind(Ll),Ll.applyPatches.bind(Ll),Ll.createDraft.bind(Ll),Ll.finishDraft.bind(Ll),Ml);function Fl(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var Ul="function"===typeof Symbol&&Symbol.observable||"@@observable",Bl=function(){return Math.random().toString(36).substring(7).split("").join(".")},Gl={INIT:"@@redux/INIT"+Bl(),REPLACE:"@@redux/REPLACE"+Bl(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+Bl()}};function Vl(e){if("object"!==typeof e||null===e)return!1;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function Hl(e,t,n){var r;if("function"===typeof t&&"function"===typeof n||"function"===typeof n&&"function"===typeof arguments[3])throw new Error(Fl(0));if("function"===typeof t&&"undefined"===typeof n&&(n=t,t=void 0),"undefined"!==typeof n){if("function"!==typeof n)throw new Error(Fl(1));return n(Hl)(e,t)}if("function"!==typeof e)throw new Error(Fl(2));var i=e,a=t,s=[],o=s,c=!1;function u(){o===s&&(o=s.slice())}function l(){if(c)throw new Error(Fl(3));return a}function d(e){if("function"!==typeof e)throw new Error(Fl(4));if(c)throw new Error(Fl(5));var t=!0;return u(),o.push(e),function(){if(t){if(c)throw new Error(Fl(6));t=!1,u();var n=o.indexOf(e);o.splice(n,1),s=null}}}function h(e){if(!Vl(e))throw new Error(Fl(7));if("undefined"===typeof e.type)throw new Error(Fl(8));if(c)throw new Error(Fl(9));try{c=!0,a=i(a,e)}finally{c=!1}for(var t=s=o,n=0;n<t.length;n++){(0,t[n])()}return e}function f(e){if("function"!==typeof e)throw new Error(Fl(10));i=e,h({type:Gl.REPLACE})}function p(){var e,t=d;return(e={subscribe:function(e){if("object"!==typeof e||null===e)throw new Error(Fl(11));function n(){e.next&&e.next(l())}return n(),{unsubscribe:t(n)}}})[Ul]=function(){return this},e}return h({type:Gl.INIT}),(r={dispatch:h,subscribe:d,getState:l,replaceReducer:f})[Ul]=p,r}function zl(e){for(var t=Object.keys(e),n={},r=0;r<t.length;r++){var i=t[r];0,"function"===typeof e[i]&&(n[i]=e[i])}var a,s=Object.keys(n);try{!function(e){Object.keys(e).forEach((function(t){var n=e[t];if("undefined"===typeof n(void 0,{type:Gl.INIT}))throw new Error(Fl(12));if("undefined"===typeof n(void 0,{type:Gl.PROBE_UNKNOWN_ACTION()}))throw new Error(Fl(13))}))}(n)}catch(o){a=o}return function(e,t){if(void 0===e&&(e={}),a)throw a;for(var r=!1,i={},o=0;o<s.length;o++){var c=s[o],u=n[c],l=e[c],d=u(l,t);if("undefined"===typeof d){t&&t.type;throw new Error(Fl(14))}i[c]=d,r=r||d!==l}return(r=r||s.length!==Object.keys(e).length)?i:e}}function Wl(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return 0===t.length?function(e){return e}:1===t.length?t[0]:t.reduce((function(e,t){return function(){return e(t.apply(void 0,arguments))}}))}function Kl(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return function(){var n=e.apply(void 0,arguments),r=function(){throw new Error(Fl(15))},i={getState:n.getState,dispatch:function(){return r.apply(void 0,arguments)}},a=t.map((function(e){return e(i)}));return r=Wl.apply(void 0,a)(n.dispatch),$($({},n),{},{dispatch:r})}}}function ql(e){return function(t){var n=t.dispatch,r=t.getState;return function(t){return function(i){return"function"===typeof i?i(n,r,e):t(i)}}}}var Yl=ql();Yl.withExtraArgument=ql;var Jl=Yl,Ql=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Xl=function(e,t){var n,r,i,a,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:o(0),throw:o(1),return:o(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function o(a){return function(o){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,r=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){s=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){s.label=a[1];break}if(6===a[0]&&s.label<i[1]){s.label=i[1],i=a;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(a);break}i[2]&&s.ops.pop(),s.trys.pop();continue}a=t.call(e,s)}catch(o){a=[6,o],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,o])}}},Zl=function(e,t){for(var n=0,r=t.length,i=e.length;n<r;n++,i++)e[i]=t[n];return e},$l=Object.defineProperty,ed=Object.defineProperties,td=Object.getOwnPropertyDescriptors,nd=Object.getOwnPropertySymbols,rd=Object.prototype.hasOwnProperty,id=Object.prototype.propertyIsEnumerable,ad=function(e,t,n){return t in e?$l(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},sd=function(e,t){for(var n in t||(t={}))rd.call(t,n)&&ad(e,n,t[n]);if(nd)for(var r=0,i=nd(t);r<i.length;r++){n=i[r];id.call(t,n)&&ad(e,n,t[n])}return e},od=function(e,t){return ed(e,td(t))},cd=function(e,t,n){return new Promise((function(r,i){var a=function(e){try{o(n.next(e))}catch(t){i(t)}},s=function(e){try{o(n.throw(e))}catch(t){i(t)}},o=function(e){return e.done?r(e.value):Promise.resolve(e.value).then(a,s)};o((n=n.apply(e,t)).next())}))},ud="undefined"!==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(0!==arguments.length)return"object"===typeof arguments[0]?Wl:Wl.apply(null,arguments)};"undefined"!==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__;function ld(e){if("object"!==typeof e||null===e)return!1;var t=Object.getPrototypeOf(e);if(null===t)return!0;for(var n=t;null!==Object.getPrototypeOf(n);)n=Object.getPrototypeOf(n);return t===n}var dd=function(e){function t(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=e.apply(this,n)||this;return Object.setPrototypeOf(i,t.prototype),i}return Ql(t,e),Object.defineProperty(t,Symbol.species,{get:function(){return t},enumerable:!1,configurable:!0}),t.prototype.concat=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e.prototype.concat.apply(this,t)},t.prototype.prepend=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return 1===e.length&&Array.isArray(e[0])?new(t.bind.apply(t,Zl([void 0],e[0].concat(this)))):new(t.bind.apply(t,Zl([void 0],e.concat(this))))},t}(Array);function hd(e){return Bu(e)?jl(e,(function(){})):e}function fd(){return function(e){return function(e){void 0===e&&(e={});var t=e.thunk,n=void 0===t||t,r=(e.immutableCheck,e.serializableCheck,new dd);n&&(!function(e){return"boolean"===typeof e}(n)?r.push(Jl.withExtraArgument(n.extraArgument)):r.push(Jl));0;return r}(e)}}function pd(e,t){function n(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];if(t){var i=t.apply(void 0,n);if(!i)throw new Error("prepareAction did not return an object");return sd(sd({type:e,payload:i.payload},"meta"in i&&{meta:i.meta}),"error"in i&&{error:i.error})}return{type:e,payload:n[0]}}return n.toString=function(){return""+e},n.type=e,n.match=function(t){return t.type===e},n}function vd(e){var t,n={},r=[],i={addCase:function(e,t){var r="string"===typeof e?e:e.type;if(r in n)throw new Error("addCase cannot be called with two reducers for the same action type");return n[r]=t,i},addMatcher:function(e,t){return r.push({matcher:e,reducer:t}),i},addDefaultCase:function(e){return t=e,i}};return e(i),[n,r,t]}var md=function(e){void 0===e&&(e=21);for(var t="",n=e;n--;)t+="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW"[64*Math.random()|0];return t},gd=["name","message","stack","code"],yd=function(e,t){this.payload=e,this.meta=t},bd=function(e,t){this.payload=e,this.meta=t},kd=function(e){if("object"===typeof e&&null!==e){for(var t={},n=0,r=gd;n<r.length;n++){var i=r[n];"string"===typeof e[i]&&(t[i]=e[i])}return t}return{message:String(e)}};!function(){function e(e,t,n){var r=pd(e+"/fulfilled",(function(e,t,n,r){return{payload:e,meta:od(sd({},r||{}),{arg:n,requestId:t,requestStatus:"fulfilled"})}})),i=pd(e+"/pending",(function(e,t,n){return{payload:void 0,meta:od(sd({},n||{}),{arg:t,requestId:e,requestStatus:"pending"})}})),a=pd(e+"/rejected",(function(e,t,r,i,a){return{payload:i,error:(n&&n.serializeError||kd)(e||"Rejected"),meta:od(sd({},a||{}),{arg:r,requestId:t,rejectedWithValue:!!i,requestStatus:"rejected",aborted:"AbortError"===(null==e?void 0:e.name),condition:"ConditionError"===(null==e?void 0:e.name)})}})),s="undefined"!==typeof AbortController?AbortController:function(){function e(){this.signal={aborted:!1,addEventListener:function(){},dispatchEvent:function(){return!1},onabort:function(){},removeEventListener:function(){},reason:void 0,throwIfAborted:function(){}}}return e.prototype.abort=function(){0},e}();return Object.assign((function(e){return function(o,c,u){var l,d=(null==n?void 0:n.idGenerator)?n.idGenerator(e):md(),h=new s;function f(e){l=e,h.abort()}var p=function(){return cd(this,null,(function(){var s,p,v,m,g,y;return Xl(this,(function(b){switch(b.label){case 0:return b.trys.push([0,4,,5]),m=null==(s=null==n?void 0:n.condition)?void 0:s.call(n,e,{getState:c,extra:u}),null===(k=m)||"object"!==typeof k||"function"!==typeof k.then?[3,2]:[4,m];case 1:m=b.sent(),b.label=2;case 2:if(!1===m||h.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};return!0,g=new Promise((function(e,t){return h.signal.addEventListener("abort",(function(){return t({name:"AbortError",message:l||"Aborted"})}))})),o(i(d,e,null==(p=null==n?void 0:n.getPendingMeta)?void 0:p.call(n,{requestId:d,arg:e},{getState:c,extra:u}))),[4,Promise.race([g,Promise.resolve(t(e,{dispatch:o,getState:c,extra:u,requestId:d,signal:h.signal,abort:f,rejectWithValue:function(e,t){return new yd(e,t)},fulfillWithValue:function(e,t){return new bd(e,t)}})).then((function(t){if(t instanceof yd)throw t;return t instanceof bd?r(t.payload,d,e,t.meta):r(t,d,e)}))])];case 3:return v=b.sent(),[3,5];case 4:return y=b.sent(),v=y instanceof yd?a(null,d,e,y.payload,y.meta):a(y,d,e),[3,5];case 5:return n&&!n.dispatchConditionRejection&&a.match(v)&&v.meta.condition||o(v),[2,v]}var k}))}))}();return Object.assign(p,{abort:f,requestId:d,arg:e,unwrap:function(){return p.then(xd)}})}}),{pending:i,rejected:a,fulfilled:r,typePrefix:e})}e.withTypes=function(){return e}}();function xd(e){if(e.meta&&e.meta.rejectedWithValue)throw e.payload;if(e.error)throw e.error;return e.payload}Object.assign;var wd="listenerMiddleware";pd(wd+"/add"),pd(wd+"/removeAll"),pd(wd+"/remove");"function"===typeof queueMicrotask&&queueMicrotask.bind("undefined"!==typeof window?window:"undefined"!==typeof __webpack_require__.g?__webpack_require__.g:globalThis);var Td,Ed=function(e){return function(t){setTimeout(t,e)}};"undefined"!==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame:Ed(10);yl();var _d=function(e){var t=e.name;if(!t)throw new Error("`name` is a required option for createSlice");var n,r="function"==typeof e.initialState?e.initialState:hd(e.initialState),i=e.reducers||{},a=Object.keys(i),s={},o={},c={};function u(){var t="function"===typeof e.extraReducers?vd(e.extraReducers):[e.extraReducers],n=t[0],i=void 0===n?{}:n,a=t[1],s=void 0===a?[]:a,c=t[2],u=void 0===c?void 0:c,l=sd(sd({},i),o);return function(e,t,n,r){void 0===n&&(n=[]);var i,a="function"===typeof t?vd(t):[t,n,r],s=a[0],o=a[1],c=a[2];if(function(e){return"function"===typeof e}(e))i=function(){return hd(e())};else{var u=hd(e);i=function(){return u}}function l(e,t){void 0===e&&(e=i());var n=Zl([s[t.type]],o.filter((function(e){return(0,e.matcher)(t)})).map((function(e){return e.reducer})));return 0===n.filter((function(e){return!!e})).length&&(n=[c]),n.reduce((function(e,n){if(n){var r;if(Uu(e))return void 0===(r=n(e,t))?e:r;if(Bu(e))return jl(e,(function(e){return n(e,t)}));if(void 0===(r=n(e,t))){if(null===e)return e;throw Error("A case reducer on a non-draftable value must not return undefined")}return r}return e}),e)}return l.getInitialState=i,l}(r,(function(e){for(var t in l)e.addCase(t,l[t]);for(var n=0,r=s;n<r.length;n++){var i=r[n];e.addMatcher(i.matcher,i.reducer)}u&&e.addDefaultCase(u)}))}return a.forEach((function(e){var n,r,a=i[e],u=t+"/"+e;"reducer"in a?(n=a.reducer,r=a.prepare):n=a,s[e]=n,o[u]=n,c[e]=r?pd(u,r):pd(u)})),{name:t,reducer:function(e,t){return n||(n=u()),n(e,t)},actions:c,caseReducers:s,getInitialState:function(){return n||(n=u()),n.getInitialState()}}}({name:"boyan",initialState:{allboyan:[],allanswer:[],filter:"",subject:"",answer_category:"",month:"",islive:!1,prayerTimes:[]},reducers:{getAllBoyans:function(e,t){if(t.payload){var n=t.payload.sort((function(e,t){return(null===e||void 0===e?void 0:e.date)>(null===t||void 0===t?void 0:t.date)?-1:(null===e||void 0===e?void 0:e.date)<(null===t||void 0===t?void 0:t.date)?1:-1}));e.allboyan.push(n)}},getAllAnswer:function(e,t){if(t.payload){var n=t.payload.sort((function(e,t){return(null===e||void 0===e?void 0:e.answer_no)>(null===t||void 0===t?void 0:t.answer_no)?-1:(null===e||void 0===e?void 0:e.answer_no)<(null===t||void 0===t?void 0:t.answer_no)?1:-1}));e.allanswer.push(n)}},getBoyanCategory:function(e,t){e.filter=t.payload},getAnswerCategory:function(e,t){e.answer_category=t.payload},getIslive:function(e,t){e.islive=!e.islive},getBoyanSubject:function(e,t){e.filter="subject",e.subject=t.payload},getBoyanMonth:function(e,t){e.filter="month",e.month=t.payload},getPrayerTimes:function(e,t){e.prayerTimes.push(t.payload)}}}),Sd=_d.actions,Ad=Sd.getAllBoyans,Cd=Sd.getAllAnswer,Id=Sd.getBoyanCategory,Rd=Sd.getAnswerCategory,Pd=(Sd.getIslive,Sd.getBoyanSubject),Dd=Sd.getBoyanMonth,Nd=(Sd.getPrayerTimes,_d.reducer),Od=function(){ju();return(0,Me.jsx)("div",{style:{backgroundImage:"url(".concat(mu,")"),backgroundPosition:"center",backgroundSize:"cover",backgroundRepeat:"no-repeat"},className:"relative bg-red-100",children:(0,Me.jsx)("div",{className:"h-screen flex justify-center items-center",children:(0,Me.jsxs)("div",{className:"grid grid-cols-3 gap-2 w-11/12 mx-auto",children:[(0,Me.jsxs)(Xe,{"data-aos":"fade-right",to:"/boyan_category",className:"ml-4 mt-40 shadow-lg border border-white/40 bg-white/30 backdrop-blur-xl text-white p-5 w-20 h-20 rounded-lg flex flex-col justify-center items-center hover:bg-white/60 hover:text-white",children:[(0,Me.jsx)("img",{className:"w-12 mr-5",src:uu,alt:""}),(0,Me.jsx)("h2",{className:"text-sm",children:"\u09ac\u09df\u09be\u09a8"})]}),(0,Me.jsxs)(Xe,{"data-aos":"zoom-in",to:"/shorts",className:"ml-4 mt-40 border border-white/40 bg-white/30 backdrop-blur-xl text-white p-5 w-20 h-20 rounded-lg flex flex-col justify-center items-center hover:bg-white/60 hover:text-white",children:[(0,Me.jsx)("img",{className:"w-8",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAACXBIWXMAAAsTAAALEwEAmpwYAAAEgElEQVR4nO2ZX0xTVxzHD4vORNFMI05Mtizby2Iys0SYiXtSkyXqHtyetunLNCPysMR70bWNvd7M5BYxKApIaS9tb1voH/8hZEajCy0tGw9Dp9yLxWFhBQQxbnYsbriBZzntLq295/YPlltM+k1+jySfD+f8zj3nVwDyySeffBLDudt/sLja/OBlDEnpDnLudsi52yB42UIe0X1OaHUznKsNWlwZCNBCIVDxV4Ca7wZk/2qQi1QcrtxKUswUSeki8BbnJZgBvA+oBRgpFf8zIIRVQMlUUJUbCYqZRPCozM5LkUr9h7eWAbXgmYWPSXwPaM8iReAP0JVvk5TugQgfFWiFJkdrUoGi+onCwmO/WCTwsTo+7/Bfa5giQsvcjYdHheBNjoswGfxadthXbAw9W3EiKF2B6CrMAA3/4bzBHzpUtZygmJ5E+KjARdjUghd43Ta+rNgY8hSzw1CsFdUDXTKrcAeU9SzOOnxZmWExodVdxcGjQvBNLRegzH/eHw9fjMoYml7ybeCWjERZlvFhAallODn4qMAFyDaff05gvWei8N3Wh2YJPButtcbQaIFGmJRuJWEY0MKrWcMntMyJZPCoEDxrjwkg+NLOsL+08w/43pVHXjmJladk+kHDf5ox6O695Tt37ysf3bOvHMZXKviIgP08NNrPQRG+pDPsQ/BirW9/5MGuAhv665XDfQ8xDX05Y4E9e/ePJMKnK4DgjbZzEAePqqQzPP2WY6wXJ/FaTbADI/A08sHLSAADn7aA7Sw02M7CbX1T5kR4sTZ6wv3oGMX0whC+mfmPFRNA8AarG+4ag3Dn4LS/1Bt+hpN4xzX+E24VFh0JBDECx5QTsLph4/8CqD66+48HJ/D+9d+7cALLjw/4MNuoTTEBBN/IuWYFdo3BJx90TT6W9II3/AAnsKpuyIvZRv3KCXAuqOec8QJwa+/fkWM0sdaZRn5LFChq+PVHjMCEYgJ6izNS8QLbB556cQJvWu8HEwXW6EM3MD0wpZhAg8UJG8yOtATesI4MSQQMuRYwOyQCWzLZQvrB7pxuoTNmBzxjaokJjM482eTHNfFjfBPXBqVNrBICygmYWmC9qTnlMbrh2gI9RhF8fVNUYEeyD5lzvAf/IbszmNMPGYKva7LDbfyURe4qUdIRDszvVeIFLnMIvo61J7/MNd/nsZe5k5gr9Vwuc198uX87TiItAdYGa1nbHK/TgvQ6rRa+A9kKSemqUwnUGm2w1mjFP2guz+FBo+r9RNEnJYI/bYgJpPmkHC7Q9P2J2fuhrD/sUz3qEfxpA5f+o54N/bvkaOA2/jkpfJVV+FkJml5KUrpuvAAHTzVako1VOp4796tkxioqvm9exipiSLp6NW6wheDlBCSDrep7XtnB1jf8ZqDEaJHQMuOJAjV684uNFlVCFVAqB2lmA0ExYVEAwacSiITuWQpUgvQRr+avKzbcFUNQzBZxvJ62AG68ruZvAnXvSpCLEFrmM/QDR0YCC+UHDjGElqnIWGCh5WSD2V+jN/lyzZFPPvmAhZ//ABD04Q7xFXymAAAAAElFTkSuQmCC",alt:""}),(0,Me.jsx)("h2",{className:"text-xs",children:"\u099b\u09cb\u099f \u09ac\u09df\u09be\u09a8"})]}),(0,Me.jsxs)(Xe,{"data-aos":"zoom-in",to:"/answer_category",className:"ml-4 mt-40 border border-white/40 bg-white/30 backdrop-blur-xl text-white p-5 w-20 h-20 rounded-lg flex flex-col justify-center items-center hover:bg-white/60 hover:text-white",children:[(0,Me.jsx)("img",{className:"w-12",src:lu,alt:""}),(0,Me.jsx)("h2",{className:"text-xs",children:"\u09aa\u09cd\u09b0\u09b6\u09cd\u09a8-\u0989\u09a4\u09cd\u09a4\u09b0"})]}),(0,Me.jsxs)(Xe,{"data-aos":"fade-left",to:"/mobile_kobita",className:"ml-4 border border-white/40 bg-white/30 backdrop-blur-xl text-white p-5 w-20 h-20 rounded-lg flex flex-col justify-center items-center hover:bg-white/60 hover:text-white",children:[(0,Me.jsx)("img",{className:"w-12 ",src:du,alt:""}),(0,Me.jsx)("h2",{className:"text-sm",children:"\u0995\u09ac\u09bf\u09a4\u09be"})]}),(0,Me.jsxs)(Xe,{"data-aos":"fade-right",to:"/mobile_live",className:"ml-4 border border-white/40 bg-white/30 backdrop-blur-xl text-white p-5 w-20 h-20 rounded-lg flex flex-col justify-center items-center hover:bg-white/60 hover:text-white",children:[(0,Me.jsx)("img",{className:"w-12 mr-5",src:cu,alt:""}),(0,Me.jsx)("h2",{className:"text-sm",children:"\u09b2\u09be\u0987\u09ad"})]}),(0,Me.jsxs)(Xe,{"data-aos":"zoom-in",to:"/mobile_quran",className:"ml-4 border border-white/40 bg-white/30 backdrop-blur-xl text-white p-5 w-20 h-20 rounded-lg flex flex-col justify-center items-center hover:bg-white/60 hover:text-white",children:[(0,Me.jsx)("img",{className:"w-12 ",src:hu,alt:""}),(0,Me.jsx)("h2",{className:"text-sm",children:"\u0995\u09c1\u09b0\u0986\u09a8"})]}),(0,Me.jsxs)(Xe,{"data-aos":"fade-left",to:"/prayer_times",className:"ml-4 border border-white/40 bg-white/30 backdrop-blur-xl text-white p-5 w-20 h-20 rounded-lg flex flex-col justify-center items-center hover:bg-white/60 hover:text-white",children:[(0,Me.jsx)("img",{className:"w-12 ",src:fu,alt:""}),(0,Me.jsx)("h2",{className:"text-xs",children:"\u09a8\u09be\u09ae\u09be\u099c\u09c7\u09b0 \u09b8\u09ae\u09df\u09b8\u09c2\u099a\u09c0"})]}),(0,Me.jsxs)(Xe,{"data-aos":"fade-right",to:"/books",className:"ml-4 border border-white/40 bg-white/30 backdrop-blur-xl text-white p-5 w-20 h-20 rounded-lg flex flex-col justify-center items-center hover:bg-white/60 hover:text-white",children:[(0,Me.jsx)("img",{className:"w-12",src:pu,alt:""}),(0,Me.jsx)("h2",{className:"text-sm",children:"\u0995\u09bf\u09a4\u09be\u09ac\u09be\u09a6\u09c0"})]}),(0,Me.jsxs)(Xe,{"data-aos":"zoom-in",to:"/app_details",className:"ml-4 border border-white/40 bg-white/30 backdrop-blur-xl text-white p-5 w-20 h-20 rounded-lg flex flex-col justify-center items-center hover:bg-white/60 hover:text-white",children:[(0,Me.jsx)("img",{className:"w-8",src:vu,alt:""}),(0,Me.jsx)("h2",{className:"text-xs",children:"\u09a4\u09a5\u09cd\u09af \u0993 \u0985\u09ad\u09bf\u09af\u09cb\u0997"})]})]})})})};function Ld(e){return wt({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M216 260c0 15.464-12.536 28-28 28s-28-12.536-28-28c0-44.112 35.888-80 80-80s80 35.888 80 80c0 15.464-12.536 28-28 28s-28-12.536-28-28c0-13.234-10.767-24-24-24s-24 10.766-24 24zm24-176c-97.047 0-176 78.953-176 176 0 15.464 12.536 28 28 28s28-12.536 28-28c0-66.168 53.832-120 120-120s120 53.832 120 120c0 75.164-71.009 70.311-71.997 143.622L288 404c0 28.673-23.327 52-52 52-15.464 0-28 12.536-28 28s12.536 28 28 28c59.475 0 107.876-48.328 108-107.774.595-34.428 72-48.24 72-144.226 0-97.047-78.953-176-176-176zm-80 236c-17.673 0-32 14.327-32 32s14.327 32 32 32 32-14.327 32-32-14.327-32-32-32zM32 448c-17.673 0-32 14.327-32 32s14.327 32 32 32 32-14.327 32-32-14.327-32-32-32zm480-187.993c0-1.518-.012-3.025-.045-4.531C510.076 140.525 436.157 38.47 327.994 1.511c-14.633-4.998-30.549 2.809-35.55 17.442-5 14.633 2.81 30.549 17.442 35.55 85.906 29.354 144.61 110.513 146.077 201.953l.003.188c.026 1.118.033 2.236.033 3.363 0 15.464 12.536 28 28 28s28.001-12.536 28.001-28zM152.971 439.029l-80-80L39.03 392.97l80 80 33.941-33.941z"}}]})(e)}var Md=__webpack_require__(426),jd=__webpack_require__.n(Md),Fd=function(e){var t=e.setAudioData,n=Cu((function(e){return e.boyan.allboyan[0]})),r=Cu((function(e){return e.boyan.filter})),i=Cu((function(e){return e.boyan.subject})),s=Cu((function(e){return e.boyan.month})),o=n.map((function(e){return $($({},e),{},{date:e.date.slice(-2)+" "+jd()(jd()(e.date).format("YYYY/MM/DD")).format("MMMM")+" "+e.date.slice(0,4)})}));console.log(o);var c="all"===r?o:"subject"===r?o.filter((function(e){return e.subject===i})):"month"===r?o.filter((function(e){return e.date.includes(s)})):o.filter((function(e){return e.category===r})),l=u((0,a.useState)([]),2),d=l[0],h=l[1],f=u((0,a.useState)(!1),2),p=f[0],v=f[1],m=u((0,a.useState)(0),2),g=m[0],y=m[1],b=u((0,a.useState)(0),2),k=b[0],x=b[1],w=u((0,a.useState)(20),2),T=w[0],E=w[1];(0,a.useEffect)((function(){y(Math.ceil(c.length/20))}),[c.length]);var _=function(e){t(e);var n=e.view?e.view:0,r={view:parseInt(n)+1};fetch("http://128.140.52.151:5000/getboyans/".concat(null===e||void 0===e?void 0:e._id),{method:"PATCH",headers:{"content-type":"application/json"},body:JSON.stringify(r)}).then((function(e){return e.json()})).then((function(e){console.log(e)}))},S=function(e){var t=e.download?e.download:0,n={download:parseInt(t)+1};fetch("http://128.140.52.151:5000/getboyans/".concat(null===e||void 0===e?void 0:e._id),{method:"PATCH",headers:{"content-type":"application/json"},body:JSON.stringify(n)}).then((function(e){return e.json()})).then((function(e){console.log(e)}))},A=0,C=20;return(0,Me.jsxs)("div",{"data-aos":"fade-right",className:"w-10/12 lg:w-11/12 mx-auto mt-16 relative bg-gray-100 text-black",children:[(0,Me.jsxs)("h1",{className:"text-xl border-b-4 border-accent font-bold mt-8 inline-block",children:["\u09ae\u09c1\u09ab\u09a4\u09bf \u09b6\u09ab\u09bf \u09b8\u09be\u09b9\u09c7\u09ac (\u09a6\u09be\u0983 \u09ac\u09be\u0983) \u098f\u09b0 ","\u099c\u09c1\u09ae'\u0986\u09b0 \u09ac\u09df\u09be\u09a8"===r?"\u099c\u09c1\u09ae'\u0986\u09b0 \u09b8\u0995\u09b2 \u09ac\u09df\u09be\u09a8":"all"===r?"\u09b8\u0995\u09b2 \u09ac\u09df\u09be\u09a8 \u09b8\u09ae\u09c2\u09b9":"\u099c\u09c1\u09ae'\u0986\u09b0 \u09aa\u09b0\u09c7\u09b0 \u09ac\u09df\u09be\u09a8"===r?"\u099c\u09c1\u09ae'\u0986\u09b0 \u09aa\u09b0\u09c7\u09b0 \u09ac\u09df\u09be\u09a8":"\u09b8\u09be\u09aa\u09cd\u09a4\u09be\u09b9\u09bf\u0995 \u09a4\u09b0\u09ac\u09bf\u09df\u09a4\u09bf \u09ae\u099c\u09b2\u09bf\u09b6"===r?"\u09b8\u09be\u09aa\u09cd\u09a4\u09be\u09b9\u09bf\u0995 \u09a4\u09b0\u09ac\u09bf\u09df\u09a4\u09bf \u09ae\u099c\u09b2\u09bf\u09b6\u09c7\u09b0 \u09ac\u09df\u09be\u09a8":"\u09ae\u09be\u09b8\u09bf\u0995 \u0987\u099c\u09a4\u09c7\u09ae\u09be\u09b0 \u09ac\u09df\u09be\u09a8"===r?"\u09ae\u09be\u09b8\u09bf\u0995 \u0987\u099c\u09a4\u09c7\u09ae\u09be\u09b0 \u09ac\u09df\u09be\u09a8":"\u09ae\u09be\u09b9\u09ab\u09bf\u09b2\u09c7\u09b0 \u09ac\u09df\u09be\u09a8"===r?"\u09ac\u09bf\u09ad\u09bf\u09a8\u09cd\u09a8 \u09ae\u09be\u09b9\u09ab\u09bf\u09b2\u09c7\u09b0 \u09ac\u09df\u09be\u09a8":i+" \u09ac\u09bf\u09b7\u09df\u09c7 \u09ac\u09df\u09be\u09a8"]}),(0,Me.jsx)("br",{}),(0,Me.jsx)("div",{className:"flex justify-center items-center my-4",children:(0,Me.jsxs)("div",{class:"form-control w-80",children:[(0,Me.jsx)("label",{class:"label",children:(0,Me.jsx)("span",{class:"label-text font-bold",children:"\u09ac\u09df\u09be\u09a8\u09c7\u09b0 \u09ac\u09bf\u09b7\u09df \u09b2\u09bf\u0996\u09c7 \u0985\u09a8\u09c1\u09b8\u09a8\u09cd\u09a7\u09be\u09a8 \u0995\u09b0\u09c1\u09a8"})}),(0,Me.jsx)("input",{onMouseDown:function(){x(A),E(C)},onChange:function(e){var t=e.target.value,n=c.filter((function(e){return e.name.includes(t)}));h(n),v(!0)},type:"text",placeholder:"\u09ac\u09df\u09be\u09a8\u09c7\u09b0 \u09ac\u09bf\u09b7\u09df \u09b2\u09bf\u0996\u09c1\u09a8",class:"input input-bordered bg-white input-accent w-full max-w-xs"})]})}),(0,Me.jsx)("hr",{}),(0,Me.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-5",children:p?d.slice(k,T).map((function(e){return(0,Me.jsxs)("div",{style:{height:"370px"},className:"shadow-xl bg-white hover:shadow-accent active:shadow-red-400 p-5 rounded-r-3xl rounded-tl-3xl text-left relative",children:[(0,Me.jsxs)("h3",{className:"text-lg font-bold min-h-8",children:["\u09ac\u09df\u09be\u09a8\u09c7\u09b0 \u09ac\u09bf\u09b7\u09df\u0983 ",e.name]}),(0,Me.jsxs)("h3",{className:"text-base",children:[(0,Me.jsx)("span",{className:"font-bold",children:"\u09b8\u09cd\u09a5\u09be\u09a8\u0983 "}),e.place]}),(0,Me.jsxs)("h3",{className:"text-base",children:[(0,Me.jsx)("span",{className:"font-bold",children:"\u09a4\u09be\u09b0\u09bf\u0996\u0983"})," ",e.date,"  ",(0,Me.jsx)("span",{className:"font-bold",children:"  \u09ac\u09bf\u09ad\u09be\u0997\u0983"})," ",e.category]}),(0,Me.jsx)("p",{className:"my-4",children:e.description}),(0,Me.jsxs)("div",{className:"flex flex-row",children:[(0,Me.jsx)(Ld,{className:"text-xs"}),(0,Me.jsx)("p",{className:"ml-px text-xs",children:null===e||void 0===e?void 0:e.view}),(0,Me.jsx)(Ct,{className:"text-xs ml-2"}),(0,Me.jsx)("p",{className:"ml-px text-xs",children:null===e||void 0===e?void 0:e.download})]}),(0,Me.jsxs)("div",{className:"mt-4 text-center absolute bottom-6 rounded-2xl left-12 shadow-2xl p-2",children:[(0,Me.jsx)("label",{onClick:function(){return _(e)},for:"my-modal-6",class:"btn btn-accent btn-circle text-white font-bold mr-12",children:"\u09b6\u09c1\u09a8\u09c1\u09a8"}),(0,Me.jsx)("label",{onClick:function(){return S(e)},for:"my-modal-6",class:"btn btn-accent text-white font-bold mr-2",children:(0,Me.jsx)("a",{href:e.link,children:"\u09a1\u09be\u0989\u09a8\u09b2\u09cb\u09a1"})})]})]})})):c.slice(k,T).map((function(e){return(0,Me.jsxs)("div",{style:{height:"370px"},className:"shadow-xl bg-white hover:shadow-accent active:shadow-red-400 p-5 rounded-r-3xl rounded-tl-3xl text-left relative",children:[(0,Me.jsxs)("h3",{className:"text-lg font-bold min-h-8",children:["\u09ac\u09df\u09be\u09a8\u09c7\u09b0 \u09ac\u09bf\u09b7\u09df\u0983 ",e.name]}),(0,Me.jsxs)("h3",{className:"text-base",children:[(0,Me.jsx)("span",{className:"font-bold",children:"\u09b8\u09cd\u09a5\u09be\u09a8\u0983 "}),e.place]}),(0,Me.jsxs)("h3",{className:"text-base",children:[(0,Me.jsx)("span",{className:"font-bold",children:"\u09a4\u09be\u09b0\u09bf\u0996\u0983"})," ",e.date,"  ",(0,Me.jsx)("span",{className:"font-bold",children:"  \u09ac\u09bf\u09ad\u09be\u0997\u0983"})," ",e.category]}),(0,Me.jsx)("p",{className:"my-4",children:e.description}),(0,Me.jsxs)("div",{className:"flex flex-row",children:[(0,Me.jsx)(Ld,{className:"text-xs"}),(0,Me.jsx)("p",{className:"ml-px text-xs",children:null===e||void 0===e?void 0:e.view}),(0,Me.jsx)(Ct,{className:"text-xs ml-2"}),(0,Me.jsx)("p",{className:"ml-px text-xs",children:null===e||void 0===e?void 0:e.download})]}),(0,Me.jsxs)("div",{className:"mt-4 text-center absolute bottom-6 rounded-2xl left-12 shadow-2xl p-2",children:[(0,Me.jsx)("label",{onClick:function(){return _(e)},for:"my-modal-6",class:"btn btn-accent btn-circle text-white font-bold mr-12",children:"\u09b6\u09c1\u09a8\u09c1\u09a8"}),(0,Me.jsx)("label",{onClick:function(){return S(e)},for:"my-modal-6",class:"btn btn-accent text-white font-bold mr-2",children:(0,Me.jsx)("a",{href:e.link,children:"\u09a1\u09be\u0989\u09a8\u09b2\u09cb\u09a1"})})]})]})}))}),(0,Me.jsx)("div",{className:"mt-8 mb-20",children:c.length>20&&(0,Me.jsx)(Be(),{previousLabel:"\u09aa\u09c2\u09b0\u09cd\u09ac\u09ac\u09b0\u09cd\u09a4\u09c0",nextLabel:"\u09aa\u09b0\u09ac\u09b0\u09cd\u09a4\u09c0",breakLabel:"...",pageCount:g,marginPagesDisplayed:3,pageRangeDisplayed:6,onPageChange:function(e){A=e.selected+1<3?A*e.selected+20:A*e.selected+20+20,e.selected+1<=1&&(A=0,C=20),C=C*e.selected+20,x(A),E(C),window.scrollTo(0,0)},containerClassName:"btn-group justify-center",pageClassName:"btn btn-accent text-white",activeClassName:"btn bg-white text-black",previousClassName:"btn btn-accent text-white",nextClassName:"btn btn-accent text-white",breakClassName:"btn btn-accent text-white"})})]})},Ud=function(e){var t=e.setAudioData,n=u((0,a.useState)([]),2),r=n[0],i=n[1],s=u((0,a.useState)(!1),2),o=s[0],c=s[1],l=u((0,a.useState)(0),2),d=l[0],h=l[1],f=u((0,a.useState)(0),2),p=f[0],v=f[1],m=u((0,a.useState)(30),2),g=m[0],y=m[1],b=Cu((function(e){return e.boyan.allanswer[0]})),k=Cu((function(e){return e.boyan.answer_category})),x="all"===k?b:b.filter((function(e){return e.category===k}));(0,a.useEffect)((function(){h(Math.ceil(x.length/30))}),[x.length]);var w=function(e){t(e);var n=e.view?e.view:0,r={view:parseInt(n)+1};fetch("http://128.140.52.151:5000/getanswer/".concat(null===e||void 0===e?void 0:e._id),{method:"PATCH",headers:{"content-type":"application/json"},body:JSON.stringify(r)}).then((function(e){return e.json()})).then((function(e){console.log(e)}))},T=function(e){var t=e.download?e.download:0,n={download:parseInt(t)+1};fetch("http://128.140.52.151:5000/getanswer/".concat(null===e||void 0===e?void 0:e._id),{method:"PATCH",headers:{"content-type":"application/json"},body:JSON.stringify(n)}).then((function(e){return e.json()})).then((function(e){console.log(e)}))},E=0,_=30;return(0,Me.jsxs)("div",{className:"w-10/12 lg:w-11/12 mx-auto mt-16 relative",children:[(0,Me.jsxs)("h1",{className:"text-xl border-b-4 border-accent font-bold mt-8 inline-block",children:["\u09ae\u09c1\u09ab\u09a4\u09bf \u09b6\u09ab\u09bf \u09b8\u09be\u09b9\u09c7\u09ac (\u09a6\u09be\u0983 \u09ac\u09be\u0983) \u098f\u09b0 ","all"===k?"\u09b8\u0995\u09b2 \u09aa\u09cd\u09b0\u09b6\u09cd\u09a8-\u0989\u09a4\u09cd\u09a4\u09b0":k+" \u09ac\u09bf\u09b7\u09df\u09c7 \u09aa\u09cd\u09b0\u09b6\u09cd\u09a8-\u0989\u09a4\u09cd\u09a4\u09b0"]}),(0,Me.jsx)("br",{}),(0,Me.jsx)("div",{className:"flex justify-center items-center my-4",children:(0,Me.jsxs)("div",{class:"form-control w-80",children:[(0,Me.jsx)("label",{class:"label",children:(0,Me.jsx)("span",{class:"label-text font-bold",children:"\u09aa\u09cd\u09b0\u09b6\u09cd\u09a8\u09c7\u09b0 \u09ac\u09bf\u09b7\u09df \u09b2\u09bf\u0996\u09c7 \u0985\u09a8\u09c1\u09b8\u09a8\u09cd\u09a7\u09be\u09a8 \u0995\u09b0\u09c1\u09a8"})}),(0,Me.jsx)("input",{onMouseDown:function(){v(E),y(_)},onChange:function(e){var t=e.target.value,n=x.filter((function(e){return e.question.includes(t)}));i(n),c(!0)},type:"text",placeholder:"\u09aa\u09cd\u09b0\u09b6\u09cd\u09a8\u09c7\u09b0 \u09ac\u09bf\u09b7\u09df \u09b2\u09bf\u0996\u09c1\u09a8",class:"input input-bordered input-accent w-full max-w-xs"})]})}),(0,Me.jsx)("hr",{}),(0,Me.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-5",children:o?r.slice(p,g).map((function(e){return(0,Me.jsxs)("div",{style:{height:"250px"},className:"shadow-xl bg-white hover:shadow-accent active:shadow-red-400 p-5 rounded-r-3xl rounded-tl-3xl text-left relative",children:[(0,Me.jsxs)("h3",{className:"text-lg font-bold min-h-8",children:["\u09aa\u09cd\u09b0\u09b6\u09cd\u09a8\u0983 ",e.question]}),(0,Me.jsxs)("h3",{className:"text-base",children:[(0,Me.jsx)("span",{className:"font-bold",children:"\u0989\u09a4\u09cd\u09a4\u09b0 \u09a8\u0982\u0983"})," ",e.answer_no,"  ",(0,Me.jsx)("span",{className:"font-bold",children:"  \u09ac\u09bf\u09ad\u09be\u0997\u0983"})," ",e.category]}),(0,Me.jsxs)("div",{className:"flex flex-row",children:[(0,Me.jsx)(Ld,{className:"text-xs"}),(0,Me.jsx)("p",{className:"ml-px text-xs",children:null===e||void 0===e?void 0:e.view}),(0,Me.jsx)(Ct,{className:"text-xs ml-2"}),(0,Me.jsx)("p",{className:"ml-px text-xs",children:null===e||void 0===e?void 0:e.download})]}),(0,Me.jsxs)("div",{className:"mt-4 text-center absolute bottom-6 rounded-2xl left-12 shadow-2xl p-2",children:[(0,Me.jsx)("label",{onClick:function(){return w(e)},for:"my-modal-6",class:"btn btn-accent btn-circle text-white font-bold mr-12",children:"\u09b6\u09c1\u09a8\u09c1\u09a8"}),(0,Me.jsx)("label",{onClick:function(){return T(e)},for:"my-modal-6",class:"btn btn-accent text-white font-bold mr-2",children:(0,Me.jsx)("a",{href:e.link,children:"\u09a1\u09be\u0989\u09a8\u09b2\u09cb\u09a1"})})]})]})})):x.slice(p,g).map((function(e){return(0,Me.jsxs)("div",{style:{height:"250px"},className:"shadow-xl bg-white hover:shadow-accent active:shadow-red-400 p-5 rounded-r-3xl rounded-tl-3xl text-left relative",children:[(0,Me.jsxs)("h3",{className:"text-lg font-bold min-h-8",children:["\u09aa\u09cd\u09b0\u09b6\u09cd\u09a8\u0983 ",e.question]}),(0,Me.jsxs)("h3",{className:"text-base",children:[(0,Me.jsx)("span",{className:"font-bold",children:"\u0989\u09a4\u09cd\u09a4\u09b0 \u09a8\u0982\u0983"})," ",e.answer_no,"  ",(0,Me.jsx)("span",{className:"font-bold",children:"  \u09ac\u09bf\u09ad\u09be\u0997\u0983"})," ",e.category]}),(0,Me.jsxs)("div",{className:"flex flex-row",children:[(0,Me.jsx)(Ld,{className:"text-xs"}),(0,Me.jsx)("p",{className:"ml-px text-xs",children:null===e||void 0===e?void 0:e.view}),(0,Me.jsx)(Ct,{className:"text-xs ml-2"}),(0,Me.jsx)("p",{className:"ml-px text-xs",children:null===e||void 0===e?void 0:e.download})]}),(0,Me.jsxs)("div",{className:"mt-4 text-center absolute bottom-6 rounded-2xl left-12 shadow-2xl p-2",children:[(0,Me.jsx)("label",{onClick:function(){return w(e)},for:"my-modal-6",class:"btn btn-accent btn-circle text-white font-bold mr-12",children:"\u09b6\u09c1\u09a8\u09c1\u09a8"}),(0,Me.jsx)("label",{onClick:function(){return T(e)},for:"my-modal-6",class:"btn btn-accent text-white font-bold mr-2",children:(0,Me.jsx)("a",{href:e.link,children:"\u09a1\u09be\u0989\u09a8\u09b2\u09cb\u09a1"})})]})]})}))}),(0,Me.jsx)("div",{className:"mt-8 mb-20",children:x.length>8&&(0,Me.jsx)(Be(),{previousLabel:"\u09aa\u09c2\u09b0\u09cd\u09ac\u09ac\u09b0\u09cd\u09a4\u09c0",nextLabel:"\u09aa\u09b0\u09ac\u09b0\u09cd\u09a4\u09c0",breakLabel:"...",pageCount:d,marginPagesDisplayed:3,pageRangeDisplayed:6,onPageChange:function(e){E=e.selected+1<3?E*e.selected+30:E*e.selected+30+30,e.selected+1<=1&&(E=0,_=30),_=_*e.selected+30,v(E),y(_),window.scrollTo(0,0)},containerClassName:"btn-group justify-center",pageClassName:"btn btn-accent text-white",activeClassName:"btn bg-white text-black",previousClassName:"btn btn-accent text-white",nextClassName:"btn btn-accent text-white",breakClassName:"btn btn-accent text-white"})})]})},Bd=function(e){var t=e.setAudioData,n=u((0,a.useState)([]),2),r=n[0],i=n[1],s=u((0,a.useState)(!0),2),o=s[0],c=s[1],l=u((0,a.useState)([]),2),d=l[0],h=l[1],f=u((0,a.useState)(!1),2),p=f[0],v=f[1],m=u((0,a.useState)(0),2),g=m[0],y=m[1],b=u((0,a.useState)(0),2),k=b[0],x=b[1],w=u((0,a.useState)(20),2),T=w[0],E=w[1];if((0,a.useEffect)((function(){fetch("http://128.140.52.151:5000/getkobita").then((function(e){return e.json()})).then((function(e){y(Math.ceil(e.length/20))}))}),[]),(0,a.useEffect)((function(){fetch("http://128.140.52.151:5000/getkobita").then((function(e){return e.json()})).then((function(e){i(e),c(!1)}))}),[]),o)return(0,Me.jsx)(je,{});var _=function(e){t(e);var n=e.view?e.view:0,r={view:parseInt(n)+1};fetch("http://128.140.52.151:5000/getkobita/".concat(null===e||void 0===e?void 0:e._id),{method:"PATCH",headers:{"content-type":"application/json"},body:JSON.stringify(r)}).then((function(e){return e.json()})).then((function(e){console.log(e)}))},S=function(e){var t=e.download?e.download:0,n={download:parseInt(t)+1};fetch("http://128.140.52.151:5000/getkobita/".concat(null===e||void 0===e?void 0:e._id),{method:"PATCH",headers:{"content-type":"application/json"},body:JSON.stringify(n)}).then((function(e){return e.json()})).then((function(e){console.log(e)}))},A=0,C=20;return(0,Me.jsxs)("div",{className:"w-10/12 lg:w-11/12 mx-auto mt-16 relative",children:[(0,Me.jsx)("h1",{className:"text-xl border-b-4 border-accent font-bold mt-8 inline-block",children:"\u09ae\u09c1\u09ab\u09a4\u09bf \u09b6\u09ab\u09bf \u09b8\u09be\u09b9\u09c7\u09ac (\u09a6\u09be\u0983 \u09ac\u09be\u0983)\u098f\u09b0 \u09b2\u09bf\u0996\u09bf\u09a4 \u0995\u09ac\u09bf\u09a4\u09be \u09b8\u09ae\u09c2\u09b9"}),(0,Me.jsx)("br",{}),(0,Me.jsx)("div",{className:"flex justify-center items-center my-4",children:(0,Me.jsxs)("div",{class:"form-control w-80",children:[(0,Me.jsx)("label",{class:"label",children:(0,Me.jsx)("span",{class:"label-text font-bold",children:"\u0995\u09ac\u09bf\u09a4\u09be\u09b0 \u09a8\u09be\u09ae \u09b2\u09bf\u0996\u09c7 \u0985\u09a8\u09c1\u09b8\u09a8\u09cd\u09a7\u09be\u09a8 \u0995\u09b0\u09c1\u09a8"})}),(0,Me.jsx)("input",{onMouseDown:function(){x(A),E(C)},onChange:function(e){var t=e.target.value,n=r.filter((function(e){return e.name.includes(t)}));h(n),v(!0)},type:"text",placeholder:"\u0995\u09ac\u09bf\u09a4\u09be\u09b0 \u09a8\u09be\u09ae \u09b2\u09bf\u0996\u09c1\u09a8",class:"input input-bordered input-accent w-full max-w-xs"})]})}),(0,Me.jsx)("hr",{}),(0,Me.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-5",children:p?d.slice(k,T).map((function(e){return(0,Me.jsxs)("div",{style:{height:"250px"},className:"shadow-xl bg-white hover:shadow-accent active:shadow-red-400 p-5 rounded-r-3xl rounded-tl-3xl text-left relative",children:[(0,Me.jsxs)("h3",{className:"text-lg font-bold min-h-8",children:["\u09a8\u09be\u09ae\u0983 ",null===e||void 0===e?void 0:e.name]}),(0,Me.jsxs)("h3",{className:"text-base",children:[(0,Me.jsx)("span",{className:"font-bold",children:"\u09b2\u09c7\u0996\u0995"})," ",e.writer,"  ",(0,Me.jsx)("span",{className:"font-bold",children:"  \u0995\u09a3\u09cd\u09a0\u0983"})," ",e.singer]}),(0,Me.jsxs)("h3",{className:" font-bold min-h-8",children:["\u09b8\u09ae\u09df\u0983 ",null===e||void 0===e?void 0:e.date_time]}),(0,Me.jsxs)("div",{className:"flex flex-row",children:[(0,Me.jsx)(Ld,{className:"text-xs"}),(0,Me.jsx)("p",{className:"ml-px text-xs",children:null===e||void 0===e?void 0:e.view}),(0,Me.jsx)(Ct,{className:"text-xs ml-2"}),(0,Me.jsx)("p",{className:"ml-px text-xs",children:null===e||void 0===e?void 0:e.download})]}),(0,Me.jsxs)("div",{className:"mt-4 text-center absolute bottom-4 rounded-2xl left-12 shadow-2xl p-2",children:[(0,Me.jsx)("label",{onClick:function(){return _(e)},for:"my-modal-6",class:"btn btn-accent btn-circle text-white font-bold mr-12",children:"\u09b6\u09c1\u09a8\u09c1\u09a8"}),(0,Me.jsx)("label",{onClick:function(){return S(e)},for:"my-modal-6",class:"btn btn-accent text-white font-bold mr-2",children:(0,Me.jsx)("a",{href:e.link,children:"\u09a1\u09be\u0989\u09a8\u09b2\u09cb\u09a1"})})]})]})})):r.slice(k,T).map((function(e){return(0,Me.jsxs)("div",{style:{height:"250px"},className:"shadow-xl bg-white hover:shadow-accent active:shadow-red-400 p-5 rounded-r-3xl rounded-tl-3xl text-left relative",children:[(0,Me.jsxs)("h3",{className:"text-lg font-bold min-h-8",children:["\u09a8\u09be\u09ae\u0983 ",null===e||void 0===e?void 0:e.name]}),(0,Me.jsxs)("h3",{className:"text-base",children:[(0,Me.jsx)("span",{className:"font-bold",children:"\u09b2\u09c7\u0996\u0995"})," ",e.writer,"  ",(0,Me.jsx)("span",{className:"font-bold",children:"  \u0995\u09a3\u09cd\u09a0\u0983"})," ",e.singer]}),(0,Me.jsxs)("h3",{className:" font-bold min-h-8",children:["\u09b8\u09ae\u09df\u0983 ",null===e||void 0===e?void 0:e.date_time]}),(0,Me.jsxs)("div",{className:"flex flex-row",children:[(0,Me.jsx)(Ld,{className:"text-xs"}),(0,Me.jsx)("p",{className:"ml-px text-xs",children:null===e||void 0===e?void 0:e.view}),(0,Me.jsx)(Ct,{className:"text-xs ml-2"}),(0,Me.jsx)("p",{className:"ml-px text-xs",children:null===e||void 0===e?void 0:e.download})]}),(0,Me.jsxs)("div",{className:"mt-4 text-center absolute bottom-4 rounded-2xl left-12 shadow-2xl p-2",children:[(0,Me.jsx)("label",{onClick:function(){return _(e)},for:"my-modal-6",class:"btn btn-accent btn-circle text-white font-bold mr-12",children:"\u09b6\u09c1\u09a8\u09c1\u09a8"}),(0,Me.jsx)("label",{onClick:function(){return S(e)},for:"my-modal-6",class:"btn btn-accent text-white font-bold mr-2",children:(0,Me.jsx)("a",{href:e.link,children:"\u09a1\u09be\u0989\u09a8\u09b2\u09cb\u09a1"})})]})]})}))}),(0,Me.jsx)("div",{className:"mt-8 mb-20",children:r.length>20&&(0,Me.jsx)(Be(),{previousLabel:"\u09aa\u09c2\u09b0\u09cd\u09ac\u09ac\u09b0\u09cd\u09a4\u09c0",nextLabel:"\u09aa\u09b0\u09ac\u09b0\u09cd\u09a4\u09c0",breakLabel:"...",pageCount:g,marginPagesDisplayed:3,pageRangeDisplayed:6,onPageChange:function(e){A=e.selected+1<3?A*e.selected+20:A*e.selected+20+20,e.selected+1<=1&&(A=0,C=20),C=C*e.selected+20,x(A),E(C),window.scrollTo(0,0)},containerClassName:"btn-group justify-center",pageClassName:"btn btn-accent text-white",activeClassName:"btn bg-white text-black",previousClassName:"btn btn-accent text-white",nextClassName:"btn btn-accent text-white",breakClassName:"btn btn-accent text-white"})})]})};__webpack_require__(843);var Gd=__webpack_require__.p+"static/media/bg5.4966f596b9551c627b91.jpg";function Vd(e){var t,n=new Set,r=function(e,r){var i="function"===typeof e?e(t):e;if(i!==t){var a=t;t=r?i:Object.assign({},t,i),n.forEach((function(e){return e(t,a)}))}},i=function(){return t},a={setState:r,getState:i,subscribe:function(e,r,a){return r||a?function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Object.is;console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");var s=r(t);function o(){var n=r(t);if(!a(s,n)){var i=s;e(s=n,i)}}return n.add(o),function(){return n.delete(o)}}(e,r,a):(n.add(e),function(){return n.delete(e)})},destroy:function(){return n.clear()}};return t=e(r,i,a),a}var Hd="undefined"===typeof window||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent)?a.useEffect:a.useLayoutEffect;function zd(e){var t="function"===typeof e?Vd(e):e,n=function(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t.getState,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Object.is,i=(0,a.useReducer)((function(e){return e+1}),0),s=u(i,2),o=s[1],c=t.getState(),l=(0,a.useRef)(c),d=(0,a.useRef)(n),h=(0,a.useRef)(r),f=(0,a.useRef)(!1),p=(0,a.useRef)();void 0===p.current&&(p.current=n(c));var v=!1;(l.current!==c||d.current!==n||h.current!==r||f.current)&&(e=n(c),v=!r(p.current,e)),Hd((function(){v&&(p.current=e),l.current=c,d.current=n,h.current=r,f.current=!1}));var m=(0,a.useRef)(c);Hd((function(){var e=function(){try{var e=t.getState(),n=d.current(e);h.current(p.current,n)||(l.current=e,p.current=n,o())}catch(r){f.current=!0,o()}},n=t.subscribe(e);return t.getState()!==m.current&&e(),n}),[]);var g=v?e:p.current;return(0,a.useDebugValue)(g),g};return Object.assign(n,t),n[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");var e=[n,t];return{next:function(){var t=e.length<=0;return{value:e.shift(),done:t}}}},n}var Wd=function(e,t){if(Object.is(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(var r=0;r<n.length;r++)if(!Object.prototype.hasOwnProperty.call(t,n[r])||!Object.is(e[n[r]],t[n[r]]))return!1;return!0};var Kd=function(e){var t,n=new Set,r=function(e,r){var i="function"===typeof e?e(t):e;if(i!==t){var a=t;t=r?i:Object.assign({},t,i),n.forEach((function(e){return e(t,a)}))}},i=function(){return t},a={setState:r,getState:i,subscribe:function(e,r,a){return r||a?function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Object.is,s=r(t);function o(){var n=r(t);if(!a(s,n)){var i=s;e(s=n,i)}}return n.add(o),function(){return n.delete(o)}}(e,r,a):(n.add(e),function(){return n.delete(e)})},destroy:function(){return n.clear()}};return t=e(r,i,a),a},qd=!0,Yd=!0;function Jd(e,t,n){var r=e.match(t);return r&&r.length>=n&&parseInt(r[n],10)}function Qd(e,t,n){if(e.RTCPeerConnection){var r=e.RTCPeerConnection.prototype,i=r.addEventListener;r.addEventListener=function(e,r){if(e!==t)return i.apply(this,arguments);var a=function(e){var t=n(e);t&&(r.handleEvent?r.handleEvent(t):r(t))};return this._eventMap=this._eventMap||{},this._eventMap[t]||(this._eventMap[t]=new Map),this._eventMap[t].set(r,a),i.apply(this,[e,a])};var a=r.removeEventListener;r.removeEventListener=function(e,n){if(e!==t||!this._eventMap||!this._eventMap[t])return a.apply(this,arguments);if(!this._eventMap[t].has(n))return a.apply(this,arguments);var r=this._eventMap[t].get(n);return this._eventMap[t].delete(n),0===this._eventMap[t].size&&delete this._eventMap[t],0===Object.keys(this._eventMap).length&&delete this._eventMap,a.apply(this,[e,r])},Object.defineProperty(r,"on"+t,{get:function(){return this["_on"+t]},set:function(e){this["_on"+t]&&(this.removeEventListener(t,this["_on"+t]),delete this["_on"+t]),e&&this.addEventListener(t,this["_on"+t]=e)},enumerable:!0,configurable:!0})}}function Xd(e){return"boolean"!==typeof e?new Error("Argument type: "+typeof e+". Please use a boolean."):(qd=e,e?"adapter.js logging disabled":"adapter.js logging enabled")}function Zd(e){return"boolean"!==typeof e?new Error("Argument type: "+typeof e+". Please use a boolean."):(Yd=!e,"adapter.js deprecation warnings "+(e?"disabled":"enabled"))}function $d(){if("object"===typeof window){if(qd)return;"undefined"!==typeof console&&"function"===typeof console.log&&console.log.apply(console,arguments)}}function eh(e,t){Yd&&console.warn(e+" is deprecated, please use "+t+" instead.")}function th(e){var t={browser:null,version:null};if("undefined"===typeof e||!e.navigator)return t.browser="Not a browser.",t;var n=e.navigator;if(n.mozGetUserMedia)t.browser="firefox",t.version=Jd(n.userAgent,/Firefox\/(\d+)\./,1);else if(n.webkitGetUserMedia||!1===e.isSecureContext&&e.webkitRTCPeerConnection)t.browser="chrome",t.version=Jd(n.userAgent,/Chrom(e|ium)\/(\d+)\./,2);else{if(!e.RTCPeerConnection||!n.userAgent.match(/AppleWebKit\/(\d+)\./))return t.browser="Not a supported browser.",t;t.browser="safari",t.version=Jd(n.userAgent,/AppleWebKit\/(\d+)\./,1),t.supportsUnifiedPlan=e.RTCRtpTransceiver&&"currentDirection"in e.RTCRtpTransceiver.prototype}return t}function nh(e){return"[object Object]"===Object.prototype.toString.call(e)}function rh(e){return nh(e)?Object.keys(e).reduce((function(t,n){var r=nh(e[n]),i=r?rh(e[n]):e[n],a=r&&!Object.keys(i).length;return void 0===i||a?t:Object.assign(t,X({},n,i))}),{}):e}function ih(e,t,n){t&&!n.has(t.id)&&(n.set(t.id,t),Object.keys(t).forEach((function(r){r.endsWith("Id")?ih(e,e.get(t[r]),n):r.endsWith("Ids")&&t[r].forEach((function(t){ih(e,e.get(t),n)}))})))}function ah(e,t,n){var r=n?"outbound-rtp":"inbound-rtp",i=new Map;if(null===t)return i;var a=[];return e.forEach((function(e){"track"===e.type&&e.trackIdentifier===t.id&&a.push(e)})),a.forEach((function(t){e.forEach((function(n){n.type===r&&n.trackId===t.id&&ih(e,n,i)}))})),i}var sh=$d;function oh(e,t){var n=e&&e.navigator;if(n.mediaDevices){var r=function(e){if("object"!==typeof e||e.mandatory||e.optional)return e;var t={};return Object.keys(e).forEach((function(n){if("require"!==n&&"advanced"!==n&&"mediaSource"!==n){var r="object"===typeof e[n]?e[n]:{ideal:e[n]};void 0!==r.exact&&"number"===typeof r.exact&&(r.min=r.max=r.exact);var i=function(e,t){return e?e+t.charAt(0).toUpperCase()+t.slice(1):"deviceId"===t?"sourceId":t};if(void 0!==r.ideal){t.optional=t.optional||[];var a={};"number"===typeof r.ideal?(a[i("min",n)]=r.ideal,t.optional.push(a),(a={})[i("max",n)]=r.ideal,t.optional.push(a)):(a[i("",n)]=r.ideal,t.optional.push(a))}void 0!==r.exact&&"number"!==typeof r.exact?(t.mandatory=t.mandatory||{},t.mandatory[i("",n)]=r.exact):["min","max"].forEach((function(e){void 0!==r[e]&&(t.mandatory=t.mandatory||{},t.mandatory[i(e,n)]=r[e])}))}})),e.advanced&&(t.optional=(t.optional||[]).concat(e.advanced)),t},i=function(e,i){if(t.version>=61)return i(e);if((e=JSON.parse(JSON.stringify(e)))&&"object"===typeof e.audio){var a=function(e,t,n){t in e&&!(n in e)&&(e[n]=e[t],delete e[t])};a((e=JSON.parse(JSON.stringify(e))).audio,"autoGainControl","googAutoGainControl"),a(e.audio,"noiseSuppression","googNoiseSuppression"),e.audio=r(e.audio)}if(e&&"object"===typeof e.video){var s=e.video.facingMode;s=s&&("object"===typeof s?s:{ideal:s});var o,c=t.version<66;if(s&&("user"===s.exact||"environment"===s.exact||"user"===s.ideal||"environment"===s.ideal)&&(!n.mediaDevices.getSupportedConstraints||!n.mediaDevices.getSupportedConstraints().facingMode||c))if(delete e.video.facingMode,"environment"===s.exact||"environment"===s.ideal?o=["back","rear"]:"user"!==s.exact&&"user"!==s.ideal||(o=["front"]),o)return n.mediaDevices.enumerateDevices().then((function(t){t=t.filter((function(e){return"videoinput"===e.kind}));var n=t.find((function(e){return o.some((function(t){return e.label.toLowerCase().includes(t)}))}));return!n&&t.length&&o.includes("back")&&(n=t[t.length-1]),n&&(e.video.deviceId=s.exact?{exact:n.deviceId}:{ideal:n.deviceId}),e.video=r(e.video),sh("chrome: "+JSON.stringify(e)),i(e)}));e.video=r(e.video)}return sh("chrome: "+JSON.stringify(e)),i(e)},a=function(e){return t.version>=64?e:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[e.name]||e.name,message:e.message,constraint:e.constraint||e.constraintName,toString:function(){return this.name+(this.message&&": ")+this.message}}};if(n.getUserMedia=function(e,t,r){i(e,(function(e){n.webkitGetUserMedia(e,t,(function(e){r&&r(a(e))}))}))}.bind(n),n.mediaDevices.getUserMedia){var s=n.mediaDevices.getUserMedia.bind(n.mediaDevices);n.mediaDevices.getUserMedia=function(e){return i(e,(function(e){return s(e).then((function(t){if(e.audio&&!t.getAudioTracks().length||e.video&&!t.getVideoTracks().length)throw t.getTracks().forEach((function(e){e.stop()})),new DOMException("","NotFoundError");return t}),(function(e){return Promise.reject(a(e))}))}))}}}}function ch(e,t){e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||e.navigator.mediaDevices&&("function"===typeof t?e.navigator.mediaDevices.getDisplayMedia=function(n){return t(n).then((function(t){var r=n.video&&n.video.width,i=n.video&&n.video.height,a=n.video&&n.video.frameRate;return n.video={mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:t,maxFrameRate:a||3}},r&&(n.video.mandatory.maxWidth=r),i&&(n.video.mandatory.maxHeight=i),e.navigator.mediaDevices.getUserMedia(n)}))}:console.error("shimGetDisplayMedia: getSourceId argument is not a function"))}function uh(e){e.MediaStream=e.MediaStream||e.webkitMediaStream}function lh(e){if("object"===typeof e&&e.RTCPeerConnection&&!("ontrack"in e.RTCPeerConnection.prototype)){Object.defineProperty(e.RTCPeerConnection.prototype,"ontrack",{get:function(){return this._ontrack},set:function(e){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=e)},enumerable:!0,configurable:!0});var t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){var n=this;return this._ontrackpoly||(this._ontrackpoly=function(t){t.stream.addEventListener("addtrack",(function(r){var i;i=e.RTCPeerConnection.prototype.getReceivers?n.getReceivers().find((function(e){return e.track&&e.track.id===r.track.id})):{track:r.track};var a=new Event("track");a.track=r.track,a.receiver=i,a.transceiver={receiver:i},a.streams=[t.stream],n.dispatchEvent(a)})),t.stream.getTracks().forEach((function(r){var i;i=e.RTCPeerConnection.prototype.getReceivers?n.getReceivers().find((function(e){return e.track&&e.track.id===r.id})):{track:r};var a=new Event("track");a.track=r,a.receiver=i,a.transceiver={receiver:i},a.streams=[t.stream],n.dispatchEvent(a)}))},this.addEventListener("addstream",this._ontrackpoly)),t.apply(this,arguments)}}else Qd(e,"track",(function(e){return e.transceiver||Object.defineProperty(e,"transceiver",{value:{receiver:e.receiver}}),e}))}function dh(e){if("object"===typeof e&&e.RTCPeerConnection&&!("getSenders"in e.RTCPeerConnection.prototype)&&"createDTMFSender"in e.RTCPeerConnection.prototype){var t=function(e,t){return{track:t,get dtmf(){return void 0===this._dtmf&&("audio"===t.kind?this._dtmf=e.createDTMFSender(t):this._dtmf=null),this._dtmf},_pc:e}};if(!e.RTCPeerConnection.prototype.getSenders){e.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};var n=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(e,r){var i=n.apply(this,arguments);return i||(i=t(this,e),this._senders.push(i)),i};var r=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(e){r.apply(this,arguments);var t=this._senders.indexOf(e);-1!==t&&this._senders.splice(t,1)}}var i=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(e){var n=this;this._senders=this._senders||[],i.apply(this,[e]),e.getTracks().forEach((function(e){n._senders.push(t(n,e))}))};var a=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){var t=this;this._senders=this._senders||[],a.apply(this,[e]),e.getTracks().forEach((function(e){var n=t._senders.find((function(t){return t.track===e}));n&&t._senders.splice(t._senders.indexOf(n),1)}))}}else if("object"===typeof e&&e.RTCPeerConnection&&"getSenders"in e.RTCPeerConnection.prototype&&"createDTMFSender"in e.RTCPeerConnection.prototype&&e.RTCRtpSender&&!("dtmf"in e.RTCRtpSender.prototype)){var s=e.RTCPeerConnection.prototype.getSenders;e.RTCPeerConnection.prototype.getSenders=function(){var e=this,t=s.apply(this,[]);return t.forEach((function(t){return t._pc=e})),t},Object.defineProperty(e.RTCRtpSender.prototype,"dtmf",{get:function(){return void 0===this._dtmf&&("audio"===this.track.kind?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}}function hh(e){if(e.RTCPeerConnection){var t=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){var e=this,n=Array.prototype.slice.call(arguments),r=n[0],i=n[1],a=n[2];if(arguments.length>0&&"function"===typeof r)return t.apply(this,arguments);if(0===t.length&&(0===arguments.length||"function"!==typeof r))return t.apply(this,[]);var s=function(e){var t={};return e.result().forEach((function(e){var n={id:e.id,timestamp:e.timestamp,type:{localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[e.type]||e.type};e.names().forEach((function(t){n[t]=e.stat(t)})),t[n.id]=n})),t},o=function(e){return new Map(Object.keys(e).map((function(t){return[t,e[t]]})))};if(arguments.length>=2){var c=function(e){i(o(s(e)))};return t.apply(this,[c,r])}return new Promise((function(n,r){t.apply(e,[function(e){n(o(s(e)))},r])})).then(i,a)}}}function fh(e){if("object"===typeof e&&e.RTCPeerConnection&&e.RTCRtpSender&&e.RTCRtpReceiver){if(!("getStats"in e.RTCRtpSender.prototype)){var t=e.RTCPeerConnection.prototype.getSenders;t&&(e.RTCPeerConnection.prototype.getSenders=function(){var e=this,n=t.apply(this,[]);return n.forEach((function(t){return t._pc=e})),n});var n=e.RTCPeerConnection.prototype.addTrack;n&&(e.RTCPeerConnection.prototype.addTrack=function(){var e=n.apply(this,arguments);return e._pc=this,e}),e.RTCRtpSender.prototype.getStats=function(){var e=this;return this._pc.getStats().then((function(t){return ah(t,e.track,!0)}))}}if(!("getStats"in e.RTCRtpReceiver.prototype)){var r=e.RTCPeerConnection.prototype.getReceivers;r&&(e.RTCPeerConnection.prototype.getReceivers=function(){var e=this,t=r.apply(this,[]);return t.forEach((function(t){return t._pc=e})),t}),Qd(e,"track",(function(e){return e.receiver._pc=e.srcElement,e})),e.RTCRtpReceiver.prototype.getStats=function(){var e=this;return this._pc.getStats().then((function(t){return ah(t,e.track,!1)}))}}if("getStats"in e.RTCRtpSender.prototype&&"getStats"in e.RTCRtpReceiver.prototype){var i=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof e.MediaStreamTrack){var t,n,r,a=arguments[0];return this.getSenders().forEach((function(e){e.track===a&&(t?r=!0:t=e)})),this.getReceivers().forEach((function(e){return e.track===a&&(n?r=!0:n=e),e.track===a})),r||t&&n?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):t?t.getStats():n?n.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return i.apply(this,arguments)}}}}function ph(e){e.RTCPeerConnection.prototype.getLocalStreams=function(){var e=this;return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map((function(t){return e._shimmedLocalStreams[t][0]}))};var t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(e,n){if(!n)return t.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};var r=t.apply(this,arguments);return this._shimmedLocalStreams[n.id]?-1===this._shimmedLocalStreams[n.id].indexOf(r)&&this._shimmedLocalStreams[n.id].push(r):this._shimmedLocalStreams[n.id]=[n,r],r};var n=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(e){var t=this;this._shimmedLocalStreams=this._shimmedLocalStreams||{},e.getTracks().forEach((function(e){if(t.getSenders().find((function(t){return t.track===e})))throw new DOMException("Track already exists.","InvalidAccessError")}));var r=this.getSenders();n.apply(this,arguments);var i=this.getSenders().filter((function(e){return-1===r.indexOf(e)}));this._shimmedLocalStreams[e.id]=[e].concat(i)};var r=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[e.id],r.apply(this,arguments)};var i=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(e){var t=this;return this._shimmedLocalStreams=this._shimmedLocalStreams||{},e&&Object.keys(this._shimmedLocalStreams).forEach((function(n){var r=t._shimmedLocalStreams[n].indexOf(e);-1!==r&&t._shimmedLocalStreams[n].splice(r,1),1===t._shimmedLocalStreams[n].length&&delete t._shimmedLocalStreams[n]})),i.apply(this,arguments)}}function vh(e,t){if(e.RTCPeerConnection){if(e.RTCPeerConnection.prototype.addTrack&&t.version>=65)return ph(e);var n=e.RTCPeerConnection.prototype.getLocalStreams;e.RTCPeerConnection.prototype.getLocalStreams=function(){var e=this,t=n.apply(this);return this._reverseStreams=this._reverseStreams||{},t.map((function(t){return e._reverseStreams[t.id]}))};var r=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(t){var n=this;if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},t.getTracks().forEach((function(e){if(n.getSenders().find((function(t){return t.track===e})))throw new DOMException("Track already exists.","InvalidAccessError")})),!this._reverseStreams[t.id]){var i=new e.MediaStream(t.getTracks());this._streams[t.id]=i,this._reverseStreams[i.id]=t,t=i}r.apply(this,[t])};var i=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},i.apply(this,[this._streams[e.id]||e]),delete this._reverseStreams[this._streams[e.id]?this._streams[e.id].id:e.id],delete this._streams[e.id]},e.RTCPeerConnection.prototype.addTrack=function(t,n){var r=this;if("closed"===this.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");var i=[].slice.call(arguments,1);if(1!==i.length||!i[0].getTracks().find((function(e){return e===t})))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");var a=this.getSenders().find((function(e){return e.track===t}));if(a)throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};var s=this._streams[n.id];if(s)s.addTrack(t),Promise.resolve().then((function(){r.dispatchEvent(new Event("negotiationneeded"))}));else{var o=new e.MediaStream([t]);this._streams[n.id]=o,this._reverseStreams[o.id]=n,this.addStream(o)}return this.getSenders().find((function(e){return e.track===t}))},["createOffer","createAnswer"].forEach((function(t){var n=e.RTCPeerConnection.prototype[t],r=X({},t,(function(){var e=this,t=arguments,r=arguments.length&&"function"===typeof arguments[0];return r?n.apply(this,[function(n){var r=o(e,n);t[0].apply(null,[r])},function(e){t[1]&&t[1].apply(null,e)},arguments[2]]):n.apply(this,arguments).then((function(t){return o(e,t)}))}));e.RTCPeerConnection.prototype[t]=r[t]}));var a=e.RTCPeerConnection.prototype.setLocalDescription;e.RTCPeerConnection.prototype.setLocalDescription=function(){return arguments.length&&arguments[0].type?(arguments[0]=c(this,arguments[0]),a.apply(this,arguments)):a.apply(this,arguments)};var s=Object.getOwnPropertyDescriptor(e.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(e.RTCPeerConnection.prototype,"localDescription",{get:function(){var e=s.get.apply(this);return""===e.type?e:o(this,e)}}),e.RTCPeerConnection.prototype.removeTrack=function(e){var t,n=this;if("closed"===this.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!e._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(!(e._pc===this))throw new DOMException("Sender was not created by this connection.","InvalidAccessError");this._streams=this._streams||{},Object.keys(this._streams).forEach((function(r){n._streams[r].getTracks().find((function(t){return e.track===t}))&&(t=n._streams[r])})),t&&(1===t.getTracks().length?this.removeStream(this._reverseStreams[t.id]):t.removeTrack(e.track),this.dispatchEvent(new Event("negotiationneeded")))}}function o(e,t){var n=t.sdp;return Object.keys(e._reverseStreams||[]).forEach((function(t){var r=e._reverseStreams[t],i=e._streams[r.id];n=n.replace(new RegExp(i.id,"g"),r.id)})),new RTCSessionDescription({type:t.type,sdp:n})}function c(e,t){var n=t.sdp;return Object.keys(e._reverseStreams||[]).forEach((function(t){var r=e._reverseStreams[t],i=e._streams[r.id];n=n.replace(new RegExp(r.id,"g"),i.id)})),new RTCSessionDescription({type:t.type,sdp:n})}}function mh(e,t){!e.RTCPeerConnection&&e.webkitRTCPeerConnection&&(e.RTCPeerConnection=e.webkitRTCPeerConnection),e.RTCPeerConnection&&t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach((function(t){var n=e.RTCPeerConnection.prototype[t],r=X({},t,(function(){return arguments[0]=new("addIceCandidate"===t?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),n.apply(this,arguments)}));e.RTCPeerConnection.prototype[t]=r[t]}))}function gh(e,t){Qd(e,"negotiationneeded",(function(e){var n=e.target;if(!(t.version<72||n.getConfiguration&&"plan-b"===n.getConfiguration().sdpSemantics)||"stable"===n.signalingState)return e}))}function yh(e,t){var n=e&&e.navigator,r=e&&e.MediaStreamTrack;if(n.getUserMedia=function(e,t,r){eh("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),n.mediaDevices.getUserMedia(e).then(t,r)},!(t.version>55&&"autoGainControl"in n.mediaDevices.getSupportedConstraints())){var i=function(e,t,n){t in e&&!(n in e)&&(e[n]=e[t],delete e[t])},a=n.mediaDevices.getUserMedia.bind(n.mediaDevices);if(n.mediaDevices.getUserMedia=function(e){return"object"===typeof e&&"object"===typeof e.audio&&(e=JSON.parse(JSON.stringify(e)),i(e.audio,"autoGainControl","mozAutoGainControl"),i(e.audio,"noiseSuppression","mozNoiseSuppression")),a(e)},r&&r.prototype.getSettings){var s=r.prototype.getSettings;r.prototype.getSettings=function(){var e=s.apply(this,arguments);return i(e,"mozAutoGainControl","autoGainControl"),i(e,"mozNoiseSuppression","noiseSuppression"),e}}if(r&&r.prototype.applyConstraints){var o=r.prototype.applyConstraints;r.prototype.applyConstraints=function(e){return"audio"===this.kind&&"object"===typeof e&&(e=JSON.parse(JSON.stringify(e)),i(e,"autoGainControl","mozAutoGainControl"),i(e,"noiseSuppression","mozNoiseSuppression")),o.apply(this,[e])}}}}function bh(e,t){e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||e.navigator.mediaDevices&&(e.navigator.mediaDevices.getDisplayMedia=function(n){if(!n||!n.video){var r=new DOMException("getDisplayMedia without video constraints is undefined");return r.name="NotFoundError",r.code=8,Promise.reject(r)}return!0===n.video?n.video={mediaSource:t}:n.video.mediaSource=t,e.navigator.mediaDevices.getUserMedia(n)})}function kh(e){"object"===typeof e&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get:function(){return{receiver:this.receiver}}})}function xh(e,t){if("object"===typeof e&&(e.RTCPeerConnection||e.mozRTCPeerConnection)){!e.RTCPeerConnection&&e.mozRTCPeerConnection&&(e.RTCPeerConnection=e.mozRTCPeerConnection),t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach((function(t){var n=e.RTCPeerConnection.prototype[t],r=X({},t,(function(){return arguments[0]=new("addIceCandidate"===t?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),n.apply(this,arguments)}));e.RTCPeerConnection.prototype[t]=r[t]}));var n={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},r=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){var e=Array.prototype.slice.call(arguments),i=e[0],a=e[1],s=e[2];return r.apply(this,[i||null]).then((function(e){if(t.version<53&&!a)try{e.forEach((function(e){e.type=n[e.type]||e.type}))}catch(r){if("TypeError"!==r.name)throw r;e.forEach((function(t,r){e.set(r,Object.assign({},t,{type:n[t.type]||t.type}))}))}return e})).then(a,s)}}}function wh(e){if("object"===typeof e&&e.RTCPeerConnection&&e.RTCRtpSender&&(!e.RTCRtpSender||!("getStats"in e.RTCRtpSender.prototype))){var t=e.RTCPeerConnection.prototype.getSenders;t&&(e.RTCPeerConnection.prototype.getSenders=function(){var e=this,n=t.apply(this,[]);return n.forEach((function(t){return t._pc=e})),n});var n=e.RTCPeerConnection.prototype.addTrack;n&&(e.RTCPeerConnection.prototype.addTrack=function(){var e=n.apply(this,arguments);return e._pc=this,e}),e.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}}}function Th(e){if("object"===typeof e&&e.RTCPeerConnection&&e.RTCRtpSender&&(!e.RTCRtpSender||!("getStats"in e.RTCRtpReceiver.prototype))){var t=e.RTCPeerConnection.prototype.getReceivers;t&&(e.RTCPeerConnection.prototype.getReceivers=function(){var e=this,n=t.apply(this,[]);return n.forEach((function(t){return t._pc=e})),n}),Qd(e,"track",(function(e){return e.receiver._pc=e.srcElement,e})),e.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}}function Eh(e){e.RTCPeerConnection&&!("removeStream"in e.RTCPeerConnection.prototype)&&(e.RTCPeerConnection.prototype.removeStream=function(e){var t=this;eh("removeStream","removeTrack"),this.getSenders().forEach((function(n){n.track&&e.getTracks().includes(n.track)&&t.removeTrack(n)}))})}function _h(e){e.DataChannel&&!e.RTCDataChannel&&(e.RTCDataChannel=e.DataChannel)}function Sh(e){if("object"===typeof e&&e.RTCPeerConnection){var t=e.RTCPeerConnection.prototype.addTransceiver;t&&(e.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];var e=arguments[1]&&arguments[1].sendEncodings;void 0===e&&(e=[]);var n=(e=te(e)).length>0;n&&e.forEach((function(e){if("rid"in e){if(!/^[a-z0-9]{0,16}$/i.test(e.rid))throw new TypeError("Invalid RID value provided.")}if("scaleResolutionDownBy"in e&&!(parseFloat(e.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in e&&!(parseFloat(e.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")}));var r=t.apply(this,arguments);if(n){var i=r.sender,a=i.getParameters();(!("encodings"in a)||1===a.encodings.length&&0===Object.keys(a.encodings[0]).length)&&(a.encodings=e,i.sendEncodings=e,this.setParametersPromises.push(i.setParameters(a).then((function(){delete i.sendEncodings})).catch((function(){delete i.sendEncodings}))))}return r})}}function Ah(e){if("object"===typeof e&&e.RTCRtpSender){var t=e.RTCRtpSender.prototype.getParameters;t&&(e.RTCRtpSender.prototype.getParameters=function(){var e=t.apply(this,arguments);return"encodings"in e||(e.encodings=[].concat(this.sendEncodings||[{}])),e})}}function Ch(e){if("object"===typeof e&&e.RTCPeerConnection){var t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(){var e=arguments,n=this;return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then((function(){return t.apply(n,e)})).finally((function(){n.setParametersPromises=[]})):t.apply(this,arguments)}}}function Ih(e){if("object"===typeof e&&e.RTCPeerConnection){var t=e.RTCPeerConnection.prototype.createAnswer;e.RTCPeerConnection.prototype.createAnswer=function(){var e=arguments,n=this;return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then((function(){return t.apply(n,e)})).finally((function(){n.setParametersPromises=[]})):t.apply(this,arguments)}}}function Rh(e){if("object"===typeof e&&e.RTCPeerConnection){if("getLocalStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in e.RTCPeerConnection.prototype)){var t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addStream=function(e){var n=this;this._localStreams||(this._localStreams=[]),this._localStreams.includes(e)||this._localStreams.push(e),e.getAudioTracks().forEach((function(r){return t.call(n,r,e)})),e.getVideoTracks().forEach((function(r){return t.call(n,r,e)}))},e.RTCPeerConnection.prototype.addTrack=function(e){for(var n=this,r=arguments.length,i=new Array(r>1?r-1:0),a=1;a<r;a++)i[a-1]=arguments[a];return i&&i.forEach((function(e){n._localStreams?n._localStreams.includes(e)||n._localStreams.push(e):n._localStreams=[e]})),t.apply(this,arguments)}}"removeStream"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.removeStream=function(e){var t=this;this._localStreams||(this._localStreams=[]);var n=this._localStreams.indexOf(e);if(-1!==n){this._localStreams.splice(n,1);var r=e.getTracks();this.getSenders().forEach((function(e){r.includes(e.track)&&t.removeTrack(e)}))}})}}function Ph(e){if("object"===typeof e&&e.RTCPeerConnection&&("getRemoteStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in e.RTCPeerConnection.prototype))){Object.defineProperty(e.RTCPeerConnection.prototype,"onaddstream",{get:function(){return this._onaddstream},set:function(e){var t=this;this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=e),this.addEventListener("track",this._onaddstreampoly=function(e){e.streams.forEach((function(e){if(t._remoteStreams||(t._remoteStreams=[]),!t._remoteStreams.includes(e)){t._remoteStreams.push(e);var n=new Event("addstream");n.stream=e,t.dispatchEvent(n)}}))})}});var t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){var e=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(t){t.streams.forEach((function(t){if(e._remoteStreams||(e._remoteStreams=[]),!(e._remoteStreams.indexOf(t)>=0)){e._remoteStreams.push(t);var n=new Event("addstream");n.stream=t,e.dispatchEvent(n)}}))}),t.apply(e,arguments)}}}function Dh(e){if("object"===typeof e&&e.RTCPeerConnection){var t=e.RTCPeerConnection.prototype,n=t.createOffer,r=t.createAnswer,i=t.setLocalDescription,a=t.setRemoteDescription,s=t.addIceCandidate;t.createOffer=function(e,t){var r=arguments.length>=2?arguments[2]:arguments[0],i=n.apply(this,[r]);return t?(i.then(e,t),Promise.resolve()):i},t.createAnswer=function(e,t){var n=arguments.length>=2?arguments[2]:arguments[0],i=r.apply(this,[n]);return t?(i.then(e,t),Promise.resolve()):i};var o=function(e,t,n){var r=i.apply(this,[e]);return n?(r.then(t,n),Promise.resolve()):r};t.setLocalDescription=o,o=function(e,t,n){var r=a.apply(this,[e]);return n?(r.then(t,n),Promise.resolve()):r},t.setRemoteDescription=o,o=function(e,t,n){var r=s.apply(this,[e]);return n?(r.then(t,n),Promise.resolve()):r},t.addIceCandidate=o}}function Nh(e){var t=e&&e.navigator;if(t.mediaDevices&&t.mediaDevices.getUserMedia){var n=t.mediaDevices,r=n.getUserMedia.bind(n);t.mediaDevices.getUserMedia=function(e){return r(Oh(e))}}!t.getUserMedia&&t.mediaDevices&&t.mediaDevices.getUserMedia&&(t.getUserMedia=function(e,n,r){t.mediaDevices.getUserMedia(e).then(n,r)}.bind(t))}function Oh(e){return e&&void 0!==e.video?Object.assign({},e,{video:rh(e.video)}):e}function Lh(e){if(e.RTCPeerConnection){var t=e.RTCPeerConnection;e.RTCPeerConnection=function(e,n){if(e&&e.iceServers){for(var r=[],i=0;i<e.iceServers.length;i++){var a=e.iceServers[i];!a.hasOwnProperty("urls")&&a.hasOwnProperty("url")?(eh("RTCIceServer.url","RTCIceServer.urls"),(a=JSON.parse(JSON.stringify(a))).urls=a.url,delete a.url,r.push(a)):r.push(e.iceServers[i])}e.iceServers=r}return new t(e,n)},e.RTCPeerConnection.prototype=t.prototype,"generateCertificate"in t&&Object.defineProperty(e.RTCPeerConnection,"generateCertificate",{get:function(){return t.generateCertificate}})}}function Mh(e){"object"===typeof e&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get:function(){return{receiver:this.receiver}}})}function jh(e){var t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(e){if(e){"undefined"!==typeof e.offerToReceiveAudio&&(e.offerToReceiveAudio=!!e.offerToReceiveAudio);var n=this.getTransceivers().find((function(e){return"audio"===e.receiver.track.kind}));!1===e.offerToReceiveAudio&&n?"sendrecv"===n.direction?n.setDirection?n.setDirection("sendonly"):n.direction="sendonly":"recvonly"===n.direction&&(n.setDirection?n.setDirection("inactive"):n.direction="inactive"):!0!==e.offerToReceiveAudio||n||this.addTransceiver("audio",{direction:"recvonly"}),"undefined"!==typeof e.offerToReceiveVideo&&(e.offerToReceiveVideo=!!e.offerToReceiveVideo);var r=this.getTransceivers().find((function(e){return"video"===e.receiver.track.kind}));!1===e.offerToReceiveVideo&&r?"sendrecv"===r.direction?r.setDirection?r.setDirection("sendonly"):r.direction="sendonly":"recvonly"===r.direction&&(r.setDirection?r.setDirection("inactive"):r.direction="inactive"):!0!==e.offerToReceiveVideo||r||this.addTransceiver("video",{direction:"recvonly"})}return t.apply(this,arguments)}}function Fh(e){"object"!==typeof e||e.AudioContext||(e.AudioContext=e.webkitAudioContext)}var Uh=__webpack_require__(800),Bh=__webpack_require__.n(Uh);function Gh(e){if(!(!e.RTCIceCandidate||e.RTCIceCandidate&&"foundation"in e.RTCIceCandidate.prototype)){var t=e.RTCIceCandidate;e.RTCIceCandidate=function(e){if("object"===typeof e&&e.candidate&&0===e.candidate.indexOf("a=")&&((e=JSON.parse(JSON.stringify(e))).candidate=e.candidate.substr(2)),e.candidate&&e.candidate.length){var n=new t(e),r=Bh().parseCandidate(e.candidate),i=Object.assign(n,r);return i.toJSON=function(){return{candidate:i.candidate,sdpMid:i.sdpMid,sdpMLineIndex:i.sdpMLineIndex,usernameFragment:i.usernameFragment}},i}return new t(e)},e.RTCIceCandidate.prototype=t.prototype,Qd(e,"icecandidate",(function(t){return t.candidate&&Object.defineProperty(t,"candidate",{value:new e.RTCIceCandidate(t.candidate),writable:"false"}),t}))}}function Vh(e){!e.RTCIceCandidate||e.RTCIceCandidate&&"relayProtocol"in e.RTCIceCandidate.prototype||Qd(e,"icecandidate",(function(e){if(e.candidate){var t=Bh().parseCandidate(e.candidate.candidate);"relay"===t.type&&(e.candidate.relayProtocol={0:"tls",1:"tcp",2:"udp"}[t.priority>>24])}return e}))}function Hh(e,t){if(e.RTCPeerConnection){"sctp"in e.RTCPeerConnection.prototype||Object.defineProperty(e.RTCPeerConnection.prototype,"sctp",{get:function(){return"undefined"===typeof this._sctp?null:this._sctp}});var n=function(e){if(!e||!e.sdp)return!1;var t=Bh().splitSections(e.sdp);return t.shift(),t.some((function(e){var t=Bh().parseMLine(e);return t&&"application"===t.kind&&-1!==t.protocol.indexOf("SCTP")}))},r=function(e){var t=e.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(null===t||t.length<2)return-1;var n=parseInt(t[1],10);return n!==n?-1:n},i=function(e){var n=65536;return"firefox"===t.browser&&(n=t.version<57?-1===e?16384:2147483637:t.version<60?57===t.version?65535:65536:2147483637),n},a=function(e,n){var r=65536;"firefox"===t.browser&&57===t.version&&(r=65535);var i=Bh().matchPrefix(e.sdp,"a=max-message-size:");return i.length>0?r=parseInt(i[0].substr(19),10):"firefox"===t.browser&&-1!==n&&(r=2147483637),r},s=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,"chrome"===t.browser&&t.version>=76){var e=this.getConfiguration(),o=e.sdpSemantics;"plan-b"===o&&Object.defineProperty(this,"sctp",{get:function(){return"undefined"===typeof this._sctp?null:this._sctp},enumerable:!0,configurable:!0})}if(n(arguments[0])){var c,u=r(arguments[0]),l=i(u),d=a(arguments[0],u);c=0===l&&0===d?Number.POSITIVE_INFINITY:0===l||0===d?Math.max(l,d):Math.min(l,d);var h={};Object.defineProperty(h,"maxMessageSize",{get:function(){return c}}),this._sctp=h}return s.apply(this,arguments)}}}function zh(e){if(e.RTCPeerConnection&&"createDataChannel"in e.RTCPeerConnection.prototype){var t=e.RTCPeerConnection.prototype.createDataChannel;e.RTCPeerConnection.prototype.createDataChannel=function(){var e=t.apply(this,arguments);return n(e,this),e},Qd(e,"datachannel",(function(e){return n(e.channel,e.target),e}))}function n(e,t){var n=e.send;e.send=function(){var r=arguments[0],i=r.length||r.size||r.byteLength;if("open"===e.readyState&&t.sctp&&i>t.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+t.sctp.maxMessageSize+" bytes)");return n.apply(e,arguments)}}}function Wh(e){if(e.RTCPeerConnection&&!("connectionState"in e.RTCPeerConnection.prototype)){var t=e.RTCPeerConnection.prototype;Object.defineProperty(t,"connectionState",{get:function(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(t,"onconnectionstatechange",{get:function(){return this._onconnectionstatechange||null},set:function(e){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),e&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=e)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach((function(e){var n=t[e];t[e]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=function(e){var t=e.target;if(t._lastConnectionState!==t.connectionState){t._lastConnectionState=t.connectionState;var n=new Event("connectionstatechange",e);t.dispatchEvent(n)}return e},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),n.apply(this,arguments)}}))}}function Kh(e,t){if(e.RTCPeerConnection&&!("chrome"===t.browser&&t.version>=71)&&!("safari"===t.browser&&t.version>=605)){var n=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(t){if(t&&t.sdp&&-1!==t.sdp.indexOf("\na=extmap-allow-mixed")){var r=t.sdp.split("\n").filter((function(e){return"a=extmap-allow-mixed"!==e.trim()})).join("\n");e.RTCSessionDescription&&t instanceof e.RTCSessionDescription?arguments[0]=new e.RTCSessionDescription({type:t.type,sdp:r}):t.sdp=r}return n.apply(this,arguments)}}}function qh(e,t){if(e.RTCPeerConnection&&e.RTCPeerConnection.prototype){var n=e.RTCPeerConnection.prototype.addIceCandidate;n&&0!==n.length&&(e.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?("chrome"===t.browser&&t.version<78||"firefox"===t.browser&&t.version<68||"safari"===t.browser)&&arguments[0]&&""===arguments[0].candidate?Promise.resolve():n.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())})}}function Yh(e,t){if(e.RTCPeerConnection&&e.RTCPeerConnection.prototype){var n=e.RTCPeerConnection.prototype.setLocalDescription;n&&0!==n.length&&(e.RTCPeerConnection.prototype.setLocalDescription=function(){var e=this,t=arguments[0]||{};if("object"!==typeof t||t.type&&t.sdp)return n.apply(this,arguments);if(!(t={type:t.type,sdp:t.sdp}).type)switch(this.signalingState){case"stable":case"have-local-offer":case"have-remote-pranswer":t.type="offer";break;default:t.type="answer"}if(t.sdp||"offer"!==t.type&&"answer"!==t.type)return n.apply(this,[t]);var r="offer"===t.type?this.createOffer:this.createAnswer;return r.apply(this).then((function(t){return n.apply(e,[t])}))})}}var Jh,Qh=function(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=i.window,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{shimChrome:!0,shimFirefox:!0,shimSafari:!0},o=$d,c=th(a),u={browserDetails:c,commonShim:r,extractVersion:Jd,disableLog:Xd,disableWarnings:Zd,sdp:Uh};switch(c.browser){case"chrome":if(!e||!mh||!s.shimChrome)return o("Chrome shim is not included in this adapter release."),u;if(null===c.version)return o("Chrome shim can not determine version, not shimming."),u;o("adapter.js shimming chrome."),u.browserShim=e,qh(a,c),Yh(a),oh(a,c),uh(a),mh(a,c),lh(a),vh(a,c),dh(a),hh(a),fh(a),gh(a,c),Gh(a),Vh(a),Wh(a),Hh(a,c),zh(a),Kh(a,c);break;case"firefox":if(!t||!xh||!s.shimFirefox)return o("Firefox shim is not included in this adapter release."),u;o("adapter.js shimming firefox."),u.browserShim=t,qh(a,c),Yh(a),yh(a,c),xh(a,c),kh(a),Eh(a),wh(a),Th(a),_h(a),Sh(a),Ah(a),Ch(a),Ih(a),Gh(a),Wh(a),Hh(a,c),zh(a);break;case"safari":if(!n||!s.shimSafari)return o("Safari shim is not included in this adapter release."),u;o("adapter.js shimming safari."),u.browserShim=n,qh(a,c),Yh(a),Lh(a),jh(a),Dh(a),Rh(a),Ph(a),Mh(a),Nh(a),Fh(a),Gh(a),Vh(a),Hh(a,c),zh(a),Kh(a,c);break;default:o("Unsupported browser!")}return u}({window:"undefined"===typeof window?void 0:window}),Xh=Qh,Zh=__webpack_require__(210),$h=new Uint8Array(16);function ef(){if(!Jh&&!(Jh="undefined"!==typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!==typeof msCrypto&&"function"===typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Jh($h)}var tf=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;for(var nf=function(e){return"string"===typeof e&&tf.test(e)},rf=[],af=0;af<256;++af)rf.push((af+256).toString(16).substr(1));var sf=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(rf[e[t+0]]+rf[e[t+1]]+rf[e[t+2]]+rf[e[t+3]]+"-"+rf[e[t+4]]+rf[e[t+5]]+"-"+rf[e[t+6]]+rf[e[t+7]]+"-"+rf[e[t+8]]+rf[e[t+9]]+"-"+rf[e[t+10]]+rf[e[t+11]]+rf[e[t+12]]+rf[e[t+13]]+rf[e[t+14]]+rf[e[t+15]]).toLowerCase();if(!nf(n))throw TypeError("Stringified UUID is invalid");return n};var of,cf,uf,lf=function(e,t,n){var r=(e=e||{}).random||(e.rng||ef)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t){n=n||0;for(var i=0;i<16;++i)t[n+i]=r[i];return t}return sf(r)},df=__webpack_require__(371),hf=__webpack_require__.n(df),ff=__webpack_require__(861),pf=Object.defineProperty,vf=Object.defineProperties,mf=Object.getOwnPropertyDescriptors,gf=Object.getOwnPropertySymbols,yf=Object.prototype.hasOwnProperty,bf=Object.prototype.propertyIsEnumerable,kf=function(e,t,n){return t in e?pf(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},xf=function(e,t){for(var n in t||(t={}))yf.call(t,n)&&kf(e,n,t[n]);if(gf){var r,i=Ut(gf(t));try{for(i.s();!(r=i.n()).done;){n=r.value;bf.call(t,n)&&kf(e,n,t[n])}}catch(a){i.e(a)}finally{i.f()}}return e},wf=function(e,t){return vf(e,mf(t))},Tf=function(e,t){var n={};for(var r in e)yf.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&gf){var i,a=Ut(gf(e));try{for(a.s();!(i=a.n()).done;){r=i.value;t.indexOf(r)<0&&bf.call(e,r)&&(n[r]=e[r])}}catch(s){a.e(s)}finally{a.f()}}return n},Ef=function(e,t,n){return new Promise((function(r,i){var a=function(e){try{o(n.next(e))}catch(de){i(de)}},s=function(e){try{o(n.throw(e))}catch(de){i(de)}},o=function(e){return e.done?r(e.value):Promise.resolve(e.value).then(a,s)};o((n=n.apply(e,t)).next())}))},_f=function(e,t){return function(){return t||e((t={exports:{}}).exports,t),t.exports}}((function(e,t){t.exports={name:"@100mslive/hms-video",version:"0.7.1",license:"MIT",main:"dist/index.cjs.js",typings:"dist/index.d.ts",module:"dist/index.js",files:["dist","src"],engines:{node:">=10"},exports:{".":{require:"./dist/index.cjs.js",import:"./dist/index.js",default:"./dist/index.js"}},scripts:{prestart:"rm -rf dist && yarn types:build",start:'concurrently "yarn dev" "yarn types"',dev:"node ../../scripts/dev","build:only":"node ../../scripts/build",build:"yarn build:only && yarn types:build",types:"tsc -w","types:build":"tsc -p tsconfig.json",test:"jest --maxWorkers=1",lint:"eslint -c ../../.eslintrc .","lint:fix":"yarn lint --fix",prepare:"yarn build",size:"size-limit",analyze:"size-limit --why",format:"prettier --write src/**/*.ts"},author:"100ms <tech-common@100ms.live>",devDependencies:{"@types/sdp-transform":"^2.4.4","@types/ua-parser-js":"^0.7.36","@types/uuid":"^8.3.0","jest-canvas-mock":"^2.3.1",tslib:"^2.2.0"},dependencies:{eventemitter2:"^6.4.7","sdp-transform":"^2.14.1","ua-parser-js":"^1.0.1",uuid:"^8.3.2","webrtc-adapter":"^8.0.0"},gitHead:"8f89cfd2a2898848be5368da6211519f6c2c1cef"}})),Sf=function(){function e(t){et(this,e),this.key=t,this.storage=null}return nt(e,[{key:"getStorage",value:function(){return If&&!this.storage&&(Nf(),this.storage=window.localStorage),this.storage}},{key:"get",value:function(){var e,t=null==(e=this.getStorage())?void 0:e.getItem(this.key);return t?JSON.parse(t):void 0}},{key:"set",value:function(e){var t,n=JSON.stringify(e);null==(t=this.getStorage())||t.setItem(this.key,n)}},{key:"clear",value:function(){var e;null==(e=this.getStorage())||e.removeItem(this.key)}}]),e}(),Af=new Zh.UAParser,Cf="undefined"==typeof window&&!(null==(cf=Af.getBrowser().name)?void 0:cf.toLowerCase().includes("electron")),If="undefined"!=typeof window;!function(e){e.PROD="prod",e.QA="qa",e.DEV="dev"}(uf||(uf={}));var Rf,Pf=function(){var e;return"ios"===(null==(e=Af.getOS().name)?void 0:e.toLowerCase())},Df=function(){function e(){et(this,e),this.valuesMap=new Map}return nt(e,[{key:"getItem",value:function(e){return this.valuesMap.has(e)?String(this.valuesMap.get(e)):null}},{key:"setItem",value:function(e,t){this.valuesMap.set(e,t)}},{key:"removeItem",value:function(e){this.valuesMap.delete(e)}},{key:"clear",value:function(){this.valuesMap.clear()}},{key:"key",value:function(e){if(0===arguments.length)throw new TypeError("Failed to execute 'key' on 'Storage': 1 argument required, but only 0 present.");return Array.from(this.valuesMap.keys())[e]}},{key:"length",get:function(){return this.valuesMap.size}}]),e}(),Nf=function(){If&&!localStorage&&(window.localStorage=new Df)};!function(e){e[e.VERBOSE=0]="VERBOSE",e[e.DEBUG=1]="DEBUG",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.TIME=4]="TIME",e[e.TIMEEND=5]="TIMEEND",e[e.ERROR=6]="ERROR",e[e.NONE=7]="NONE"}(Rf||(Rf={}));var Of="undefined"!=typeof window&&"undefined"!=typeof window.expect,Lf=function(){function e(){et(this,e)}return nt(e,null,[{key:"v",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];this.log.apply(this,[0,e].concat(n))}},{key:"d",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];this.log.apply(this,[1,e].concat(n))}},{key:"i",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];this.log.apply(this,[2,e].concat(n))}},{key:"w",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];this.log.apply(this,[3,e].concat(n))}},{key:"e",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];this.log.apply(this,[6,e].concat(n))}},{key:"time",value:function(e){this.log(4,"[HMSPerformanceTiming]",e)}},{key:"timeEnd",value:function(e){this.log(5,"[HMSPerformanceTiming]",e,e)}},{key:"cleanUp",value:function(){performance.clearMarks(),performance.clearMeasures()}},{key:"log",value:function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(!(this.level.valueOf()>e.valueOf()))switch(e){case 0:var a;(a=console).log.apply(a,[t].concat(r));break;case 1:var s;(s=console).debug.apply(s,[t].concat(r));break;case 2:var o;(o=console).info.apply(o,[t].concat(r));break;case 3:var c;(c=console).warn.apply(c,[t].concat(r));break;case 6:var u;(u=console).error.apply(u,[t].concat(r));break;case 4:performance.mark(r[0]);break;case 5:var l=r[0];try{var d=performance.measure(l,l);this.log(1,t,l,null==d?void 0:d.duration),performance.clearMarks(l),performance.clearMeasures(l)}catch(d){this.log(1,t,l,d)}}}}]),e}();Lf.level=Of?7:0;var Mf=function(){function e(t){var n=t.sender,r=t.message,i=t.type,a=void 0===i?"chat":i,s=t.recipientPeer,o=t.recipientRoles,c=t.time;et(this,e),this.sender=n,this.message=r,this.type=a,this.recipientPeer=s,this.recipientRoles=o,this.time=c}return nt(e,[{key:"toSignalParams",value:function(){var e,t,n=null==(e=this.recipientRoles)?void 0:e.map((function(e){return e.name})),r=null==(t=this.recipientPeer)?void 0:t.peerId,i={info:{message:this.message,type:this.type}};return(null==n?void 0:n.length)&&(i.roles=n),r&&(i.peer_id=r),i}},{key:"toString",value:function(){var e;return"{\n      sender: ".concat(this.sender,";\n      recipientPeer: ").concat(this.recipientPeer,";\n      recipientRoles: ").concat(null==(e=this.recipientRoles)?void 0:e.map((function(e){return e.name})),";\n      message: ").concat(this.message,";\n      time: ").concat(this.time,";\n      type: ").concat(this.type,";\n    }")}}]),e}(),jf=function(){function e(t,n){et(this,e),this.id=t,this.store=n,this.recording={server:{running:!1},browser:{running:!1},hls:{running:!1}},this.rtmp={running:!1},this.hls={running:!1,variants:[]}}return nt(e,[{key:"localPeer",get:function(){return this.store.getLocalPeer()}},{key:"peers",get:function(){return this.store.getPeers()}}]),e}(),Ff=function(){function e(t){var n=t.peerId,r=t.name,i=t.isLocal,a=t.customerUserId,s=t.metadata,o=t.role,c=t.joinedAt;et(this,e),this.customerUserId="",this.metadata="",this.auxiliaryTracks=[],this.name=r,this.peerId=n,this.isLocal=i,this.customerUserId=a,this.metadata=s,this.joinedAt=c,o&&(this.role=o)}return nt(e,[{key:"updateRole",value:function(e){this.role=e}},{key:"updateName",value:function(e){this.name=e}},{key:"updateMetadata",value:function(e){this.metadata=e}},{key:"toString",value:function(){var e;return"{\n      name: ".concat(this.name,";\n      role: ").concat(null==(e=this.role)?void 0:e.name,";\n      peerId: ").concat(this.peerId,";\n      customerUserId: ").concat(this.customerUserId,";\n    }")}}]),e}(),Uf=nt((function e(){et(this,e)}));Uf.makePeerId=function(){return lf()};var Bf,Gf=function(e){it(n,e);var t=ut(n);function n(e){var r;return et(this,n),(r=t.call(this,wf(xf({},e),{peerId:Uf.makePeerId(),isLocal:!0}))).isLocal=!0,r.auxiliaryTracks=[],r}return nt(n)}(Ff),Vf=function(e){it(n,e);var t=ut(n);function n(e){var r;return et(this,n),(r=t.call(this,wf(xf({},e),{isLocal:!1}))).isLocal=!1,r.auxiliaryTracks=[],r.fromRoomState=!1,r.fromRoomState=!!e.fromRoomState,r}return nt(n)}(Ff);!function(e){e.CUSTOM="CUSTOM",e.LOCAL="LOCAL",e.HMS="HMS"}(Bf||(Bf={}));var Hf=function(){if(If&&window){var e=window.location.hostname;return"localhost"===e||"127.0.0.1"===e?Bf.LOCAL:e.includes("app.100ms.live")?Bf.HMS:Bf.CUSTOM}return Bf.CUSTOM}(),zf=_f().version;function Wf(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:uf.PROD,t=arguments.length>1?arguments[1]:void 0,n="web",r=Hf!==Bf.LOCAL&&e===uf.PROD?"prod":"debug";if(Cf)return Jf({os:"web_nodejs",os_version:process.version,sdk:n,sdk_version:zf,env:r,domain:Hf,framework:"node",framework_version:process.version,framework_sdk_version:null==t?void 0:t.sdkVersion});var i=Af.getOS(),a=Af.getDevice(),s=Af.getBrowser(),o=Kf("web_".concat(i.name)),c=i.version||"",u=Kf("".concat(s.name,"_").concat(s.version)),l=u;return a.type&&(l="".concat(Kf("".concat(a.vendor,"_").concat(a.type)),"/").concat(u)),Jf({os:o,os_version:c,sdk:n,sdk_version:zf,device_model:l,env:r,domain:Hf,framework:null==t?void 0:t.type,framework_version:null==t?void 0:t.version,framework_sdk_version:null==t?void 0:t.sdkVersion})}function Kf(e){return e.replace(/ /g,"_")}var qf,Yf,Jf=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:",";return Object.keys(e).filter((function(t){return!!e[t]})).map((function(t){return"".concat(t,":").concat(e[t])})).join(t)},Qf=function(){function e(t){var n=t.name,r=t.level,i=t.properties,a=t.includesPII,s=t.timestamp;et(this,e),this.metadata={peer:{},userAgent:Wf()},this.name=n,this.level=r,this.includesPII=a||!1,this.properties=i||{},this.timestamp=s||(new Date).getTime(),this.event_id=lf(),this.device_id=function(){var e,t=new Sf("hms-analytics-deviceId"),n=t.get();return n?e=n:(e=lf(),t.set(e)),e}()}return nt(e,[{key:"toSignalParams",value:function(){return{name:this.name,info:wf(xf({},this.properties),{timestamp:this.timestamp,domain:Hf}),timestamp:(new Date).getTime()}}}]),e}();!function(e){e[e.VERBOSE=0]="VERBOSE",e[e.INFO=1]="INFO",e[e.ERROR=2]="ERROR",e[e.OFF=3]="OFF"}(qf||(qf={})),function(e){e[e.VERBOSE=0]="VERBOSE",e[e.INFO=1]="INFO",e[e.ERROR=2]="ERROR",e[e.OFF=3]="OFF"}(Yf||(Yf={}));var Xf,Zf=function(e){it(n,e);var t=ut(n);function n(e,r,i,a,s){var o,c=arguments.length>5&&void 0!==arguments[5]&&arguments[5];return et(this,n),(o=t.call(this,a)).code=e,o.name=r,o.message=a,o.description=s,o.isTerminal=c,Object.setPrototypeOf(ot(o),n.prototype),o.action=i.toString(),o}return nt(n,[{key:"toAnalyticsProperties",value:function(){return{error_name:this.name,error_code:this.code,error_message:this.message,error_description:this.description,action:this.action,is_terminal:this.isTerminal}}},{key:"addNativeError",value:function(e){this.nativeError=e}},{key:"toString",value:function(){var e;return"{\n      code: ".concat(this.code,";\n      name: ").concat(this.name,";\n      action: ").concat(this.action,";\n      message: ").concat(this.message,";\n      description: ").concat(this.description,";\n      isTerminal: ").concat(this.isTerminal,";\n      nativeError: ").concat(null==(e=this.nativeError)?void 0:e.message,";\n    }")}}]),n}(zt(Error)),$f=function(){function e(){et(this,e)}return nt(e,null,[{key:"connect",value:function(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Date,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new Date,a=arguments.length>4?arguments[4]:void 0,s=this.eventNameFor("connect",void 0===e),o=e?Yf.ERROR:Yf.INFO,c=this.getPropertiesWithError(wf(xf({},t),(X(n={},this.KEY_REQUESTED_AT,null==r?void 0:r.getTime()),X(n,this.KEY_RESPONDED_AT,null==i?void 0:i.getTime()),X(n,"endpoint",a),n)),e);return new Qf({name:s,level:o,properties:c})}},{key:"disconnect",value:function(e,t){var n=e?Yf.ERROR:Yf.INFO,r=this.getPropertiesWithError(t,e);return new Qf({name:"disconnected",level:n,properties:r})}},{key:"preview",value:function(e){var t=e,n=t.error,r=Tf(t,["error"]),i=this.eventNameFor("preview",void 0===n),a=n?Yf.ERROR:Yf.INFO,s=this.getPropertiesWithError(r,n);return new Qf({name:i,level:a,properties:s})}},{key:"join",value:function(e){var t=e,n=t.error,r=Tf(t,["error"]),i=this.eventNameFor("join",void 0===n),a=n?Yf.ERROR:Yf.INFO,s=this.getPropertiesWithError(wf(xf({},r),{is_preview_called:!!r.is_preview_called}),n);return new Qf({name:i,level:a,properties:s})}},{key:"publish",value:function(e){var t=e.devices,n=e.settings,r=e.error,i=this.eventNameFor("publish",void 0===r),a=r?Yf.ERROR:Yf.INFO,s=this.getPropertiesWithError({devices:t,audio:null==n?void 0:n.audio,video:null==n?void 0:n.video},r);return new Qf({name:i,level:a,properties:s})}},{key:"subscribeFail",value:function(e){var t=this.eventNameFor("subscribe",!1),n=Yf.ERROR,r=this.getErrorProperties(e);return new Qf({name:t,level:n,properties:r})}},{key:"leave",value:function(){return new Qf({name:"leave",level:Yf.INFO})}},{key:"autoplayError",value:function(){return new Qf({name:"autoplayError",level:Yf.ERROR})}},{key:"deviceChange",value:function(e){var t=e.selection,n=e.type,r=e.devices,i=e.error,a=this.eventNameFor(i?"publish":"device.".concat(n),void 0===i),s=i?Yf.ERROR:Yf.INFO,o=this.getPropertiesWithError({selection:t,devices:r},i);return new Qf({name:a,level:s,properties:o})}},{key:"performance",value:function(e){var t=Yf.INFO,n=e.toAnalyticsProperties();return new Qf({name:"perf.stats",level:t,properties:n})}},{key:"rtcStats",value:function(e){var t=Yf.INFO,n=e.toAnalyticsProperties();return new Qf({name:"rtc.stats",level:t,properties:n})}},{key:"degradationStats",value:function(e,t){var n=Yf.INFO,r={degradedAt:e.degradedAt,trackId:e.trackId};if(!t&&e.degradedAt instanceof Date){var i=new Date,a=i.valueOf()-e.degradedAt.valueOf();r=wf(xf({},r),{duration:a,restoredAt:i})}return new Qf({name:"video.degradation.stats",level:n,properties:r})}},{key:"audioDetectionFail",value:function(e,t){var n=this.getPropertiesWithError({device:t},e),r=Yf.ERROR;return new Qf({name:"audiopresence.failed",level:r,properties:n})}},{key:"previewNetworkQuality",value:function(e){return new Qf({name:"perf.networkquality.preview",level:e.error?Yf.ERROR:Yf.INFO,properties:e})}},{key:"eventNameFor",value:function(e,t){return"".concat(e,".").concat(t?"success":"failed")}},{key:"getPropertiesWithError",value:function(e,t){var n=this.getErrorProperties(t);return e=xf(xf({},n),e)}},{key:"getErrorProperties",value:function(e){return e?e instanceof Zf?e.toAnalyticsProperties():{error_name:e.name,error_message:e.message,error_description:e.cause}:{}}}]),e}();$f.KEY_REQUESTED_AT="requested_at",$f.KEY_RESPONDED_AT="responded_at",function(e){e.INIT="init_response_time",e.WEBSOCKET_CONNECT="ws_connect_time",e.ON_POLICY_CHANGE="on_policy_change_time",e.LOCAL_AUDIO_TRACK="local_audio_track_time",e.LOCAL_VIDEO_TRACK="local_video_track_time",e.JOIN="join_time",e.PREVIEW="preview_time",e.PEER_LIST="peer_list_time",e.ROOM_STATE="room_state_time",e.JOIN_RESPONSE="join_response_time"}(Xf||(Xf={}));var ep,tp=[Xf.INIT,Xf.WEBSOCKET_CONNECT,Xf.ON_POLICY_CHANGE,Xf.LOCAL_AUDIO_TRACK,Xf.LOCAL_VIDEO_TRACK,Xf.PEER_LIST,Xf.ROOM_STATE],np=function(){function e(){et(this,e),this.eventPerformanceMeasures={}}return nt(e,[{key:"start",value:function(e){performance.mark(e)}},{key:"end",value:function(e){var t;try{this.eventPerformanceMeasures[e]=performance.measure(e,e),Lf.d("[HMSPerformanceTiming]",e,null==(t=this.eventPerformanceMeasures[e])?void 0:t.duration)}catch(n){Lf.w("[AnalyticsTimer]","Error in measuring performance for event ".concat(e),{error:n})}}},{key:"getTimeTaken",value:function(e){var t;return null==(t=this.eventPerformanceMeasures[e])?void 0:t.duration}},{key:"getTimes",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return[].concat(tp,n).reduce((function(t,n){return wf(xf({},t),X({},n,e.getTimeTaken(n)))}),{})}},{key:"cleanUp",value:function(){this.eventPerformanceMeasures={}}}]),e}(),rp={WebSocketConnectionErrors:{FAILED_TO_CONNECT:1e3,WEBSOCKET_CONNECTION_LOST:1003,ABNORMAL_CLOSE:1006},InitAPIErrors:{SERVER_ERRORS:2e3,INIT_CONFIG_NOT_AVAILABLE:2002,ENDPOINT_UNREACHABLE:2003,INVALID_TOKEN_FORMAT:2004},TracksErrors:{GENERIC_TRACK:3e3,CANT_ACCESS_CAPTURE_DEVICE:3001,DEVICE_NOT_AVAILABLE:3002,DEVICE_IN_USE:3003,DEVICE_LOST_MIDWAY:3008,NOTHING_TO_RETURN:3005,INVALID_VIDEO_SETTINGS:3006,CODEC_CHANGE_NOT_PERMITTED:3007,AUTOPLAY_ERROR:3008,OVER_CONSTRAINED:3009,NO_AUDIO_DETECTED:3010,SYSTEM_DENIED_PERMISSION:3011,CURRENT_TAB_NOT_SHARED:3012},WebrtcErrors:{CREATE_OFFER_FAILED:4001,CREATE_ANSWER_FAILED:4002,SET_LOCAL_DESCRIPTION_FAILED:4003,SET_REMOTE_DESCRIPTION_FAILED:4004,ICE_FAILURE:4005},WebsocketMethodErrors:{SERVER_ERRORS:5e3,ALREADY_JOINED:5001,CANNOT_JOIN_PREVIEW_IN_PROGRESS:5002},GenericErrors:{NOT_CONNECTED:6e3,SIGNALLING:6001,UNKNOWN:6002,NOT_READY:6003,JSON_PARSING_FAILED:6004,TRACK_METADATA_MISSING:6005,RTC_TRACK_MISSING:6006,PEER_METADATA_MISSING:6007,INVALID_ROLE:6008,PREVIEW_IN_PROGRESS:6009,MISSING_MEDIADEVICES:6010,MISSING_RTCPEERCONNECTION:6011},PlaylistErrors:{NO_ENTRY_TO_PLAY:8001,NO_ENTRY_IS_PLAYING:8002}};!function(e){e.NONE="NONE",e.TRACK="TRACK",e.INIT="INIT",e.PUBLISH="PUBLISH",e.UNPUBLISH="UNPUBLISH",e.JOIN="JOIN",e.SUBSCRIBE="SUBSCRIBE",e.DATA_CHANNEL_SEND="DATA_CHANNEL_SEND",e.RESTART_ICE="RESTART_ICE",e.VIDEO_PLUGINS="VIDEO_PLUGINS",e.AUDIO_PLUGINS="AUDIO_PLUGINS",e.AUTOPLAY="AUTOPLAY",e.RECONNECT_SIGNAL="RECONNECT_SIGNAL",e.VALIDATION="VALIDATION",e.PLAYLIST="PLAYLIST",e.PREVIEW="PREVIEW"}(ep||(ep={}));var ip,ap,sp,op,cp,up={FailedToConnect:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return new Zf(rp.WebSocketConnectionErrors.FAILED_TO_CONNECT,"WebsocketFailedToConnect",e,"[WS]: ".concat(t),"[WS]: ".concat(t))},WebSocketConnectionLost:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return new Zf(rp.WebSocketConnectionErrors.WEBSOCKET_CONNECTION_LOST,"WebSocketConnectionLost",e,"Network connection lost ",t)},AbnormalClose:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return new Zf(rp.WebSocketConnectionErrors.ABNORMAL_CLOSE,"WebSocketAbnormalClose",e,"Websocket closed abnormally",t)}},lp={ServerErrors:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return new Zf(e,"ServerErrors",t,"[INIT]: Server error ".concat(n),n,!0)},EndpointUnreachable:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return new Zf(rp.InitAPIErrors.ENDPOINT_UNREACHABLE,"EndpointUnreachable",e,"Endpoint is not reachable - ".concat(t),t)},InvalidTokenFormat:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return new Zf(rp.InitAPIErrors.INVALID_TOKEN_FORMAT,"InvalidTokenFormat",e,"Token is not in proper JWT format - ".concat(t),t,!0)},InitConfigNotAvailable:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return new Zf(rp.InitAPIErrors.INIT_CONFIG_NOT_AVAILABLE,"InitError",e,"[INIT]: ".concat(t),"[INIT]: ".concat(t))}},dp={GenericTrack:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return new Zf(rp.TracksErrors.GENERIC_TRACK,"GenericTrack",e,"[TRACK]: ".concat(t),"[TRACK]: ".concat(t))},CantAccessCaptureDevice:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return new Zf(rp.TracksErrors.CANT_ACCESS_CAPTURE_DEVICE,"CantAccessCaptureDevice",e,"User denied permission to access capture device - ".concat(t),n)},DeviceNotAvailable:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return new Zf(rp.TracksErrors.DEVICE_NOT_AVAILABLE,"DeviceNotAvailable",e,"[TRACK]: Capture device is no longer available - ".concat(t),n)},DeviceInUse:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return new Zf(rp.TracksErrors.DEVICE_IN_USE,"DeviceInUse",e,"[TRACK]: Capture device is in use by another application - ".concat(t),n)},DeviceLostMidway:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return new Zf(rp.TracksErrors.DEVICE_LOST_MIDWAY,"DeviceLostMidway",e,"Lost access to capture device midway - ".concat(t),n)},NothingToReturn:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"There is no media to return. Please select either video or audio or both.";return new Zf(rp.TracksErrors.NOTHING_TO_RETURN,"NothingToReturn",e,n,t)},InvalidVideoSettings:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return new Zf(rp.TracksErrors.INVALID_VIDEO_SETTINGS,"InvalidVideoSettings",e,"Cannot enable simulcast when no video settings are provided",t)},AutoplayBlocked:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return new Zf(rp.TracksErrors.AUTOPLAY_ERROR,"AutoplayBlocked",e,"Autoplay blocked because the user didn't interact with the document first",t)},CodecChangeNotPermitted:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return new Zf(rp.TracksErrors.CODEC_CHANGE_NOT_PERMITTED,"CodecChangeNotPermitted",e,"Codec can't be changed mid call.",t)},OverConstrained:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return new Zf(rp.TracksErrors.OVER_CONSTRAINED,"OverConstrained",e,"[TRACK]: Requested constraints cannot be satisfied with the device hardware - ".concat(t),n)},NoAudioDetected:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Please check the mic or use another audio input";return new Zf(rp.TracksErrors.NO_AUDIO_DETECTED,"NoAudioDetected",e,"No audio input detected from microphone",t)},SystemDeniedPermission:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return new Zf(rp.TracksErrors.SYSTEM_DENIED_PERMISSION,"SystemDeniedPermission",e,"Operating System denied permission to access capture device - ".concat(t),n)},CurrentTabNotShared:function(){return new Zf(rp.TracksErrors.CURRENT_TAB_NOT_SHARED,"CurrentTabNotShared",ep.TRACK,"The app requires you to share the current tab","You must screen share the current tab in order to proceed")}},hp={CreateOfferFailed:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return new Zf(rp.WebrtcErrors.CREATE_OFFER_FAILED,"CreateOfferFailed",e,"[".concat(e.toString(),"]: Failed to create offer. "),t)},CreateAnswerFailed:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return new Zf(rp.WebrtcErrors.CREATE_ANSWER_FAILED,"CreateAnswerFailed",e,"[".concat(e.toString(),"]: Failed to create answer. "),t)},SetLocalDescriptionFailed:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return new Zf(rp.WebrtcErrors.SET_LOCAL_DESCRIPTION_FAILED,"SetLocalDescriptionFailed",e,"[".concat(e.toString(),"]: Failed to set offer. "),t)},SetRemoteDescriptionFailed:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return new Zf(rp.WebrtcErrors.SET_REMOTE_DESCRIPTION_FAILED,"SetRemoteDescriptionFailed",e,"[".concat(e.toString(),"]: Failed to set answer. "),t)},ICEFailure:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return new Zf(rp.WebrtcErrors.ICE_FAILURE,"ICEFailure",e,"[".concat(e.toString(),"]: Ice connection state FAILED"),t)}},fp={ServerErrors:function(e,t,n){return new Zf(e,"ServerErrors",t,n,n,!0)},AlreadyJoined:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return new Zf(rp.WebsocketMethodErrors.ALREADY_JOINED,"AlreadyJoined",e,"[JOIN]: You have already joined this room.",t)},CannotJoinPreviewInProgress:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return new Zf(rp.WebsocketMethodErrors.CANNOT_JOIN_PREVIEW_IN_PROGRESS,"CannotJoinPreviewInProgress",e,"[JOIN]: Cannot join if preview is in progress",t)}},pp={NotConnected:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return new Zf(rp.GenericErrors.NOT_CONNECTED,"NotConnected",e,"Client is not connected",t)},Signalling:function(e,t){return new Zf(rp.GenericErrors.SIGNALLING,"Signalling",e,"Unknown signalling error: ".concat(e.toString()," ").concat(t," "),t)},Unknown:function(e,t){return new Zf(rp.GenericErrors.UNKNOWN,"Unknown",e,"Unknown exception: ".concat(t),t)},NotReady:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return new Zf(rp.GenericErrors.NOT_READY,"NotReady",e,t,t)},JsonParsingFailed:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return new Zf(rp.GenericErrors.JSON_PARSING_FAILED,"JsonParsingFailed",e,"Failed to parse JSON message - ".concat(t),n)},TrackMetadataMissing:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return new Zf(rp.GenericErrors.TRACK_METADATA_MISSING,"TrackMetadataMissing",e,"Track Metadata Missing",t)},RTCTrackMissing:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return new Zf(rp.GenericErrors.RTC_TRACK_MISSING,"RTCTrackMissing",e,"RTC Track missing",t)},PeerMetadataMissing:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return new Zf(rp.GenericErrors.PEER_METADATA_MISSING,"PeerMetadataMissing",e,"Peer Metadata Missing",t)},ValidationFailed:function(e,t){return new Zf(rp.GenericErrors.INVALID_ROLE,"ValidationFailed",ep.VALIDATION,e,t?JSON.stringify(t):"")},InvalidRole:function(e,t){return new Zf(rp.GenericErrors.INVALID_ROLE,"InvalidRole",e,"Invalid role. Join with valid role",t,!0)},PreviewAlreadyInProgress:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return new Zf(rp.GenericErrors.PREVIEW_IN_PROGRESS,"PreviewAlreadyInProgress",e,"[Preview]: Cannot join if preview is in progress",t)},MissingMediaDevices:function(){return new Zf(rp.GenericErrors.MISSING_MEDIADEVICES,"MissingMediaDevices",ep.JOIN,"navigator.mediaDevices is undefined. 100ms SDK won't work on this website as WebRTC is not supported on HTTP endpoints(missing navigator.mediaDevices). Please ensure you're using the SDK either on localhost or a valid HTTPS endpoint.","",!0)},MissingRTCPeerConnection:function(){return new Zf(rp.GenericErrors.MISSING_RTCPEERCONNECTION,"MissingRTCPeerConnection",ep.JOIN,"RTCPeerConnection which is a core requirement for WebRTC call was not found, this could be due to an unsupported browser or browser extensions blocking WebRTC","",!0)}},vp={PlatformNotSupported:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return new Zf(7001,"PlatformNotSupported",e,"Check HMS Docs to see the list of supported platforms",t)},InitFailed:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return new Zf(7002,"InitFailed",e,"Plugin init failed",t)},ProcessingFailed:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return new Zf(7003,"ProcessingFailed",e,"Plugin processing failed",t)},AddAlreadyInProgress:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return new Zf(7004,"AddAlreadyInProgress",e,"Plugin add already in progress",t)},DeviceNotSupported:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return new Zf(7005,"DeviceNotSupported",e,"Check HMS Docs to see the list of supported devices",t)}},mp={NoEntryToPlay:function(e,t){return new Zf(rp.PlaylistErrors.NO_ENTRY_TO_PLAY,"NoEntryToPlay",e,"Reached end of playlist",t)},NoEntryPlaying:function(e,t){return new Zf(rp.PlaylistErrors.NO_ENTRY_IS_PLAYING,"NoEntryIsPlaying",e,"No entry is playing at this time",t)}};function gp(e,t){var n=e.toLowerCase();return n.includes("device not found")?dp.DeviceNotAvailable(ep.TRACK,t,e):n.includes("permission denied")?dp.CantAccessCaptureDevice(ep.TRACK,t,e):dp.GenericTrack(ep.TRACK,e)}function yp(e,t){var n=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if("chrome"===Xh.browserDetails.browser&&"NotAllowedError"===e.name&&e.message.includes("denied by system"))return dp.SystemDeniedPermission(ep.TRACK,t,e.message);if("firefox"===Xh.browserDetails.browser&&"NotFoundError"===e.name){var n=dp.SystemDeniedPermission(ep.TRACK,t,e.message);return n.description="Capture device is either blocked at Operating System level or not available - ".concat(t),n}switch(e.name){case"OverconstrainedError":return dp.OverConstrained(ep.TRACK,t,e.constraint);case"NotAllowedError":return dp.CantAccessCaptureDevice(ep.TRACK,t,e.message);case"NotFoundError":return dp.DeviceNotAvailable(ep.TRACK,t,e.message);case"NotReadableError":return dp.DeviceInUse(ep.TRACK,t,e.message);case"TypeError":return dp.NothingToReturn(ep.TRACK,e.message);default:return gp(e.message,t)}}(e,t);return n.addNativeError(e),n}!function(e){e.UNKNOWN="unknown(video or audio)",e.AUDIO="audio",e.VIDEO="video",e.AV="audio, video",e.SCREEN="screen"}(ip||(ip={})),function(e){e.RECORDING_STATE_UPDATED="RECORDING_STATE_UPDATED",e.BROWSER_RECORDING_STATE_UPDATED="BROWSER_RECORDING_STATE_UPDATED",e.SERVER_RECORDING_STATE_UPDATED="SERVER_RECORDING_STATE_UPDATED",e.RTMP_STREAMING_STATE_UPDATED="RTMP_STREAMING_STATE_UPDATED",e.HLS_STREAMING_STATE_UPDATED="HLS_STREAMING_STATE_UPDATED"}(ap||(ap={})),function(e){e[e.PEER_JOINED=0]="PEER_JOINED",e[e.PEER_LEFT=1]="PEER_LEFT",e[e.AUDIO_TOGGLED=2]="AUDIO_TOGGLED",e[e.VIDEO_TOGGLED=3]="VIDEO_TOGGLED",e[e.BECAME_DOMINANT_SPEAKER=4]="BECAME_DOMINANT_SPEAKER",e[e.RESIGNED_DOMINANT_SPEAKER=5]="RESIGNED_DOMINANT_SPEAKER",e[e.STARTED_SPEAKING=6]="STARTED_SPEAKING",e[e.STOPPED_SPEAKING=7]="STOPPED_SPEAKING",e[e.ROLE_UPDATED=8]="ROLE_UPDATED",e[e.PEER_LIST=9]="PEER_LIST",e[e.NAME_UPDATED=10]="NAME_UPDATED",e[e.METADATA_UPDATED=11]="METADATA_UPDATED"}(sp||(sp={})),function(e){e[e.TRACK_ADDED=0]="TRACK_ADDED",e[e.TRACK_REMOVED=1]="TRACK_REMOVED",e[e.TRACK_MUTED=2]="TRACK_MUTED",e[e.TRACK_UNMUTED=3]="TRACK_UNMUTED",e[e.TRACK_DESCRIPTION_CHANGED=4]="TRACK_DESCRIPTION_CHANGED",e[e.TRACK_DEGRADED=5]="TRACK_DEGRADED",e[e.TRACK_RESTORED=6]="TRACK_RESTORED"}(op||(op={})),function(e){e.NONE="none",e.LOW="low",e.MEDIUM="medium",e.HIGH="high"}(cp||(cp={}));var bp,kp,xp,wp={f:cp.HIGH,h:cp.MEDIUM,q:cp.LOW};!function(e){e.VP8="vp8",e.VP9="vp9",e.H264="h264"}(bp||(bp={})),function(e){e.OPUS="opus"}(kp||(kp={})),function(e){e.audio="audio",e.video="video"}(xp||(xp={}));var Tp,Ep=function(){function e(){et(this,e),this._volume=1,this._codec=kp.OPUS,this._maxBitrate=32,this._deviceId="default",this._advanced=[{googEchoCancellation:{exact:!0}},{googExperimentalEchoCancellation:{exact:!0}},{autoGainControl:{exact:!0}},{noiseSuppression:{exact:!0}},{googHighpassFilter:{exact:!0}},{googAudioMirroring:{exact:!0}}]}return nt(e,[{key:"volume",value:function(e){if(!(0<=e&&e<=1))throw Error("volume can only be in range [0.0, 1.0]");return this._volume=e,this}},{key:"codec",value:function(e){return this._codec=e,this}},{key:"maxBitrate",value:function(e){if(e&&e<=0)throw Error("maxBitrate should be >= 1");return this._maxBitrate=e,this}},{key:"deviceId",value:function(e){return this._deviceId=e,this}},{key:"advanced",value:function(e){return this._advanced=e,this}},{key:"build",value:function(){return new _p(this._volume,this._codec,this._maxBitrate,this._deviceId,this._advanced)}}]),e}(),_p=function(){function e(t,n,r,i,a){et(this,e),this.volume=t,this.codec=n,this.maxBitrate=r,this.deviceId=i,this.advanced=a}return nt(e,[{key:"toConstraints",value:function(){return{deviceId:this.deviceId,advanced:this.advanced}}},{key:"toAnalyticsProperties",value:function(){return{audio_bitrate:this.maxBitrate,audio_codec:this.codec}}}]),e}(),Sp=function(){function e(){et(this,e),this._width=320,this._height=180,this._codec=bp.VP8,this._maxFramerate=30,this._maxBitrate=150,this._advanced=[]}return nt(e,[{key:"setWidth",value:function(e){return this._width=e,this}},{key:"setHeight",value:function(e){return this._height=e,this}},{key:"codec",value:function(e){return this._codec=e,this}},{key:"maxFramerate",value:function(e){if(e&&e<=0)throw Error("maxFramerate should be >= 1");return this._maxFramerate=e,this}},{key:"maxBitrate",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if("number"==typeof e&&e<=0)throw Error("maxBitrate should be >= 1");return this._maxBitrate=e,!this._maxBitrate&&t&&(this._maxBitrate=15e4),this}},{key:"deviceId",value:function(e){return this._deviceId=e,this}},{key:"advanced",value:function(e){return this._advanced=e,this}},{key:"build",value:function(){return new Ap(this._width,this._height,this._codec,this._maxFramerate,this._deviceId,this._advanced,this._maxBitrate)}}]),e}(),Ap=function(){function e(t,n,r,i,a,s,o){et(this,e),this.width=t,this.height=n,this.codec=r,this.maxFramerate=i,this.maxBitrate=o,this.deviceId=a,this.advanced=s}return nt(e,[{key:"toConstraints",value:function(e){var t="ideal";return e&&(t="max"),{width:X({},t,this.width),height:X({},t,this.height),frameRate:this.maxFramerate,deviceId:this.deviceId}}},{key:"toAnalyticsProperties",value:function(){return{width:this.width,height:this.height,video_bitrate:this.maxBitrate,framerate:this.maxFramerate,video_codec:this.codec}}}]),e}(),Cp=function(){function e(){et(this,e),this._video=(new Sp).build(),this._audio=(new Ep).build(),this._screen=(new Sp).build(),this._simulcast=!1}return nt(e,[{key:"video",value:function(e){return this._video=e,this}},{key:"audio",value:function(e){return this._audio=e,this}},{key:"screen",value:function(e){return this._screen=e,this}},{key:"simulcast",value:function(e){return this._simulcast=e,this}},{key:"build",value:function(){if(null===this._audio&&null===this._video)throw dp.NothingToReturn(ep.TRACK);if(null===this._video&&this._simulcast)throw dp.InvalidVideoSettings(ep.TRACK,"Cannot enable simulcast when no video settings are provided");return new Ip(this._video,this._audio,this._simulcast,this._screen||void 0)}}]),e}(),Ip=function(){function e(t,n,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;et(this,e),this.video=t,this.audio=n,this.simulcast=r,this.screen=i}return nt(e,[{key:"toAnalyticsProperties",value:function(){var e={audio_enabled:null!==this.audio,video_enabled:null!==this.video};return this.audio&&(e=xf(xf({},this.audio.toAnalyticsProperties()),e)),this.video&&(e=xf(xf({},this.video.toAnalyticsProperties()),e)),e}}]),e}(),Rp=nt((function e(t){et(this,e),this.tracks=new Array,this.nativeStream=t,this.id=t.id})),Pp=function(e){return e?"{\n    trackId: ".concat(e.id,";\n    kind: ").concat(e.kind,";\n    enabled: ").concat(e.enabled,";\n    muted: ").concat(e.muted,";\n    readyState: ").concat(e.readyState,";\n  }"):""},Dp=function(){function e(t,n,r){et(this,e),this.logIdentifier="",this.stream=t,this.nativeTrack=n,this.source=r}return nt(e,[{key:"enabled",get:function(){return this.nativeTrack.enabled}},{key:"trackId",get:function(){return this.firstTrackId||this.sdpTrackId||this.nativeTrack.id}},{key:"getMediaTrackSettings",value:function(){return this.nativeTrack.getSettings()}},{key:"setEnabled",value:function(e){return Ef(this,null,Bt().mark((function t(){return Bt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.nativeTrack.enabled=e;case 1:case"end":return t.stop()}}),t,this)})))}},{key:"setSdpTrackId",value:function(e){this.sdpTrackId=e}},{key:"setFirstTrackId",value:function(e){this.firstTrackId=e}},{key:"cleanup",value:function(){var e;null==(e=this.nativeTrack)||e.stop()}},{key:"toString",value:function(){return"{\n      streamId: ".concat(this.stream.id,";\n      peerId: ").concat(this.peerId,";\n      trackId: ").concat(this.trackId,";\n      logIdentifier: ").concat(this.logIdentifier,";\n      source: ").concat(this.source,";\n      enabled: ").concat(this.enabled,";\n      nativeTrack: ").concat(Pp(this.nativeTrack),";\n    }")}}]),e}();!function(e){e.AUDIO="audio",e.VIDEO="video"}(Tp||(Tp={}));var Np,Op,Lp=function(e){it(n,e);var t=ut(n);function n(e,r){var i;return et(this,n),(i=t.call(this,e)).audio=!0,i.video=cp.NONE,i.connection=r,i}return nt(n,[{key:"setAudio",value:function(e,t,n){return Ef(this,null,Bt().mark((function r(){return Bt().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(r.t0=this.audio!==e,!r.t0){r.next=6;break}return this.audio=e,Lf.d("[Remote stream] ".concat(n||""," ").concat(this.id),"subscribing audio - ".concat(this.audio)),r.next=6,this.connection.sendOverApiDataChannelWithResponse({params:{subscribed:this.audio,track_id:t},method:"prefer-audio-track-state"});case 6:case"end":return r.stop()}}),r,this)})))}},{key:"setVideoLayerLocally",value:function(e,t,n){this.video=e,Lf.d("[Remote stream] ".concat(t," - ").concat(this.id),"source: ".concat(n," Setting layer field to - ").concat(e))}},{key:"setVideoLayer",value:function(e,t,n,r){return this.setVideoLayerLocally(e,n,r),Lf.d("[Remote stream] ".concat(n," - ").concat(this.id),"request ".concat(e," layer")),this.connection.sendOverApiDataChannelWithResponse({params:{max_spatial_layer:this.video,track_id:t},method:"prefer-video-track-state"})}},{key:"getSimulcastLayer",value:function(){return this.video}},{key:"getVideoLayer",value:function(){return this.video}},{key:"isAudioSubscribed",value:function(){return this.audio}}]),n}(Rp),Mp=function(e){it(n,e);var t=ut(n);function n(e,r,i){var a;if(et(this,n),(a=t.call(this,e,r,i)).type=Tp.AUDIO,a.audioElement=null,"audio"!==r.kind)throw new Error("Expected 'track' kind = 'audio'");return a}return nt(n,[{key:"getVolume",value:function(){return this.audioElement?100*this.audioElement.volume:null}},{key:"setVolume",value:function(e){return Ef(this,null,Bt().mark((function t(){return Bt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(e<0||e>100)){t.next=2;break}throw Error("Please pass a valid number between 0-100");case 2:return t.next=4,this.subscribeToAudio(0!==e&&this.enabled);case 4:this.audioElement&&(this.audioElement.volume=e/100);case 5:case"end":return t.stop()}}),t,this)})))}},{key:"setAudioElement",value:function(e){this.audioElement=e}},{key:"getAudioElement",value:function(){return this.audioElement}},{key:"getOutputDevice",value:function(){return this.outputDevice}},{key:"cleanup",value:function(){Ft(at(n.prototype),"cleanup",this).call(this),this.audioElement&&(this.audioElement.srcObject=null,this.audioElement.remove(),this.audioElement=null)}},{key:"setOutputDevice",value:function(e){return Ef(this,null,Bt().mark((function t(){var n;return Bt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.audioElement){t.next=3;break}return Lf.d("audio-track","no audio element to set output"),t.abrupt("return");case 3:if(t.prev=3,t.t0="function"==typeof this.audioElement.setSinkId,!t.t0){t.next=9;break}return t.next=8,null==(n=this.audioElement)?void 0:n.setSinkId(e.deviceId);case 8:this.outputDevice=e;case 9:t.next=14;break;case 11:t.prev=11,t.t1=t.catch(3),Lf.d("audio-track",t.t1);case 14:case"end":return t.stop()}}),t,this,[[3,11]])})))}},{key:"removeSink",value:function(){var e;this.audioElement&&(null==(e=window.HMS)?void 0:e.AUDIO_SINK)&&(this.audioElement.srcObject=null,this.subscribeToAudio(!1))}},{key:"addSink",value:function(){var e,t;if(this.nativeTrack&&this.audioElement&&(null==(e=window.HMS)?void 0:e.AUDIO_SINK)){var n=this.audioElement.srcObject;n instanceof MediaStream&&(null==(t=n.getAudioTracks()[0])?void 0:t.id)===this.nativeTrack.id||(this.audioElement.srcObject=new MediaStream([this.nativeTrack]),this.subscribeToAudio(!0))}}},{key:"subscribeToAudio",value:function(e){return Ef(this,null,Bt().mark((function t(){return Bt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=this.stream instanceof Lp,!t.t0){t.next=4;break}return t.next=4,this.stream.setAudio(e,this.trackId,this.logIdentifier);case 4:case"end":return t.stop()}}),t,this)})))}}]),n}(Dp),jp=function(){function e(){et(this,e),this.storage=new Sf("hms-device-selection"),this.remember=!1,this.TAG="[HMSDeviceStorage]"}return nt(e,[{key:"setDevices",value:function(e){this.devices=e}},{key:"rememberDevices",value:function(e){this.remember=e}},{key:"updateSelection",value:function(e,t){var n=this,r=t.deviceId,i=t.groupId;if(this.devices&&this.remember){var a=this.devices[e].find((function(e){return n.isSame({deviceId:r,groupId:i},e)}));if(a){var s=this.storage.get()||{};s[e]=a,this.storage.set(s)}else Lf.w(this.TAG,"Could not find device with deviceId: ".concat(r,", groupId: ").concat(i))}}},{key:"getSelection",value:function(){if(this.remember)return this.storage.get()}},{key:"cleanup",value:function(){this.remember=!1,this.devices=void 0}},{key:"isSame",value:function(e,t){return e.deviceId===t.deviceId&&(e.groupId===t.groupId||!e.groupId)}}]),e}(),Fp=new jp;!function(e){e.TRANSFORM="TRANSFORM",e.ANALYZE="ANALYZE"}(Np||(Np={})),function(e){e.PLATFORM_NOT_SUPPORTED="PLATFORM_NOT_SUPPORTED",e.DEVICE_NOT_SUPPORTED="DEVICE_NOT_SUPPORTED"}(Op||(Op={}));var Up=function(){function e(){et(this,e)}return nt(e,null,[{key:"failure",value:function(e,t){var n=Yf.ERROR,r=xf({plugin_name:e},t.toAnalyticsProperties());return new Qf({name:"mediaPlugin.failed",level:n,properties:r})}},{key:"audioPluginFailure",value:function(e,t,n){var r=Yf.ERROR,i=xf({plugin_name:e,sampleRate:t},n.toAnalyticsProperties());return new Qf({name:"mediaPlugin.failed",level:r,properties:i})}},{key:"audioPluginStats",value:function(e){var t=e.pluginName,n=e.duration,r=e.loadTime,i=e.sampleRate,a=Yf.INFO;return new Qf({name:"mediaPlugin.stats",level:a,properties:{plugin_name:t,duration:n,load_time:r,sampleRate:i}})}},{key:"stats",value:function(e){var t=e.pluginName,n=e.duration,r=e.loadTime,i=e.avgPreProcessingTime,a=e.avgProcessingTime,s=e.inputFrameRate,o=e.pluginFrameRate,c=Yf.INFO;return new Qf({name:"mediaPlugin.stats",level:c,properties:{plugin_name:t,duration:n,load_time:r,avg_preprocessing_time:i,avg_processing_time:a,input_frame_rate:s,plugin_frame_rate:o}})}}]),e}(),Bp=function(){function e(t){et(this,e),this.eventBus=t,this.TAG="[AudioPluginsAnalytics]",this.initTime={},this.addedTimestamps={},this.pluginAdded={},this.pluginSampleRate={}}return nt(e,[{key:"added",value:function(e,t){this.pluginAdded[e]=!0,this.addedTimestamps[e]=Date.now(),this.initTime[e]=0,this.pluginSampleRate[e]=t}},{key:"removed",value:function(e){if(this.pluginAdded[e]){var t={pluginName:e,duration:Math.floor((Date.now()-this.addedTimestamps[e])/1e3),loadTime:this.initTime[e],sampleRate:this.pluginSampleRate[e]};this.eventBus.analytics.publish(Up.audioPluginStats(t)),this.clean(e)}}},{key:"failure",value:function(e,t){this.pluginAdded[e]&&(this.eventBus.analytics.publish(Up.audioPluginFailure(e,this.pluginSampleRate[e],t)),this.clean(e))}},{key:"initWithTime",value:function(e,t){return Ef(this,null,Bt().mark((function n(){var r,i;return Bt().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!this.initTime[e]){n.next=3;break}return Lf.i(this.TAG,"Plugin Already loaded ".concat(e,", time it took: ").concat(this.initTime[e])),n.abrupt("return");case 3:return n.prev=3,n.next=6,this.timeInMs(t);case 6:r=n.sent,Lf.i(this.TAG,"Time taken for Plugin ".concat(e," initialization : ").concat(r)),n.next=14;break;case 10:throw n.prev=10,n.t0=n.catch(3),i=vp.InitFailed(ep.AUDIO_PLUGINS,"failed during initialization of plugin".concat(n.t0.message||n.t0)),Lf.e(this.TAG,i),this.failure(e,i),i;case 14:r&&(this.initTime[e]=r);case 15:case"end":return n.stop()}}),n,this,[[3,10]])})))}},{key:"timeInMs",value:function(e){return Ef(this,null,Bt().mark((function t(){var n;return Bt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=Date.now(),t.next=3,e();case 3:return t.abrupt("return",Math.floor(Date.now()-n));case 4:case"end":return t.stop()}}),t)})))}},{key:"clean",value:function(e){delete this.addedTimestamps[e],delete this.initTime[e],delete this.pluginAdded[e],delete this.pluginSampleRate[e]}}]),e}(),Gp=function(){function e(t,n){et(this,e),this.TAG="[AudioPluginsManager]",this.pluginAddInProgress=!1,this.hmsTrack=t,this.pluginsMap=new Map,this.analytics=new Bp(n),this.createAudioContext()}return nt(e,[{key:"getPlugins",value:function(){return Array.from(this.pluginsMap.keys())}},{key:"addPlugin",value:function(e){return Ef(this,null,Bt().mark((function t(){var n,r,i;return Bt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=null==(n=e.getName)?void 0:n.call(e)){t.next=4;break}return Lf.w("no name provided by the plugin"),t.abrupt("return");case 4:if(!this.pluginAddInProgress){t.next=7;break}throw i=vp.AddAlreadyInProgress(ep.AUDIO_PLUGINS,"Add Plugin is already in Progress"),this.analytics.added(r,this.audioContext.sampleRate),this.analytics.failure(r,i),Lf.w("can't add another plugin when previous add is in progress"),i;case 7:return this.pluginAddInProgress=!0,t.prev=8,t.next=11,this.addPluginInternal(e);case 11:return t.prev=11,this.pluginAddInProgress=!1,t.finish(11);case 14:case"end":return t.stop()}}),t,this,[[8,,11,14]])})))}},{key:"addPluginInternal",value:function(e){return Ef(this,null,Bt().mark((function t(){var n,r,i=this;return Bt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=null==(n=e.getName)?void 0:n.call(e),!this.pluginsMap.get(r)){t.next=4;break}return Lf.w(this.TAG,"plugin - ".concat(r," already added.")),t.abrupt("return");case 4:return t.next=6,this.validateAndThrow(r,e);case 6:if(t.prev=6,0!==this.pluginsMap.size){t.next=12;break}return t.next=10,this.initAudioNodes();case 10:t.next=13;break;case 12:this.prevAudioNode&&this.prevAudioNode.disconnect();case 13:return this.analytics.added(r,this.audioContext.sampleRate),t.next=16,this.analytics.initWithTime(r,(function(){return Ef(i,null,Bt().mark((function t(){return Bt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e.init());case 1:case"end":return t.stop()}}),t)})))}));case 16:return this.pluginsMap.set(r,e),t.next=19,this.processPlugin(e);case 19:return t.next=21,this.connectToDestination();case 21:t.next=26;break;case 23:throw t.prev=23,t.t0=t.catch(6),Lf.e(this.TAG,"failed to add plugin",t.t0),t.t0;case 26:case"end":return t.stop()}}),t,this,[[6,23]])})))}},{key:"validatePlugin",value:function(e){return e.checkSupport(this.audioContext)}},{key:"validateAndThrow",value:function(e,t){return Ef(this,null,Bt().mark((function n(){var r,i,a;return Bt().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!(r=this.validatePlugin(t)).isSupported){n.next=5;break}Lf.i(this.TAG,"plugin is supported,- ".concat(t.getName())),n.next=19;break;case 5:if(this.analytics.added(e,this.audioContext.sampleRate),r.errType!==Op.PLATFORM_NOT_SUPPORTED){n.next=13;break}return i=vp.PlatformNotSupported(ep.AUDIO_PLUGINS,"platform not supported, see docs"),this.analytics.failure(e,i),n.next=10,this.cleanup();case 10:throw i;case 13:if(r.errType!==Op.DEVICE_NOT_SUPPORTED){n.next=19;break}return a=vp.DeviceNotSupported(ep.AUDIO_PLUGINS,"audio device not supported, see docs"),this.analytics.failure(e,a),n.next=18,this.cleanup();case 18:throw a;case 19:case"end":return n.stop()}}),n,this)})))}},{key:"removePlugin",value:function(e){return Ef(this,null,Bt().mark((function t(){return Bt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.removePluginInternal(e);case 2:if(0!==this.pluginsMap.size){t.next=10;break}return t.next=5,this.cleanup();case 5:return Lf.i(this.TAG,"No plugins left, stopping plugins loop"),t.next=8,this.hmsTrack.setProcessedTrack(void 0);case 8:t.next=12;break;case 10:return t.next=12,this.reprocessPlugins();case 12:case"end":return t.stop()}}),t,this)})))}},{key:"cleanup",value:function(){return Ef(this,null,Bt().mark((function e(){var t,n,r,i,a,s;return Bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=Ut(this.pluginsMap.values()),e.prev=1,i.s();case 3:if((a=i.n()).done){e.next=9;break}return s=a.value,e.next=7,this.removePluginInternal(s);case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),i.e(e.t0);case 14:return e.prev=14,i.f(),e.finish(14);case 17:return e.next=19,this.hmsTrack.setProcessedTrack(void 0);case 19:null==(t=this.sourceNode)||t.disconnect(),null==(n=this.prevAudioNode)||n.disconnect(),null==(r=this.outputTrack)||r.stop(),this.sourceNode=void 0,this.destinationNode=void 0,this.prevAudioNode=void 0,this.outputTrack=void 0;case 26:case"end":return e.stop()}}),e,this,[[1,11,14,17]])})))}},{key:"closeContext",value:function(){return Ef(this,null,Bt().mark((function e(){var t;return Bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null==(t=this.audioContext)||t.close(),this.audioContext=void 0;case 1:case"end":return e.stop()}}),e,this)})))}},{key:"reprocessPlugins",value:function(){return Ef(this,null,Bt().mark((function e(){var t,n,r,i;return Bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==this.pluginsMap.size&&this.sourceNode){e.next=2;break}return e.abrupt("return");case 2:return t=Array.from(this.pluginsMap.values()),e.next=5,this.cleanup();case 5:return e.next=7,this.initAudioNodes();case 7:n=0,r=t;case 8:if(!(n<r.length)){e.next=15;break}return i=r[n],e.next=12,this.addPlugin(i);case 12:n++,e.next=8;break;case 15:case"end":return e.stop()}}),e,this)})))}},{key:"initAudioNodes",value:function(){return Ef(this,null,Bt().mark((function e(){var t;return Bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.audioContext){e.next=12;break}if(this.sourceNode||(t=new MediaStream([this.hmsTrack.nativeTrack]),this.sourceNode=this.audioContext.createMediaStreamSource(t)),this.destinationNode){e.next=12;break}return this.destinationNode=this.audioContext.createMediaStreamDestination(),this.outputTrack=this.destinationNode.stream.getAudioTracks()[0],e.prev=4,e.next=7,this.hmsTrack.setProcessedTrack(this.outputTrack);case 7:e.next=12;break;case 9:throw e.prev=9,e.t0=e.catch(4),Lf.e(this.TAG,"error in setting processed track",e.t0),e.t0;case 12:case"end":return e.stop()}}),e,this,[[4,9]])})))}},{key:"processPlugin",value:function(e){return Ef(this,null,Bt().mark((function t(){var n,r;return Bt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.processAudioTrack(this.audioContext,this.prevAudioNode||this.sourceNode);case 3:n=t.sent,this.prevAudioNode&&this.prevAudioNode.connect(n),this.prevAudioNode=n,t.next=13;break;case 7:return t.prev=7,t.t0=t.catch(0),r=e.getName(),Lf.e(this.TAG,"error in processing plugin ".concat(r),t.t0),t.next=13,this.removePluginInternal(e);case 13:case"end":return t.stop()}}),t,this,[[0,7]])})))}},{key:"connectToDestination",value:function(){return Ef(this,null,Bt().mark((function e(){return Bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{this.prevAudioNode&&this.destinationNode&&this.prevAudioNode.context===this.destinationNode.context&&this.prevAudioNode.connect(this.destinationNode)}catch(t){Lf.e(this.TAG,"error in connecting to destination node",t)}case 1:case"end":return e.stop()}}),e,this)})))}},{key:"removePluginInternal",value:function(e){return Ef(this,null,Bt().mark((function t(){var n,r;return Bt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=null==(n=e.getName)?void 0:n.call(e),this.pluginsMap.get(r)){t.next=4;break}return Lf.w(this.TAG,"plugin - ".concat(r," not found to remove.")),t.abrupt("return");case 4:Lf.i(this.TAG,"removing plugin ".concat(r)),this.pluginsMap.delete(r),e.stop(),this.analytics.removed(r);case 5:case"end":return t.stop()}}),t,this)})))}},{key:"createAudioContext",value:function(){this.audioContext||(-1!==navigator.userAgent.indexOf("Firefox")?this.audioContext=new AudioContext:this.audioContext=new AudioContext({sampleRate:48e3}))}}]),e}();function Vp(e){return Ef(this,null,Bt().mark((function t(){return Bt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,navigator.mediaDevices.getUserMedia({audio:!!e&&e.toConstraints()});case 3:return t.abrupt("return",t.sent.getAudioTracks()[0]);case 6:throw t.prev=6,t.t0=t.catch(0),yp(t.t0,ip.AUDIO);case 9:case"end":return t.stop()}}),t,null,[[0,6]])})))}function Hp(e){return Ef(this,null,Bt().mark((function t(){return Bt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,navigator.mediaDevices.getUserMedia({video:!!e&&e.toConstraints()});case 3:return t.abrupt("return",t.sent.getVideoTracks()[0]);case 6:throw t.prev=6,t.t0=t.catch(0),yp(t.t0,ip.VIDEO);case 9:case"end":return t.stop()}}),t,null,[[0,6]])})))}function zp(e){return"canvas"in e||"MediaStreamAudioDestinationNode"===e.label||""===e.label}var Wp=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1/0;et(this,e),this.capacity=t,this.storage=[]}return nt(e,[{key:"size",value:function(){return this.storage.length}},{key:"toList",value:function(){return this.storage.slice(0)}},{key:"enqueue",value:function(e){this.size()===this.capacity&&this.dequeue(),this.storage.push(e)}},{key:"dequeue",value:function(){return this.storage.shift()}},{key:"aggregate",value:function(e){return e(this.storage)}}]),e}();function Kp(e){if(e<0)throw Error("`ms` should be a positive integer");return new Promise((function(t){return setTimeout(t,e)}))}var qp=function(){function e(t,n,r){var i=this;et(this,e),this.track=t,this.audioLevelEvent=n,this.silenceEvent=r,this.TAG="[TrackAudioLevelMonitor]",this.audioLevel=0,this.isMonitored=!1,this.interval=100,this.historyInterval=700,this.history=new Wp(this.historyInterval/this.interval),this.detectSilence=function(){return Ef(i,null,Bt().mark((function e(){var t,n,r;return Bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=30,n=10,r=0;case 1:if(!this.isMonitored){e.next=14;break}if(!this.track.enabled){e.next=10;break}if(!this.isSilentThisInstant()){e.next=9;break}if(!(++r>n)){e.next=7;break}return this.silenceEvent.publish({track:this.track}),e.abrupt("break",14);case 7:e.next=10;break;case 9:return e.abrupt("break",14);case 10:return e.next=12,Kp(t);case 12:e.next=1;break;case 14:case"end":return e.stop()}}),e,this)})))};try{var a=new MediaStream([this.track.nativeTrack]);this.analyserNode=this.createAnalyserNodeForStream(a)}catch(a){Lf.w(this.TAG,"Unable to initialize AudioContext",a)}}return nt(e,[{key:"start",value:function(){var e=this;this.stop(),this.isMonitored=!0,Lf.d(this.TAG,"Starting track Monitor","".concat(this.track)),this.loop().then((function(){return Lf.d(e.TAG,"Stopping track Monitor","".concat(e.track))}))}},{key:"stop",value:function(){this.analyserNode?(this.sendAudioLevel(0),this.isMonitored=!1):Lf.d(this.TAG,"AudioContext not initialized")}},{key:"loop",value:function(){return Ef(this,null,Bt().mark((function e(){return Bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isMonitored){e.next=6;break}return this.sendAudioLevel(this.getMaxAudioLevelOverPeriod()),e.next=4,Kp(this.interval);case 4:e.next=0;break;case 6:case"end":return e.stop()}}),e,this)})))}},{key:"sendAudioLevel",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(e=e>35?e:0,Math.abs(this.audioLevel-e)>5){this.audioLevel=e;var t={track:this.track,audioLevel:this.audioLevel};this.audioLevelEvent.publish(t)}}},{key:"getMaxAudioLevelOverPeriod",value:function(){if(this.analyserNode){var e=this.calculateAudioLevel();return void 0!==e&&this.history.enqueue(e),this.history.aggregate((function(e){return Math.max.apply(Math,te(e))}))}Lf.d(this.TAG,"AudioContext not initialized")}},{key:"calculateAudioLevel",value:function(){if(this.analyserNode){var e=new Uint8Array(this.analyserNode.fftSize);this.analyserNode.getByteTimeDomainData(e);var t,n=.009,r=n,i=Ut(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;r=Math.max(r,(a-128)/128)}}catch(o){i.e(o)}finally{i.f()}var s=(Math.log(n)-Math.log(r))/Math.log(n);return Math.ceil(Math.min(Math.max(100*s,0),100))}Lf.d(this.TAG,"AudioContext not initialized")}},{key:"isSilentThisInstant",value:function(){if(this.analyserNode){var e=new Uint8Array(this.analyserNode.fftSize);return this.analyserNode.getByteTimeDomainData(e),!e.some((function(e){return 128!==e&&0!==e}))}Lf.d(this.TAG,"AudioContext not initialized")}},{key:"createAnalyserNodeForStream",value:function(e){var t=new AudioContext,n=t.createAnalyser();return t.createMediaStreamSource(e).connect(n),n}}]),e}();function Yp(e,t){return function(n){return n in e&&e[n]!==t[n]}}var Jp,Qp,Xp=function(e){it(n,e);var t=ut(n);function n(e,r,i,a){var s,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:(new Ep).build();return et(this,n),(s=t.call(this,e,r,i)).eventBus=a,s.TAG="[HMSLocalAudioTrack]",s.handleVisibilityChange=function(){return Ef(ot(s),null,Bt().mark((function e(){return Bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0="visible"===document.visibilityState,!e.t0){e.next=4;break}return e.next=4,this.replaceTrackWith(this.settings);case 4:case"end":return e.stop()}}),e,this)})))},s.handleSettingsChange=function(e){return Ef(ot(s),null,Bt().mark((function t(){var n,r;return Bt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=this.stream,r=Yp(e,this.settings),t.t0=r("maxBitrate")&&e.maxBitrate,!t.t0){t.next=5;break}return t.next=5,n.setMaxBitrate(e.maxBitrate,this);case 5:if(t.t1=r("advanced"),!t.t1){t.next=9;break}return t.next=9,this.replaceTrackWith(e);case 9:case"end":return t.stop()}}),t,this)})))},s.handleDeviceChange=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return Ef(ot(s),null,Bt().mark((function n(){return Bt().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.t0=Yp(e,this.settings)("deviceId"),!n.t0){n.next=5;break}return n.next=4,this.replaceTrackWith(e);case 4:t||Fp.updateSelection("audioInput",{deviceId:e.deviceId,groupId:this.nativeTrack.getSettings().groupId});case 5:case"end":return n.stop()}}),n,this)})))},e.tracks.push(ot(s)),s.settings=o,o.deviceId!==r.getSettings().deviceId&&!zp(r)&&(s.settings=s.buildNewSettings({deviceId:r.getSettings().deviceId})),s.pluginsManager=new Gp(ot(s),a),s.setFirstTrackId(r.id),Pf()&&If&&document.addEventListener("visibilitychange",s.handleVisibilityChange),s}return nt(n,[{key:"replaceTrackWith",value:function(e){return Ef(this,null,Bt().mark((function t(){var n,r,i,a,s;return Bt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=this.nativeTrack,r=this.enabled,i=Boolean(this.audioLevelMonitor),null==n||n.stop(),t.next=4,Vp(e);case 4:return(a=t.sent).enabled=r,s=this.stream,t.next=9,s.replaceSenderTrack(n,this.processedTrack||a);case 9:return t.next=11,s.replaceStreamTrack(n,a);case 11:return this.nativeTrack=a,i&&this.initAudioLevelMonitor(),t.prev=13,t.next=16,this.pluginsManager.reprocessPlugins();case 16:t.next=21;break;case 18:t.prev=18,t.t0=t.catch(13),this.eventBus.audioPluginFailed.publish(t.t0);case 21:case"end":return t.stop()}}),t,this,[[13,18]])})))}},{key:"setEnabled",value:function(e){var t=this,r=function(e){return Ft(at(n.prototype),e,t)};return Ef(this,null,Bt().mark((function t(){return Bt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=e!==this.enabled,!t.t0){t.next=11;break}if(t.t1=e&&zp(this.nativeTrack),!t.t1){t.next=6;break}return t.next=6,this.replaceTrackWith(this.settings);case 6:return t.next=8,r("setEnabled").call(this,e);case 8:e&&(this.settings=this.buildNewSettings({deviceId:this.nativeTrack.getSettings().deviceId})),this.eventBus.localAudioEnabled.publish({enabled:e,track:this}),this.stream.trackUpdate(this);case 11:case"end":return t.stop()}}),t,this)})))}},{key:"isPublishedTrackId",value:function(e){return this.publishedTrackId===e}},{key:"setSettings",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return Ef(this,null,Bt().mark((function n(){var r;return Bt().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=this.buildNewSettings(e),n.next=3,this.handleDeviceChange(r,t);case 3:if(!zp(this.nativeTrack)){n.next=6;break}return this.settings=r,n.abrupt("return");case 6:return n.next=8,this.handleSettingsChange(r);case 8:this.settings=r;case 9:case"end":return n.stop()}}),n,this)})))}},{key:"getPlugins",value:function(){return this.pluginsManager.getPlugins()}},{key:"addPlugin",value:function(e){return Ef(this,null,Bt().mark((function t(){return Bt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.pluginsManager.addPlugin(e));case 1:case"end":return t.stop()}}),t,this)})))}},{key:"removePlugin",value:function(e){return Ef(this,null,Bt().mark((function t(){return Bt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.pluginsManager.removePlugin(e));case 1:case"end":return t.stop()}}),t,this)})))}},{key:"validatePlugin",value:function(e){return this.pluginsManager.validatePlugin(e)}},{key:"setProcessedTrack",value:function(e){return Ef(this,null,Bt().mark((function t(){return Bt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e){t.next=7;break}if(t.t0=this.processedTrack,!t.t0){t.next=5;break}return t.next=5,this.stream.replaceSenderTrack(this.processedTrack,this.nativeTrack);case 5:return this.processedTrack=void 0,t.abrupt("return");case 7:if(t.t1=e!==this.processedTrack,!t.t1){t.next=17;break}if(!this.processedTrack){t.next=14;break}return t.next=12,this.stream.replaceSenderTrack(this.processedTrack,e);case 12:t.next=16;break;case 14:return t.next=16,this.stream.replaceSenderTrack(this.nativeTrack,e);case 16:this.processedTrack=e;case 17:case"end":return t.stop()}}),t,this)})))}},{key:"initAudioLevelMonitor",value:function(){this.audioLevelMonitor&&this.destroyAudioLevelMonitor(),Lf.d(this.TAG,"Monitor Audio Level for",this,this.getMediaTrackSettings().deviceId),this.audioLevelMonitor=new qp(this,this.eventBus.trackAudioLevelUpdate,this.eventBus.localAudioSilence),this.audioLevelMonitor.start(),this.audioLevelMonitor.detectSilence()}},{key:"destroyAudioLevelMonitor",value:function(){var e;null==(e=this.audioLevelMonitor)||e.stop(),this.audioLevelMonitor=void 0}},{key:"cleanup",value:function(){var e=this,t=function(t){return Ft(at(n.prototype),t,e)};return Ef(this,null,Bt().mark((function e(){var n;return Bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t("cleanup").call(this),e.next=3,this.pluginsManager.cleanup();case 3:return e.next=5,this.pluginsManager.closeContext();case 5:null==(n=this.processedTrack)||n.stop(),this.destroyAudioLevelMonitor(),Pf()&&If&&document.removeEventListener("visibilitychange",this.handleVisibilityChange);case 8:case"end":return e.stop()}}),e,this)})))}},{key:"getTrackIDBeingSent",value:function(){return this.processedTrack?this.processedTrack.id:this.nativeTrack.id}},{key:"getTrackBeingSent",value:function(){return this.processedTrack||this.nativeTrack}},{key:"buildNewSettings",value:function(e){var t=xf(xf({},this.settings),e),n=t.volume,r=t.codec,i=t.maxBitrate,a=t.deviceId,s=t.advanced;return new _p(n,r,i,a,s)}}]),n}(Mp),Zp=function(e){it(n,e);var t=ut(n);function n(){return et(this,n),t.apply(this,arguments)}return nt(n,[{key:"setEnabled",value:function(e){var t=this,r=function(e){return Ft(at(n.prototype),e,t)};return Ef(this,null,Bt().mark((function t(){return Bt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=e!==this.enabled,!t.t0){t.next=6;break}return t.next=4,r("setEnabled").call(this,e);case 4:return t.next=6,this.subscribeToAudio(e);case 6:case"end":return t.stop()}}),t,this)})))}}]),n}(Mp),$p=function(e){it(n,e);var t=ut(n);function n(e,r,i){var a;if(et(this,n),(a=t.call(this,e,r,i)).type=Tp.VIDEO,a.sinkCount=0,"video"!==r.kind)throw new Error("Expected 'track' kind = 'video'");return a}return nt(n,[{key:"hasSinks",value:function(){return this.sinkCount>0}},{key:"addSink",value:function(e){this.addSinkInternal(e,this.nativeTrack)}},{key:"removeSink",value:function(e){null!==e.srcObject&&(e.srcObject=null,this.sinkCount>0&&this.sinkCount--)}},{key:"addSinkInternal",value:function(e,t){var n,r=e.srcObject;null!==r&&r instanceof MediaStream&&(null==(n=r.getVideoTracks()[0])?void 0:n.id)===t.id||(e.srcObject=new MediaStream([t]),this.sinkCount++)}}]),n}(Dp);!function(e){e.TRANSFORM="TRANSFORM",e.ANALYZE="ANALYZE"}(Jp||(Jp={})),function(e){e["2D"]="2d",e.WEBGL="webgl",e.WEBGL2="webgl2"}(Qp||(Qp={}));var ev=function(){function e(){et(this,e),this.total=0,this.count=0}return nt(e,[{key:"add",value:function(e){this.count++,this.total+=e}},{key:"getAvg",value:function(){return Math.floor(this.total/this.count)}},{key:"reset",value:function(){this.total=0,this.count=0}}]),e}(),tv=function(){function e(t){et(this,e),this.eventBus=t,this.TAG="[VideoPluginsAnalytics]",this.initTime={},this.preProcessingAvgs=new ev,this.addedTimestamps={},this.processingAvgs={},this.pluginAdded={},this.pluginInputFrameRate={},this.pluginFrameRate={}}return nt(e,[{key:"added",value:function(e,t,n){this.pluginAdded[e]=!0,this.addedTimestamps[e]=Date.now(),this.initTime[e]=0,this.processingAvgs[e]=new ev,this.pluginInputFrameRate[e]=t,this.pluginFrameRate[e]=n||t}},{key:"removed",value:function(e){var t;if(this.pluginAdded[e]){var n={pluginName:e,duration:Math.floor((Date.now()-this.addedTimestamps[e])/1e3),loadTime:this.initTime[e],avgPreProcessingTime:this.preProcessingAvgs.getAvg(),avgProcessingTime:null==(t=this.processingAvgs[e])?void 0:t.getAvg(),inputFrameRate:this.pluginInputFrameRate[e],pluginFrameRate:this.pluginFrameRate[e]};this.eventBus.analytics.publish(Up.stats(n)),this.clean(e)}}},{key:"failure",value:function(e,t){this.pluginAdded[e]&&(this.eventBus.analytics.publish(Up.failure(e,t)),this.clean(e))}},{key:"initWithTime",value:function(e,t){return Ef(this,null,Bt().mark((function n(){var r,i;return Bt().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!this.initTime[e]){n.next=3;break}return Lf.i(this.TAG,"Plugin Already loaded ".concat(e,", time it took: ").concat(this.initTime[e])),n.abrupt("return");case 3:return n.prev=3,n.next=6,this.timeInMs(t);case 6:r=n.sent,Lf.i(this.TAG,"Time taken for Plugin ".concat(e," initialization : ").concat(r)),n.next=14;break;case 10:throw n.prev=10,n.t0=n.catch(3),i=vp.InitFailed(ep.VIDEO_PLUGINS,"failed during initialization of plugin".concat(n.t0.message||n.t0)),Lf.e(this.TAG,i),this.failure(e,i),i;case 14:r&&(this.initTime[e]=r);case 15:case"end":return n.stop()}}),n,this,[[3,10]])})))}},{key:"preProcessWithTime",value:function(e){return Ef(this,null,Bt().mark((function t(){var n;return Bt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.timeInMs(e);case 2:n=t.sent,this.preProcessingAvgs.add(n);case 4:case"end":return t.stop()}}),t,this)})))}},{key:"processWithTime",value:function(e,t){return Ef(this,null,Bt().mark((function n(){var r,i,a;return Bt().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,this.timeInMs(t);case 3:i=n.sent,n.next=10;break;case 6:throw n.prev=6,n.t0=n.catch(0),a=vp.ProcessingFailed(ep.VIDEO_PLUGINS,"Failed during processing of plugin".concat(n.t0.message||n.t0)),Lf.e(this.TAG,a),this.failure(e,a),a;case 10:i&&(null==(r=this.processingAvgs[e])||r.add(i));case 11:case"end":return n.stop()}}),n,this,[[0,6]])})))}},{key:"timeInMs",value:function(e){return Ef(this,null,Bt().mark((function t(){var n;return Bt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=Date.now(),t.next=3,e();case 3:return t.abrupt("return",Math.floor(Date.now()-n));case 4:case"end":return t.stop()}}),t)})))}},{key:"clean",value:function(e){delete this.addedTimestamps[e],delete this.initTime[e],delete this.processingAvgs[e],delete this.pluginAdded[e],delete this.pluginInputFrameRate[e],delete this.pluginFrameRate[e]}}]),e}(),nv=function(){function e(t,n){et(this,e),this.TAG="[VideoPluginsManager]",this.pluginsLoopRunning=!1,this.pluginsLoopState="paused",this.pluginAddInProgress=!1,this.hmsTrack=t,this.pluginsMap=new Map,this.pluginNumFramesToSkip={},this.pluginNumFramesSkipped={},this.analytics=new tv(n),this.canvases=new Array}return nt(e,[{key:"getPlugins",value:function(){return Array.from(this.pluginsMap.keys())}},{key:"addPlugin",value:function(e,t){return Ef(this,null,Bt().mark((function n(){var r,i,a;return Bt().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!this.pluginAddInProgress){n.next=7;break}if((i=null==(r=e.getName)?void 0:r.call(e))&&""!==i){n.next=5;break}return Lf.w("no name provided by the plugin"),n.abrupt("return");case 5:throw a=vp.AddAlreadyInProgress(ep.VIDEO_PLUGINS,"Add Plugin is already in Progress"),this.analytics.failure(i,a),Lf.w("can't add another plugin when previous add is in progress"),a;case 7:return this.pluginAddInProgress=!0,n.prev=8,n.next=11,this.addPluginInternal(e,t);case 11:return n.prev=11,this.pluginAddInProgress=!1,n.finish(11);case 14:case"end":return n.stop()}}),n,this,[[8,,11,14]])})))}},{key:"addPluginInternal",value:function(e,t){return Ef(this,null,Bt().mark((function n(){var r,i,a,s,o,c,u=this;return Bt().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if((a=null==(r=e.getName)?void 0:r.call(e))&&""!==a){n.next=4;break}return Lf.w("no name provided by the plugin"),n.abrupt("return");case 4:if(!this.pluginsMap.has(a)){n.next=7;break}return Lf.w(this.TAG,"plugin - ".concat(e.getName()," already added.")),n.abrupt("return");case 7:return s=this.hmsTrack.getMediaTrackSettings().frameRate||24,o=0,t&&t>0?(Lf.i(this.TAG,"adding plugin ".concat(e.getName()," with framerate ").concat(t)),t<s&&(o=Math.ceil(s/t)-1),this.analytics.added(a,s,t)):(Lf.i(this.TAG,"adding plugin ".concat(e.getName())),this.analytics.added(a,s)),Lf.i(this.TAG,"numFrames to skip processing",o),this.pluginNumFramesToSkip[a]=o,this.pluginNumFramesSkipped[a]=o,this.validateAndThrow(a,e),n.prev=9,n.next=12,this.analytics.initWithTime(a,(function(){return Ef(u,null,Bt().mark((function t(){return Bt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.init();case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})))}));case 12:if(this.pluginsMap.set(a,e),!(this.pluginsMap.size+1>this.canvases.length)){n.next=15;break}for(c=this.canvases.length;c<=this.pluginsMap.size;c++)this.canvases[c]=document.createElement("canvas");case 15:return n.next=17,this.startPluginsLoop(null==(i=e.getContextType)?void 0:i.call(e));case 17:n.next=25;break;case 19:return n.prev=19,n.t0=n.catch(9),Lf.e(this.TAG,"failed to add plugin",n.t0),n.next=24,this.removePlugin(e);case 24:throw n.t0;case 25:case"end":return n.stop()}}),n,this,[[9,19]])})))}},{key:"validatePlugin",value:function(e){return e.checkSupport()}},{key:"validateAndThrow",value:function(e,t){var n,r=this.validatePlugin(t);if(r.isSupported)Lf.i(this.TAG,"plugin is supported,- ".concat(t.getName()));else switch(r.errType){case Op.PLATFORM_NOT_SUPPORTED:throw n=vp.PlatformNotSupported(ep.VIDEO_PLUGINS,"platform not supported, see docs"),this.analytics.failure(e,n),n;case Op.DEVICE_NOT_SUPPORTED:throw n=vp.DeviceNotSupported(ep.VIDEO_PLUGINS,"video device not supported, see docs"),this.analytics.failure(e,n),n}}},{key:"removePlugin",value:function(e){return Ef(this,null,Bt().mark((function t(){var n;return Bt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.getName(),this.pluginsMap.get(n)){t.next=4;break}return Lf.w(this.TAG,"plugin - ".concat(n," not found to remove.")),t.abrupt("return");case 4:if(Lf.i(this.TAG,"removing plugin ".concat(n)),this.removePluginEntry(n),t.t0=0===this.pluginsMap.size,!t.t0){t.next=11;break}return Lf.i(this.TAG,"No plugins left, stopping plugins loop"),t.next=11,this.stopPluginsLoop();case 11:e.stop(),this.analytics.removed(n);case 13:case"end":return t.stop()}}),t,this)})))}},{key:"removePluginEntry",value:function(e){this.pluginsMap.delete(e),this.pluginNumFramesToSkip[e]&&delete this.pluginNumFramesToSkip[e],this.pluginNumFramesSkipped[e]&&delete this.pluginNumFramesSkipped[e]}},{key:"waitForRestart",value:function(){return Ef(this,null,Bt().mark((function e(){return Bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.pluginsLoopRunning||"running"===this.pluginsLoopState){e.next=6;break}case 1:if("paused"!==this.pluginsLoopState){e.next=6;break}return e.next=4,Kp(100);case 4:e.next=1;break;case 6:case"end":return e.stop()}}),e,this)})))}},{key:"cleanup",value:function(){return Ef(this,null,Bt().mark((function e(){var t,n,r,i;return Bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Ut(this.pluginsMap.values()),e.prev=1,n.s();case 3:if((r=n.n()).done){e.next=9;break}return i=r.value,e.next=7,this.removePlugin(i);case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),n.e(e.t0);case 14:return e.prev=14,n.f(),e.finish(14);case 17:null==(t=this.outputTrack)||t.stop();case 18:case"end":return e.stop()}}),e,this,[[1,11,14,17]])})))}},{key:"initElementsAndStream",value:function(e){this.inputCanvas||(this.inputCanvas=document.createElement("canvas")),this.outputCanvas=document.createElement("canvas"),this.inputVideo||(this.inputVideo=document.createElement("video")),this.inputCanvas.getContext("2d"),this.outputCanvas.getContext(e||Qp["2D"]);var t=this.outputCanvas.captureStream();this.outputTrack=t.getVideoTracks()[0]}},{key:"startPluginsLoop",value:function(e){return Ef(this,null,Bt().mark((function t(){var n=this;return Bt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.pluginsLoopRunning){t.next=11;break}return this.initElementsAndStream(e),this.pluginsLoopRunning=!0,t.prev=2,t.next=5,this.hmsTrack.setProcessedTrack(this.outputTrack);case 5:t.next=10;break;case 7:throw t.prev=7,t.t0=t.catch(2),this.pluginsLoopRunning=!1,Lf.e(this.TAG,"error in setting processed track",t.t0),t.t0;case 10:this.pluginsLoop().then((function(){Lf.d(n.TAG,"processLoop stopped")}));case 11:case"end":return t.stop()}}),t,this,[[2,7]])})))}},{key:"stopPluginsLoop",value:function(){return Ef(this,null,Bt().mark((function e(){var t;return Bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.pluginsLoopRunning=!1,e.next=3,this.hmsTrack.setProcessedTrack(void 0);case 3:this.resetCanvases(),null==(t=this.outputTrack)||t.stop(),this.inputVideo&&(this.inputVideo.srcObject=null,this.inputVideo=void 0);case 6:case"end":return e.stop()}}),e,this)})))}},{key:"pluginsLoop",value:function(){return Ef(this,null,Bt().mark((function e(){var t,n,r,i,a=this;return Bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.pluginsLoopRunning){e.next=27;break}if(t=this.hmsTrack.getMediaTrackSettings().frameRate||24,n=Math.floor(1e3/t),this.hmsTrack.enabled&&"ended"!==this.hmsTrack.nativeTrack.readyState){e.next=8;break}return"running"===this.pluginsLoopState&&this.resetCanvases(),this.pluginsLoopState="paused",e.next=7,Kp(n);case 7:return e.abrupt("continue",25);case 8:return r=0,e.prev=9,e.next=12,this.analytics.preProcessWithTime((function(){return Ef(a,null,Bt().mark((function e(){return Bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.doPreProcessing();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})))}));case 12:return i=Date.now(),e.next=15,this.processFramesThroughPlugins();case 15:(r=Math.floor(Date.now()-i))>n&&(r=n),e.next=22;break;case 19:e.prev=19,e.t0=e.catch(9),Lf.e(this.TAG,"error in plugins loop",e.t0);case 22:return this.pluginsLoopState="running",e.next=25,Kp(n-r);case 25:e.next=0;break;case 27:case"end":return e.stop()}}),e,this,[[9,19]])})))}},{key:"doPreProcessing",value:function(){return Ef(this,null,Bt().mark((function e(){return Bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.addTrackToVideo();case 2:return e.next=4,this.updateInputCanvas();case 4:case"end":return e.stop()}}),e,this)})))}},{key:"processFramesThroughPlugins",value:function(){return Ef(this,null,Bt().mark((function e(){var t,n,r,i,a=this;return Bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.canvases[0]=this.inputCanvas,t=0,n=Ut(this.pluginsMap.values()),e.prev=3,i=Bt().mark((function e(){var n,i,s,o,c,u;return Bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.value,i=n.getName(),!n){e.next=39;break}if(e.prev=3,s=a.checkIfSkipRequired(i),n.getPluginType()!==Jp.TRANSFORM){e.next=27;break}if(o=function(e,t){return Ef(a,null,Bt().mark((function r(){return Bt().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,n.processVideoFrame(e,t,s);case 3:r.next=8;break;case 5:r.prev=5,r.t0=r.catch(0),Lf.e(this.TAG,"error in processing plugin ".concat(i),r.t0);case 8:case"end":return r.stop()}}),r,this,[[0,5]])})))},!s){e.next=17;break}if(t!==a.pluginsMap.size-1){e.next=13;break}return e.next=11,o(a.canvases[t],a.outputCanvas);case 11:e.next=15;break;case 13:return e.next=15,o(a.canvases[t],a.canvases[t+1]);case 15:e.next=25;break;case 17:if(c=a.canvases[t],u=a.canvases[t+1],t!==a.pluginsMap.size-1){e.next=23;break}return e.next=21,a.analytics.processWithTime(i,(function(){return Ef(a,null,Bt().mark((function e(){return Bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",o(c,this.outputCanvas));case 1:case"end":return e.stop()}}),e,this)})))}));case 21:e.next=25;break;case 23:return e.next=25,a.analytics.processWithTime(i,(function(){return Ef(a,null,Bt().mark((function e(){return Bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",o(c,u));case 1:case"end":return e.stop()}}),e)})))}));case 25:e.next=31;break;case 27:if(e.t0=n.getPluginType()===Jp.ANALYZE&&!s,!e.t0){e.next=31;break}return e.next=31,a.analytics.processWithTime(i,(function(){return Ef(a,null,Bt().mark((function e(){return Bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.processVideoFrame(this.inputCanvas);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})))}));case 31:e.next=38;break;case 33:return e.prev=33,e.t1=e.catch(3),Lf.e(a.TAG,"error in processing plugin ".concat(i),e.t1),e.next=38,a.removePlugin(n);case 38:t++;case 39:case"end":return e.stop()}}),e,null,[[3,33]])})),n.s();case 6:if((r=n.n()).done){e.next=10;break}return e.delegateYield(i(),"t0",8);case 8:e.next=6;break;case 10:e.next=15;break;case 12:e.prev=12,e.t1=e.catch(3),n.e(e.t1);case 15:return e.prev=15,n.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,this,[[3,12,15,18]])})))}},{key:"addTrackToVideo",value:function(){return Ef(this,null,Bt().mark((function e(){var t,n;return Bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.inputVideo){e.next=2;break}return e.abrupt("return");case 2:if(n=this.inputVideo.srcObject,e.t0=null!==n&&n instanceof MediaStream&&(null==(t=n.getVideoTracks()[0])?void 0:t.id)===this.hmsTrack.nativeTrack.id,e.t0){e.next=11;break}return this.inputVideo.pause(),this.inputVideo.srcObject=new MediaStream([this.hmsTrack.nativeTrack]),this.inputVideo.muted=!0,this.inputVideo.playsInline=!0,e.next=11,this.inputVideo.play();case 11:case"end":return e.stop()}}),e,this)})))}},{key:"updateInputCanvas",value:function(){return Ef(this,null,Bt().mark((function e(){var t,n,r,i,a;return Bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.inputCanvas&&this.inputVideo){e.next=2;break}return e.abrupt("return");case 2:t=this.hmsTrack.getMediaTrackSettings(),n=t.width,r=void 0===n?320:n,i=t.height,a=void 0===i?240:i,this.inputCanvas.height!==a&&(this.inputCanvas.height=a),this.inputCanvas.width!==r&&(this.inputCanvas.width=r),this.inputCanvas.getContext("2d").drawImage(this.inputVideo,0,0,r,a);case 4:case"end":return e.stop()}}),e,this)})))}},{key:"resetCanvases",value:function(){if(this.outputCanvas&&this.inputCanvas){var e=this.inputCanvas.getContext("2d");e&&(e.fillStyle="rgb(0, 0, 0)",e.fillRect(0,0,this.outputCanvas.width,this.outputCanvas.height)),this.canvases=[]}}},{key:"checkIfSkipRequired",value:function(e){var t=!1;return this.pluginNumFramesSkipped[e]<this.pluginNumFramesToSkip[e]?(this.pluginNumFramesSkipped[e]++,t=!0):(t=!1,this.pluginNumFramesSkipped[e]=0),t}}]),e}();function rv(e,t){return function(n){return n in e&&e[n]!==t[n]}}var iv=function(e){it(n,e);var t=ut(n);function n(e,r,i,a){var s,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:(new Sp).build();return et(this,n),(s=t.call(this,e,r,i)).eventBus=a,s._layerDefinitions=[],s.TAG="[LocalVideoTrack]",s.isCurrentTab=!1,s.buildNewSettings=function(e){var t=xf(xf({},s.settings),e),n=t.width,r=t.height,i=t.codec,a=t.maxFramerate,o=t.maxBitrate,c=t.deviceId,u=t.advanced;return new Ap(n,r,i,a,c,u,o)},s.handleSettingsChange=function(e){return Ef(ot(s),null,Bt().mark((function t(){var n,r;return Bt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=this.stream,r=rv(e,this.settings),t.t0=r("maxBitrate")&&e.maxBitrate,!t.t0){t.next=5;break}return t.next=5,n.setMaxBitrate(e.maxBitrate,this);case 5:if(t.t1=r("width")||r("height")||r("advanced"),!t.t1){t.next=9;break}return t.next=9,this.nativeTrack.applyConstraints(e.toConstraints());case 9:case"end":return t.stop()}}),t,this)})))},s.handleDeviceChange=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return Ef(ot(s),null,Bt().mark((function n(){var r;return Bt().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!rv(e,this.settings)("deviceId")||"regular"!==this.source){n.next=9;break}if(!this.enabled){n.next=8;break}return n.next=4,this.replaceTrackWith(e);case 4:return r=n.sent,n.next=7,this.replaceSender(r,this.enabled);case 7:this.nativeTrack=r;case 8:t||Fp.updateSelection("videoInput",{deviceId:e.deviceId,groupId:this.nativeTrack.getSettings().groupId});case 9:case"end":return n.stop()}}),n,this)})))},e.tracks.push(ot(s)),s.settings=o,o.deviceId!==r.getSettings().deviceId&&r.enabled&&(s.settings=s.buildNewSettings({deviceId:r.getSettings().deviceId})),s.pluginsManager=new nv(ot(s),a),s.setFirstTrackId(s.trackId),s}return nt(n,[{key:"setSimulcastDefinitons",value:function(e){this._layerDefinitions=e}},{key:"getSimulcastDefinitions",value:function(){return this._layerDefinitions}},{key:"setEnabled",value:function(e){var t=this,r=function(e){return Ft(at(n.prototype),e,t)};return Ef(this,null,Bt().mark((function t(){var n;return Bt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e===this.enabled){t.next=23;break}if("regular"!==this.source){t.next=19;break}if(!e){t.next=8;break}return t.next=5,this.replaceTrackWith(this.settings);case 5:n=t.sent,t.next=11;break;case 8:return t.next=10,this.replaceTrackWithBlank();case 10:n=t.sent;case 11:return t.next=13,this.replaceSender(n,e);case 13:if(this.nativeTrack=n,t.t0=e,!t.t0){t.next=19;break}return t.next=18,this.pluginsManager.waitForRestart();case 18:this.settings=this.buildNewSettings({deviceId:n.getSettings().deviceId});case 19:return t.next=21,r("setEnabled").call(this,e);case 21:this.eventBus.localVideoEnabled.publish({enabled:e,track:this}),this.stream.trackUpdate(this);case 23:case"end":return t.stop()}}),t,this)})))}},{key:"isPublishedTrackId",value:function(e){return this.publishedTrackId===e}},{key:"addSink",value:function(e){this.addSinkInternal(e,this.processedTrack||this.nativeTrack)}},{key:"setSettings",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return Ef(this,null,Bt().mark((function n(){var r;return Bt().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=this.buildNewSettings(e),n.next=3,this.handleDeviceChange(r,t);case 3:if(this.enabled){n.next=6;break}return this.settings=r,n.abrupt("return");case 6:return n.next=8,this.handleSettingsChange(r);case 8:this.settings=r;case 9:case"end":return n.stop()}}),n,this)})))}},{key:"getPlugins",value:function(){return this.pluginsManager.getPlugins()}},{key:"addPlugin",value:function(e,t){return Ef(this,null,Bt().mark((function n(){return Bt().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",this.pluginsManager.addPlugin(e,t));case 1:case"end":return n.stop()}}),n,this)})))}},{key:"removePlugin",value:function(e){return Ef(this,null,Bt().mark((function t(){return Bt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.pluginsManager.removePlugin(e));case 1:case"end":return t.stop()}}),t,this)})))}},{key:"validatePlugin",value:function(e){return this.pluginsManager.validatePlugin(e)}},{key:"cleanup",value:function(){var e=this,t=function(t){return Ft(at(n.prototype),t,e)};return Ef(this,null,Bt().mark((function e(){var n;return Bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t("cleanup").call(this),e.next=3,this.pluginsManager.cleanup();case 3:null==(n=this.processedTrack)||n.stop();case 4:case"end":return e.stop()}}),e,this)})))}},{key:"cropTo",value:function(e){return Ef(this,null,Bt().mark((function t(){return Bt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e||"screen"!==this.source){t.next=11;break}if(t.prev=1,t.t0=this.nativeTrack.cropTo,!t.t0){t.next=6;break}return t.next=6,this.nativeTrack.cropTo(e);case 6:t.next=11;break;case 8:throw t.prev=8,t.t1=t.catch(1),Lf.e(this.TAG,"failed to crop screenshare capture - ",t.t1),dp.GenericTrack(ep.TRACK,"failed to crop screenshare capture");case 11:case"end":return t.stop()}}),t,this,[[1,8]])})))}},{key:"getCaptureHandle",value:function(){if(this.nativeTrack.getCaptureHandle)return this.nativeTrack.getCaptureHandle()}},{key:"setProcessedTrack",value:function(e){return Ef(this,null,Bt().mark((function t(){return Bt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.nativeTrack.enabled){t.next=3;break}return this.processedTrack=e,t.abrupt("return");case 3:if(e){t.next=10;break}if(t.t0=this.processedTrack,!t.t0){t.next=8;break}return t.next=8,this.stream.replaceSenderTrack(this.processedTrack,this.nativeTrack);case 8:return this.processedTrack=void 0,t.abrupt("return");case 10:if(t.t1=e!==this.processedTrack,!t.t1){t.next=20;break}if(!this.processedTrack){t.next=17;break}return t.next=15,this.stream.replaceSenderTrack(this.processedTrack,e);case 15:t.next=19;break;case 17:return t.next=19,this.stream.replaceSenderTrack(this.nativeTrack,e);case 19:this.processedTrack=e;case 20:case"end":return t.stop()}}),t,this)})))}},{key:"getTrackIDBeingSent",value:function(){return this.getTrackBeingSent().id}},{key:"getTrackBeingSent",value:function(){return this.enabled&&this.processedTrack||this.nativeTrack}},{key:"replaceTrackWith",value:function(e){return Ef(this,null,Bt().mark((function t(){var n,r;return Bt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return null==(n=this.nativeTrack)||n.stop(),t.next=4,Hp(e);case 4:return r=t.sent,t.abrupt("return",("default"===this.settings.deviceId&&(this.settings=this.buildNewSettings({deviceId:this.nativeTrack.getSettings().deviceId})),r));case 6:case"end":return t.stop()}}),t,this)})))}},{key:"replaceTrackWithBlank",value:function(){return Ef(this,null,Bt().mark((function e(){var t;return Bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.nativeTrack,e.abrupt("return",(null==t||t.stop(),Nv.getEmptyVideoTrack(t)));case 2:case"end":return e.stop()}}),e,this)})))}},{key:"replaceSender",value:function(e,t){return Ef(this,null,Bt().mark((function n(){var r;return Bt().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r=this.stream,!t){n.next=6;break}return n.next=4,r.replaceSenderTrack(this.nativeTrack,this.processedTrack||e);case 4:n.next=8;break;case 6:return n.next=8,r.replaceSenderTrack(this.processedTrack||this.nativeTrack,e);case 8:return n.next=10,r.replaceStreamTrack(this.nativeTrack,e);case 10:case"end":return n.stop()}}),n,this)})))}}]),n}($p),av="renegotiation-callback-id",sv="ion-sfu",ov="SUBSCRIBE_ICE_CONNECTION_CALLBACK_ID",cv="device-change",uv="local-audio-enabled",lv="local-video-enabled",dv="stats-update",hv="track-degraded",fv="track-restored",pv="track-audio-level-update",vv="local-audio-silence",mv="analytics",gv="audio-plugin-failed",yv="policy-change",bv="local-role-update",kv="audio-track-update",xv="audio-track-added",wv="audio-track-removed",Tv="autoplay-error",Ev="leave",_v=function(e){it(n,e);var t=ut(n);function n(){var e;return et(this,n),(e=t.apply(this,arguments))._degraded=!1,e._degradedAt=null,e._layerDefinitions=[],e.history=new Sv,e.preferredLayer=cp.HIGH,e}return nt(n,[{key:"degraded",get:function(){return this._degraded}},{key:"degradedAt",get:function(){return this._degradedAt}},{key:"setEnabled",value:function(e){var t=this,r=function(e){return Ft(at(n.prototype),e,t)};return Ef(this,null,Bt().mark((function t(){return Bt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=e!==this.enabled,!t.t0){t.next=4;break}return t.next=4,r("setEnabled").call(this,e);case 4:case"end":return t.stop()}}),t,this)})))}},{key:"setPreferredLayer",value:function(e){return Ef(this,null,Bt().mark((function t(){return Bt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e!==cp.NONE){t.next=3;break}return Lf.w("layer ".concat(cp.NONE," will be ignored")),t.abrupt("return");case 3:if(this.preferredLayer=e,!this.shouldSendVideoLayer(e,"preferLayer")){t.next=10;break}if(this.hasSinks()){t.next=7;break}return Lf.d("[Remote Track] ".concat(this.logIdentifier),"Track does not have any sink, saving ".concat(e,", source=").concat(this.source)),t.abrupt("return");case 7:return t.next=9,this.requestLayer(e,"preferLayer");case 9:this.pushInHistory("uiPreferLayer-".concat(e));case 10:case"end":return t.stop()}}),t,this)})))}},{key:"getSimulcastLayer",value:function(){return this.stream.getSimulcastLayer()}},{key:"getLayer",value:function(){return this.stream.getVideoLayer()}},{key:"getPreferredLayer",value:function(){return this.preferredLayer}},{key:"addSink",value:function(e){var t=this,r=function(e){return Ft(at(n.prototype),e,t)};return Ef(this,null,Bt().mark((function t(){return Bt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r("addSink").call(this,e),t.next=3,this.updateLayer("addSink");case 3:this.pushInHistory("uiSetLayer-high");case 4:case"end":return t.stop()}}),t,this)})))}},{key:"removeSink",value:function(e){var t=this,r=function(e){return Ft(at(n.prototype),e,t)};return Ef(this,null,Bt().mark((function t(){return Bt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r("removeSink").call(this,e),t.next=3,this.updateLayer("removeSink");case 3:this._degraded=!1,this.pushInHistory("uiSetLayer-none");case 5:case"end":return t.stop()}}),t,this)})))}},{key:"getSimulcastDefinitions",value:function(){return te(this._layerDefinitions)}},{key:"setSimulcastDefinitons",value:function(e){this._layerDefinitions=e}},{key:"setLayerFromServer",value:function(e){var t=e.subscriber_degraded;this._degraded=t&&e.current_layer===cp.NONE,this._degradedAt=t?new Date:this._degradedAt;var n=e.current_layer;return Lf.d("[Remote Track] ".concat(this.logIdentifier," ").concat(this.stream.id," - layer update from sfu"),"currLayer=".concat(e.current_layer,", preferredLayer=").concat(e.expected_layer),"sub_degraded=".concat(e.subscriber_degraded),"pub_degraded=".concat(e.publisher_degraded),"isDegraded=".concat(t)),this.stream.setVideoLayerLocally(n,this.logIdentifier,"setLayerFromServer"),this.pushInHistory("sfuLayerUpdate-".concat(n)),t}},{key:"setDegradedFromSdk",value:function(e){this._degraded=e,this._degradedAt=e?new Date:this._degradedAt,this.updateLayer("sdkDegradation"),this.pushInHistory(e?"sdkDegraded-none":"sdkRecovered-high")}},{key:"updateLayer",value:function(e){return Ef(this,null,Bt().mark((function t(){var n;return Bt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=this.degraded||!this.hasSinks()?cp.NONE:this.preferredLayer,t.t0=!this.shouldSendVideoLayer(n,e),t.t0){t.next=5;break}return t.next=5,this.requestLayer(n,e);case 5:case"end":return t.stop()}}),t,this)})))}},{key:"pushInHistory",value:function(e){}},{key:"requestLayer",value:function(e,t){return Ef(this,null,Bt().mark((function n(){var r;return Bt().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,this.stream.setVideoLayer(e,this.trackId,this.logIdentifier,t);case 3:return r=n.sent,n.abrupt("return",(Lf.d("[Remote Track] ".concat(this.logIdentifier),"Requested layer ".concat(e,", source=").concat(this.source)),r));case 7:throw n.prev=7,n.t0=n.catch(0),Lf.d("[Remote Track] ".concat(this.logIdentifier),"Failed to set layer ".concat(e,", source=").concat(this.source,", ").concat(n.t0.message)),n.t0;case 10:case"end":return n.stop()}}),n,this,[[0,7]])})))}},{key:"shouldSendVideoLayer",value:function(e,t){var n=this.getLayer();return!(!this.degraded||e!==cp.NONE)||(n!==e||(Lf.d("[Remote Track] ".concat(this.logIdentifier),"Not sending update, already on layer ".concat(e,", source=").concat(t)),!1))}}]),n}($p),Sv=function(){function e(){et(this,e),this.history=[]}return nt(e,[{key:"push",value:function(e){e.time=(new Date).toISOString().split("T")[1],this.history.push(e)}}]),e}(),Av=function(e){it(n,e);var t=ut(n);function n(){var e;return et(this,n),(e=t.apply(this,arguments)).TAG="[HMSLocalStream]",e.connection=null,e}return nt(n,[{key:"setConnection",value:function(e){this.connection=e}},{key:"addTransceiver",value:function(e,t){var n=[];if(e instanceof iv)if(t.length>0)Lf.v(this.TAG,"Simulcast enabled with layers",t),n.push.apply(n,te(t));else{var r={active:this.nativeStream.active};e.settings.maxBitrate&&!Cf&&(r.maxBitrate=e.settings.maxBitrate),n.push(r)}var i=this.connection.addTransceiver(e.getTrackBeingSent(),{streams:[this.nativeStream],direction:"sendonly",sendEncodings:n});return this.setPreferredCodec(i,e.nativeTrack.kind),i}},{key:"setMaxBitrate",value:function(e,t){return Ef(this,null,Bt().mark((function n(){var r;return Bt().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,null==(r=this.connection)?void 0:r.setMaxBitrate(e,t);case 2:case"end":return n.stop()}}),n,this)})))}},{key:"setPreferredCodec",value:function(e,t){}},{key:"replaceTrack",value:function(e,t){return Ef(this,null,Bt().mark((function n(){return Bt().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.replaceSenderTrack(e,t);case 2:e.stop(),this.replaceStreamTrack(e,t);case 4:case"end":return n.stop()}}),n,this)})))}},{key:"replaceStreamTrack",value:function(e,t){this.nativeStream.addTrack(t),this.nativeStream.removeTrack(e)}},{key:"replaceSenderTrack",value:function(e,t){return Ef(this,null,Bt().mark((function n(){var r,i;return Bt().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(void 0!==(i=null==(r=this.connection)?void 0:r.getSenders().find((function(t){return t.track&&t.track.id===e.id})))){n.next=4;break}return Lf.w(this.TAG,"No sender found for trackId=".concat(e.id)),n.abrupt("return");case 4:return n.next=6,i.replaceTrack(t);case 6:case"end":return n.stop()}}),n,this)})))}},{key:"removeSender",value:function(e){var t=this,n=0;this.connection.getSenders().forEach((function(r){var i,a;if((null==(i=r.track)?void 0:i.id)===e.trackId||(null==(a=r.track)?void 0:a.id)===e.getTrackIDBeingSent()){t.connection.removeTrack(r),n+=1;var s=t.tracks.indexOf(e);-1!==s?t.tracks.splice(s,1):Lf.e(t.TAG,"Cannot find ".concat(e.trackId," in locally stored tracks"))}})),1!==n&&Lf.e(this.TAG,"Removed ".concat(n," sender's, expected to remove 1"))}},{key:"trackUpdate",value:function(e){var t;null==(t=this.connection)||t.trackUpdate(e)}}]),n}(Rp);var Cv,Iv,Rv={audioContext:null,getAudioContext:function(){return this.audioContext||(this.audioContext=new AudioContext),this.audioContext},resumeContext:function(){return Ef(this,null,Bt().mark((function e(){return Bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.getAudioContext().resume();case 3:return e.abrupt("return",e.sent);case 6:e.prev=6,e.t0=e.catch(0),Lf.e("AudioContext",e.t0);case 9:case"end":return e.stop()}}),e,this,[[0,6]])})))}},Pv="default",Dv="default",Nv=function(){function e(t,n,r,i,a){et(this,e),this.store=t,this.observer=n,this.deviceManager=r,this.eventBus=i,this.analyticsTimer=a,this.TAG="[LocalTrackManager]",this.setScreenCaptureHandleConfig()}return nt(e,[{key:"getTracksToPublish",value:function(e){return Ef(this,null,Bt().mark((function t(){var n,r,i,a,s,o,c,u,l,d,h;return Bt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=this.getAVTrackSettings(e)){t.next=3;break}return t.abrupt("return",[]);case 3:return r=!!n.audio,i=!!n.video,a=[],t.next=8,this.updateCurrentLocalTrackSettings(n);case 8:if(s=t.sent,o=s.videoTrack,c=s.audioTrack,u=(null==o?void 0:o.stream)||(null==c?void 0:c.stream),l=Boolean(o&&this.store.getTrackById(o.trackId)),d=Boolean(c&&this.store.getTrackById(c.trackId)),!l||!d){t.next=16;break}return t.abrupt("return",[]);case 16:return h={audio:r&&!c&&(!e.isAudioMuted||"empty"),video:i&&!o&&(!e.isVideoMuted||"empty")},this.analyticsTimer.start(Xf.LOCAL_AUDIO_TRACK),this.analyticsTimer.start(Xf.LOCAL_VIDEO_TRACK),t.prev=18,Lf.d(this.TAG,"Init Local Tracks",{fetchTrackOptions:h}),t.next=22,this.getLocalTracks(h,n,u);case 22:a=t.sent,t.next=30;break;case 25:return t.prev=25,t.t0=t.catch(18),t.next=29,this.retryGetLocalTracks(t.t0,n,h,u);case 29:a=t.sent;case 30:return t.abrupt("return",(this.analyticsTimer.end(Xf.LOCAL_AUDIO_TRACK),this.analyticsTimer.end(Xf.LOCAL_VIDEO_TRACK),o&&i&&!l&&a.push(o),c&&r&&!d&&a.push(c),a));case 31:case"end":return t.stop()}}),t,this,[[18,25]])})))}},{key:"getLocalTracks",value:function(){return Ef(this,arguments,Bt().mark((function e(){var t,n,r,i,a=arguments;return Bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:{audio:!0,video:!0},n=a.length>1?a[1]:void 0,r=a.length>2?a[2]:void 0,e.prev=3,e.next=6,this.getNativeLocalTracks(t,n);case 6:return i=e.sent,e.abrupt("return",this.createHMSLocalTracks(i,n,r));case 10:throw e.prev=10,e.t0=e.catch(3),this.eventBus.analytics.publish($f.publish({devices:this.deviceManager.getDevices(),error:e.t0,settings:n})),e.t0;case 13:case"end":return e.stop()}}),e,this,[[3,10]])})))}},{key:"getNativeLocalTracks",value:function(){return Ef(this,arguments,Bt().mark((function e(){var t,n,r,i,a=arguments;return Bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=a.length>0&&void 0!==a[0]?a[0]:{audio:!1,video:!1},n=a.length>1?a[1]:void 0,r=new Ip(!0===t.video?n.video:null,!0===t.audio?n.audio:null,n.simulcast),i=[],e.t0=r.audio||r.video,!e.t0){e.next=13;break}return e.t1=i.push,e.t2=i,e.t3=te,e.next=10,this.getAVTracks(r);case 10:e.t4=e.sent,e.t5=(0,e.t3)(e.t4),e.t1.apply.call(e.t1,e.t2,e.t5);case 13:return i.push.apply(i,te(this.getEmptyTracks(t))),e.abrupt("return",i);case 15:case"end":return e.stop()}}),e,this)})))}},{key:"getLocalScreen",value:function(e){return Ef(this,null,Bt().mark((function t(){var n,r,i,a,s,o,c,u,l,d,h,f,p,v;return Bt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getOrDefaultScreenshareConfig(e);case 2:return r=t.sent,i=this.getScreenshareSettings(r.videoOnly),a={video:wf(xf({},null==i?void 0:i.video.toConstraints(!0)),{displaySurface:r.displaySurface}),preferCurrentTab:r.preferCurrentTab,selfBrowserSurface:r.selfBrowserSurface,surfaceSwitching:r.surfaceSwitching,systemAudio:r.systemAudio},(null==i?void 0:i.audio)&&(delete(s=null==(n=null==i?void 0:i.audio)?void 0:n.toConstraints()).advanced,a.audio=wf(xf({},s),{autoGainControl:!1,noiseSuppression:!1,googAutoGainControl:!1,echoCancellation:!1})),t.prev=6,Lf.d("retrieving screenshare with ",{config:r},{constraints:a}),t.next=10,navigator.mediaDevices.getDisplayMedia(a);case 10:o=t.sent,t.next=18;break;case 13:throw t.prev=13,t.t0=t.catch(6),Lf.w(this.TAG,"error in getting screenshare - ",t.t0),c=yp(t.t0,ip.SCREEN),this.eventBus.analytics.publish($f.publish({error:c,devices:this.deviceManager.getDevices(),settings:new Ip(null==i?void 0:i.video,null==i?void 0:i.audio,!1)})),c;case 18:return u=[],l=new Av(o),d=o.getVideoTracks()[0],(h=new iv(l,d,"screen",this.eventBus,null==i?void 0:i.video)).setSimulcastDefinitons(this.store.getSimulcastDefinitionsForPeer(this.store.getLocalPeer(),"screen")),t.prev=20,f=this.validateCurrentTabCapture(h,r.forceCurrentTab),h.isCurrentTab=f,t.next=25,h.cropTo(r.cropTarget);case 25:t.next=30;break;case 27:throw t.prev=27,t.t1=t.catch(20),o.getTracks().forEach((function(e){return e.stop()})),t.t1;case 30:return u.push(h),(p=o.getAudioTracks()[0])&&(v=new Xp(l,p,"screen",this.eventBus,null==i?void 0:i.audio),u.push(v)),t.abrupt("return",(Lf.v(this.TAG,"getLocalScreen",u),u));case 34:case"end":return t.stop()}}),t,this,[[6,13],[20,27]])})))}},{key:"setScreenCaptureHandleConfig",value:function(e){var t;!(null==(t=navigator.mediaDevices)?void 0:t.setCaptureHandleConfig)||this.isInIframe()||(e=e||{},Object.assign(e,{handle:lf(),exposeOrigin:!1,permittedOrigins:[window.location.origin]}),Lf.d("setting capture handle - ",e.handle),navigator.mediaDevices.setCaptureHandleConfig(e),this.captureHandleIdentifier=e.handle)}},{key:"validateCurrentTabCapture",value:function(e,t){var n=e.getCaptureHandle(),r=!(!this.captureHandleIdentifier||(null==n?void 0:n.handle)!==this.captureHandleIdentifier);if(t&&!r)throw Lf.e(this.TAG,"current tab was not shared with forceCurrentTab as true"),dp.CurrentTabNotShared();return r}},{key:"requestPermissions",value:function(){return Ef(this,null,Bt().mark((function e(){return Bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,navigator.mediaDevices.getUserMedia({audio:!0,video:!0});case 3:e.sent.getTracks().forEach((function(e){return e.stop()})),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),Lf.e(this.TAG,e.t0);case 9:case"end":return e.stop()}}),e,this,[[0,6]])})))}},{key:"getAVTracks",value:function(e){return Ef(this,null,Bt().mark((function t(){var n,r,i,a;return Bt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,navigator.mediaDevices.getUserMedia({audio:!!e.audio&&e.audio.toConstraints(),video:!!e.video&&e.video.toConstraints()});case 3:return n=t.sent,t.abrupt("return",n.getVideoTracks().concat(n.getAudioTracks()));case 7:return t.prev=7,t.t0=t.catch(0),t.next=11,this.deviceManager.init();case 11:throw r=!(this.deviceManager.hasWebcamPermission||!e.video),i=!(this.deviceManager.hasMicrophonePermission||!e.audio),a=this.getErrorType(r,i),yp(t.t0,a);case 13:case"end":return t.stop()}}),t,this,[[0,7]])})))}},{key:"getAVTrackSettings",value:function(e){var t=this.getAudioSettings(e),n=this.getVideoSettings(e);return t||n?(new Cp).video(n).audio(t).build():null}},{key:"isInIframe",value:function(){try{return window.self!==window.top}catch(e){return!0}}},{key:"retryGetLocalTracks",value:function(e,t,n,r){return Ef(this,null,Bt().mark((function i(){var a,s,o,c,u,l,d;return Bt().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(!(e instanceof Zf&&e.action===ep.TRACK)){i.next=37;break}if(this.observer.onFailure(e),a=e.code===rp.TracksErrors.OVER_CONSTRAINED,s=e.message.includes("audio"),o=e.message.includes("video"),!a){i.next=19;break}return c=(new Cp).video(new Ap).audio(new _p).build(),Lf.w(this.TAG,"Fetch AV Tracks failed with overconstrained error",{fetchTrackOptions:n},{error:e}),i.prev=6,i.next=9,this.getLocalTracks(n,c,r);case 9:case 18:case 23:case 34:return i.abrupt("return",i.sent);case 12:return i.prev=12,i.t0=i.catch(6),u=i.t0 instanceof Zf?i.t0.nativeError:i.t0,l=i.t0,"OverconstrainedError"===(null==u?void 0:u.name)&&((d=dp.GenericTrack(ep.TRACK,"Overconstrained error after dropping all constraints")).addNativeError(u),l=d),i.next=18,this.retryGetLocalTracks(l,t,n,r);case 19:return n.audio=s?"empty":n.audio,n.video=o?"empty":n.video,Lf.w(this.TAG,"Fetch AV Tracks failed",{fetchTrackOptions:n},e),i.prev=20,i.next=23,this.getLocalTracks(n,t,r);case 26:return i.prev=26,i.t1=i.catch(20),Lf.w(this.TAG,"Fetch empty tacks failed",i.t1),n.audio=n.audio&&"empty",n.video=n.video&&"empty",this.observer.onFailure(i.t1),i.next=34,this.getLocalTracks(n,t,r);case 35:i.next=38;break;case 37:return i.abrupt("return",(Lf.w(this.TAG,"Fetch AV Tracks failed - unknown exception",e),this.observer.onFailure(e),[]));case 38:case"end":return i.stop()}}),i,this,[[6,12],[20,26]])})))}},{key:"getErrorType",value:function(e,t){return e&&t?ip.AV:e?ip.VIDEO:t?ip.AUDIO:ip.UNKNOWN}},{key:"getEmptyTracks",value:function(t){var n=[];return"empty"===t.audio&&n.push(e.getEmptyAudioTrack()),"empty"===t.video&&n.push(e.getEmptyVideoTrack()),n}},{key:"updateCurrentLocalTrackSettings",value:function(e){return Ef(this,null,Bt().mark((function t(){var n,r,i,a;return Bt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=this.store.getLocalPeerTracks(),r=n.find((function(e){return e.type===Tp.VIDEO&&"regular"===e.source})),i=n.find((function(e){return e.type===Tp.AUDIO&&"regular"===e.source})),a=n.find((function(e){return e.type===Tp.VIDEO&&"screen"===e.source})),t.t0=null==e?void 0:e.video,!t.t0){t.next=5;break}return t.next=5,null==r?void 0:r.setSettings(e.video);case 5:if(t.t1=null==e?void 0:e.audio,!t.t1){t.next=9;break}return t.next=9,null==i?void 0:i.setSettings(e.audio);case 9:if(t.t2=null==e?void 0:e.screen,!t.t2){t.next=13;break}return t.next=13,null==a?void 0:a.setSettings(e.screen);case 13:return t.abrupt("return",{videoTrack:r,audioTrack:i});case 14:case"end":return t.stop()}}),t,this)})))}},{key:"getAudioSettings",value:function(e){var t,n=this.store.getPublishParams();if(!n||!(null==(t=n.allowed)?void 0:t.includes("audio")))return null;var r=this.store.getLocalPeer(),i=null==r?void 0:r.audioTrack,a=(null==i?void 0:i.settings.deviceId)||e.audioInputDeviceId;return(new Ep).codec(n.audio.codec).maxBitrate(n.audio.bitRate).deviceId(a||Pv).build()}},{key:"getVideoSettings",value:function(e){var t,n=this.store.getPublishParams();if(!n||!(null==(t=n.allowed)?void 0:t.includes("video")))return null;var r=this.store.getLocalPeer(),i=null==r?void 0:r.videoTrack,a=(null==i?void 0:i.settings.deviceId)||e.videoDeviceId,s=n.video;return(new Sp).codec(s.codec).maxBitrate(s.bitRate).maxFramerate(s.frameRate).setWidth(s.width).setHeight(s.height).deviceId(a||Dv).build()}},{key:"getScreenshareSettings",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=this.store.getPublishParams();if(!n||!(null==(e=n.allowed)?void 0:e.includes("screen")))return null;var r=n.screen;return{video:(new Sp).maxBitrate(r.bitRate,!1).codec(r.codec).maxFramerate(r.frameRate).setWidth(r.width).setHeight(r.height).build(),audio:t?void 0:(new Ep).build()}}},{key:"getOrDefaultScreenshareConfig",value:function(e){return Ef(this,null,Bt().mark((function t(){var n,r;return Bt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if((r=Object.assign({videoOnly:!1,audioOnly:!1,forceCurrentTab:!1,preferCurrentTab:!1,selfBrowserSurface:"exclude",surfaceSwitching:"include",systemAudio:"exclude",displaySurface:"monitor"},e||{})).forceCurrentTab&&(r.videoOnly=!0,r.preferCurrentTab=!0,r.selfBrowserSurface="include",r.surfaceSwitching="exclude"),r.preferCurrentTab&&(r.selfBrowserSurface="include",r.displaySurface=void 0),t.t0=r.cropElement&&(null==(n=window.CropTarget)?void 0:n.fromElement),!t.t0){t.next=8;break}return t.next=7,window.CropTarget.fromElement(r.cropElement);case 7:r.cropTarget=t.sent;case 8:return t.abrupt("return",r);case 9:case"end":return t.stop()}}),t)})))}},{key:"createHMSLocalTracks",value:function(e,t,n){var r=e.find((function(e){return"video"===e.kind})),i=e.find((function(e){return"audio"===e.kind}));n?e.forEach((function(e){return null==n?void 0:n.nativeStream.addTrack(e)})):n=new Av(new MediaStream(e));var a=[];if(i&&(null==t?void 0:t.audio)){var s=new Xp(n,i,"regular",this.eventBus,t.audio);a.push(s)}if(r&&(null==t?void 0:t.video)){var o=new iv(n,r,"regular",this.eventBus,t.video);o.setSimulcastDefinitons(this.store.getSimulcastDefinitionsForPeer(this.store.getLocalPeer(),"regular")),a.push(o)}return a}}],[{key:"getEmptyVideoTrack",value:function(e){var t,n,r,i=(null==(t=null==e?void 0:e.getSettings())?void 0:t.width)||320,a=(null==(n=null==e?void 0:e.getSettings())?void 0:n.height)||240;Cv||(null==(r=(Cv=Object.assign(document.createElement("canvas"),{width:i,height:a})).getContext("2d"))||r.fillRect(0,0,i,a));var s=Cv.captureStream(10).getVideoTracks()[0],o=setInterval((function(){if("ended"!==s.readyState){var e=Cv.getContext("2d");if(e){var t=0===e.getImageData(0,0,1,1).data[0]?1:0;e.fillStyle="rgb(".concat(t,", 0, 0)"),e.fillRect(0,0,1,1)}}else clearInterval(o)}),100);return s.onended=function(){clearInterval(o)},s.enabled=!1,s}},{key:"getEmptyAudioTrack",value:function(){var e=Rv.getAudioContext(),t=e.createOscillator(),n=e.createMediaStreamDestination();t.connect(n),t.start();var r=n.stream.getAudioTracks()[0];return r.enabled=!1,r}}]),e}(),Ov=function(){function e(t,n){var r=this;et(this,e),this.eventBus=t,this.listener=n,this.TAG="[NetworkTestManager]",this.controller=new AbortController,this.start=function(e){return Ef(r,null,Bt().mark((function t(){var n,r,i,a,s,o,c,u,l,d,h=this;return Bt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e){t.next=2;break}return t.abrupt("return");case 2:return r=e.url,i=e.timeout,a=e.scoreMap,s=this.controller.signal,o=Date.now(),c=0,u=Kp(i).then((function(){h.controller.abort()})),t.prev=3,t.next=6,fetch("".concat(r,"?").concat(Date.now()),{signal:s});case 6:if(t.t0=n=t.sent.body,null!=t.t0){t.next=11;break}t.t1=void 0,t.next=12;break;case 11:t.t1=n.getReader();case 12:if(l=t.t1){t.next=15;break}throw Error("unable to process request");case 15:return d=function(){return Ef(h,null,Bt().mark((function e(){var t,n,r,i;return Bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!l){e.next=17;break}e.prev=1,t=!1;case 3:if(t){e.next=12;break}return e.next=6,l.read();case 6:n=e.sent,r=n.value,i=n.done,t=i,r&&(c+=r.byteLength,this.sendScore({scoreMap:a,downloadedSize:c,startTime:o}));case 10:e.next=3;break;case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(1),Lf.e(this.TAG,e.t0);case 17:case"end":return e.stop()}}),e,this,[[1,14]])})))},t.abrupt("return",Promise.race([d(),u]).then((function(){h.sendScore({scoreMap:a,downloadedSize:c,startTime:o,finished:!0})})).catch((function(e){Lf.e(h.TAG,e),h.updateScoreToListener(0),h.eventBus.analytics.publish($f.previewNetworkQuality({error:e.message}))})));case 19:t.prev=19,t.t2=t.catch(3),Lf.e(this.TAG,t.t2),"AbortError"!==t.t2.name&&(this.updateScoreToListener(0),this.eventBus.analytics.publish($f.previewNetworkQuality({error:t.t2.message})));case 22:case"end":return t.stop()}}),t,this,[[3,19]])})))},this.stop=function(){r.controller.signal.aborted||r.controller.abort()},this.sendScore=function(e){var t=e.scoreMap,n=e.downloadedSize,i=e.startTime,a=e.finished,s=void 0!==a&&a,o=n/1024/((Date.now()-i)/1e3)*8,c=-1;for(var u in t){var l=t[u];o>=l.low&&(!l.high||o<=l.high)&&(c=Number(u))}r.updateScoreToListener(c),s&&r.eventBus.analytics.publish($f.previewNetworkQuality({score:c,downLink:o.toFixed(2)}))}}return nt(e,[{key:"updateScoreToListener",value:function(e){var t,n;e!==this.score&&(this.score=e,null==(n=null==(t=this.listener)?void 0:t.onNetworkQuality)||n.call(t,e))}}]),e}(),Lv=function(){function e(t,n,r,i,a){var s=this;et(this,e),this.store=t,this.transport=n,this.publish=r,this.removeAuxiliaryTrack=i,this.listener=a,this.handleLocalPeerRoleUpdate=function(e){return Ef(s,[e],Bt().mark((function e(t){var n,r,i,a,s,o,c,u,l,d,h,f,p,v,m,g,y;return Bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.oldRole,r=t.newRole,l=this.store.getLocalPeer()){e.next=4;break}return e.abrupt("return");case 4:return d=new Set(n.publishParams.allowed),h=new Set(r.publishParams.allowed),f=this.removeTrack(d,h,"video"),p=this.hasSimulcastDifference(null==(i=n.publishParams.simulcast)?void 0:i.video,null==(a=r.publishParams.simulcast)?void 0:a.video),v=this.removeTrack(d,h,"audio"),m=this.removeTrack(d,h,"screen"),g=this.hasSimulcastDifference(null==(s=n.publishParams.simulcast)?void 0:s.screen,null==(o=r.publishParams.simulcast)?void 0:o.screen),e.next=7,this.removeAudioTrack(v);case 7:return e.next=9,this.removeVideoTracks(f||p);case 9:return e.next=11,this.removeScreenTracks(m||g);case 11:return this.store.setPublishParams(r.publishParams),y=(null==(c=this.store.getConfig())?void 0:c.settings)||{isAudioMuted:!0,isVideoMuted:!0,audioInputDeviceId:"default",videoDeviceId:"default",audioOutputDeviceId:"default"},e.next=15,this.publish(wf(xf({},y),{isAudioMuted:!0,isVideoMuted:!0}));case 15:null==(u=this.listener)||u.onPeerUpdate(sp.ROLE_UPDATED,l);case 16:case"end":return e.stop()}}),e,this)})))}}return nt(e,[{key:"removeVideoTracks",value:function(e){return Ef(this,null,Bt().mark((function t(){var n,r;return Bt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e){t.next=2;break}return t.abrupt("return");case 2:if(r=this.store.getLocalPeer(),t.t0=null==r?void 0:r.videoTrack,!t.t0){t.next=9;break}return t.next=7,this.transport.unpublish([r.videoTrack]);case 7:null==(n=this.listener)||n.onTrackUpdate(op.TRACK_REMOVED,r.videoTrack,r),r.videoTrack=void 0;case 9:return t.next=11,this.removeAuxTracks((function(e){return"screen"!==e.source&&"video"===e.type}));case 11:case"end":return t.stop()}}),t,this)})))}},{key:"removeAudioTrack",value:function(e){return Ef(this,null,Bt().mark((function t(){var n,r;return Bt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e){t.next=2;break}return t.abrupt("return");case 2:if(r=this.store.getLocalPeer(),t.t0=null==r?void 0:r.audioTrack,!t.t0){t.next=9;break}return t.next=7,this.transport.unpublish([r.audioTrack]);case 7:null==(n=this.listener)||n.onTrackUpdate(op.TRACK_REMOVED,r.audioTrack,r),r.audioTrack=void 0;case 9:return t.next=11,this.removeAuxTracks((function(e){return"screen"!==e.source&&"audio"===e.type}));case 11:case"end":return t.stop()}}),t,this)})))}},{key:"removeScreenTracks",value:function(e){return Ef(this,null,Bt().mark((function t(){return Bt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=!e,t.t0){t.next=4;break}return t.next=4,this.removeAuxTracks((function(e){return"screen"===e.source}));case 4:case"end":return t.stop()}}),t,this)})))}},{key:"removeAuxTracks",value:function(e){return Ef(this,null,Bt().mark((function t(){var n,r,i,a,s;return Bt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(null==(n=this.store.getLocalPeer())?void 0:n.auxiliaryTracks)){t.next=22;break}r=te(n.auxiliaryTracks),i=Ut(r),t.prev=4,i.s();case 6:if((a=i.n()).done){t.next=14;break}if(s=a.value,t.t0=e(s),!t.t0){t.next=12;break}return t.next=12,this.removeAuxiliaryTrack(s.trackId);case 12:t.next=6;break;case 14:t.next=19;break;case 16:t.prev=16,t.t1=t.catch(4),i.e(t.t1);case 19:return t.prev=19,i.f(),t.finish(19);case 22:case"end":return t.stop()}}),t,this,[[4,16,19,22]])})))}},{key:"removeTrack",value:function(e,t,n){return e.has(n)&&!t.has(n)}},{key:"hasSimulcastDifference",value:function(e,t){var n,r;return!(!e&&!t)&&(null==(n=null==e?void 0:e.layers)?void 0:n.length)!==(null==(r=null==t?void 0:t.layers)?void 0:r.length)}}]),e}(),Mv=function(){function e(t){et(this,e),this.store=t,this.primitiveComparator=function(e,t){return e===t?0:Number(e)-Number(t)},this.stringComparator=function(e,t){return e===t?0:e<t?-1:1}}return nt(e,[{key:"getPeerComparators",value:function(){var e=this;return{videoEnabled:function(t,n){var r,i;return e.primitiveComparator(Boolean(null==(r=t.videoTrack)?void 0:r.enabled),Boolean(null==(i=n.videoTrack)?void 0:i.enabled))},audioEnabled:function(t,n){var r,i;return e.primitiveComparator(Boolean(null==(r=t.audioTrack)?void 0:r.enabled),Boolean(null==(i=n.audioTrack)?void 0:i.enabled))},screenShare:function(t,n){return e.primitiveComparator(t.auxiliaryTracks.some((function(e){return"screen"===e.source})),n.auxiliaryTracks.some((function(e){return"screen"===e.source})))},audioLevel:function(t,n){var r,i;return e.primitiveComparator((null==(r=e.store.getSpeakers().find((function(e){return e.peer&&e.peer.peerId===(null==t?void 0:t.peerId)})))?void 0:r.audioLevel)||-1,(null==(i=e.store.getSpeakers().find((function(e){return e.peer&&e.peer.peerId===(null==n?void 0:n.peerId)})))?void 0:i.audioLevel)||-1)},rolePriority:function(t,n){var r,i;return e.primitiveComparator((null==(r=n.role)?void 0:r.priority)||0,(null==(i=t.role)?void 0:i.priority)||0)}}}},{key:"getTrackComparators",value:function(){var e=this;return{video:function(t,n){return e.primitiveComparator(t.type===Tp.VIDEO,n.type===Tp.VIDEO)},audio:function(t,n){return e.primitiveComparator(t.type===Tp.AUDIO,n.type===Tp.AUDIO)},enabled:function(t,n){return e.primitiveComparator(Boolean(t.enabled),Boolean(n.enabled))},peerAudioLevel:function(t,n){var r=e.store.getPeerByTrackId(t.trackId),i=e.store.getPeerByTrackId(n.trackId);return e.getPeerComparators().audioLevel(r,i)},audioLevel:function(t,n){var r,i;return e.primitiveComparator((null==(r=e.store.getSpeakers().find((function(e){return e.track.trackId===t.trackId})))?void 0:r.audioLevel)||0,(null==(i=e.store.getSpeakers().find((function(e){return e.track.trackId===n.trackId})))?void 0:i.audioLevel)||0)},screenShare:function(t,n){return e.primitiveComparator("screen"===t.source,"screen"===n.source)},rolePriority:function(t,n){var r,i,a,s;return e.primitiveComparator((null==(i=null==(r=e.store.getPeerByTrackId(n.trackId))?void 0:r.role)?void 0:i.priority)||0,(null==(s=null==(a=e.store.getPeerByTrackId(t.trackId))?void 0:a.role)?void 0:s.priority)||0)}}}}]),e}(),jv=function(){function e(){et(this,e),this.TAG="[HTTPAnalyticsTransport]",this.failedEvents=new Sf("client-events"),this.isConnected=!0,this.env=null}return nt(e,[{key:"setEnv",value:function(e){this.env=e,this.flushFailedEvents()}},{key:"sendEvent",value:function(e){var t=this;if(this.env){var n={event:e.name,payload:e.properties,event_id:String(e.timestamp),peer:e.metadata.peer,timestamp:e.timestamp,device_id:e.device_id},r=this.env===uf.PROD?"https://event.100ms.live/v2/client/report":"https://event-nonprod.100ms.live/v2/client/report";fetch(r,{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e.metadata.token),user_agent_v2:e.metadata.userAgent},body:JSON.stringify(n)}).then((function(n){if(401!==n.status){if(200!==n.status)throw Error(n.statusText);t.removeFromStorage(e)}else t.removeFromStorage(e)})).catch((function(n){Lf.v(t.TAG,"Failed to send event",n,e),t.addEventToStorage(e)}))}else this.addEventToStorage(e)}},{key:"flushFailedEvents",value:function(){var e=this,t=this.failedEvents.get();null==t||t.forEach((function(t){return e.sendEvent(t)}))}},{key:"addEventToStorage",value:function(e){var t=this.failedEvents.get()||[];t.find((function(t){return t.timestamp===e.timestamp}))||(100===t.length&&t.shift(),t.push(e),this.failedEvents.set(t))}},{key:"removeFromStorage",value:function(e){var t=this.failedEvents.get()||[],n=t.findIndex((function(t){return t.timestamp===e.timestamp}));n>-1&&(t.splice(n,1),this.failedEvents.set(t))}}]),e}(),Fv=new jv,Uv=function(){function e(){et(this,e),this.comparator=new Mv(this),this.knownRoles={},this.peers={},this.tracks={},this.peerTrackStates={},this.speakers=[],this.roleDetailsArrived=!1,this.env=uf.PROD,this.simulcastEnabled=!1,this.userAgent=Wf(this.env)}return nt(e,[{key:"getConfig",value:function(){return this.config}},{key:"setSimulcastEnabled",value:function(e){this.simulcastEnabled=e}},{key:"getEnv",value:function(){return this.env}},{key:"getPublishParams",value:function(){return this.publishParams}},{key:"getComparator",value:function(){return this.comparator}},{key:"getRoom",value:function(){return this.room}},{key:"getPolicyForRole",value:function(e){return this.knownRoles[e]}},{key:"getKnownRoles",value:function(){return this.knownRoles}},{key:"getLocalPeer",value:function(){if(this.localPeerId&&this.peers[this.localPeerId])return this.peers[this.localPeerId]}},{key:"getRemotePeers",value:function(){return Object.values(this.peers).filter((function(e){return!e.isLocal}))}},{key:"getPeers",value:function(){return Object.values(this.peers)}},{key:"getPeerById",value:function(e){if(this.peers[e])return this.peers[e]}},{key:"getTracksMap",value:function(){return this.tracks}},{key:"getTracks",value:function(){return Object.values(this.tracks)}},{key:"getVideoTracks",value:function(){return this.getTracks().filter((function(e){return e.type===Tp.VIDEO}))}},{key:"getRemoteVideoTracks",value:function(){return this.getTracks().filter((function(e){return e instanceof _v}))}},{key:"getAudioTracks",value:function(){return this.getTracks().filter((function(e){return e.type===Tp.AUDIO}))}},{key:"getPeerTracks",value:function(e){var t=e?this.peers[e]:void 0,n=[];return(null==t?void 0:t.videoTrack)&&n.push(t.videoTrack),(null==t?void 0:t.audioTrack)&&n.push(t.audioTrack),n.concat((null==t?void 0:t.auxiliaryTracks)||[])}},{key:"getLocalPeerTracks",value:function(){return this.getPeerTracks(this.localPeerId)}},{key:"getTrackById",value:function(e){var t,n,r=this.tracks[e];if(r)return r;var i=this.getLocalPeer();if(i){if(null==(t=i.audioTrack)?void 0:t.isPublishedTrackId(e))return i.audioTrack;if(null==(n=i.videoTrack)?void 0:n.isPublishedTrackId(e))return i.videoTrack}}},{key:"getPeerByTrackId",value:function(e){var t=this.tracks[e];return t.peerId?this.peers[t.peerId]:void 0}},{key:"getSpeakers",value:function(){return this.speakers}},{key:"getSpeakerPeers",value:function(){return this.speakers.map((function(e){return e.peer}))}},{key:"getUserAgent",value:function(){return this.userAgent}},{key:"createAndSetUserAgent",value:function(e){this.userAgent=Wf(this.env,e)}},{key:"setRoom",value:function(e){this.room=e}},{key:"setKnownRoles",value:function(e){this.knownRoles=e,this.roleDetailsArrived=!0,this.updatePeersPolicy()}},{key:"hasRoleDetailsArrived",value:function(){return this.roleDetailsArrived}},{key:"setConfig",value:function(e){var t,n,r;if(Fp.rememberDevices(Boolean(e.rememberDeviceSelection)),e.rememberDeviceSelection){var i=Fp.getSelection();i&&(e.settings||(e.settings={}),(null==(t=i.audioInput)?void 0:t.deviceId)&&(e.settings.audioInputDeviceId=e.settings.audioInputDeviceId||i.audioInput.deviceId),(null==(n=i.audioOutput)?void 0:n.deviceId)&&(e.settings.audioOutputDeviceId=e.settings.audioOutputDeviceId||i.audioOutput.deviceId),(null==(r=i.videoInput)?void 0:r.deviceId)&&(e.settings.videoDeviceId=e.settings.videoDeviceId||i.videoInput.deviceId))}this.config=e,this.setEnv()}},{key:"setPublishParams",value:function(e){var t;this.publishParams=e,this.simulcastEnabled&&(this.videoLayers=this.convertSimulcastLayers(null==(t=e.simulcast)?void 0:t.video))}},{key:"addPeer",value:function(e){this.peers[e.peerId]=e,e.isLocal&&(this.localPeerId=e.peerId)}},{key:"addTrack",value:function(e){this.tracks[e.trackId]=e}},{key:"getTrackState",value:function(e){return this.peerTrackStates[e]}},{key:"setTrackState",value:function(e){this.peerTrackStates[e.trackInfo.track_id]=e}},{key:"removePeer",value:function(e){this.localPeerId===e&&(this.localPeerId=void 0),delete this.peers[e]}},{key:"removeTrack",value:function(e){delete this.tracks[e]}},{key:"updateSpeakers",value:function(e){this.speakers=e}},{key:"updateAudioOutputVolume",value:function(e){return Ef(this,null,Bt().mark((function t(){var n,r,i;return Bt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=Ut(this.getAudioTracks()),t.prev=1,n.s();case 3:if((r=n.n()).done){t.next=9;break}return i=r.value,t.next=7,i.setVolume(e);case 7:t.next=3;break;case 9:t.next=14;break;case 11:t.prev=11,t.t0=t.catch(1),n.e(t.t0);case 14:return t.prev=14,n.f(),t.finish(14);case 17:case"end":return t.stop()}}),t,this,[[1,11,14,17]])})))}},{key:"updateAudioOutputDevice",value:function(e){return Ef(this,null,Bt().mark((function t(){var n;return Bt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=[],this.getAudioTracks().forEach((function(t){n.push(t.setOutputDevice(e))})),t.next=4,Promise.all(n);case 4:case"end":return t.stop()}}),t,this)})))}},{key:"getSubscribeDegradationParams",value:function(){var e,t,n=null==(t=null==(e=this.getLocalPeer())?void 0:e.role)?void 0:t.subscribeParams.subscribeDegradation;if(n&&Object.keys(n).length>0)return n}},{key:"getSimulcastLayers",value:function(e){var t;return this.simulcastEnabled?"screen"===e?[]:(null==(t=this.videoLayers)?void 0:t.layers)||[]:[]}},{key:"convertSimulcastLayers",value:function(e){if(e)return wf(xf({},e),{layers:(e.layers||[]).map((function(e){return wf(xf({},e),{maxBitrate:1e3*e.maxBitrate})}))})}},{key:"getSimulcastDefinitionsForPeer",value:function(e,t){var n,r,i;if([!e||!e.role,"screen"===t,!this.simulcastEnabled].some((function(e){return!!e})))return[];var a,s,o,c=this.getPolicyForRole(e.role.name).publishParams;return"regular"===t?(a=null==(n=c.simulcast)?void 0:n.video,s=c.video.width,o=c.video.height):"screen"===t&&(a=null==(r=c.simulcast)?void 0:r.screen,s=c.screen.width,o=c.screen.height),(null==(i=null==a?void 0:a.layers)?void 0:i.map((function(e){return{layer:wp[e.rid],resolution:{width:s/e.scaleResolutionDownBy,height:o/e.scaleResolutionDownBy}}})))||[]}},{key:"cleanUp",value:function(){var e,t=Ut(this.getTracks());try{for(t.s();!(e=t.n()).done;){e.value.cleanup()}}catch(n){t.e(n)}finally{t.f()}this.room=void 0,this.config=void 0,this.localPeerId=void 0,this.roleDetailsArrived=!1}},{key:"setErrorListener",value:function(e){this.errorListener=e}},{key:"updatePeersPolicy",value:function(){var e=this;this.getPeers().forEach((function(t){var n;t.role?t.role=e.getPolicyForRole(t.role.name):null==(n=e.errorListener)||n.onError(pp.InvalidRole(ep.VALIDATION,""))}))}},{key:"setEnv",value:function(){var e,t=(null==(e=this.config)?void 0:e.initEndpoint).split("https://")[1],n=uf.PROD;t.startsWith(uf.PROD)?n=uf.PROD:t.startsWith(uf.QA)?n=uf.QA:t.startsWith(uf.DEV)&&(n=uf.DEV),this.env=n,Fv.setEnv(n)}}]),e}(),Bv=function(){function e(t){et(this,e),this.store=t,this.bufferSize=100,this.TAG="[AnalyticsEventsService]",this.transport=null,this.pendingEvents=[],this.level=qf.INFO}return nt(e,[{key:"setTransport",value:function(e){this.transport=e}},{key:"reset",value:function(){this.transport=null,this.pendingEvents=[]}},{key:"queue",value:function(e){if(e.level>=this.level&&(this.pendingEvents.push(e),this.pendingEvents.length>this.bufferSize)){var t=this.pendingEvents.shift();Lf.d(this.TAG,"Max buffer size reached","Removed event to accommodate new events",t)}return this}},{key:"flushFailedClientEvents",value:function(){Fv.flushFailedEvents()}},{key:"flush",value:function(){var e;try{for(;this.pendingEvents.length>0;){var t=this.pendingEvents.shift();t&&(t.metadata.peer.peer_id=null==(e=this.store.getLocalPeer())?void 0:e.peerId,t.metadata.userAgent=this.store.getUserAgent(),this.transport&&this.transport.transportProvider.isConnected?this.transport.sendEvent(t):this.sendClientEventOnHTTP(t))}}catch(n){Lf.w(this.TAG,"Flush Failed",n)}}},{key:"sendClientEventOnHTTP",value:function(e){var t,n,r,i,a=this.store.getRoom(),s=this.store.getLocalPeer();e.metadata.token=null==(t=this.store.getConfig())?void 0:t.authToken,e.metadata.peer={session_id:a.sessionId,room_id:a.id,room_name:a.name,template_id:a.templateId,joined_at:null==(n=a.joinedAt)?void 0:n.getTime(),session_started_at:null==(r=a.startedAt)?void 0:r.getTime(),role:null==(i=null==s?void 0:s.role)?void 0:i.name,user_name:null==s?void 0:s.name,user_data:null==s?void 0:s.metadata},Fv.sendEvent(e)}}]),e}(),Gv={autoplayFailed:void 0,initialized:!1,autoplayCheckPromise:void 0},Vv=function(){function e(t,n,r){var i=this;et(this,e),this.store=t,this.deviceManager=n,this.eventBus=r,this.autoPausedTracks=new Set,this.TAG="[AudioSinkManager]:",this.volume=100,this.state=xf({},Gv),this.handleAudioPaused=function(e){var t,n=null==(t=e.target.srcObject)?void 0:t.getAudioTracks()[0];if(null==n?void 0:n.enabled){Lf.d(i.TAG,"Audio Paused",e.target.id);var r=i.store.getTrackById(e.target.id);r&&("mobile"===Af.getDevice().type?setTimeout((function(){return Ef(i,null,Bt().mark((function e(){return Bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=r,!e.t0){e.next=4;break}return e.next=4,this.playAudioFor(r);case 4:case"end":return e.stop()}}),e,this)})))}),500):i.autoPausedTracks.add(r))}},this.handleTrackUpdate=function(e){var t,n=e.track,r=e.enabled;(null==(t=window.HMS)?void 0:t.AUDIO_SINK)&&(r?(n.addSink(),i.playAudioFor(n)):n.removeSink()),Lf.d(i.TAG,"Track updated","".concat(n))},this.handleTrackAdd=function(e){return Ef(i,[e],Bt().mark((function e(t){var n,r,i,a,s,o;return Bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.track,r=t.peer,(o=document.createElement("audio")).style.display="none",o.id=n.trackId,o.addEventListener("pause",this.handleAudioPaused),n.setAudioElement(o),n.setVolume(this.volume),Lf.d(this.TAG,"Audio track added","".concat(n)),null==(i=this.audioSink)||i.append(o),e.t0=this.outputDevice,!e.t0){e.next=13;break}return e.next=13,n.setOutputDevice(this.outputDevice);case 13:return(null==(a=window.HMS)?void 0:a.AUDIO_SINK)?n.enabled?n.addSink():n.removeSink():o.srcObject=new MediaStream([n.nativeTrack]),null==(s=this.listener)||s.onTrackUpdate(op.TRACK_ADDED,n,r),e.next=17,this.handleAutoplayError(n);case 17:case"end":return e.stop()}}),e,this)})))},this.handleAutoplayError=function(e){return Ef(i,null,Bt().mark((function t(){var n=this;return Bt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=void 0===this.state.autoplayFailed,!t.t0){t.next=5;break}return this.state.autoplayCheckPromise||(this.state.autoplayCheckPromise=new Promise((function(t){n.playAudioFor(e).then(t)}))),t.next=5,this.state.autoplayCheckPromise;case 5:if(!this.state.autoplayFailed){t.next=8;break}return this.autoPausedTracks.add(e),t.abrupt("return");case 8:return t.next=10,this.playAudioFor(e);case 10:case"end":return t.stop()}}),t,this)})))},this.handleAudioDeviceChange=function(e){e.error||!e.selection||"video"===e.type||i.unpauseAudioTracks()},this.handleTrackRemove=function(e){i.autoPausedTracks.delete(e);var t=document.getElementById(e.trackId);t&&(t.removeEventListener("pause",i.handleAudioPaused),t.srcObject=null,t.remove(),e.setAudioElement(null)),i.audioSink&&0===i.audioSink.childElementCount&&(i.state.autoplayCheckPromise=void 0,i.state.autoplayFailed=void 0),Lf.d(i.TAG,"Audio track removed","".concat(e))},this.unpauseAudioTracks=function(){return Ef(i,null,Bt().mark((function e(){var t,n=this;return Bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],this.autoPausedTracks.forEach((function(e){t.push(n.playAudioFor(e))})),e.next=4,Promise.all(t);case 4:case"end":return e.stop()}}),e,this)})))},this.eventBus.audioTrackAdded.subscribe(this.handleTrackAdd),this.eventBus.audioTrackRemoved.subscribe(this.handleTrackRemove),this.eventBus.audioTrackUpdate.subscribe(this.handleTrackUpdate),this.eventBus.deviceChange.subscribe(this.handleAudioDeviceChange)}return nt(e,[{key:"setListener",value:function(e){this.listener=e}},{key:"outputDevice",get:function(){return this.deviceManager.outputDevice}},{key:"getVolume",value:function(){return this.volume}},{key:"setVolume",value:function(e){return Ef(this,null,Bt().mark((function t(){return Bt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.store.updateAudioOutputVolume(e);case 2:this.volume=e;case 3:case"end":return t.stop()}}),t,this)})))}},{key:"unblockAutoplay",value:function(){return Ef(this,null,Bt().mark((function e(){return Bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.autoPausedTracks.size>0&&this.unpauseAudioTracks();case 1:case"end":return e.stop()}}),e,this)})))}},{key:"init",value:function(e){if(!this.state.initialized){this.state.initialized=!0;var t=document.createElement("div");t.id="HMS-SDK-audio-sink-".concat(lf()),(e&&document.getElementById(e)||document.body).append(t),this.audioSink=t}}},{key:"cleanUp",value:function(){var e;null==(e=this.audioSink)||e.remove(),this.audioSink=void 0,this.eventBus.audioTrackAdded.unsubscribe(this.handleTrackAdd),this.eventBus.audioTrackRemoved.unsubscribe(this.handleTrackRemove),this.eventBus.audioTrackUpdate.unsubscribe(this.handleTrackUpdate),this.eventBus.deviceChange.unsubscribe(this.handleAudioDeviceChange),this.autoPausedTracks=new Set,this.state=xf({},Gv)}},{key:"playAudioFor",value:function(e){return Ef(this,null,Bt().mark((function t(){var n,r,i;return Bt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.getAudioElement()){t.next=4;break}return Lf.w(this.TAG,"No audio element found on track",e.trackId),t.abrupt("return");case 4:return t.prev=4,t.next=7,n.play();case 7:this.state.autoplayFailed=!1,this.autoPausedTracks.delete(e),Lf.d(this.TAG,"Played track","".concat(e)),t.next=17;break;case 12:t.prev=12,t.t0=t.catch(4),this.autoPausedTracks.add(e),Lf.e(this.TAG,"Failed to play track","".concat(e),t.t0),r=t.t0,this.state.autoplayFailed||"NotAllowedError"!==r.name||(this.state.autoplayFailed=!0,(i=dp.AutoplayBlocked(ep.AUTOPLAY,"")).addNativeError(r),this.eventBus.analytics.publish($f.autoplayError()),this.eventBus.autoplayError.publish(i));case 17:case"end":return t.stop()}}),t,this,[[4,12]])})))}}]),e}(),Hv=function(){function e(t,n){var r=this;et(this,e),this.store=t,this.eventBus=n,this.audioInput=[],this.audioOutput=[],this.videoInput=[],this.hasWebcamPermission=!1,this.hasMicrophonePermission=!1,this.TAG="[Device Manager]:",this.initialized=!1,this.videoInputChanged=!1,this.audioInputChanged=!1,this.updateOutputDevice=function(e){return Ef(r,null,Bt().mark((function t(){var n;return Bt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=this.audioOutput.find((function(t){return t.deviceId===e})),t.t0=n,!t.t0){t.next=7;break}return this.outputDevice=n,t.next=6,this.store.updateAudioOutputDevice(n);case 6:Fp.updateSelection("audioOutput",{deviceId:n.deviceId,groupId:n.groupId});case 7:return t.abrupt("return",n);case 8:case"end":return t.stop()}}),t,this)})))},this.getCurrentSelection=function(){var e,t,n=r.store.getLocalPeer(),i=r.createIdentifier(null==(e=null==n?void 0:n.audioTrack)?void 0:e.getMediaTrackSettings()),a=r.createIdentifier(null==(t=null==n?void 0:n.videoTrack)?void 0:t.getMediaTrackSettings()),s=r.audioInput.find((function(e){return r.createIdentifier(e)===i})),o=r.videoInput.find((function(e){return r.createIdentifier(e)===a}));return{audioInput:s,videoInput:o,audioOutput:r.outputDevice}},this.computeChange=function(e,t){return e.length!==t.length||t.some((function(t){return!e.includes(r.createIdentifier(t))}))},this.enumerateDevices=function(){return Ef(r,null,Bt().mark((function e(){var t,n,r,i=this;return Bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,navigator.mediaDevices.enumerateDevices();case 3:t=e.sent,n=this.videoInput.map(this.createIdentifier),r=this.audioInput.map(this.createIdentifier),this.audioInput=[],this.audioOutput=[],this.videoInput=[],t.forEach((function(e){"audioinput"===e.kind&&e.label?(i.hasMicrophonePermission=!0,i.audioInput.push(e)):"audiooutput"===e.kind?i.audioOutput.push(e):"videoinput"===e.kind&&e.label&&(i.hasWebcamPermission=!0,i.videoInput.push(e))})),this.videoInputChanged=this.computeChange(n,this.videoInput),this.audioInputChanged=this.computeChange(r,this.audioInput),Fp.setDevices({videoInput:te(this.videoInput),audioInput:te(this.audioInput),audioOutput:te(this.audioOutput)}),this.logDevices("Enumerate Devices"),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),Lf.e(this.TAG,"Failed enumerating devices",e.t0);case 12:case"end":return e.stop()}}),e,this,[[0,9]])})))},this.handleDeviceChange=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:300;return function(){for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];clearTimeout(t),t=void 0;var s=this;t=setTimeout((function(){e.apply(s,i)}),n)}}((function(){return Ef(r,null,Bt().mark((function e(){var t;return Bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.enumerateDevices();case 2:return this.logDevices("After Device Change"),t=this.store.getLocalPeer(),e.next=6,this.setOutputDevice(!0);case 6:return e.next=8,this.handleAudioInputDeviceChange(null==t?void 0:t.audioTrack);case 8:return e.next=10,this.handleVideoInputDeviceChange(null==t?void 0:t.videoTrack);case 10:this.eventBus.analytics.publish($f.deviceChange({selection:this.getCurrentSelection(),type:"change",devices:this.getDevices()}));case 11:case"end":return e.stop()}}),e,this)})))}),500).bind(this),this.handleAudioInputDeviceChange=function(e){return Ef(r,null,Bt().mark((function t(){var n,r,i;return Bt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e){t.next=3;break}return Lf.d(this.TAG,"No Audio track on local peer"),t.abrupt("return");case 3:if(this.audioInputChanged){t.next=6;break}return Lf.d(this.TAG,"No Change in AudioInput Device"),t.abrupt("return");case 6:if((n=this.getNewAudioInputDevice())&&n.deviceId){t.next=10;break}return this.eventBus.analytics.publish($f.deviceChange({selection:{audioInput:n},error:new Error("Audio device not found"),devices:this.getDevices(),type:"audioInput"})),Lf.w(this.TAG,"Audio device not found"),t.abrupt("return");case 10:return r=e.settings,i=(new Ep).codec(r.codec).maxBitrate(r.maxBitrate).deviceId(n.deviceId).build(),t.prev=11,t.next=14,e.setSettings(i,!0);case 14:this.eventBus.deviceChange.publish({devices:this.getDevices(),selection:n,type:"audioInput"}),this.logDevices("Audio Device Change Success"),t.next=21;break;case 18:t.prev=18,t.t0=t.catch(11),Lf.e(this.TAG,"[Audio Device Change]",t.t0),this.eventBus.analytics.publish($f.deviceChange({selection:{audioInput:n},devices:this.getDevices(),type:"audioInput",error:t.t0})),this.eventBus.deviceChange.publish({error:t.t0,selection:n,type:"audioInput",devices:this.getDevices()});case 21:case"end":return t.stop()}}),t,this,[[11,18]])})))},this.handleVideoInputDeviceChange=function(e){return Ef(r,null,Bt().mark((function t(){var n,r,i;return Bt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e){t.next=3;break}return Lf.d(this.TAG,"No video track on local peer"),t.abrupt("return");case 3:if(this.videoInputChanged){t.next=6;break}return Lf.d(this.TAG,"No Change in VideoInput Device"),t.abrupt("return");case 6:if((n=this.videoInput[0])&&n.deviceId){t.next=10;break}return this.eventBus.analytics.publish($f.deviceChange({selection:{videoInput:n},error:new Error("Video device not found"),devices:this.getDevices(),type:"video"})),Lf.w(this.TAG,"Video device not found"),t.abrupt("return");case 10:return r=e.settings,i=(new Sp).codec(r.codec).maxBitrate(r.maxBitrate).maxFramerate(r.maxFramerate).setWidth(r.width).setHeight(r.height).deviceId(n.deviceId).build(),t.prev=11,t.next=14,e.setSettings(i,!0);case 14:this.eventBus.deviceChange.publish({devices:this.getDevices(),selection:n,type:"video"}),this.logDevices("Video Device Change Success"),t.next=21;break;case 18:t.prev=18,t.t0=t.catch(11),Lf.e(this.TAG,"[Video Device Change]",t.t0),this.eventBus.analytics.publish($f.deviceChange({selection:{videoInput:n},devices:this.getDevices(),type:"video",error:t.t0})),this.eventBus.deviceChange.publish({error:t.t0,type:"video",selection:n,devices:this.getDevices()});case 21:case"end":return t.stop()}}),t,this,[[11,18]])})))};var i=function(e){var t=e.enabled,n=e.track;return t&&"regular"===n.source};this.eventBus.localVideoEnabled.waitFor(i).then((function(){return Ef(r,null,Bt().mark((function e(){return Bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.enumerateDevices();case 2:this.videoInputChanged&&this.eventBus.deviceChange.publish({devices:this.getDevices()});case 3:case"end":return e.stop()}}),e,this)})))})),this.eventBus.localAudioEnabled.waitFor(i).then((function(){return Ef(r,null,Bt().mark((function e(){return Bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.enumerateDevices();case 2:this.audioInputChanged&&this.eventBus.deviceChange.publish({devices:this.getDevices()});case 3:case"end":return e.stop()}}),e,this)})))}))}return nt(e,[{key:"init",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return Ef(this,null,Bt().mark((function t(){return Bt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=this.initialized&&!e,t.t0){t.next=11;break}return!this.initialized&&navigator.mediaDevices.addEventListener("devicechange",this.handleDeviceChange),this.initialized=!0,t.next=6,this.enumerateDevices();case 6:return this.logDevices("Init"),t.next=9,this.setOutputDevice();case 9:this.eventBus.deviceChange.publish({devices:this.getDevices()}),this.eventBus.analytics.publish($f.deviceChange({selection:this.getCurrentSelection(),type:"list",devices:this.getDevices()}));case 11:case"end":return t.stop()}}),t,this)})))}},{key:"getDevices",value:function(){return{audioInput:this.audioInput,audioOutput:this.audioOutput,videoInput:this.videoInput}}},{key:"cleanUp",value:function(){this.initialized=!1,this.audioInput=[],this.audioOutput=[],this.videoInput=[],this.outputDevice=void 0,navigator.mediaDevices.removeEventListener("devicechange",this.handleDeviceChange)}},{key:"createIdentifier",value:function(e){return e?"".concat(e.deviceId).concat(e.groupId):""}},{key:"getNewAudioInputDevice",value:function(){var e=this.audioInput.find((function(e){return"default"===e.deviceId}));return e?this.audioInput.find((function(t){return t.label!==e.label&&e.label.includes(t.label)})):this.audioInput[0]}},{key:"setOutputDevice",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return Ef(this,null,Bt().mark((function t(){var n,r,i=this;return Bt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=this.getNewAudioInputDevice(),r=this.createIdentifier(this.outputDevice),this.outputDevice=this.getAudioOutputDeviceMatchingInput(n),this.outputDevice||(this.outputDevice=this.audioOutput.find((function(e){return i.createIdentifier(e)===r})),this.outputDevice||(this.outputDevice=this.audioOutput.find((function(e){return"default"===e.deviceId}))||this.audioOutput[0])),t.next=5,this.store.updateAudioOutputDevice(this.outputDevice);case 5:e&&r!==this.createIdentifier(this.outputDevice)&&(this.eventBus.analytics.publish($f.deviceChange({selection:{audioOutput:this.outputDevice},devices:this.getDevices(),type:"audioOutput"})),this.eventBus.deviceChange.publish({selection:this.outputDevice,type:"audioOutput",devices:this.getDevices()}));case 6:case"end":return t.stop()}}),t,this)})))}},{key:"getAudioOutputDeviceMatchingInput",value:function(e){var t,n,r=(null==(n=null==(t=this.store.getConfig())?void 0:t.settings)?void 0:n.speakerAutoSelectionBlacklist)||[];if("all"!==r){var i=(null==e?void 0:e.label.toLowerCase())||"";return!r.some((function(e){return i.includes(e.toLowerCase())}))&&(null==e?void 0:e.groupId)?this.audioOutput.find((function(t){return"default"!==e.deviceId&&t.label===e.label})):void 0}}},{key:"logDevices",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";Lf.d(this.TAG,e,JSON.stringify({videoInput:te(this.videoInput),audioInput:te(this.audioInput),audioOutput:te(this.audioOutput),selected:this.getCurrentSelection()},null,4))}}]),e}(),zv=function(){function e(t,n){et(this,e),this.deviceManager=t,this.audioSinkManager=n}return nt(e,[{key:"getVolume",value:function(){return this.audioSinkManager.getVolume()}},{key:"setVolume",value:function(e){if(e<0||e>100)throw Error("Please pass a valid number between 0-100");this.audioSinkManager.setVolume(e)}},{key:"getDevice",value:function(){return this.deviceManager.outputDevice}},{key:"setDevice",value:function(e){return this.deviceManager.updateOutputDevice(e)}},{key:"unblockAutoplay",value:function(){return Ef(this,null,Bt().mark((function e(){return Bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.audioSinkManager.unblockAutoplay();case 2:return e.next=4,Rv.resumeContext();case 4:case"end":return e.stop()}}),e,this)})))}}]),e}(),Wv=nt((function e(t,n){var r=this;et(this,e),this.eventName=t,this.eventEmitter=n,this.publish=function(e){r.eventEmitter.emit(r.eventName,e)},this.subscribe=function(e){r.eventEmitter.on(r.eventName,e)},this.subscribeOnce=function(e){r.eventEmitter.once(r.eventName,e)},this.unsubscribe=function(e){r.eventEmitter.off(r.eventName,e)},this.waitFor=function(e){return r.eventEmitter.waitFor(r.eventName,{filter:e})},this.removeAllListeners=function(){r.eventEmitter.removeAllListeners(r.eventName)}})),Kv=nt((function e(){et(this,e),this.eventEmitter=new df.EventEmitter2,this.deviceChange=new Wv(cv,this.eventEmitter),this.localAudioEnabled=new Wv(uv,this.eventEmitter),this.localVideoEnabled=new Wv(lv,this.eventEmitter),this.statsUpdate=new Wv(dv,this.eventEmitter),this.trackDegraded=new Wv(hv,this.eventEmitter),this.trackRestored=new Wv(fv,this.eventEmitter),this.trackAudioLevelUpdate=new Wv(pv,this.eventEmitter),this.audioPluginFailed=new Wv(gv,this.eventEmitter),this.localAudioSilence=new Wv(vv,this.eventEmitter),this.analytics=new Wv(mv,this.eventEmitter),this.policyChange=new Wv(yv,this.eventEmitter),this.localRoleUpdate=new Wv(bv,this.eventEmitter),this.audioTrackUpdate=new Wv(kv,this.eventEmitter),this.audioTrackAdded=new Wv(xv,this.eventEmitter),this.audioTrackRemoved=new Wv(wv,this.eventEmitter),this.autoplayError=new Wv(Tv,this.eventEmitter),this.leave=new Wv(Ev,this.eventEmitter)})),qv=function(){function e(t,n,r){et(this,e),this.store=t,this.listener=n,this.audioListener=r}return nt(e,[{key:"handleActiveSpeakers",value:function(e){var t,n,r,i=this,a=e["speaker-list"],s=a.map((function(e){return{audioLevel:e.level,peer:i.store.getPeerById(e.peer_id),track:i.store.getTrackById(e.track_id)}}));null==(t=this.audioListener)||t.onAudioLevelUpdate(s),this.store.updateSpeakers(s);var o=a[0];if(o){var c=this.store.getPeerById(o.peer_id);null==(n=this.listener)||n.onPeerUpdate(sp.BECAME_DOMINANT_SPEAKER,c)}else null==(r=this.listener)||r.onPeerUpdate(sp.RESIGNED_DOMINANT_SPEAKER,null)}}]),e}();!function(e){e.ROOM_STATE="room-state",e.PEER_JOIN="on-peer-join",e.PEER_LEAVE="on-peer-leave",e.PEER_LIST="peer-list",e.TRACK_METADATA_ADD="on-track-add",e.TRACK_UPDATE="on-track-update",e.CHANGE_TRACK_MUTE_STATE_UPDATE="on-change-track-mute-state-request",e.ACTIVE_SPEAKERS="active-speakers",e.CONNECTION_QUALITY="on-connection-quality-update",e.SFU_STATS="sfu-stats",e.ON_SFU_TRACK_LAYER_UPDATE="on-track-layer-update",e.BROADCAST="on-broadcast",e.ROLE_CHANGE="on-role-change",e.POLICY_CHANGE="on-policy-change",e.ROLE_CHANGE_REQUEST="on-role-change-request",e.TRACK_UPDATE_REQUEST="on-track-update-request",e.PEER_UPDATE="on-peer-update",e.PEER_LEAVE_REQUEST="on-peer-leave-request",e.UNSUPPORTED="unsupported",e.RTMP_START="on-rtmp-start",e.RTMP_STOP="on-rtmp-stop",e.RECORDING_START="on-record-start",e.RECORDING_STOP="on-record-stop",e.HLS_START="on-hls-start",e.HLS_STOP="on-hls-stop"}(Iv||(Iv={}));var Yv,Jv=function(){function e(t,n){et(this,e),this.store=t,this.listener=n,this.TAG="[BroadcastManager]"}return nt(e,[{key:"handleNotification",value:function(e,t){e===Iv.BROADCAST&&this.handleBroadcast(t)}},{key:"handleBroadcast",value:function(e){var t,n=e.peer,r=e.info,i=e.roles,a=this.getSender(n),s=e.private?this.store.getLocalPeer():void 0,o=[];if(null==i?void 0:i.length){var c,u=this.store.getKnownRoles(),l=Ut(i);try{for(l.s();!(c=l.n()).done;){var d=c.value;u[d]&&o.push(u[d])}}catch(f){l.e(f)}finally{l.f()}}var h=new Mf(wf(xf({},r),{sender:a,recipientRoles:o,recipientPeer:s,time:new Date(e.timestamp)}));Lf.d(this.TAG,"Received Message from sender=".concat(null==n?void 0:n.peer_id,": ").concat(h)),null==(t=this.listener)||t.onMessageReceived(h)}},{key:"getSender",value:function(e){var t=e?this.store.getPeerById(e.peer_id):void 0;return!t&&e&&(t=new Ff({peerId:e.peer_id,name:e.info.name,isLocal:!1,customerUserId:e.info.user_id,metadata:e.info.data})),t}}]),e}(),Qv=function(){function e(t){et(this,e),this.listener=t}return nt(e,[{key:"handleQualityUpdate",value:function(e){var t,n=e.peers.map((function(e){return{peerID:e.peer_id,downlinkQuality:e.downlink_score}}));null==(t=this.listener)||t.onConnectionQualityUpdate(n)}}]),e}(),Xv=function(){function e(t,n,r,i){var a=this;et(this,e),this.store=t,this.peerManager=n,this.trackManager=r,this.listener=i,this.TAG="[PeerListManager]",this.handleInitialPeerList=function(e){var t=Object.values(e.peers);a.peerManager.handlePeerList(t)},this.handleReconnectPeerList=function(e){a.handleRepeatedPeerList(e.peers)},this.handlePreviewRoomState=function(e){if(a.store.hasRoleDetailsArrived()){var t=e.peers;null!=t?(Object.keys(t).forEach((function(e){t[e].tracks={},t[e].is_from_room_state=!0})),a.handleRepeatedPeerList(t)):0===e.peer_count&&a.handleRepeatedPeerList({})}},this.handleRepeatedPeerList=function(e){var t=a.store.getRemotePeers(),n=Object.values(e),r=t.filter((function(t){return!e[t.peerId]}));Lf.d(a.TAG,"".concat(r)),r.forEach((function(e){var t,n={peer_id:e.peerId,role:(null==(t=e.role)?void 0:t.name)||"",info:{name:e.name,data:e.metadata||"",user_id:e.customerUserId||""},tracks:{}};a.peerManager.handlePeerLeave(n)})),n.forEach((function(e){var t=a.store.getPeerById(e.peer_id),n=Object.values(e.tracks);t?(a.store.getPeerTracks(t.peerId).forEach((function(n){var r;e.tracks[n.trackId]||(a.removePeerTrack(t,n.trackId),null==(r=a.listener)||r.onTrackUpdate(op.TRACK_REMOVED,n,t))})),n.forEach((function(e){a.store.getTrackById(e.track_id)||a.store.setTrackState({peerId:t.peerId,trackInfo:e})})),a.trackManager.handleTrackUpdate({peer:{info:e.info,peer_id:e.peer_id},tracks:e.tracks}),a.peerManager.handlePeerUpdate(e)):a.peerManager.handlePeerJoin(e)}))}}return nt(e,[{key:"handleNotification",value:function(e,t,n){if(e===Iv.PEER_LIST){var r=t;n?(Lf.d(this.TAG,"RECONNECT_PEER_LIST event",JSON.stringify(r,null,2)),this.handleReconnectPeerList(r)):(Lf.d(this.TAG,"PEER_LIST event",JSON.stringify(r,null,2)),this.handleInitialPeerList(r))}else if(e===Iv.ROOM_STATE){var i=t;this.handlePreviewRoomState(i)}}},{key:"removePeerTrack",value:function(e,t){var n,r;if((null==(n=e.audioTrack)?void 0:n.trackId)===t)e.audioTrack=void 0;else if((null==(r=e.videoTrack)?void 0:r.trackId)===t)e.videoTrack=void 0;else{var i=e.auxiliaryTracks.findIndex((function(e){return e.trackId===t}));i>=0&&e.auxiliaryTracks.splice(i,1)}}}]),e}(),Zv=function(e){return e?new Date(e):void 0},$v=function(){function e(t,n,r){var i=this;et(this,e),this.store=t,this.trackManager=n,this.listener=r,this.TAG="[PeerManager]",this.handlePeerList=function(e){var t,n;if(0!==e.length){var r=[],a=new Set(e.map((function(e){return e.peer_id})));i.store.getRemotePeers().forEach((function(e){var t=e.peerId,n=e.fromRoomState;!a.has(t)&&n&&i.store.removePeer(t)}));var s,o=Ut(e);try{for(o.s();!(s=o.n()).done;){var c=s.value;r.push(i.makePeer(c))}}catch(u){o.e(u)}finally{o.f()}null==(n=i.listener)||n.onPeerUpdate(sp.PEER_LIST,r),i.trackManager.processPendingTracks()}else null==(t=i.listener)||t.onPeerUpdate(sp.PEER_LIST,[])},this.handlePeerJoin=function(e){var t,n=i.makePeer(e);null==(t=i.listener)||t.onPeerUpdate(sp.PEER_JOINED,n),i.trackManager.processPendingTracks()},this.handlePeerLeave=function(e){var t,n,r,a,s=i.store.getPeerById(e.peer_id);i.store.removePeer(e.peer_id),Lf.d(i.TAG,"PEER_LEAVE",e.peer_id,"remainingPeers=".concat(i.store.getPeers().length)),s&&(s.audioTrack&&(null==(t=i.listener)||t.onTrackUpdate(op.TRACK_REMOVED,s.audioTrack,s)),s.videoTrack&&(null==(n=i.listener)||n.onTrackUpdate(op.TRACK_REMOVED,s.videoTrack,s)),null==(r=s.auxiliaryTracks)||r.forEach((function(e){var t;null==(t=i.listener)||t.onTrackUpdate(op.TRACK_REMOVED,e,s)})),null==(a=i.listener)||a.onPeerUpdate(sp.PEER_LEFT,s))}}return nt(e,[{key:"handleNotification",value:function(e,t){switch(e){case Iv.PEER_JOIN:var n=t;this.handlePeerJoin(n);break;case Iv.PEER_LEAVE:var r=t;this.handlePeerLeave(r);break;case Iv.PEER_UPDATE:this.handlePeerUpdate(t)}}},{key:"handlePeerUpdate",value:function(e){var t,n=this.store.getPeerById(e.peer_id);if(n){if(n.role&&n.role.name!==e.role){var r=this.store.getPolicyForRole(e.role);n.updateRole(r),null==(t=this.listener)||t.onPeerUpdate(sp.ROLE_UPDATED,n)}this.handlePeerInfoUpdate(xf({peer:n},e.info))}}},{key:"handlePeerInfoUpdate",value:function(e){var t,n,r=e.peer,i=e.name,a=e.data;!r||(i&&r.name!==i&&(r.updateName(i),null==(t=this.listener)||t.onPeerUpdate(sp.NAME_UPDATED,r)),a&&r.metadata!==a&&(r.updateMetadata(a),null==(n=this.listener)||n.onPeerUpdate(sp.METADATA_UPDATED,r)))}},{key:"makePeer",value:function(e){var t=new Vf({peerId:e.peer_id,name:e.info.name,customerUserId:e.info.user_id,metadata:e.info.data,role:this.store.getPolicyForRole(e.role),joinedAt:Zv(e.joined_at),fromRoomState:!!e.is_from_room_state});for(var n in this.store.addPeer(t),Lf.d(this.TAG,"adding to the peerList",t.toString()),e.tracks)this.store.setTrackState({peerId:e.peer_id,trackInfo:e.tracks[n]});return t}}]),e}(),em=function(){function e(t,n){et(this,e),this.store=t,this.eventBus=n}return nt(e,[{key:"handlePolicyChange",value:function(e){var t,n=this.store.getLocalPeer();if(n&&!n.role){var r=e.known_roles[e.name];n.updateRole(r)}this.store.setKnownRoles(e.known_roles),this.store.getRoom().templateId=e.template_id;var i=null==(t=e.known_roles[e.name])?void 0:t.publishParams;if(this.store.setPublishParams(i),(null==n?void 0:n.role)&&n.role.name!==e.name){var a=this.store.getPolicyForRole(e.name),s=n.role;n.updateRole(a),this.eventBus.localRoleUpdate.publish({oldRole:s,newRole:a})}this.eventBus.policyChange.publish(e)}}]),e}(),tm=function(){function e(t,n){et(this,e),this.store=t,this.listener=n}return nt(e,[{key:"handleNotification",value:function(e,t){switch(e){case Iv.ROLE_CHANGE_REQUEST:this.handleRoleChangeRequest(t);break;case Iv.TRACK_UPDATE_REQUEST:this.handleTrackUpdateRequest(t);break;case Iv.CHANGE_TRACK_MUTE_STATE_UPDATE:this.handleChangeTrackStateRequest(t);break;default:return}}},{key:"handleRoleChangeRequest",value:function(e){var t,n={requestedBy:e.requested_by?this.store.getPeerById(e.requested_by):void 0,role:this.store.getPolicyForRole(e.role),token:e.token};null==(t=this.listener)||t.onRoleChangeRequest(n)}},{key:"handleTrackUpdateRequest",value:function(e){var t=this,n=e.requested_by,r=e.track_id,i=e.mute,a=n?this.store.getPeerById(n):void 0,s=this.store.getLocalPeerTracks().find((function(e){return e.publishedTrackId===r}));if(s){var o=function(){var e;null==(e=t.listener)||e.onChangeTrackStateRequest({requestedBy:a,track:s,enabled:!i})};if(i){if(s.enabled===!i)return;s.setEnabled(!i).then(o)}else o()}}},{key:"handleChangeTrackStateRequest",value:function(e){var t,n=this,r=e.type,i=e.source,a=e.value,s=e.requested_by,o=s?this.store.getPeerById(s):void 0,c=!a,u=this.getTracksToBeUpdated({type:r,source:i,enabled:c});if(0!==u.length)if(c)null==(t=this.listener)||t.onChangeMultiTrackStateRequest({requestedBy:o,tracks:u,type:r,source:i,enabled:!0});else{var l,d=[],h=Ut(u);try{for(h.s();!(l=h.n()).done;){var f=l.value;d.push(f.setEnabled(!1))}}catch(p){h.e(p)}finally{h.f()}Promise.all(d).then((function(){var e;null==(e=n.listener)||e.onChangeMultiTrackStateRequest({requestedBy:o,tracks:u,enabled:!1})}))}}},{key:"getTracksToBeUpdated",value:function(e){var t=e.type,n=e.source,r=e.enabled,i=this.store.getLocalPeerTracks();return t&&(i=i.filter((function(e){return e.type===t}))),n&&(i=i.filter((function(e){return e.source===n}))),i.filter((function(e){return e.enabled!==r}))}}]),e}(),nm=function(){function e(t,n){et(this,e),this.store=t,this.listener=n,this.TAG="[RoomUpdateManager]"}return nt(e,[{key:"handleNotification",value:function(e,t){switch(e){case Iv.PEER_LIST:this.onRoomState(t.room);break;case Iv.RTMP_START:this.onRTMPStart(t);break;case Iv.RTMP_STOP:this.onRTMPStop(t);break;case Iv.RECORDING_START:this.onRecordingStart(t);break;case Iv.RECORDING_STOP:this.onRecordingStop(t);break;case Iv.ROOM_STATE:this.handlePreviewRoomState(t);break;default:this.onHLS(e,t)}}},{key:"handlePreviewRoomState",value:function(e){var t=e.room;this.onRoomState(t,e.peer_count)}},{key:"onRoomState",value:function(e,t){var n,r,i,a=e.recording,s=e.streaming,o=e.session_id,c=e.started_at,u=e.name,l=this.store.getRoom();l.peerCount=t,l.name=u,l.recording.server.running=!!(null==a?void 0:a.sfu.enabled),l.recording.browser.running=!!(null==a?void 0:a.browser.enabled),l.rtmp.running=!!(null==(n=null==s?void 0:s.rtmp)?void 0:n.enabled),l.rtmp.startedAt=Zv(null==(r=null==s?void 0:s.rtmp)?void 0:r.started_at),l.recording.server.startedAt=Zv(null==a?void 0:a.sfu.started_at),l.recording.browser.startedAt=Zv(null==a?void 0:a.browser.started_at),l.recording.hls=this.getPeerListHLSRecording(a),l.hls=this.convertHls(null==s?void 0:s.hls),l.sessionId=o,l.startedAt=Zv(c),null==(i=this.listener)||i.onRoomUpdate(ap.RECORDING_STATE_UPDATED,l)}},{key:"onRTMPStart",value:function(e){var t;this.setRTMPStatus(!(null==(t=e.error)?void 0:t.code),e)}},{key:"onRTMPStop",value:function(e){this.setRTMPStatus(!1,e)}},{key:"onRecordingStart",value:function(e){var t;this.setRecordingStatus(!(null==(t=e.error)?void 0:t.code),e)}},{key:"onRecordingStop",value:function(e){this.setRecordingStatus(!1,e)}},{key:"onHLS",value:function(e,t){var n,r;if([Iv.HLS_START,Iv.HLS_STOP].includes(e)){var i=this.store.getRoom();t.enabled=e===Iv.HLS_START&&!(null==(n=t.error)?void 0:n.code),i.hls=this.convertHls(t),i.recording.hls=this.getHLSRecording(t),null==(r=this.listener)||r.onRoomUpdate(ap.HLS_STREAMING_STATE_UPDATED,i)}}},{key:"convertHls",value:function(e){var t,n={running:!!(null==e?void 0:e.enabled),variants:[],error:this.toSdkError(null==e?void 0:e.error)};return null==(t=null==e?void 0:e.variants)||t.forEach((function(e){n.variants.push({meetingURL:e.meeting_url,url:e.url,metadata:e.metadata,startedAt:Zv(e.started_at)})})),n}},{key:"getHLSRecording",value:function(e){var t,n,r,i={running:!1};return(null==e?void 0:e.hls_recording)&&(i={running:!!(null==e?void 0:e.enabled),singleFilePerLayer:!!(null==(t=e.hls_recording)?void 0:t.single_file_per_layer),hlsVod:!!(null==(n=e.hls_recording)?void 0:n.hls_vod),startedAt:Zv(null==(r=null==e?void 0:e.variants)?void 0:r[0].started_at),error:this.toSdkError(e.error)}),i}},{key:"getPeerListHLSRecording",value:function(e){var t,n,r=null==e?void 0:e.hls;return{running:!!(null==r?void 0:r.enabled),startedAt:Zv(null==r?void 0:r.started_at),singleFilePerLayer:!!(null==(t=null==r?void 0:r.config)?void 0:t.single_file_per_layer),hlsVod:!!(null==(n=null==r?void 0:r.config)?void 0:n.hls_vod)}}},{key:"setRecordingStatus",value:function(e,t){var n,r,i=this.store.getRoom();"sfu"===t.type?(i.recording.server={running:e,startedAt:e?Zv(t.started_at):void 0,error:this.toSdkError(t.error)},r=ap.SERVER_RECORDING_STATE_UPDATED):(i.recording.browser={running:e,startedAt:e?Zv(t.started_at):void 0,error:this.toSdkError(t.error)},r=ap.BROWSER_RECORDING_STATE_UPDATED),null==(n=this.listener)||n.onRoomUpdate(r,i)}},{key:"setRTMPStatus",value:function(e,t){var n,r=this.store.getRoom();r.rtmp={running:e,startedAt:e?Zv(t.started_at):void 0,error:this.toSdkError(t.error)},null==(n=this.listener)||n.onRoomUpdate(ap.RTMP_STREAMING_STATE_UPDATED,r)}},{key:"toSdkError",value:function(e){if(null==e?void 0:e.code){var t=e.message||"error in streaming/recording",n=new Zf(e.code,"ServerErrors",ep.NONE,t,t);return Lf.e(this.TAG,"error in streaming/recording",n),n}}}]),e}(),rm=function(){function e(t,n,r){var i=this;et(this,e),this.store=t,this.eventBus=n,this.listener=r,this.TAG="[TrackManager]",this.tracksToProcess=new Map,this.handleTrackAdd=function(e){Lf.d(i.TAG,"ONTRACKADD","".concat(e)),i.store.addTrack(e),i.tracksToProcess.set(e.trackId,e),i.processPendingTracks()},this.handleTrackRemove=function(e){var t;Lf.d(i.TAG,"ONTRACKREMOVE","".concat(e));var n=i.store.getTrackState(e.trackId);if(n){e.type===Tp.AUDIO&&i.eventBus.audioTrackRemoved.publish(e);var r=i.store.getPeerById(n.peerId);!r||(i.removePeerTracks(r,e),i.store.removeTrack(e.trackId),null==(t=i.listener)||t.onTrackUpdate(op.TRACK_REMOVED,e,r))}},this.handleTrackLayerUpdate=function(e){for(var t in e.tracks){var n=e.tracks[t],r=i.store.getTrackById(t);!r||!i.store.getPeerByTrackId(t)||r instanceof _v&&i.setLayer(r,n)}},this.handleTrackUpdate=function(e){var t,n,r=i.store.getPeerById(e.peer.peer_id);if(r)for(var a in e.tracks){var s=Object.assign({},null==(t=i.store.getTrackState(a))?void 0:t.trackInfo),o=e.tracks[a],c=i.store.getTrackById(a);if(i.store.setTrackState({peerId:e.peer.peer_id,trackInfo:xf(xf({},s),o)}),!c||i.tracksToProcess.has(a))i.processPendingTracks();else{c.setEnabled(!o.mute);var u=i.processTrackUpdate(c,s,o);u&&(null==(n=i.listener)||n.onTrackUpdate(u,c,r))}}}}return nt(e,[{key:"handleTrackMetadataAdd",value:function(e){for(var t in Lf.d(this.TAG,"TRACK_METADATA_ADD",JSON.stringify(e,null,2)),e.tracks)this.store.setTrackState({peerId:e.peer.peer_id,trackInfo:e.tracks[t]});this.processPendingTracks()}},{key:"processPendingTracks",value:function(){var e=this;new Map(this.tracksToProcess).forEach((function(t){var n,r=e.store.getTrackState(t.trackId);if(r){var i=e.store.getPeerById(r.peerId);!i||(t.source=r.trackInfo.source,t.peerId=i.peerId,t.logIdentifier=i.name,t.setEnabled(!r.trackInfo.mute),e.addAudioTrack(i,t),e.addVideoTrack(i,t),t.type===Tp.AUDIO?e.eventBus.audioTrackAdded.publish({track:t,peer:i}):null==(n=e.listener)||n.onTrackUpdate(op.TRACK_ADDED,t,i),e.tracksToProcess.delete(t.trackId))}}))}},{key:"setLayer",value:function(e,t){var n,r,i=this.store.getPeerByTrackId(e.trackId);i&&(e.setLayerFromServer(t)?null==(n=this.listener)||n.onTrackUpdate(op.TRACK_DEGRADED,e,i):null==(r=this.listener)||r.onTrackUpdate(op.TRACK_RESTORED,e,i))}},{key:"removePeerTracks",value:function(e,t){var n,r,i=e.auxiliaryTracks.indexOf(t);i>-1?e.auxiliaryTracks.splice(i,1):t.type===Tp.AUDIO&&(null==(n=e.audioTrack)?void 0:n.trackId)===t.trackId?e.audioTrack=void 0:t.type===Tp.VIDEO&&(null==(r=e.videoTrack)?void 0:r.trackId)===t.trackId&&(e.videoTrack=void 0)}},{key:"addAudioTrack",value:function(e,t){t.type===Tp.AUDIO&&(e.audioTrack||"regular"!==t.source?e.auxiliaryTracks.push(t):e.audioTrack=t)}},{key:"addVideoTrack",value:function(e,t){if(t.type===Tp.VIDEO){var n=t,r=this.store.getSimulcastDefinitionsForPeer(e,n.source);n.setSimulcastDefinitons(r),e.videoTrack||"regular"!==t.source?e.auxiliaryTracks.push(n):e.videoTrack=n}}},{key:"processTrackUpdate",value:function(e,t,n){var r;return e.setEnabled(!n.mute),t.mute!==n.mute?(r=n.mute?op.TRACK_MUTED:op.TRACK_UNMUTED,e.type===Tp.AUDIO&&this.eventBus.audioTrackUpdate.publish({track:e,enabled:!n.mute})):t.description!==n.description&&(r=op.TRACK_DESCRIPTION_CHANGED),r}}]),e}(),im=function(){function e(t,n,r,i,a){var s=this;et(this,e),this.store=t,this.listener=r,this.audioListener=i,this.connectionQualityListener=a,this.TAG="[HMSNotificationManager]",this.hasConsistentRoomStateArrived=!1,this.ignoreNotification=function(e){if(e===Iv.PEER_LIST)s.hasConsistentRoomStateArrived=!0;else if(e===Iv.ROOM_STATE)return s.hasConsistentRoomStateArrived;return!1},this.handleTrackAdd=function(e){s.trackManager.handleTrackAdd(e)},this.handleTrackRemove=function(e){s.trackManager.handleTrackRemove(e)},this.updateLocalPeer=function(e){var t=e.name,n=e.metadata,r=s.store.getLocalPeer();s.peerManager.handlePeerInfoUpdate({peer:r,name:t,data:n})},this.trackManager=new rm(this.store,n,this.listener),this.peerManager=new $v(this.store,this.trackManager,this.listener),this.peerListManager=new Xv(this.store,this.peerManager,this.trackManager,this.listener),this.broadcastManager=new Jv(this.store,this.listener),this.policyChangeManager=new em(this.store,n),this.requestManager=new tm(this.store,this.listener),this.activeSpeakerManager=new qv(this.store,this.listener,this.audioListener),this.connectionQualityManager=new Qv(this.connectionQualityListener),this.roomUpdateManager=new nm(this.store,this.listener)}return nt(e,[{key:"setListener",value:function(e){this.listener=e,this.trackManager.listener=e,this.peerManager.listener=e,this.peerListManager.listener=e,this.broadcastManager.listener=e,this.requestManager.listener=e,this.activeSpeakerManager.listener=e,this.roomUpdateManager.listener=e}},{key:"setAudioListener",value:function(e){this.audioListener=e,this.activeSpeakerManager.audioListener=e}},{key:"setConnectionQualityListener",value:function(e){this.connectionQualityListener=e,this.connectionQualityManager.listener=e}},{key:"handleNotification",value:function(e){var t,n,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=e.method,a=e.params;[Iv.ACTIVE_SPEAKERS,Iv.SFU_STATS,Iv.CONNECTION_QUALITY,void 0].includes(i)||Lf.d(this.TAG,"Received notification - ".concat(i),{notification:a}),i===Iv.SFU_STATS&&(null==(t=window.HMS)?void 0:t.ON_SFU_STATS)&&"function"==typeof(null==(n=window.HMS)?void 0:n.ON_SFU_STATS)&&window.HMS.ON_SFU_STATS(e.params),!this.ignoreNotification(i)&&(this.roomUpdateManager.handleNotification(i,a),this.peerManager.handleNotification(i,a),this.requestManager.handleNotification(i,a),this.peerListManager.handleNotification(i,a,r),this.broadcastManager.handleNotification(i,a),this.handleIsolatedMethods(i,a))}},{key:"handleIsolatedMethods",value:function(e,t){switch(e){case Iv.TRACK_METADATA_ADD:this.trackManager.handleTrackMetadataAdd(t);break;case Iv.TRACK_UPDATE:this.trackManager.handleTrackUpdate(t);break;case Iv.ON_SFU_TRACK_LAYER_UPDATE:this.trackManager.handleTrackLayerUpdate(t);break;case Iv.ACTIVE_SPEAKERS:this.activeSpeakerManager.handleActiveSpeakers(t);break;case Iv.CONNECTION_QUALITY:this.connectionQualityManager.handleQualityUpdate(t);break;case Iv.POLICY_CHANGE:this.policyChangeManager.handlePolicyChange(t)}}}]),e}(),am=nt((function e(t){et(this,e),this.type=t.type,this.source=t.source||"regular",this.description="",t instanceof Dp?(this.mute=!t.enabled,this.track_id=t.publishedTrackId,this.stream_id=t.stream.id):(this.mute=t.mute,this.track_id=t.track_id,this.stream_id=t.stream_id)})),sm=function(){function e(t){et(this,e),this.TAG="[AudioContextManager]",this.audioContext=new AudioContext,this.source=this.audioContext.createMediaElementSource(t),this.source.connect(this.audioContext.destination)}return nt(e,[{key:"resumeContext",value:function(){"suspended"===this.audioContext.state&&(Lf.d(this.TAG,"AudioContext is resumed"),this.audioContext.resume())}},{key:"getAudioTrack",value:function(){return this.destinationNode&&this.source.disconnect(this.destinationNode),this.destinationNode=this.audioContext.createMediaStreamDestination(),this.source.connect(this.destinationNode),this.destinationNode.stream.getAudioTracks()[0]}},{key:"cleanup",value:function(){"closed"!==this.audioContext.state&&this.audioContext.close()}}]),e}(),om=function(e){it(n,e);var t=ut(n);function n(){return et(this,n),t.apply(this,arguments)}return nt(n,[{key:"on",value:function(e,t){return Ft(at(n.prototype),"on",this).call(this,e,t)}},{key:"off",value:function(e,t){return Ft(at(n.prototype),"off",this).call(this,e,t)}},{key:"emit",value:function(e,t){return Ft(at(n.prototype),"emit",this).call(this,e,t)}},{key:"listeners",value:function(e){return Ft(at(n.prototype),"listeners",this).call(this,e)}}]),n}(df.EventEmitter2),cm=function(e){it(n,e);var t=ut(n);function n(){var e;return et(this,n),(e=t.apply(this,arguments)).audioElement=null,e.TAG="[PlaylistAudioManager]",e.seeked=!1,e}return nt(n,[{key:"play",value:function(e){return Ef(this,null,Bt().mark((function t(){var n=this;return Bt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(this.audioElement=this.getAudioElement(),new Promise((function(t,r){n.audioElement=n.getAudioElement(),n.audioElement.src=e,n.seeked=!1,n.audioElement.onerror=function(){var t="Error loading ".concat(e);Lf.e(n.TAG,t),n.stop(),r(t)},n.audioElement.oncanplaythrough=function(){return Ef(n,null,Bt().mark((function n(){var i;return Bt().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,this.audioElement){n.next=3;break}return n.abrupt("return");case 3:if(this.audioContextManager.resumeContext(),!this.track){n.next=13;break}if(!this.seeked){n.next=8;break}this.seeked=!1,n.next=11;break;case 8:return n.next=10,this.audioElement.play();case 10:t([this.track]);case 11:n.next=17;break;case 13:return n.next=15,this.audioElement.play();case 15:i=this.audioContextManager.getAudioTrack(),this.track=i,t([i]);case 17:n.next=22;break;case 19:n.prev=19,n.t0=n.catch(0),Lf.e(this.TAG,"Error playing audio",e,n.t0.message),r(n.t0);case 22:case"end":return n.stop()}}),n,this,[[0,19]])})))},n.audioElement.onseeked=function(){n.seeked=!0}}))));case 1:case"end":return t.stop()}}),t,this)})))}},{key:"getTracks",value:function(){return this.track?[this.track.id]:[]}},{key:"getElement",value:function(){return this.audioElement}},{key:"stop",value:function(){var e,t,n;null==(e=this.audioElement)||e.pause(),null==(t=this.audioElement)||t.removeAttribute("src"),this.audioElement=null,null==(n=this.audioContextManager)||n.cleanup(),this.track=void 0}},{key:"getAudioElement",value:function(){var e=this;if(this.audioElement)return this.audioElement;var t=document.createElement("audio");return t.crossOrigin="anonymous",t.addEventListener("timeupdate",(function(t){return e.emit("progress",t)})),t.addEventListener("ended",(function(){e.emit("ended",null)})),this.audioContextManager=new sm(t),t}}]),n}(om),um=function(e){it(n,e);var t=ut(n);function n(){var e;return et(this,n),(e=t.apply(this,arguments)).TAG="[PlaylistVideoManager]",e.videoElement=null,e.canvasContext=null,e.tracks=[],e.DEFAUL_FPS=24,e.seeked=!1,e.drawImage=function(){var t,n,r;e.videoElement&&!e.videoElement.paused&&!e.videoElement.ended&&(null==(r=e.canvasContext)||r.drawImage(e.videoElement,0,0,null==(t=e.canvas)?void 0:t.width,null==(n=e.canvas)?void 0:n.height),e.timer=setTimeout((function(){e.drawImage()}),1e3/e.DEFAUL_FPS))},e}return nt(n,[{key:"play",value:function(e){var t=this;return this.videoElement=this.getVideoElement(),this.createCanvas(),new Promise((function(n,r){t.videoElement=t.getVideoElement(),t.videoElement.src=e,t.seeked=!1,t.videoElement.onerror=function(){var n="Error loading ".concat(e);Lf.e(t.TAG,n),t.stop(),r(n)},t.videoElement.oncanplaythrough=function(){return Ef(t,null,Bt().mark((function t(){var i,a,s,o,c,u=this;return Bt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,this.videoElement){t.next=3;break}return t.abrupt("return");case 3:if(this.canvas.width=this.videoElement.videoWidth,this.canvas.height=this.videoElement.videoHeight,0!==this.tracks.length){t.next=17;break}if(this.clearCanvasAndTracks(),o=this.canvas.captureStream()){t.next=9;break}return Lf.e(this.TAG,"Browser does not support captureStream"),t.abrupt("return");case 9:return this.videoElement.onplay=this.drawImage,this.audioContextManager.resumeContext(),t.next=13,this.videoElement.play();case 13:c=this.audioContextManager.getAudioTrack(),o.addTrack(c),o.getTracks().forEach((function(e){u.tracks.push(e)})),n(this.tracks),t.next=24;break;case 17:if(!this.seeked){t.next=21;break}this.seeked=!1,null==(s=this.canvasContext)||s.drawImage(this.videoElement,0,0,null==(i=this.canvas)?void 0:i.width,null==(a=this.canvas)?void 0:a.height),t.next=24;break;case 21:return t.next=23,this.videoElement.play();case 23:n(this.tracks);case 24:t.next=29;break;case 26:t.prev=26,t.t0=t.catch(0),Lf.e(this.TAG,"Error playing video",e,t.t0.message),r(t.t0);case 29:case"end":return t.stop()}}),t,this,[[0,26]])})))},t.videoElement.onseeked=function(){t.seeked=!0}}))}},{key:"getTracks",value:function(){return this.tracks.map((function(e){return e.id}))}},{key:"getElement",value:function(){return this.videoElement}},{key:"stop",value:function(){var e,t,n;null==(e=this.videoElement)||e.pause(),null==(t=this.videoElement)||t.removeAttribute("src"),this.videoElement=null,null==(n=this.audioContextManager)||n.cleanup(),this.clearCanvasAndTracks()}},{key:"clearCanvasAndTracks",value:function(){var e;this.tracks=[],null==(e=this.canvasContext)||e.clearRect(0,0,this.canvas.width,this.canvas.height),clearTimeout(this.timer)}},{key:"getVideoElement",value:function(){var e=this;if(this.videoElement)return this.videoElement;var t=document.createElement("video");return t.crossOrigin="anonymous",t.addEventListener("timeupdate",(function(t){return e.emit("progress",t)})),t.addEventListener("ended",(function(){e.emit("ended",null)})),this.audioContextManager=new sm(t),t}},{key:"createCanvas",value:function(){this.canvas||(this.canvas=document.createElement("canvas"),this.canvasContext=this.canvas.getContext("2d"))}}]),n}(om),lm={list:[],currentIndex:-1,isAutoplayOn:!0},dm={list:[],currentIndex:-1,isAutoplayOn:!0},hm=function(e){it(n,e);var t=ut(n);function n(e,r){var i;return et(this,n),(i=t.call(this)).sdk=e,i.eventBus=r,i.state={audio:xf({},lm),video:xf({},dm)},i.TAG="[PlaylistManager]",i.handlePausePlaylist=function(e){return Ef(ot(i),[e],Bt().mark((function e(t){var n,r,i,a;return Bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.enabled,r=t.track,!n){e.next=3;break}return e.abrupt("return");case 3:"audioplaylist"===r.source&&(a=xp.audio),"videoplaylist"===r.source&&(a=xp.video),a&&(null==(i=this.getElement(a))||i.pause());case 4:case"end":return e.stop()}}),e,this)})))},i.addTrack=function(e,t){return Ef(ot(i),null,Bt().mark((function n(){return Bt().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.sdk.addTrack(e,t);case 2:Lf.d(this.TAG,"Playlist track added",Pp(e));case 3:case"end":return n.stop()}}),n,this)})))},i.removeTrack=function(e){return Ef(ot(i),null,Bt().mark((function t(){return Bt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.sdk.removeTrack(e);case 2:Lf.d(this.TAG,"Playlist track removed",e);case 3:case"end":return t.stop()}}),t,this)})))},i.audioManager=new cm,i.videoManager=new um,i.addListeners(),i}return nt(n,[{key:"getList",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:xp.audio;return this.state[e].list}},{key:"setList",value:function(e){var t=this;e&&0!==e.length?e.forEach((function(e){t.state[e.type].list.includes(e)||t.state[e.type].list.push(e)})):Lf.w(this.TAG,"Please pass in a list of HMSPlaylistItem's")}},{key:"clearList",value:function(e){return Ef(this,null,Bt().mark((function t(){return Bt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=this.isPlaying(e),!t.t0){t.next=4;break}return t.next=4,this.stop(e);case 4:this.state[e].list=[];case 5:case"end":return t.stop()}}),t,this)})))}},{key:"removeItem",value:function(e,t){return Ef(this,null,Bt().mark((function n(){var r,i,a,s;return Bt().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r=this.state[t],i=r.list,a=r.currentIndex,!((s=i.findIndex((function(t){return e===t.id})))>-1)){n.next=10;break}if(n.t1=a===s&&this.isPlaying(t),!n.t1){n.next=6;break}return n.next=6,this.stop(t);case 6:i.splice(s,1),n.t0=!0,n.next=11;break;case 10:n.t0=!1;case 11:return n.abrupt("return",n.t0);case 12:case"end":return n.stop()}}),n,this)})))}},{key:"seek",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:xp.audio,n=this.state[t].currentIndex;if(-1===n)throw mp.NoEntryToPlay(ep.PLAYLIST,"No item is currently playing");var r=this.getElement(t);if(r){var i=Math.max(r.currentTime+e,0);r.currentTime=Math.min(i,r.duration)}}},{key:"seekTo",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:xp.audio,n=this.state[t].currentIndex;if(-1===n)throw mp.NoEntryToPlay(ep.PLAYLIST,"No item is currently playing");if(e<0)throw Error("value cannot be negative");var r=this.getElement(t);r&&(r.currentTime=Math.min(e,r.duration))}},{key:"setVolume",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:xp.audio;if(e<0||e>100)throw Error("Please pass a valid number between 0-100");var n=this.getElement(t);n&&(n.volume=.01*e)}},{key:"getVolume",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:xp.audio,t=this.getElement(e);return t?100*t.volume:0}},{key:"getCurrentTime",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:xp.audio,t=this.getElement(e);return(null==t?void 0:t.currentTime)||0}},{key:"getCurrentIndex",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:xp.audio;return this.state[e].currentIndex}},{key:"getCurrentProgress",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:xp.audio,n=this.state[t],r=n.list,i=n.currentIndex,a=null==(e=r[i])?void 0:e.url,s=this.getElement(t);return a&&s?Math.floor(s.currentTime/s.duration*100):0}},{key:"getCurrentSelection",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:xp.audio,t=this.state[e],n=t.list,r=t.currentIndex;if(-1!==r)return n[r]}},{key:"isPlaying",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:xp.audio,t=this.getElement(e);return!!t&&!t.paused}},{key:"setIsAutoplayOn",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:xp.audio,t=arguments.length>1?arguments[1]:void 0;this.state[e].isAutoplayOn=t}},{key:"getPlaybackRate",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:xp.audio,t=this.getElement(e);return t?t.playbackRate:1}},{key:"setPlaybackRate",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:xp.audio,t=arguments.length>1?arguments[1]:void 0;if(t<.25||t>2)throw Error("Please pass a value between 0.25 and 2.0");var n=this.getElement(e);n&&(n.playbackRate=t)}},{key:"setEnabled",value:function(e,t){return Ef(this,arguments,Bt().mark((function e(t,n){var r,i,a,s,o;return Bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.id,i=n.type,a=void 0===i?xp.audio:i,s=this.state[a].list.findIndex((function(e){return e.id===r})),r&&-1!==s){e.next=5;break}return Lf.w(this.TAG,"Pass a valid id"),e.abrupt("return");case 5:if(o=this.state[a].list[s].url,!t){e.next=11;break}return e.next=9,this.play(o,a);case 9:e.next=13;break;case 11:return e.next=13,this.pause(o,a);case 13:this.state[a].currentIndex=s,this.setDuration(a);case 15:case"end":return e.stop()}}),e,this)})))}},{key:"playNext",value:function(){return Ef(this,arguments,Bt().mark((function e(){var t,n,r,i,a=arguments;return Bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=a.length>0&&void 0!==a[0]?a[0]:xp.audio,n=this.state[t],r=n.list,!((i=n.currentIndex)>=r.length-1)){e.next=4;break}throw mp.NoEntryToPlay(ep.PLAYLIST,"Reached end of playlist");case 4:return e.next=6,this.play(r[i+1].url,t);case 6:this.state[t].currentIndex=i+1,this.setDuration(t);case 8:case"end":return e.stop()}}),e,this)})))}},{key:"playPrevious",value:function(){return Ef(this,arguments,Bt().mark((function e(){var t,n,r,i,a=arguments;return Bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=a.length>0&&void 0!==a[0]?a[0]:xp.audio,n=this.state[t],r=n.list,!((i=n.currentIndex)<=0)){e.next=4;break}throw mp.NoEntryToPlay(ep.PLAYLIST,"Reached start of playlist");case 4:return e.next=6,this.play(r[i-1].url,t);case 6:this.state[t].currentIndex=i-1,this.setDuration(t);case 8:case"end":return e.stop()}}),e,this)})))}},{key:"stop",value:function(){return Ef(this,arguments,Bt().mark((function e(){var t,n,r,i=arguments;return Bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=i.length>0&&void 0!==i[0]?i[0]:xp.audio,r=t===xp.audio?this.audioManager:this.videoManager,null==(n=r.getElement())||n.pause(),e.next=5,this.removeTracks(t);case 5:r.stop(),this.state[t].currentIndex=-1;case 7:case"end":return e.stop()}}),e,this)})))}},{key:"cleanup",value:function(){this.state={audio:xf({},lm),video:xf({},dm)},this.eventBus.localAudioEnabled.unsubscribe(this.handlePausePlaylist),this.eventBus.localVideoEnabled.unsubscribe(this.handlePausePlaylist),this.audioManager.stop(),this.videoManager.stop()}},{key:"onProgress",value:function(e){var t=this;this.videoManager.on("progress",(function(){try{e({type:xp.video,progress:t.getCurrentProgress(xp.video)})}catch(n){Lf.e(t.TAG,"Error in onProgress callback")}})),this.audioManager.on("progress",(function(){try{e({type:xp.audio,progress:t.getCurrentProgress(xp.audio)})}catch(n){Lf.e(t.TAG,"Error in onProgress callback")}}))}},{key:"onNewTrackStart",value:function(e){this.on("newTrackStart",e)}},{key:"onPlaylistEnded",value:function(e){this.on("playlistEnded",e)}},{key:"onCurrentTrackEnded",value:function(e){this.on("currentTrackEnded",e)}},{key:"getElement",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:xp.audio;return e===xp.audio?this.audioManager.getElement():this.videoManager.getElement()}},{key:"removeTracks",value:function(){return Ef(this,arguments,Bt().mark((function e(){var t,n,r,i,a,s=arguments;return Bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=s.length>0&&void 0!==s[0]?s[0]:xp.audio,n=(t===xp.audio?this.audioManager:this.videoManager).getTracks(),r=Ut(n),e.prev=3,r.s();case 5:if((i=r.n()).done){e.next=11;break}return a=i.value,e.next=9,this.removeTrack(a);case 9:e.next=5;break;case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(3),r.e(e.t0);case 16:return e.prev=16,r.f(),e.finish(16);case 19:case"end":return e.stop()}}),e,this,[[3,13,16,19]])})))}},{key:"play",value:function(e){return Ef(this,arguments,Bt().mark((function e(t){var n,r,i,a,s,o,c,u=arguments;return Bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=u.length>1&&void 0!==u[1]?u[1]:xp.audio,r=n===xp.audio?this.audioManager:this.videoManager,i=r.getElement(),!this.isItemCurrentlyPlaying(t,n)){e.next=5;break}return Lf.w(this.TAG,"The ".concat(n," is currently playing")),e.abrupt("return");case 5:if(!(null==i?void 0:i.src.includes(t))){e.next=10;break}return e.next=8,i.play();case 8:e.next=31;break;case 10:return null==i||i.pause(),e.next=13,r.play(t);case 13:a=e.sent,s=Ut(a),e.prev=15,s.s();case 17:if((o=s.n()).done){e.next=23;break}return c=o.value,e.next=21,this.addTrack(c,n===xp.audio?"audioplaylist":"videoplaylist");case 21:e.next=17;break;case 23:e.next=28;break;case 25:e.prev=25,e.t0=e.catch(15),s.e(e.t0);case 28:return e.prev=28,s.f(),e.finish(28);case 31:case"end":return e.stop()}}),e,this,[[15,25,28,31]])})))}},{key:"isItemCurrentlyPlaying",value:function(e,t){var n=this.getElement(t);return!(!n||n.paused||!n.src.includes(e))}},{key:"setDuration",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:xp.audio,t=this.getElement(e),n=this.state[e],r=n.list,i=n.currentIndex;r[i]&&(r[i].duration=(null==t?void 0:t.duration)||0),this.emit("newTrackStart",r[i])}},{key:"pause",value:function(e){return Ef(this,arguments,Bt().mark((function e(t){var n,r,i=arguments;return Bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=i.length>1&&void 0!==i[1]?i[1]:xp.audio,(r=this.getElement(n))&&!r.paused&&r.src.includes(t)?(r.pause(),Lf.d(this.TAG,"paused url",t)):Lf.w(this.TAG,"The passed in url is not currently playing");case 3:case"end":return e.stop()}}),e,this)})))}},{key:"addListeners",value:function(){var e=this;this.audioManager.on("ended",(function(){return e.handleEnded(xp.audio)})),this.videoManager.on("ended",(function(){return e.handleEnded(xp.video)})),this.eventBus.localAudioEnabled.subscribe(this.handlePausePlaylist),this.eventBus.localVideoEnabled.subscribe(this.handlePausePlaylist)}},{key:"handleEnded",value:function(){return Ef(this,arguments,Bt().mark((function e(){var t,n,r,i,a,s=arguments;return Bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=s.length>0&&void 0!==s[0]?s[0]:xp.audio,n=this.state[t],r=n.list,i=n.currentIndex,a=n.isAutoplayOn,i!==r.length-1){e.next=8;break}return e.next=5,this.stop(t);case 5:this.emit("playlistEnded",t),e.next=14;break;case 8:if(!a){e.next=12;break}this.playNext(t),e.next=14;break;case 12:return e.next=14,this.pause(r[i].url,t);case 14:this.emit("currentTrackEnded",r[i]);case 15:case"end":return e.stop()}}),e,this)})))}}]),n}(om),fm=nt((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"https://prod-init.100ms.live/init",s=arguments.length>5&&void 0!==arguments[5]&&arguments[5];et(this,e),this.authToken=t,this.peerId=n,this.peerName=r,this.data=i,this.endpoint=a,this.autoSubscribeVideo=s}));!function(e){e[e.ConnectFailed=0]="ConnectFailed",e[e.SignalDisconnect=1]="SignalDisconnect",e[e.JoinWSMessageFailed=2]="JoinWSMessageFailed",e[e.PublishIceConnectionFailed=3]="PublishIceConnectionFailed",e[e.SubscribeIceConnectionFailed=4]="SubscribeIceConnectionFailed"}(Yv||(Yv={}));var pm,vm=(X(of={},0,[]),X(of,1,[]),X(of,2,[1]),X(of,3,[1]),X(of,4,[1]),of);!function(e){e.Disconnected="Disconnected",e.Connecting="Connecting",e.Joined="Joined",e.Preview="Preview",e.Failed="Failed",e.Reconnecting="Reconnecting",e.Leaving="Leaving"}(pm||(pm={}));var mm,gm=nt((function e(t){var n=this;et(this,e),this.promise=new Promise((function(e,r){n.resolve=e,n.reject=r,t(e,r)}))})),ym=function(){function e(t,n){et(this,e),this.onStateChange=t,this.sendEvent=n,this.TAG="[RetryScheduler]",this.inProgress=new Map,this.retryTaskIds=[]}return nt(e,[{key:"schedule",value:function(e){return Ef(this,arguments,Bt().mark((function e(t){var n,r,i,a,s,o,c,u;return Bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.category,r=t.error,i=t.task,a=t.originalState,s=t.maxFailedRetries,o=void 0===s?5:s,c=t.changeState,u=void 0===c||c,e.next=3,this.scheduleTask({category:n,error:r,changeState:u,task:i,originalState:a,maxFailedRetries:o});case 3:case"end":return e.stop()}}),e,this)})))}},{key:"reset",value:function(){this.retryTaskIds.forEach((function(e){return clearTimeout(e)})),this.retryTaskIds=[],this.inProgress.clear()}},{key:"scheduleTask",value:function(e){return Ef(this,arguments,Bt().mark((function e(t){var n,r,i,a,s,o,c,u,l,d,h,f,p,v,m,g,y,b,k;return Bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.category,r=t.error,i=t.changeState,a=t.task,s=t.originalState,o=t.maxFailedRetries,c=void 0===o?5:o,u=t.failedRetryCount,l=void 0===u?0:u,Lf.d(this.TAG,"schedule: ",{category:Yv[n],error:r}),0!==l){e.next=10;break}if(!(d=this.inProgress.get(n))){e.next=8;break}return Lf.d(this.TAG,"schedule: Already a task for ".concat(Yv[n]," scheduled, waiting for its completion")),e.next=7,d.promise;case 7:return e.abrupt("return");case 8:h=new gm((function(e,t){})),this.inProgress.set(n,h),this.sendEvent(r,n);case 10:f=!1,p=vm[n],e.t0=Bt().keys(p);case 12:if((e.t1=e.t0()).done){e.next=31;break}if(v=e.t1.value,m=p[parseInt(v)],e.prev=15,g=this.inProgress.get(m),e.t2=g,!e.t2){e.next=23;break}return Lf.d(this.TAG,"schedule: Suspending retry task of ".concat(Yv[n],", waiting for ").concat(Yv[m]," to recover")),e.next=22,g.promise;case 22:Lf.d(this.TAG,"schedule: Resuming retry task ".concat(Yv[n]," as it's dependency ").concat(Yv[m]," is recovered"));case 23:e.next=29;break;case 25:return e.prev=25,e.t3=e.catch(15),Lf.d(this.TAG,"schedule: Stopping retry task of ".concat(Yv[n]," as it's dependency ").concat(Yv[m]," failed to recover")),f=!0,e.abrupt("break",31);case 29:e.next=12;break;case 31:if(!(l>=c||f)){e.next=38;break}if(r.description+=". [".concat(Yv[n],"] Could not recover after ").concat(l," tries"),f&&(r.description+=" Could not recover all of it's required dependencies - [".concat(p.map((function(e){return Yv[e]})).toString(),"]")),r.isTerminal=!0,this.inProgress.delete(n),this.sendEvent(r,n),this.reset(),!i){e.next=36;break}this.onStateChange(pm.Failed,r),e.next=37;break;case 36:throw r;case 37:return e.abrupt("return");case 38:return i&&this.onStateChange(pm.Reconnecting,r),y=this.getDelayForRetryCount(n,l),Lf.i(this.TAG,"schedule: [".concat(Yv[n],"] [failedRetryCount=").concat(l,"] Scheduling retry task in ").concat(y,"ms")),e.prev=41,e.next=44,this.setTimeoutPromise(a,y);case 44:b=e.sent,e.next=50;break;case 47:e.prev=47,e.t4=e.catch(41),b=!1,Lf.w(this.TAG,"[".concat(Yv[n],"] Un-caught exception ").concat(e.t4.name," in retry-task, initiating retry"),e.t4);case 50:if(!b){e.next=55;break}k=this.inProgress.get(n),this.inProgress.delete(n),null==k||k.resolve(l),i&&0===this.inProgress.size&&this.onStateChange(s),Lf.i(this.TAG,"schedule: [".concat(Yv[n],"] [failedRetryCount=").concat(l,"] Recovered \u267b\ufe0f")),e.next=57;break;case 55:return e.next=57,this.scheduleTask({category:n,error:r,changeState:i,task:a,originalState:s,maxFailedRetries:c,failedRetryCount:l+1});case 57:case"end":return e.stop()}}),e,this,[[15,25],[41,47]])})))}},{key:"getBaseDelayForTask",value:function(e,t){return e===Yv.JoinWSMessageFailed?2:Math.pow(2,t)}},{key:"getDelayForRetryCount",value:function(e,t){var n=this.getBaseDelayForTask(e,t),r=e===Yv.JoinWSMessageFailed?2*Math.random():Math.random();return Math.round(1e3*Math.min(n+r,60))}},{key:"setTimeoutPromise",value:function(e,t){return Ef(this,null,Bt().mark((function n(){var r=this;return Bt().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",new Promise((function(n,i){var a=window.setTimeout((function(){return Ef(r,null,Bt().mark((function t(){var r;return Bt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e();case 3:(r=t.sent)&&this.retryTaskIds.splice(this.retryTaskIds.indexOf(a),1),n(r),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),i(t.t0);case 10:case"end":return t.stop()}}),t,this,[[0,7]])})))}),t);r.retryTaskIds.push(a)})));case 1:case"end":return n.stop()}}),n)})))}}]),e}(),bm=function(e){it(n,e);var t=ut(n);function n(){var e;return et(this,n),(e=t.call(this,100)).localStorage=new Sf("hms-analytics"),e.localStorage.clear(),e.initLocalStorageQueue(),e}return nt(n,[{key:"enqueue",value:function(e){Ft(at(n.prototype),"enqueue",this).call(this,e),this.localStorage.set(this.storage)}},{key:"dequeue",value:function(){var e=Ft(at(n.prototype),"dequeue",this).call(this);return this.localStorage.set(this.storage),e}},{key:"initLocalStorageQueue",value:function(){var e,t=this;null==(e=this.localStorage.get())||e.forEach((function(e){var r=new Qf(e);Ft(at(n.prototype),"enqueue",t).call(t,r)}))}}]),n}(Wp),km=function(e){it(n,e);var t=ut(n);function n(e){var r;return et(this,n),(r=t.call(this)).transportProvider=e,r.failedEvents=new bm,r}return nt(n)}(function(){function e(){et(this,e),this.TAG="[AnalyticsTransport]"}return nt(e,[{key:"sendEvent",value:function(e){try{this.sendSingleEvent(e),this.flushFailedEvents()}catch(t){Lf.w(this.TAG,"sendEvent failed",t)}}},{key:"flushFailedEvents",value:function(e){var t;try{for(Lf.d(this.TAG,"Flushing failed events",this.failedEvents);this.failedEvents.size()>0;){var n=this.failedEvents.dequeue();n&&((null==(t=n.metadata)?void 0:t.peer.peer_id)!==e&&n.metadata.peer.peer_id?Fv.sendEvent(n):this.sendSingleEvent(n))}}catch(r){Lf.w(this.TAG,"flushFailedEvents failed",r)}}},{key:"sendSingleEvent",value:function(e){try{this.transportProvider.sendEvent(e),Lf.d(this.TAG,"Sent event",e.name,e)}catch(t){throw Lf.w(this.TAG,"".concat(this.transportProvider.TAG,".sendEvent failed, adding to local storage events"),{event:e,error:t}),this.failedEvents.enqueue(e),t}}}]),e}());!function(e){e[e.Publish=0]="Publish",e[e.Subscribe=1]="Subscribe"}(mm||(mm={}));var xm="[VALIDATIONS]";function wm(e){return null!=e}var Tm=function(){if(!wm(RTCPeerConnection)){var e=pp.MissingRTCPeerConnection();throw Lf.e(xm,e),e}},Em=function(){if(!wm(navigator.mediaDevices)){var e=pp.MissingMediaDevices();throw Lf.e(xm,e),e}};function _m(e,t){var n,r=(0,ff.Qc)(e.sdp);if(!(null==(n=r.origin)?void 0:n.username.startsWith("mozilla")))return e;var i=t?Array.from(t.values()):[];return r.media.forEach((function(e){var t,n,r,a=null==(t=e.msid)?void 0:t.split(" ")[0],s=null==(n=i.find((function(t){return t.type===e.type&&t.stream_id===a})))?void 0:n.track_id;s&&(e.msid=null==(r=e.msid)?void 0:r.replace(/\s(.+)/," ".concat(s)))})),{type:e.type,sdp:(0,ff.cW)(r)}}function Sm(e){return e.sdp.includes("usedtx=1")?e:{type:e.type,sdp:e.sdp.replace("useinbandfec=1","useinbandfec=1;usedtx=1")}}var Am,Cm,Im="[HMSConnection]",Rm=function(){function e(t,n){et(this,e),this.candidates=new Array,this.role=t,this.signal=n}return nt(e,[{key:"iceConnectionState",get:function(){return this.nativeConnection.iceConnectionState}},{key:"connectionState",get:function(){return this.nativeConnection.connectionState}},{key:"action",get:function(){return this.role===mm.Publish?ep.PUBLISH:ep.SUBSCRIBE}},{key:"addTransceiver",value:function(e,t){return this.nativeConnection.addTransceiver(e,t)}},{key:"createOffer",value:function(e,t){return Ef(this,null,Bt().mark((function n(){var r;return Bt().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,this.nativeConnection.createOffer(t);case 3:return r=n.sent,n.abrupt("return",(Lf.d(Im,"[role=".concat(this.role,"] createOffer offer=").concat(JSON.stringify(r,null,1))),Sm(_m(r,e))));case 7:throw n.prev=7,n.t0=n.catch(0),hp.CreateOfferFailed(this.action,n.t0.message);case 10:case"end":return n.stop()}}),n,this,[[0,7]])})))}},{key:"createAnswer",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;return Ef(this,null,Bt().mark((function t(){var n;return Bt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.nativeConnection.createAnswer(e);case 3:return n=t.sent,t.abrupt("return",(Lf.d(Im,"[role=".concat(this.role,"] createAnswer answer=").concat(JSON.stringify(n,null,1))),n));case 7:throw t.prev=7,t.t0=t.catch(0),hp.CreateAnswerFailed(this.action,t.t0.message);case 10:case"end":return t.stop()}}),t,this,[[0,7]])})))}},{key:"setLocalDescription",value:function(e){return Ef(this,null,Bt().mark((function t(){return Bt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,Lf.d(Im,"[role=".concat(this.role,"] setLocalDescription description=").concat(JSON.stringify(e,null,1))),t.next=4,this.nativeConnection.setLocalDescription(e);case 4:t.next=9;break;case 6:throw t.prev=6,t.t0=t.catch(0),hp.SetLocalDescriptionFailed(this.action,t.t0.message);case 9:case"end":return t.stop()}}),t,this,[[0,6]])})))}},{key:"setRemoteDescription",value:function(e){return Ef(this,null,Bt().mark((function t(){return Bt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,Lf.d(Im,"[role=".concat(this.role,"] setRemoteDescription description=").concat(JSON.stringify(e,null,1))),t.next=4,this.nativeConnection.setRemoteDescription(e);case 4:t.next=9;break;case 6:throw t.prev=6,t.t0=t.catch(0),hp.SetRemoteDescriptionFailed(this.action,t.t0.message);case 9:case"end":return t.stop()}}),t,this,[[0,6]])})))}},{key:"addIceCandidate",value:function(e){return Ef(this,null,Bt().mark((function t(){return Bt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return Lf.d(Im,"[role=".concat(this.role,"] addIceCandidate candidate=").concat(JSON.stringify(e,null,1))),t.next=3,this.nativeConnection.addIceCandidate(e);case 3:case"end":return t.stop()}}),t,this)})))}},{key:"remoteDescription",get:function(){return this.nativeConnection.remoteDescription}},{key:"getSenders",value:function(){return this.nativeConnection.getSenders()}},{key:"logSelectedIceCandidatePairs",value:function(){var e=this;(this.role===mm.Publish?this.getSenders():this.getReceivers()).forEach((function(t){var n,r=null==(n=t.track)?void 0:n.kind;try{if(t.transport){var i=t.transport.iceTransport,a=function(){"function"==typeof i.getSelectedCandidatePair&&(e.selectedCandidatePair=i.getSelectedCandidatePair(),Lf.d(Im,"".concat(mm[e.role]," connection"),"selected ".concat(r||"unknown"," candidate pair"),JSON.stringify(e.selectedCandidatePair,null,2)))};"function"==typeof i.onselectedcandidatepairchange&&(i.onselectedcandidatepairchange=a),a()}}catch(i){Lf.w(Im,"Error in logging selected ice candidate pair for ".concat(mm[e.role]," connection"),i)}}))}},{key:"removeTrack",value:function(e){"closed"!==this.nativeConnection.signalingState&&this.nativeConnection.removeTrack(e)}},{key:"setMaxBitrate",value:function(e,t){return Ef(this,null,Bt().mark((function n(){var r,i;return Bt().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r=this.getSenders().find((function(e){var n;return(null==(n=null==e?void 0:e.track)?void 0:n.id)===t.getTrackIDBeingSent()})),!r){n.next=8;break}return(i=r.getParameters()).encodings.length>0&&(i.encodings[0].maxBitrate=1e3*e),n.next=6,r.setParameters(i);case 6:n.next=9;break;case 8:Lf.w(Im,"no sender found to setMaxBitrate for track - ".concat(t.trackId,", sentTrackId - ").concat(t.getTrackIDBeingSent()));case 9:case"end":return n.stop()}}),n,this)})))}},{key:"getStats",value:function(){return Ef(this,null,Bt().mark((function e(){return Bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.nativeConnection.getStats();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})))}},{key:"close",value:function(){return Ef(this,null,Bt().mark((function e(){return Bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.nativeConnection.close();case 1:case"end":return e.stop()}}),e,this)})))}},{key:"getReceivers",value:function(){return this.nativeConnection.getReceivers()}}]),e}(),Pm=function(e){it(n,e);var t=ut(n);function n(e,r,i,a){var s;return et(this,n),(s=t.call(this,mm.Publish,e)).TAG="[HMSPublishConnection]",s.observer=i,s.transport=a,s.nativeConnection=new RTCPeerConnection(r),s.nativeConnection.createDataChannel(sv,{protocol:"SCTP"}),s.nativeConnection.onicecandidate=function(t){var n=t.candidate;n&&e.trickle(s.role,n)},s.nativeConnection.oniceconnectionstatechange=function(){s.observer.onIceConnectionChange(s.nativeConnection.iceConnectionState)},s.nativeConnection.onconnectionstatechange=function(){s.observer.onConnectionStateChange(s.nativeConnection.connectionState)},s}return nt(n,[{key:"initAfterJoin",value:function(){var e=this;this.nativeConnection.onnegotiationneeded=function(){return Ef(e,null,Bt().mark((function e(){return Bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Lf.d(this.TAG,"onnegotiationneeded"),e.next=3,this.observer.onRenegotiationNeeded();case 3:case"end":return e.stop()}}),e,this)})))}}},{key:"trackUpdate",value:function(e){this.transport.trackUpdate(e)}}]),n}(Rm),Dm=function(){function e(t,n){var r=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";et(this,e),this.TAG="[HMSDataChannel]",this.nativeChannel=t,this.observer=n,this.metadata=i,t.onmessage=function(e){r.observer.onMessage(e.data)}}return nt(e,[{key:"id",get:function(){return this.nativeChannel.id}},{key:"label",get:function(){return this.nativeChannel.label}},{key:"readyState",get:function(){return this.nativeChannel.readyState}},{key:"send",value:function(e){Lf.d(this.TAG,"[".concat(this.metadata,"] Sending [size=").concat(e.length,"] message=").concat(e)),this.nativeChannel.send(e)}},{key:"close",value:function(){this.nativeChannel.close()}}]),e}(),Nm=function(e){it(n,e);var t=ut(n);function n(e,r,i){var a;return et(this,n),(a=t.call(this,mm.Subscribe,e)).TAG="[HMSSubscribeConnection]",a.remoteStreams=new Map,a.MAX_RETRIES=3,a.pendingMessageQueue=[],a.eventEmitter=new(hf())({maxListeners:15}),a.handlePendingApiMessages=function(){a.eventEmitter.emit("open",!0),a.pendingMessageQueue.length>0&&(Lf.d(a.TAG,"Found pending message queue, sending messages"),a.pendingMessageQueue.forEach((function(e){return a.sendOverApiDataChannel(e)})),a.pendingMessageQueue.length=0)},a.sendMessage=function(e,t){return Ef(ot(a),null,Bt().mark((function n(){var r,i,a,s,o;return Bt().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.t0="open"!==(null==(r=this.apiChannel)?void 0:r.readyState),!n.t0){n.next=4;break}return n.next=4,this.eventEmitter.waitFor("open");case 4:a=0;case 5:if(!(a<this.MAX_RETRIES)){n.next=23;break}return this.apiChannel.send(e),n.next=9,this.waitForResponse(t);case 9:if(i=n.sent,!(s=i.error)){n.next=19;break}if(Lf.e(this.TAG,"Failed sending ".concat(t),{request:e,try:a+1,error:s}),s.code/100==5||429===s.code){n.next=14;break}throw Error("code=".concat(s.code,", message=").concat(s.message));case 14:return o=1e3*(2+2*Math.random()),n.next=17,Kp(o);case 17:n.next=20;break;case 19:return n.abrupt("break",23);case 20:a++,n.next=5;break;case 23:return n.abrupt("return",i);case 24:case"end":return n.stop()}}),n,this)})))},a.waitForResponse=function(e){return Ef(ot(a),null,Bt().mark((function t(){var n,r;return Bt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.eventEmitter.waitFor("message",(function(t){return t.includes(e)}));case 2:if(n=t.sent,!(r=JSON.parse(n[0])).error){t.next=6;break}throw r.error;case 6:return t.abrupt("return",(Lf.d(this.TAG,"response for ".concat(e," -"),JSON.stringify(r,null,2)),r));case 7:case"end":return t.stop()}}),t,this)})))},a.observer=i,a.nativeConnection=new RTCPeerConnection(r),a.initNativeConnectionCallbacks(),a}return nt(n,[{key:"initNativeConnectionCallbacks",value:function(){var e=this;this.nativeConnection.oniceconnectionstatechange=function(){e.observer.onIceConnectionChange(e.nativeConnection.iceConnectionState)},this.nativeConnection.onconnectionstatechange=function(){e.observer.onConnectionStateChange(e.nativeConnection.connectionState)},this.nativeConnection.ondatachannel=function(t){t.channel.label===sv&&(e.apiChannel=new Dm(t.channel,{onMessage:function(t){e.eventEmitter.emit("message",t),e.observer.onApiChannelMessage(t)}},"role=".concat(e.role)),t.channel.onopen=e.handlePendingApiMessages)},this.nativeConnection.onicecandidate=function(t){null!==t.candidate&&e.signal.trickle(e.role,t.candidate)},this.nativeConnection.ontrack=function(t){var n,r=t.streams[0],i=r.id;if(!e.remoteStreams.has(i)){var a=new Lp(r,e);e.remoteStreams.set(i,a),r.onremovetrack=function(t){var n=a.tracks.findIndex((function(e){return e.nativeTrack.id===t.track.id}));if(n>=0){var r=a.tracks[n];e.observer.onTrackRemove(r),a.tracks.splice(n,1),0===a.tracks.length&&e.remoteStreams.delete(i)}}}var s=e.remoteStreams.get(i),o=new("audio"===t.track.kind?Zp:_v)(s,t.track),c=function(e,t){var n;if((null==e?void 0:e.sdp)&&t){var r=(0,ff.Qc)(e.sdp).media.find((function(e){return wm(e.mid)&&parseInt(e.mid)===parseInt(t)}));return null==(n=null==r?void 0:r.msid)?void 0:n.split(" ")[1]}}(e.remoteDescription,null==(n=t.transceiver)?void 0:n.mid);c&&o.setSdpTrackId(c),s.tracks.push(o),e.observer.onTrackAdd(o)}}},{key:"sendOverApiDataChannel",value:function(e){this.apiChannel&&"open"===this.apiChannel.readyState?this.apiChannel.send(e):(Lf.w(this.TAG,"API Data channel not ".concat(this.apiChannel?"open":"present",", queueing"),e),this.pendingMessageQueue.push(e))}},{key:"sendOverApiDataChannelWithResponse",value:function(e,t){return Ef(this,null,Bt().mark((function n(){var r,i;return Bt().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=lf(),i=JSON.stringify(xf({id:t||r,jsonrpc:"2.0"},e)),n.abrupt("return",this.sendMessage(i,r));case 2:case"end":return n.stop()}}),n,this)})))}},{key:"close",value:function(){var e=this,t=function(t){return Ft(at(n.prototype),t,e)};return Ef(this,null,Bt().mark((function e(){var n;return Bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t("close").call(this);case 2:null==(n=this.apiChannel)||n.close();case 3:case"end":return e.stop()}}),e,this)})))}}]),n}(Rm),Om=function(){function e(t,n){et(this,e),this.store=t,this.eventBus=n,this.TAG="[TrackDegradationController]",this.MAX_RECOVER_GRACE_PERIOD=120,this.recoverAttemptCount=0,this.packetsLost=0;var r=this.store.getSubscribeDegradationParams();this.PACKETS_LOST_THRESHOLD=r.packetLossThreshold,this.MIN_DEGRADE_GRACE_PERIOD=r.degradeGracePeriodSeconds,this.MIN_RECOVER_GRACE_PERIOD=r.recoverGracePeriodSeconds,this.degradeGracePeriod=this.MIN_DEGRADE_GRACE_PERIOD,this.recoverGracePeriod=this.MIN_RECOVER_GRACE_PERIOD}return nt(e,[{key:"isAttemptingRecover",get:function(){return Boolean(this.recoveringTrack)}},{key:"handleRtcStatsChange",value:function(e){var t=e>this.packetsLost+this.PACKETS_LOST_THRESHOLD;this.packetsLost=e,t?this.degrade():this.recover()}},{key:"degrade",value:function(){if(!(this.degradeGracePeriod>0))return this.isAttemptingRecover?this.cancelRecovery():(Lf.d(this.TAG,"Packet loss increased, Degrading",{packetsLost:this.packetsLost}),this.degradeActiveTracksByHalf(),this.degradeGracePeriod=this.MIN_DEGRADE_GRACE_PERIOD,void(this.recoverGracePeriod=this.MIN_RECOVER_GRACE_PERIOD));this.degradeGracePeriod--}},{key:"recover",value:function(){this.degradeGracePeriod=this.MIN_DEGRADE_GRACE_PERIOD,this.recoverGracePeriod>0?this.recoverGracePeriod--:(this.recoveringTrack=this.getActiveTracks(!0).find((function(e){return e.degraded})),this.recoveringTrack&&(Lf.d(this.TAG,"Packet lost stable, recovering track",this.recoveringTrack),this.recoveringTrack.setDegradedFromSdk(!1),this.eventBus.trackRestored.publish(this.recoveringTrack),this.recoverGracePeriod=this.MIN_RECOVER_GRACE_PERIOD))}},{key:"cleanUp",value:function(){this.eventBus.trackDegraded.removeAllListeners(),this.eventBus.trackRestored.removeAllListeners()}},{key:"degradeActiveTracksByHalf",value:function(){var e=this.getActiveTracks(!1);if(e.length){Lf.d(this.TAG,{activeTracks:te(e)});for(var t=Math.ceil(e.length/2);t--;){var n=e.pop();n.setDegradedFromSdk(!0),this.eventBus.trackDegraded.publish(n)}}}},{key:"getActiveTracks",value:function(e){var t=this;return this.store.getRemoteVideoTracks().filter((function(t){return t.hasSinks()&&(!t.degraded||e)})).sort((function(e,n){var r=t.store.getComparator().getTrackComparators();return-1*(r.screenShare(e,n)||r.rolePriority(e,n)||r.peerAudioLevel(e,n)||t.store.getComparator().stringComparator(e.trackId,n.trackId))})).slice(0)}},{key:"cancelRecovery",value:function(){this.recoveringTrack&&(this.recoveringTrack.setDegradedFromSdk(!0),this.eventBus.trackDegraded.publish(this.recoveringTrack)),this.recoveringTrack=void 0,this.recoverAttemptCount++,this.recoverGracePeriod=this.getDelayForRecoverCount(this.recoverAttemptCount),this.degradeGracePeriod=this.MIN_DEGRADE_GRACE_PERIOD,Lf.d(this.TAG,"Recover Attempt Failed",{count:this.recoverAttemptCount,delay:this.recoverGracePeriod})}},{key:"getDelayForRecoverCount",value:function(e){var t=this.MIN_RECOVER_GRACE_PERIOD+this.MIN_RECOVER_GRACE_PERIOD*e;return Math.min(t,this.MAX_RECOVER_GRACE_PERIOD)}}]),e}(),Lm=function(e,t,n,r){return Ef(void 0,null,Bt().mark((function i(){var a,s,o,c,u,l;return Bt().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return o={},i.prev=1,i.next=4,null==(a=e.publish)?void 0:a.call(e,t.getTrackBeingSent());case 4:s=i.sent,c={},u={},l={},null==s||s.forEach((function(e){switch(e.type){case"outbound-rtp":u[e.id]=e;break;case"remote-inbound-rtp":l[e.ssrc]=e;break;case"codec":c[e.id]=e.mimeType}})),Object.keys(xf({},u)).forEach((function(e){var i,a,s=null==(i=u[e])?void 0:i.codecId,d=s?c[s]:void 0;d&&(a=d.substring(d.indexOf("/")+1));var h=u[e],f=l[h.ssrc];o[e]=wf(xf({},h),{bitrate:Vm("bytesSent",h,null==r?void 0:r[e]),packetsLost:null==f?void 0:f.packetsLost,jitter:null==f?void 0:f.jitter,peerName:n,peerID:t.peerId,codec:a})})),i.next=12;break;case 9:i.prev=9,i.t0=i.catch(1),Lf.w("[HMSWebrtcStats]","Error in getting local track stats",t,i.t0);case 12:return i.abrupt("return",o);case 13:case"end":return i.stop()}}),i,null,[[1,9]])})))},Mm=function(e,t,n,r){return Ef(void 0,null,Bt().mark((function i(){var a,s,o,c,u;return Bt().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,null==(a=e.subscribe)?void 0:a.call(e,t.nativeTrack);case 3:s=i.sent,i.next=9;break;case 6:i.prev=6,i.t0=i.catch(0),Lf.w("[HMSWebrtcStats]","Error in getting remote track stats",t,i.t0);case 9:return o=jm(s),c=Vm("bytesReceived",o,r),u=Hm("packetsLost",o,r),i.abrupt("return",((null==o?void 0:o.remote)&&Object.assign(o.remote,{packetsLostRate:Hm("packetsLost",o.remote,null==r?void 0:r.remote)}),o&&Object.assign(o,{bitrate:c,packetsLostRate:u,peerId:t.peerId,peerName:n,codec:o.codec})));case 11:case"end":return i.stop()}}),i,null,[[0,6]])})))},jm=function(e){var t,n,r={};null==e||e.forEach((function(e){switch(e.type){case"inbound-rtp":case"outbound-rtp":t=e;break;case"remote-inbound-rtp":n=e;break;case"codec":r[e.id]=e.mimeType}}));var i,a=(null==t?void 0:t.codecId)?r[t.codecId]:void 0;return a&&(i=a.substring(a.indexOf("/")+1)),t&&Object.assign(t,{remote:n,codec:i})},Fm=function(e,t,n){var r=Um(t),i=Vm("publish"===e?"bytesSent":"bytesReceived",r,n&&n[e]);return r&&Object.assign(r,{bitrate:i})},Um=function(e){var t;return e.forEach((function(n){"transport"===n.type&&(t=e.get(n.selectedCandidatePairId))})),t||e.forEach((function(e){"candidate-pair"===e.type&&e.selected&&(t=e)})),t},Bm=function(e){var t={packetsLost:0,jitter:0};return null==e||e.forEach((function(e){e.packetsLost&&(t.packetsLost+=e.packetsLost),e.jitter>t.jitter&&(t.jitter=e.jitter)})),t},Gm=function(e,t){return Array.from(new Set(e.concat(t)))},Vm=function(e,t,n){return 8*Hm(e,t,n)},Hm=function(e,t,n){var r=t&&t[e],i=n?n[e]:null;return[t,n,wm(r),wm(i)].every((function(e){return!!e}))?1e3*zm(r,i,null==t?void 0:t.timestamp,null==n?void 0:n.timestamp):0},zm=function(e,t,n,r){return wm(e)&&wm(t)&&n&&r?(e-t)/(n-r):0},Wm=function(){function e(t,n){var r;et(this,e),this.getStats=t,this.store=n,this.TAG="[HMSWebrtcStats]",this.peerStats={},this.remoteTrackStats={},this.localTrackStats={},this.localPeerID=null==(r=this.store.getLocalPeer())?void 0:r.peerId}return nt(e,[{key:"getLocalPeerStats",value:function(){return this.peerStats[this.localPeerID]}},{key:"getRemoteTrackStats",value:function(e){return this.remoteTrackStats[e]}},{key:"getLocalTrackStats",value:function(){return this.localTrackStats}},{key:"updateStats",value:function(){return Ef(this,null,Bt().mark((function e(){return Bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.updateLocalPeerStats();case 2:return e.next=4,this.updateLocalTrackStats();case 4:return e.next=6,this.updateRemoteTrackStats();case 6:case"end":return e.stop()}}),e,this)})))}},{key:"updateLocalPeerStats",value:function(){return Ef(this,null,Bt().mark((function e(){var t,n,r,i,a,s,o,c,u,l,d,h,f,p,v,m;return Bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=this.getLocalPeerStats(),e.prev=1,e.next=4,null==(n=(t=this.getStats).publish)?void 0:n.call(t);case 4:c=e.sent,e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),Lf.w(this.TAG,"Error in getting publish stats",e.t0);case 10:return u=c&&Fm("publish",c,o),e.prev=11,e.next=14,null==(i=(r=this.getStats).subscribe)?void 0:i.call(r);case 14:l=e.sent,e.next=20;break;case 17:e.prev=17,e.t1=e.catch(11),Lf.w(this.TAG,"Error in getting subscribe stats",e.t1);case 20:d=l&&Fm("subscribe",l,o),h=Bm(l),f=h.packetsLost,p=h.jitter,v=zm(f,null==(a=null==o?void 0:o.subscribe)?void 0:a.packetsLost,null==d?void 0:d.timestamp,null==(s=null==o?void 0:o.subscribe)?void 0:s.timestamp),m=d&&Object.assign(d,{packetsLostRate:v,jitter:p,packetsLost:f}),this.peerStats[this.localPeerID]={publish:u,subscribe:m};case 22:case"end":return e.stop()}}),e,this,[[1,7],[11,17]])})))}},{key:"updateRemoteTrackStats",value:function(){return Ef(this,null,Bt().mark((function e(){var t,n,r,i,a,s,o,c,u,l,d=this;return Bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=this.store.getTracksMap(),r=Gm(Object.keys(this.remoteTrackStats),Object.keys(n)).filter((function(e){return n[e]&&n[e].peerId!==d.localPeerID})),i=Ut(r),e.prev=2,i.s();case 4:if((a=i.n()).done){e.next=19;break}if(s=a.value,!(o=n[s])){e.next=16;break}return c=o.peerId&&(null==(t=this.store.getPeerById(o.peerId))?void 0:t.name),u=this.getRemoteTrackStats(o.trackId),e.next=12,Mm(this.getStats,o,c,u);case 12:(l=e.sent)&&(this.remoteTrackStats[s]=l),e.next=17;break;case 16:delete this.remoteTrackStats[s];case 17:e.next=4;break;case 19:e.next=24;break;case 21:e.prev=21,e.t0=e.catch(2),i.e(e.t0);case 24:return e.prev=24,i.f(),e.finish(24);case 27:case"end":return e.stop()}}),e,this,[[2,21,24,27]])})))}},{key:"updateLocalTrackStats",value:function(){return Ef(this,null,Bt().mark((function e(){var t,n,r,i,a,s,o,c,u;return Bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=this.store.getLocalPeerTracks().reduce((function(e,t){return e[t.getTrackIDBeingSent()]=t,e}),{}),r=Gm(Object.keys(this.localTrackStats),Object.keys(n)),i=Ut(r),e.prev=2,i.s();case 4:if((a=i.n()).done){e.next=18;break}if(s=a.value,!(o=n[s])){e.next=15;break}return c=null==(t=this.store.getLocalPeer())?void 0:t.name,e.next=11,Lm(this.getStats,o,c,this.localTrackStats[s]);case 11:(u=e.sent)&&(this.localTrackStats[s]=u),e.next=16;break;case 15:delete this.localTrackStats[s];case 16:e.next=4;break;case 18:e.next=23;break;case 20:e.prev=20,e.t0=e.catch(2),i.e(e.t0);case 23:return e.prev=23,i.f(),e.finish(23);case 26:case"end":return e.stop()}}),e,this,[[2,20,23,26]])})))}}]),e}(),Km=function(){function e(t,n,r,i){var a=this;et(this,e),this.store=t,this.eventBus=n,this.publishConnection=r,this.subscribeConnection=i,this.TAG="[HMSWebrtcInternals]",this.interval=1e3,this.isMonitored=!1,this.handleStatsUpdate=function(){return Ef(a,null,Bt().mark((function e(){var t;return Bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null==(t=this.hmsStats)?void 0:t.updateStats();case 2:this.eventBus.statsUpdate.publish(this.hmsStats);case 3:case"end":return e.stop()}}),e,this)})))}}return nt(e,[{key:"getPublishPeerConnection",value:function(){return this.publishConnection}},{key:"getSubscribePeerConnection",value:function(){return this.subscribeConnection}},{key:"getCurrentStats",value:function(){return this.hmsStats}},{key:"onStatsChange",value:function(e){var t=this;return this.eventBus.statsUpdate.subscribe(e),function(){t.eventBus.statsUpdate.unsubscribe(e)}}},{key:"setPeerConnections",value:function(e){var t,n,r=e.publish,i=e.subscribe;this.publishConnection=r,this.subscribeConnection=i,this.hmsStats=new Wm({publish:null==(t=this.publishConnection)?void 0:t.getStats.bind(this.publishConnection),subscribe:null==(n=this.subscribeConnection)?void 0:n.getStats.bind(this.subscribeConnection)},this.store)}},{key:"start",value:function(){return Ef(this,null,Bt().mark((function e(){var t=this;return Bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isMonitored){e.next=3;break}return Lf.d(this.TAG,"Already started"),e.abrupt("return");case 3:this.stop(),this.isMonitored=!0,Lf.d(this.TAG,"Starting Webrtc Stats Monitor"),this.startLoop().then((function(){return Lf.d(t.TAG,"Stopping Webrtc Stats Monitor")})).catch((function(e){return Lf.e(t.TAG,e.message)}));case 4:case"end":return e.stop()}}),e,this)})))}},{key:"stop",value:function(){this.isMonitored=!1}},{key:"startLoop",value:function(){return Ef(this,null,Bt().mark((function e(){return Bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isMonitored){e.next=7;break}return e.next=3,this.handleStatsUpdate();case 3:return e.next=5,Kp(this.interval);case 5:e.next=0;break;case 7:case"end":return e.stop()}}),e,this)})))}},{key:"cleanUp",value:function(){this.stop(),this.eventBus.statsUpdate.removeAllListeners()}}]),e}(),qm="[InitService]",Ym=function(){function e(){et(this,e)}return nt(e,null,[{key:"handleError",value:function(e,t){switch(e.status){case 404:throw lp.EndpointUnreachable(ep.INIT,t.message||e.statusText);case 200:break;default:throw lp.ServerErrors(t.code||e.status,ep.INIT,t.message||(null==e?void 0:e.statusText))}}},{key:"fetchInitConfig",value:function(e){return Ef(this,arguments,Bt().mark((function e(t){var n,r,i,a,s,o,c,u,l,d,h;return Bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.token,r=t.peerId,i=t.userAgent,a=t.initEndpoint,s=void 0===a?"https://prod-init.100ms.live":a,o=t.region,c=void 0===o?"":o,Lf.d(qm,"fetchInitConfig: initEndpoint=".concat(s," token=").concat(n," peerId=").concat(r," region=").concat(c," ")),u=Jm(s,r,i,c),e.prev=3,e.next=6,fetch(u,{headers:{Authorization:"Bearer ".concat(n)}});case 6:return l=e.sent,e.next=9,l.json();case 9:return d=e.sent,e.abrupt("return",(this.handleError(l,d),Lf.d(qm,"config is ".concat(JSON.stringify(d,null,2))),Qm(d)));case 13:throw e.prev=13,e.t0=e.catch(3),h=e.t0,["Failed to fetch","NetworkError"].some((function(e){return h.message.includes(e)}))?lp.EndpointUnreachable(ep.INIT,h.message):h;case 17:case"end":return e.stop()}}),e,this,[[3,13]])})))}}]),e}();function Jm(e,t,n,r){try{var i=new URL("/init",e);return r&&r.trim().length>0&&i.searchParams.set("region",r.trim()),i.searchParams.set("peer_id",t),i.searchParams.set("user_agent_v2",n),i.toString()}catch(s){var a=s;throw Lf.e(qm,a.name,a.message),a}}function Qm(e){var t;return wf(xf({},e),{rtcConfiguration:wf(xf({},e.rtcConfiguration),{iceServers:null==(t=e.rtcConfiguration)?void 0:t.ice_servers})})}function Xm(e){switch(e){case Cm.JOIN:return ep.JOIN;case Cm.OFFER:return ep.PUBLISH;case Cm.ANSWER:return ep.SUBSCRIBE;case Cm.TRACK_UPDATE:return ep.TRACK;default:return ep.NONE}}!function(e){e.FLAG_SERVER_SUB_DEGRADATION="subscribeDegradation",e.FLAG_SERVER_SIMULCAST="simulcast",e.FLAG_NON_WEBRTC_DISABLE_OFFER="nonWebRTCDisableOffer"}(Am||(Am={})),function(e){e.JOIN="join",e.OFFER="offer",e.ANSWER="answer",e.TRICKLE="trickle",e.TRACK_UPDATE="track-update",e.BROADCAST="broadcast",e.ANALYTICS="analytics",e.SERVER_ERROR="on-error",e.SERVER_WARNING="on-warning",e.SDK_NOTIFICATION="sdk-notification",e.LEAVE="leave",e.END_ROOM="end-room",e.PING="ping",e.ROLE_CHANGE_REQUEST="role-change-request",e.ROLE_CHANGE="role-change",e.TRACK_UPDATE_REQUEST="track-update-request",e.PEER_LEAVE_REQUEST="peer-leave-request",e.CHANGE_TRACK_MUTE_STATE_REQUEST="change-track-mute-state-request",e.START_RTMP_OR_RECORDING_REQUEST="rtmp-start",e.STOP_RTMP_AND_RECORDING_REQUEST="rtmp-stop",e.UPDATE_PEER_METADATA="peer-update",e.START_HLS_STREAMING="hls-start",e.STOP_HLS_STREAMING="hls-stop",e.HLS_TIMED_METADATA="hls-timed-metadata",e.SET_METADATA="set-metadata",e.GET_METADATA="get-metadata"}(Cm||(Cm={}));var Zm=function(){function e(t){var n=this;et(this,e),this.TAG="[SIGNAL]: ",this.pongResponseTimes=new Wp(5),this.isJoinCompleted=!1,this.pendingTrickle=[],this.socket=null,this.callbacks=new Map,this._isConnected=!1,this.id=0,this.onCloseHandler=function(){},this.offlineListener=function(){Lf.d(n.TAG,"Window network offline"),n.setIsConnected(!1,"Window network offline")},this.onlineListener=function(){Lf.d(n.TAG,"Window network online"),n.observer.onNetworkOnline()},this.observer=t,window.addEventListener("offline",this.offlineListener),window.addEventListener("online",this.onlineListener),this.onMessageHandler=this.onMessageHandler.bind(this)}return nt(e,[{key:"isConnected",get:function(){return this._isConnected}},{key:"setIsConnected",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";Lf.d(this.TAG,"isConnected set id: ".concat(this.id,", oldValue: ").concat(this._isConnected,", newValue: ").concat(e)),this._isConnected!==e&&(this._isConnected&&!e?(this._isConnected=e,this.observer.onOffline(t)):!this._isConnected&&e&&(this._isConnected=e,this.observer.onOnline()))}},{key:"getPongResponseTimes",value:function(){return this.pongResponseTimes.toList()}},{key:"internalCall",value:function(e,t){return Ef(this,null,Bt().mark((function n(){var r,i,a,s,o=this;return Bt().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return i=lf(),a={method:e,params:t,id:i,jsonrpc:"2.0"},null==(r=this.socket)||r.send(JSON.stringify(a)),n.prev=2,n.next=5,new Promise((function(e,t){o.callbacks.set(i,{resolve:e,reject:t})}));case 5:return n.abrupt("return",n.sent);case 8:throw n.prev=8,n.t0=n.catch(2),s=n.t0,fp.ServerErrors(Number(s.code),Xm(e),s.message);case 12:case"end":return n.stop()}}),n,this,[[2,8]])})))}},{key:"notify",value:function(e,t){var n,r,i={method:e,params:t};(null==(n=this.socket)?void 0:n.readyState)===WebSocket.OPEN&&(null==(r=this.socket)||r.send(JSON.stringify(i)))}},{key:"open",value:function(e){var t=this;return new Promise((function(n,r){var i=!1;t.socket&&(t.socket.close(),t.socket.removeEventListener("close",t.onCloseHandler),t.socket.removeEventListener("message",t.onMessageHandler)),t.socket=new WebSocket(e);var a=function(e){Lf.e(t.TAG,"Error from websocket",e),i=!0,r(up.FailedToConnect(ep.JOIN,"Error opening websocket connection - ".concat(e)))};t.onCloseHandler=function(e){Lf.e("Websocket closed code=".concat(e.code)),i?t.setIsConnected(!1,"code: ".concat(e.code).concat(1e3!==e.code?", unexpected websocket close":"")):(i=!0,r(up.AbnormalClose(ep.JOIN,"Error opening websocket connection - websocket closed unexpectedly with code=".concat(e.code))))},t.socket.addEventListener("error",a);t.socket.addEventListener("open",(function e(){var r,s;i=!0,n(),t.setIsConnected(!0),t.id++,null==(r=t.socket)||r.removeEventListener("open",e),null==(s=t.socket)||s.removeEventListener("error",a),t.pingPongLoop(t.id)})),t.socket.addEventListener("close",t.onCloseHandler),t.socket.addEventListener("message",t.onMessageHandler)}))}},{key:"close",value:function(){return Ef(this,null,Bt().mark((function e(){return Bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:window.removeEventListener("offline",this.offlineListener),window.removeEventListener("online",this.onlineListener),this.socket?(this.socket.close(1e3,"Normal Close"),this.setIsConnected(!1,"code: 1000, normal websocket close"),this.socket.removeEventListener("close",this.onCloseHandler),this.socket.removeEventListener("message",this.onMessageHandler)):this.setIsConnected(!1,"websocket not connected yet");case 1:case"end":return e.stop()}}),e,this)})))}},{key:"join",value:function(e,t,n,r,i,a){return Ef(this,null,Bt().mark((function s(){var o,c,u=this;return Bt().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:if(this.isConnected){s.next=2;break}throw up.WebSocketConnectionLost(ep.JOIN,"Failed to send join over WS connection");case 2:return o={name:e,disableVidAutoSub:n,data:t,offer:a,server_sub_degrade:r,simulcast:i},s.next=5,this.internalCall(Cm.JOIN,o);case 5:return c=s.sent,s.abrupt("return",(this.isJoinCompleted=!0,this.pendingTrickle.forEach((function(e){var t=e.target,n=e.candidate;return u.trickle(t,n)})),this.pendingTrickle.length=0,Lf.d(this.TAG,"join: response=".concat(JSON.stringify(c,null,1))),c));case 7:case"end":return s.stop()}}),s,this)})))}},{key:"trickle",value:function(e,t){this.isJoinCompleted?this.notify(Cm.TRICKLE,{target:e,candidate:t}):this.pendingTrickle.push({target:e,candidate:t})}},{key:"offer",value:function(e,t){return Ef(this,null,Bt().mark((function n(){return Bt().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.call(Cm.OFFER,{desc:e,tracks:Object.fromEntries(t)});case 2:return n.abrupt("return",n.sent);case 3:case"end":return n.stop()}}),n,this)})))}},{key:"answer",value:function(e){this.notify(Cm.ANSWER,{desc:e})}},{key:"trackUpdate",value:function(e){this.notify(Cm.TRACK_UPDATE,{version:"1.0",tracks:Object.fromEntries(e)})}},{key:"broadcast",value:function(e){return Ef(this,null,Bt().mark((function t(){return Bt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.call(Cm.BROADCAST,xf({version:"1.0"},e.toSignalParams()));case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})))}},{key:"leave",value:function(){this.notify(Cm.LEAVE,{version:"1.0"})}},{key:"endRoom",value:function(e,t){return Ef(this,null,Bt().mark((function n(){return Bt().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.call(Cm.END_ROOM,{lock:e,reason:t});case 2:case"end":return n.stop()}}),n,this)})))}},{key:"sendEvent",value:function(e){if(!this.isConnected)throw Error("".concat(this.TAG," not connected. Could not send event ").concat(e));this.notify(Cm.ANALYTICS,e.toSignalParams())}},{key:"ping",value:function(e){var t=Date.now(),n=new Promise((function(n){setTimeout((function(){n(Date.now()-t)}),e+1)})),r=this.internalCall(Cm.PING,{timestamp:t}).then((function(){return Date.now()-t})).catch((function(){return Date.now()-t}));return Promise.race([n,r])}},{key:"requestRoleChange",value:function(e){return Ef(this,null,Bt().mark((function t(){return Bt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.call(Cm.ROLE_CHANGE_REQUEST,e);case 2:case"end":return t.stop()}}),t,this)})))}},{key:"requestBulkRoleChange",value:function(e){return Ef(this,null,Bt().mark((function t(){return Bt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.call(Cm.ROLE_CHANGE_REQUEST,e);case 2:case"end":return t.stop()}}),t,this)})))}},{key:"acceptRoleChangeRequest",value:function(e){return Ef(this,null,Bt().mark((function t(){return Bt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.call(Cm.ROLE_CHANGE,e);case 2:case"end":return t.stop()}}),t,this)})))}},{key:"requestTrackStateChange",value:function(e){return Ef(this,null,Bt().mark((function t(){return Bt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.call(Cm.TRACK_UPDATE_REQUEST,e);case 2:case"end":return t.stop()}}),t,this)})))}},{key:"requestMultiTrackStateChange",value:function(e){return Ef(this,null,Bt().mark((function t(){return Bt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.call(Cm.CHANGE_TRACK_MUTE_STATE_REQUEST,e);case 2:case"end":return t.stop()}}),t,this)})))}},{key:"removePeer",value:function(e){return Ef(this,null,Bt().mark((function t(){return Bt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.call(Cm.PEER_LEAVE_REQUEST,e);case 2:case"end":return t.stop()}}),t,this)})))}},{key:"startRTMPOrRecording",value:function(e){return Ef(this,null,Bt().mark((function t(){return Bt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.call(Cm.START_RTMP_OR_RECORDING_REQUEST,xf({version:"1.0"},e));case 2:case"end":return t.stop()}}),t,this)})))}},{key:"stopRTMPAndRecording",value:function(){return Ef(this,null,Bt().mark((function e(){return Bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.call(Cm.STOP_RTMP_AND_RECORDING_REQUEST,{version:"1.0"});case 2:case"end":return e.stop()}}),e,this)})))}},{key:"startHLSStreaming",value:function(e){return Ef(this,null,Bt().mark((function t(){return Bt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.call(Cm.START_HLS_STREAMING,xf({version:"1.0"},e));case 2:case"end":return t.stop()}}),t,this)})))}},{key:"stopHLSStreaming",value:function(e){return Ef(this,null,Bt().mark((function t(){return Bt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.call(Cm.STOP_HLS_STREAMING,xf({version:"1.0"},e));case 2:case"end":return t.stop()}}),t,this)})))}},{key:"sendHLSTimedMetadata",value:function(e){return Ef(this,null,Bt().mark((function t(){return Bt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.call(Cm.HLS_TIMED_METADATA,xf({version:"1.0"},e));case 2:case"end":return t.stop()}}),t,this)})))}},{key:"updatePeer",value:function(e){return Ef(this,null,Bt().mark((function t(){return Bt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.call(Cm.UPDATE_PEER_METADATA,xf({version:"1.0"},e));case 2:case"end":return t.stop()}}),t,this)})))}},{key:"setSessionMetadata",value:function(e){return Ef(this,null,Bt().mark((function t(){return Bt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.call(Cm.SET_METADATA,xf({version:"1.0"},e));case 2:case"end":return t.stop()}}),t,this)})))}},{key:"getSessionMetadata",value:function(){return this.call(Cm.GET_METADATA,{version:"1.0"})}},{key:"onMessageHandler",value:function(e){var t=e.data,n=JSON.parse(t);if(n.id)this.handleResponseWithId(n);else{if(!n.method)throw Error("WebSocket message has no 'method' or 'id' field, message=".concat(n));this.handleResponseWithMethod(n)}}},{key:"handleResponseWithId",value:function(e){var t=e,n=t.id;if(this.callbacks.has(n)){var r=this.callbacks.get(n);this.callbacks.delete(n),t.result?r.resolve(t.result):r.reject(t.error)}else this.observer.onNotification(t)}},{key:"handleResponseWithMethod",value:function(e){switch(e.method){case Cm.OFFER:this.observer.onOffer(e.params);break;case Cm.TRICKLE:this.observer.onTrickle(e.params);break;case Cm.SERVER_ERROR:this.observer.onServerError(fp.ServerErrors(Number(e.params.code),ep.NONE,e.params.message));break;case Cm.SERVER_WARNING:Lf.w(this.TAG,e.params);break;default:this.observer.onNotification(e)}}},{key:"pingPongLoop",value:function(e){return Ef(this,null,Bt().mark((function t(){var n,r,i,a,s=this;return Bt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=(null==(n=window.HMS)?void 0:n.PING_TIMEOUT)||12e3,!this.isConnected){t.next=6;break}return t.next=4,this.ping(i);case 4:a=t.sent,this.pongResponseTimes.enqueue(a),a>i?(Lf.d(this.TAG,"Pong timeout ".concat(e,", pageHidden=").concat("undefined"!=typeof document&&document.hidden)),this.id===e&&this.setIsConnected(!1,"ping pong failure")):setTimeout((function(){return s.pingPongLoop(e)}),(null==(r=window.HMS)?void 0:r.PING_INTERVAL)||1e3);case 6:case"end":return t.stop()}}),t,this)})))}},{key:"call",value:function(e,t){return Ef(this,null,Bt().mark((function n(){var r,i,a,s;return Bt().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:r=3,i=fp.ServerErrors(500,e,"Default ".concat(e," error")),a=0;case 2:if(!(a<r)){n.next=20;break}return n.prev=3,Lf.d(this.TAG,"Try number ".concat(a+1," sending ").concat(e),t),n.next=7,this.internalCall(e,t);case 7:return n.abrupt("return",n.sent);case 10:if(n.prev=10,n.t0=n.catch(3),i=n.t0,Lf.e(this.TAG,"Failed sending ".concat(e),{method:e,try:a+1,params:t,error:i}),5===parseInt("".concat(i.code/100))||429===i.code){n.next=14;break}return n.abrupt("break",20);case 14:return s=1e3*(2+2*Math.random()),n.next=17,Kp(s);case 17:a++,n.next=2;break;case 20:throw Lf.e("Sending ".concat(e," over WS failed after ").concat(r," retries"),{method:e,params:t,error:i}),i;case 21:case"end":return n.stop()}}),n,this,[[3,10]])})))}}]),e}(),$m="[HMSTransport]:",eg=function(){function e(t,n,r,i,a,s){var o,c,u=this;et(this,e),this.observer=t,this.deviceManager=n,this.store=r,this.eventBus=i,this.analyticsEventsService=a,this.analyticsTimer=s,this.state=pm.Disconnected,this.trackStates=new Map,this.publishConnection=null,this.subscribeConnection=null,this.maxSubscribeBitrate=0,this.joinRetryCount=0,this.callbacks=new Map,this.signalObserver={onOffer:function(e){return Ef(u,null,Bt().mark((function t(){var n,r,i,a,s;return Bt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,this.subscribeConnection){t.next=3;break}return t.abrupt("return");case 3:return t.next=5,this.subscribeConnection.setRemoteDescription(e);case 5:Lf.d($m,"[SUBSCRIBE] Adding ".concat(this.subscribeConnection.candidates.length," ice-candidates"),this.subscribeConnection.candidates),n=Ut(this.subscribeConnection.candidates),t.prev=7,n.s();case 9:if((r=n.n()).done){t.next=15;break}return i=r.value,t.next=13,this.subscribeConnection.addIceCandidate(i);case 13:t.next=9;break;case 15:t.next=20;break;case 17:t.prev=17,t.t0=t.catch(7),n.e(t.t0);case 20:return t.prev=20,n.f(),t.finish(20);case 23:return this.subscribeConnection.candidates.length=0,t.next=26,this.subscribeConnection.createAnswer();case 26:return a=t.sent,t.next=29,this.subscribeConnection.setLocalDescription(a);case 29:this.signal.answer(a),Lf.d($m,"[role=SUBSCRIBE] onOffer renegotiation DONE \u2705"),t.next=37;break;case 33:throw t.prev=33,t.t1=t.catch(0),Lf.d($m,"[role=SUBSCRIBE] onOffer renegotiation FAILED \u274c"),this.state=pm.Failed,s=t.t1 instanceof Zf?t.t1:pp.Unknown(ep.PUBLISH,t.t1.message),this.eventBus.analytics.publish($f.subscribeFail(s)),s;case 37:case"end":return t.stop()}}),t,this,[[0,33],[7,17,20,23]])})))},onTrickle:function(e){return Ef(u,null,Bt().mark((function t(){var n;return Bt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(null==(n=e.target===mm.Publish?this.publishConnection:this.subscribeConnection)?void 0:n.remoteDescription)){t.next=6;break}return t.next=4,n.addIceCandidate(e.candidate);case 4:t.next=7;break;case 6:null==n||n.candidates.push(e.candidate);case 7:case"end":return t.stop()}}),t,this)})))},onNotification:function(e){return u.observer.onNotification(e)},onServerError:function(e){return Ef(u,null,Bt().mark((function t(){return Bt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.observer.onStateChange(pm.Failed,e);case 2:case"end":return t.stop()}}),t,this)})))},onFailure:function(e){u.joinParameters&&u.retryScheduler.schedule({category:Yv.SignalDisconnect,error:e,task:u.retrySignalDisconnectTask,originalState:u.state})},onOffline:function(e){return Ef(u,null,Bt().mark((function t(){return Bt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:Lf.d($m,"socket offline",pm[this.state]);try{this.state!==pm.Leaving&&this.joinParameters&&this.retryScheduler.schedule({category:Yv.SignalDisconnect,error:up.WebSocketConnectionLost(ep.RECONNECT_SIGNAL,e),task:this.retrySignalDisconnectTask,originalState:this.state})}catch(n){console.error(n)}case 2:case"end":return t.stop()}}),t,this)})))},onOnline:function(){var e;Lf.d($m,"socket online",pm[u.state]),u.analyticsSignalTransport.flushFailedEvents(null==(e=u.store.getLocalPeer())?void 0:e.peerId)},onNetworkOnline:function(){u.analyticsEventsService.flushFailedClientEvents()}},this.signal=new Zm(this.signalObserver),this.analyticsSignalTransport=new km(this.signal),this.publishConnectionObserver={onRenegotiationNeeded:function(){return Ef(u,null,Bt().mark((function e(){return Bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.performPublishRenegotiation();case 2:case"end":return e.stop()}}),e,this)})))},onIceConnectionChange:function(e){return Ef(u,null,Bt().mark((function t(){return Bt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:("disconnected"===e?Lf.w.bind(Lf):Lf.d.bind(Lf))($m,"Publish ice connection state change: ".concat(e));case 1:case"end":return t.stop()}}),t)})))},onConnectionStateChange:function(e){return Ef(u,null,Bt().mark((function t(){var n;return Bt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(("disconnected"===e?Lf.w.bind(Lf):Lf.d.bind(Lf))($m,"Publish connection state change: ".concat(e)),"connected"===e&&(null==(n=this.publishConnection)||n.logSelectedIceCandidatePairs()),t.t0="failed"===e,!t.t0){t.next=6;break}return t.next=6,this.handleIceConnectionFailure(mm.Publish);case 6:case"end":return t.stop()}}),t,this)})))}},this.subscribeConnectionObserver={onApiChannelMessage:function(e){u.observer.onNotification(JSON.parse(e))},onTrackAdd:function(e){Lf.d($m,"[Subscribe] onTrackAdd","".concat(e)),u.observer.onTrackAdd(e)},onTrackRemove:function(e){Lf.d($m,"[Subscribe] onTrackRemove","".concat(e)),u.observer.onTrackRemove(e)},onIceConnectionChange:function(e){return Ef(u,null,Bt().mark((function t(){var n;return Bt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:("disconnected"===e?Lf.w.bind(Lf):Lf.d.bind(Lf))($m,"Subscribe ice connection state change: ".concat(e)),"connected"===e&&(n=this.callbacks.get(ov),this.callbacks.delete(ov),n&&n.promise.resolve(!0));case 1:case"end":return t.stop()}}),t,this)})))},onConnectionStateChange:function(e){return Ef(u,null,Bt().mark((function t(){var n,r;return Bt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(("disconnected"===e?Lf.w.bind(Lf):Lf.d.bind(Lf))($m,"Subscribe connection state change: ".concat(e)),t.t0="failed"===e,!t.t0){t.next=5;break}return t.next=5,this.handleIceConnectionFailure(mm.Subscribe);case 5:if("connected"!==e){t.next=9;break}null==(n=this.subscribeConnection)||n.logSelectedIceCandidatePairs(),r=this.callbacks.get(ov),this.callbacks.delete(ov),r&&r.promise.resolve(!0);case 9:case"end":return t.stop()}}),t,this)})))}},this.handleLocalRoleUpdate=function(e){return Ef(u,[e],Bt().mark((function e(t){var n,r;return Bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.oldRole,r=t.newRole,e.t0=!(!this.doesRoleNeedWebRTC(n)&&this.doesRoleNeedWebRTC(r)),e.t0){e.next=7;break}return Lf.i($m,"Local peer role updated to webrtc role, creating PeerConnections and performing inital publish negotiation \u23f3"),this.createPeerConnections(),e.next=7,this.negotiateOnFirstPublish();case 7:case"end":return e.stop()}}),e,this)})))},this.retryPublishIceFailedTask=function(){return Ef(u,null,Bt().mark((function e(){var t,n=this;return Bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.publishConnection||"connected"===this.publishConnection.iceConnectionState&&"connected"===this.publishConnection.connectionState){e.next=6;break}return t=new Promise((function(e,t){n.callbacks.set(av,{promise:{resolve:e,reject:t},action:ep.RESTART_ICE,extra:{}})})),e.next=4,this.performPublishRenegotiation({iceRestart:!0});case 4:return e.next=6,t;case 6:return e.abrupt("return",!0);case 7:case"end":return e.stop()}}),e,this)})))},this.retrySubscribeIceFailedTask=function(){return Ef(u,null,Bt().mark((function e(){var t,n,r=this;return Bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.subscribeConnection||"connected"===this.subscribeConnection.iceConnectionState&&"connected"===this.subscribeConnection.connectionState){e.next=3;break}return t=new Promise((function(e,t){r.callbacks.set(ov,{promise:{resolve:e,reject:t},action:ep.RESTART_ICE,extra:{}})})),n=new Promise((function(e){setTimeout(e,6e4,!1)})),e.abrupt("return",Promise.race([t,n]));case 3:return e.abrupt("return",!0);case 4:case"end":return e.stop()}}),e,this)})))},this.retrySignalDisconnectTask=function(){return Ef(u,null,Bt().mark((function e(){var t;return Bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Lf.d($m,"retrySignalDisconnectTask",{signalConnected:this.signal.isConnected}),this.signal.isConnected){e.next=8;break}return e.prev=1,e.next=4,this.internalConnect(this.joinParameters.authToken,this.joinParameters.endpoint,this.joinParameters.peerId);case 4:e.next=8;break;case 6:e.prev=6,e.t0=e.catch(1);case 8:if(!this.store.getRoom().joinedAt){e.next=17;break}if(e.t2=this.signal.isConnected,!e.t2){e.next=14;break}return e.next=13,this.retryPublishIceFailedTask();case 13:e.t2=e.sent;case 14:e.t1=e.t2,e.next=18;break;case 17:e.t1=this.signal.isConnected;case 18:return t=e.t1,e.abrupt("return",(this.signal.trackUpdate(this.trackStates),t));case 20:case"end":return e.stop()}}),e,this,[[1,6]])})))},this.webrtcInternals=new Km(this.store,this.eventBus,null==(o=this.publishConnection)?void 0:o.nativeConnection,null==(c=this.subscribeConnection)?void 0:c.nativeConnection);this.retryScheduler=new ym((function(e,t){return Ef(u,null,Bt().mark((function n(){return Bt().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.t0=e!==this.state,!n.t0){n.next=5;break}return this.state=e,n.next=5,this.observer.onStateChange(this.state,t);case 5:case"end":return n.stop()}}),n,this)})))}),this.sendErrorAnalyticsEvent.bind(this)),this.eventBus.statsUpdate.subscribe((function(e){var t,n,r=(null==(n=null==(t=e.getLocalPeerStats())?void 0:t.subscribe)?void 0:n.bitrate)||0;u.maxSubscribeBitrate=Math.max(u.maxSubscribeBitrate,r)}))}return nt(e,[{key:"getWebrtcInternals",value:function(){return this.webrtcInternals}},{key:"isFlagEnabled",value:function(e){var t,n=null==(t=this.initConfig)?void 0:t.config;return((null==n?void 0:n.enabledFlags)||[]).includes(e)}},{key:"preview",value:function(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return Ef(this,null,Bt().mark((function a(){var s;return Bt().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,this.connect(e,t,n,r,i);case 2:return s=a.sent,a.abrupt("return",(this.state=pm.Preview,this.observer.onStateChange(this.state),s));case 4:case"end":return a.stop()}}),a,this)})))}},{key:"join",value:function(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return Ef(this,null,Bt().mark((function a(){var s;return Bt().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(Lf.d($m,"join: started \u23f0"),a.prev=1,a.t0=!this.signal.isConnected||!this.initConfig,!a.t0){a.next=6;break}return a.next=6,this.connect(e,r,t,n,i);case 6:if(this.validateNotDisconnected("connect"),a.t1=this.initConfig,!a.t1){a.next=16;break}return a.next=11,this.waitForLocalRoleAvailability();case 11:return a.next=13,this.createConnectionsAndNegotiateJoin(n,i);case 13:return a.next=15,this.initRtcStatsMonitor();case 15:Lf.d($m,"\u2705 join: Negotiated over PUBLISH connection");case 16:a.next=26;break;case 18:return a.prev=18,a.t2=a.catch(1),Lf.e($m,"join: failed \u274c [token=".concat(e,"]"),a.t2),this.state=pm.Failed,(s=a.t2).isTerminal=s.isTerminal||500===s.code,a.next=25,this.observer.onStateChange(this.state,s);case 25:throw s;case 26:Lf.i($m,"\u2705 join: successful"),this.state=pm.Joined,this.observer.onStateChange(this.state);case 27:case"end":return a.stop()}}),a,this,[[1,18]])})))}},{key:"connect",value:function(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return Ef(this,null,Bt().mark((function a(){var s,o=this;return Bt().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return this.setTransportStateForConnect(),this.joinParameters=new fm(e,n,r.name,r.metaData,t,i),a.prev=1,a.next=4,this.internalConnect(e,t,n);case 4:return a.abrupt("return",a.sent);case 7:if(a.prev=7,a.t0=a.catch(1),!(a.t0 instanceof Zf&&([rp.WebSocketConnectionErrors.WEBSOCKET_CONNECTION_LOST,rp.WebSocketConnectionErrors.FAILED_TO_CONNECT,rp.WebSocketConnectionErrors.ABNORMAL_CLOSE,rp.InitAPIErrors.ENDPOINT_UNREACHABLE].includes(a.t0.code)||a.t0.code.toString().startsWith("5")||a.t0.code.toString().startsWith("429")))){a.next=15;break}return s=function(){return Ef(o,null,Bt().mark((function r(){return Bt().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,this.internalConnect(e,t,n);case 2:return r.abrupt("return",Boolean(this.initConfig&&this.initConfig.endpoint));case 3:case"end":return r.stop()}}),r,this)})))},a.next=13,this.retryScheduler.schedule({category:Yv.ConnectFailed,error:a.t0,task:s,originalState:this.state,maxFailedRetries:5,changeState:!1});case 13:a.next=16;break;case 15:throw a.t0;case 16:case"end":return a.stop()}}),a,this,[[1,7]])})))}},{key:"leave",value:function(e){return Ef(this,null,Bt().mark((function t(){var n,r,i,a;return Bt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.retryScheduler.reset(),this.joinParameters=void 0,Lf.d($m,"leaving in transport"),t.prev=1,this.state=pm.Leaving,null==(n=this.webrtcInternals)||n.cleanUp(),null==(r=this.trackDegradationController)||r.cleanUp(),t.next=7,null==(i=this.publishConnection)?void 0:i.close();case 7:return t.next=9,null==(a=this.subscribeConnection)?void 0:a.close();case 9:if(!e){t.next=11;break}try{this.signal.leave(),Lf.d($m,"signal leave done")}catch(s){Lf.w($m,"failed to send leave on websocket to server",s)}case 11:return this.analyticsEventsService.flushFailedClientEvents(),this.analyticsEventsService.reset(),t.next=15,this.signal.close();case 15:t.next=20;break;case 17:t.prev=17,t.t0=t.catch(1),this.eventBus.analytics.publish($f.disconnect(t.t0)),Lf.e($m,"leave: FAILED \u274c",t.t0);case 20:return t.prev=20,this.state=pm.Disconnected,this.observer.onStateChange(this.state),t.finish(20);case 23:case"end":return t.stop()}}),t,this,[[1,17,20,23]])})))}},{key:"publish",value:function(e){return Ef(this,null,Bt().mark((function t(){var n,r,i;return Bt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=Ut(e),t.prev=1,n.s();case 3:if((r=n.n()).done){t.next=15;break}return i=r.value,t.prev=5,t.next=8,this.publishTrack(i);case 8:t.next=13;break;case 10:t.prev=10,t.t0=t.catch(5),this.eventBus.analytics.publish($f.publish({devices:this.deviceManager.getDevices(),error:t.t0}));case 13:t.next=3;break;case 15:t.next=20;break;case 17:t.prev=17,t.t1=t.catch(1),n.e(t.t1);case 20:return t.prev=20,n.f(),t.finish(20);case 23:case"end":return t.stop()}}),t,this,[[1,17,20,23],[5,10]])})))}},{key:"unpublish",value:function(e){return Ef(this,null,Bt().mark((function t(){var n,r,i;return Bt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=Ut(e),t.prev=1,n.s();case 3:if((r=n.n()).done){t.next=9;break}return i=r.value,t.next=7,this.unpublishTrack(i);case 7:t.next=3;break;case 9:t.next=14;break;case 11:t.prev=11,t.t0=t.catch(1),n.e(t.t0);case 14:return t.prev=14,n.f(),t.finish(14);case 17:case"end":return t.stop()}}),t,this,[[1,11,14,17]])})))}},{key:"sendMessage",value:function(e){return Ef(this,null,Bt().mark((function t(){return Bt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.signal.broadcast(e);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})))}},{key:"trackUpdate",value:function(e){var t=Array.from(this.trackStates.values()).find((function(t){return e.type===t.type&&e.source===t.source}));if(t){var n=new am(wf(xf({},t),{mute:!e.enabled}));this.trackStates.set(t.track_id,n),Lf.d($m,"Track Update",this.trackStates,e),this.signal.trackUpdate(new Map([[t.track_id,n]]))}}},{key:"changeRole",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return Ef(this,null,Bt().mark((function r(){return Bt().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,this.signal.requestRoleChange({requested_for:e.peerId,role:t,force:n});case 2:case"end":return r.stop()}}),r,this)})))}},{key:"changeRoleOfPeer",value:function(e,t,n){return Ef(this,null,Bt().mark((function r(){return Bt().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,this.signal.requestRoleChange({requested_for:e.peerId,role:t,force:n});case 2:case"end":return r.stop()}}),r,this)})))}},{key:"changeRoleOfPeersWithRoles",value:function(e,t){return Ef(this,null,Bt().mark((function n(){return Bt().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.signal.requestBulkRoleChange({roles:e.map((function(e){return e.name})),role:t,force:!0});case 2:case"end":return n.stop()}}),n,this)})))}},{key:"acceptRoleChange",value:function(e){return Ef(this,null,Bt().mark((function t(){return Bt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.signal.acceptRoleChangeRequest({role:e.role.name,token:e.token});case 2:case"end":return t.stop()}}),t,this)})))}},{key:"endRoom",value:function(e,t){return Ef(this,null,Bt().mark((function n(){return Bt().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.signal.endRoom(e,t);case 2:case"end":return n.stop()}}),n,this)})))}},{key:"removePeer",value:function(e,t){return Ef(this,null,Bt().mark((function n(){return Bt().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.signal.removePeer({requested_for:e,reason:t});case 2:case"end":return n.stop()}}),n,this)})))}},{key:"startRTMPOrRecording",value:function(e){return Ef(this,null,Bt().mark((function t(){var n,r;return Bt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r={meeting_url:e.meetingURL,record:e.record},(null==(n=e.rtmpURLs)?void 0:n.length)&&(r.rtmp_urls=e.rtmpURLs),e.resolution&&(r.resolution=e.resolution),t.next=5,this.signal.startRTMPOrRecording(r);case 5:case"end":return t.stop()}}),t,this)})))}},{key:"stopRTMPOrRecording",value:function(){return Ef(this,null,Bt().mark((function e(){return Bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.signal.stopRTMPAndRecording();case 2:case"end":return e.stop()}}),e,this)})))}},{key:"startHLSStreaming",value:function(e){return Ef(this,null,Bt().mark((function t(){var n;return Bt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n={},e&&e.variants&&e.variants.length>0&&(n.variants=e.variants.map((function(e){var t={meeting_url:e.meetingURL};return e.metadata&&(t.metadata=e.metadata),t}))),(null==e?void 0:e.recording)&&(n.hls_recording={single_file_per_layer:e.recording.singleFilePerLayer,hls_vod:e.recording.hlsVod}),t.next=5,this.signal.startHLSStreaming(n);case 5:case"end":return t.stop()}}),t,this)})))}},{key:"stopHLSStreaming",value:function(e){return Ef(this,null,Bt().mark((function t(){var n,r;return Bt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e){t.next=4;break}return r={variants:null==(n=null==e?void 0:e.variants)?void 0:n.map((function(e){var t={meeting_url:e.meetingURL};return e.metadata&&(t.metadata=e.metadata),t}))},t.next=4,this.signal.stopHLSStreaming(r);case 4:return t.next=6,this.signal.stopHLSStreaming();case 6:case"end":return t.stop()}}),t,this)})))}},{key:"sendHLSTimedMetadata",value:function(e){return Ef(this,null,Bt().mark((function t(){var n;return Bt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(e.length>0)){t.next=4;break}return n={metadata_objs:e},t.next=4,this.signal.sendHLSTimedMetadata(n);case 4:case"end":return t.stop()}}),t,this)})))}},{key:"changeName",value:function(e){return Ef(this,null,Bt().mark((function t(){var n;return Bt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=this.store.getLocalPeer(),t.t0=n&&n.name!==e,!t.t0){t.next=5;break}return t.next=5,this.signal.updatePeer({name:e});case 5:case"end":return t.stop()}}),t,this)})))}},{key:"changeMetadata",value:function(e){return Ef(this,null,Bt().mark((function t(){return Bt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.signal.updatePeer({data:e});case 2:case"end":return t.stop()}}),t,this)})))}},{key:"getSessionMetadata",value:function(){return this.signal.getSessionMetadata()}},{key:"setSessionMetadata",value:function(e){return Ef(this,null,Bt().mark((function t(){return Bt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.signal.setSessionMetadata({data:e});case 2:case"end":return t.stop()}}),t,this)})))}},{key:"changeTrackState",value:function(e){return Ef(this,null,Bt().mark((function t(){return Bt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.signal.requestTrackStateChange(e);case 2:case"end":return t.stop()}}),t,this)})))}},{key:"changeMultiTrackState",value:function(e){return Ef(this,null,Bt().mark((function t(){return Bt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.signal.requestMultiTrackStateChange(e);case 2:case"end":return t.stop()}}),t,this)})))}},{key:"publishTrack",value:function(e){return Ef(this,null,Bt().mark((function t(){var n,r,i,a,s=this;return Bt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.publishedTrackId=e.getTrackIDBeingSent(),Lf.d($m,"\u23f3 publishTrack: trackId=".concat(e.trackId,", toPublishTrackId=").concat(e.publishedTrackId),"".concat(e)),this.trackStates.set(e.publishedTrackId,new am(e)),n=new Promise((function(e,t){s.callbacks.set(av,{promise:{resolve:e,reject:t},action:ep.PUBLISH,extra:{}})})),(r=e.stream).setConnection(this.publishConnection),i=this.store.getSimulcastLayers(e.source),r.addTransceiver(e,i),Lf.time("publish-".concat(e.trackId,"-").concat(e.type)),t.next=8,n;case 8:if(Lf.timeEnd("publish-".concat(e.trackId,"-").concat(e.type)),this.store.addTrack(e),a=e.settings.maxBitrate,t.t0=a,!t.t0){t.next=15;break}return t.next=15,r.setMaxBitrate(a,e).then((function(){Lf.d($m,"Setting maxBitrate for ".concat(e.source," ").concat(e.type," to ").concat(a," kpbs"))})).catch((function(e){return Lf.w($m,"Failed setting maxBitrate",e)}));case 15:Lf.d($m,"\u2705 publishTrack: trackId=".concat(e.trackId),"".concat(e),this.callbacks);case 16:case"end":return t.stop()}}),t,this)})))}},{key:"unpublishTrack",value:function(e){return Ef(this,null,Bt().mark((function t(){var n,r,i=this;return Bt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return Lf.d($m,"\u23f3 unpublishTrack: trackId=".concat(e.trackId),"".concat(e)),e.publishedTrackId&&this.trackStates.has(e.publishedTrackId)?this.trackStates.delete(e.publishedTrackId):(n=Array.from(this.trackStates.values()).find((function(t){return e.type===t.type&&e.source===t.source})))&&this.trackStates.delete(n.track_id),r=new Promise((function(e,t){i.callbacks.set(av,{promise:{resolve:e,reject:t},action:ep.UNPUBLISH,extra:{}})})),e.stream.removeSender(e),t.next=5,r;case 5:return t.next=7,e.cleanup();case 7:this.store.removeTrack(e.trackId),Lf.d($m,"\u2705 unpublishTrack: trackId=".concat(e.trackId),this.callbacks);case 9:case"end":return t.stop()}}),t,this)})))}},{key:"waitForLocalRoleAvailability",value:function(){var e=this;if(!this.store.hasRoleDetailsArrived())return new Promise((function(t){e.eventBus.policyChange.subscribeOnce((function(){return t()}))}))}},{key:"createConnectionsAndNegotiateJoin",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return Ef(this,null,Bt().mark((function n(){var r;return Bt().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return(r=this.doesLocalPeerNeedWebRTC())&&this.createPeerConnections(),this.analyticsTimer.start(Xf.JOIN_RESPONSE),n.next=5,this.negotiateJoinWithRetry({name:e.name,data:e.metaData,autoSubscribeVideo:t,isWebRTC:r});case 5:this.analyticsTimer.end(Xf.JOIN_RESPONSE);case 6:case"end":return n.stop()}}),n,this)})))}},{key:"createPeerConnections",value:function(){this.initConfig&&(this.publishConnection||(this.publishConnection=new Pm(this.signal,this.initConfig.rtcConfiguration,this.publishConnectionObserver,this)),this.subscribeConnection||(this.subscribeConnection=new Nm(this.signal,this.initConfig.rtcConfiguration,this.subscribeConnectionObserver)))}},{key:"negotiateJoinWithRetry",value:function(e){return Ef(this,arguments,Bt().mark((function e(t){var n,r,i,a,s,o,c,u=this;return Bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.name,r=t.data,i=t.autoSubscribeVideo,a=t.isWebRTC,s=void 0===a||a,e.prev=1,e.next=4,this.negotiateJoin({name:n,data:r,autoSubscribeVideo:i,isWebRTC:s});case 4:case 15:e.next=18;break;case 6:if(e.prev=6,e.t0=e.catch(1),Lf.e($m,"Join negotiation failed \u274c",e.t0),o=e.t0 instanceof Zf?e.t0:fp.ServerErrors(500,ep.JOIN,"Websocket join error - ".concat(e.t0.message)),5!==parseInt("".concat(o.code/100))&&429!==o.code){e.next=17;break}return this.joinRetryCount=0,o.isTerminal=!1,c=function(){return Ef(u,null,Bt().mark((function e(){return Bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.joinRetryCount++,e.next=3,this.negotiateJoin({name:n,data:r,autoSubscribeVideo:i,isWebRTC:s});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)})))},e.next=15,this.retryScheduler.schedule({category:Yv.JoinWSMessageFailed,error:o,task:c,originalState:pm.Joined,maxFailedRetries:3,changeState:!1});case 17:throw e.t0;case 18:case"end":return e.stop()}}),e,this,[[1,6]])})))}},{key:"negotiateJoin",value:function(e){return Ef(this,arguments,Bt().mark((function e(t){var n,r,i,a;return Bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.name,r=t.data,i=t.autoSubscribeVideo,a=t.isWebRTC,!(void 0===a||a)){e.next=7;break}return e.next=4,this.negotiateJoinWebRTC({name:n,data:r,autoSubscribeVideo:i});case 4:e.t0=e.sent,e.next=10;break;case 7:return e.next=9,this.negotiateJoinNonWebRTC({name:n,data:r,autoSubscribeVideo:i});case 9:e.t0=e.sent;case 10:return e.abrupt("return",e.t0);case 11:case"end":return e.stop()}}),e,this)})))}},{key:"negotiateJoinWebRTC",value:function(e){return Ef(this,arguments,Bt().mark((function e(t){var n,r,i,a,s,o,c,u,l,d;return Bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.name,r=t.data,i=t.autoSubscribeVideo,Lf.d($m,"\u23f3 join: Negotiating over PUBLISH connection"),this.publishConnection){e.next=3;break}return e.abrupt("return",(Lf.e($m,"Publish peer connection not found, cannot negotiate"),!1));case 3:return e.next=5,this.publishConnection.createOffer();case 5:return a=e.sent,e.next=8,this.publishConnection.setLocalDescription(a);case 8:return s=this.isFlagEnabled(Am.FLAG_SERVER_SUB_DEGRADATION),o=this.isFlagEnabled(Am.FLAG_SERVER_SIMULCAST),e.next=12,this.signal.join(n,r,!i,s,o,a);case 12:return c=e.sent,e.next=15,this.publishConnection.setRemoteDescription(c);case 15:u=Ut(this.publishConnection.candidates),e.prev=16,u.s();case 18:if((l=u.n()).done){e.next=24;break}return d=l.value,e.next=22,this.publishConnection.addIceCandidate(d);case 22:e.next=18;break;case 24:e.next=29;break;case 26:e.prev=26,e.t0=e.catch(16),u.e(e.t0);case 29:return e.prev=29,u.f(),e.finish(29);case 32:return e.abrupt("return",(this.publishConnection.initAfterJoin(),!!c));case 33:case"end":return e.stop()}}),e,this,[[16,26,29,32]])})))}},{key:"negotiateJoinNonWebRTC",value:function(e){return Ef(this,arguments,Bt().mark((function e(t){var n,r,i,a,s;return Bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.name,r=t.data,i=t.autoSubscribeVideo,Lf.d($m,"\u23f3 join: Negotiating Non-WebRTC"),a=this.isFlagEnabled(Am.FLAG_SERVER_SUB_DEGRADATION),s=this.isFlagEnabled(Am.FLAG_SERVER_SIMULCAST),e.next=5,this.signal.join(n,r,!i,a,s);case 5:return e.abrupt("return",!!e.sent);case 6:case"end":return e.stop()}}),e,this)})))}},{key:"negotiateOnFirstPublish",value:function(){return Ef(this,null,Bt().mark((function e(){var t,n,r,i,a;return Bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Lf.d($m,"\u23f3 Negotiating offer over PUBLISH connection"),this.publishConnection){e.next=2;break}return e.abrupt("return",(Lf.e($m,"Publish peer connection not found, cannot negotiate"),!1));case 2:return e.next=4,this.publishConnection.createOffer(this.trackStates);case 4:return t=e.sent,e.next=7,this.publishConnection.setLocalDescription(t);case 7:return e.next=9,this.signal.offer(t,this.trackStates);case 9:return n=e.sent,e.next=12,this.publishConnection.setRemoteDescription(n);case 12:r=Ut(this.publishConnection.candidates),e.prev=13,r.s();case 15:if((i=r.n()).done){e.next=21;break}return a=i.value,e.next=19,this.publishConnection.addIceCandidate(a);case 19:e.next=15;break;case 21:e.next=26;break;case 23:e.prev=23,e.t0=e.catch(13),r.e(e.t0);case 26:return e.prev=26,r.f(),e.finish(26);case 29:return e.abrupt("return",(this.publishConnection.initAfterJoin(),!!n));case 30:case"end":return e.stop()}}),e,this,[[13,23,26,29]])})))}},{key:"performPublishRenegotiation",value:function(e){return Ef(this,null,Bt().mark((function t(){var n,r,i,a;return Bt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(Lf.d($m,"\u23f3 [role=PUBLISH] onRenegotiationNeeded START",this.trackStates),!(n=this.callbacks.get(av))){t.next=27;break}if(this.publishConnection){t.next=6;break}return Lf.e($m,"Publish peer connection not found, cannot renegotiate"),t.abrupt("return");case 6:return t.prev=6,t.next=9,this.publishConnection.createOffer(this.trackStates,e);case 9:return r=t.sent,t.next=12,this.publishConnection.setLocalDescription(r);case 12:return Lf.time("renegotiation-offer-exchange"),t.next=15,this.signal.offer(r,this.trackStates);case 15:return i=t.sent,this.callbacks.delete(av),Lf.timeEnd("renegotiation-offer-exchange"),t.next=20,this.publishConnection.setRemoteDescription(i);case 20:n.promise.resolve(!0),Lf.d($m,"[role=PUBLISH] onRenegotiationNeeded DONE \u2705"),t.next=27;break;case 24:t.prev=24,t.t0=t.catch(6),a=t.t0 instanceof Zf?t.t0:pp.Unknown(ep.PUBLISH,t.t0.message),n.promise.reject(a),Lf.d($m,"[role=PUBLISH] onRenegotiationNeeded FAILED \u274c");case 27:case"end":return t.stop()}}),t,this,[[6,24]])})))}},{key:"handleIceConnectionFailure",value:function(e){return Ef(this,null,Bt().mark((function t(){var n,r,i,a;return Bt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e===mm.Publish?this.retryScheduler.schedule({category:Yv.PublishIceConnectionFailed,error:hp.ICEFailure(ep.PUBLISH,(null==(n=this.publishConnection)?void 0:n.selectedCandidatePair)&&JSON.stringify(null==(r=this.publishConnection)?void 0:r.selectedCandidatePair)),task:this.retryPublishIceFailedTask,originalState:pm.Joined}):this.retryScheduler.schedule({category:Yv.SubscribeIceConnectionFailed,error:hp.ICEFailure(ep.SUBSCRIBE,(null==(i=this.subscribeConnection)?void 0:i.selectedCandidatePair)&&JSON.stringify(null==(a=this.subscribeConnection)?void 0:a.selectedCandidatePair)),task:this.retrySubscribeIceFailedTask,originalState:pm.Joined,maxFailedRetries:1});case 1:case"end":return t.stop()}}),t,this)})))}},{key:"internalConnect",value:function(e,t,n){return Ef(this,null,Bt().mark((function r(){var i;return Bt().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return Lf.d($m,"connect: started \u23f0"),i=new Date,r.prev=2,this.analyticsTimer.start(Xf.INIT),r.next=6,Ym.fetchInitConfig({token:e,peerId:n,userAgent:this.store.getUserAgent(),initEndpoint:t});case 6:return this.initConfig=r.sent,this.analyticsTimer.end(Xf.INIT),this.validateNotDisconnected("post init"),r.next=11,this.openSignal(e,n);case 11:return this.store.setSimulcastEnabled(this.isFlagEnabled(Am.FLAG_SERVER_SIMULCAST)),Lf.d($m,"Adding Analytics Transport: JsonRpcSignal"),this.analyticsEventsService.setTransport(this.analyticsSignalTransport),this.analyticsEventsService.flush(),r.abrupt("return",this.initConfig);case 18:throw r.prev=18,r.t0=r.catch(2),this.state!==pm.Reconnecting&&this.eventBus.analytics.publish($f.connect(r.t0,this.getAdditionalAnalyticsProperties(),i,new Date,t)),Lf.d($m,"\u274c internal connect: failed",r.t0),r.t0;case 21:case"end":return r.stop()}}),r,this,[[2,18]])})))}},{key:"validateNotDisconnected",value:function(e){if(this.state===pm.Disconnected)throw Lf.w($m,"aborting join as transport state is disconnected"),pp.ValidationFailed("leave called before join could complete - stage=".concat(e))}},{key:"openSignal",value:function(e,t){return Ef(this,null,Bt().mark((function n(){var r;return Bt().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(this.initConfig){n.next=2;break}throw lp.InitConfigNotAvailable(ep.INIT,"Init Config not found");case 2:return Lf.d($m,"\u23f3 internal connect: connecting to ws endpoint",this.initConfig.endpoint),(r=new URL(this.initConfig.endpoint)).searchParams.set("peer",t),r.searchParams.set("token",e),r.searchParams.set("user_agent_v2",this.store.getUserAgent()),this.endpoint=r.toString(),this.analyticsTimer.start(Xf.WEBSOCKET_CONNECT),n.next=11,this.signal.open(this.endpoint);case 11:this.analyticsTimer.end(Xf.WEBSOCKET_CONNECT),this.analyticsTimer.start(Xf.ON_POLICY_CHANGE),this.analyticsTimer.start(Xf.ROOM_STATE),Lf.d($m,"\u2705 internal connect: connected to ws endpoint");case 15:case"end":return n.stop()}}),n,this)})))}},{key:"initRtcStatsMonitor",value:function(){return Ef(this,null,Bt().mark((function e(){var t,n,r,i,a=this;return Bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==(r=this.webrtcInternals)||r.setPeerConnections({publish:null==(t=this.publishConnection)?void 0:t.nativeConnection,subscribe:null==(n=this.subscribeConnection)?void 0:n.nativeConnection}),e.t0=this.store.getSubscribeDegradationParams(),!e.t0){e.next=11;break}if(e.t1=this.isFlagEnabled(Am.FLAG_SERVER_SUB_DEGRADATION),e.t1){e.next=9;break}return e.next=7,null==(i=this.webrtcInternals)?void 0:i.start();case 7:this.trackDegradationController=new Om(this.store,this.eventBus),this.eventBus.statsUpdate.subscribe((function(e){var t,n,r;null==(r=a.trackDegradationController)||r.handleRtcStatsChange((null==(n=null==(t=e.getLocalPeerStats())?void 0:t.subscribe)?void 0:n.packetsLost)||0)}));case 9:this.eventBus.trackDegraded.subscribe((function(e){a.eventBus.analytics.publish($f.degradationStats(e,!0)),a.observer.onTrackDegrade(e)})),this.eventBus.trackRestored.subscribe((function(e){a.eventBus.analytics.publish($f.degradationStats(e,!1)),a.observer.onTrackRestore(e)}));case 11:case"end":return e.stop()}}),e,this)})))}},{key:"doesRoleNeedWebRTC",value:function(e){var t,n;if(!this.isFlagEnabled(Am.FLAG_NON_WEBRTC_DISABLE_OFFER))return!0;var r=Boolean(e.publishParams.allowed&&(null==(t=e.publishParams.allowed)?void 0:t.length)>0),i=Boolean(e.subscribeParams.subscribeToRoles&&(null==(n=e.subscribeParams.subscribeToRoles)?void 0:n.length)>0);return r||i}},{key:"doesLocalPeerNeedWebRTC",value:function(){var e,t=null==(e=this.store.getLocalPeer())?void 0:e.role;return!t||this.doesRoleNeedWebRTC(t)}},{key:"setTransportStateForConnect",value:function(){if(this.state===pm.Failed&&(this.state=pm.Disconnected),this.state!==pm.Disconnected&&this.state!==pm.Reconnecting)throw fp.AlreadyJoined(ep.JOIN,"Cannot join a meeting in ".concat(this.state," state"));this.state===pm.Disconnected&&(this.state=pm.Connecting,this.observer.onStateChange(this.state))}},{key:"sendErrorAnalyticsEvent",value:function(e,t){var n,r=this.getAdditionalAnalyticsProperties();switch(t){case Yv.ConnectFailed:n=$f.connect(e,r);break;case Yv.SignalDisconnect:n=$f.disconnect(e,r);break;case Yv.JoinWSMessageFailed:n=$f.join({error:e,time:this.analyticsTimer.getTimeTaken(Xf.JOIN),init_response_time:this.analyticsTimer.getTimeTaken(Xf.INIT),ws_connect_time:this.analyticsTimer.getTimeTaken(Xf.WEBSOCKET_CONNECT),on_policy_change_time:this.analyticsTimer.getTimeTaken(Xf.ON_POLICY_CHANGE),local_audio_track_time:this.analyticsTimer.getTimeTaken(Xf.LOCAL_AUDIO_TRACK),local_video_track_time:this.analyticsTimer.getTimeTaken(Xf.LOCAL_VIDEO_TRACK),retries_join:this.joinRetryCount});break;case Yv.PublishIceConnectionFailed:n=$f.publish({error:e});break;case Yv.SubscribeIceConnectionFailed:n=$f.subscribeFail(e)}this.eventBus.analytics.publish(n)}},{key:"getAdditionalAnalyticsProperties",value:function(){var e,t,n,r,i,a,s,o,c=function(){if(If&&"undefined"!=typeof navigator.connection){var e=navigator.connection;return{downlink:e.downlink,downlinkMax:e.downlinkMax,effectiveType:e.effectiveType,rtt:e.rtt,saveData:e.saveData,type:e.type}}}(),u="undefined"!=typeof document&&document.hidden,l=this.store.getRemoteVideoTracks().filter((function(e){return e.degraded})).length;return{network_info:c,document_hidden:u,num_degraded_tracks:l,bitrate:{publish:null==(r=null==(n=null==(t=null==(e=this.getWebrtcInternals())?void 0:e.getCurrentStats())?void 0:t.getLocalPeerStats())?void 0:n.publish)?void 0:r.bitrate,subscribe:null==(o=null==(s=null==(a=null==(i=this.getWebrtcInternals())?void 0:i.getCurrentStats())?void 0:a.getLocalPeerStats())?void 0:s.subscribe)?void 0:o.bitrate},max_sub_bitrate:this.maxSubscribeBitrate,recent_pong_response_times:this.signal.getPongResponseTimes(),transport_state:this.state}}}]),e}();function tg(e){if(!e||0===e.length)throw lp.InvalidTokenFormat(ep.INIT,"Token cannot be an empty string or undefined or null");var t=e.split(".");if(3!==t.length)throw lp.InvalidTokenFormat(ep.INIT,"Expected 3 '.' separate fields - header, payload and signature respectively");var n=atob(t[1]);try{var r=JSON.parse(n);return{roomId:r.room_id,userId:r.user_id,role:r.role}}catch(i){throw lp.InvalidTokenFormat(ep.INIT,"couldn't parse to json - ".concat(i.message))}}var ng={isAudioMuted:!1,isVideoMuted:!1,audioInputDeviceId:"default",audioOutputDeviceId:"default",videoDeviceId:"default"},rg={published:!1,isInitialised:!1,isReconnecting:!1,isPreviewInProgress:!1,isJoinInProgress:!1,deviceManagersInitialised:!1},ig=function(){function e(){var t=this;et(this,e),this.TAG="[HMSSdk]:",this.transportState=pm.Disconnected,this.analyticsTimer=new np,this.sdkState=xf({},rg),this.handleAutoplayError=function(e){var n,r;null==(r=null==(n=t.errorListener)?void 0:n.onError)||r.call(n,e)},this.observer={onNotification:function(e){if(e.method!==Iv.PEER_LEAVE_REQUEST){switch(e.method){case Iv.POLICY_CHANGE:t.analyticsTimer.end(Xf.ON_POLICY_CHANGE);break;case Iv.PEER_LIST:t.analyticsTimer.end(Xf.PEER_LIST);break;case Iv.ROOM_STATE:t.analyticsTimer.end(Xf.ROOM_STATE)}t.notificationManager.handleNotification(e,t.sdkState.isReconnecting)}else t.handlePeerLeaveRequest(e.params)},onTrackAdd:function(e){t.notificationManager.handleTrackAdd(e)},onTrackRemove:function(e){t.notificationManager.handleTrackRemove(e)},onTrackDegrade:function(e){var n,r;Lf.d(t.TAG,"Sending Track Update Track Degraded",e),null==(r=t.listener)||r.onTrackUpdate(op.TRACK_DEGRADED,e,null==(n=t.store)?void 0:n.getPeerByTrackId(e.trackId))},onTrackRestore:function(e){var n,r;Lf.d(t.TAG,"Sending Track Update Track Restored",e),null==(r=t.listener)||r.onTrackUpdate(op.TRACK_RESTORED,e,null==(n=t.store)?void 0:n.getPeerByTrackId(e.trackId))},onFailure:function(e){var n;null==(n=t.errorListener)||n.onError(e)},onStateChange:function(e,n){return Ef(t,null,Bt().mark((function t(){var r,i,a,s=this;return Bt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a=function(e){return Ef(s,null,Bt().mark((function t(){var n,r;return Bt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.internalLeave(!0,e);case 2:!this.sdkState.isPreviewInProgress&&!this.sdkState.isJoinInProgress&&(null==(r=null==(n=this.errorListener)?void 0:n.onError)||r.call(n,e)),this.sdkState.isReconnecting=!1;case 4:case"end":return t.stop()}}),t,this)})))},t.t0=e,t.next=t.t0===pm.Preview||t.t0===pm.Joined?4:t.t0===pm.Failed?6:t.t0===pm.Reconnecting?9:11;break;case 4:return this.transportState===pm.Reconnecting&&(null==(r=this.listener)||r.onReconnected()),t.abrupt("break",11);case 6:return t.next=8,a(n);case 8:return t.abrupt("break",11);case 9:return this.sdkState.isReconnecting=!0,null==(i=this.listener)||i.onReconnecting(n),t.abrupt("break",11);case 11:this.transportState=e,Lf.d(this.TAG,"Transport State Change",this.transportState);case 12:case"end":return t.stop()}}),t,this)})))}},this.handlePeerLeaveRequest=function(e){var n,r=e.requested_by?t.store.getPeerById(e.requested_by):void 0,i={roomEnded:e.room_end,reason:e.reason,requestedBy:r};null==(n=t.listener)||n.onRemovedFromRoom(i),t.internalLeave(!1)},this.handleDeviceChange=function(e){var n,r,i,a,s,o;if(Lf.d(t.TAG,"Device Change event",e),null==(r=null==(n=t.deviceChangeListener)?void 0:n.onDeviceChange)||r.call(n,e),e.error&&e.type){var c=e.type.includes("audio")?null==(i=t.localPeer)?void 0:i.audioTrack:null==(a=t.localPeer)?void 0:a.videoTrack;null==(s=t.errorListener)||s.onError(e.error),[rp.TracksErrors.CANT_ACCESS_CAPTURE_DEVICE,rp.TracksErrors.DEVICE_IN_USE,rp.TracksErrors.DEVICE_NOT_AVAILABLE].includes(e.error.code)&&c&&(c.setEnabled(!1),null==(o=t.listener)||o.onTrackUpdate(op.TRACK_MUTED,c,t.localPeer))}},this.handleAudioPluginError=function(e){var n;Lf.e(t.TAG,"Audio Plugin Error event",e),null==(n=t.errorListener)||n.onError(e)},this.handleLocalRoleUpdate=function(e){return Ef(t,[e],Bt().mark((function e(t){var n,r,i;return Bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.oldRole,r=t.newRole,e.next=3,this.transport.handleLocalRoleUpdate({oldRole:n,newRole:r});case 3:return e.next=5,null==(i=this.roleChangeManager)?void 0:i.handleLocalPeerRoleUpdate({oldRole:n,newRole:r});case 5:case"end":return e.stop()}}),e,this)})))},this.sendAudioPresenceFailed=function(){var e=dp.NoAudioDetected(ep.PREVIEW);t.sendAnalyticsEvent($f.audioDetectionFail(e,t.deviceManager.getCurrentSelection().audioInput))},this.sendJoinAnalyticsEvent=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=arguments.length>1?arguments[1]:void 0;t.eventBus.analytics.publish($f.join(wf(xf({error:n},t.analyticsTimer.getTimes()),{time:t.analyticsTimer.getTimeTaken(Xf.JOIN),is_preview_called:e})))},this.sendPreviewAnalyticsEvent=function(e){t.eventBus.analytics.publish($f.preview(wf(xf({error:e},t.analyticsTimer.getTimes(Xf.ROOM_STATE)),{time:t.analyticsTimer.getTimeTaken(Xf.PREVIEW)})))},this.sendAnalyticsEvent=function(e){t.analyticsEventsService.queue(e).flush()}}return nt(e,[{key:"initStoreAndManagers",value:function(){if(this.sdkState.isInitialised)return this.notificationManager.setListener(this.listener),void this.audioSinkManager.setListener(this.listener);this.sdkState.isInitialised=!0,this.store=new Uv,this.eventBus=new Kv,this.networkTestManager=new Ov(this.eventBus,this.listener),this.playlistManager=new hm(this,this.eventBus),this.notificationManager=new im(this.store,this.eventBus,this.listener,this.audioListener),this.deviceManager=new Hv(this.store,this.eventBus),this.audioSinkManager=new Vv(this.store,this.deviceManager,this.eventBus),this.audioOutput=new zv(this.deviceManager,this.audioSinkManager),this.audioSinkManager.setListener(this.listener),this.eventBus.autoplayError.subscribe(this.handleAutoplayError),this.localTrackManager=new Nv(this.store,this.observer,this.deviceManager,this.eventBus,this.analyticsTimer),this.analyticsEventsService=new Bv(this.store),this.transport=new eg(this.observer,this.deviceManager,this.store,this.eventBus,this.analyticsEventsService,this.analyticsTimer),this.eventBus.analytics.subscribe(this.sendAnalyticsEvent),this.eventBus.deviceChange.subscribe(this.handleDeviceChange),this.eventBus.audioPluginFailed.subscribe(this.handleAudioPluginError)}},{key:"validateJoined",value:function(e){if(!this.localPeer)throw pp.NotConnected(ep.VALIDATION,"Not connected - ".concat(e))}},{key:"refreshDevices",value:function(){return Ef(this,null,Bt().mark((function e(){return Bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.validateJoined("refreshDevices"),e.next=3,this.deviceManager.init(!0);case 3:case"end":return e.stop()}}),e,this)})))}},{key:"getWebrtcInternals",value:function(){var e;return null==(e=this.transport)?void 0:e.getWebrtcInternals()}},{key:"getPlaylistManager",value:function(){return this.playlistManager}},{key:"getRecordingState",value:function(){var e;return null==(e=this.store.getRoom())?void 0:e.recording}},{key:"getRTMPState",value:function(){var e;return null==(e=this.store.getRoom())?void 0:e.rtmp}},{key:"getHLSState",value:function(){var e;return null==(e=this.store.getRoom())?void 0:e.hls}},{key:"localPeer",get:function(){var e;return null==(e=this.store)?void 0:e.getLocalPeer()}},{key:"preview",value:function(e,t){return Ef(this,null,Bt().mark((function n(){var r,i,a,s=this;return Bt().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(Em(),Tm(),!this.sdkState.isPreviewInProgress){n.next=2;break}return n.abrupt("return",Promise.reject(pp.PreviewAlreadyInProgress(ep.PREVIEW,"Preview already called")));case 2:return this.analyticsTimer.start(Xf.PREVIEW),this.setUpPreview(e,t),e.alwaysRequestPermissions&&this.localTrackManager.requestPermissions().then((function(){return Ef(s,null,Bt().mark((function e(){return Bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.initDeviceManagers();case 2:case"end":return e.stop()}}),e,this)})))})),r=!1,i=!1,a=setTimeout((function(){var e,t;(!r||!i)&&(null==(t=null==(e=s.listener)?void 0:e.onNetworkQuality)||t.call(e,-1))}),3e3),n.abrupt("return",new Promise((function(n,o){var c=function(e){var t;s.analyticsTimer.end(Xf.PREVIEW),e&&(null==(t=s.errorListener)||t.onError(e)),s.sendPreviewAnalyticsEvent(e),s.sdkState.isPreviewInProgress=!1,o(e)};s.eventBus.policyChange.subscribeOnce((function(){return Ef(s,null,Bt().mark((function r(){var i,a,s=this;return Bt().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,this.localTrackManager.getTracksToPublish(e.settings||ng);case 2:return(a=r.sent).forEach((function(e){return s.setLocalPeerTrack(e)})),(null==(i=this.localPeer)?void 0:i.audioTrack)&&this.initPreviewTrackAudioLevelMonitor(),r.next=7,this.initDeviceManagers();case 7:this.sdkState.isPreviewInProgress=!1,this.analyticsTimer.end(Xf.PREVIEW),t.onPreview(this.store.getRoom(),a),this.sendPreviewAnalyticsEvent(),n();case 12:case"end":return r.stop()}}),r,this)})))})),s.eventBus.leave.subscribeOnce(c),s.transport.preview(e.authToken,e.initEndpoint,s.localPeer.peerId,{name:e.userName,metaData:e.metaData||""},e.autoVideoSubscribe).then((function(t){var n;r=!0,clearTimeout(a),t&&e.captureNetworkQualityInPreview&&s.networkTestManager.start(null==(n=t.config)?void 0:n.networkHealth).then((function(){i=!0}))})).catch(c)})));case 5:case"end":return n.stop()}}),n,this)})))}},{key:"join",value:function(e,t){return Ef(this,null,Bt().mark((function n(){var r,i,a,s,o,c,u,l,d,h=this;return Bt().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(Em(),Tm(),!this.sdkState.isPreviewInProgress){n.next=2;break}throw pp.NotReady(ep.JOIN,"Preview is in progress, can't join");case 2:return this.analyticsTimer.start(Xf.JOIN),this.sdkState.isJoinInProgress=!0,o=this.transportState===pm.Preview,c=tg(e.authToken),u=c.roomId,l=c.userId,d=c.role,null==(r=this.networkTestManager)||r.stop(),null==(a=null==(i=this.localPeer)?void 0:i.audioTrack)||a.destroyAudioLevelMonitor(),this.listener=t,this.commonSetup(e,u,t),this.removeDevicesFromConfig(e),this.store.setConfig(e),this.store.createAndSetUserAgent(this.frameworkInfo),Rv.resumeContext(),this.localPeer?(this.localPeer.name=e.userName,this.localPeer.role=this.store.getPolicyForRole(d),this.localPeer.customerUserId=l,this.localPeer.metadata=e.metaData):this.createAndAddLocalPeerToStore(e,d,l),this.roleChangeManager=new Lv(this.store,this.transport,this.publish.bind(this),this.removeTrack.bind(this),this.listener),this.eventBus.localRoleUpdate.subscribe(this.handleLocalRoleUpdate),Lf.d(this.TAG,"SDK Store",this.store),Lf.d(this.TAG,"\u23f3 Joining room ".concat(u)),Lf.time("join-room-".concat(u)),n.prev=5,n.next=8,this.transport.join(e.authToken,this.localPeer.peerId,{name:e.userName,metaData:e.metaData},e.initEndpoint,e.autoVideoSubscribe);case 8:return Lf.d(this.TAG,"\u2705 Joined room ".concat(u)),this.analyticsTimer.start(Xf.PEER_LIST),n.next=12,this.notifyJoin();case 12:if(this.sdkState.isJoinInProgress=!1,this.sendJoinAnalyticsEvent(o),n.t0=[this.store.getPublishParams(),!this.sdkState.published,!Cf].every((function(e){return!!e})),!n.t0){n.next=18;break}return n.next=18,this.publish(e.settings||ng).catch((function(e){var t;Lf.e(h.TAG,"Error in publish",e),null==(t=h.listener)||t.onError(e)}));case 18:n.next=23;break;case 20:throw n.prev=20,n.t1=n.catch(5),this.analyticsTimer.end(Xf.JOIN),this.sdkState.isJoinInProgress=!1,null==(s=this.listener)||s.onError(n.t1),this.sendJoinAnalyticsEvent(o,n.t1),Lf.e(this.TAG,"Unable to join room",n.t1),n.t1;case 23:Lf.timeEnd("join-room-".concat(u));case 24:case"end":return n.stop()}}),n,this,[[5,20]])})))}},{key:"stringifyMetadata",value:function(e){e.metaData&&"string"!=typeof e.metaData?e.metaData=JSON.stringify(e.metaData):e.metaData||(e.metaData="")}},{key:"cleanUp",value:function(){var e,t;this.cleanDeviceManagers(),this.eventBus.analytics.unsubscribe(this.sendAnalyticsEvent),this.analyticsTimer.cleanUp(),Fp.cleanup(),this.playlistManager.cleanup(),Lf.cleanUp(),this.sdkState=xf({},rg),this.localPeer&&(null==(e=this.localPeer.audioTrack)||e.cleanup(),this.localPeer.audioTrack=void 0,null==(t=this.localPeer.videoTrack)||t.cleanup(),this.localPeer.videoTrack=void 0),this.store.cleanUp(),this.listener=void 0,this.roleChangeManager&&this.eventBus.localRoleUpdate.unsubscribe(this.roleChangeManager.handleLocalPeerRoleUpdate)}},{key:"leave",value:function(e){return this.internalLeave(e)}},{key:"internalLeave",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1?arguments[1]:void 0;return Ef(this,null,Bt().mark((function n(){var r,i,a,s;return Bt().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!(a=this.store.getRoom())){n.next=10;break}return s=a.id,null==(r=this.networkTestManager)||r.stop(),this.eventBus.leave.publish(t),Lf.d(this.TAG,"\u23f3 Leaving room ".concat(s)),n.next=8,null==(i=this.transport)?void 0:i.leave(e);case 8:this.cleanUp(),Lf.d(this.TAG,"\u2705 Left room ".concat(s));case 10:case"end":return n.stop()}}),n,this)})))}},{key:"getLocalPeer",value:function(){return this.store.getLocalPeer()}},{key:"getPeers",value:function(){var e=this.store.getPeers();return e.length<50&&Lf.d(this.TAG,"Got peers(".concat(e.length,")"),e.toString()),e}},{key:"getAudioOutput",value:function(){return this.audioOutput}},{key:"sendMessage",value:function(e,t){this.sendMessageInternal({message:t,type:e})}},{key:"sendBroadcastMessage",value:function(e,t){return Ef(this,null,Bt().mark((function n(){return Bt().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.sendMessageInternal({message:e,type:t});case 2:return n.abrupt("return",n.sent);case 3:case"end":return n.stop()}}),n,this)})))}},{key:"sendGroupMessage",value:function(e,t,n){return Ef(this,null,Bt().mark((function r(){var i;return Bt().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(i=this.store.getKnownRoles(),0!==(t.filter((function(e){return i[e.name]}))||[]).length){r.next=3;break}throw pp.ValidationFailed("No valid role is present",t);case 3:return r.next=5,this.sendMessageInternal({message:e,recipientRoles:t,type:n});case 5:return r.abrupt("return",r.sent);case 6:case"end":return r.stop()}}),r,this)})))}},{key:"sendDirectMessage",value:function(e,t,n){return Ef(this,null,Bt().mark((function r(){var i;return Bt().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(this.store.getPeerById(t.peerId)){r.next=2;break}throw pp.ValidationFailed("Invalid peer - peer not present in the room",t);case 2:if((null==(i=this.localPeer)?void 0:i.peerId)!==t.peerId){r.next=4;break}throw pp.ValidationFailed("Cannot send message to self");case 4:return r.next=6,this.sendMessageInternal({message:e,recipientPeer:t,type:n});case 6:return r.abrupt("return",r.sent);case 7:case"end":return r.stop()}}),r,this)})))}},{key:"sendMessageInternal",value:function(e){return Ef(this,arguments,Bt().mark((function e(t){var n,r,i,a,s,o,c;return Bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.recipientRoles,r=t.recipientPeer,i=t.type,a=void 0===i?"chat":i,""!==(s=t.message).replace(/\u200b/g," ").trim()){e.next=3;break}throw Lf.w(this.TAG,"sendMessage","Ignoring empty message send"),pp.ValidationFailed("Empty message not allowed");case 3:return o=new Mf({sender:this.localPeer,type:a,message:s,recipientPeer:r,recipientRoles:n,time:new Date}),Lf.d(this.TAG,"Sending Message: ",o),e.next=7,this.transport.sendMessage(o);case 7:return c=e.sent,e.abrupt("return",(o.time=new Date(c.timestamp),o));case 9:case"end":return e.stop()}}),e,this)})))}},{key:"startScreenShare",value:function(e,t){return Ef(this,null,Bt().mark((function n(){var r,i,a,s,o,c,u=this;return Bt().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(s=this.store.getPublishParams()){n.next=3;break}return n.abrupt("return");case 3:if((o=s.allowed)&&o.includes("screen")){n.next=7;break}return Lf.e(this.TAG,"Role ".concat(null==(r=this.localPeer)?void 0:r.role," cannot share screen")),n.abrupt("return");case 7:if(!(null==(a=null==(i=this.localPeer)?void 0:i.auxiliaryTracks)?void 0:a.find((function(e){return"screen"===e.source})))){n.next=9;break}throw Error("Cannot share multiple screens");case 9:return n.next=11,this.getScreenshareTracks(e,t);case 11:if(c=n.sent,this.localPeer){n.next=15;break}return Lf.d(this.TAG,"Screenshared when not connected"),c.forEach((function(e){e.cleanup()})),n.abrupt("return");case 15:return n.next=17,this.transport.publish(c);case 17:c.forEach((function(e){var t,n,r;e.peerId=null==(t=u.localPeer)?void 0:t.peerId,null==(n=u.localPeer)||n.auxiliaryTracks.push(e),null==(r=u.listener)||r.onTrackUpdate(op.TRACK_ADDED,e,u.localPeer)}));case 18:case"end":return n.stop()}}),n,this)})))}},{key:"stopEndedScreenshare",value:function(e){return Ef(this,null,Bt().mark((function t(){return Bt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return Lf.d(this.TAG,"\u2705 Screenshare ended natively"),t.next=3,this.stopScreenShare();case 3:e();case 4:case"end":return t.stop()}}),t,this)})))}},{key:"stopScreenShare",value:function(){return Ef(this,null,Bt().mark((function e(){var t,n,r,i,a;return Bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Lf.d(this.TAG,"\u2705 Screenshare ended from app"),!(n=null==(t=this.localPeer)?void 0:t.auxiliaryTracks.filter((function(e){return"screen"===e.source})))){e.next=20;break}r=Ut(n),e.prev=4,r.s();case 6:if((i=r.n()).done){e.next=12;break}return a=i.value,e.next=10,this.removeTrack(a.trackId);case 10:e.next=6;break;case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(4),r.e(e.t0);case 17:return e.prev=17,r.f(),e.finish(17);case 20:case"end":return e.stop()}}),e,this,[[4,14,17,20]])})))}},{key:"addTrack",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"regular";return Ef(this,null,Bt().mark((function n(){var r,i,a,s,o,c,u,l;return Bt().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e){n.next=3;break}return Lf.w(this.TAG,"Please pass a valid MediaStreamTrack"),n.abrupt("return");case 3:if(this.localPeer){n.next=5;break}throw pp.NotConnected(ep.VALIDATION,"No local peer present, cannot addTrack");case 5:if(!this.localPeer.auxiliaryTracks.find((function(t){return t.trackId===e.id}))){n.next=7;break}return n.abrupt("return");case 7:return o=e.kind,c=new MediaStream([e]),u=new Av(c),l=new("audio"===o?Xp:iv)(u,e,t,this.eventBus),this.setPlaylistSettings({track:e,hmsTrack:l,source:t}),n.next=11,null==(r=this.transport)?void 0:r.publish([l]);case 11:l.peerId=null==(i=this.localPeer)?void 0:i.peerId,null==(a=this.localPeer)||a.auxiliaryTracks.push(l),null==(s=this.listener)||s.onTrackUpdate(op.TRACK_ADDED,l,this.localPeer);case 14:case"end":return n.stop()}}),n,this)})))}},{key:"removeTrack",value:function(e){return Ef(this,null,Bt().mark((function t(){var n,r,i;return Bt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.localPeer){t.next=2;break}throw pp.NotConnected(ep.VALIDATION,"No local peer present, cannot removeTrack");case 2:if(r=this.localPeer.auxiliaryTracks.findIndex((function(t){return t.trackId===e})),!(r>-1)){t.next=12;break}return i=this.localPeer.auxiliaryTracks[r],t.next=7,this.transport.unpublish([i]);case 7:"audioplaylist"===i.source?this.playlistManager.stop(xp.audio):"videoplaylist"===i.source&&this.playlistManager.stop(xp.video),this.localPeer.auxiliaryTracks.splice(r,1),null==(n=this.listener)||n.onTrackUpdate(op.TRACK_REMOVED,i,this.localPeer),t.next=13;break;case 12:Lf.w(this.TAG,"No track found for ".concat(e));case 13:case"end":return t.stop()}}),t,this)})))}},{key:"setAnalyticsLevel",value:function(e){this.analyticsEventsService.level=e}},{key:"setLogLevel",value:function(e){Lf.level=e}},{key:"addAudioListener",value:function(e){this.audioListener=e,this.notificationManager.setAudioListener(e)}},{key:"addConnectionQualityListener",value:function(e){this.notificationManager.setConnectionQualityListener(e)}},{key:"changeRole",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return Ef(this,null,Bt().mark((function r(){var i;return Bt().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(r.t0=!e.role||e.role.name===t,r.t0){r.next=4;break}return r.next=4,null==(i=this.transport)?void 0:i.changeRoleOfPeer(e,t,n);case 4:case"end":return r.stop()}}),r,this)})))}},{key:"changeRoleOfPeer",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return Ef(this,null,Bt().mark((function r(){var i;return Bt().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(r.t0=!e.role||e.role.name===t,r.t0){r.next=4;break}return r.next=4,null==(i=this.transport)?void 0:i.changeRoleOfPeer(e,t,n);case 4:case"end":return r.stop()}}),r,this)})))}},{key:"changeRoleOfPeersWithRoles",value:function(e,t){return Ef(this,null,Bt().mark((function n(){var r;return Bt().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.t0=e.length<=0||!t,n.t0){n.next=4;break}return n.next=4,null==(r=this.transport)?void 0:r.changeRoleOfPeersWithRoles(e,t);case 4:case"end":return n.stop()}}),n,this)})))}},{key:"acceptChangeRole",value:function(e){return Ef(this,null,Bt().mark((function t(){var n;return Bt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,null==(n=this.transport)?void 0:n.acceptRoleChange(e);case 2:case"end":return t.stop()}}),t,this)})))}},{key:"endRoom",value:function(e,t){return Ef(this,null,Bt().mark((function n(){var r;return Bt().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(this.localPeer){n.next=2;break}throw pp.NotConnected(ep.VALIDATION,"No local peer present, cannot end room");case 2:return n.next=4,null==(r=this.transport)?void 0:r.endRoom(e,t);case 4:return n.next=6,this.leave();case 6:case"end":return n.stop()}}),n,this)})))}},{key:"removePeer",value:function(e,t){return Ef(this,null,Bt().mark((function n(){var r;return Bt().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(this.localPeer){n.next=2;break}throw pp.NotConnected(ep.VALIDATION,"No local peer present, cannot remove peer");case 2:if(this.store.getPeerById(e.peerId)){n.next=4;break}throw pp.ValidationFailed("Invalid peer, given peer not present in room",e);case 4:return n.next=6,null==(r=this.transport)?void 0:r.removePeer(e.peerId,t);case 6:case"end":return n.stop()}}),n,this)})))}},{key:"startRTMPOrRecording",value:function(e){return Ef(this,null,Bt().mark((function t(){var n;return Bt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.localPeer){t.next=2;break}throw pp.NotConnected(ep.VALIDATION,"No local peer present, cannot start streaming or recording");case 2:return t.next=4,null==(n=this.transport)?void 0:n.startRTMPOrRecording(e);case 4:case"end":return t.stop()}}),t,this)})))}},{key:"stopRTMPAndRecording",value:function(){return Ef(this,null,Bt().mark((function e(){var t;return Bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.localPeer){e.next=2;break}throw pp.NotConnected(ep.VALIDATION,"No local peer present, cannot stop streaming or recording");case 2:return e.next=4,null==(t=this.transport)?void 0:t.stopRTMPOrRecording();case 4:case"end":return e.stop()}}),e,this)})))}},{key:"startHLSStreaming",value:function(e){return Ef(this,null,Bt().mark((function t(){var n;return Bt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.localPeer){t.next=2;break}throw pp.NotConnected(ep.VALIDATION,"No local peer present, cannot start HLS streaming");case 2:return t.next=4,null==(n=this.transport)?void 0:n.startHLSStreaming(e);case 4:case"end":return t.stop()}}),t,this)})))}},{key:"stopHLSStreaming",value:function(e){return Ef(this,null,Bt().mark((function t(){var n;return Bt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.localPeer){t.next=2;break}throw pp.NotConnected(ep.VALIDATION,"No local peer present, cannot stop HLS streaming");case 2:return t.next=4,null==(n=this.transport)?void 0:n.stopHLSStreaming(e);case 4:case"end":return t.stop()}}),t,this)})))}},{key:"sendHLSTimedMetadata",value:function(e){return Ef(this,null,Bt().mark((function t(){var n;return Bt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.validateJoined("sendHLSTimedMetadata"),t.next=3,null==(n=this.transport)?void 0:n.sendHLSTimedMetadata(e);case 3:case"end":return t.stop()}}),t,this)})))}},{key:"changeName",value:function(e){return Ef(this,null,Bt().mark((function t(){var n;return Bt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.validateJoined("changeName"),t.next=3,null==(n=this.transport)?void 0:n.changeName(e);case 3:this.notificationManager.updateLocalPeer({name:e});case 4:case"end":return t.stop()}}),t,this)})))}},{key:"changeMetadata",value:function(e){return Ef(this,null,Bt().mark((function t(){var n;return Bt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.validateJoined("changeMetadata"),t.next=3,null==(n=this.transport)?void 0:n.changeMetadata(e);case 3:this.notificationManager.updateLocalPeer({metadata:e});case 4:case"end":return t.stop()}}),t,this)})))}},{key:"setSessionMetadata",value:function(e){return Ef(this,null,Bt().mark((function t(){return Bt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.transport.setSessionMetadata(e);case 2:case"end":return t.stop()}}),t,this)})))}},{key:"getSessionMetadata",value:function(){return Ef(this,null,Bt().mark((function e(){return Bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.transport.getSessionMetadata();case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e,this)})))}},{key:"getRoles",value:function(){return Object.values(this.store.getKnownRoles())}},{key:"changeTrackState",value:function(e,t){return Ef(this,null,Bt().mark((function n(){var r,i;return Bt().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e.type!==Tp.VIDEO||"regular"===e.source){n.next=3;break}return Lf.w(this.TAG,"Muting non-regular video tracks is currently not supported"),n.abrupt("return");case 3:if(e.enabled!==t){n.next=6;break}return Lf.w(this.TAG,"Aborting change track state, track already has enabled - ".concat(t),e),n.abrupt("return");case 6:if(this.store.getTrackById(e.trackId)){n.next=8;break}throw pp.ValidationFailed("No track found for change track state",e);case 8:if(i=this.store.getPeerByTrackId(e.trackId)){n.next=11;break}throw pp.ValidationFailed("No peer found for change track state",e);case 11:return n.next=13,null==(r=this.transport)?void 0:r.changeTrackState({requested_for:i.peerId,track_id:e.trackId,stream_id:e.stream.id,mute:!t});case 13:case"end":return n.stop()}}),n,this)})))}},{key:"changeMultiTrackState",value:function(e){return Ef(this,null,Bt().mark((function t(){var n,r,i,a,s;return Bt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("boolean"==typeof e.enabled){t.next=2;break}throw pp.ValidationFailed("Pass a boolean for enabled");case 2:return r=e.enabled,i=e.roles,a=e.type,s=e.source,t.next=5,null==(n=this.transport)?void 0:n.changeMultiTrackState({value:!r,type:a,source:s,roles:null==i?void 0:i.map((function(e){return null==e?void 0:e.name}))});case 5:case"end":return t.stop()}}),t,this)})))}},{key:"setFrameworkInfo",value:function(e){this.frameworkInfo=e}},{key:"publish",value:function(e){return Ef(this,null,Bt().mark((function t(){var n;return Bt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.localTrackManager.getTracksToPublish(e);case 2:return n=t.sent,t.next=5,this.setAndPublishTracks(n);case 5:this.sdkState.published=!0;case 6:case"end":return t.stop()}}),t,this)})))}},{key:"setAndPublishTracks",value:function(e){return Ef(this,null,Bt().mark((function t(){var n,r,i,a;return Bt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=Ut(e),t.prev=1,r.s();case 3:if((i=r.n()).done){t.next=11;break}return a=i.value,t.next=7,this.transport.publish([a]);case 7:this.setLocalPeerTrack(a),null==(n=this.listener)||n.onTrackUpdate(op.TRACK_ADDED,a,this.localPeer);case 9:t.next=3;break;case 11:t.next=16;break;case 13:t.prev=13,t.t0=t.catch(1),r.e(t.t0);case 16:return t.prev=16,r.f(),t.finish(16);case 19:return t.next=21,this.initDeviceManagers();case 21:case"end":return t.stop()}}),t,this,[[1,13,16,19]])})))}},{key:"setLocalPeerTrack",value:function(e){var t;switch(e.peerId=null==(t=this.localPeer)?void 0:t.peerId,e.type){case Tp.AUDIO:this.localPeer.audioTrack=e;break;case Tp.VIDEO:this.localPeer.videoTrack=e}}},{key:"initDeviceManagers",value:function(){return Ef(this,null,Bt().mark((function e(){var t,n,r,i,a;return Bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.sdkState.deviceManagersInitialised,e.t0){e.next=12;break}return this.sdkState.deviceManagersInitialised=!0,e.next=5,this.deviceManager.init();case 5:return e.next=7,this.deviceManager.updateOutputDevice(null==(n=null==(t=this.store.getConfig())?void 0:t.settings)?void 0:n.audioOutputDeviceId);case 7:if(e.t1=e.sent,e.t1){e.next=11;break}return e.next=11,this.deviceManager.updateOutputDevice(null==(i=null==(r=Fp.getSelection())?void 0:r.audioOutput)?void 0:i.deviceId);case 11:this.audioSinkManager.init(null==(a=this.store.getConfig())?void 0:a.audioSinkElementId);case 12:case"end":return e.stop()}}),e,this)})))}},{key:"cleanDeviceManagers",value:function(){this.eventBus.deviceChange.unsubscribe(this.handleDeviceChange),this.eventBus.audioPluginFailed.unsubscribe(this.handleAudioPluginError),this.eventBus.autoplayError.unsubscribe(this.handleAutoplayError),this.deviceManager.cleanUp(),this.audioSinkManager.cleanUp()}},{key:"initPreviewTrackAudioLevelMonitor",value:function(){var e,t=this,n=null==(e=this.localPeer)?void 0:e.audioTrack;null==n||n.initAudioLevelMonitor(),this.eventBus.trackAudioLevelUpdate.subscribe((function(e){var r,i=e&&e.track.trackId===(null==n?void 0:n.trackId)?[{audioLevel:e.audioLevel,peer:t.localPeer,track:n}]:[];t.store.updateSpeakers(i),null==(r=t.audioListener)||r.onAudioLevelUpdate(i)})),this.eventBus.localAudioSilence.subscribe(this.sendAudioPresenceFailed)}},{key:"notifyJoin",value:function(){var e,t=this,n=this.store.getLocalPeer(),r=this.store.getRoom();return r.joinedAt=new Date,n&&(n.joinedAt=r.joinedAt),(null==n?void 0:n.role)?(this.analyticsTimer.end(Xf.JOIN),void(null==(e=this.listener)||e.onJoin(r))):new Promise((function(e,n){t.eventBus.policyChange.subscribeOnce((function(){var n;t.analyticsTimer.end(Xf.JOIN),null==(n=t.listener)||n.onJoin(r),e()})),t.eventBus.leave.subscribeOnce((function(e){n(e)}))}))}},{key:"setUpPreview",value:function(e,t){this.listener=t,this.sdkState.isPreviewInProgress=!0;var n=tg(e.authToken),r=n.roomId,i=n.userId,a=n.role;this.commonSetup(e,r,t),this.store.setConfig(e),this.store.createAndSetUserAgent(this.frameworkInfo),this.createAndAddLocalPeerToStore(e,a,i),Lf.d(this.TAG,"SDK Store",this.store)}},{key:"setPlaylistSettings",value:function(e){return Ef(this,arguments,Bt().mark((function e(t){var n,r,i,a,s,o,c;return Bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.track,r=t.hmsTrack,"videoplaylist"!==(i=t.source)){e.next=8;break}return a={},"audio"===n.kind?a.maxBitrate=64:(a.maxBitrate=1e3,s=n.getSettings(),o=s.width,c=s.height,a.width=o,a.height=c),e.next=6,r.setSettings(a);case 6:e.next=12;break;case 8:if(e.t0="audioplaylist"===i,!e.t0){e.next=12;break}return e.next=12,r.setSettings({maxBitrate:64});case 12:case"end":return e.stop()}}),e)})))}},{key:"createAndAddLocalPeerToStore",value:function(e,t,n){var r=this.store.getPolicyForRole(t),i=new Gf({name:e.userName||"",customerUserId:n,metadata:e.metaData||"",role:r});this.store.addPeer(i)}},{key:"commonSetup",value:function(e,t,n){this.stringifyMetadata(e),e.initEndpoint||(e.initEndpoint="https://prod-init.100ms.live"),this.errorListener=n,this.deviceChangeListener=n,this.initStoreAndManagers(),this.store.setErrorListener(this.errorListener),this.store.getRoom()||this.store.setRoom(new jf(t,this.store))}},{key:"removeDevicesFromConfig",value:function(e){this.store.getConfig()&&e.settings&&(delete e.settings.audioOutputDeviceId,delete e.settings.videoDeviceId,delete e.settings.audioInputDeviceId)}},{key:"getScreenshareTracks",value:function(e,t){return Ef(this,null,Bt().mark((function n(){var r,i,a,s,o,c,l=this;return Bt().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.localTrackManager.getLocalScreen(t);case 2:if(r=n.sent,i=u(r,2),a=i[0],s=i[1],o=function(){l.stopEndedScreenshare(e)},c=[],!(null==t?void 0:t.audioOnly)){n.next=14;break}if(a.nativeTrack.stop(),s){n.next=11;break}throw dp.NothingToReturn(ep.TRACK,"Select share audio when sharing screen","No audio found");case 11:c.push(s),s.nativeTrack.onended=o,n.next=15;break;case 14:c.push(a),a.nativeTrack.onended=o,s&&c.push(s);case 15:return n.abrupt("return",c);case 16:case"end":return n.stop()}}),n,this)})))}}]),e}();function ag(e,t){return e===t}function sg(e,t,n){if(null===t||null===n||t.length!==n.length)return!1;for(var r=t.length,i=0;i<r;i++)if(!e(t[i],n[i]))return!1;return!0}function og(e){var t=Array.isArray(e[0])?e[0]:e;if(!t.every((function(e){return"function"===typeof e}))){var n=t.map((function(e){return typeof e})).join(", ");throw new Error("Selector creators expect all input-selectors to be functions, instead received the following types: ["+n+"]")}return t}Lf.i("adapter","".concat(Xh.browserDetails.browser," v").concat(Xh.browserDetails.version));var cg,ug,lg=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return function(){for(var t=arguments.length,r=Array(t),i=0;i<t;i++)r[i]=arguments[i];var a=0,s=r.pop(),o=og(r),c=e.apply(void 0,[function(){return a++,s.apply(null,arguments)}].concat(n)),u=e((function(){for(var e=[],t=o.length,n=0;n<t;n++)e.push(o[n].apply(null,arguments));return c.apply(null,e)}));return u.resultFunc=s,u.dependencies=o,u.recomputations=function(){return a},u.resetRecomputations=function(){return a=0},u}}((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ag,n=null,r=null;return function(){return sg(t,n,arguments)||(r=e.apply(null,arguments)),n=arguments,r}}));var dg,hg=Object.defineProperty,fg=Object.defineProperties,pg=Object.getOwnPropertyDescriptors,vg=Object.getOwnPropertySymbols,mg=Object.prototype.hasOwnProperty,gg=Object.prototype.propertyIsEnumerable,yg=function(e,t,n){return t in e?hg(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},bg=function(e,t){for(var n in t||(t={}))mg.call(t,n)&&yg(e,n,t[n]);if(vg){var r,i=Ut(vg(t));try{for(i.s();!(r=i.n()).done;){n=r.value;gg.call(t,n)&&yg(e,n,t[n])}}catch(a){i.e(a)}finally{i.f()}}return e},kg=function(e,t){return fg(e,pg(t))},xg=function(e,t,n){return new Promise((function(r,i){var a=function(e){try{o(n.next(e))}catch(Se){i(Se)}},s=function(e){try{o(n.throw(e))}catch(Se){i(Se)}},o=function(e){return e.done?r(e.value):Promise.resolve(e.value).then(a,s)};o((n=n.apply(e,t)).next())}))},wg=function(e,t){return function(){return t||e((t={exports:{}}).exports,t),t.exports}}((function(e,t){t.exports={version:"0.8.1",license:"MIT",main:"dist/index.cjs.js",module:"dist/index.js",typings:"dist/index.d.ts",files:["dist","src"],engines:{node:">=12"},exports:{".":{require:"./dist/index.cjs.js",import:"./dist/index.js",default:"./dist/index.js"}},scripts:{prestart:"rm -rf dist && yarn types:build",start:'concurrently "yarn dev" "yarn types"',dev:"node ../../scripts/dev","build:only":"node ../../scripts/build",build:"yarn build:only && yarn types:build",types:"tsc -w","types:build":"tsc -p tsconfig.json",format:"prettier --write src/**/*.ts",test:"jest --maxWorkers=1","test:watch":"jest --watch","test:coverage":"jest --coverage",lint:"eslint -c ../../.eslintrc .","lint:fix":"yarn lint --fix",prepare:"yarn build",size:"size-limit",analyze:"size-limit --why",docs:"rm -rf ./docs && typedoc && rm -f ./docs/README.md && mkdir ./docs/home &&mv ./docs/modules.md ./docs/home/content.md && node ../../scripts/docs-store && npx prettier --write './docs/**/*'"},name:"@100mslive/hms-video-store",author:"100ms",sideEffects:!1,dependencies:{"@100mslive/hms-video":"0.7.1",eventemitter2:"^6.4.7",immer:"^9.0.6",reselect:"4.0.0",zustand:"3.5.7"},devDependencies:{"ts-node":"^10.4.0",tslib:"^2.2.0"},description:"This is an addon to the core sdk provided by 100ms. It abstracts away the intricacies of data management and provides a flux based reactive data store where data flows in only one direction.",repository:{type:"git",url:"git+https://github.com/100mslive/hms-video-store.git"},keywords:["video","webrtc","conferencing","100ms"],bugs:{url:"https://github.com/100mslive/hms-video-store/issues"},homepage:"https://github.com/100mslive/hms-video-store#readme",gitHead:"8f89cfd2a2898848be5368da6211519f6c2c1cef"}}));!function(e){e.Disconnected="Disconnected",e.Preview="Preview",e.Connecting="Connecting",e.Connected="Connected",e.Reconnecting="Reconnecting",e.Disconnecting="Disconnecting",e.Failed="Failed"}(dg||(dg={}));var Tg,Eg,_g,Sg,Ag=function(){return{room:{id:"",isConnected:!1,name:"",peers:[],localPeer:"",roomState:dg.Disconnected,recording:{browser:{running:!1},server:{running:!1},hls:{running:!1}},rtmp:{running:!1},hls:{running:!1,variants:[]},sessionId:""},peers:{},tracks:{},playlist:{audio:{list:{},selection:{id:"",hasPrevious:!1,hasNext:!1},progress:0,volume:0,currentTime:0,playbackRate:1},video:{list:{},selection:{id:"",hasPrevious:!1,hasNext:!1},progress:0,volume:0,currentTime:0,playbackRate:1}},messages:{byID:{},allIDs:[]},speakers:{},connectionQualities:{},settings:{audioInputDeviceId:"",audioOutputDeviceId:"",videoInputDeviceId:""},devices:{audioInput:[],audioOutput:[],videoInput:[]},roles:{},roleChangeRequests:[],errors:[]}},Cg=function(){return{peerStats:{},remoteTrackStats:{},localTrackStats:{},localPeer:{id:""}}};!function(e){e.CHAT="chat"}(Tg||(Tg={})),function(e){e.INFO="info",e.ERROR="error"}(Eg||(Eg={})),function(e){e.PEER_JOINED="PEER_JOINED",e.PEER_LEFT="PEER_LEFT",e.PEER_LIST="PEER_LIST",e.NEW_MESSAGE="NEW_MESSAGE",e.ERROR="ERROR",e.RECONNECTING="RECONNECTING",e.RECONNECTED="RECONNECTED",e.TRACK_ADDED="TRACK_ADDED",e.TRACK_REMOVED="TRACK_REMOVED",e.TRACK_MUTED="TRACK_MUTED",e.TRACK_UNMUTED="TRACK_UNMUTED",e.TRACK_DEGRADED="TRACK_DEGRADED",e.TRACK_RESTORED="TRACK_RESTORED",e.TRACK_DESCRIPTION_CHANGED="TRACK_DESCRIPTION_CHANGED",e.ROLE_UPDATED="ROLE_UPDATED",e.CHANGE_TRACK_STATE_REQUEST="CHANGE_TRACK_STATE_REQUEST",e.CHANGE_MULTI_TRACK_STATE_REQUEST="CHANGE_MULTI_TRACK_STATE_REQUEST",e.ROOM_ENDED="ROOM_ENDED",e.REMOVED_FROM_ROOM="REMOVED_FROM_ROOM",e.DEVICE_CHANGE_UPDATE="DEVICE_CHANGE_UPDATE",e.PLAYLIST_TRACK_ENDED="PLAYLIST_TRACK_ENDED",e.NAME_UPDATED="NAME_UPDATED",e.METADATA_UPDATED="METADATA_UPDATED"}(_g||(_g={})),function(e){e.audio="audio",e.video="video"}(Sg||(Sg={}));var Ig=(X(cg={},sp.PEER_JOINED,_g.PEER_JOINED),X(cg,sp.PEER_LEFT,_g.PEER_LEFT),X(cg,sp.ROLE_UPDATED,_g.ROLE_UPDATED),X(cg,sp.NAME_UPDATED,_g.NAME_UPDATED),X(cg,sp.METADATA_UPDATED,_g.METADATA_UPDATED),cg),Rg=(X(ug={},op.TRACK_ADDED,_g.TRACK_ADDED),X(ug,op.TRACK_REMOVED,_g.TRACK_REMOVED),X(ug,op.TRACK_MUTED,_g.TRACK_MUTED),X(ug,op.TRACK_UNMUTED,_g.TRACK_UNMUTED),X(ug,op.TRACK_DEGRADED,_g.TRACK_DEGRADED),X(ug,op.TRACK_RESTORED,_g.TRACK_RESTORED),X(ug,op.TRACK_DESCRIPTION_CHANGED,_g.TRACK_DESCRIPTION_CHANGED),ug);function Pg(e,t){var n,r;if(t){var i,a=Ut(t.auxiliaryTracks);try{for(a.s();!(i=a.n()).done;){var s=e[i.value];Og(s)&&(r=Dg(s)?s:r,n=Ng(s)?s:n)}}catch(o){a.e(o)}finally{a.f()}}return{video:n,audio:r}}function Dg(e){return e&&"audio"===e.type}function Ng(e){return e&&"video"===e.type}function Og(e){return e&&"screen"===e.source}function Lg(e){return e&&"audioplaylist"===e.source}function Mg(e){return e&&"videoplaylist"===e.source}function jg(e){return!!e&&Boolean(null==e?void 0:e.degraded)}function Fg(e,t){return!(!t||!e.tracks[t])&&e.tracks[t].enabled}var Ug=function(e){return e.room},Bg=(lg(Ug,(function(e){return e.id})),function(e){return e.peers}),Gg=function(e){return e.messages.byID},Vg=function(e){return e.messages.allIDs},Hg=function(e){return e.tracks},zg=function(e){return e.settings},Wg=function(e){return e.appData},Kg=lg([Ug],(function(e){return e&&e.isConnected})),qg=(lg([Kg,Ug],(function(e,t){return e?void 0!==t.peerCount?t.peerCount||1:t.peers.length:Math.max(void 0!==t.peerCount?t.peerCount:t.peers.length-1,0)})),lg([Ug,Bg],(function(e,t){return e.peers.map((function(e){return t[e]}))}))),Yg=lg(Hg,(function(e){return Object.values(e)})),Jg=lg(Ug,Bg,(function(e,t){return t[e.localPeer]})),Qg=lg(Ug,(function(e){return e.localPeer})),Xg=(lg(Jg,(function(e){return null==e?void 0:e.name})),lg(Jg,(function(e){return null==e?void 0:e.roleName})),lg(Jg,(function(e){return null==e?void 0:e.audioTrack}))),Zg=lg(Jg,(function(e){return null==e?void 0:e.videoTrack})),$g=lg(Jg,(function(e){return null==e?void 0:e.auxiliaryTracks})),ey=lg([Xg,Zg,$g],(function(e,t,n){var r=te(n);return e&&r.unshift(e),t&&r.unshift(t),r})),ty=(lg(qg,(function(e){return e.filter((function(e){return!e.isLocal}))})),lg(Bg,(function(e){return e.speakers}),(function(e,t){var n=Object.entries(t).sort((function(e,t){var n,r,i=(null==(n=e[1])?void 0:n.audioLevel)||0;return((null==(r=t[1])?void 0:r.audioLevel)||0)>i?1:-1}));if(n.length>0&&n[0][1].audioLevel&&n[0][1].audioLevel>0){var r=n[0][1].peerID;if(r in e)return e[r]}return null})),function(e){var t=Jg(e);return Fg(e,null==t?void 0:t.videoTrack)}),ny=function(e){var t=Jg(e);return function(e,t){return!(!t||!e.tracks[t])&&e.tracks[t].displayEnabled}(e,null==t?void 0:t.videoTrack)},ry=lg(Jg,Hg,(function(e,t){var n=Pg(t,e),r=n.video,i=n.audio;return!(!r&&!i)})),iy=lg(Bg,Hg,(function(e,t){var n;for(var r in e){var i=e[r],a=Pg(t,i),s=a.video,o=a.audio;if(s)return i;o&&!n&&(n=i)}return n})),ay=(lg(iy,(function(e){return!!e})),lg(Bg,Hg,(function(e,t){for(var n in e){var r=e[n],i=Pg(t,r),a=i.audio;if(!i.video&&a)return r}})),lg(Bg,Hg,(function(e,t){var n=[],r=[];for(var i in e){var a=e[i],s=Pg(t,a),o=s.video,c=s.audio;o?n.push(a):c&&r.push(a)}return n.concat(r)})),lg(Bg,Hg,(function(e,t){for(var n in t){var r=t[n];if(Mg(r)&&Ng(r)&&r.peerId)return e[r.peerId]}})),lg(Bg,Hg,(function(e,t){for(var n in t){var r=t[n];if(Lg(r)&&r.peerId)return e[r.peerId]}})),lg(Yg,(function(e){return e.filter(jg)})),lg(Vg,(function(e){return e.length}))),sy=(lg(Gg,(function(e){return Object.values(e).filter((function(e){return!e.read})).length})),lg(Vg,Gg,(function(e,t){var n=[];return e.forEach((function(e){n.push(t[e])})),n}))),oy=lg([Ug],(function(e){return e&&e.roomState})),cy=(lg(oy,(function(e){return e===dg.Preview})),lg(Ug,(function(e){return e.roomState!==dg.Disconnected})),function(e){return e.roles}),uy=(lg([cy],(function(e){return Object.keys(e)})),lg([Jg,cy],(function(e,t){return(null==e?void 0:e.roleName)?t[e.roleName]:null}))),ly=(lg([uy],(function(e){var t;return!!(null==(t=null==e?void 0:e.subscribeParams)?void 0:t.subscribeToRoles)&&e.subscribeParams.subscribeToRoles.length>0})),lg(uy,(function(e){return null==e?void 0:e.permissions}))),dy=(lg(Ug,(function(e){return e.recording})),lg(Ug,(function(e){return e.rtmp})),lg(Ug,(function(e){return e.hls})),lg(Ug,(function(e){return e.sessionId})),lg(Ug,(function(e){return e.startedAt})),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Sg.audio;return function(t){return t.playlist[e].list}}),hy=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Sg.audio;return function(t){return t.playlist[e].selection}},fy=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Sg.audio;return function(t){return t.playlist[e].progress}},py=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Sg.audio;return function(t){return t.playlist[e].currentTime}},vy=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Sg.audio;return function(t){return t.playlist[e].playbackRate}},my=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Sg.audio;return function(t){return t.playlist[e].volume}},gy=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Sg.audio;return lg(dy(e),(function(e){return Object.values(e)}))},yy=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Sg.audio;return lg(dy(e),hy(e),(function(e,t){if(t.id)return e[t.id]}))},by={selection:hy(Sg.audio),progress:fy(Sg.audio),currentTime:py(Sg.audio),playbackRate:vy(Sg.audio),volume:my(Sg.audio),list:gy(Sg.audio),selectedItem:yy(Sg.audio)},ky={selection:hy(Sg.video),progress:fy(Sg.video),currentTime:py(Sg.video),playbackRate:vy(Sg.video),volume:my(Sg.video),list:gy(Sg.video),selectedItem:yy(Sg.video)};function xy(e){return function(t){return function(n){return e(n,t)}}}var wy="HMS-Store:",Ty=function(){function e(){et(this,e)}return nt(e,null,[{key:"v",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];this.log.apply(this,[Rf.VERBOSE,e].concat(n))}},{key:"d",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.log.apply(this,[Rf.DEBUG].concat(t))}},{key:"i",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.log.apply(this,[Rf.INFO].concat(t))}},{key:"w",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.log.apply(this,[Rf.WARN].concat(t))}},{key:"e",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.log.apply(this,[Rf.ERROR].concat(t))}},{key:"time",value:function(e){this.log(Rf.TIME,"[HMSPerformanceTiming]",e)}},{key:"timeEnd",value:function(e){this.log(Rf.TIMEEND,"[HMSPerformanceTiming]",e,e)}},{key:"cleanUp",value:function(){performance.clearMarks(),performance.clearMeasures()}},{key:"log",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if(!(this.level.valueOf()>e.valueOf()))switch(e){case Rf.VERBOSE:var i;(i=console).log.apply(i,[wy].concat(n));break;case Rf.DEBUG:var a;(a=console).debug.apply(a,[wy].concat(n));break;case Rf.INFO:var s;(s=console).info.apply(s,[wy].concat(n));break;case Rf.WARN:var o;(o=console).warn.apply(o,[wy].concat(n));break;case Rf.ERROR:var c;(c=console).error.apply(c,[wy].concat(n));break;case Rf.TIME:performance.mark(n[1]);break;case Rf.TIMEEND:var u=n[0],l=n[1];try{var d=performance.measure(l,l);this.log(Rf.DEBUG,u,l,null==d?void 0:d.duration),performance.clearMarks(l),performance.clearMeasures(l)}catch(d){this.log(Rf.DEBUG,u,l,d)}}}}]),e}();Ty.level=Rf.VERBOSE;var Ey=function(e,t){return t},_y=function(e,t){return t},Sy=function(e,t){return t},Ay=lg([Bg,Ey],(function(e,t){return t?e[t]:null})),Cy=lg([Hg,_y],(function(e,t){return t?e[t]:null})),Iy=lg([Hg,_y],(function(e,t){if(!t)return null;var n=e[t];return"video"===(null==n?void 0:n.type)?n:null})),Ry=lg([Hg,_y],(function(e,t){if(!t)return null;var n=e[t];return"audio"===(null==n?void 0:n.type)?n:null})),Py=lg([Hg,_y],(function(e,t){if(!t)return null;var n=e[t];return"audio"===(null==n?void 0:n.type)&&"screen"===(null==n?void 0:n.source)?n:null})),Dy=lg([Hg,_y],(function(e,t){if(!t)return null;var n=e[t];return"video"===(null==n?void 0:n.type)&&"screen"===(null==n?void 0:n.source)?n:null})),Ny=xy(Ay),Oy=(xy(lg([Wg,function(e,t){return t}],(function(e,t){if(e)return t?e[t]:e}))),xy(lg(Ay,(function(e){return null==e?void 0:e.name}))),xy(Cy)),Ly=xy(Iy),My=(xy(Ry),xy(Py),xy(Dy),xy((function(e,t){var n=Ay(e,t);if(n&&n.videoTrack&&""!==n.videoTrack)return e.tracks[n.videoTrack]})),xy((function(e,t){var n=Ay(e,t);if(n&&n.audioTrack&&""!==n.audioTrack)return e.tracks[n.audioTrack]}))),jy=(xy((function(e,t){var n=Ay(e,t);return(null==n?void 0:n.auxiliaryTracks.map((function(t){return e.tracks[t]})))||[]})),function(e,t){return t?e.speakers[t]:null}),Fy=(xy(lg(jy,(function(e){return(null==e?void 0:e.audioLevel)||0}))),xy(lg((function(e,t){var n=My(t)(e);return jy(e,null==n?void 0:n.id)}),(function(e){return(null==e?void 0:e.audioLevel)||0}))),xy((function(e,t){if(t)return e.connectionQualities[t]})),xy((function(e,t){var n=Ay(e,t);if(n){var r=null==n?void 0:n.auxiliaryTracks.find((function(t){return Dg(e.tracks[t])}));return r?e.tracks[r]:void 0}})),xy(lg(Hg,Ay,(function(e,t){var n=null==t?void 0:t.auxiliaryTracks.find((function(t){var n=e[t];return Mg(n)&&Ng(n)}));return n?e[n]:void 0}))),xy(lg(Hg,Ay,(function(e,t){var n=null==t?void 0:t.auxiliaryTracks.find((function(t){var n=e[t];return Mg(n)&&Dg(n)}));return n?e[n]:void 0}))),xy(lg(Hg,Ay,(function(e,t){var n=null==t?void 0:t.auxiliaryTracks.find((function(t){var n=e[t];return Lg(n)&&Dg(n)}));return n?e[n]:void 0}))),xy(lg(Hg,Ay,(function(e,t){return Pg(e,t)})))),Uy=function(e){return lg(Fy(e),(function(e){return e.audio}))},By=(xy((function(e,t){var n=Ay(e,t);return Fg(e,null==n?void 0:n.audioTrack)})),xy((function(e,t){var n=Ay(e,t);return Fg(e,null==n?void 0:n.videoTrack)})),xy((function(e,t){if(t&&e.tracks[t])return 0===e.tracks[t].volume}))),Gy=(xy((function(e,t){var n=Ay(e,t);return By(null==n?void 0:n.audioTrack)(e)})),xy((function(e,t){var n=Uy(t)(e);return By(null==n?void 0:n.id)(e)})),xy((function(e,t){var n=Cy(e,t);if(n)return"audio"!==n.type?void Ty.w("Please pass audio track here"):n.volume}))),Vy=(xy((function(e,t){var n=Ay(e,t);return Gy(null==n?void 0:n.audioTrack)(e)})),xy((function(e,t){var n=Uy(t)(e);return Gy(null==n?void 0:n.id)(e)})),xy((function(e,t){var n=Cy(e,t);if(n)return"video"!==n.type?void Ty.w("Please pass video track here"):n.layer})),lg([sy,Qg,Ey],(function(e,t,n){if(n)return e.filter((function(e){var r;return!(!e.recipientPeer&&!(null==(r=e.recipientRoles)?void 0:r.length)||e.sender&&![t,n].includes(e.sender))&&[t,n].includes(e.recipientPeer)}))}))),Hy=lg([sy,Sy],(function(e,t){if(t)return e.filter((function(e){var n,r;return!!(null==(n=e.recipientRoles)?void 0:n.length)&&(null==(r=e.recipientRoles)?void 0:r.includes(t))}))})),zy=lg(sy,(function(e){return e.filter((function(e){var t;return!e.recipientPeer&&!(null==(t=e.recipientRoles)?void 0:t.length)}))})),Wy=lg([Hy,Sy],(function(e){return e?e.filter((function(e){return!e.read})).length:0})),Ky=lg([Vy,Ey],(function(e){return e?e.filter((function(e){return!e.read})).length:0})),qy=(lg(zy,(function(e){return e.filter((function(e){return!e.read})).length})),xy(Vy),xy(Hy),xy(Wy),xy(Ky),lg([Bg,Hg],(function(e,t){return Object.values(e).map((function(e){var n;return{peer:e,isAudioEnabled:!!e.audioTrack&&(null==(n=t[e.audioTrack])?void 0:n.enabled)}}))})),lg([function(e){return e.roleChangeRequests[0]||null},Bg,cy],(function(e,t,n){return e?{requestedBy:e.requestedBy?t[e.requestedBy]:void 0,role:n[e.roleName],token:e.token}:null})),lg([uy],(function(e){var t,n=!1,r=!1,i=!1;return(null==(t=null==e?void 0:e.publishParams)?void 0:t.allowed)&&(n=e.publishParams.allowed.includes("video"),r=e.publishParams.allowed.includes("audio"),i=e.publishParams.allowed.includes("screen")),{video:n,audio:r,screen:i}})),lg([Zg,Hg],(function(e,t){var n=null;return e&&(n=t[e]),(null==n?void 0:n.plugins)||[]})),lg([Xg,Hg],(function(e,t){var n=null;return e&&(n=t[e]),(null==n?void 0:n.plugins)||[]})),"hmsNotification"),Yy=function(){function e(t){var n=this;et(this,e),this.id=0,this.onNotification=function(e,t){var r=function(n){if(t&&!(Array.isArray(t)?t.includes(n.type):t===n.type))return;e(n)};return n.eventEmitter.addListener(qy,r),function(){n.eventEmitter.removeListener(qy,r)}},this.store=t,this.eventEmitter=new df.EventEmitter2({maxListeners:Object.keys(_g).length})}return nt(e,[{key:"sendPlaylistTrackEnded",value:function(e){var t=this.createNotification(_g.PLAYLIST_TRACK_ENDED,e,Eg.INFO);this.emitEvent(t)}},{key:"sendDeviceChange",value:function(e){var t,n=this.createNotification(_g.DEVICE_CHANGE_UPDATE,e,e.error?Eg.ERROR:Eg.INFO,"Selected ".concat(e.type," device - ").concat(null==(t=e.selection)?void 0:t.label));this.emitEvent(n)}},{key:"sendLeaveRoom",value:function(e){var t,n=null==(t=e.requestedBy)?void 0:t.name,r=this.createNotification(e.roomEnded||!n?_g.ROOM_ENDED:_g.REMOVED_FROM_ROOM,e,Eg.INFO,"".concat(e.roomEnded?"Room ended":"Removed from room"," ").concat(n?"by ".concat(n):""));this.emitEvent(r)}},{key:"sendPeerList",value:function(e){var t=this.createNotification(_g.PEER_LIST,e,Eg.INFO);this.emitEvent(t)}},{key:"sendPeerUpdate",value:function(e,t){var n=this.store.getState(Ny(null==t?void 0:t.id))||t,r=Ig[e];if(r){var i=this.createNotification(r,n,Eg.INFO);this.emitEvent(i)}}},{key:"sendTrackUpdate",value:function(e,t){var n=this.store.getState(Oy(t)),r=Rg[e];if(r){var i=this.createNotification(r,n,Eg.INFO);this.emitEvent(i)}}},{key:"sendMessageReceived",value:function(e){var t=this.createNotification(_g.NEW_MESSAGE,e,Eg.INFO);this.emitEvent(t)}},{key:"sendError",value:function(e){var t=this.createNotification(_g.ERROR,e,Eg.ERROR);this.emitEvent(t)}},{key:"sendReconnecting",value:function(e){var t=this.createNotification(_g.RECONNECTING,e,Eg.ERROR);this.emitEvent(t)}},{key:"sendReconnected",value:function(){var e=this.createNotification(_g.RECONNECTED,null,Eg.INFO);this.emitEvent(e)}},{key:"sendChangeTrackStateRequest",value:function(e){var t=this.createNotification(_g.CHANGE_TRACK_STATE_REQUEST,e,Eg.INFO);this.emitEvent(t)}},{key:"sendChangeMultiTrackStateRequest",value:function(e){var t=this.createNotification(_g.CHANGE_MULTI_TRACK_STATE_REQUEST,e,Eg.INFO);this.emitEvent(t)}},{key:"emitEvent",value:function(e){this.eventEmitter.emit(qy,e)}},{key:"createNotification",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";return this.id++,{id:this.id,type:e,message:r,data:t,severity:n}}}]),e}();function Jy(e){return e instanceof Zp||e instanceof _v}var Qy,Xy,Zy=function(e,t){var n,r=Ut(ib(Object.keys(e),Object.keys(t)));try{for(r.s();!(n=r.n()).done;){var i=n.value,a=e[i],s=t[i];eb(a,s)?Object.assign(a,s):tb(a,s)?delete e[i]:nb(a,s)&&(e[i]=s)}}catch(o){r.e(o)}finally{r.f()}},$y=function(e,t){e.plugins&&rb(e.plugins,t.plugins)&&(t.plugins=e.plugins),"video"===e.type&&e.layerDefinitions&&rb(e.layerDefinitions,t.layerDefinitions)&&(t.layerDefinitions=e.layerDefinitions)},eb=function(e,t){return e&&t},tb=function(e,t){return e&&!t},nb=function(e,t){return!e&&t},rb=function(e,t){if(e===t||0===e.length&&0===(null==t?void 0:t.length))return!0;if(!e||!t||e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0},ib=function(e,t){var n,r=new Set,i=Ut(e);try{for(i.s();!(n=i.n()).done;){var a=n.value;r.add(a)}}catch(u){i.e(u)}finally{i.f()}var s,o=Ut(t);try{for(o.s();!(s=o.n()).done;){var c=s.value;r.add(c)}}catch(u){o.e(u)}finally{o.f()}return Array.from(r)},ab=function(){function e(){et(this,e)}return nt(e,null,[{key:"convertPeer",value:function(e){var t,n,r;return{id:e.peerId,name:e.name,roleName:null==(t=e.role)?void 0:t.name,isLocal:e.isLocal,videoTrack:null==(n=e.videoTrack)?void 0:n.trackId,audioTrack:null==(r=e.audioTrack)?void 0:r.trackId,auxiliaryTracks:e.auxiliaryTracks.map((function(e){return e.trackId})),customerUserId:e.customerUserId,metadata:e.metadata,joinedAt:e.joinedAt}}},{key:"convertTrack",value:function(e,t){var n={id:e.trackId,source:e.source,type:e.type,enabled:e.enabled,displayEnabled:e.enabled,peerId:e.peerId||t};return this.enrichTrack(n,e),n}},{key:"enrichTrack",value:function(t,n){var r=n.getMediaTrackSettings();n instanceof Zp&&(t.volume=n.getVolume()||0),e.updateDeviceID(t,n),"video"===t.type&&("screen"===t.source?(t.displaySurface=r.displaySurface,e.enrichScreenTrack(t,n)):"regular"===t.source&&(t.facingMode=r.facingMode),t.height=r.height,t.width=r.width,e.enrichVideoTrack(t,n)),e.enrichPluginsDetails(t,n)}},{key:"updateDeviceID",value:function(e,t){var n;e.deviceID=t instanceof iv||t instanceof Xp?t.settings.deviceId:null==(n=t.getMediaTrackSettings())?void 0:n.deviceId}},{key:"enrichVideoTrack",value:function(e,t){t instanceof _v&&(e.layer=t.getLayer(),e.preferredLayer=t.getPreferredLayer(),e.degraded=t.degraded),(t instanceof _v||t instanceof iv)&&(rb(t.getSimulcastDefinitions(),e.layerDefinitions)||(e.layerDefinitions=t.getSimulcastDefinitions()))}},{key:"enrichScreenTrack",value:function(e,t){var n,r;if(t instanceof iv){var i=null==(n=t.getCaptureHandle)?void 0:n.call(t);(null==i?void 0:i.handle)!==(null==(r=e.captureHandle)?void 0:r.handle)&&(e.captureHandle=i),t.isCurrentTab&&(e.displaySurface="selfBrowser")}}},{key:"enrichPluginsDetails",value:function(e,t){(t instanceof iv||t instanceof Xp)&&(rb(t.getPlugins(),e.plugins)||(e.plugins=t.getPlugins()))}},{key:"convertRoom",value:function(t){var n,r,i=e.convertRecordingStreamingState(null==t?void 0:t.recording,null==t?void 0:t.rtmp,null==t?void 0:t.hls),a=i.recording,s=i.rtmp,o=i.hls;return{id:t.id,name:t.name,localPeer:null!=(r=null==(n=t.localPeer)?void 0:n.peerId)?r:"",recording:a,rtmp:s,hls:o,sessionId:t.sessionId,startedAt:t.startedAt,joinedAt:t.joinedAt,peerCount:t.peerCount}}},{key:"convertMessage",value:function(e){var t,n,r,i,a,s,o;return{sender:null==(t=e.sender)?void 0:t.peerId,senderName:null==(n=e.sender)?void 0:n.name,senderRole:null==(i=null==(r=e.sender)?void 0:r.role)?void 0:i.name,senderUserId:null==(a=e.sender)?void 0:a.customerUserId,recipientPeer:null==(s=e.recipientPeer)?void 0:s.peerId,recipientRoles:null==(o=e.recipientRoles)?void 0:o.map((function(e){return e.name})),time:e.time,type:e.type,message:e.message}}},{key:"convertRoles",value:function(e){var t={};return e&&e.forEach((function(e){t[e.name]=e})),t}},{key:"convertRoleChangeRequest",value:function(e){var t;return{requestedBy:null==(t=e.requestedBy)?void 0:t.peerId,roleName:e.role.name,token:e.token}}},{key:"convertException",value:function(e){return{code:e.code,action:e.action,name:e.name,message:e.message,description:e.description,isTerminal:e.isTerminal,nativeError:e.nativeError,timestamp:new Date}}},{key:"convertDeviceChangeUpdate",value:function(e){var t={devices:e.devices,selection:e.selection,type:e.type};return e.error&&(t.error=this.convertException(e.error)),t}},{key:"convertPlaylist",value:function(e){return{audio:this.getConvertedPlaylistType(e,Sg.audio),video:this.getConvertedPlaylistType(e,Sg.video)}}},{key:"convertPlaylistItem",value:function(e,t){var n=t.type,r=e.getCurrentSelection(n),i=e.isPlaying(n),a=t.url===(null==r?void 0:r.url);return kg(bg({},t),{type:t.type,selected:a,playing:a&&i})}},{key:"getConvertedPlaylistType",value:function(t,n){var r={},i=t.getCurrentSelection(n),a=t.getCurrentProgress(n),s=t.getVolume(n),o=t.getList(n),c=t.getCurrentIndex(n);return t.getList(n).forEach((function(n){r[n.id]=e.convertPlaylistItem(t,n)})),{list:r,selection:{id:null==i?void 0:i.id,hasPrevious:c>0,hasNext:c<o.length-1},progress:a,volume:s,currentTime:t.getCurrentTime(n),playbackRate:t.getPlaybackRate(n)}}},{key:"convertRecordingStreamingState",value:function(e,t,n){var r;return{recording:{browser:bg({running:!1},null==e?void 0:e.browser),server:bg({running:!1},null==e?void 0:e.server),hls:bg({running:!1},null==e?void 0:e.hls)},rtmp:bg({running:!1},t),hls:{variants:(null==(r=null==n?void 0:n.variants)?void 0:r.map((function(e){return e})))||[],running:!!(null==n?void 0:n.running),error:null==n?void 0:n.error}}}}]),e}(),sb=function(){function e(t,n,r,i){et(this,e),this.playlistManager=t,this.syncPlaylistState=r,this.store=i,this.type=n}return nt(e,[{key:"play",value:function(e){return xg(this,null,Bt().mark((function t(){return Bt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e){t.next=3;break}return Ty.w("Please pass id to play"),t.abrupt("return");case 3:return t.next=5,this.playlistManager.setEnabled(!0,{id:e,type:this.type});case 5:case"end":return t.stop()}}),t,this)})))}},{key:"pause",value:function(){return xg(this,null,Bt().mark((function e(){var t,n;return Bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.type===Sg.audio?by:ky,(n=this.store.getState(t.selection)).id){e.next=4;break}return Ty.w("No item is currently playing to pause"),e.abrupt("return");case 4:return e.next=6,this.playlistManager.setEnabled(!1,{id:n.id,type:this.type});case 6:case"end":return e.stop()}}),e,this)})))}},{key:"playNext",value:function(){return xg(this,null,Bt().mark((function e(){return Bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.playlistManager.playNext(this.type);case 2:case"end":return e.stop()}}),e,this)})))}},{key:"playPrevious",value:function(){return xg(this,null,Bt().mark((function e(){return Bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.playlistManager.playPrevious(this.type);case 2:case"end":return e.stop()}}),e,this)})))}},{key:"seek",value:function(e){this.playlistManager.seek(e,this.type),this.syncPlaylistState("seekOn".concat(this.type,"Playlist"))}},{key:"seekTo",value:function(e){this.playlistManager.seekTo(e,this.type),this.syncPlaylistState("seekToOn".concat(this.type,"Playlist"))}},{key:"setVolume",value:function(e){this.playlistManager.setVolume(e,this.type),this.syncPlaylistState("setVolumeOn".concat(this.type,"Playlist"))}},{key:"setList",value:function(e){this.playlistManager.setList(e),this.syncPlaylistState("setListOn".concat(this.type,"Playlist"))}},{key:"stop",value:function(){return xg(this,null,Bt().mark((function e(){return Bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.playlistManager.stop(this.type);case 2:this.syncPlaylistState("stop".concat(this.type,"Playlist"));case 3:case"end":return e.stop()}}),e,this)})))}},{key:"setIsAutoplayOn",value:function(e){this.playlistManager.setIsAutoplayOn(this.type,e)}},{key:"setPlaybackRate",value:function(e){this.playlistManager.setPlaybackRate(this.type,e),this.syncPlaylistState("set".concat(this.type,"PlaybackRate"))}},{key:"removeItem",value:function(e){return xg(this,null,Bt().mark((function t(){var n;return Bt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.playlistManager.removeItem(e,this.type);case 2:return n=t.sent,t.abrupt("return",(n&&this.syncPlaylistState("remove".concat(this.type,"PlaylistItem")),n));case 4:case"end":return t.stop()}}),t,this)})))}},{key:"clearList",value:function(){return xg(this,null,Bt().mark((function e(){return Bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.playlistManager.clearList(this.type);case 2:this.syncPlaylistState("clear".concat(this.type,"Playlist"));case 3:case"end":return e.stop()}}),e,this)})))}}]),e}(),ob=function(){function e(t,n,r){var i=this;et(this,e),this.hmsSDKTracks={},this.hmsSDKPeers={},this.isRoomJoinCalled=!1,this.ignoredMessageTypes=[],this.setProgress=function(e){var t=e.type,n=e.progress;i.setState((function(e){e.playlist[t].progress=n,e.playlist[t].currentTime=i.sdk.getPlaylistManager().getCurrentTime(t)}),"playlistProgress")},this.syncPlaylistState=function(e){i.setState((function(e){Object.assign(e.playlist,ab.convertPlaylist(i.sdk.getPlaylistManager()))}),e)},this.sendPeerUpdateNotification=function(e,t){var n=i.store.getState(Ny(t.peerId)),r=Ig[e]||"peerUpdate";i.syncRoomState(r),n||(n=i.store.getState(Ny(t.peerId))),i.hmsNotifications.sendPeerUpdate(e,n)},this.setState=function(e,t){return i.store.namedSetState(e,t)},this.store=t,this.sdk=n,this.hmsNotifications=r}return nt(e,[{key:"refreshDevices",value:function(){return xg(this,null,Bt().mark((function e(){return Bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.sdk.refreshDevices();case 2:case"end":return e.stop()}}),e,this)})))}},{key:"unblockAudio",value:function(){return xg(this,null,Bt().mark((function e(){return Bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.sdk.getAudioOutput().unblockAutoplay();case 2:case"end":return e.stop()}}),e,this)})))}},{key:"setVolume",value:function(e,t){return xg(this,null,Bt().mark((function n(){return Bt().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!t){n.next=5;break}return n.next=3,this.setTrackVolume(e,t);case 3:n.next=8;break;case 5:return n.next=7,this.sdk.getAudioOutput().setVolume(e);case 7:this.syncRoomState("setOutputVolume");case 8:case"end":return n.stop()}}),n,this)})))}},{key:"setAudioOutputDevice",value:function(e){return xg(this,null,Bt().mark((function t(){return Bt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.sdk.getAudioOutput().setDevice(e);case 2:if(t.t0=t.sent,!t.t0){t.next=5;break}this.setState((function(t){t.settings.audioOutputDeviceId=e}),"setAudioOutputDevice");case 5:case"end":return t.stop()}}),t,this)})))}},{key:"setPreferredLayer",value:function(e,t){return xg(this,null,Bt().mark((function n(){var r;return Bt().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!(r=this.hmsSDKTracks[e])){n.next=14;break}if(!(r instanceof _v)){n.next=11;break}if(t!==cp.NONE){n.next=6;break}return Ty.w("layer ".concat(cp.NONE," will be ignored")),n.abrupt("return");case 6:return n.next=8,r.setPreferredLayer(t);case 8:this.updateVideoLayer(e,"setPreferredLayer"),n.next=12;break;case 11:Ty.w("track ".concat(e," is not a remote video track"));case 12:n.next=15;break;case 14:this.logPossibleInconsistency("track ".concat(e," not present, unable to set preffer layer"));case 15:case"end":return n.stop()}}),n,this)})))}},{key:"preview",value:function(e){return xg(this,null,Bt().mark((function t(){var n;return Bt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.isRoomJoinCalled){t.next=3;break}return this.logPossibleInconsistency("attempting to call preview after join was called"),t.abrupt("return");case 3:if((n=this.store.getState(oy))!==dg.Preview&&n!==dg.Connecting){t.next=7;break}return this.logPossibleInconsistency("attempting to call preview while room is in preview/connecting"),t.abrupt("return");case 7:return t.prev=7,this.setState((function(e){e.room.roomState=dg.Connecting}),"connecting"),t.next=11,this.sdkPreviewWithListeners(e);case 11:t.next=16;break;case 13:throw t.prev=13,t.t0=t.catch(7),Ty.e("Cannot show preview. Failed to connect to room - ",t.t0),t.t0;case 16:case"end":return t.stop()}}),t,this,[[7,13]])})))}},{key:"join",value:function(e){return xg(this,null,Bt().mark((function t(){return Bt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.isRoomJoinCalled){t.next=3;break}return this.logPossibleInconsistency("room join is called again"),t.abrupt("return");case 3:return t.prev=3,this.isRoomJoinCalled=!0,this.setState((function(e){e.room.roomState=dg.Connecting}),"join"),t.next=8,this.sdkJoinWithListeners(e);case 8:t.next=13;break;case 10:throw t.prev=10,t.t0=t.catch(3),this.isRoomJoinCalled=!1,Ty.e("Failed to connect to room - ",t.t0),t.t0;case 13:case"end":return t.stop()}}),t,this,[[3,10]])})))}},{key:"leave",value:function(){return xg(this,null,Bt().mark((function e(){var t,n,r,i=this;return Bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.store.getState(Kg),n=!0,t||(n=!1,this.logPossibleInconsistency("room leave is called when no room is connected")),r=this.store.getState(oy),e.abrupt("return",(this.setState((function(e){e.room.roomState=dg.Disconnecting}),"leaving"),this.sdk.leave(n).then((function(){i.resetState("leave"),Ty.i("left room")})).catch((function(e){Ty.e("error in leaving room - ",e),i.setState((function(e){e.room.roomState=r}),"revertLeave")}))));case 4:case"end":return e.stop()}}),e,this)})))}},{key:"setScreenShareEnabled",value:function(e,t){return xg(this,null,Bt().mark((function n(){return Bt().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if("boolean"==typeof t&&(t={audioOnly:t}),n.prev=1,!e){n.next=7;break}return n.next=5,this.startScreenShare(t);case 5:n.next=9;break;case 7:return n.next=9,this.stopScreenShare();case 9:n.next=14;break;case 11:throw n.prev=11,n.t0=n.catch(1),this.hmsNotifications.sendError(ab.convertException(n.t0)),n.t0;case 14:case"end":return n.stop()}}),n,this,[[1,11]])})))}},{key:"addTrack",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"regular";return xg(this,null,Bt().mark((function n(){return Bt().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.sdk.addTrack(e,t);case 2:this.syncRoomState("addTrack");case 3:case"end":return n.stop()}}),n,this)})))}},{key:"removeTrack",value:function(e){return xg(this,null,Bt().mark((function t(){return Bt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.sdk.removeTrack(e);case 2:this.syncRoomState("removeTrack");case 3:case"end":return t.stop()}}),t,this)})))}},{key:"setLocalAudioEnabled",value:function(e){return xg(this,null,Bt().mark((function t(){var n;return Bt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=this.store.getState(Xg),t.t0=n,!t.t0){t.next=5;break}return t.next=5,this.setEnabledTrack(n,e);case 5:case"end":return t.stop()}}),t,this)})))}},{key:"setLocalVideoEnabled",value:function(e){return xg(this,null,Bt().mark((function t(){var n;return Bt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=this.store.getState(Zg),t.t0=n,!t.t0){t.next=5;break}return t.next=5,this.setEnabledTrack(n,e);case 5:case"end":return t.stop()}}),t,this)})))}},{key:"setEnabledTrack",value:function(e,t){return xg(this,null,Bt().mark((function n(){var r,i,a=this;return Bt().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if((null==(r=this.store.getState().tracks[e])?void 0:r.enabled)!==t){n.next=3;break}return this.logPossibleInconsistency("local track[".concat(e,"] enabled state - ").concat(t)),n.abrupt("return");case 3:return this.setState((function(n){n.tracks[e]?n.tracks[e].displayEnabled=t:a.logPossibleInconsistency("track id not found for setEnabled")}),"displayEnabled"),n.prev=4,n.next=7,this.setEnabledSDKTrack(e,t);case 7:this.syncRoomState("setEnabled"),n.next=13;break;case 10:throw n.prev=10,n.t0=n.catch(4),this.setState((function(n){n.tracks[e].displayEnabled=!t}),"rollbackDisplayEnabled"),this.hmsNotifications.sendError(ab.convertException(n.t0)),n.t0;case 13:i=t?op.TRACK_UNMUTED:op.TRACK_MUTED,this.hmsNotifications.sendTrackUpdate(i,e);case 15:case"end":return n.stop()}}),n,this,[[4,10]])})))}},{key:"setAudioSettings",value:function(e){return xg(this,null,Bt().mark((function t(){var n;return Bt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=this.store.getState(Xg),t.t0=n,!t.t0){t.next=6;break}return t.next=5,this.setSDKLocalAudioTrackSettings(n,e);case 5:this.syncRoomState("setAudioSettings");case 6:case"end":return t.stop()}}),t,this)})))}},{key:"setVideoSettings",value:function(e){return xg(this,null,Bt().mark((function t(){var n;return Bt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=this.store.getState(Zg),t.t0=n,!t.t0){t.next=6;break}return t.next=5,this.setSDKLocalVideoTrackSettings(n,e);case 5:this.syncRoomState("setVideoSettings");case 6:case"end":return t.stop()}}),t,this)})))}},{key:"sendMessage",value:function(e){this.sendBroadcastMessage(e)}},{key:"sendBroadcastMessage",value:function(e,t){return xg(this,null,Bt().mark((function n(){var r;return Bt().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.sdk.sendBroadcastMessage(e,t);case 2:r=n.sent,this.updateMessageInStore(r,{message:e,type:t});case 4:case"end":return n.stop()}}),n,this)})))}},{key:"sendGroupMessage",value:function(e,t,n){return xg(this,null,Bt().mark((function r(){var i,a,s;return Bt().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return i=this.store.getState(cy),a=t.map((function(e){return i[e]})),r.next=4,this.sdk.sendGroupMessage(e,a,n);case 4:s=r.sent,this.updateMessageInStore(s,{message:e,recipientRoles:t,type:n});case 6:case"end":return r.stop()}}),r,this)})))}},{key:"sendDirectMessage",value:function(e,t,n){return xg(this,null,Bt().mark((function r(){var i,a;return Bt().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return i=this.hmsSDKPeers[t],r.next=3,this.sdk.sendDirectMessage(e,i,n);case 3:a=r.sent,this.updateMessageInStore(a,{message:e,recipientPeer:i.peerId,type:n});case 5:case"end":return r.stop()}}),r,this)})))}},{key:"updateMessageInStore",value:function(e,t){if(!e)throw Ty.w("sendMessage","Failed to send message",t),Error("sendMessage Failed - ".concat(JSON.stringify(t)));var n=ab.convertMessage(e);return n.read=!0,n.senderName="You",n.ignored=this.ignoredMessageTypes.includes(n.type),this.putMessageInStore(n),n}},{key:"setMessageRead",value:function(e,t){var n=this;this.setState((function(r){t?r.messages.byID[t]?r.messages.byID[t].read=e:n.logPossibleInconsistency("no message with id is found"):r.messages.allIDs.forEach((function(t){r.messages.byID[t].read=e}))}),"setMessageRead")}},{key:"attachVideo",value:function(e,t){return xg(this,null,Bt().mark((function n(){var r=this;return Bt().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!this.localAndVideoUnmuting(e)){n.next=2;break}return n.abrupt("return",new Promise((function(n){var i=r.store.subscribe((function(a){return xg(r,null,Bt().mark((function r(){return Bt().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(r.t0=a,!r.t0){r.next=6;break}return r.next=4,this.attachVideoInternal(e,t);case 4:i(),n();case 6:case"end":return r.stop()}}),r,this)})))}),ty)})));case 2:return n.next=4,this.attachVideoInternal(e,t);case 4:case"end":return n.stop()}}),n,this)})))}},{key:"detachVideo",value:function(e,t){return xg(this,null,Bt().mark((function n(){var r;return Bt().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:"video"===(null==(r=this.hmsSDKTracks[e])?void 0:r.type)?(r.removeSink(t),this.updateVideoLayer(e,"detachVideo")):(t&&(t.srcObject=null),this.logPossibleInconsistency("no video track found to remove sink"));case 2:case"end":return n.stop()}}),n,this)})))}},{key:"addPluginToVideoTrack",value:function(e,t){return xg(this,null,Bt().mark((function n(){return Bt().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",this.addRemoveVideoPlugin(e,"add",t));case 1:case"end":return n.stop()}}),n,this)})))}},{key:"addPluginToAudioTrack",value:function(e){return xg(this,null,Bt().mark((function t(){return Bt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.addRemoveAudioPlugin(e,"add"));case 1:case"end":return t.stop()}}),t,this)})))}},{key:"validateVideoPluginSupport",value:function(e){var t={isSupported:!1};if(!e)return Ty.w("no plugin passed in for checking support"),t.errMsg="no plugin passed in for checking support",t;var n=this.store.getState(Zg);if(!n)return Ty.w("video Track not added to local peer yet"),t.errMsg="call this function only after local peer has video track",t;var r=this.hmsSDKTracks[n];return r?t=r.validatePlugin(e):(Ty.w("track ".concat(n," not present, unable to validate plugin")),t.errMsg="track ".concat(n," not present, unable to validate plugin")),t}},{key:"validateAudioPluginSupport",value:function(e){var t={isSupported:!1};if(!e)return Ty.w('no plugin passed in for checking support"'),t.errMsg='no plugin passed in for checking support"',t;var n=this.store.getState(Xg);if(!n)return Ty.w("audio track not added to local peer yet"),t.errMsg="call this function only after local peer has audio track",t;var r=this.hmsSDKTracks[n];return r?t=r.validatePlugin(e):(Ty.w("track ".concat(n," not present, unable to validate plugin")),t.errMsg="track ".concat(n," not present, unable to validate plugin")),t}},{key:"removePluginFromVideoTrack",value:function(e){return xg(this,null,Bt().mark((function t(){return Bt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.addRemoveVideoPlugin(e,"remove"));case 1:case"end":return t.stop()}}),t,this)})))}},{key:"removePluginFromAudioTrack",value:function(e){return xg(this,null,Bt().mark((function t(){return Bt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.addRemoveAudioPlugin(e,"remove"));case 1:case"end":return t.stop()}}),t,this)})))}},{key:"changeRole",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return xg(this,null,Bt().mark((function r(){var i;return Bt().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(i=this.hmsSDKPeers[e]){r.next=4;break}return this.logPossibleInconsistency("Unknown peer ID given ".concat(e," for changerole")),r.abrupt("return");case 4:return r.next=6,this.sdk.changeRoleOfPeer(i,t,n);case 6:case"end":return r.stop()}}),r,this)})))}},{key:"changeRoleOfPeer",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return xg(this,null,Bt().mark((function r(){var i;return Bt().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(i=this.hmsSDKPeers[e]){r.next=4;break}return this.logPossibleInconsistency("Unknown peer ID given ".concat(e," for changerole")),r.abrupt("return");case 4:return r.next=6,this.sdk.changeRoleOfPeer(i,t,n);case 6:case"end":return r.stop()}}),r,this)})))}},{key:"changeRoleOfPeersWithRoles",value:function(e,t){return xg(this,null,Bt().mark((function n(){var r;return Bt().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=this.sdk.getRoles().filter((function(t){return e.includes(t.name)})),n.next=3,this.sdk.changeRoleOfPeersWithRoles(r,t);case 3:case"end":return n.stop()}}),n,this)})))}},{key:"acceptChangeRole",value:function(e){return xg(this,null,Bt().mark((function t(){var n,r;return Bt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(n=e.requestedBy?this.hmsSDKPeers[e.requestedBy.id]:void 0)||Ty.w("peer for which role change is requested no longer available - ".concat(e.requestedBy)),r={requestedBy:n,role:e.role,token:e.token},t.next=5,this.sdk.acceptChangeRole(r);case 5:this.removeRoleChangeRequest(e);case 6:case"end":return t.stop()}}),t,this)})))}},{key:"initAppData",value:function(e){this.setState((function(t){t.appData=e}),"initAppData")}},{key:"setAppData",value:function(e,t,n){var r="Object"===(null==t?void 0:t.constructor.name);this.setState((function(i){if(i.appData)n&&r?Object.assign(i.appData[e],t):i.appData[e]=t;else{var a=X({},e,t);i.appData=a}}),"setAppData-".concat(e))}},{key:"rejectChangeRole",value:function(e){this.removeRoleChangeRequest(e)}},{key:"endRoom",value:function(e,t){return xg(this,null,Bt().mark((function n(){var r,i;return Bt().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(null==(r=this.store.getState(ly))?void 0:r.endRoom){n.next=4;break}return Ty.w("You are not allowed to perform this action - endRoom"),n.abrupt("return");case 4:return i=this.store.getState(oy),this.setState((function(e){e.room.roomState=dg.Disconnecting}),"endingRoom"),n.prev=6,n.next=9,this.sdk.endRoom(e,t);case 9:this.resetState("endRoom"),n.next=15;break;case 12:n.prev=12,n.t0=n.catch(6),Ty.e("error in ending room - ",n.t0),this.setState((function(e){e.room.roomState=i}),"revertEndRoom");case 15:case"end":return n.stop()}}),n,this,[[6,12]])})))}},{key:"removePeer",value:function(e,t){return xg(this,null,Bt().mark((function n(){var r;return Bt().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!(r=this.hmsSDKPeers[e])||r.isLocal){n.next=6;break}return n.next=4,this.sdk.removePeer(r,t);case 4:n.next=8;break;case 6:return this.logPossibleInconsistency("No remote peer found for peerID - ".concat(e)),n.abrupt("return");case 8:case"end":return n.stop()}}),n,this)})))}},{key:"startRTMPOrRecording",value:function(e){return xg(this,null,Bt().mark((function t(){return Bt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.sdk.startRTMPOrRecording(e);case 2:case"end":return t.stop()}}),t,this)})))}},{key:"stopRTMPAndRecording",value:function(){return xg(this,null,Bt().mark((function e(){return Bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.sdk.stopRTMPAndRecording();case 2:case"end":return e.stop()}}),e,this)})))}},{key:"startHLSStreaming",value:function(e){return xg(this,null,Bt().mark((function t(){return Bt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.sdk.startHLSStreaming(e);case 2:case"end":return t.stop()}}),t,this)})))}},{key:"stopHLSStreaming",value:function(e){return xg(this,null,Bt().mark((function t(){return Bt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.sdk.stopHLSStreaming(e);case 2:case"end":return t.stop()}}),t,this)})))}},{key:"sendHLSTimedMetadata",value:function(e){return xg(this,null,Bt().mark((function t(){return Bt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.sdk.sendHLSTimedMetadata(e);case 2:case"end":return t.stop()}}),t,this)})))}},{key:"changeName",value:function(e){return xg(this,null,Bt().mark((function t(){return Bt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.sdk.changeName(e);case 2:case"end":return t.stop()}}),t,this)})))}},{key:"changeMetadata",value:function(e){return xg(this,null,Bt().mark((function t(){return Bt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return"string"!=typeof e&&(e=JSON.stringify(e)),t.next=3,this.sdk.changeMetadata(e);case 3:case"end":return t.stop()}}),t,this)})))}},{key:"setSessionMetadata",value:function(e){return xg(this,null,Bt().mark((function t(){return Bt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.sdk.setSessionMetadata(e);case 2:this.setState((function(t){t.sessionMetadata=e}),"setSessionMetadata");case 3:case"end":return t.stop()}}),t,this)})))}},{key:"populateSessionMetadata",value:function(){return xg(this,null,Bt().mark((function e(){var t;return Bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.sdk.getSessionMetadata();case 2:t=e.sent,this.setState((function(e){e.sessionMetadata=t}),"populateSessionMetadata");case 4:case"end":return e.stop()}}),e,this)})))}},{key:"setRemoteTrackEnabled",value:function(e,t){return xg(this,null,Bt().mark((function n(){var r,i=this;return Bt().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if("string"!=typeof e){n.next=10;break}if(!(r=this.hmsSDKTracks[e])||!Jy(r)){n.next=7;break}return n.next=5,this.sdk.changeTrackState(r,t);case 5:n.next=8;break;case 7:this.logPossibleInconsistency("No remote track with ID ".concat(e," found for change track state"));case 8:n.next=11;break;case 10:Array.isArray(e)&&e.forEach((function(e){return i.setRemoteTrackEnabled(e,t)}));case 11:case"end":return n.stop()}}),n,this)})))}},{key:"setRemoteTracksEnabled",value:function(e){return xg(this,null,Bt().mark((function t(){var n,r;return Bt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n={enabled:e.enabled,type:e.type,source:e.source},e.roles&&(r=this.store.getState(cy),n.roles=e.roles.map((function(e){return r[e]}))),t.next=4,this.sdk.changeMultiTrackState(n);case 4:case"end":return t.stop()}}),t,this)})))}},{key:"setLogLevel",value:function(e){Ty.level=e,this.sdk.setLogLevel(e)}},{key:"setFrameworkInfo",value:function(e){this.sdk.setFrameworkInfo(e)}},{key:"ignoreMessageTypes",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(t)this.ignoredMessageTypes=e;else{var n,r=Ut(e);try{for(r.s();!(n=r.n()).done;){var i=n.value;this.ignoredMessageTypes.includes(i)||this.ignoredMessageTypes.push(i)}}catch(a){r.e(a)}finally{r.f()}}}},{key:"resetState",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"resetState";this.isRoomJoinCalled=!1,this.hmsSDKTracks={},Ty.cleanUp(),this.setState((function(e){Object.assign(e,Ag())}),e)}},{key:"sdkJoinWithListeners",value:function(e){return xg(this,null,Bt().mark((function t(){return Bt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.sdk.join(e,{onJoin:this.onJoin.bind(this),onRoomUpdate:this.onRoomUpdate.bind(this),onPeerUpdate:this.onPeerUpdate.bind(this),onTrackUpdate:this.onTrackUpdate.bind(this),onMessageReceived:this.onMessageReceived.bind(this),onError:this.onError.bind(this),onReconnected:this.onReconnected.bind(this),onReconnecting:this.onReconnecting.bind(this),onRoleChangeRequest:this.onRoleChangeRequest.bind(this),onRoleUpdate:this.onRoleUpdate.bind(this),onDeviceChange:this.onDeviceChange.bind(this),onChangeTrackStateRequest:this.onChangeTrackStateRequest.bind(this),onChangeMultiTrackStateRequest:this.onChangeMultiTrackStateRequest.bind(this),onRemovedFromRoom:this.onRemovedFromRoom.bind(this),onNetworkQuality:this.onNetworkQuality.bind(this)});case 2:this.sdk.addAudioListener({onAudioLevelUpdate:this.onAudioLevelUpdate.bind(this)}),this.sdk.addConnectionQualityListener({onConnectionQualityUpdate:this.onConnectionQualityUpdate.bind(this)});case 4:case"end":return t.stop()}}),t,this)})))}},{key:"onRemovedFromRoom",value:function(e){var t,n=this.store.getState(Ny(null==(t=e.requestedBy)?void 0:t.peerId));this.hmsNotifications.sendLeaveRoom(kg(bg({},e),{requestedBy:n||void 0}));var r=e.roomEnded||!n?"roomEnded":"removedFromRoom";Ty.i("resetting state after peer removed ".concat(r),e),this.resetState(r)}},{key:"onDeviceChange",value:function(e){var t=this,n=e.devices;if(n){var r=this.store.getState(Jg);if(this.setState((function(e){rb(e.devices.audioInput,n.audioInput)||(e.devices.audioInput=n.audioInput),rb(e.devices.videoInput,n.videoInput)||(e.devices.videoInput=n.videoInput),rb(e.devices.audioOutput,n.audioOutput)||(e.devices.audioOutput=n.audioOutput),t.hmsSDKPeers[null==r?void 0:r.id]&&Object.assign(e.settings,t.getMediaSettings(t.hmsSDKPeers[null==r?void 0:r.id]))}),"deviceChange"),e.selection){var i=ab.convertDeviceChangeUpdate(e);this.hmsNotifications.sendDeviceChange(i)}}}},{key:"sdkPreviewWithListeners",value:function(e){return xg(this,null,Bt().mark((function t(){return Bt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.sdk.preview(e,{onPreview:this.onPreview.bind(this),onError:this.onError.bind(this),onReconnected:this.onReconnected.bind(this),onReconnecting:this.onReconnecting.bind(this),onDeviceChange:this.onDeviceChange.bind(this),onRoomUpdate:this.onRoomUpdate.bind(this),onPeerUpdate:this.onPeerUpdate.bind(this),onNetworkQuality:this.onNetworkQuality.bind(this)});case 2:this.sdk.addAudioListener({onAudioLevelUpdate:this.onAudioLevelUpdate.bind(this)});case 3:case"end":return t.stop()}}),t,this)})))}},{key:"onNetworkQuality",value:function(e){var t=this;this.setState((function(n){var r,i=n.room.localPeer||(null==(r=t.sdk.getLocalPeer())?void 0:r.peerId);i&&(n.connectionQualities[i]={peerID:i,downlinkQuality:e})}),"ConnectionQuality")}},{key:"startScreenShare",value:function(e){return xg(this,null,Bt().mark((function t(){var n=this;return Bt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.store.getState(ry)){t.next=4;break}this.logPossibleInconsistency("start screenshare is called while it's on"),t.next=7;break;case 4:return t.next=6,this.sdk.startScreenShare((function(){return n.syncRoomState("screenshareStopped")}),e);case 6:this.syncRoomState("startScreenShare");case 7:case"end":return t.stop()}}),t,this)})))}},{key:"stopScreenShare",value:function(){return xg(this,null,Bt().mark((function e(){return Bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.store.getState(ry)){e.next=6;break}return e.next=3,this.sdk.stopScreenShare();case 3:this.syncRoomState("stopScreenShare"),e.next=7;break;case 6:this.logPossibleInconsistency("stop screenshare is called while it's not on");case 7:case"end":return e.stop()}}),e,this)})))}},{key:"attachVideoInternal",value:function(e,t){return xg(this,null,Bt().mark((function n(){var r;return Bt().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!(r=this.hmsSDKTracks[e])||"video"!==r.type){n.next=7;break}return n.next=4,r.addSink(t);case 4:this.updateVideoLayer(e,"attachVideo"),n.next=8;break;case 7:this.logPossibleInconsistency("no video track found to add sink");case 8:case"end":return n.stop()}}),n,this)})))}},{key:"syncRoomState",value:function(e){var t=this;e="".concat(e,"_fullSync"),Ty.time("store-sync-".concat(e));var n,r={},i=[],a={},s={},o={},c=Ut(this.sdk.getPeers());try{for(c.s();!(n=c.n()).done;){var u=n.value,l=ab.convertPeer(u);r[l.id]=l,i.push(l.id),this.hmsSDKPeers[l.id]=u;var d,h=Ut([u.audioTrack,u.videoTrack].concat(te(u.auxiliaryTracks)));try{for(h.s();!(d=h.n()).done;){var f=d.value;if(f){var p=ab.convertTrack(f);a[p.id]=p,s[f.trackId]=f}}}catch(y){h.e(y)}finally{h.f()}l.isLocal&&Object.assign(o,this.getMediaSettings(u))}}catch(y){c.e(y)}finally{c.f()}var v=this.sdk.getRecordingState(),m=this.sdk.getRTMPState(),g=this.sdk.getHLSState();this.setState((function(e){e.room.peers=i;var n=e.peers,c=e.tracks;(function(e,t){var n,r=Ut(ib(Object.keys(e),Object.keys(t)));try{for(r.s();!(n=r.n()).done;){var i=n.value,a=e[i],s=t[i];eb(a,s)?(rb(a.auxiliaryTracks,s.auxiliaryTracks)&&(s.auxiliaryTracks=a.auxiliaryTracks),Object.assign(a,s)):tb(a,s)?delete e[i]:nb(a,s)&&(e[i]=s)}}catch(y){r.e(y)}finally{r.f()}})(n,r),function(e,t){var n,r=Ut(ib(Object.keys(e),Object.keys(t)));try{for(r.s();!(n=r.n()).done;){var i=n.value,a=e[i],s=t[i];eb(a,s)?($y(a,s),Object.assign(a,s)):tb(a,s)?delete e[i]:nb(a,s)&&(e[i]=s)}}catch(y){r.e(y)}finally{r.f()}}(c,a),Object.assign(e.settings,o),t.hmsSDKTracks=s,Object.assign(e.roles,ab.convertRoles(t.sdk.getRoles())),Object.assign(e.playlist,ab.convertPlaylist(t.sdk.getPlaylistManager())),Object.assign(e.room,ab.convertRecordingStreamingState(v,m,g))}),e),Ty.timeEnd("store-sync-".concat(e))}},{key:"onPreview",value:function(e){this.setState((function(t){Object.assign(t.room,ab.convertRoom(e)),t.room.roomState=dg.Preview}),"previewStart"),this.syncRoomState("previewSync")}},{key:"onJoin",value:function(e){var t=this,n=this.sdk.getPlaylistManager();this.audioPlaylist=new sb(n,Sg.audio,this.syncPlaylistState.bind(this),this.store),this.videoPlaylist=new sb(n,Sg.video,this.syncRoomState.bind(this),this.store),this.syncRoomState("joinSync"),this.setState((function(t){Object.assign(t.room,ab.convertRoom(e)),t.room.isConnected=!0,t.room.roomState=dg.Connected}),"joined"),n.onProgress(this.setProgress),n.onNewTrackStart((function(e){t.syncPlaylistState("".concat(e.type,"PlaylistUpdate"))})),n.onPlaylistEnded((function(e){t.syncPlaylistState("".concat(e,"PlaylistEnded"))})),n.onCurrentTrackEnded((function(e){t.hmsNotifications.sendPlaylistTrackEnded(ab.convertPlaylistItem(n,e)),t.syncPlaylistState("".concat(e.type,"PlaylistItemEnded"))}))}},{key:"onRoomUpdate",value:function(e,t){this.setState((function(e){Object.assign(e.room,ab.convertRoom(t))}),e)}},{key:"onPeerUpdate",value:function(e,t){if(![sp.BECAME_DOMINANT_SPEAKER,sp.RESIGNED_DOMINANT_SPEAKER].includes(e)){if(Array.isArray(t)){this.syncRoomState("peersJoined");var n,r=[],i=Ut(t);try{for(i.s();!(n=i.n()).done;){var a=n.value,s=this.store.getState(Ny(a.peerId));s&&r.push(s)}}catch(o){i.e(o)}finally{i.f()}return void this.hmsNotifications.sendPeerList(r)}this.sendPeerUpdateNotification(e,t)}}},{key:"onTrackUpdate",value:function(e,t,n){if(e===op.TRACK_REMOVED)this.hmsNotifications.sendTrackUpdate(e,t.trackId),this.handleTrackRemove(t,n);else{var r=Rg[e]||"trackUpdate";this.syncRoomState(r),this.hmsNotifications.sendTrackUpdate(e,t.trackId)}}},{key:"onMessageReceived",value:function(e){var t=ab.convertMessage(e);t.read=!1,t.ignored=this.ignoredMessageTypes.includes(t.type),this.putMessageInStore(t),this.hmsNotifications.sendMessageReceived(t)}},{key:"putMessageInStore",value:function(e){var t=this;e.ignored||this.setState((function(n){e.id=String(t.store.getState(ay)+1),n.messages.byID[e.id]=e,n.messages.allIDs.push(e.id)}),"newMessage")}},{key:"onAudioLevelUpdate",value:function(e){this.setState((function(t){var n={};e.forEach((function(e){if(e.track&&e.peer){var r=e.track.trackId;n[r]=e.audioLevel,t.speakers[r]||(t.speakers[r]={audioLevel:e.audioLevel,peerID:e.peer.peerId,trackID:r})}}));for(var r=0,i=Object.entries(t.speakers);r<i.length;r++){var a=u(i[r],2),s=a[0],o=a[1];o.audioLevel=n[s]||0,0===o.audioLevel&&delete t.speakers[s]}}),"audioLevel")}},{key:"onConnectionQualityUpdate",value:function(e){this.setState((function(t){var n=new Set;e.forEach((function(e){var r=e.peerID;!r||(n.add(r),t.connectionQualities[r]?Object.assign(t.connectionQualities[r],e):t.connectionQualities[r]=e)}));for(var r=0,i=Object.keys(t.connectionQualities);r<i.length;r++){var a=i[r];n.has(a)||delete t.connectionQualities[a]}}),"connectionQuality")}},{key:"onChangeTrackStateRequest",value:function(e){var t,n=this.store.getState(Ny(null==(t=e.requestedBy)?void 0:t.peerId)),r=this.getStoreLocalTrackIDfromSDKTrack(e.track),i=this.store.getState(Oy(r));if(!i)return this.logPossibleInconsistency("Not found track for which track state change was requested, ".concat(e.track));e.enabled||this.syncRoomState("changeTrackStateRequest"),this.hmsNotifications.sendChangeTrackStateRequest({requestedBy:n||void 0,track:i,enabled:e.enabled})}},{key:"onChangeMultiTrackStateRequest",value:function(e){var t,n=this.store.getState(Ny(null==(t=e.requestedBy)?void 0:t.peerId));e.enabled||this.syncRoomState("changeMultiTrackStateRequest");var r,i=[],a=this.store.getState(Hg),s=Ut(e.tracks);try{for(s.s();!(r=s.n()).done;){var o=r.value,c=this.getStoreLocalTrackIDfromSDKTrack(o);c&&a[c]&&i.push(a[c])}}catch(u){s.e(u)}finally{s.f()}this.hmsNotifications.sendChangeMultiTrackStateRequest({requestedBy:n||void 0,tracks:i,enabled:e.enabled,type:e.type,source:e.source})}},{key:"onReconnected",value:function(){this.syncRoomState("reconnectedSync"),this.hmsNotifications.sendReconnected(),this.setState((function(e){e.room.roomState=e.room.isConnected?dg.Connected:dg.Preview}),"reconnected")}},{key:"onReconnecting",value:function(e){var t=ab.convertException(e);Ty.e("Reconnection: received error from sdk",t),this.hmsNotifications.sendReconnecting(t),this.setState((function(e){e.room.roomState=dg.Reconnecting,e.errors.push(t)}),"reconnecting")}},{key:"onError",value:function(e){var t=ab.convertException(e);t.isTerminal?(this.leave().then((function(){return Ty.e("error from SDK, left room.")})),this.setState((function(e){e.room.roomState=dg.Failed,e.errors.push(t)}),"errorTerminal")):this.store.getState().errors.length<50&&this.setState((function(e){e.errors.push(t)}),"error"),this.syncRoomState("errorSync"),this.hmsNotifications.sendError(t),Ty.e("received error from sdk",t instanceof Zf?"".concat(t):t)}},{key:"updateVideoLayer",value:function(e,t){var n=this.hmsSDKTracks[e];if(n&&n instanceof _v){var r=this.store.getState(Ly(e));((null==r?void 0:r.layer)!==n.getLayer()||(null==r?void 0:r.degraded)!==n.degraded||(null==r?void 0:r.preferredLayer)!==n.getPreferredLayer())&&this.setState((function(t){var r=t.tracks[e];r.layer=n.getLayer(),r.preferredLayer=n.getPreferredLayer(),r.degraded=n.degraded}),t)}}},{key:"handleTrackRemove",value:function(e,t){var n=this;this.setState((function(r){var i=r.peers[t.peerId],a=r.tracks,s=e.trackId;if(n.isSameStoreSDKTrack(s,null==i?void 0:i.audioTrack))null==i||delete i.audioTrack;else if(n.isSameStoreSDKTrack(s,null==i?void 0:i.videoTrack))null==i||delete i.videoTrack;else{var o=null==i?void 0:i.auxiliaryTracks.indexOf(s);o>-1&&n.isSameStoreSDKTrack(s,null==i?void 0:i.auxiliaryTracks[o])&&(null==i||i.auxiliaryTracks.splice(o,1))}delete a[s],delete n.hmsSDKTracks[s]}),"trackRemoved")}},{key:"setEnabledSDKTrack",value:function(e,t){return xg(this,null,Bt().mark((function n(){var r;return Bt().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!(r=this.hmsSDKTracks[e])){n.next=6;break}return n.next=4,r.setEnabled(t);case 4:n.next=7;break;case 6:this.logPossibleInconsistency("track ".concat(e," not present, unable to enabled/disable"));case 7:case"end":return n.stop()}}),n,this)})))}},{key:"setSDKLocalVideoTrackSettings",value:function(e,t){return xg(this,null,Bt().mark((function n(){var r;return Bt().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!(r=this.hmsSDKTracks[e])){n.next=6;break}return n.next=4,r.setSettings(t);case 4:n.next=7;break;case 6:this.logPossibleInconsistency("local track ".concat(e," not present, unable to set settings"));case 7:case"end":return n.stop()}}),n,this)})))}},{key:"setSDKLocalAudioTrackSettings",value:function(e,t){return xg(this,null,Bt().mark((function n(){var r;return Bt().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!(r=this.hmsSDKTracks[e])){n.next=6;break}return n.next=4,r.setSettings(t);case 4:n.next=7;break;case 6:this.logPossibleInconsistency("local track ".concat(e," not present, unable to set settings"));case 7:case"end":return n.stop()}}),n,this)})))}},{key:"getMediaSettings",value:function(e){var t,n=this.store.getState(zg),r=e.audioTrack,i=e.videoTrack;return{audioInputDeviceId:(null==r?void 0:r.settings.deviceId)||n.audioInputDeviceId,videoInputDeviceId:(null==i?void 0:i.settings.deviceId)||n.videoInputDeviceId,audioOutputDeviceId:null==(t=this.sdk.getAudioOutput().getDevice())?void 0:t.deviceId}}},{key:"setTrackVolume",value:function(e,t){return xg(this,null,Bt().mark((function n(){var r;return Bt().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!(r=this.hmsSDKTracks[t])){n.next=11;break}if(!(r instanceof Mp)){n.next=8;break}return n.next=5,r.setVolume(e);case 5:this.setState((function(n){var r=n.tracks[t];r&&"audio"===r.type&&(r.volume=e)}),"trackVolume"),n.next=9;break;case 8:Ty.w("track ".concat(t," is not an audio track"));case 9:n.next=12;break;case 11:this.logPossibleInconsistency("track ".concat(t," not present, unable to set volume"));case 12:case"end":return n.stop()}}),n,this)})))}},{key:"localAndVideoUnmuting",value:function(e){if(this.store.getState(Jg).videoTrack!==e)return!1;var t=this.store.getState(ny),n=this.store.getState(ty);return t&&!n}},{key:"logPossibleInconsistency",value:function(e){Ty.w("possible inconsistency detected - ",e)}},{key:"addRemoveVideoPlugin",value:function(e,t,n){return xg(this,null,Bt().mark((function r(){var i,a;return Bt().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(e){r.next=3;break}return Ty.w("Invalid plugin received in store"),r.abrupt("return");case 3:if(!(i=this.store.getState(Zg))){r.next=20;break}if(!(a=this.hmsSDKTracks[i])){r.next=19;break}if("add"!==t){r.next=12;break}return r.next=10,a.addPlugin(e,n);case 10:r.next=16;break;case 12:if(r.t0="remove"===t,!r.t0){r.next=16;break}return r.next=16,a.removePlugin(e);case 16:this.syncRoomState("".concat(t,"VideoPlugin")),r.next=20;break;case 19:this.logPossibleInconsistency("track ".concat(i," not present, unable to remove plugin"));case 20:case"end":return r.stop()}}),r,this)})))}},{key:"addRemoveAudioPlugin",value:function(e,t){return xg(this,null,Bt().mark((function n(){var r,i;return Bt().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e){n.next=3;break}return Ty.w("Invalid plugin received in store"),n.abrupt("return");case 3:if(!(r=this.store.getState(Xg))){n.next=20;break}if(!(i=this.hmsSDKTracks[r])){n.next=19;break}if("add"!==t){n.next=12;break}return n.next=10,i.addPlugin(e);case 10:n.next=16;break;case 12:if(n.t0="remove"===t,!n.t0){n.next=16;break}return n.next=16,i.removePlugin(e);case 16:this.syncRoomState("".concat(t,"AudioPlugin")),n.next=20;break;case 19:this.logPossibleInconsistency("track ".concat(r," not present, unable to remove plugin"));case 20:case"end":return n.stop()}}),n,this)})))}},{key:"isSameStoreSDKTrack",value:function(e,t){var n;return!!t&&(null==(n=this.hmsSDKTracks[t])?void 0:n.trackId)===e}},{key:"onRoleChangeRequest",value:function(e){this.setState((function(t){0===t.roleChangeRequests.length&&t.roleChangeRequests.push(ab.convertRoleChangeRequest(e))}),"roleChangeRequest")}},{key:"removeRoleChangeRequest",value:function(e){this.setState((function(t){var n=t.roleChangeRequests.findIndex((function(t){return t.token===e.token}));-1!==n&&t.roleChangeRequests.splice(n,1)}),"removeRoleChangeRequest")}},{key:"onRoleUpdate",value:function(){this.syncRoomState("roleUpdate")}},{key:"getStoreLocalTrackIDfromSDKTrack",value:function(e){var t=this;return this.store.getState(ey).find((function(n){return t.hmsSDKTracks[n].trackId===e.trackId}))}}]),e}(),cb=function(e){return If?"".concat(e," ").concat(document.title):e},ub=function(e,t,n){var r,i,a=lb(n,t);null==(r=e.getWebrtcInternals())||r.start();var s=null==(i=e.getWebrtcInternals())?void 0:i.onStatsChange((function(r){return db(t,r,n,e)}));return function(){a(),s&&s()}},lb=function(e,t){var n,r,i;return e.getState(Qg)?t.namedSetState((function(t){t.localPeer.id=e.getState(Qg)}),"localpeer-id"):n=e.subscribe((function(e){e&&t.namedSetState((function(t){t.localPeer.id=e}),"localpeer-id")}),Qg),e.getState(Zg)?t.namedSetState((function(t){t.localPeer.videoTrack=e.getState(Zg)}),"localpeer-videotrack-id"):r=e.subscribe((function(e){e&&t.namedSetState((function(t){t.localPeer.videoTrack=e}),"localpeer-videotrack-id")}),Zg),e.getState(Xg)?t.namedSetState((function(t){t.localPeer.audioTrack=e.getState(Xg)}),"localpeer-audiotrack-id"):i=e.subscribe((function(e){e&&t.namedSetState((function(t){t.localPeer.audioTrack=e}),"localpeer-audiotrack-id")}),Xg),function(){null==n||n(),null==r||r(),null==i||i()}},db=function(e,t,n,r){var i=n.getState(Hg);e.namedSetState((function(e){var a,s=n.getState(Qg),o={},c=Object.keys(i).filter((function(e){return i[e].peerId!==s})),u=Ut(c);try{for(u.s();!(a=u.n()).done;){var l=a.value,d=t.getRemoteTrackStats(l);d&&(o[l]=d)}}catch(f){u.e(f)}finally{u.f()}Zy(e.remoteTrackStats,o);var h=X({},s,t.getLocalPeerStats());Zy(e.peerStats,h),function(e,t,n){var r,i=n.reduce((function(e,n){return e[n.firstTrackId]=Object.values(t[n.getTrackIDBeingSent()]||{}).sort((function(e,t){return e.rid&&t.rid?e.rid<t.rid?-1:1:0})),e}),{}),a=Ut(ib(Object.keys(e),Object.keys(i)));try{for(a.s();!(r=a.n()).done;){var s=r.value;i[s]?e[s]=i[s]:delete e[s]}}catch(f){a.e(f)}finally{a.f()}}(e.localTrackStats,t.getLocalTrackStats(),r.store.getLocalPeerTracks())}),"webrtc-stats")},hb=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"resetState";e.namedSetState((function(e){Object.assign(e,{peerStats:{},remoteTrackStats:{},localTrackStats:{},localPeer:{id:""}})}),t)},fb=nt((function e(t,n){var r=this;et(this,e),this.hmsStore=t,this.sdk=n,this.store=xb.createNewHMSStore(cb("HMSStatsStore"),Cg),this.getState=this.store.getState,this.subscribe=this.store.subscribe,this.getPublishPeerConnection=function(){return new Promise((function(e){var t,n;"Connected"===r.hmsStore.getState(oy)?e(null==(n=null==(t=r.sdk)?void 0:t.getWebrtcInternals())?void 0:n.getPublishPeerConnection()):r.hmsStore.subscribe((function(t){var n,i;"Connected"===t&&e(null==(i=null==(n=r.sdk)?void 0:n.getWebrtcInternals())?void 0:i.getPublishPeerConnection())}),oy)}))},this.getSubscribePeerConnection=function(){return new Promise((function(e){var t,n;"Connected"===r.hmsStore.getState(oy)?e(null==(n=null==(t=r.sdk)?void 0:t.getWebrtcInternals())?void 0:n.getSubscribePeerConnection()):r.hmsStore.subscribe((function(t){var n,i;"Connected"===t&&e(null==(i=null==(n=r.sdk)?void 0:n.getWebrtcInternals())?void 0:i.getSubscribePeerConnection())}),oy)}))},this.sdk&&function(e,t,n){var r;n.getState(oy)===dg.Connected&&(r=ub(e,t,n)),n.subscribe((function(i){[dg.Connected,dg.Reconnecting].includes(i)?r||(r=ub(e,t,n)):[dg.Disconnected,dg.Failed].includes(i)&&r&&(hb(t,i),r(),r=void 0)}),oy)}(this.sdk,this.store,this.hmsStore)})),pb=function(e,t){return t},vb=function(e){return e.peerStats},mb=function(e){return e.localTrackStats},gb=lg([vb,function(e){return e.localPeer.id}],(function(e,t){return e[t]})),yb=(lg(gb,(function(e){var t;return null==(t=null==e?void 0:e.subscribe)?void 0:t.packetsLost})),lg(gb,(function(e){var t;return null==(t=null==e?void 0:e.subscribe)?void 0:t.jitter})),lg(gb,(function(e){var t;return null==(t=null==e?void 0:e.publish)?void 0:t.bitrate})),lg(gb,(function(e){var t;return null==(t=null==e?void 0:e.subscribe)?void 0:t.bitrate})),lg(gb,(function(e){var t;return null==(t=null==e?void 0:e.publish)?void 0:t.availableOutgoingBitrate})),lg(gb,(function(e){var t;return null==(t=null==e?void 0:e.subscribe)?void 0:t.availableIncomingBitrate})),lg(gb,(function(e){var t;return null==(t=null==e?void 0:e.publish)?void 0:t.bytesSent})),lg(gb,(function(e){var t;return null==(t=null==e?void 0:e.subscribe)?void 0:t.bytesReceived})),lg([vb,function(e,t){return t}],(function(e,t){return t?e[t]:void 0}))),bb=lg([function(e){return e.remoteTrackStats},pb],(function(e,t){return t?e[t]:void 0})),kb=lg([mb,pb],(function(e,t){return t?e[t]:void 0})),xb=(xy(yb),xy(bb),lg([mb,function(e){return e.localPeer.audioTrack}],(function(e,t){var n;return t?null==(n=e[t])?void 0:n[0]:void 0})),xy(lg(kb,(function(e){return null==e?void 0:e[0]}))),lg([mb,function(e){return e.localPeer.videoTrack}],(function(e,t){var n;return t?null==(n=e[t])?void 0:n[0]:void 0})),xy(lg(kb,(function(e){return e}))),function(){function e(t,n,r){var i=this;et(this,e),this.getStats=function(){return i.stats||(i.stats=new fb(i.store,i.sdk)),i.stats},this.store=t||e.createNewHMSStore(cb("HMSStore"),Ag),this.notifications=r||new Yy(this.store),n?this.actions=n:(this.sdk=new ig,this.actions=new ob(this.store,this.sdk,this.notifications)),this.actions.setFrameworkInfo({type:"js",sdkVersion:wg().version}),this.initialTriggerOnSubscribe=!1,If&&(window.__hms=this)}return nt(e,[{key:"triggerOnSubscribe",value:function(){this.initialTriggerOnSubscribe||(e.makeStoreTriggerOnSubscribe(this.store),this.initialTriggerOnSubscribe=!0)}},{key:"getStore",value:function(){return this.store}},{key:"getHMSActions",value:function(){return this.actions}},{key:"getActions",value:function(){return this.actions}},{key:"getNotifications",value:function(){return{onNotification:this.notifications.onNotification}}}],[{key:"createNewHMSStore",value:function(t,n){var r=Kd((function(){return n()})),i=r.setState;r.setState=function(e){var t="function"==typeof e?jl(e):e;i(t)};var a=r.getState;r.getState=function(e){return e?e(a()):a()},e.compareWithShallowCheckInSubscribe(r);var s=e.setUpDevtools(r,t);return kg(bg({},r),{namedSetState:s})}},{key:"makeStoreTriggerOnSubscribe",value:function(e){var t=e.subscribe;e.subscribe=function(n,r,i){return n(e.getState(r),void 0),t(n,r,i)}}},{key:"compareWithShallowCheckInSubscribe",value:function(e){var t=e.subscribe;e.subscribe=function(e,n,r){return n||(n=function(e){return e}),t(e,n,r=r||Wd)}}},{key:"setUpDevtools",value:function(t,n){var r;try{r=window.__REDUX_DEVTOOLS_EXTENSION__||window.top.__REDUX_DEVTOOLS_EXTENSION__}catch(Go){}if(!r)return function(e){t.setState(e)};var i=r.connect(e.devtoolsOptions(n));i.prefix=n?"".concat(n," > "):"";var a=t.setState;return t.setState=function(e){a(e),i.send("".concat(i.prefix,"setState"),t.getState())},i.subscribe(e.devtoolsSubscribe(i,t,a)),i.send("setUpStore",t.getState()),function(e,n){a(e);var r=n||"".concat(i.prefix,"action");i.send(r,t.getState())}}},{key:"devtoolsOptions",value:function(e){return{name:e,actionsBlacklist:["audioLevel","playlistProgress","connectionQuality"]}}},{key:"devtoolsSubscribe",value:function(e,t,n){return function(r){var i,a,s,o;if("DISPATCH"===r.type&&r.state)["JUMP_TO_ACTION","JUMP_TO_STATE"].includes(r.payload.type)?n(JSON.parse(r.state)):t.setState(JSON.parse(r.state));else if("DISPATCH"===r.type&&"COMMIT"===(null==(i=r.payload)?void 0:i.type))e.init(t.getState());else if("DISPATCH"===r.type&&"IMPORT_STATE"===(null==(a=r.payload)?void 0:a.type)){var c=null==(s=r.payload.nextLiftedState)?void 0:s.actionsById;((null==(o=r.payload.nextLiftedState)?void 0:o.computedStates)||[]).forEach((function(r,i){var a=r.state,s=c[i]||"".concat(e.prefix,"setState");0===i?e.init(a):(n(a),e.send(s,t.getState()))}))}}}}]),e}());function wb(e,t){if(Object.is(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(var r=0;r<n.length;r++)if(!Object.prototype.hasOwnProperty.call(t,n[r])||!Object.is(e[n[r]],t[n[r]]))return!1;return!0}(Xy=Qy||(Qy={}))[Xy.VERBOSE=0]="VERBOSE",Xy[Xy.DEBUG=1]="DEBUG",Xy[Xy.INFO=2]="INFO",Xy[Xy.WARN=3]="WARN",Xy[Xy.ERROR=4]="ERROR",Xy[Xy.NONE=5]="NONE";var Tb=function(){function e(){et(this,e)}return nt(e,null,[{key:"v",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];this.log.apply(this,[Qy.VERBOSE,e].concat(n))}},{key:"d",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];this.log.apply(this,[Qy.DEBUG,e].concat(n))}},{key:"i",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];this.log.apply(this,[Qy.INFO,e].concat(n))}},{key:"w",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];this.log.apply(this,[Qy.WARN,e].concat(n))}},{key:"e",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];this.log.apply(this,[Qy.ERROR,e].concat(n))}},{key:"log",value:function(e,t){for(var n,r,i,a,s,o=arguments.length,c=new Array(o>2?o-2:0),u=2;u<o;u++)c[u-2]=arguments[u];if(!(this.level.valueOf()>e.valueOf()))switch(e){case Qy.VERBOSE:(n=console).log.apply(n,["HMSui-components: ",t].concat(c));break;case Qy.DEBUG:(r=console).debug.apply(r,["HMSui-components: ",t].concat(c));break;case Qy.INFO:(i=console).info.apply(i,["HMSui-components: ",t].concat(c));break;case Qy.WARN:(a=console).warn.apply(a,["HMSui-components: ",t].concat(c));break;case Qy.ERROR:(s=console).error.apply(s,["HMSui-components: ",t].concat(c))}}}]),e}();Tb.level=Qy.VERBOSE;var Eb="It seems like you forgot to add your component within a top level HMSRoomProvider, please refer to 100ms react docs(https://docs.100ms.live/javascript/v2/features/integration#react-hooks) to check on the required steps for using this hook.";var _b,Sb="undefined"!=typeof window,Ab=(0,a.createContext)(null),Cb=function(e){var t=e.children,n=e.actions,r=e.store,i=e.notifications,s=e.stats,o=e.isHMSStatsOn,c=void 0!==o&&o,u=e.leaveOnUnload,l=void 0===u||u;if(!_b){var d=function(){throw new Error("modifying store is not allowed")};if(n&&r)_b={actions:n,store:zd(Object.assign(Object.assign({},r),{setState:d,destroy:d}))},i&&(_b.notifications=i),s&&(_b.statsStore=zd({getState:s.getState,subscribe:s.subscribe,setState:d,destroy:d}));else{var h=new xb;if(_b={actions:h.getActions(),store:zd(Object.assign(Object.assign({},h.getStore()),{setState:d,destroy:d})),notifications:h.getNotifications()},c){var f=h.getStats();_b.statsStore=zd({getState:f.getState,subscribe:f.subscribe,setState:d,destroy:d})}}_b.actions.setFrameworkInfo({type:"react-web",version:a.version,sdkVersion:"0.6.1"})}return(0,a.useEffect)((function(){Sb&&l&&window.addEventListener("beforeunload",(function(){return _b.actions.leave()}))}),[l]),a.createElement(Ab.Provider,{value:_b},t)},Ib=function(e){return function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:wb;t||Tb.w("fetching full store without passing any selector may have a heavy performance impact on your website.");var r=(0,a.useContext)(e);if(!r)throw new Error(Eb);return(0,r.store)(t,n)}}(Ab),Rb=(function(e){}(Ab),function(){Ib(Kg);return(0,Me.jsxs)("div",{style:{backgroundImage:"url(".concat(Gd,")"),backgroundPosition:"center",backgroundSize:"cover",backgroundRepeat:"no-repeat"},className:"flex flex-col justify-center items-center h-screen",children:[(0,Me.jsx)("h1",{style:{marginTop:"-20px"},className:"text-xl border-b-4 border-white font-bold inline-block text-white",children:"\u09b2\u09be\u0987\u09ad \u09ac\u09df\u09be\u09a8"}),(0,Me.jsx)("br",{}),(0,Me.jsx)("audio",{src:"http://128.140.52.151:8000/stream",controls:!0}),(0,Me.jsx)("h1",{className:"text-white mt-4",children:"\u09ac\u09bf\u0983\u09a6\u09cd\u09b0\u0983 \u09b2\u09be\u0987\u09ad \u09b6\u09cb\u09a8\u09be\u09b0 \u09b8\u09ae\u09df \u0985\u09cd\u09af\u09be\u09aa\u09b8 \u098f\u09b0 \u0985\u09a8\u09cd\u09af \u0995\u09cb\u09a5\u09be\u0993 \u09af\u09be\u0993\u09df\u09be \u09af\u09be\u09ac\u09c7 \u09a8\u09be \u09a4\u09ac\u09c7 \u0985\u09cd\u09af\u09be\u09aa\u09b8 \u09ae\u09bf\u09a8\u09bf\u09ae\u09be\u0987\u099c \u0995\u09b0\u09c7 \u09ae\u09cb\u09ac\u09be\u0987\u09b2\u09c7\u09b0 \u0985\u09a8\u09cd\u09af \u0995\u09be\u099c \u0995\u09b0\u09be \u09af\u09be\u09ac\u09c7"})]})}),Pb=function(){return(0,Me.jsxs)("div",{className:"mt-12 mb-28",children:[(0,Me.jsx)("h1",{className:"text-xl border-b-4 border-accent font-bold mt-8 inline-block",children:"\u09a4\u09a5\u09cd\u09af \u0993 \u0985\u09ad\u09bf\u09af\u09cb\u0997"}),(0,Me.jsx)("br",{}),(0,Me.jsx)("hr",{}),(0,Me.jsxs)("p",{className:"text-justify mx-4 mt-4",children:[(0,Me.jsx)("span",{className:"font-bold",children:"\u0996\u09be\u09a8\u0995\u09be\u09b9 \u09b0\u09c1\u09ae\u09bf"})," \u0985\u09cd\u09af\u09be\u09aa\u099f\u09bf \u098f\u0995\u099f\u09bf \u0993\u09df\u09c7\u09ac \u0985\u09cd\u09af\u09be\u09aa \u09af\u09be \u0996\u09be\u09a8\u0995\u09be \u099a\u09bf\u09b6\u09a4\u09bf\u09df\u09be \u098f\u09ae\u09a6\u09be\u09a6\u09bf\u09df\u09be \u0986\u09b6\u09b0\u09be\u09ab\u09bf\u09df\u09be \u098f\u09ac\u0982 \u0986\u09b0\u09bf\u09ab \u09ac\u09bf\u09b2\u09cd\u09b2\u09be\u09b9 \u09b0\u09c1\u09ae\u09bf\u09df\u09c7 \u099c\u09be\u09ae\u09be\u09a8\u09be \u09b9\u099c\u09b0\u09a4 \u09ae\u09be\u0993\u09b2\u09be\u09a8\u09be \u09b9\u09be\u0995\u09bf\u09ae \u09ae\u09cb\u09b9\u09be\u09ae\u09cd\u09ae\u09a6 \u0986\u0996\u09a4\u09be\u09b0 \u09b8\u09be\u09b9\u09c7\u09ac (\u09b0\u09b9\u0983) \u098f\u09b0 \u09b8\u09c1\u09af\u09cb\u0997\u09cd\u09af \u0996\u09b2\u09bf\u09ab\u09be ",(0,Me.jsx)("span",{className:"font-bold",children:"\u09b9\u099c\u09b0\u09a4 \u09ae\u09be\u0993\u09b2\u09be\u09a8\u09be \u09ae\u09c1\u09ab\u09a4\u09bf \u09b6\u09ab\u09c0 \u09b8\u09be\u09b9\u09c7\u09ac (\u09a6\u09be\u0983 \u09ac\u09be\u0983)"})," \u098f\u09b0 \u09ac\u09df\u09be\u09a8 \u0993 \u09b8\u09ae\u09cd\u09aa\u09b0\u09cd\u0995\u09bf\u09a4 \u09ac\u09bf\u09b7\u09df \u09aa\u09cd\u09b0\u099a\u09be\u09b0\u09c7\u09b0 \u099c\u09a8\u09cd\u09af \u09a4\u09c8\u09b0\u09bf \u0995\u09b0\u09be \u09b9\u09df\u09c7\u099b\u09c7\u0964 \u09af\u09c7\u09b9\u09c7\u09a4\u09c1 \u0993\u09df\u09c7\u09ac \u0985\u09cd\u09af\u09be\u09aa \u09a4\u09be\u0987 \u0985\u09cd\u09af\u09be\u09aa\u099f\u09bf \u09ac\u09cd\u09af\u09be\u09ac\u09b9\u09be\u09b0 \u0995\u09b0\u09a4\u09c7 \u0985\u09ac\u09b6\u09cd\u09af\u0987 \u0987\u09a8\u09cd\u099f\u09be\u09b0\u09a8\u09c7\u099f \u0995\u09be\u09a8\u09c7\u0995\u09b6\u09a8 \u09b2\u09be\u0997\u09ac\u09c7\u0964"]}),(0,Me.jsx)("p",{className:"text-justify mx-4",children:"\u0985\u09cd\u09af\u09be\u09aa\u099f\u09bf \u09ac\u09cd\u09af\u09ac\u09b9\u09be\u09b0 \u0995\u09b0\u09a4\u09c7 \u0997\u09bf\u09df\u09c7 \u0995\u09be\u09b0\u09cb \u09af\u09a6\u09bf \u0995\u09cb\u09a8 \u0985\u09b8\u09c1\u09ac\u09bf\u09a7\u09be \u09b9\u09df \u09ac\u09be \u0985\u09cd\u09af\u09be\u09aa\u099f\u09bf\u09a4\u09c7 \u0995\u09cb\u09a8 \u09a8\u09a4\u09c1\u09a8 \u09ab\u09bf\u099a\u09be\u09b0 \u0985\u09cd\u09af\u09be\u09a1 \u0995\u09b0\u09be\u09b0 \u09aa\u09b0\u09be\u09ae\u09b0\u09cd\u09b6 \u09a5\u09be\u0995\u09c7 \u09a4\u09ac\u09c7 \u09a8\u09bf\u09ae\u09cd\u09a8\u09c7\u09b0 \u09ab\u09b0\u09ae \u09aa\u09c2\u09b0\u09a3 \u0995\u09b0\u09c7 \u09b8\u09be\u09ac\u09ae\u09bf\u099f \u0995\u09b0\u09c1\u09a8\u0964 "}),(0,Me.jsx)("div",{children:(0,Me.jsxs)("form",{onSubmit:function(e){e.preventDefault();var t={name:e.target.name.value,mobile:e.target.mobile.value,query:e.target.query.value,availHeight:window.screen.availHeight,availWidth:window.screen.availWidth,width:window.screen.width,height:window.screen.height,resulationWidth:window.screen.width*window.devicePixelRatio,resulationHeight:window.screen.height*window.devicePixelRatio};fetch("http://128.140.52.151:5000/querys",{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify(t)}).then((function(e){return e.json()})).then((function(t){console.log(t),e.target.reset(),Le.success("\u0986\u09aa\u09a8\u09be\u09b0 \u0985\u09ad\u09bf\u09af\u09cb\u0997/\u09aa\u09b0\u09be\u09ae\u09b0\u09cd\u09b6 \u09aa\u09be\u09a0\u09be\u09a8\u09cb \u09b9\u09df\u09c7\u099b\u09c7")}))},className:"mt-8 flex justify-center items-center flex-col",children:[(0,Me.jsxs)("div",{class:"form-control w-80",children:[(0,Me.jsx)("label",{class:"label",children:(0,Me.jsx)("span",{class:"label-text",children:"\u0986\u09aa\u09a8\u09be\u09b0 \u09a8\u09be\u09ae"})}),(0,Me.jsx)("input",{name:"name",type:"text",placeholder:"\u0986\u09aa\u09a8\u09be\u09b0 \u09a8\u09be\u09ae \u09b2\u09bf\u0996\u09c1\u09a8",class:"input input-bordered w-full max-w-xs"})]}),(0,Me.jsxs)("div",{class:"form-control w-80",children:[(0,Me.jsx)("label",{class:"label",children:(0,Me.jsx)("span",{class:"label-text",children:"\u09b9\u09cb\u09df\u09be\u099f\u09b8 \u0985\u09cd\u09af\u09be\u09aa/\u099f\u09c7\u09b2\u09bf\u0997\u09cd\u09b0\u09be\u09ae \u09ae\u09cb\u09ac\u09be\u0987\u09b2 \u09a8\u0982"})}),(0,Me.jsx)("input",{name:"mobile",type:"text",placeholder:"\u09ae\u09cb\u09ac\u09be\u0987\u09b2 \u09a8\u0982 \u09b2\u09bf\u0996\u09c1\u09a8",class:"input input-bordered w-full max-w-xs"})]}),(0,Me.jsxs)("div",{class:"form-control w-80",children:[(0,Me.jsx)("label",{class:"label",children:(0,Me.jsx)("span",{class:"label-text",children:"\u0985\u09ad\u09bf\u09af\u09cb\u0997/\u09aa\u09b0\u09be\u09ae\u09b0\u09cd\u09b6"})}),(0,Me.jsx)("textarea",{name:"query",class:"textarea textarea-bordered",placeholder:"\u0985\u09ad\u09bf\u09af\u09cb\u0997/\u09aa\u09b0\u09be\u09ae\u09b0\u09cd\u09b6 \u09ac\u09bf\u09b8\u09cd\u09a4\u09be\u09b0\u09bf\u09a4 \u09b2\u09bf\u0996\u09c1\u09a8"})]}),(0,Me.jsx)("button",{className:"btn btn-md btn-accent text-white my-4 rounded-md",type:"submit",children:"\u0985\u09ad\u09bf\u09af\u09cb\u0997/\u09aa\u09b0\u09be\u09ae\u09b0\u09cd\u09b6 \u09aa\u09be\u09a0\u09be\u09a8"})]})})]})};function Db(e){return wt({tag:"svg",attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M6 .278a.768.768 0 0 1 .08.858 7.208 7.208 0 0 0-.878 3.46c0 4.021 3.278 7.277 7.318 7.277.527 0 1.04-.055 1.533-.16a.787.787 0 0 1 .81.316.733.733 0 0 1-.031.893A8.349 8.349 0 0 1 8.344 16C3.734 16 0 12.286 0 7.71 0 4.266 2.114 1.312 5.124.06A.752.752 0 0 1 6 .278z"}},{tag:"path",attr:{d:"M10.794 3.148a.217.217 0 0 1 .412 0l.387 1.162c.173.518.579.924 1.097 1.097l1.162.387a.217.217 0 0 1 0 .412l-1.162.387a1.734 1.734 0 0 0-1.097 1.097l-.387 1.162a.217.217 0 0 1-.412 0l-.387-1.162A1.734 1.734 0 0 0 9.31 6.593l-1.162-.387a.217.217 0 0 1 0-.412l1.162-.387a1.734 1.734 0 0 0 1.097-1.097l.387-1.162zM13.863.099a.145.145 0 0 1 .274 0l.258.774c.115.346.386.617.732.732l.774.258a.145.145 0 0 1 0 .274l-.774.258a1.156 1.156 0 0 0-.732.732l-.258.774a.145.145 0 0 1-.274 0l-.258-.774a1.156 1.156 0 0 0-.732-.732l-.774-.258a.145.145 0 0 1 0-.274l.774-.258c.346-.115.617-.386.732-.732L13.863.1z"}}]})(e)}function Nb(e){return wt({tag:"svg",attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"m11.596 8.697-6.363 3.692c-.54.313-1.233-.066-1.233-.697V4.308c0-.63.692-1.01 1.233-.696l6.363 3.692a.802.802 0 0 1 0 1.393z"}}]})(e)}function Ob(e){return wt({tag:"svg",attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M8 12a4 4 0 1 0 0-8 4 4 0 0 0 0 8zM8 0a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 0zm0 13a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 13zm8-5a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2a.5.5 0 0 1 .5.5zM3 8a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2A.5.5 0 0 1 3 8zm10.657-5.657a.5.5 0 0 1 0 .707l-1.414 1.415a.5.5 0 1 1-.707-.708l1.414-1.414a.5.5 0 0 1 .707 0zm-9.193 9.193a.5.5 0 0 1 0 .707L3.05 13.657a.5.5 0 0 1-.707-.707l1.414-1.414a.5.5 0 0 1 .707 0zm9.193 2.121a.5.5 0 0 1-.707 0l-1.414-1.414a.5.5 0 0 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .707zM4.464 4.465a.5.5 0 0 1-.707 0L2.343 3.05a.5.5 0 1 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .708z"}}]})(e)}function Lb(e){return wt({tag:"svg",attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M7.646 1.146a.5.5 0 0 1 .708 0l1.5 1.5a.5.5 0 0 1-.708.708L8.5 2.707V4.5a.5.5 0 0 1-1 0V2.707l-.646.647a.5.5 0 1 1-.708-.708l1.5-1.5zM2.343 4.343a.5.5 0 0 1 .707 0l1.414 1.414a.5.5 0 0 1-.707.707L2.343 5.05a.5.5 0 0 1 0-.707zm11.314 0a.5.5 0 0 1 0 .707l-1.414 1.414a.5.5 0 1 1-.707-.707l1.414-1.414a.5.5 0 0 1 .707 0zM11.709 11.5a4 4 0 1 0-7.418 0H.5a.5.5 0 0 0 0 1h15a.5.5 0 0 0 0-1h-3.79zM0 10a.5.5 0 0 1 .5-.5h2a.5.5 0 0 1 0 1h-2A.5.5 0 0 1 0 10zm13 0a.5.5 0 0 1 .5-.5h2a.5.5 0 0 1 0 1h-2a.5.5 0 0 1-.5-.5z"}}]})(e)}function Mb(e){return wt({tag:"svg",attr:{version:"1.1",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M9 4l-2-2h-7v13h16v-11h-7zM8 13.5l-3.5-3.5h2.5v-4h2v4h2.5l-3.5 3.5z"}}]})(e)}var jb=function(e){var t=e.setAudioData,n=u((0,a.useState)([]),2),r=n[0],i=n[1],s=u((0,a.useState)([]),2),o=s[0],c=s[1],l=u((0,a.useState)([]),2),d=l[0],h=l[1],f=u((0,a.useState)([]),2),p=f[0],v=f[1],m=u((0,a.useState)([]),2),g=m[0],y=m[1],b=u((0,a.useState)(!0),2),k=b[0],x=b[1];(0,a.useEffect)((function(){fetch("http://128.140.52.151:5000/getlatest").then((function(e){return e.json()})).then((function(e){i(e),x(!1)}))}),[]),(0,a.useEffect)((function(){fetch("http://128.140.52.151:5000/getboyans").then((function(e){return e.json()})).then((function(e){c(e),x(!1)}))}),[]),(0,a.useEffect)((function(){fetch("http://128.140.52.151:5000/getanswer").then((function(e){return e.json()})).then((function(e){h(e),x(!1)}))}),[]),(0,a.useEffect)((function(){fetch("http://128.140.52.151:5000/getkobita").then((function(e){return e.json()})).then((function(e){v(e),console.log(e),x(!1)}))}),[]),(0,a.useEffect)((function(){fetch("http://128.140.52.151:5000/getshorts").then((function(e){return e.json()})).then((function(e){y(e),console.log(e),x(!1)}))}),[]);return k?(0,Me.jsx)(je,{}):(0,Me.jsxs)("div",{className:"mt-12 mb-28",children:[(0,Me.jsx)("h1",{className:"text-xl border-b-4 border-accent font-bold mt-8 inline-block",children:"\u09b8\u09be\u09ae\u09cd\u09aa\u09cd\u09b0\u09a4\u09bf\u0995 \u09af\u09cb\u0997 \u0995\u09b0\u09be \u09ac\u09bf\u09b7\u09df\u09b8\u09ae\u09c2\u09b9"}),(0,Me.jsx)("br",{}),(0,Me.jsx)("hr",{}),(0,Me.jsx)("div",{className:"grid grid-cols-1 gap-2 mt-4",children:r.slice(0,50).map((function(e){var n;return(0,Me.jsxs)("div",{style:{height:"90px"},className:"shadow-xl bg-white hover:shadow-accent active:shadow-red-400 p-5 rounded-r-3xl rounded-tl-3xl text-left mt-2 relative",children:[(0,Me.jsxs)("div",{className:"flex items-center",children:[(0,Me.jsx)("div",{children:(0,Me.jsx)("label",{class:"btn ".concat("boyan"===e.mainCategory?"btn-success":"kobita"===e.mainCategory?"btn-secondary":"answers"===e.mainCategory?"btn-warning":"shorts"===e.mainCategory?"btn-error":""," btn-circle text-white font-bold mr-12"),children:"boyan"===e.mainCategory?"\u09ac\u09df\u09be\u09a8":"kobita"===e.mainCategory?"\u0995\u09ac\u09bf\u09a4\u09be":"answers"===e.mainCategory?"\u09aa\u09cd\u09b0\u09b6\u09cd\u09a8-\u0989\u09a4\u09cd\u09a4\u09b0":"shorts"===e.mainCategory?"\u099b\u09cb\u099f \u09ac\u09df\u09be\u09a8":""})}),(0,Me.jsx)("div",{children:(0,Me.jsxs)("h3",{style:{marginLeft:"-35px",marginTop:"15px"},className:"text-xs font-bold min-h-8",children:["answers"===e.mainCategory?(null===(n=e.question)||void 0===n?void 0:n.slice(0,38))+(e.question.length>38?"...":""):e.name," ",(0,Me.jsx)("span",{children:"answers"===e.mainCategory||"kobita"===e.mainCategory?"":"("+(null===e||void 0===e?void 0:e.date)+")"})," "]})})]}),(0,Me.jsxs)("div",{className:"text-center absolute right-2 rounded-2xl bottom-6 shadow-2xl p-1",children:[(0,Me.jsx)("label",{onClick:function(){return function(e){if(t(e),"boyan"===e.mainCategory){var n,r=o.filter((function(t){return t.name===e.name})),i=r.filter((function(t){return t.date===e.date})),a=i[0].view?i[0].view:0,s={view:parseInt(a)+1};console.log(i[0]._id),fetch("http://128.140.52.151:5000/getboyans/".concat(null===(n=i[0])||void 0===n?void 0:n._id),{method:"PATCH",headers:{"content-type":"application/json"},body:JSON.stringify(s)}).then((function(e){return e.json()})).then((function(e){console.log(e)}))}if("answers"===e.mainCategory){var c,u=d.filter((function(t){return t.question===e.question})).filter((function(t){return t.answer_no===e.answer_no})),l=u[0].view?u[0].view:0,h={view:parseInt(l)+1};console.log(u[0]._id),fetch("http://128.140.52.151:5000/getanswer/".concat(null===(c=u[0])||void 0===c?void 0:c._id),{method:"PATCH",headers:{"content-type":"application/json"},body:JSON.stringify(h)}).then((function(e){return e.json()})).then((function(e){console.log(e)}))}if("kobita"===e.mainCategory){var f,v=p.filter((function(t){return t.name===e.name})),m=v.filter((function(t){return t.date_time===e.date_time})),y=m[0].view?m[0].view:0,b={view:parseInt(y)+1};console.log(m[0]._id),fetch("http://128.140.52.151:5000/getkobita/".concat(null===(f=m[0])||void 0===f?void 0:f._id),{method:"PATCH",headers:{"content-type":"application/json"},body:JSON.stringify(b)}).then((function(e){return e.json()})).then((function(e){console.log(e)}))}if("shorts"===e.mainCategory){var k,x=g.filter((function(t){return t.name===e.name})).filter((function(t){return t.date===e.date})),w=x[0].view?x[0].view:0,T={view:parseInt(w)+1};console.log(x[0]._id),fetch("http://128.140.52.151:5000/getshort/".concat(null===(k=x[0])||void 0===k?void 0:k._id),{method:"PATCH",headers:{"content-type":"application/json"},body:JSON.stringify(T)}).then((function(e){return e.json()})).then((function(e){console.log(e)}))}}(e)},for:"my-modal-6",class:"btn btn-xs btn-accent btn-circle text-white font-bold mr-2",children:(0,Me.jsx)(Nb,{})}),(0,Me.jsx)("label",{onClick:function(){return function(e){if("boyan"===e.mainCategory){var t,n=o.filter((function(t){return t.name===e.name})),r=n.filter((function(t){return t.date===e.date})),i=r[0].download?r[0].download:0,a={download:parseInt(i)+1};console.log(r[0]._id),fetch("http://128.140.52.151:5000/getboyans/".concat(null===(t=r[0])||void 0===t?void 0:t._id),{method:"PATCH",headers:{"content-type":"application/json"},body:JSON.stringify(a)}).then((function(e){return e.json()})).then((function(e){console.log(e)}))}if("answers"===e.mainCategory){var s,c=d.filter((function(t){return t.question===e.question})).filter((function(t){return t.answer_no===e.answer_no})),u=c[0].download?c[0].download:0,l={download:parseInt(u)+1};console.log(c[0]._id),fetch("http://128.140.52.151:5000/getanswer/".concat(null===(s=c[0])||void 0===s?void 0:s._id),{method:"PATCH",headers:{"content-type":"application/json"},body:JSON.stringify(l)}).then((function(e){return e.json()})).then((function(e){console.log(e)}))}if("kobita"===e.mainCategory){var h,f=p.filter((function(t){return t.name===e.name})),v=f.filter((function(t){return t.date_time===e.date_time})),m=v[0].download?v[0].download:0,y={download:parseInt(m)+1};console.log(v[0]._id),fetch("http://128.140.52.151:5000/getkobita/".concat(null===(h=v[0])||void 0===h?void 0:h._id),{method:"PATCH",headers:{"content-type":"application/json"},body:JSON.stringify(y)}).then((function(e){return e.json()})).then((function(e){console.log(e)}))}if("shorts"===e.mainCategory){var b,k=g.filter((function(t){return t.name===e.name})).filter((function(t){return t.date===e.date})),x=k[0].download?k[0].download:0,w={download:parseInt(x)+1};console.log(k[0]._id),fetch("http://128.140.52.151:5000/getshort/".concat(null===(b=k[0])||void 0===b?void 0:b._id),{method:"PATCH",headers:{"content-type":"application/json"},body:JSON.stringify(w)}).then((function(e){return e.json()})).then((function(e){console.log(e)}))}}(e)},for:"my-modal-6",class:"btn btn-xs btn-accent btn-circle text-white font-bold",children:(0,Me.jsx)("a",{href:e.link,children:(0,Me.jsx)(Mb,{})})})]})]})}))})]})};function Fb(e){if(null==e)throw new TypeError("Cannot destructure "+e)}var Ub=function(e){Fb(e);var t=u((0,a.useState)([]),2),n=t[0],r=t[1],i=u((0,a.useState)(0),2),s=i[0],o=i[1],c=u((0,a.useState)(0),2),l=c[0],d=c[1],h=u((0,a.useState)(8),2),f=h[0],p=h[1],v=u((0,a.useState)(!0),2),m=v[0],g=v[1];(0,a.useEffect)((function(){fetch("http://128.140.52.151:5000/getnotices").then((function(e){return e.json()})).then((function(e){r(e),g(!1)}))}),[]),(0,a.useEffect)((function(){o(Math.ceil(n.length/8))}),[n.length]);var y=0,b=8;return m?(0,Me.jsx)(je,{}):(0,Me.jsxs)("div",{"data-aos":"fade-right",className:"w-10/12 lg:w-11/12 mx-auto mt-16 relative bg-white text-black",children:[(0,Me.jsx)("h1",{className:"text-xl border-b-4 border-accent font-bold mt-8 inline-block",children:"\u09a8\u09cb\u099f\u09bf\u09b6 \u09b8\u09ae\u09c2\u09b9"}),(0,Me.jsx)("br",{}),(0,Me.jsx)("hr",{}),(0,Me.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-5",children:n.slice(l,f).map((function(e){return(0,Me.jsxs)("div",{className:"shadow-xl bg-white hover:shadow-accent active:shadow-red-400 p-5 rounded-r-3xl rounded-tl-3xl text-left relative",children:[(0,Me.jsx)("img",{className:"",width:"400px",src:e.link,alt:""}),(0,Me.jsx)("p",{className:"my-4",children:null===e||void 0===e?void 0:e.description}),e.googleMap&&(0,Me.jsx)("a",{href:null===e||void 0===e?void 0:e.googleMap,className:"btn btn-accent text-white",target:"_blank",rel:"noopener noreferrer",children:"\u0997\u09c1\u0997\u09b2 \u09ae\u09cd\u09af\u09be\u09aa \u09b2\u09bf\u0982\u0995"})]})}))}),(0,Me.jsx)("div",{className:"mt-8 mb-20",children:n.length>8&&(0,Me.jsx)(Be(),{previousLabel:"\u09aa\u09c2\u09b0\u09cd\u09ac\u09ac\u09b0\u09cd\u09a4\u09c0",nextLabel:"\u09aa\u09b0\u09ac\u09b0\u09cd\u09a4\u09c0",breakLabel:"...",pageCount:s,marginPagesDisplayed:3,pageRangeDisplayed:6,onPageChange:function(e){y=e.selected+1<3?y*e.selected+8:y*e.selected+8+8,e.selected+1<=1&&(y=0,b=8),b=b*e.selected+8,d(y),p(b),window.scrollTo(0,0)},containerClassName:"btn-group justify-center",pageClassName:"btn btn-accent text-white",activeClassName:"btn bg-white text-black",previousClassName:"btn btn-accent text-white",nextClassName:"btn btn-accent text-white",breakClassName:"btn btn-accent text-white"})})]})},Bb=function(){return(0,Me.jsxs)("div",{className:"mt-12 mb-28",children:[(0,Me.jsx)("h1",{className:"text-xl border-b-4 border-accent font-bold mt-8 inline-block",children:"\u09a4\u09a5\u09cd\u09af \u09a6\u09bf\u09df\u09c7 \u09b0\u09c7\u099c\u09bf\u09b8\u09cd\u099f\u09be\u09b0 \u0995\u09b0\u09c1\u09a8"}),(0,Me.jsx)("br",{}),(0,Me.jsx)("hr",{}),(0,Me.jsxs)("p",{className:"text-justify mx-4 mt-4",children:[" \u0986\u09b8\u09b8\u09be\u09b2\u09be\u09ae\u09c1 \u0986\u09b2\u09be\u0987\u0995\u09c1\u09ae, \u09b8\u09a8\u09cd\u09ae\u09be\u09a8\u09bf\u09a4 \u09a6\u09c0\u09a8\u09bf \u09ad\u09be\u0987 ",(0,Me.jsx)("span",{className:"font-bold",children:"\u0996\u09be\u09a8\u0995\u09be\u09b9\u09c7 \u09b0\u09ac\u09cd\u09ac\u09be\u09a8\u09bf\u09df\u09cd\u09af\u09be"})," \u0985\u09cd\u09af\u09be\u09aa\u09b8 \u098f \u0986\u09aa\u09a8\u09be\u0995\u09c7 \u09b8\u09cd\u09ac\u09be\u0997\u09a4\u09ae\u0964 \u0986\u09aa\u09a8\u09bf \u09af\u09a6\u09bf \u0986\u09b0\u09bf\u09ab \u09ac\u09bf\u09b2\u09cd\u09b2\u09be\u09b9 \u09b0\u09c1\u09ae\u09bf\u09df\u09c7 \u099c\u09be\u09ae\u09be\u09a8\u09be \u09b9\u099c\u09b0\u09a4 \u09ae\u09be\u0993\u09b2\u09be\u09a8\u09be \u09b9\u09be\u0995\u09bf\u09ae \u09ae\u09cb\u09b9\u09be\u09ae\u09cd\u09ae\u09a6 \u0986\u0996\u09a4\u09be\u09b0 \u09b8\u09be\u09b9\u09c7\u09ac (\u09b0\u09b9\u0983) \u098f\u09b0 \u09b8\u09c1\u09af\u09cb\u0997\u09cd\u09af \u0996\u09b2\u09bf\u09ab\u09be ",(0,Me.jsx)("span",{className:"font-bold",children:"\u09b9\u099c\u09b0\u09a4 \u09ae\u09be\u0993\u09b2\u09be\u09a8\u09be \u09ae\u09c1\u09ab\u09a4\u09bf \u09b6\u09ab\u09c0 \u09b8\u09be\u09b9\u09c7\u09ac (\u09a6\u09be\u0983 \u09ac\u09be\u0983)"})," \u098f\u09b0 \u09b9\u09be\u09a4\u09c7 \u09b9\u09be\u09a4 \u09a6\u09bf\u09df\u09c7 \u09ac\u09be\u09df\u09be\u09a4 \u0997\u09cd\u09b0\u09b9\u09a3 \u0995\u09b0\u09c7 \u09a5\u09be\u0995\u09c7\u09a8 \u09a4\u09ac\u09c7 \u09a8\u09bf\u09ae\u09cd\u09a8\u09c7\u09b0 \u09ab\u09b0\u09ae \u09aa\u09c2\u09b0\u09a3 \u0995\u09b0\u09c7 \u0986\u09aa\u09a8\u09be\u09b0 \u09a4\u09a5\u09cd\u09af \u09a6\u09bf\u09df\u09c7 \u0985\u09cd\u09af\u09be\u09aa\u09c7 \u09b0\u09c7\u099c\u09bf\u09b8\u09cd\u099f\u09be\u09b0 \u0995\u09b0\u09c1\u09a8\u0964"]}),(0,Me.jsx)("p",{className:"text-justify mx-2 font-bold",children:"\u09ac\u09bf\u0983 \u09a6\u09cd\u09b0\u0983- \u098f\u0995\u09ac\u09be\u09b0\u09c7\u09b0 \u09ac\u09c7\u09b6\u09bf \u09b0\u09c7\u099c\u09bf\u09b8\u09cd\u099f\u09be\u09b0 \u0995\u09b0\u09be\u09b0 \u09a6\u09b0\u0995\u09be\u09b0 \u09a8\u09c7\u0987\u0964 "}),(0,Me.jsx)("div",{children:(0,Me.jsxs)("form",{onSubmit:function(e){e.preventDefault();var t={name:e.target.name.value,mobile:e.target.mobile.value,query:e.target.query.value};fetch("http://128.140.52.151:5000/users",{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify(t)}).then((function(e){return e.json()})).then((function(t){console.log(t),e.target.reset(),Le.success("\u0986\u09aa\u09a8\u09be\u09b0 \u0985\u09ad\u09bf\u09af\u09cb\u0997/\u09aa\u09b0\u09be\u09ae\u09b0\u09cd\u09b6 \u09aa\u09be\u09a0\u09be\u09a8\u09cb \u09b9\u09df\u09c7\u099b\u09c7")}))},className:"mt-8 flex justify-center items-center flex-col",children:[(0,Me.jsxs)("div",{class:"form-control w-80",children:[(0,Me.jsx)("label",{class:"label",children:(0,Me.jsx)("span",{class:"label-text",children:"\u0986\u09aa\u09a8\u09be\u09b0 \u09a8\u09be\u09ae"})}),(0,Me.jsx)("input",{name:"name",type:"text",placeholder:"\u0986\u09aa\u09a8\u09be\u09b0 \u09a8\u09be\u09ae \u09b2\u09bf\u0996\u09c1\u09a8",class:"input input-bordered w-full max-w-xs"})]}),(0,Me.jsxs)("div",{class:"form-control w-80",children:[(0,Me.jsx)("label",{class:"label",children:(0,Me.jsx)("span",{class:"label-text",children:"\u09ae\u09cb\u09ac\u09be\u0987\u09b2 \u09a8\u0982"})}),(0,Me.jsx)("input",{name:"mobile",type:"text",placeholder:"\u09ae\u09cb\u09ac\u09be\u0987\u09b2 \u09a8\u0982 \u09b2\u09bf\u0996\u09c1\u09a8",class:"input input-bordered w-full max-w-xs"})]}),(0,Me.jsxs)("div",{class:"form-control w-80",children:[(0,Me.jsx)("label",{class:"label",children:(0,Me.jsx)("span",{class:"label-text",children:"\u09a0\u09bf\u0995\u09be\u09a8\u09be"})}),(0,Me.jsx)("textarea",{name:"query",class:"textarea textarea-bordered",placeholder:"\u0986\u09aa\u09a8\u09be\u09b0 \u09a0\u09bf\u0995\u09be\u09a8\u09be \u09b2\u09bf\u0996\u09c1\u09a8"})]}),(0,Me.jsx)("button",{className:"btn btn-md btn-accent text-white my-4 rounded-md",type:"submit",children:"\u09b0\u09c7\u099c\u09bf\u09b8\u09cd\u099f\u09be\u09b0"})]})})]})},Gb=function(){var e=u((0,a.useState)([]),2),t=e[0],n=e[1],r=u((0,a.useState)([]),2),i=r[0],s=r[1],o=U();(0,a.useEffect)((function(){fetch("chapters.json").then((function(e){return e.json()})).then((function(e){n(e)}))}),[]),(0,a.useEffect)((function(){fetch("chapterDetails.json").then((function(e){return e.json()})).then((function(e){s(e.chapters),console.log(e.chapters)}))}),[]);var c=function(e){o("/mobile_quran/".concat(e))};return(0,Me.jsxs)("div",{className:"mt-20",children:[(0,Me.jsx)("h1",{className:"text-2xl font-bold mt-4 bg-red-200 pt-5",children:"\u0986\u09b2-\u0995\u09c1\u09b0\u0986\u09a8\u09c1\u09b2 \u0995\u09be\u09b0\u09c0\u09ae"}),(0,Me.jsx)("h1",{className:"text-2xl font-bold bg-red-200 pb-5",children:"\u09b8\u09c2\u09b0\u09be\u09b9 \u09b8\u09ae\u09c2\u09b9"}),(0,Me.jsxs)("div",{className:"grid grid-col-4 grid-flow-col text-sm",children:[(0,Me.jsx)("div",{className:"bg-red-100 mb-16",children:t.map((function(e,t){return(0,Me.jsxs)("div",{onClick:function(){return c(e.id)},className:"shadow-2xl flex flex-start bg-white p-2 mt-2",children:[(0,Me.jsx)("span",{className:"mr-3 my-auto",children:e.id}),(0,Me.jsxs)("p",{to:"",className:"my-auto",children:["\u09b8\u09c2\u09b0\u09be\u09b9 ",e.name]})]})}))}),(0,Me.jsx)("div",{className:"bg-red-100",children:i.map((function(e){return(0,Me.jsxs)("div",{onClick:function(){return c(e.id)},className:"shadow-2xl flex justify-between bg-white p-2 mt-2",children:[(0,Me.jsx)("span",{className:"mr-3 my-auto",children:e.name_arabic}),(0,Me.jsx)("span",{className:"mr-3 my-auto",children:"makkah"===e.revelation_place?"\u09ae\u09be\u0995\u09cd\u0995\u09c0":"\u09ae\u09be\u09a6\u09be\u09a8\u09bf"}),(0,Me.jsxs)("p",{to:"",className:"my-auto",children:["\u0986\u09df\u09be\u09a4\u0983",e.verses_count,"  "]})]})}))})]})]})},Vb=function(){var e=function(){var e=(0,a.useContext)(x).matches,t=e[e.length-1];return t?t.params:{}}(),t=e.surahId,n=u((0,a.useState)([]),2),r=n[0],i=n[1],s=u((0,a.useState)([]),2),o=s[0],c=s[1],l=o.name;return console.log(l),(0,a.useEffect)((function(){fetch("https://alquranbd.com/api/tafheem/sura/list").then((function(e){return e.json()})).then((function(e){var n=e.filter((function(e){return e.id===t}));c(n[0])}))}),[]),(0,a.useEffect)((function(){fetch("https://api.quran.com/api/v4/quran/verses/uthmani?chapter_number=".concat(t)).then((function(e){return e.json()})).then((function(e){console.log(e.verses),i(e.verses)}))}),[t]),(0,Me.jsxs)("div",{className:"bg-yellow-100 h-full",children:[(0,Me.jsxs)("h1",{className:"text-2xl font-bold bg-yellow-100 pt-24",children:["\u09b8\u09c2\u09b0\u09be\u09b9 ",l]}),(0,Me.jsx)("div",{className:"px-4 mt-6 text-justify",children:r.map((function(e,t){return(0,Me.jsxs)("span",{style:{fontFamily:"arabic_unicode"},className:"text-4xl",children:[e.text_uthmani,(0,Me.jsx)("span",{style:{backgroundColor:"rgba(0,127,174,.3)"},className:"p-1 rounded-full text-xs mx-2 ",children:t+1})]})}))})]})},Hb=__webpack_require__(945),zb=__webpack_require__.n(Hb),Wb=(__webpack_require__.p,function(){var e=ju(),t=u((0,a.useState)(!0),2),n=t[0],r=t[1];return(0,a.useEffect)((function(){fetch("http://128.140.52.151:5000/getboyans").then((function(e){return e.json()})).then((function(t){e(Ad(t)),r(!1)}))}),[e]),n?(0,Me.jsx)(je,{}):(0,Me.jsxs)("div",{style:{backgroundImage:"url(".concat(Gd,")"),backgroundPosition:"center",backgroundSize:"cover",backgroundRepeat:"no-repeat"},className:"mt-16 mb-20 h-screen",children:[(0,Me.jsx)("h1",{className:"my-8 bg-black bg-opacity-40  text-white font-bold text-xl p-5",children:"\u09ac\u09df\u09be\u09a8\u09c7\u09b0 \u09ac\u09bf\u09ad\u09be\u0997 \u09ac\u09be\u099b\u09be\u0987 \u0995\u09b0\u09c1\u09a8"}),(0,Me.jsxs)("div",{className:"grid grid-cols-2 mx-4",children:[(0,Me.jsxs)(Xe,{onClick:function(){return e(Id("all"))},"data-aos":"zoom-in",to:"/mobile_boyans",className:" bg-black bg-opacity-40 text-white  p-3  mt-4 text-sm te mx-2 shadow-md flex justify-left items-center rounded-lg font-bold hover:bg-white hover:text-black",children:[(0,Me.jsx)(It,{})," \u09b8\u0995\u09b2 \u09a7\u09b0\u09a8\u09c7\u09b0 \u09ac\u09df\u09be\u09a8"]}),(0,Me.jsxs)(Xe,{onClick:function(){return e(Id("\u099c\u09c1\u09ae'\u0986\u09b0 \u09ac\u09df\u09be\u09a8"))},"data-aos":"zoom-in",to:"/mobile_boyans",className:" bg-black bg-opacity-40 p-3 text-white  mt-4 text-sm te mx-2 shadow-md flex justify-left items-center rounded-lg font-bold hover:bg-white hover:text-black",children:[(0,Me.jsx)(It,{})," \u099c\u09c1\u09ae\u0986\u09b0 \u09ae\u09b8\u099c\u09bf\u09a6\u09c7\u09b0 \u09ac\u09df\u09be\u09a8"]}),(0,Me.jsxs)(Xe,{onClick:function(){return e(Id("\u099c\u09c1\u09ae'\u0986\u09b0 \u09aa\u09b0\u09c7\u09b0 \u09ac\u09df\u09be\u09a8"))},"data-aos":"zoom-in",to:"/mobile_boyans",className:"bg-black bg-opacity-40 p-3 text-white  mt-4 text-sm te mx-2 shadow-md flex justify-left items-center rounded-lg font-bold hover:bg-white hover:text-black",children:[(0,Me.jsx)(It,{})," \u099c\u09c1\u09ae\u0986\u09b0 \u09aa\u09b0\u09c7\u09b0 \u09ac\u09df\u09be\u09a8"]}),(0,Me.jsxs)(Xe,{onClick:function(){return e(Id("\u09ae\u09be\u09b8\u09bf\u0995 \u0987\u099c\u09a4\u09c7\u09ae\u09be\u09b0 \u09ac\u09df\u09be\u09a8"))},"data-aos":"zoom-in",to:"/mobile_boyans",className:" bg-black bg-opacity-40 p-3 text-white  mt-4 text-sm te mx-2 shadow-md flex justify-left items-center rounded-lg font-bold hover:bg-white hover:text-black",children:[(0,Me.jsx)(It,{})," \u09ae\u09be\u09b8\u09bf\u0995 \u0987\u099c\u09a4\u09c7\u09ae\u09be\u09b0 \u09ac\u09df\u09be\u09a8"]}),(0,Me.jsxs)(Xe,{onClick:function(){return e(Id("\u09ae\u09be\u09b9\u09ab\u09bf\u09b2\u09c7\u09b0 \u09ac\u09df\u09be\u09a8"))},"data-aos":"zoom-in",to:"/mobile_boyans",className:" bg-black bg-opacity-40 p-3 text-white  mt-4 text-sm te mx-2 shadow-md flex justify-left items-center rounded-lg font-bold hover:bg-white hover:text-black",children:[(0,Me.jsx)(It,{})," \u09ac\u09bf\u09ad\u09bf\u09a8\u09cd\u09a8 \u09ae\u09be\u09b9\u09ab\u09bf\u09b2\u09c7\u09b0 \u09ac\u09df\u09be\u09a8"]}),(0,Me.jsxs)(Xe,{onClick:function(){return e(Id("\u09b8\u09be\u09aa\u09cd\u09a4\u09be\u09b9\u09bf\u0995 \u09a4\u09b0\u09ac\u09bf\u09df\u09a4\u09bf \u09ae\u099c\u09b2\u09bf\u09b6"))},"data-aos":"zoom-in",to:"/mobile_boyans",className:" bg-black bg-opacity-40 p-3 text-white  mt-4 text-sm te mx-2 shadow-md flex justify-left items-center rounded-lg font-bold hover:bg-white hover:text-black",children:[(0,Me.jsx)(It,{})," \u09b8\u09be\u09aa\u09cd\u09a4\u09be\u09b9\u09bf\u0995 \u09a4\u09b0\u09ac\u09bf\u09df\u09a4\u09bf \u09ae\u099c\u09b2\u09bf\u09b8"]}),(0,Me.jsxs)(Xe,{"data-aos":"zoom-in",to:"/boyan_subject",className:" bg-black bg-opacity-40 p-3 text-white  mt-4 text-sm te mx-2 shadow-md flex justify-left items-center rounded-lg font-bold hover:bg-white hover:text-black",children:[(0,Me.jsx)(It,{})," \u09ac\u09bf\u09b7\u09df \u09ad\u09bf\u09a4\u09cd\u09a4\u09bf\u0995 \u09ac\u09df\u09be\u09a8"]}),(0,Me.jsxs)(Xe,{"data-aos":"zoom-in",to:"/boyan_month",className:" bg-black bg-opacity-40 p-3 text-white  mt-4 text-sm te mx-2 shadow-md flex justify-left items-center rounded-lg font-bold hover:bg-white hover:text-black",children:[(0,Me.jsx)(It,{})," \u09ae\u09be\u09b8 \u09ad\u09bf\u09a4\u09cd\u09a4\u09bf\u0995 \u09ac\u09df\u09be\u09a8"]})]})]})}),Kb=function(){var e=ju(),t=u((0,a.useState)(!0),2),n=t[0],r=t[1],i=u((0,a.useState)([]),2),s=i[0],o=i[1];return(0,a.useEffect)((function(){fetch("http://128.140.52.151:5000/getboyans").then((function(e){return e.json()})).then((function(t){e(Ad(t)),r(!1)}))}),[e]),(0,a.useEffect)((function(){fetch("http://128.140.52.151:5000/getsubjects").then((function(e){return e.json()})).then((function(e){o(e),r(!1)}))}),[e]),n?(0,Me.jsx)(je,{}):(0,Me.jsxs)("div",{style:{backgroundImage:"url(".concat(Gd,")"),backgroundPosition:"center",backgroundSize:"cover",backgroundRepeat:"no-repeat"},className:"mt-16 mb-20 h-screen",children:[(0,Me.jsx)("h1",{className:"my-8 bg-black bg-opacity-40  text-white font-bold text-xl p-5",children:"\u09ac\u09df\u09be\u09a8\u09c7\u09b0 \u09ac\u09bf\u09b7\u09df \u09ac\u09be\u099b\u09be\u0987 \u0995\u09b0\u09c1\u09a8"}),(0,Me.jsx)("div",{className:"grid grid-cols-2 mx-4",children:s.map((function(t){return(0,Me.jsxs)(Xe,{onClick:function(){return e(Pd(t.subjectName))},"data-aos":"zoom-in",to:"/mobile_boyans",className:" bg-black bg-opacity-40 text-white text-sm p-3  mt-4 te mx-2 shadow-md flex justify-left items-center rounded-lg font-bold hover:bg-white hover:text-black",children:[(0,Me.jsx)(It,{}),t.subjectName]})}))})]})},qb=function(){var e=u((0,a.useState)([]),2),t=e[0],n=e[1];(0,a.useEffect)((function(){fetch("http://128.140.52.151:5000/getsubjects").then((function(e){return e.json()})).then((function(e){n(e)}))}),[t]);return(0,Me.jsxs)("div",{className:"",children:[(0,Me.jsx)("h1",{className:"text-3xl border-b-4 border-accent mt-28 inline-block",children:"\u098f\u0995\u099f\u09bf \u09a8\u09a4\u09c1\u09a8 \u09ac\u09df\u09be\u09a8\u09c7\u09b0 \u09ac\u09bf\u09b7\u09df \u09af\u09cb\u0997 \u0995\u09b0\u09c1\u09a8"}),(0,Me.jsxs)("form",{onSubmit:function(e){e.preventDefault();var t=e.target.subject.value;console.log(t);var n={subjectName:t};fetch("http://128.140.52.151:5000/addsubjects",{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify(n)}).then((function(e){return e.json()})).then((function(t){console.log(t),e.target.reset()}))},className:"mt-16 flex justify-center items-center flex-col",children:[(0,Me.jsxs)("div",{class:"form-control w-80",children:[(0,Me.jsx)("label",{class:"label",children:(0,Me.jsx)("span",{class:"label-text",children:"\u09ac\u09bf\u09b7\u09df\u09c7\u09b0 \u09a8\u09be\u09ae"})}),(0,Me.jsx)("input",{name:"subject",type:"text",placeholder:"\u09ac\u09bf\u09b7\u09df\u09c7\u09b0 \u09a8\u09be\u09ae \u09b2\u09bf\u0996\u09c1\u09a8",class:"input input-bordered w-full max-w-xs"})]}),(0,Me.jsx)("button",{className:"btn btn-md btn-accent text-white mt-4 rounded-md",type:"submit",children:"\u09ac\u09bf\u09b7\u09df \u09af\u09cb\u0997 \u0995\u09b0\u09c1\u09a8"})]}),(0,Me.jsx)("div",{class:"overflow-x-auto my-8",children:(0,Me.jsxs)("table",{class:"table w-full",children:[(0,Me.jsx)("thead",{children:(0,Me.jsxs)("tr",{children:[(0,Me.jsx)("th",{children:"\u0995\u09cd\u09b0\u09ae\u09bf\u0995"}),(0,Me.jsx)("th",{children:"\u09ac\u09bf\u09b7\u09df\u09c7\u09b0 \u09a8\u09be\u09ae"}),(0,Me.jsx)("th",{children:"\u098f\u0995\u09b6\u09a8"})]})}),(0,Me.jsx)("tbody",{children:t.map((function(e,t){return(0,Me.jsxs)("tr",{children:[(0,Me.jsx)("td",{children:t+1}),(0,Me.jsx)("td",{children:e.subjectName}),(0,Me.jsx)("td",{children:(0,Me.jsx)("button",{className:"btn btn-xs btn-error text-white",children:"\u09ae\u09c1\u099b\u09c7 \u09ab\u09c7\u09b2\u09c1\u09a8"})})]})}))})]})})]})},Yb=function(){var e=u((0,a.useState)(""),2),t=e[0],n=e[1];console.log(t);return(0,Me.jsxs)("div",{children:[(0,Me.jsx)("h1",{className:"text-3xl border-b-4 border-accent mt-28 inline-block",children:"\u098f\u0995\u099f\u09bf \u09a8\u09a4\u09c1\u09a8 \u0995\u09ac\u09bf\u09a4\u09be\u09b0 \u0993\u09a1\u09bf\u0993 \u09af\u09cb\u0997 \u0995\u09b0\u09c1\u09a8"}),(0,Me.jsxs)("form",{onSubmit:function(e){e.preventDefault();var n=e.target.name.value,r=e.target.writer.value,i=e.target.singer.value,a=e.target.date_time.value,s="https://docs.google.com/uc?export=download&id=".concat(t),o={name:n,writer:r,singer:i,date_time:a,link:s,mainCategory:"kobita"};fetch("http://128.140.52.151:5000/addkobita",{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify(o)}).then((function(e){return e.json()})).then((function(t){Le.success("\u0995\u09ac\u09bf\u09a4\u09be \u09af\u09cb\u0997 \u09b9\u09df\u09c7\u099b\u09c7"),console.log(t),e.target.reset(),function(){var e={app_id:"1daf2556-5bbc-44d3-956a-e56318d29698",included_segments:["Subscribed Users"],data:{foo:"bar"},contents:{en:"\u0986\u09b0\u09bf\u09ab \u09ac\u09bf\u09b2\u09cd\u09b2\u09be\u09b9 \u09b9\u099c\u09b0\u09a4 \u09ae\u09be\u0993\u09b2\u09be\u09a8\u09be \u09ae\u09c1\u09ab\u09a4\u09bf \u09b6\u09ab\u09c0 \u09b8\u09be\u09b9\u09c7\u09ac\u09c7\u09b0 \u09b2\u09bf\u0996\u09bf\u09a4 \u0995\u09ac\u09bf\u09a4\u09be ".concat(n,", \u0995\u09a3\u09cd\u09a0 \u09a6\u09bf\u09df\u09c7\u099b\u09c7\u09a8 ").concat(i,", \u09af\u09cb\u0997 \u09b9\u09df\u09c7\u099b\u09c7 \u098f\u0996\u09a8\u0987 \u09b6\u09c1\u09a8\u09c1\u09a8")}};fetch("https://onesignal.com/api/v1/notifications",{method:"POST",url:"https://onesignal.com/api/v1",headers:{"Content-Type":"application/json",Authorization:"Basic ".concat("NDM0YjVhMDItYzI2MC00NTVmLWI5MjYtZmRiYWJhY2UyYzIz")},body:e?JSON.stringify(e):null}).then((function(e){return e.json()})).then((function(e){console.log(e)}))}()})),fetch("http://128.140.52.151:5000/latest",{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify(o)}).then((function(e){return e.json()})).then((function(e){console.log(e)}))},className:"mt-8 flex justify-center items-center flex-col",children:[(0,Me.jsxs)("div",{class:"form-control w-80",children:[(0,Me.jsx)("label",{class:"label",children:(0,Me.jsx)("span",{class:"label-text",children:"\u0993\u09a1\u09bf\u0993 \u09ab\u09be\u0987\u09b2"})}),(0,Me.jsx)("input",{type:"file",id:"customFile",placeholder:"\u0993\u09a1\u09bf\u0993 \u09ab\u09be\u0987\u09b2",onChange:function(e){return function(e){var t=e.target.files[0],r=new FileReader;r.readAsDataURL(e.target.files[0]),r.onload=function(e){var i={dataReq:{data:r.result.split(",")[1],name:t.name,type:t.type},fname:"uploadFilesToGoogleDrive"};fetch("https://script.google.com/macros/s/AKfycbwYKgy85mYgpiT7U3mV2T6vum0yKg_I-AAJegLuNfeosEO_HligOW_ic_M1mW8pUqk/exec",{method:"POST",body:JSON.stringify(i)}).then((function(e){return e.json()})).then((function(e){e.id&&(Le.success("\u09ab\u09be\u0987\u09b2 \u0986\u09aa\u09b2\u09cb\u09a1 \u09b9\u09df\u09c7\u099b\u09c7"),n(e.id),console.log(e.id))})).catch((function(e){return console.log(e)}))}}(e)}})]}),(0,Me.jsxs)("div",{class:"form-control w-80",children:[(0,Me.jsx)("label",{class:"label",children:(0,Me.jsx)("span",{class:"label-text",children:"\u0995\u09ac\u09bf\u09a4\u09be\u09b0 \u09a8\u09be\u09ae"})}),(0,Me.jsx)("input",{name:"name",type:"text",placeholder:"\u0995\u09ac\u09bf\u09a4\u09be\u09b0 \u09a8\u09be\u09ae \u09b2\u09bf\u0996\u09c1\u09a8",class:"input input-bordered w-full max-w-xs"})]}),(0,Me.jsxs)("div",{class:"form-control w-80",children:[(0,Me.jsx)("label",{class:"label",children:(0,Me.jsx)("span",{class:"label-text",children:"\u0995\u09ac\u09bf\u09a4\u09be\u09b0 \u09b2\u09c7\u0996\u0995"})}),(0,Me.jsx)("input",{name:"writer",type:"text",placeholder:"\u09b2\u09c7\u0996\u0995\u09c7\u09b0 \u09a8\u09be\u09ae \u09b2\u09bf\u0996\u09c1\u09a8",class:"input input-bordered w-full max-w-xs"})]}),(0,Me.jsxs)("div",{class:"form-control w-80",children:[(0,Me.jsx)("label",{class:"label",children:(0,Me.jsx)("span",{class:"label-text",children:"\u0995\u09a3\u09cd\u09a0"})}),(0,Me.jsx)("input",{name:"singer",type:"text",placeholder:"\u09b6\u09bf\u09b2\u09cd\u09aa\u09c0\u09b0 \u09a8\u09be\u09ae \u09b2\u09bf\u0996\u09c1\u09a8",class:"input input-bordered w-full max-w-xs"})]}),(0,Me.jsxs)("div",{class:"form-control w-80",children:[(0,Me.jsx)("label",{class:"label",children:(0,Me.jsx)("span",{class:"label-text",children:"\u0995\u09ac\u09bf\u09a4\u09be \u09b2\u09c7\u0996\u09be\u09b0 \u09a4\u09be\u09b0\u09bf\u0996 \u0993 \u09b8\u09ae\u09df"})}),(0,Me.jsx)("input",{name:"date_time",type:"text",placeholder:"\u09a4\u09be\u09b0\u09bf\u0996 \u0993 \u09b8\u09ae\u09df",class:"input input-bordered w-full max-w-xs"})]}),(0,Me.jsx)("button",{disabled:!t,className:"btn btn-md btn-accent text-white my-4 rounded-md",type:"submit",children:"\u0995\u09ac\u09bf\u09a4\u09be \u09af\u09cb\u0997 \u0995\u09b0\u09c1\u09a8"})]})]})};function Jb(e){return wt({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M277.8 294.8c-.5 0-1.1-.1-1.6-.1-2.6 0-5.2 0-7.8.3-9.3-40.8-45.9-71.5-89.7-71.5-50.8 0-91.9 40.9-91.9 91.4 0 3.1.2 6.1.5 9.1-31 2.7-55.3 30.1-55.3 61.6C32 419 58.8 448 92.3 448h185.5c41.9 0 75.8-34.7 75.8-76.3 0-41.6-33.9-76.9-75.8-76.9z"}},{tag:"path",attr:{d:"M452.1 305.4c-2.5.1-5 .2-7.6.2-41.7 0-80.8-15.7-110.3-44.3-29.5-28.5-45.7-66.5-45.7-106.8 0-23 5.3-45.2 15.2-65.3L315.4 70c1.7-2.9-.8-6.5-4.1-6-7.6 1.2-15.7 4-23.2 6.3-59.5 18.2-104.4 68.1-113.7 129.3 1.4-.1 2.9-.1 4.3-.1 26.5 0 52.4 9.2 73 25.9 15.1 12.2 26.9 28 34.2 45.7 23.7 2 45.7 12.4 62.7 29.8 18.7 19.1 29 44.2 29 70.7 0 2.3-.1 4.6-.2 6.8 34.2-8.1 64.3-26.6 86.4-51.8 4.8-5.5 11.3-12.8 15.3-18.5 2-2.8-.3-6.7-3.8-6.3-6.8 1-15.9 3.2-23.2 3.6z"}}]})(e)}function Qb(e){return wt({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M123.4 183c.4-.1.8-.1 1.2-.2-.5.1-.8.2-1.2.2zM341.5 303.4C330.7 247.7 282.2 206 224 206c-34 0-65.1 12-86.5 39.1 29.4 2.2 56.7 13.1 77.7 34.2 15.6 15.7 26.6 34.9 32.1 55.8h-28.7c-13.1-37.6-48-64.5-90.6-64.5-5.1 0-12.3.6-17.7 1.7-45.7 9.4-78.3 47.6-78.3 95 0 53.4 43 96.8 96 96.8h208c44.1 0 80-36.1 80-80.6-.1-42.7-32.9-77.2-74.5-80.1z"}},{tag:"path",attr:{d:"M112.5 225.4c13.6-17.3 30.7-30.5 50.8-39.2 18.4-8 38.8-12 60.7-12 6.1 0 12.2.4 18.2 1.1-6.1-18.1-9.4-37.6-9.4-57.8 0-24.6 4.9-48.1 13.8-69.4C161.9 68.7 99 145.7 99 237.3c0 1.6 0 3.2.1 4.8.1 0 .2-.1.3-.1l13.1-16.6zM417.6 306.8c13.3 14.2 22.6 31.5 27.1 50.1 16.5-21.4 28.7-46.4 35.3-73.5-21.2 9-44.5 13.9-68.9 13.9h-3.6c3.5 2.9 6.9 6.1 10.1 9.5z"}}]})(e)}function Xb(e){return wt({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M277.3 32h-42.7v64h42.7V32zm129.1 43.7L368 114.1l29.9 29.9 38.4-38.4-29.9-29.9zm-300.8 0l-29.9 29.9 38.4 38.4 29.9-29.9-38.4-38.4zM256 128c-70.4 0-128 57.6-128 128s57.6 128 128 128 128-57.6 128-128-57.6-128-128-128zm224 106.7h-64v42.7h64v-42.7zm-384 0H32v42.7h64v-42.7zM397.9 368L368 397.9l38.4 38.4 29.9-29.9-38.4-38.4zm-283.8 0l-38.4 38.4 29.9 29.9 38.4-38.4-29.9-29.9zm163.2 48h-42.7v64h42.7v-64z"}}]})(e)}function Zb(e){return wt({tag:"svg",attr:{viewBox:"0 0 20 20",fill:"currentColor"},child:[{tag:"path",attr:{d:"M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z"}}]})(e)}var $b=function(){var e,t,n,r,i,s,o,c,l,d,h,f=u((0,a.useState)([]),2),p=f[0],v=f[1],m=u((0,a.useState)(""),2),g=m[0],y=m[1],b=u((0,a.useState)(""),2),k=b[0],x=b[1],w=p.timings;console.log();var T=(null===w||void 0===w?void 0:w.Asr.slice(0,2))-12+(null===w||void 0===w?void 0:w.Asr.slice(2,5)),E=(null===w||void 0===w?void 0:w.Sunset.slice(0,2))-12+(null===w||void 0===w?void 0:w.Sunset.slice(2,5)),_=(null===w||void 0===w?void 0:w.Maghrib.slice(0,2))-12+(null===w||void 0===w?void 0:w.Maghrib.slice(2,5)),S=(null===w||void 0===w?void 0:w.Isha.slice(0,2))-12+(null===w||void 0===w?void 0:w.Isha.slice(2,5)),A=(null===w||void 0===w?void 0:w.Firstthird.slice(0,2))-12+(null===w||void 0===w?void 0:w.Firstthird.slice(2,5)),C=function(){var e=new Date,t=e.getDate(),n=e.getMonth()+1,r=e.getFullYear();navigator.geolocation&&navigator.geolocation.getCurrentPosition((function(e){var i=e.coords.latitude,a=e.coords.longitude,s="https://api.aladhan.com/v1/calendar?latitude=".concat(i,"&longitude=").concat(a,"&method=1&school=1&month=").concat(n,"&year=").concat(r);fetch(s).then((function(e){return e.json()})).then((function(e){var n=null===e||void 0===e?void 0:e.data;v(n[t-1])}));var o="https://maps.googleapis.com/maps/api/geocode/json?latlng=".concat(i,",").concat(a,"&key=").concat("AIzaSyD0dYm6BbM5H62QdoYq_kfC_Jk6oNait5Y");fetch(o).then((function(e){return e.json()})).then((function(e){var t=e.results[0].address_components[1].long_name,n=e.results[0].address_components[2].long_name;y(t),x(n)}))}))};return(0,a.useEffect)((function(){C()}),[]),(0,Me.jsx)("div",{children:w?(0,Me.jsxs)("div",{style:{backgroundImage:"url(".concat(Gd,")"),backgroundPosition:"center",backgroundSize:"cover",backgroundRepeat:"no-repeat"},className:"mt-16 mb-20 h-screen",children:[(0,Me.jsx)("h1",{className:"text-2xl mt-2 bg-black bg-opacity-40 text-white font-bold",children:"\u09a8\u09be\u09ae\u09be\u099c\u09c7\u09b0 \u09b8\u09ae\u09df\u09b8\u09c2\u099a\u09c0"}),(0,Me.jsxs)("h1",{className:"font-bold bg-black bg-opacity-40 text-white",children:["\u0986\u099c ",null===p||void 0===p||null===(e=p.date)||void 0===e||null===(t=e.gregorian)||void 0===t||null===(n=t.weekday)||void 0===n?void 0:n.en," (",null===p||void 0===p||null===(r=p.date)||void 0===r?void 0:r.readable," \u0987\u0982) (",null===p||void 0===p||null===(i=p.date)||void 0===i||null===(s=i.hijri)||void 0===s?void 0:s.day," ",null===p||void 0===p||null===(o=p.date)||void 0===o||null===(c=o.hijri)||void 0===c||null===(l=c.month)||void 0===l?void 0:l.en," ",null===p||void 0===p||null===(d=p.date)||void 0===d||null===(h=d.hijri)||void 0===h?void 0:h.year," \u09b9\u09bf\u099c\u09b0\u09bf)"]}),(0,Me.jsxs)("h1",{className:"text-sm bg-black bg-opacity-40 text-white",children:["\u0986\u09aa\u09a8\u09be\u09b0 \u0985\u09ac\u09b8\u09cd\u09a5\u09be\u09a8\u0983 ",g+", "+k]}),(0,Me.jsx)("button",{onClick:function(){return C()},className:"btn btn-xs btn-white my-2",children:"\u09b8\u09cd\u09a5\u09be\u09a8 \u09aa\u09c1\u09a8\u09b0\u09be\u09df \u09b8\u09c7\u099f \u0995\u09b0\u09c1\u09a8"}),(0,Me.jsxs)("div",{className:"flex justify-between items-center p-3 shadow-md bg-black bg-opacity-40 text-white rounded mb-2 w-11/12 mx-auto ",children:[(0,Me.jsxs)("div",{className:"flex justify-center items-center",children:[(0,Me.jsx)(Lb,{className:"text-2xl"}),(0,Me.jsx)("h1",{className:"ml-2",children:" \u09ab\u099c\u09b0"})]}),(0,Me.jsxs)("h1",{className:"",children:["\u09ad\u09cb\u09b0 ",null===w||void 0===w?void 0:w.Fajr.slice(0,-5)," AM"]})]}),(0,Me.jsxs)("div",{className:"flex justify-between items-center p-3 shadow-md bg-black bg-opacity-40 text-white rounded mb-2 w-11/12 mx-auto ",children:[(0,Me.jsxs)("div",{className:"flex justify-center items-center",children:[(0,Me.jsx)(Lb,{className:"text-2xl"}),(0,Me.jsx)("h1",{className:"ml-2",children:" \u09b8\u09c2\u09b0\u09cd\u09af\u09cb\u09a6\u09df"})]}),(0,Me.jsxs)("h1",{className:"",children:["\u09b8\u0995\u09be\u09b2 ",null===w||void 0===w?void 0:w.Sunrise.slice(0,-5)," AM"]})]}),(0,Me.jsxs)("div",{className:"flex justify-between items-center p-3 shadow-md bg-black bg-opacity-40 text-white rounded mb-2 w-11/12 mx-auto ",children:[(0,Me.jsxs)("div",{className:"flex justify-center items-center",children:[(0,Me.jsx)(Ob,{className:"text-2xl"}),(0,Me.jsx)("h1",{className:"ml-2",children:" \u09af\u09cb\u09b9\u09b0"})]}),(0,Me.jsxs)("h1",{className:"",children:["\u09a6\u09c1\u09aa\u09c1\u09b0 ",null===w||void 0===w?void 0:w.Dhuhr.slice(0,-5)," PM"]})]}),(0,Me.jsxs)("div",{className:"flex justify-between items-center p-3 shadow-md bg-black bg-opacity-40 text-white rounded mb-2 w-11/12 mx-auto ",children:[(0,Me.jsxs)("div",{className:"flex justify-center items-center",children:[(0,Me.jsx)(Xb,{className:"text-2xl"}),(0,Me.jsx)("h1",{className:"ml-2",children:" \u0986\u09b8\u09b0"})]}),(0,Me.jsxs)("h1",{className:"",children:["\u09ac\u09bf\u0995\u09be\u09b2 0",T," PM"]})]}),(0,Me.jsxs)("div",{className:"flex justify-between items-center p-3 shadow-md bg-black bg-opacity-40 text-white rounded mb-2 w-11/12 mx-auto ",children:[(0,Me.jsxs)("div",{className:"flex justify-center items-center",children:[(0,Me.jsx)(Dt,{className:"text-2xl"}),(0,Me.jsx)("h1",{className:"ml-2",children:" \u09b8\u09c2\u09b0\u09cd\u09af\u09be\u09b8\u09cd\u09a4"})]}),(0,Me.jsxs)("h1",{className:"",children:["\u09b8\u09a8\u09cd\u09a7\u09cd\u09af\u09be 0",E," PM"]})]}),(0,Me.jsxs)("div",{className:"flex justify-between items-center p-3 shadow-md bg-black bg-opacity-40 text-white rounded mb-2 w-11/12 mx-auto ",children:[(0,Me.jsxs)("div",{className:"flex justify-center items-center",children:[(0,Me.jsx)(Dt,{className:"text-2xl"}),(0,Me.jsx)("h1",{className:"ml-2",children:" \u09ae\u09be\u0997\u09b0\u09bf\u09ac"})]}),(0,Me.jsxs)("h1",{className:"",children:["\u09b8\u09a8\u09cd\u09a7\u09cd\u09af\u09be 0",_," PM"]})]}),(0,Me.jsxs)("div",{className:"flex justify-between items-center p-3 shadow-md bg-black bg-opacity-40 text-white rounded mb-2 w-11/12 mx-auto ",children:[(0,Me.jsxs)("div",{className:"flex justify-center items-center",children:[(0,Me.jsx)(Zb,{className:"text-2xl"}),(0,Me.jsx)("h1",{className:"ml-2",children:" \u0988\u09b6\u09be"})]}),(0,Me.jsxs)("h1",{className:"",children:["\u09b0\u09be\u09a4 0",S," PM"]})]}),(0,Me.jsxs)("div",{className:"flex justify-between items-center p-3 shadow-md bg-black bg-opacity-40 text-white rounded mb-2 w-11/12 mx-auto ",children:[(0,Me.jsxs)("div",{className:"flex justify-center items-center",children:[(0,Me.jsx)(Jb,{className:"text-2xl"}),(0,Me.jsx)("h1",{className:"ml-2",children:" \u09b0\u09be\u09a4\u09c7\u09b0 \u09e8\u09df \u0985\u0982\u09b6 \u09b6\u09c1\u09b0\u09c1"})]}),(0,Me.jsxs)("h1",{className:"",children:["\u09b0\u09be\u09a4 ",A," PM"]})]}),(0,Me.jsxs)("div",{className:"flex justify-between items-center p-3 shadow-md bg-black bg-opacity-40 text-white rounded mb-2 w-11/12 mx-auto ",children:[(0,Me.jsxs)("div",{className:"flex justify-center items-center",children:[(0,Me.jsx)(Qb,{className:"text-2xl"}),(0,Me.jsx)("h1",{className:"ml-2",children:" \u09b0\u09be\u09a4\u09c7\u09b0 \u09b6\u09c7\u09b7 \u0985\u0982\u09b6 \u09b6\u09c1\u09b0\u09c1"})]}),(0,Me.jsxs)("h1",{className:"",children:["\u09b0\u09be\u09a4 ",null===w||void 0===w?void 0:w.Lastthird.slice(0,-5)," AM"]})]}),(0,Me.jsxs)("div",{className:"flex justify-between items-center p-3 shadow-md bg-black bg-opacity-40 text-white rounded mb-2 w-11/12 mx-auto ",children:[(0,Me.jsxs)("div",{className:"flex justify-center items-center",children:[(0,Me.jsx)(Db,{className:"text-2xl"}),(0,Me.jsx)("h1",{className:"ml-2",children:" \u09a4\u09be\u09b9\u09be\u099c\u09cd\u099c\u09c1\u09a6\u09c7\u09b0 \u09b6\u09c7\u09b7 \u09b8\u09ae\u09df"})]}),(0,Me.jsxs)("h1",{className:"",children:["\u09ad\u09cb\u09b0 ",null===w||void 0===w?void 0:w.Imsak.slice(0,-5)," AM"]})]})]}):(0,Me.jsx)(je,{})})},ek=function(e){Fb(e);var t=u((0,a.useState)([]),2),n=t[0],r=t[1],i=u((0,a.useState)(0),2),s=i[0],o=i[1],c=u((0,a.useState)(0),2),l=(c[0],c[1]),d=u((0,a.useState)(8),2),h=(d[0],d[1]);(0,a.useEffect)((function(){fetch("http://128.140.52.151:5000/getbooks").then((function(e){return e.json()})).then((function(e){r(e)}))}),[]),(0,a.useEffect)((function(){o(Math.ceil(n.length/8))}),[n.length]);var f=0,p=8;return(0,Me.jsxs)("div",{"data-aos":"fade-right",className:"w-10/12 lg:w-11/12 mx-auto mt-16 relative bg-white text-black",children:[(0,Me.jsx)("h1",{className:"text-xl border-b-4 border-accent font-bold mt-8 inline-block",children:"\u09ac\u0987 \u09b8\u09ae\u09c2\u09b9"}),(0,Me.jsx)("br",{}),(0,Me.jsx)("hr",{}),(0,Me.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-5",children:n.map((function(e){return(0,Me.jsxs)("div",{className:"shadow-xl flex flex-col justify-center items-center bg-white hover:shadow-accent active:shadow-red-400 p-5 rounded-r-3xl rounded-tl-3xl text-left relative",children:[(0,Me.jsx)("img",{className:"w-40",src:e.img,alt:""}),(0,Me.jsxs)("p",{className:"mt-4 font-bold",children:["\u09a8\u09be\u09ae\u0983 ",null===e||void 0===e?void 0:e.name]}),(0,Me.jsxs)("p",{className:" font-medium",children:["\u09b2\u09c7\u0996\u0995\u0983 ",null===e||void 0===e?void 0:e.writer]}),(0,Me.jsx)("label",{class:"btn btn-accent text-white font-bold mt-2",children:(0,Me.jsx)("a",{href:e.link,children:"\u09a1\u09be\u0989\u09a8\u09b2\u09cb\u09a1"})})]})}))}),(0,Me.jsx)("div",{className:"mt-8 mb-20",children:n.length>8&&(0,Me.jsx)(Be(),{previousLabel:"\u09aa\u09c2\u09b0\u09cd\u09ac\u09ac\u09b0\u09cd\u09a4\u09c0",nextLabel:"\u09aa\u09b0\u09ac\u09b0\u09cd\u09a4\u09c0",breakLabel:"...",pageCount:s,marginPagesDisplayed:3,pageRangeDisplayed:6,onPageChange:function(e){f=e.selected+1<3?f*e.selected+8:f*e.selected+8+8,e.selected+1<=1&&(f=0,p=8),p=p*e.selected+8,l(f),h(p),window.scrollTo(0,0)},containerClassName:"btn-group justify-center",pageClassName:"btn btn-accent text-white",activeClassName:"btn bg-white text-black",previousClassName:"btn btn-accent text-white",nextClassName:"btn btn-accent text-white",breakClassName:"btn btn-accent text-white"})})]})},tk=function(e){var t=e.boyan,n=e.setUpdateAudio,r=e.index;return(0,Me.jsxs)("tr",{className:"hover",children:[(0,Me.jsx)("td",{children:r+1}),(0,Me.jsx)("td",{children:t.date}),(0,Me.jsx)("td",{children:t.name}),(0,Me.jsx)("td",{children:t.category}),(0,Me.jsx)("td",{children:null===t||void 0===t?void 0:t.subject}),(0,Me.jsx)("td",{children:"User"}),(0,Me.jsx)("td",{children:(0,Me.jsx)("label",{for:"update-modal",onClick:function(){return n(t)},className:"btn btn-primary btn-xs",children:"\u09aa\u09b0\u09bf\u09ac\u09b0\u09cd\u09a4\u09a8"})}),(0,Me.jsx)("td",{children:(0,Me.jsx)("button",{onClick:function(){window.confirm("Ary You Sure Want To Delete")&&fetch("http://128.140.52.151:5000/getboyans/".concat(t._id),{method:"DELETE"}).then((function(e){return e.json()})).then((function(e){console.log(e),n(null),Le("Deleted Successful")}))},className:"btn btn-warning btn-xs",children:"\u09ae\u09c1\u099b\u09c1\u09a8"})})]})},nk=["name"],rk=["_f"],ik=["_f"],ak=function(e){return"checkbox"===e.type},sk=function(e){return e instanceof Date},ok=function(e){return null==e},ck=function(e){return"object"===typeof e},uk=function(e){return!ok(e)&&!Array.isArray(e)&&ck(e)&&!sk(e)},lk=function(e){return uk(e)&&e.target?ak(e.target)?e.target.checked:e.target.value:e},dk=function(e,t){return e.has(function(e){return e.substring(0,e.search(/\.\d+(\.|$)/))||e}(t))},hk=function(e){return Array.isArray(e)?e.filter(Boolean):[]},fk=function(e){return void 0===e},pk=function(e,t,n){if(!t||!uk(e))return n;var r=hk(t.split(/[,[\].]+?/)).reduce((function(e,t){return ok(e)?e:e[t]}),e);return fk(r)||r===e?fk(e[t])?n:e[t]:r},vk="blur",mk="focusout",gk="onBlur",yk="onChange",bk="onSubmit",kk="onTouched",xk="all",wk="max",Tk="min",Ek="maxLength",_k="minLength",Sk="pattern",Ak="required",Ck="validate",Ik=(a.createContext(null),function(e,t,n){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i={defaultValues:t._defaultValues},a=function(a){Object.defineProperty(i,a,{get:function(){var i=a;return t._proxyFormState[i]!==xk&&(t._proxyFormState[i]=!r||xk),n&&(n[i]=!0),e[i]}})};for(var s in e)a(s);return i}),Rk=function(e){return uk(e)&&!Object.keys(e).length},Pk=function(e,t,n,r){n(e);e.name;var i=ee(e,nk);return Rk(i)||Object.keys(i).length>=Object.keys(t).length||Object.keys(i).find((function(e){return t[e]===(!r||xk)}))},Dk=function(e){return Array.isArray(e)?e:[e]};function Nk(e){var t=a.useRef(e);t.current=e,a.useEffect((function(){var n=!e.disabled&&t.current.subject.subscribe({next:t.current.next});return function(){n&&n.unsubscribe()}}),[e.disabled])}var Ok=function(e){return"string"===typeof e},Lk=function(e,t,n,r,i){return Ok(e)?(r&&t.watch.add(e),pk(n,e,i)):Array.isArray(e)?e.map((function(e){return r&&t.watch.add(e),pk(n,e)})):(r&&(t.watchAll=!0),n)},Mk="undefined"!==typeof window&&"undefined"!==typeof window.HTMLElement&&"undefined"!==typeof document;function jk(e){var t,n=Array.isArray(e);if(e instanceof Date)t=new Date(e);else if(e instanceof Set)t=new Set(e);else{if(Mk&&(e instanceof Blob||e instanceof FileList)||!n&&!uk(e))return e;if(t=n?[]:{},Array.isArray(e)||function(e){var t=e.constructor&&e.constructor.prototype;return uk(t)&&t.hasOwnProperty("isPrototypeOf")}(e))for(var r in e)t[r]=jk(e[r]);else t=e}return t}var Fk=function(e,t,n,r,i){return t?$($({},n[e]),{},{types:$($({},n[e]&&n[e].types?n[e].types:{}),{},X({},r,i||!0))}):{}},Uk=function(e){return/^\w*$/.test(e)},Bk=function(e){return hk(e.replace(/["|']|\]/g,"").split(/\.|\[/))};function Gk(e,t,n){for(var r=-1,i=Uk(t)?[t]:Bk(t),a=i.length,s=a-1;++r<a;){var o=i[r],c=n;if(r!==s){var u=e[o];c=uk(u)||Array.isArray(u)?u:isNaN(+i[r+1])?{}:[]}e[o]=c,e=e[o]}return e}var Vk=function e(t,n,r){var i,a=Ut(r||Object.keys(t));try{for(a.s();!(i=a.n()).done;){var s=i.value,o=pk(t,s);if(o){var c=o._f,u=ee(o,rk);if(c&&n(c.name)){if(c.ref.focus){c.ref.focus();break}if(c.refs&&c.refs[0].focus){c.refs[0].focus();break}}else uk(u)&&e(u,n)}}}catch(l){a.e(l)}finally{a.f()}},Hk=function(e){return{isOnSubmit:!e||e===bk,isOnBlur:e===gk,isOnChange:e===yk,isOnAll:e===xk,isOnTouch:e===kk}},zk=function(e,t,n){return!n&&(t.watchAll||t.watch.has(e)||te(t.watch).some((function(t){return e.startsWith(t)&&/^\.\w+/.test(e.slice(t.length))})))},Wk=function(e,t,n){var r=hk(pk(e,n));return Gk(r,"root",t[n]),Gk(e,n,r),e},Kk=function(e){return"boolean"===typeof e},qk=function(e){return"file"===e.type},Yk=function(e){return"function"===typeof e},Jk=function(e){if(!Mk)return!1;var t=e?e.ownerDocument:0;return e instanceof(t&&t.defaultView?t.defaultView.HTMLElement:HTMLElement)},Qk=function(e){return Ok(e)||a.isValidElement(e)},Xk=function(e){return"radio"===e.type},Zk=function(e){return e instanceof RegExp},$k={value:!1,isValid:!1},ex={value:!0,isValid:!0},tx=function(e){if(Array.isArray(e)){if(e.length>1){var t=e.filter((function(e){return e&&e.checked&&!e.disabled})).map((function(e){return e.value}));return{value:t,isValid:!!t.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!fk(e[0].attributes.value)?fk(e[0].value)||""===e[0].value?ex:{value:e[0].value,isValid:!0}:ex:$k}return $k},nx={isValid:!1,value:null},rx=function(e){return Array.isArray(e)?e.reduce((function(e,t){return t&&t.checked&&!t.disabled?{isValid:!0,value:t.value}:e}),nx):nx};function ix(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"validate";if(Qk(e)||Array.isArray(e)&&e.every(Qk)||Kk(e)&&!e)return{type:n,message:Qk(e)?e:"",ref:t}}var ax=function(e){return uk(e)&&!Zk(e)?e:{value:e,message:""}},sx=function(){var e=Vt(Bt().mark((function e(t,n,r,i,a){var s,o,c,u,l,d,h,f,p,v,m,g,y,b,k,x,w,T,E,_,S,A,C,I,R,P,D,N,O,L,M,j,F,U,B,G,V,H,z,W,K,q,Y,J,Q,X,Z,ee;return Bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=t._f,o=s.ref,c=s.refs,u=s.required,l=s.maxLength,d=s.minLength,h=s.min,f=s.max,p=s.pattern,v=s.validate,m=s.name,g=s.valueAsNumber,y=s.mount,b=s.disabled,k=pk(n,m),y&&!b){e.next=4;break}return e.abrupt("return",{});case 4:if(x=c?c[0]:o,w=function(e){i&&x.reportValidity&&(x.setCustomValidity(Kk(e)?"":e||""),x.reportValidity())},T={},E=Xk(o),_=ak(o),S=E||_,A=(g||qk(o))&&fk(o.value)&&fk(k)||Jk(o)&&""===o.value||""===k||Array.isArray(k)&&!k.length,C=Fk.bind(null,m,r,T),I=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Ek,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:_k,a=e?t:n;T[m]=$({type:e?r:i,message:a,ref:o},C(e?r:i,a))},!(a?!Array.isArray(k)||!k.length:u&&(!S&&(A||ok(k))||Kk(k)&&!k||_&&!tx(c).isValid||E&&!rx(c).isValid))){e.next=20;break}if(R=Qk(u)?{value:!!u,message:u}:ax(u),P=R.value,D=R.message,!P){e.next=20;break}if(T[m]=$({type:Ak,message:D,ref:x},C(Ak,D)),r){e.next=20;break}return w(D),e.abrupt("return",T);case 20:if(A||ok(h)&&ok(f)){e.next=29;break}if(L=ax(f),M=ax(h),ok(k)||isNaN(k)?(F=o.valueAsDate||new Date(k),U=function(e){return new Date((new Date).toDateString()+" "+e)},B="time"==o.type,G="week"==o.type,Ok(L.value)&&k&&(N=B?U(k)>U(L.value):G?k>L.value:F>new Date(L.value)),Ok(M.value)&&k&&(O=B?U(k)<U(M.value):G?k<M.value:F<new Date(M.value))):(j=o.valueAsNumber||(k?+k:k),ok(L.value)||(N=j>L.value),ok(M.value)||(O=j<M.value)),!N&&!O){e.next=29;break}if(I(!!N,L.message,M.message,wk,Tk),r){e.next=29;break}return w(T[m].message),e.abrupt("return",T);case 29:if(!l&&!d||A||!(Ok(k)||a&&Array.isArray(k))){e.next=39;break}if(V=ax(l),H=ax(d),z=!ok(V.value)&&k.length>V.value,W=!ok(H.value)&&k.length<H.value,!z&&!W){e.next=39;break}if(I(z,V.message,H.message),r){e.next=39;break}return w(T[m].message),e.abrupt("return",T);case 39:if(!p||A||!Ok(k)){e.next=46;break}if(K=ax(p),q=K.value,Y=K.message,!Zk(q)||k.match(q)){e.next=46;break}if(T[m]=$({type:Sk,message:Y,ref:o},C(Sk,Y)),r){e.next=46;break}return w(Y),e.abrupt("return",T);case 46:if(!v){e.next=80;break}if(!Yk(v)){e.next=59;break}return e.next=50,v(k,n);case 50:if(J=e.sent,!(Q=ix(J,x))){e.next=57;break}if(T[m]=$($({},Q),C(Ck,Q.message)),r){e.next=57;break}return w(Q.message),e.abrupt("return",T);case 57:e.next=80;break;case 59:if(!uk(v)){e.next=80;break}X={},e.t0=Bt().keys(v);case 62:if((e.t1=e.t0()).done){e.next=76;break}if(Z=e.t1.value,Rk(X)||r){e.next=66;break}return e.abrupt("break",76);case 66:return e.t2=ix,e.next=69,v[Z](k,n);case 69:e.t3=e.sent,e.t4=x,e.t5=Z,(ee=(0,e.t2)(e.t3,e.t4,e.t5))&&(X=$($({},ee),C(Z,ee.message)),w(ee.message),r&&(T[m]=X)),e.next=62;break;case 76:if(Rk(X)){e.next=80;break}if(T[m]=$({ref:x},X),r){e.next=80;break}return e.abrupt("return",T);case 80:return w(!0),e.abrupt("return",T);case 82:case"end":return e.stop()}}),e)})));return function(t,n,r,i,a){return e.apply(this,arguments)}}();function ox(e,t){var n=Array.isArray(t)?t:Uk(t)?[t]:Bk(t),r=1===n.length?e:function(e,t){for(var n=t.slice(0,-1).length,r=0;r<n;)e=fk(e)?r++:e[t[r++]];return e}(e,n),i=n.length-1,a=n[i];return r&&delete r[a],0!==i&&(uk(r)&&Rk(r)||Array.isArray(r)&&function(e){for(var t in e)if(!fk(e[t]))return!1;return!0}(r))&&ox(e,n.slice(0,-1)),e}function cx(){var e=[];return{get observers(){return e},next:function(t){var n,r=Ut(e);try{for(r.s();!(n=r.n()).done;){n.value.next(t)}}catch(i){r.e(i)}finally{r.f()}},subscribe:function(t){return e.push(t),{unsubscribe:function(){e=e.filter((function(e){return e!==t}))}}},unsubscribe:function(){e=[]}}}var ux=function(e){return ok(e)||!ck(e)};function lx(e,t){if(ux(e)||ux(t))return e===t;if(sk(e)&&sk(t))return e.getTime()===t.getTime();var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(var i=0,a=n;i<a.length;i++){var s=a[i],o=e[s];if(!r.includes(s))return!1;if("ref"!==s){var c=t[s];if(sk(o)&&sk(c)||uk(o)&&uk(c)||Array.isArray(o)&&Array.isArray(c)?!lx(o,c):o!==c)return!1}}return!0}var dx=function(e){return"select-multiple"===e.type},hx=function(e){return Xk(e)||ak(e)},fx=function(e){return Jk(e)&&e.isConnected},px=function(e){for(var t in e)if(Yk(e[t]))return!0;return!1};function vx(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=Array.isArray(e);if(uk(e)||n)for(var r in e)Array.isArray(e[r])||uk(e[r])&&!px(e[r])?(t[r]=Array.isArray(e[r])?[]:{},vx(e[r],t[r])):ok(e[r])||(t[r]=!0);return t}function mx(e,t,n){var r=Array.isArray(e);if(uk(e)||r)for(var i in e)Array.isArray(e[i])||uk(e[i])&&!px(e[i])?fk(t)||ux(n[i])?n[i]=Array.isArray(e[i])?vx(e[i],[]):$({},vx(e[i])):mx(e[i],ok(t)?{}:t[i],n[i]):lx(e[i],t[i])?delete n[i]:n[i]=!0;return n}var gx=function(e,t){return mx(e,t,vx(t))},yx=function(e,t){var n=t.valueAsNumber,r=t.valueAsDate,i=t.setValueAs;return fk(e)?e:n?""===e?NaN:e?+e:e:r&&Ok(e)?new Date(e):i?i(e):e};function bx(e){var t=e.ref;if(!(e.refs?e.refs.every((function(e){return e.disabled})):t.disabled))return qk(t)?t.files:Xk(t)?rx(e.refs).value:dx(t)?te(t.selectedOptions).map((function(e){return e.value})):ak(t)?tx(e.refs).value:yx(fk(t.value)?e.ref.value:t.value,e)}var kx=function(e,t,n,r){var i,a={},s=Ut(e);try{for(s.s();!(i=s.n()).done;){var o=i.value,c=pk(t,o);c&&Gk(a,o,c._f)}}catch(u){s.e(u)}finally{s.f()}return{criteriaMode:n,names:te(e),fields:a,shouldUseNativeValidation:r}},xx=function(e){return fk(e)?e:Zk(e)?e.source:uk(e)?Zk(e.value)?e.value.source:e.value:e},wx=function(e){return e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate)};function Tx(e,t,n){var r=pk(e,n);if(r||Uk(n))return{error:r,name:n};for(var i=n.split(".");i.length;){var a=i.join("."),s=pk(t,a),o=pk(e,a);if(s&&!Array.isArray(s)&&n!==a)return{name:n};if(o&&o.type)return{name:a,error:o};i.pop()}return{name:n}}var Ex=function(e,t,n,r,i){return!i.isOnAll&&(!n&&i.isOnTouch?!(t||e):(n?r.isOnBlur:i.isOnBlur)?!e:!(n?r.isOnChange:i.isOnChange)||e)},_x=function(e,t){return!hk(pk(e,t)).length&&ox(e,t)},Sx={mode:bk,reValidateMode:yk,shouldFocusError:!0};function Ax(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0,r=$($({},Sx),t),i=t.resetOptions&&t.resetOptions.keepDirtyValues,a={submitCount:0,isDirty:!1,isLoading:!0,isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},errors:{}},s={},o=uk(r.defaultValues)&&jk(r.defaultValues)||{},c=r.shouldUnregister?{}:jk(o),u={action:!1,mount:!1,watch:!1},l={mount:new Set,unMount:new Set,array:new Set,watch:new Set},d=0,h={isDirty:!1,dirtyFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},f={watch:cx(),array:cx(),state:cx()},p=Hk(r.mode),v=Hk(r.reValidateMode),m=r.criteriaMode===xk,g=function(e){return function(t){clearTimeout(d),d=window.setTimeout(e,t)}},y=function(){var e=Vt(Bt().mark((function e(t){var n;return Bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!h.isValid&&!t){e.next=14;break}if(!r.resolver){e.next=9;break}return e.t1=Rk,e.next=5,_();case 5:e.t2=e.sent.errors,e.t0=(0,e.t1)(e.t2),e.next=12;break;case 9:return e.next=11,A(s,!0);case 11:e.t0=e.sent;case 12:(n=e.t0)!==a.isValid&&(a.isValid=n,f.state.next({isValid:n}));case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),b=function(e){return h.isValidating&&f.state.next({isValidating:e})},k=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0,i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],l=!(arguments.length>5&&void 0!==arguments[5])||arguments[5];if(r&&n){if(u.action=!0,l&&Array.isArray(pk(s,e))){var d=n(pk(s,e),r.argA,r.argB);i&&Gk(s,e,d)}if(l&&Array.isArray(pk(a.errors,e))){var p=n(pk(a.errors,e),r.argA,r.argB);i&&Gk(a.errors,e,p),_x(a.errors,e)}if(h.touchedFields&&l&&Array.isArray(pk(a.touchedFields,e))){var v=n(pk(a.touchedFields,e),r.argA,r.argB);i&&Gk(a.touchedFields,e,v)}h.dirtyFields&&(a.dirtyFields=gx(o,c)),f.state.next({name:e,isDirty:I(e,t),dirtyFields:a.dirtyFields,errors:a.errors,isValid:a.isValid})}else Gk(c,e,t)},x=function(e,t){Gk(a.errors,e,t),f.state.next({errors:a.errors})},w=function(e,t,n,r){var i=pk(s,e);if(i){var a=pk(c,e,fk(n)?pk(o,e):n);fk(a)||r&&r.defaultChecked||t?Gk(c,e,t?a:bx(i._f)):D(e,a),u.mount&&y()}},T=function(e,t,n,r,i){var s=!1,c=!1,u={name:e};if(!n||r){h.isDirty&&(c=a.isDirty,a.isDirty=u.isDirty=I(),s=c!==u.isDirty);var l=lx(pk(o,e),t);c=pk(a.dirtyFields,e),l?ox(a.dirtyFields,e):Gk(a.dirtyFields,e,!0),u.dirtyFields=a.dirtyFields,s=s||h.dirtyFields&&c!==!l}if(n){var d=pk(a.touchedFields,e);d||(Gk(a.touchedFields,e,n),u.touchedFields=a.touchedFields,s=s||h.touchedFields&&d!==n)}return s&&i&&f.state.next(u),s?u:{}},E=function(n,r,i,s){var o=pk(a.errors,n),c=h.isValid&&Kk(r)&&a.isValid!==r;if(t.delayError&&i?(e=g((function(){return x(n,i)})))(t.delayError):(clearTimeout(d),e=null,i?Gk(a.errors,n,i):ox(a.errors,n)),(i?!lx(o,i):o)||!Rk(s)||c){var u=$($($({},s),c&&Kk(r)?{isValid:r}:{}),{},{errors:a.errors,name:n});a=$($({},a),u),f.state.next(u)}b(!1)},_=function(){var e=Vt(Bt().mark((function e(t){return Bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.resolver(c,r.context,kx(t||l.mount,s,r.criteriaMode,r.shouldUseNativeValidation));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),S=function(){var e=Vt(Bt().mark((function e(t){var n,r,i,s,o,c;return Bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_();case 2:if(n=e.sent,r=n.errors,t){i=Ut(t);try{for(i.s();!(s=i.n()).done;)o=s.value,(c=pk(r,o))?Gk(a.errors,o,c):ox(a.errors,o)}catch(u){i.e(u)}finally{i.f()}}else a.errors=r;return e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),A=function(){var e=Vt(Bt().mark((function e(t,n){var i,s,o,u,d,h,f,p=arguments;return Bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=p.length>2&&void 0!==p[2]?p[2]:{valid:!0},e.t0=Bt().keys(t);case 2:if((e.t1=e.t0()).done){e.next=23;break}if(s=e.t1.value,!(o=t[s])){e.next=21;break}if(u=o._f,d=ee(o,ik),!u){e.next=17;break}return h=l.array.has(u.name),e.next=11,sx(o,c,m,r.shouldUseNativeValidation,h);case 11:if(!(f=e.sent)[u.name]){e.next=16;break}if(i.valid=!1,!n){e.next=16;break}return e.abrupt("break",23);case 16:!n&&(pk(f,u.name)?h?Wk(a.errors,f,u.name):Gk(a.errors,u.name,f[u.name]):ox(a.errors,u.name));case 17:if(e.t2=d,!e.t2){e.next=21;break}return e.next=21,A(d,n,i);case 21:e.next=2;break;case 23:return e.abrupt("return",i.valid);case 24:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),C=function(){var e,t=Ut(l.unMount);try{for(t.s();!(e=t.n()).done;){var n=e.value,r=pk(s,n);r&&(r._f.refs?r._f.refs.every((function(e){return!fx(e)})):!fx(r._f.ref))&&V(n)}}catch(i){t.e(i)}finally{t.f()}l.unMount=new Set},I=function(e,t){return e&&t&&Gk(c,e,t),!lx(j(),o)},R=function(e,t,n){return Lk(e,l,$({},u.mount?c:fk(t)?o:Ok(e)?X({},e,t):t),n,t)},P=function(e){return hk(pk(u.mount?c:o,e,t.shouldUnregister?pk(o,e,[]):[]))},D=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=pk(s,e),i=t;if(r){var a=r._f;a&&(!a.disabled&&Gk(c,e,yx(t,a)),i=Jk(a.ref)&&ok(t)?"":t,dx(a.ref)?te(a.ref.options).forEach((function(e){return e.selected=i.includes(e.value)})):a.refs?ak(a.ref)?a.refs.length>1?a.refs.forEach((function(e){return(!e.defaultChecked||!e.disabled)&&(e.checked=Array.isArray(i)?!!i.find((function(t){return t===e.value})):i===e.value)})):a.refs[0]&&(a.refs[0].checked=!!i):a.refs.forEach((function(e){return e.checked=e.value===i})):qk(a.ref)?a.ref.value="":(a.ref.value=i,a.ref.type||f.watch.next({name:e})))}(n.shouldDirty||n.shouldTouch)&&T(e,i,n.shouldTouch,n.shouldDirty,!0),n.shouldValidate&&M(e)},N=function e(t,n,r){for(var i in n){var a=n[i],o="".concat(t,".").concat(i),c=pk(s,o);!l.array.has(t)&&ux(a)&&(!c||c._f)||sk(a)?D(o,a,r):e(o,a,r)}},O=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=pk(s,e),d=l.array.has(e),p=jk(t);Gk(c,e,p),d?(f.array.next({name:e,values:c}),(h.isDirty||h.dirtyFields)&&r.shouldDirty&&(a.dirtyFields=gx(o,c),f.state.next({name:e,dirtyFields:a.dirtyFields,isDirty:I(e,p)}))):!i||i._f||ok(p)?D(e,p,r):N(e,p,r),zk(e,l)&&f.state.next({}),f.watch.next({name:e}),!u.mount&&n()},L=function(){var t=Vt(Bt().mark((function t(n){var i,o,u,d,g,k,x,w,S,C,I,R,P,D,N,O;return Bt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=n.target,o=i.name,u=pk(s,o),d=function(){return i.type?bx(u._f):lk(n)},!u){t.next=45;break}if(x=d(),w=n.type===vk||n.type===mk,S=!wx(u._f)&&!r.resolver&&!pk(a.errors,o)&&!u._f.deps||Ex(w,pk(a.touchedFields,o),a.isSubmitted,v,p),C=zk(o,l,w),Gk(c,o,x),w?(u._f.onBlur&&u._f.onBlur(n),e&&e(0)):u._f.onChange&&u._f.onChange(n),I=T(o,x,w,!1),R=!Rk(I)||C,!w&&f.watch.next({name:o,type:n.type}),!S){t.next=17;break}return h.isValid&&y(),t.abrupt("return",R&&f.state.next($({name:o},C?{}:I)));case 17:if(!w&&C&&f.state.next({}),b(!0),!r.resolver){t.next=31;break}return t.next=22,_([o]);case 22:P=t.sent,D=P.errors,N=Tx(a.errors,s,o),O=Tx(D,s,N.name||o),g=O.error,o=O.name,k=Rk(D),t.next=43;break;case 31:return t.next=33,sx(u,c,m,r.shouldUseNativeValidation);case 33:if(t.t0=o,!(g=t.sent[t.t0])){t.next=39;break}k=!1,t.next=43;break;case 39:if(!h.isValid){t.next=43;break}return t.next=42,A(s,!0);case 42:k=t.sent;case 43:u._f.deps&&M(u._f.deps),E(o,k,g,I);case 45:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),M=function(){var e=Vt(Bt().mark((function e(t){var n,i,o,c,u,d=arguments;return Bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=d.length>1&&void 0!==d[1]?d[1]:{},c=Dk(t),b(!0),!r.resolver){e.next=11;break}return e.next=6,S(fk(t)?t:c);case 6:u=e.sent,i=Rk(u),o=t?!c.some((function(e){return pk(u,e)})):i,e.next=21;break;case 11:if(!t){e.next=18;break}return e.next=14,Promise.all(c.map(function(){var e=Vt(Bt().mark((function e(t){var n;return Bt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=pk(s,t),e.next=3,A(n&&n._f?X({},t,n):n);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 14:((o=e.sent.every(Boolean))||a.isValid)&&y(),e.next=21;break;case 18:return e.next=20,A(s);case 20:o=i=e.sent;case 21:return f.state.next($($($({},!Ok(t)||h.isValid&&i!==a.isValid?{}:{name:t}),r.resolver||!t?{isValid:i}:{}),{},{errors:a.errors,isValidating:!1})),n.shouldFocus&&!o&&Vk(s,(function(e){return e&&pk(a.errors,e)}),t?c:l.mount),e.abrupt("return",o);case 24:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),j=function(e){var t=$($({},o),u.mount?c:{});return fk(e)?t:Ok(e)?pk(t,e):e.map((function(e){return pk(t,e)}))},F=function(e,t){return{invalid:!!pk((t||a).errors,e),isDirty:!!pk((t||a).dirtyFields,e),isTouched:!!pk((t||a).touchedFields,e),error:pk((t||a).errors,e)}},U=function(e){e?Dk(e).forEach((function(e){return ox(a.errors,e)})):a.errors={},f.state.next({errors:a.errors})},B=function(e,t,n){var r=(pk(s,e,{_f:{}})._f||{}).ref;Gk(a.errors,e,$($({},t),{},{ref:r})),f.state.next({name:e,errors:a.errors,isValid:!1}),n&&n.shouldFocus&&r&&r.focus&&r.focus()},G=function(e,t){return Yk(e)?f.watch.subscribe({next:function(n){return e(R(void 0,t),n)}}):R(e,t,!0)},V=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=Ut(e?Dk(e):l.mount);try{for(i.s();!(t=i.n()).done;){var u=t.value;l.mount.delete(u),l.array.delete(u),pk(s,u)&&(n.keepValue||(ox(s,u),ox(c,u)),!n.keepError&&ox(a.errors,u),!n.keepDirty&&ox(a.dirtyFields,u),!n.keepTouched&&ox(a.touchedFields,u),!r.shouldUnregister&&!n.keepDefaultValue&&ox(o,u))}}catch(d){i.e(d)}finally{i.f()}f.watch.next({}),f.state.next($($({},a),n.keepDirty?{isDirty:I()}:{})),!n.keepIsValid&&y()},H=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=pk(s,t),a=Kk(n.disabled);return Gk(s,t,$($({},i||{}),{},{_f:$($({},i&&i._f?i._f:{ref:{name:t}}),{},{name:t,mount:!0},n)})),l.mount.add(t),i?a&&Gk(c,t,n.disabled?void 0:pk(c,t,bx(i._f))):w(t,!0,n.value),$($($({},a?{disabled:n.disabled}:{}),r.shouldUseNativeValidation?{required:!!n.required,min:xx(n.min),max:xx(n.max),minLength:xx(n.minLength),maxLength:xx(n.maxLength),pattern:xx(n.pattern)}:{}),{},{name:t,onChange:L,onBlur:L,ref:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(a){if(a){e(t,n),i=pk(s,t);var c=fk(a.value)&&a.querySelectorAll&&a.querySelectorAll("input,select,textarea")[0]||a,d=hx(c),h=i._f.refs||[];if(d?h.find((function(e){return e===c})):c===i._f.ref)return;Gk(s,t,{_f:$($({},i._f),d?{refs:[].concat(te(h.filter(fx)),[c],te(Array.isArray(pk(o,t))?[{}]:[])),ref:{type:c.type,name:t}}:{ref:c})}),w(t,!1,void 0,c)}else(i=pk(s,t,{}))._f&&(i._f.mount=!1),(r.shouldUnregister||n.shouldUnregister)&&(!dk(l.array,t)||!u.action)&&l.unMount.add(t)}))})},z=function(){return r.shouldFocusError&&Vk(s,(function(e){return e&&pk(a.errors,e)}),l.mount)},W=function(e,t){return function(){var n=Vt(Bt().mark((function n(i){var o,u,l,d;return Bt().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(i&&(i.preventDefault&&i.preventDefault(),i.persist&&i.persist()),o=jk(c),f.state.next({isSubmitting:!0}),!r.resolver){n.next=13;break}return n.next=6,_();case 6:u=n.sent,l=u.errors,d=u.values,a.errors=l,o=d,n.next=15;break;case 13:return n.next=15,A(s);case 15:if(!Rk(a.errors)){n.next=21;break}return f.state.next({errors:{}}),n.next=19,e(o,i);case 19:n.next=25;break;case 21:if(!t){n.next=24;break}return n.next=24,t($({},a.errors),i);case 24:z();case 25:f.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:Rk(a.errors),submitCount:a.submitCount+1,errors:a.errors});case 26:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},K=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};pk(s,e)&&(fk(t.defaultValue)?O(e,pk(o,e)):(O(e,t.defaultValue),Gk(o,e,t.defaultValue)),t.keepTouched||ox(a.touchedFields,e),t.keepDirty||(ox(a.dirtyFields,e),a.isDirty=t.defaultValue?I(e,pk(o,e)):I()),t.keepError||(ox(a.errors,e),h.isValid&&y()),f.state.next($({},a)))},q=function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},d=e||o,p=jk(d),v=e&&!Rk(e)?p:o;if(r.keepDefaultValues||(o=d),!r.keepValues){if(r.keepDirtyValues||i){var m,g=Ut(l.mount);try{for(g.s();!(m=g.n()).done;){var y=m.value;pk(a.dirtyFields,y)?Gk(v,y,pk(c,y)):O(y,pk(v,y))}}catch(_){g.e(_)}finally{g.f()}}else{if(Mk&&fk(e)){var b,k=Ut(l.mount);try{for(k.s();!(b=k.n()).done;){var x=b.value,w=pk(s,x);if(w&&w._f){var T=Array.isArray(w._f.refs)?w._f.refs[0]:w._f.ref;if(Jk(T)){var E=T.closest("form");if(E){E.reset();break}}}}}catch(_){k.e(_)}finally{k.f()}}s={}}c=t.shouldUnregister?r.keepDefaultValues?jk(o):{}:p,f.array.next({values:v}),f.watch.next({values:v})}l={mount:new Set,unMount:new Set,array:new Set,watch:new Set,watchAll:!1,focus:""},!u.mount&&n(),u.mount=!h.isValid||!!r.keepIsValid,u.watch=!!t.shouldUnregister,f.state.next({submitCount:r.keepSubmitCount?a.submitCount:0,isDirty:r.keepDirty||r.keepDirtyValues?a.isDirty:!(!r.keepDefaultValues||lx(e,o)),isSubmitted:!!r.keepIsSubmitted&&a.isSubmitted,dirtyFields:r.keepDirty||r.keepDirtyValues?a.dirtyFields:r.keepDefaultValues&&e?gx(o,e):{},touchedFields:r.keepTouched?a.touchedFields:{},errors:r.keepErrors?a.errors:{},isSubmitting:!1,isSubmitSuccessful:!1})},Y=function(e,t){return q(Yk(e)?e(c):e,t)},J=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=pk(s,e),r=n&&n._f;if(r){var i=r.refs?r.refs[0]:r.ref;i.focus&&(i.focus(),t.shouldSelect&&i.select())}},Q=function(e){a=$($({},a),e)};return Yk(r.defaultValues)&&r.defaultValues().then((function(e){Y(e,r.resetOptions),f.state.next({isLoading:!1})})),{control:{register:H,unregister:V,getFieldState:F,_executeSchema:_,_focusError:z,_getWatch:R,_getDirty:I,_updateValid:y,_removeUnmounted:C,_updateFieldArray:k,_getFieldArray:P,_reset:q,_updateFormState:Q,_subjects:f,_proxyFormState:h,get _fields(){return s},get _formValues(){return c},get _stateFlags(){return u},set _stateFlags(e){u=e},get _defaultValues(){return o},get _names(){return l},set _names(e){l=e},get _formState(){return a},set _formState(e){a=e},get _options(){return r},set _options(e){r=$($({},r),e)}},trigger:M,register:H,handleSubmit:W,watch:G,setValue:O,getValues:j,reset:Y,resetField:K,clearErrors:U,unregister:V,setError:B,setFocus:J,getFieldState:F}}function Cx(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=a.useRef(),n=a.useState({isDirty:!1,isValidating:!1,isLoading:!0,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},errors:{},defaultValues:Yk(e.defaultValues)?void 0:e.defaultValues}),r=u(n,2),i=r[0],s=r[1];t.current||(t.current=$($({},Ax(e,(function(){return s((function(e){return $({},e)}))}))),{},{formState:i}));var o=t.current.control;return o._options=e,Nk({subject:o._subjects.state,next:function(e){Pk(e,o._proxyFormState,o._updateFormState,!0)&&s($({},o._formState))}}),a.useEffect((function(){o._stateFlags.mount||(o._updateValid(),o._stateFlags.mount=!0),o._stateFlags.watch&&(o._stateFlags.watch=!1,o._subjects.state.next({})),o._removeUnmounted()})),a.useEffect((function(){e.values&&!lx(e.values,o._defaultValues)&&o._reset(e.values,o._options.resetOptions)}),[e.values,o]),a.useEffect((function(){i.submitCount&&o._focusError()}),[o,i.submitCount]),t.current.formState=Ik(i,o),t.current}var Ix=function(e){var t=e.updateAudio,n=e.setUpdateAudio,r=Cx(),i=r.register,a=r.handleSubmit,s=(r.reset,r.watch,r.formState.errors,t._id),o=t.name,c=t.date,u=t.category,l=t.place,d=t.link,h=t.description;return(0,Me.jsxs)("div",{className:"",children:[(0,Me.jsx)("input",{type:"checkbox",id:"update-modal",class:"modal-toggle"}),(0,Me.jsx)("div",{class:"modal",children:(0,Me.jsxs)("div",{class:"modal-box relative",children:[(0,Me.jsx)("label",{for:"update-modal",class:"btn btn-sm btn-circle absolute right-2 top-2",children:"\u2715"}),(0,Me.jsxs)("h3",{class:"text-lg font-bold",children:["\u0986\u09aa\u09a1\u09c7\u099f : ",t.name]}),(0,Me.jsxs)("form",{onSubmit:a((function(e){fetch("http://128.140.52.151:5000/getboyans/".concat(s),{method:"PUT",headers:{"content-type":"application/json"},body:JSON.stringify(e)}).then((function(e){return e.json()})).then((function(e){console.log(e),n(null),Le("\u09ac\u09df\u09be\u09a8 \u09b8\u09ae\u09cd\u09aa\u09be\u09a6\u09a8\u09be \u09b9\u09df\u09c7\u099b\u09c7")}))})),className:"p-5 grid grid-cols-1 justify-items-center",children:[(0,Me.jsxs)("div",{class:"form-control w-full max-w-xs",children:[(0,Me.jsx)("label",{class:"label",children:(0,Me.jsx)("span",{class:"label-text",children:"\u09ac\u09df\u09be\u09a8\u09c7\u09b0 \u09a8\u09be\u09ae"})}),(0,Me.jsx)("input",$($({},i("name")),{},{defaultValue:o,type:"text",placeholder:"\u09ac\u09df\u09be\u09a8\u09c7\u09b0 \u09a8\u09be\u09ae \u09b2\u09bf\u0996\u09c1\u09a8",class:"input input-bordered w-full max-w-xs"}))]}),(0,Me.jsxs)("div",{class:"form-control w-full max-w-xs",children:[(0,Me.jsx)("label",{class:"label",children:(0,Me.jsx)("span",{class:"label-text",children:"\u09ac\u09df\u09be\u09a8\u09c7\u09b0 \u09a4\u09be\u09b0\u09bf\u0996"})}),(0,Me.jsx)("input",$($({},i("date")),{},{defaultValue:c,type:"text",class:"input input-bordered w-full max-w-xs"}))]}),(0,Me.jsxs)("div",{class:"form-control w-full max-w-xs",children:[(0,Me.jsx)("label",{class:"label",children:(0,Me.jsx)("span",{class:"label-text",children:"\u09ac\u09df\u09be\u09a8\u09c7\u09b0 \u09ac\u09bf\u09ad\u09be\u0997"})}),(0,Me.jsx)("input",$($({},i("category")),{},{defaultValue:u,type:"text",placeholder:"\u09ac\u09df\u09be\u09a8\u09c7\u09b0 \u09ac\u09bf\u09ad\u09be\u0997 \u09b2\u09bf\u0996\u09c1\u09a8",class:"input input-bordered w-full max-w-xs"}))]}),(0,Me.jsxs)("div",{class:"form-control w-full max-w-xs",children:[(0,Me.jsx)("label",{class:"label",children:(0,Me.jsx)("span",{class:"label-text",children:"\u09ac\u09df\u09be\u09a8\u09c7\u09b0 \u09ac\u09bf\u09b7\u09df"})}),(0,Me.jsx)("input",$($({},i("subject")),{},{defaultValue:null===t||void 0===t?void 0:t.subject,type:"text",placeholder:"\u09ac\u09df\u09be\u09a8\u09c7\u09b0 \u09ac\u09bf\u09ad\u09be\u0997 \u09b2\u09bf\u0996\u09c1\u09a8",class:"input input-bordered w-full max-w-xs"}))]}),(0,Me.jsxs)("div",{class:"form-control w-full max-w-xs",children:[(0,Me.jsx)("label",{class:"label",children:(0,Me.jsx)("span",{class:"label-text",children:"\u09ac\u09df\u09be\u09a8\u09c7\u09b0 \u09b8\u09cd\u09a5\u09be\u09a8"})}),(0,Me.jsx)("input",$($({},i("place")),{},{defaultValue:l,type:"text",placeholder:"\u09ac\u09df\u09be\u09a8\u09c7\u09b0 \u09b8\u09cd\u09a5\u09be\u09a8",class:"input input-bordered w-full max-w-xs"}))]}),(0,Me.jsxs)("div",{class:"form-control w-full max-w-xs",children:[(0,Me.jsx)("label",{class:"label",children:(0,Me.jsx)("span",{class:"label-text",children:"\u09ab\u09be\u0987\u09b2 \u09b2\u09bf\u0982\u0995"})}),(0,Me.jsx)("input",$($({},i("link")),{},{defaultValue:d,type:"text",placeholder:"\u09ab\u09be\u0987\u09b2 \u09b2\u09bf\u0982\u0995",class:"input input-bordered w-full max-w-xs"}))]}),(0,Me.jsxs)("div",{class:"form-control w-full max-w-xs",children:[(0,Me.jsx)("label",{class:"label",children:(0,Me.jsx)("span",{class:"label-text",children:"\u09ac\u09df\u09be\u09a8\u09c7\u09b0 \u09ac\u09bf\u09b8\u09cd\u09a4\u09be\u09b0\u09bf\u09a4"})}),(0,Me.jsx)("textarea",$($({},i("description")),{},{defaultValue:h,type:"text",placeholder:"\u09ac\u09df\u09be\u09a8\u09c7\u09b0 \u09ac\u09bf\u09b8\u09cd\u09a4\u09be\u09b0\u09bf\u09a4",class:"textarea textarea-bordered w-full max-w-xs"}))]}),(0,Me.jsx)("input",{type:"submit",value:"\u0986\u09aa\u09a1\u09c7\u099f \u09ac\u09df\u09be\u09a8",className:"btn btn-primary"})]})]})})]})},Rx=function(){var e=u((0,a.useState)([]),2),t=e[0],n=e[1],r=u((0,a.useState)(null),2),i=r[0],s=r[1];return(0,a.useEffect)((function(){fetch("http://128.140.52.151:5000/getboyans").then((function(e){return e.json()})).then((function(e){n(e)}))}),[i,t,i,s]),(0,Me.jsxs)("div",{className:"mt-28",children:[(0,Me.jsx)("h1",{className:"text-2xl my-8 font-bold",children:"\u09ac\u09df\u09be\u09a8\u09c7\u09b0 \u0993\u09a1\u09bf\u0993 \u09b8\u09ae\u09cd\u09aa\u09be\u09a6\u09a8\u09be \u0995\u09b0\u09c1\u09a8"}),(0,Me.jsx)("div",{class:"overflow-x-auto",children:(0,Me.jsxs)("table",{class:"table w-full",children:[(0,Me.jsx)("thead",{children:(0,Me.jsxs)("tr",{children:[(0,Me.jsx)("th",{children:"\u0995\u09cd\u09b0\u0983"}),(0,Me.jsx)("th",{children:"\u09a4\u09be\u09b0\u09bf\u0996"}),(0,Me.jsx)("th",{children:"\u09ac\u09df\u09be\u09a8\u09c7\u09b0 \u09a8\u09be\u09ae"}),(0,Me.jsx)("th",{children:"\u09ac\u09df\u09be\u09a8\u09c7\u09b0 \u09ac\u09bf\u09ad\u09be\u0997"}),(0,Me.jsx)("th",{children:"\u09ac\u09df\u09be\u09a8\u09c7\u09b0 \u09ac\u09bf\u09b7\u09df"}),(0,Me.jsx)("th",{children:"\u09ac\u09be\u09ac\u09b9\u09be\u09b0\u0995\u09be\u09b0\u09bf"}),(0,Me.jsx)("th",{children:"\u09b8\u09ae\u09cd\u09aa\u09be\u09a6\u09a8\u09be"}),(0,Me.jsx)("th",{children:"\u09ae\u09c1\u099b\u09c1\u09a8"})]})}),(0,Me.jsx)("tbody",{children:t.map((function(e,t){return(0,Me.jsx)(tk,{boyan:e,setUpdateAudio:s,index:t},e._id)}))}),(0,Me.jsx)("tfoot",{children:(0,Me.jsxs)("tr",{children:[(0,Me.jsx)("th",{}),(0,Me.jsx)("th",{}),(0,Me.jsx)("th",{}),(0,Me.jsx)("th",{}),(0,Me.jsx)("th",{}),(0,Me.jsx)("th",{}),(0,Me.jsx)("th",{}),(0,Me.jsx)("th",{})]})})]})}),i&&(0,Me.jsx)(Ix,{setUpdateAudio:s,updateAudio:i})]})},Px=function(e){var t=e.qa,n=e.setUpdateQa,r=e.index;return(0,Me.jsxs)("tr",{className:"hover",children:[(0,Me.jsx)("td",{children:r+1}),(0,Me.jsx)("td",{children:t.question}),(0,Me.jsx)("td",{children:t.answer_no}),(0,Me.jsx)("td",{children:t.category}),(0,Me.jsx)("td",{children:"User"}),(0,Me.jsx)("td",{children:(0,Me.jsx)("label",{for:"update-modal",onClick:function(){return n(t)},className:"btn btn-primary btn-xs",children:"\u09aa\u09b0\u09bf\u09ac\u09b0\u09cd\u09a4\u09a8"})}),(0,Me.jsx)("td",{children:(0,Me.jsx)("button",{onClick:function(){window.confirm("Ary You Sure Want To Delete")&&fetch("http://128.140.52.151:5000/getanswer/".concat(t._id),{method:"DELETE"}).then((function(e){return e.json()})).then((function(e){console.log(e),n(null),Le("Deleted Successful")}))},className:"btn btn-warning btn-xs",children:"\u09ae\u09c1\u099b\u09c1\u09a8"})})]})},Dx=function(e){var t=e.updateQa,n=e.setUpdateQa,r=Cx(),i=r.register,a=r.handleSubmit,s=(r.reset,r.watch,r.formState.errors,t._id),o=t.question,c=t.answer_no,u=t.category,l=t.link;return(0,Me.jsxs)("div",{className:"",children:[(0,Me.jsx)("input",{type:"checkbox",id:"update-modal",class:"modal-toggle"}),(0,Me.jsx)("div",{class:"modal",children:(0,Me.jsxs)("div",{class:"modal-box relative",children:[(0,Me.jsx)("label",{for:"update-modal",class:"btn btn-sm btn-circle absolute right-2 top-2",children:"\u2715"}),(0,Me.jsxs)("h3",{class:"text-lg font-bold",children:["\u0986\u09aa\u09a1\u09c7\u099f : ",t.question]}),(0,Me.jsxs)("form",{onSubmit:a((function(e){fetch("http://128.140.52.151:5000/getanswer/".concat(s),{method:"PUT",headers:{"content-type":"application/json"},body:JSON.stringify(e)}).then((function(e){return e.json()})).then((function(e){console.log(e),n(null),Le("\u09ac\u09df\u09be\u09a8 \u09b8\u09ae\u09cd\u09aa\u09be\u09a6\u09a8\u09be \u09b9\u09df\u09c7\u099b\u09c7")}))})),className:"p-5 grid grid-cols-1 justify-items-center",children:[(0,Me.jsxs)("div",{class:"form-control w-full max-w-xs",children:[(0,Me.jsx)("label",{class:"label",children:(0,Me.jsx)("span",{class:"label-text",children:"\u09aa\u09cd\u09b0\u09b6\u09cd\u09a8"})}),(0,Me.jsx)("input",$($({},i("question")),{},{defaultValue:o,type:"text",placeholder:"\u09aa\u09cd\u09b0\u09b6\u09cd\u09a8\u09c7\u09b0 \u09a8\u09be\u09ae \u09b2\u09bf\u0996\u09c1\u09a8",class:"input input-bordered w-full max-w-xs"}))]}),(0,Me.jsxs)("div",{class:"form-control w-full max-w-xs",children:[(0,Me.jsx)("label",{class:"label",children:(0,Me.jsx)("span",{class:"label-text",children:"\u09aa\u09cd\u09b0\u09b6\u09cd\u09a8\u09c7\u09b0 \u09ac\u09bf\u09ad\u09be\u0997"})}),(0,Me.jsx)("input",$($({},i("category")),{},{defaultValue:u,type:"text",placeholder:"\u09aa\u09cd\u09b0\u09b6\u09cd\u09a8\u09c7\u09b0 \u09ac\u09bf\u09ad\u09be\u0997 \u09b2\u09bf\u0996\u09c1\u09a8",class:"input input-bordered w-full max-w-xs"}))]}),(0,Me.jsxs)("div",{class:"form-control w-full max-w-xs",children:[(0,Me.jsx)("label",{class:"label",children:(0,Me.jsx)("span",{class:"label-text",children:"\u0989\u09a4\u09cd\u09a4\u09b0 \u09a8\u0982"})}),(0,Me.jsx)("input",$($({},i("answer_no")),{},{defaultValue:c,type:"text",placeholder:"\u0989\u09a4\u09cd\u09a4\u09b0 \u09a8\u0982 \u09b2\u09bf\u0996\u09c1\u09a8",class:"input input-bordered w-full max-w-xs"}))]}),(0,Me.jsxs)("div",{class:"form-control w-full max-w-xs",children:[(0,Me.jsx)("label",{class:"label",children:(0,Me.jsx)("span",{class:"label-text",children:"\u09ab\u09be\u0987\u09b2 \u09b2\u09bf\u0982\u0995"})}),(0,Me.jsx)("input",$($({},i("link")),{},{defaultValue:l,type:"text",placeholder:"\u09ab\u09be\u0987\u09b2 \u09b2\u09bf\u0982\u0995",class:"input input-bordered w-full max-w-xs"}))]}),(0,Me.jsx)("input",{type:"submit",value:"\u0986\u09aa\u09a1\u09c7\u099f \u0989\u09a4\u09cd\u09a4\u09b0",className:"btn btn-primary"})]})]})})]})},Nx=function(){var e=u((0,a.useState)([]),2),t=e[0],n=e[1],r=u((0,a.useState)(null),2),i=r[0],s=r[1];return(0,a.useEffect)((function(){fetch("http://128.140.52.151:5000/getanswer").then((function(e){return e.json()})).then((function(e){n(e)}))}),[i,t,i,s]),(0,Me.jsxs)("div",{className:"mt-28",children:[(0,Me.jsx)("h1",{className:"text-2xl my-8 font-bold",children:"\u09aa\u09cd\u09b0\u09b6\u09cd\u09a8 \u0989\u09a4\u09cd\u09a4\u09b0 \u0993\u09a1\u09bf\u0993 \u09b8\u09ae\u09cd\u09aa\u09be\u09a6\u09a8\u09be \u0995\u09b0\u09c1\u09a8"}),(0,Me.jsx)("div",{class:"overflow-x-auto",children:(0,Me.jsxs)("table",{class:"table w-full",children:[(0,Me.jsx)("thead",{children:(0,Me.jsxs)("tr",{children:[(0,Me.jsx)("th",{children:"\u0995\u09cd\u09b0\u0983"}),(0,Me.jsx)("th",{children:"\u09aa\u09cd\u09b0\u09b6\u09cd\u09a8"}),(0,Me.jsx)("th",{children:"\u0989\u09a4\u09cd\u09a4\u09b0 \u09a8\u0982"}),(0,Me.jsx)("th",{children:"\u09aa\u09cd\u09b0\u09b6\u09cd\u09a8 \u0989\u09a4\u09cd\u09a4\u09b0 \u09ac\u09bf\u09b7\u09df"}),(0,Me.jsx)("th",{children:"\u09ac\u09be\u09ac\u09b9\u09be\u09b0\u0995\u09be\u09b0\u09bf"}),(0,Me.jsx)("th",{children:"\u09b8\u09ae\u09cd\u09aa\u09be\u09a6\u09a8\u09be"}),(0,Me.jsx)("th",{children:"\u09ae\u09c1\u099b\u09c1\u09a8"})]})}),(0,Me.jsx)("tbody",{children:t.map((function(e,t){return(0,Me.jsx)(Px,{qa:e,setUpdateQa:s,index:t},e._id)}))}),(0,Me.jsx)("tfoot",{children:(0,Me.jsxs)("tr",{children:[(0,Me.jsx)("th",{}),(0,Me.jsx)("th",{}),(0,Me.jsx)("th",{}),(0,Me.jsx)("th",{}),(0,Me.jsx)("th",{}),(0,Me.jsx)("th",{}),(0,Me.jsx)("th",{})]})})]})}),i&&(0,Me.jsx)(Dx,{setUpdateQa:s,updateQa:i})]})},Ox=function(e){var t=e.kobita,n=e.setUpdateKobita,r=e.index;return(0,Me.jsxs)("tr",{className:"hover",children:[(0,Me.jsx)("td",{children:r+1}),(0,Me.jsx)("td",{children:t.name}),(0,Me.jsx)("td",{children:t.writer}),(0,Me.jsx)("td",{children:t.singer}),(0,Me.jsx)("td",{children:t.date_time}),(0,Me.jsx)("td",{children:"User"}),(0,Me.jsx)("td",{children:(0,Me.jsx)("label",{for:"update-modal",onClick:function(){return n(t)},className:"btn btn-primary btn-xs",children:"\u09aa\u09b0\u09bf\u09ac\u09b0\u09cd\u09a4\u09a8"})}),(0,Me.jsx)("td",{children:(0,Me.jsx)("button",{onClick:function(){window.confirm("Ary You Sure Want To Delete")&&fetch("http://128.140.52.151:5000/getkobita/".concat(t._id),{method:"DELETE"}).then((function(e){return e.json()})).then((function(e){console.log(e),n(null),Le("Deleted Successful")}))},className:"btn btn-warning btn-xs",children:"\u09ae\u09c1\u099b\u09c1\u09a8"})})]})},Lx=function(e){var t=e.updateKobita,n=e.setUpdateKobita,r=Cx(),i=r.register,a=r.handleSubmit,s=(r.reset,r.watch,r.formState.errors,t._id),o=t.name,c=t.writer,u=t.singer,l=t.link,d=t.date_time;return(0,Me.jsxs)("div",{className:"",children:[(0,Me.jsx)("input",{type:"checkbox",id:"update-modal",class:"modal-toggle"}),(0,Me.jsx)("div",{class:"modal",children:(0,Me.jsxs)("div",{class:"modal-box relative",children:[(0,Me.jsx)("label",{for:"update-modal",class:"btn btn-sm btn-circle absolute right-2 top-2",children:"\u2715"}),(0,Me.jsxs)("h3",{class:"text-lg font-bold",children:["\u0986\u09aa\u09a1\u09c7\u099f : ",t.name]}),(0,Me.jsxs)("form",{onSubmit:a((function(e){fetch("http://128.140.52.151:5000/getkobita/".concat(s),{method:"PUT",headers:{"content-type":"application/json"},body:JSON.stringify(e)}).then((function(e){return e.json()})).then((function(e){console.log(e),n(null),Le("\u0995\u09ac\u09bf\u09a4\u09be \u09b8\u09ae\u09cd\u09aa\u09be\u09a6\u09a8\u09be \u09b9\u09df\u09c7\u099b\u09c7")}))})),className:"p-5 grid grid-cols-1 justify-items-center",children:[(0,Me.jsxs)("div",{class:"form-control w-full max-w-xs",children:[(0,Me.jsx)("label",{class:"label",children:(0,Me.jsx)("span",{class:"label-text",children:"\u0995\u09ac\u09bf\u09a4\u09be\u09b0 \u09a8\u09be\u09ae"})}),(0,Me.jsx)("input",$($({},i("name")),{},{defaultValue:o,type:"text",placeholder:"\u0995\u09ac\u09bf\u09a4\u09be\u09b0 \u09a8\u09be\u09ae \u09b2\u09bf\u0996\u09c1\u09a8",class:"input input-bordered w-full max-w-xs"}))]}),(0,Me.jsxs)("div",{class:"form-control w-full max-w-xs",children:[(0,Me.jsx)("label",{class:"label",children:(0,Me.jsx)("span",{class:"label-text",children:"\u0995\u09ac\u09bf\u09a4\u09be\u09b0 \u09b2\u09c7\u0996\u0995"})}),(0,Me.jsx)("input",$($({},i("writer")),{},{defaultValue:c,placeholder:"\u0995\u09ac\u09bf\u09a4\u09be\u09b0 \u09b2\u09c7\u0996\u0995",type:"text",class:"input input-bordered w-full max-w-xs"}))]}),(0,Me.jsxs)("div",{class:"form-control w-full max-w-xs",children:[(0,Me.jsx)("label",{class:"label",children:(0,Me.jsx)("span",{class:"label-text",children:"\u0995\u09ac\u09bf\u09a4\u09be\u09b0 \u09b6\u09bf\u09b2\u09cd\u09aa\u09c0"})}),(0,Me.jsx)("input",$($({},i("singer")),{},{defaultValue:u,type:"text",placeholder:"\u0995\u09ac\u09bf\u09a4\u09be\u09b0 \u09b6\u09bf\u09b2\u09cd\u09aa\u09c0",class:"input input-bordered w-full max-w-xs"}))]}),(0,Me.jsxs)("div",{class:"form-control w-full max-w-xs",children:[(0,Me.jsx)("label",{class:"label",children:(0,Me.jsx)("span",{class:"label-text",children:"\u09ab\u09be\u0987\u09b2 \u09b2\u09bf\u0982\u0995"})}),(0,Me.jsx)("input",$($({},i("link")),{},{defaultValue:l,type:"text",placeholder:"\u09ab\u09be\u0987\u09b2 \u09b2\u09bf\u0982\u0995",class:"input input-bordered w-full max-w-xs"}))]}),(0,Me.jsxs)("div",{class:"form-control w-full max-w-xs",children:[(0,Me.jsx)("label",{class:"label",children:(0,Me.jsx)("span",{class:"label-text",children:"\u0995\u09ac\u09bf\u09a4\u09be \u09b2\u09c7\u0996\u09be\u09b0 \u09a4\u09be\u09b0\u09bf\u0996 \u0993 \u09b8\u09ae\u09df"})}),(0,Me.jsx)("textarea",$($({},i("date_time")),{},{defaultValue:d,type:"text",placeholder:"\u0995\u09ac\u09bf\u09a4\u09be \u09b2\u09c7\u0996\u09be\u09b0 \u09a4\u09be\u09b0\u09bf\u0996 \u0993 \u09b8\u09ae\u09df",class:"textarea textarea-bordered w-full max-w-xs"}))]}),(0,Me.jsx)("input",{type:"submit",value:"\u0986\u09aa\u09a1\u09c7\u099f \u0995\u09ac\u09bf\u09a4\u09be",className:"btn btn-primary"})]})]})})]})},Mx=function(){var e=u((0,a.useState)([]),2),t=e[0],n=e[1],r=u((0,a.useState)(null),2),i=r[0],s=r[1];return(0,a.useEffect)((function(){fetch("http://128.140.52.151:5000/getkobita").then((function(e){return e.json()})).then((function(e){n(e)}))}),[i,t,n,s]),(0,Me.jsxs)("div",{className:"mt-28",children:[(0,Me.jsx)("h1",{className:"text-2xl my-8 font-bold",children:"\u0995\u09ac\u09bf\u09a4\u09be\u09b0 \u0993\u09a1\u09bf\u0993 \u09b8\u09ae\u09cd\u09aa\u09be\u09a6\u09a8\u09be \u0995\u09b0\u09c1\u09a8"}),(0,Me.jsx)("div",{class:"overflow-x-auto",children:(0,Me.jsxs)("table",{class:"table w-full",children:[(0,Me.jsx)("thead",{children:(0,Me.jsxs)("tr",{children:[(0,Me.jsx)("th",{children:"\u0995\u09cd\u09b0\u0983"}),(0,Me.jsx)("th",{children:"\u0995\u09ac\u09bf\u09a4\u09be\u09b0 \u09a8\u09be\u09ae"}),(0,Me.jsx)("th",{children:"\u0995\u09ac\u09bf\u09a4\u09be\u09b0 \u09b2\u09c7\u0996\u0995"}),(0,Me.jsx)("th",{children:"\u0995\u09ac\u09bf\u09a4\u09be\u09b0 \u09b6\u09bf\u09b2\u09cd\u09aa\u09c0"}),(0,Me.jsx)("th",{children:"\u0995\u09ac\u09bf\u09a4\u09be \u09b2\u09c7\u0996\u09be\u09b0 \u09b8\u09ae\u09df"}),(0,Me.jsx)("th",{children:"\u09ac\u09cd\u09af\u09be\u09ac\u09b9\u09be\u09b0\u0995\u09be\u09b0\u09bf"}),(0,Me.jsx)("th",{children:"\u09b8\u09ae\u09cd\u09aa\u09be\u09a6\u09a8\u09be"}),(0,Me.jsx)("th",{children:"\u09ae\u09c1\u099b\u09c1\u09a8"})]})}),(0,Me.jsx)("tbody",{children:t.map((function(e,t){return(0,Me.jsx)(Ox,{kobita:e,setUpdateKobita:s,index:t},e._id)}))}),(0,Me.jsx)("tfoot",{children:(0,Me.jsxs)("tr",{children:[(0,Me.jsx)("th",{}),(0,Me.jsx)("th",{}),(0,Me.jsx)("th",{}),(0,Me.jsx)("th",{}),(0,Me.jsx)("th",{}),(0,Me.jsx)("th",{}),(0,Me.jsx)("th",{}),(0,Me.jsx)("th",{})]})})]})}),i&&(0,Me.jsx)(Lx,{setUpdateKobita:s,updateKobita:i})]})},jx=function(){var e,t,n=Cx(),r=n.register,i=n.handleSubmit,a=(n.watch,n.formState.errors),s=u(Mo(Bo),4),o=s[0],c=s[1],l=(s[2],s[3],U()),d=(null===(e=F().state)||void 0===e||null===(t=e.from)||void 0===t?void 0:t.pathname)||"/";c&&l(d,{replace:!0});return(0,Me.jsx)("div",{children:(0,Me.jsx)("div",{className:"flex justify-center items-center my-28",children:(0,Me.jsx)("div",{className:"w-9/12 lg:w-4/12 md:w-1/2 shadow-2xl p-12",children:(0,Me.jsxs)("form",{onClick:i((function(e){o(e.email,e.password)})),children:[(0,Me.jsx)("img",{className:"w-2/4 mx-auto",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgIAAAExCAYAAAAOQ8pSAAAABHNCSVQICAgIfAhkiAAAAF96VFh0UmF3IHByb2ZpbGUgdHlwZSBBUFAxAAAImeNKT81LLcpMVigoyk/LzEnlUgADYxMuE0sTS6NEAwMDCwMIMDQwMDYEkkZAtjlUKNEABZiYm6UBoblZspkpiM8FAE+6FWgbLdiMAAAeh0lEQVR4nO3d3XITV/b38bV2yyFn9h0gDDm2/1dgBYzHGFLoDnCuYDwV3qqMJ8oQngIMNc4VRNyBU9gOwcZRrmDMOSHiDsxZYtxrPQeyZ4jDi9V62d3S91M1VROj7t6SZenX+2VtEQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAckZjN2CQXFjanjr8/6rpmFiYjNkeCbbjnuwe/uePt8/+ErM5AID8IQi0afrG5mippFV3ryaJVmO3Jyszb6rIahqS+tPbZ5/Hbg8AIA6CwDEMypf/+xAKAGB4EQQ+4MLS9pSl6cIgfvm/j5k3g4b63htb2bp3/nXs9gAAeosg8A4Xlran3K0WVCqx2xKLue8GCSsEAgAYbASBt8wtPjtpIa0FCfOx25IXZt4U0dqTO9OPYrcFANB9BAE5mAPwia8QAN7PzJshkYWNf53/IXZbAADdM/RBYGZpeyLYfj2EyEv9CsLNV368c/4fsdsBAOiOoQ4CM0vbE8HTRlAdi92WIklTX01TmWfuAAAUX4jdgFhmF7euEAKySRKtlkremFt8djJ2WwAAnRnKHoG/3Xr290R9JXY7is7cd02TCrUHAKC4hq5HYHbp6feEgO4IqmMlsZ3Zxa0rsdsCAMhmqHoE5m49+1rUa7HbMYj2JUzSMwAAxTM0QWB2cetKCFKP3Y5BZebN/X2ZZAIhABTLUAwNXFjaniIE9FYIWi6N6GrsdgAA2jPwQWBmaXvCPeULqg+CSuXC4ua/Y7cDAHB8Az00MH1jc7Q0Ik2WCPaZepUKhABQDAPdI1AqOXUCIjCTOjUGAKAYBjYItCYHUjY4hqA6ZiGtxW4HAODjBjYIiLBMMKYgYX5maXsidjsAAB82kEGg1Rug5djtGHbBjcJNAJBzAzlZcHZx87fYQcDcd0V0J2YbRHwy+hwJJg4CQK6VYjeg2w4KB5X7dT0zb0rwhlhoBNHGxp1zr/p17XbMLG1PqHtFzCoapNKvgGCprIgIQQAAcmrgegT61Rtg7rsuofbTt+e+6/W1um36xuZo6RNfCRLm+3E9M5l/cmf6UT+uBQBoz0DNEZj75+blvoQAsfr+GykXMQSIiGzdO//6ye2ZL11CpTWE0WMq8z2/BgAgk4EKAuZe7fk1xOpPbs98OQg19X+8ffaX/TdSNrOezmUIKpXpG5ujvbwGACCbgQoC4trTIHAYAnp5jX7bunf+9ZM7M/9nYvVeXqdU6u3vBgCQzcAEgbl/bl7u5QS4QQwBb3tye+bLnvYMBKv07NwAgMwGJgj0clhg0EPAoSBJtWdzBnrcWwMAyGZggkCvvmjMvDkMIUBEZOPOuVfiutCLcwfVsQtL21O9ODcAILuBCAIXlranejcsoLXenDefntyZfmTmzV6cW90rvTgvACC7gQgCvWLmzeFc/96b8ONu7AQJADkzEEHA3Huyy6CKrPbivHnXq/DjquwGCQA5MxBBIBHpyZ2mJtLoxXmLwHx4nzsADJOBCAK9svfH8H4ZBtFG98/am54bAEB2BIEPGITqgVmZd3/CYPSdEAEAfzEQQSA16/qdZq9mzheFhtDsxXkpNQwA+TIQQUBDD+40VZtdP2eBvNlLe1JlcOSThOEBAMiRgQgC6L5hHhYBgGFCEAAAYIgRBAAAGGIEAQAAhhhBAACAIUYQAABgiBEEAAAYYgQBAACGGEEAAIAhRhAAAGCIEQQAABhiBAEAAIYYQQAAgCFGEAAAYIgRBAAAGGIEAQAAhhhBAACAIUYQAABgiBEEAAAYYgQBAACGmMZuQCdmlrYnEpExl/158VDu6snVmiqlelfPWTDuVuv+SaWuITRTkd2nt88+7/r5j+HM/bWf2z1mP0i9efXSo160Bygq/pYGQyl2A45rZml7Qt0rqumkeCgHlYqIHfxrqfLjt2d/6eb1LixtT6lYo5vnLJofv53uelCcvbX1s4pVSiIyt7Ql5tIQtaZ7spO4rG7cOfeq29c8SlUr7R5Tcml0vyVAsfG3NBhyHQQuLG1PWZouaJBKEBtr9V+Egvdj4G2tQBdE1EVUVmYXN5tBQ33vja1s3Tv/Onb7AGDQ5XKOwMzS9sTBnWMjSbQaVMditwn9EYKWRb1WGpHm3K1nX8duDwAMutwFgdnFrSslsZ3WnSKGVVAdE/Xa7OLT/0zf2ByN3R4AGFS5CgKzS0+/D0HqsduB/AghTJZGpDmztD0Ruy0AMIhyEwRmF7euBAnzsduB/AmqY8HTBj0DANB9uQgCM0vbE6K+ErsdyK+gOlYqOWEAALosF6sGgu3XQwiZJwSqWGNuaaubTZL/LU0cXnNLWx67DW8LIUx+MqILIvJN7LYAwKCI3iPwt1vP/h5CmIzdDhSDiS3MLT47GbsdADAoogaBucVnJ1V6UL0OAyuojqVuDCMBQJdEHRpI3VaSQI0AtCdJtHphaXvqx9vdrSYJoD3u3mj3mP0gze63BJ2IFgRa+wRYNdb1UWwH+yB8HrsdwDB7cf0Sf4MDINrQgLpXYl0bxRdUKqwgAIDORQsCiQhDAuhIqaT0KAFAh6IFgdSMlQLoSFAtx24DABRdvKEBJgmiQ6ZpOXYbAKDoogUBNhVCxzyUYzcBAIouekEhAAAQD0EAAIAhRhAAAGCIEQQAABhiBAEAAIZYLrYhBjBYTj1YP+nilZJr+fBnbjap+u5lw27a1OStGvSujRfX5wZ2L4l3vj6plDV4+b0HvU218a4f74vsSLBm86svnnehmR/12fJ621uVu0jtxbWLbW8lfmZ5/WsVqX3scW9Eqs1rF39o9/x/utb9jSnRt6rffqwSrmqjyO9ZggCAjpUfPp4Ib5KKik+KeiW4lEX0T4/R8P4OSE2O/sDls+V1MZMdD94w0Yaq7Px29eKr7re+987c35gyk0nVtCIqleAy9pfXJxE5+rMPqLzrhyMiIhb++9qJy44m0hTXRhq8WdTXrx0lkUkRaSsI/Pf9q2klhFAVOZJv9KO/l4qoy+n7j3fFpeGeNERG6i9vnn/dTjtiIQgAyOTUg/WTicu8uy0EC2OSHH54HvvL7KNCkEkRnUxEFsRFTt9ba6aJ1JpXLz3q2kV6pPzw8UTyJiyEROZFXJJEpJ+jsa3XTloVXNWl5CKfLa+LuzdMZUfS0AxBdsxGdoryhXUsrbv3j/Y4vPv929nvJ2gYE5WqiFfNf6+NL6/VXXUl7wGMIACgLacerJ8M+1ILLvMiIqr9/HLTcnCpn763VnMPK3m86zpzf2NKxGpqWpGjPR05oKqVRKRyGNxCeFMRkUJ2ab+Lu5Q/9O/9ev8GDWPSCrAL48trK5KeqOXtvXqIyYIAjqX88PHEmftrP5dcmq273HhC0HKS+IqG35tnlte/jtmWQ+Xl9cun7639puoNVa3Ebs+wCkHL43f/ujNpzPdvIrqgutc49WD9ZD+ve1wEAQAfVV5ev5ykkrsvuKBhTEVqp++t/+ddH/79cvru+vcjIqshaDlWG/A/Ibz506Z2Z5bXvx6xsBPz/RuCTAaznVaPUb4QBAB8UPnB2pURkdWDrs5cCkEmNfze7PeH7KkH6ydP31v/T+weEhxxMOP/8PdznNUG/RA0jKl6I29hgCAA4L3Gl9f+PeJaj92O4zj8kB2/u/H3flzvzP2NqWC2czApDzniqZTH7278Pa+/H3erx+zBOoogAOCdxpfX/p2ILsRuR7uSxFfGl9f+3ctrlJfXL6t6I8+9JMMsJDKfJL6S199PCFpW/b0eux2HCAIA/qK8vH65iCHgUCK6UF5ev9yLc7eWnVm9F+fG8AghVPMyRMDywRww911RXw2qq+7J7nseM6ni1aDvLiQCdEv54eOJJLW69HFZYC8kbvXyw8eVblbZG7+7Oarp3moI+bzTRNFYTUQ+j90KgkBE5tIIwVee3D5/nCpYv4jId9M3NkdLJa2KeI0Zyui28bubo7q/Vw9BuvpFZ2arGsLOe/9dfExNK90czw0axmRf6uN3NyvdWr+tsrfSizFnM9lR9XfeBLyzHTlbvTFI3ve7cJdytz9zVbVy5v7GVOzSxASBCMyloRpqT7492/Yvf+ve+dci8mj6xubqJyO6YGIL4T3124G2JX/UgmjHX3TmtuuqdRNttFP3ffzu5qiV/qgm+1rpxkz8EGQylT9qIvKPTs9VXl6/HKQ7qwPMvFX2t+SNsH9iNUtQOfVg/WRiWhb1iptNioRyHifGFYGZNzVoPVWp/3bjw1UAyw8fT5TSZMzUqmpS7TwcxO8VIAj0mYnVn3w782Wn5zkIBN/MLG2viqcNwgA6dVBytaN5AWbebFX8+zRTxb+DYx6JyKPyw8crpVRXOr37TUQXTj1Y77jMa2K+IqGz8slmspMmvtK80XmJ5IPn80oOqgK2xpu90el5h4mlUk9HbKV57fjDR28NNf0iIv8oP1i70snKGlWtlB8+nujXRlHvEi8IuNayHmqalsVDuWjj5SZWf3K78xDwtqe3zz6fW3w2aZ6uhhC4G0BmYV9qnZTEtVTqv9681LX398EH4+edftCKHDw3kcxtKz9YuxLe2imwXea2q5JUf71RzN3pBslhb5Wrrvx2s/M9AJpXLz0qP3y8k6SSeRVJeJNURGT4gsDGt+fa3obyqJml7Ylg+/UifAH2IgQc2rhz7tX0jc1KqWSNIrwWyJ/xu5ujIdmbz3q8mez8evNiT97fzauXHpWX13cTt3rmD9pE5sfvbi5knSuQpLqQdY2VmeykJZlvfjUX7YMeLZZK3eXTzO+D92l+9cXz8oO1heBSz3K8ikf93C70tOCnt88+39/XivnxJ9lE4VrrVQg4tHXv/OtCvBbIpZDsZR4SMJMd908qXWzOXzSvXfwhTaRibpnf31mf45n7G1NZx94PX5uY3b5oafVYXfyyVxv/NK9eeuSecWhG487tKHQQEDkYK/f8rndOXRe60ftxHFv3zr82TQgDaMv43c1Rd8v0N2Ruu2nJ5vuxq1rzqy+euyW1rMe720K2am6W6ZrmtmuJVPO649wwSVNd6FWP1Z+FWqajIk/yLHwQEBEJoo3YbXgXM2/+9O257/p5zae3zz4PElb6eU0UmyV7laxd7mnQhX7e7b68Ofedmbx3GeKHBA1jluxV2jlm/O7maNbJimkilbzvQz8M3qjPv7w515fP4RfX537J+v6MWVxoIILAfsjrjPnsEyI7sffGVsy8GePaKJ4grQ1a2uXujebVzme/t0s1ew9gu8+13eBwyEVqDAfkQ7/foxpktZ/X64aBCAJB9nM3NGDmzSd3pvv+ISlyuLQwTghB8ahlu+PdD9kmRnWqk7uudp9r1pCUapzXBvHtB8sUBMziDQ8UPghcWNqeChLmY7fjKNe43fNP7kw/Yq4AjiPr+GTYPxHtzidNPNPfV7vPNXj7r427NxgSGF5Ze4JC4tF6tgsbBGaWtidml55+r2KN2G15l8Rz0D2kHr8NyLWs45JmlqkaXreE/ROrWVcQtPOcs8wPiNVTgvzoZHVLDNHqCMwtbXlnZzDJa44xs50nd2ai3xEE1VXx7pRExYDSrPMDkkZ3G9KelzfPvz5973FDVKptH9x6zh8t7HNQqa/90+d08jL6R0V3RNoreNcqEx1HPr9Ji05DPtJg+v5NXgAREfFsQSCEbGP03fShTYw+6LjPOWNIYlgAWWjEMvEEgV5Qa8Zugkir4mDsNmAwmY1EDwL7Ej+MHJW5oAwQEUGgB4InzdhtOMQyQnSbue3mokhOyBa43aV8rMelx3vcn44xbbZ7DBAbQWDQKR9M6K6D8c/oMs/OPua2sRr8WI/70zGJNNs9BoiNINADacRJH38VdzML5Jt7XotxHU/RZmcDeUQQ6AHNUaXDEHECCvIvdo3zTuWld+KQpUowQeEQBHogaHvLRnrlwtJ2tNrVGGBa/OVxpx6sn/zYY447l+BteVhNAbSLINAjc4vPPvpB02tuVo7dBqCXTLN98Sam5Y895rhzCYCiIwj0ShJ/noAyPwADLghd8UCnolUWNJdG5oPdy3lP62a6ICI/xLr+9I3NUVeZ11gNAPrAUylrErsVQLFFCwJPvp3+vNNz/O3Ws7+rWC2PE+KCSmVmaXvi6e2zUbYiTUbCfNB4m1hgcJnk533VWuLXftxNQ2/qa+wHK8sxyhcDeVLooYGfvj33nWlSid2O94m5PbK65W5rZgyGLDvy5U2vygCXXMu9OC/QS4UOAiIiT2+ffS6utdjteJcgYT7GpMHZxa0reR86QT4UvfJklt0Bj8uMFQAYDoUPAiIi+6q53W43dcu0b3pW0zc2R0W81s9rorhUqYT3Pqre9kTELGWJgdgGIgiUrP0/2H5JEq3OLj39vh/Xmr6xOVoqeYPeAPRSL+/C29HaJrh9vbzTz1KWGIhtIIKAqMzHbsKHBAnzs4tbV3p5jf+FgFD48Vvk33EK8vTawcS8tmW50z/+ufMRkoB2FD4IzC0+O2mS/4lxIUi9V2GAEICs3LN9KR6nIE+vZZ2Yd9znnHUnwTyEJKAdhQ4Cs4tbV0yskcflg+8SgtRnb2393M0JhHP/3LxcGpEmIQBZuCeNTAeqV7rakCw8WxuO+5zTkh/rcX85v+TgtQHaEK2OwOytrZ87O4NPBpWxLGuIYwoqFVFvzi49re/v6cLWvWz7us8tPjtp6nVxqYRivQTIERtJG4m1fz/gJlUR+ab7LTqeUw/WT6pn29PDRtLGcR6nkm1PhST1qog8ynIsEEO0HoGgUunsf8XoBXifIGG+NCLNmaXtiXaPnVnanjC1nbxsboTian71RaaCVyHIZMwucHXPPBx43Of829WLr7JscxxCqDI8gCIp9NBA0QXVsUSk7UCTiIwVPQghP9yzdYF38mXcifG7m6PqPp/l2Lafa8ZS6InnewIz8DaCADDsMm4rrO7z43c3R7vcmo8Kyd5C0JAtCLf5XLPOoXC3hRivDZAFQQAYdp4tCAQNY5L8UetuYz5s/O7mqHdSPrvN53rc+QRHBQ1jqr/XsxwL9BtBABhyL67P/ZK11HAiupC1sE8WnfQGmHnzxfW5tjYEan71xfOsBYhCCNV+vjZAVgQBAJImUst6rLuv9KMbvPzw8UQnvQFZn2OaeOYy4S7pKmEAeUcQACDNq5ceZZkhL9JaQaC61+hlGCg/WLsyYmEnc2+A227z6qVMS/rC/onVzK+NhjFVb5QfrPW0sijQCYIAABERUQ2Z73wPw0C3l82N390cPX13/fsR13on5+nkub28ef61a2fXH3Gtn7m/9nP54eO2lwsfR/nh4wm3bCspgGgFhQDki6WfrGj4PfMYfAgyGVya48trK5KeqL28ma1Y1qEz9zem3P+od7qJlrntun3a0S6grroiLh0tl1TVyojpzum763UNWm93vsJR5eX1y0G8oibVYFqWpJOzYZgRBACISOvO98zy+opI9vkCIq0JhBZ+nx9fXqubaKN57eIPxz12/O7mqJX+qCb7WlH1edXOy2aqhpVfOwwlv129+Gp8eW0lEe24dkJIZF7E50/ff7wrLo000dWSheZ+ku4eLXZUfvh4opQmrWB2UNbZUylLsGqQg8qq9OuiQ9GCwMbt6cx/4XOLz0560LKl6UKSaLWb7QLexVMpF23Sl9nITrt35S+uXfzmzP21Sqe76B30KiwkIgufLa+Lma1qCK3Z90eX8KlXTHxMTSsh7E0mrtKtu1t3b7y4fqk7pZDTEzXTvUoI0pV9PYKGMVGpBpeqqMuIBflsef3PDzIRUf/TjzQR4dsf3VTIHoGNO+deicgrEflldnHrSghSj9wkDLjDu7jY7WhHCG8qItJ297PZiaqG35uZi/a8sy2hKiKt0H7ki01EJOnBne3BkEDXbhRe3jz/uvzw8XywkGk5IZBXhY+VT+5MP0pTX43dDmBQvLx5/rVKUvieNpWk2uk8haOaX33x3DscOgHypvBBQEQkJElHE4EA/NmL63O/FPkLz0VqnU7Ge58X1y5+k3V/BiCPBiIIvNlL6aoDuuzFtYvfpJK9mE4saaoLL65d7OkWyWYnqoQBDIqBCAKlEhMGgV54ee3SP95oMeZGmNuuu1Ze3pz7rtfXennz/OsX1y99binzk1B8hZws+LbpG5ujIl4T6XyZUQxu+yuzt7baqlrmtj+mYSAyHAqgefXSo/Ly+m7iVu/mBMJuMpMd908rnS4TbNevNy9+eWZ5vakFHkYBCh0E5hafnUzdVjotOBJTCKH9pUhKCEB/Na9d/KH88HFFU1/pdGlhN5nbrmpY+fVGb4cCPuTFtYvflJfXdxLzQn8WYXhFCwJzt5593cnxqdmkBK8mBe0JAIrmoNjN56cerJ8M+1JrLamMw8ybGrTu9mnHxYK64aBo0g+tWhNWy1NYAj4mXo+Aeq2Tw5OEAADE8NvVi69E5MtTD9Zricu8u2UuS9wuM2+midSaN7JtINRrBysVPi8/fDyRvAkL/QhL5rbrqnVJQzPpYKdEDK9CDw0AiOcgEHwjIt+UHz6eCG+SimpaEdHJbnWRm8mOB2+YaENVdn67celVN87bawe9J1+KyJdn7m9MiXpF3CsuPtmt0GSp1NNEVpvXv/hBpLU3QzfOi+FDEADQsYMvvuci8p2IyKkH6yddvFJyLYuIiB/UyXcpHw0JZrKj6rvuvvt2GeJe1QHot4Pn8Yu0QpMchqaQ+JiJjwVvlSx+V0g4fG1ERERbpZn31Zth/8Tq0WJJ+8HKI05PKdoX7V0zt7T11zqjQBvMpfHk2+nPY7cDyIMzy+tfZ1m9kKafjHW7AiOKhennADAIDnpd2kUIAEEAAAZAlpUK5tZWDRMMJoIAABRceXn9cpbjVJTy7IgXBMydJIqOBDmyrz0wpEruC1mOc9Nml5uCAorYI0ASRWfMvRm7DUBsZ+5vTGUtYJSW2DgJEYOAGz0C6IyG0IzdBiCm8bubo+7ZiwiF/ROr3WwPiilaEFBV3oDoyI+3zw7EOnMgi/G7m6Oqe40QpP39SkTE3RusGIBIxIJCrfFdSgkgG3NpxG4DhtOZ+xtTZjJpI2njoJBS35UfrF3R9I9aJxUczQI3YxCRiEFg4865V7O3thpBpRKrDSguF3qUEIl6JUmklliQz5bXxd0bprLz3zLIrdLLXTd+d3NU5M28qi0E13In/bmtZYOf1rvVNhRb1BLDqqEmYo2YbUDxmHkz3fd67HYAIq31+4lIJRFZEBc5ff/xrrg0NIQd8f+tbNlP0t12exAOex9U00oIe9WDK3bcZrekxrAADkUvTD17a+tnegXQFvXqxr/O/xC7GRhOWUv5HmXmTVVpvu/fe7WVsbs3Xly/RGlu/Ff0TYdMw4J42giqfdnGFMWWpr760/8jBKD4Dsb3y/2+7n6SreYABlf0yoJPb599bppUYrcD+WfmzTTt/f7uwKB6oz4fa4Ij8it6EBA5CAPGBzw+zEJS3brHuCaQhaVSb1699Ch2O5A/uQgCIiJP7kw/EvUqpYdxlLnvinr16e2z3MkAGZjZ6q83L34Zux3Ip9wEARGRjX+d/8E0qZgZ5YchIq16AcHDJJMDgWzcveH+6XzsdiC/ok8WPOrp7bPPp29sVkZKXtOgTGoZUua+6xJqP3177rvYbQGKyMybadCF5vVLhGh8UO6CgIjIwTjwP+YWn62Yep3lhcPloBdgfuPOuZ4UZgEGmbnttuoEXCRE41ii1xE4jukbm6OfnJCKp1Jx1UlxL3dSWhP5YeZNUW0G0YarNt7spTtMCESenbm/MWVqVTWtZK3z3wtm3nQPKyIjdYoFoR2FCAIAkFdn7m9MiXrFzSZFpRI09LUmiqVS16D1F9fn2IQLmRAEAKCLTj1YP+nileAyGVwm3aUrPZjmtquiO6ayI2lohiA7ZiM73P2jUwQBAOiDUw/WTyamZTOZDIl/sNfAUt0NQf67eoovfAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8AH/HwmuAeunPEJwAAAAAElFTkSuQmCC",alt:""}),(0,Me.jsxs)("div",{class:"form-control",children:[(0,Me.jsx)("label",{class:"label",children:(0,Me.jsx)("span",{class:"label-text",children:"\u0987\u09ae\u09c7\u0987\u09b2"})}),(0,Me.jsx)("input",$($({},r("email",{required:!0})),{},{type:"email",class:"input input-bordered"})),(0,Me.jsx)("label",{class:"label",children:(0,Me.jsx)("span",{class:"label-text-alt text-red-500",children:a.email&&(0,Me.jsx)("span",{children:"This field is required"})})})]}),(0,Me.jsxs)("div",{class:"form-control",children:[(0,Me.jsx)("label",{class:"label",children:(0,Me.jsx)("span",{class:"label-text",children:"\u09aa\u09be\u09b8\u0993\u09df\u09be\u09b0\u09cd\u09a1"})}),(0,Me.jsx)("input",$($({},r("password",{required:!0})),{},{type:"password",class:"input input-bordered"})),(0,Me.jsx)("label",{class:"label",children:(0,Me.jsx)("span",{class:"label-text-alt text-red-500",children:a.password&&(0,Me.jsx)("span",{children:"This field is required"})})})]}),(0,Me.jsx)("button",{type:"submit",className:"btn btn-accent w-full text-white font-bold",children:"\u09b2\u0997\u0987\u09a8"})]})})})})},Fx=function(e){var t=e.children,n=u(Lo(Bo),2),r=n[0],i=n[1],a=F();return i?(0,Me.jsx)(je,{}):r?t:(0,Me.jsx)(H,{to:"/login",state:{from:a},replace:!0})},Ux=function(){var e=u((0,a.useState)(""),2),t=e[0],n=e[1];return(0,Me.jsxs)("div",{children:[(0,Me.jsx)("h1",{className:"text-3xl border-b-4 border-accent mt-28 inline-block",children:"\u098f\u0995\u099f\u09bf \u09a8\u09a4\u09c1\u09a8 \u09a8\u09cb\u099f\u09bf\u09b6 \u09af\u09cb\u0997 \u0995\u09b0\u09c1\u09a8"}),(0,Me.jsxs)("form",{onSubmit:function(e){e.preventDefault();var n="https://docs.google.com/uc?export=download&id=".concat(t),r=e.target.description.value,i={link:n,description:r};fetch("http://128.140.52.151:5000/notices",{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify(i)}).then((function(e){return e.json()})).then((function(t){e.target.reset(),function(){var e={app_id:"1daf2556-5bbc-44d3-956a-e56318d29698",included_segments:["Subscribed Users"],data:{foo:"bar"},contents:{en:"".concat(r)}};fetch("https://onesignal.com/api/v1/notifications",{method:"POST",url:"https://onesignal.com/api/v1",headers:{"Content-Type":"application/json",Authorization:"Basic ".concat("NDM0YjVhMDItYzI2MC00NTVmLWI5MjYtZmRiYWJhY2UyYzIz")},body:e?JSON.stringify(e):null}).then((function(e){return e.json()})).then((function(e){console.log(e)}))}()}))},className:"mt-8 flex justify-center items-center flex-col",children:[(0,Me.jsxs)("div",{class:"form-control w-80",children:[(0,Me.jsx)("label",{class:"label",children:(0,Me.jsx)("span",{class:"label-text",children:"\u09ab\u09be\u0987\u09b2"})}),(0,Me.jsx)("input",{type:"file",id:"customFile",placeholder:"\u0993\u09a1\u09bf\u0993 \u09ab\u09be\u0987\u09b2",onChange:function(e){return function(e){var t=e.target.files[0],r=new FileReader;r.readAsDataURL(e.target.files[0]),r.onload=function(e){var i={dataReq:{data:r.result.split(",")[1],name:t.name,type:t.type},fname:"uploadFilesToGoogleDrive"};fetch("https://script.google.com/macros/s/AKfycbwYKgy85mYgpiT7U3mV2T6vum0yKg_I-AAJegLuNfeosEO_HligOW_ic_M1mW8pUqk/exec",{method:"POST",body:JSON.stringify(i)}).then((function(e){return e.json()})).then((function(e){e.id&&(Le.success("\u09ab\u09be\u0987\u09b2 \u0986\u09aa\u09b2\u09cb\u09a1 \u09b9\u09df\u09c7\u099b\u09c7"),n(e.id))})).catch((function(e){return console.log(e)}))}}(e)}})]}),(0,Me.jsxs)("div",{class:"form-control w-80",children:[(0,Me.jsx)("label",{class:"label",children:(0,Me.jsx)("span",{class:"label-text",children:"\u09ac\u09bf\u09ac\u09b0\u09a3"})}),(0,Me.jsx)("textarea",{name:"description",class:"textarea textarea-bordered",placeholder:"\u09ac\u09bf\u09ac\u09b0\u09a3 \u09b2\u09bf\u0996\u09c1\u09a8"})]}),(0,Me.jsxs)("div",{class:"form-control w-80",children:[(0,Me.jsx)("label",{class:"label",children:(0,Me.jsx)("span",{class:"label-text",children:"\u0997\u09c1\u0997\u09b2 \u09ae\u09cd\u09af\u09be\u09aa \u09b2\u09bf\u0982\u0995"})}),(0,Me.jsx)("input",{name:"googleMap",class:"input input-bordered",placeholder:"\u0997\u09c1\u0997\u09b2 \u09ae\u09cd\u09af\u09be\u09aa \u09b2\u09bf\u0982\u0995"})]}),(0,Me.jsx)("button",{disabled:!t,className:"btn btn-md btn-accent text-white my-4 rounded-md",type:"submit",children:"\u09a8\u09cb\u099f\u09bf\u09b6 \u09af\u09cb\u0997 \u0995\u09b0\u09c1\u09a8"})]})]})},Bx=function(){for(var e=ju(),t=u((0,a.useState)(!0),2),n=t[0],r=t[1],i=u((0,a.useState)([]),2),s=(i[0],i[1]),o=Cu((function(e){return e.boyan.allboyan[0]})).map((function(e){return e.date})),c=[],l=0;l<o.length;l++){var d=jd()(jd()(o[l]).format("YYYY/MM/DD")).format("MMMM");c.push({month:d,year:o[l].slice(0,4)})}var h=["January","February","March","April","May","June","July","August","September","October","November","December"];c.sort((function(e,t){return e.year!==t.year?t.year-e.year:h.indexOf(t.month)-h.indexOf(e.month)}));for(var f=[],p=0;p<c.length;p++)f.push(c[p].month+" "+c[p].year);for(var v=f.filter((function(e,t,n){return n.indexOf(e)===t})),m=[],g=0;g<v.length;g++)m.push({month:v[g]});return console.log(m),(0,a.useEffect)((function(){fetch("http://128.140.52.151:5000/getboyans").then((function(e){return e.json()})).then((function(t){e(Ad(t)),r(!1)}))}),[e]),(0,a.useEffect)((function(){fetch("http://128.140.52.151:5000/getsubjects").then((function(e){return e.json()})).then((function(e){s(e),r(!1)}))}),[e]),n?(0,Me.jsx)(je,{}):(0,Me.jsxs)("div",{style:{backgroundImage:"url(".concat(Gd,")"),backgroundPosition:"center",backgroundSize:"cover",backgroundRepeat:"no-repeat"},className:"mt-16 mb-20 h-screen",children:[(0,Me.jsx)("h1",{className:"my-8 bg-black bg-opacity-40  text-white font-bold text-xl p-5",children:"\u09ac\u09df\u09be\u09a8\u09c7\u09b0 \u09ae\u09be\u09b8 \u0993 \u09b8\u09be\u09b2 \u09ac\u09be\u099b\u09be\u0987 \u0995\u09b0\u09c1\u09a8"}),(0,Me.jsx)("div",{className:"grid grid-cols-2 mx-4",children:m.map((function(t){return(0,Me.jsxs)(Xe,{onClick:function(){return e(Dd(t.month))},"data-aos":"zoom-in",to:"/mobile_boyans",className:" bg-black bg-opacity-40 text-white text-sm p-3  mt-4 te mx-2 shadow-md flex justify-left items-center rounded-lg font-bold hover:bg-white hover:text-black",children:[(0,Me.jsx)(It,{}),t.month]})}))})]})},Gx=function(){var e=ju(),t=u((0,a.useState)(!0),2),n=t[0],r=t[1],i=u((0,a.useState)([]),2),s=i[0],o=i[1];return(0,a.useEffect)((function(){fetch("http://128.140.52.151:5000/getanswer").then((function(e){return e.json()})).then((function(t){e(Cd(t)),r(!1)}))}),[e]),(0,a.useEffect)((function(){fetch("http://128.140.52.151:5000/get_qa_categories").then((function(e){return e.json()})).then((function(e){o(e),r(!1)}))}),[e]),n?(0,Me.jsx)(je,{}):(0,Me.jsxs)("div",{style:{backgroundImage:"url(".concat(Gd,")"),backgroundPosition:"center",backgroundSize:"cover",backgroundRepeat:"no-repeat"},className:"mt-16 mb-20 h-screen",children:[(0,Me.jsx)("h1",{className:"my-8 bg-black bg-opacity-40  text-white font-bold text-xl p-5",children:"\u09aa\u09cd\u09b0\u09b6\u09cd\u09a8-\u0989\u09a4\u09cd\u09a4\u09b0 \u09ac\u09bf\u09b7\u09df \u09ac\u09be\u099b\u09be\u0987 \u0995\u09b0\u09c1\u09a8"}),(0,Me.jsxs)("div",{className:"grid grid-cols-2 mx-4",children:[(0,Me.jsxs)(Xe,{onClick:function(){return e(Rd("all"))},"data-aos":"zoom-in",to:"/mobile_answers",className:" bg-black bg-opacity-40 text-white text-sm p-3  mt-4 te mx-2 shadow-md flex justify-left items-center rounded-lg font-bold hover:bg-white hover:text-black",children:[(0,Me.jsx)(It,{}),"\u09b8\u0995\u09b2 \u09aa\u09cd\u09b0\u09b6\u09cd\u09a8-\u0989\u09a4\u09cd\u09a4\u09b0"]}),s.map((function(t){return(0,Me.jsxs)(Xe,{onClick:function(){return e(Rd(t.categoryName))},"data-aos":"zoom-in",to:"/mobile_answers",className:" bg-black bg-opacity-40 text-white text-sm p-3  mt-4 te mx-2 shadow-md flex justify-left items-center rounded-lg font-bold hover:bg-white hover:text-black",children:[(0,Me.jsx)(It,{}),t.categoryName]})}))]})]})},Vx=function(){var e=u((0,a.useState)(""),2),t=e[0],n=e[1],r=u((0,a.useState)([]),2),i=r[0],s=r[1];(0,a.useEffect)((function(){fetch("http://128.140.52.151:5000/getsubjects").then((function(e){return e.json()})).then((function(e){s(e)}))}),[i]);return(0,Me.jsxs)("div",{children:[(0,Me.jsx)("h1",{className:"text-3xl border-b-4 border-accent mt-28 inline-block",children:"\u098f\u0995\u099f\u09bf \u09a8\u09a4\u09c1\u09a8 \u099b\u09cb\u099f \u09ac\u09df\u09be\u09a8\u09c7\u09b0 \u0993\u09a1\u09bf\u0993 \u09af\u09cb\u0997 \u0995\u09b0\u09c1\u09a8"}),(0,Me.jsxs)("form",{onSubmit:function(e){e.preventDefault();var n=e.target.name.value,r=e.target.subject.value,i=e.target.date.value,a=e.target.description.value,s="https://docs.google.com/uc?export=download&id=".concat(t),o={name:n,subject:r,date:i,link:s,description:a,mainCategory:"shorts"};fetch("http://128.140.52.151:5000/addshort",{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify(o)}).then((function(e){return e.json()})).then((function(t){Le.success("\u099b\u09cb\u099f \u09ac\u09df\u09be\u09a8 \u09af\u09cb\u0997 \u09b9\u09df\u09c7\u099b\u09c7"),console.log(t),e.target.reset(),function(){var e={app_id:"1daf2556-5bbc-44d3-956a-e56318d29698",included_segments:["Subscribed Users"],data:{foo:"bar"},contents:{en:"\u0986\u09b0\u09bf\u09ab \u09ac\u09bf\u09b2\u09cd\u09b2\u09be\u09b9 \u09b9\u099c\u09b0\u09a4 \u09ae\u09be\u0993\u09b2\u09be\u09a8\u09be \u09ae\u09c1\u09ab\u09a4\u09bf \u09b6\u09ab\u09c0 \u09b8\u09be\u09b9\u09c7\u09ac\u09c7\u09b0 ".concat(r," \u09ac\u09bf\u09b7\u09df\u09c7 \u099b\u09cb\u099f \u09ac\u09df\u09be\u09a8\u0983- ").concat(n,", \u09af\u09cb\u0997 \u09b9\u09df\u09c7\u099b\u09c7 \u098f\u0996\u09a8\u0987 \u09b6\u09c1\u09a8\u09c1\u09a8")}};fetch("https://onesignal.com/api/v1/notifications",{method:"POST",url:"https://onesignal.com/api/v1",headers:{"Content-Type":"application/json",Authorization:"Basic ".concat("NDM0YjVhMDItYzI2MC00NTVmLWI5MjYtZmRiYWJhY2UyYzIz")},body:e?JSON.stringify(e):null}).then((function(e){return e.json()})).then((function(e){console.log(e)}))}()})),fetch("http://128.140.52.151:5000/latest",{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify(o)}).then((function(e){return e.json()})).then((function(e){console.log(e)}))},className:"mt-8 flex justify-center items-center flex-col",children:[(0,Me.jsxs)("div",{class:"form-control w-80",children:[(0,Me.jsx)("label",{class:"label",children:(0,Me.jsx)("span",{class:"label-text",children:"\u0993\u09a1\u09bf\u0993 \u09ab\u09be\u0987\u09b2"})}),(0,Me.jsx)("input",{type:"file",id:"customFile",placeholder:"\u0993\u09a1\u09bf\u0993 \u09ab\u09be\u0987\u09b2",onChange:function(e){return function(e){var t=e.target.files[0],r=new FileReader;r.readAsDataURL(e.target.files[0]),r.onload=function(e){var i={dataReq:{data:r.result.split(",")[1],name:t.name,type:t.type},fname:"uploadFilesToGoogleDrive"};fetch("https://script.google.com/macros/s/AKfycbwYKgy85mYgpiT7U3mV2T6vum0yKg_I-AAJegLuNfeosEO_HligOW_ic_M1mW8pUqk/exec",{method:"POST",body:JSON.stringify(i)}).then((function(e){return e.json()})).then((function(e){e.id&&(Le.success("\u09ab\u09be\u0987\u09b2 \u0986\u09aa\u09b2\u09cb\u09a1 \u09b9\u09df\u09c7\u099b\u09c7"),n(e.id))})).catch((function(e){return console.log(e)}))}}(e)}})]}),(0,Me.jsxs)("div",{class:"form-control w-80",children:[(0,Me.jsx)("label",{class:"label",children:(0,Me.jsx)("span",{class:"label-text",children:"\u09a4\u09be\u09b0\u09bf\u0996"})}),(0,Me.jsx)("input",{name:"date",type:"date",class:"input input-bordered w-full max-w-xs"})]}),(0,Me.jsxs)("div",{class:"form-control w-80",children:[(0,Me.jsx)("label",{class:"label",children:(0,Me.jsx)("span",{class:"label-text",children:"\u099b\u09cb\u099f \u09ac\u09df\u09be\u09a8\u09c7\u09b0 \u09a8\u09be\u09ae"})}),(0,Me.jsx)("input",{name:"name",type:"text",placeholder:"\u099b\u09cb\u099f \u09ac\u09df\u09be\u09a8\u09c7\u09b0 \u09a8\u09be\u09ae \u09b2\u09bf\u0996\u09c1\u09a8",class:"input input-bordered w-full max-w-xs"})]}),(0,Me.jsxs)("div",{class:"form-control w-80",children:[(0,Me.jsx)("label",{class:"label",children:(0,Me.jsx)("span",{class:"label-text",children:"\u09ac\u09bf\u09b7\u09df \u09ac\u09be\u099b\u09be\u0987 \u0995\u09b0\u09c1\u09a8"})}),(0,Me.jsx)("select",{name:"subject",class:"select select-bordered w-full max-w-xs",children:i.map((function(e){return(0,Me.jsx)("option",{children:e.subjectName})}))})]}),(0,Me.jsxs)("div",{class:"form-control w-80",children:[(0,Me.jsx)("label",{class:"label",children:(0,Me.jsx)("span",{class:"label-text",children:"\u09ac\u09bf\u09ac\u09b0\u09a3"})}),(0,Me.jsx)("textarea",{name:"description",class:"textarea textarea-bordered",placeholder:"\u09ac\u09bf\u09ac\u09b0\u09a3 \u09b2\u09bf\u0996\u09c1\u09a8"})]}),(0,Me.jsx)("button",{disabled:!t,className:"btn btn-md btn-accent text-white my-4 rounded-md",type:"submit",children:"\u099b\u09cb\u099f \u09ac\u09df\u09be\u09a8 \u09af\u09cb\u0997 \u0995\u09b0\u09c1\u09a8"})]})]})},Hx=function(e){var t=e.setAudioData,n=u((0,a.useState)([]),2),r=n[0],i=n[1],s=u((0,a.useState)(!0),2),o=s[0],c=s[1],l=u((0,a.useState)([]),2),d=l[0],h=l[1],f=u((0,a.useState)(!1),2),p=f[0],v=f[1],m=u((0,a.useState)(0),2),g=m[0],y=m[1],b=u((0,a.useState)(0),2),k=b[0],x=b[1],w=u((0,a.useState)(20),2),T=w[0],E=w[1];if((0,a.useEffect)((function(){fetch("http://128.140.52.151:5000/getshorts").then((function(e){return e.json()})).then((function(e){y(Math.ceil(e.length/20))}))}),[]),(0,a.useEffect)((function(){fetch("http://128.140.52.151:5000/getshorts").then((function(e){return e.json()})).then((function(e){i(e),c(!1)}))}),[]),o)return(0,Me.jsx)(je,{});var _=function(e){t(e);var n=e.view?e.view:0,r={view:parseInt(n)+1};fetch("http://128.140.52.151:5000/getshort/".concat(null===e||void 0===e?void 0:e._id),{method:"PATCH",headers:{"content-type":"application/json"},body:JSON.stringify(r)}).then((function(e){return e.json()})).then((function(e){console.log(e)}))},S=function(e){var t=e.download?e.download:0,n={download:parseInt(t)+1};fetch("http://128.140.52.151:5000/getshort/".concat(null===e||void 0===e?void 0:e._id),{method:"PATCH",headers:{"content-type":"application/json"},body:JSON.stringify(n)}).then((function(e){return e.json()})).then((function(e){console.log(e)}))},A=0,C=20;return(0,Me.jsxs)("div",{className:"w-10/12 lg:w-11/12 mx-auto mt-16 relative",children:[(0,Me.jsx)("h1",{className:"text-xl border-b-4 border-accent font-bold mt-8 inline-block",children:"\u09ae\u09c1\u09ab\u09a4\u09bf \u09b6\u09ab\u09bf \u09b8\u09be\u09b9\u09c7\u09ac (\u09a6\u09be\u0983 \u09ac\u09be\u0983)\u098f\u09b0 \u099b\u09cb\u099f \u09ac\u09df\u09be\u09a8 \u09b8\u09ae\u09c2\u09b9"}),(0,Me.jsx)("br",{}),(0,Me.jsx)("div",{className:"flex justify-center items-center my-4",children:(0,Me.jsxs)("div",{class:"form-control w-80",children:[(0,Me.jsx)("label",{class:"label",children:(0,Me.jsx)("span",{class:"label-text font-bold",children:"\u099b\u09cb\u099f \u09ac\u09df\u09be\u09a8\u09c7\u09b0 \u09a8\u09be\u09ae \u09b2\u09bf\u0996\u09c7 \u0985\u09a8\u09c1\u09b8\u09a8\u09cd\u09a7\u09be\u09a8 \u0995\u09b0\u09c1\u09a8"})}),(0,Me.jsx)("input",{onMouseDown:function(){x(A),E(C)},onChange:function(e){var t=e.target.value,n=r.filter((function(e){return e.name.includes(t)}));h(n),v(!0)},type:"text",placeholder:"\u099b\u09cb\u099f \u09ac\u09df\u09be\u09a8\u09c7\u09b0 \u09a8\u09be\u09ae \u09b2\u09bf\u0996\u09c1\u09a8",class:"input input-bordered input-accent w-full max-w-xs"})]})}),(0,Me.jsx)("hr",{}),(0,Me.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-5",children:p?d.slice(k,T).map((function(e){return(0,Me.jsxs)("div",{style:{height:"370px"},className:"shadow-xl bg-white hover:shadow-accent active:shadow-red-400 p-5 rounded-r-3xl rounded-tl-3xl text-left relative",children:[(0,Me.jsxs)("h3",{className:"text-lg font-bold min-h-8",children:["\u09ac\u09df\u09be\u09a8\u09c7\u09b0 \u09ac\u09bf\u09b7\u09df\u0983 ",e.name]}),(0,Me.jsxs)("h3",{className:"text-base",children:[(0,Me.jsx)("span",{className:"font-bold",children:"\u09a4\u09be\u09b0\u09bf\u0996\u0983"})," ",e.date,(0,Me.jsx)("span",{className:"font-bold",children:"  \u09ac\u09bf\u09ad\u09be\u0997\u0983"})," ",e.subject]}),(0,Me.jsx)("p",{className:"my-4",children:e.description}),(0,Me.jsxs)("div",{className:"flex flex-row",children:[(0,Me.jsx)(Ld,{className:"text-xs"}),(0,Me.jsx)("p",{className:"ml-px text-xs",children:null===e||void 0===e?void 0:e.view}),(0,Me.jsx)(Ct,{className:"text-xs ml-2"}),(0,Me.jsx)("p",{className:"ml-px text-xs",children:null===e||void 0===e?void 0:e.download})]}),(0,Me.jsxs)("div",{className:"mt-4 text-center absolute bottom-6 rounded-2xl left-12 shadow-2xl p-2",children:[(0,Me.jsx)("label",{onClick:function(){return _(e)},for:"my-modal-6",class:"btn btn-accent btn-circle text-white font-bold mr-12",children:"\u09b6\u09c1\u09a8\u09c1\u09a8"}),(0,Me.jsx)("label",{onClick:function(){return S(e)},for:"my-modal-6",class:"btn btn-accent text-white font-bold mr-2",children:(0,Me.jsx)("a",{href:e.link,children:"\u09a1\u09be\u0989\u09a8\u09b2\u09cb\u09a1"})})]})]})})):r.slice(k,T).map((function(e){return(0,Me.jsxs)("div",{style:{height:"370px"},className:"shadow-xl bg-white hover:shadow-accent active:shadow-red-400 p-5 rounded-r-3xl rounded-tl-3xl text-left relative",children:[(0,Me.jsxs)("h3",{className:"text-lg font-bold min-h-8",children:["\u09ac\u09df\u09be\u09a8\u09c7\u09b0 \u09ac\u09bf\u09b7\u09df\u0983 ",e.name]}),(0,Me.jsxs)("h3",{className:"text-base",children:[(0,Me.jsx)("span",{className:"font-bold",children:"\u09a4\u09be\u09b0\u09bf\u0996\u0983"})," ",e.date,(0,Me.jsx)("span",{className:"font-bold",children:"  \u09ac\u09bf\u09ad\u09be\u0997\u0983"})," ",e.subject]}),(0,Me.jsx)("p",{className:"my-4",children:e.description}),(0,Me.jsxs)("div",{className:"flex flex-row",children:[(0,Me.jsx)(Ld,{className:"text-xs"}),(0,Me.jsx)("p",{className:"ml-px text-xs",children:null===e||void 0===e?void 0:e.view}),(0,Me.jsx)(Ct,{className:"text-xs ml-2"}),(0,Me.jsx)("p",{className:"ml-px text-xs",children:null===e||void 0===e?void 0:e.download})]}),(0,Me.jsxs)("div",{className:"mt-4 text-center absolute bottom-6 rounded-2xl left-12 shadow-2xl p-2",children:[(0,Me.jsx)("label",{onClick:function(){return _(e)},for:"my-modal-6",class:"btn btn-accent btn-circle text-white font-bold mr-12",children:"\u09b6\u09c1\u09a8\u09c1\u09a8"}),(0,Me.jsx)("label",{onClick:function(){return S(e)},for:"my-modal-6",class:"btn btn-accent text-white font-bold mr-2",children:(0,Me.jsx)("a",{href:e.link,children:"\u09a1\u09be\u0989\u09a8\u09b2\u09cb\u09a1"})})]})]})}))}),(0,Me.jsx)("div",{className:"mt-8 mb-20",children:r.length>20&&(0,Me.jsx)(Be(),{previousLabel:"\u09aa\u09c2\u09b0\u09cd\u09ac\u09ac\u09b0\u09cd\u09a4\u09c0",nextLabel:"\u09aa\u09b0\u09ac\u09b0\u09cd\u09a4\u09c0",breakLabel:"...",pageCount:g,marginPagesDisplayed:3,pageRangeDisplayed:6,onPageChange:function(e){A=e.selected+1<3?A*e.selected+20:A*e.selected+20+20,e.selected+1<=1&&(A=0,C=20),C=C*e.selected+20,x(A),E(C),window.scrollTo(0,0)},containerClassName:"btn-group justify-center",pageClassName:"btn btn-accent text-white",activeClassName:"btn bg-white text-black",previousClassName:"btn btn-accent text-white",nextClassName:"btn btn-accent text-white",breakClassName:"btn btn-accent text-white"})})]})},zx=function(){var e=u((0,a.useState)(""),2),t=e[0],n=e[1],r=u((0,a.useState)(""),2),i=r[0],s=r[1];return(0,Me.jsxs)("div",{children:[(0,Me.jsx)("h1",{className:"text-3xl border-b-4 border-accent mt-28 inline-block",children:"\u098f\u0995\u099f\u09bf \u09a8\u09a4\u09c1\u09a8 \u09ac\u0987 \u09af\u09cb\u0997 \u0995\u09b0\u09c1\u09a8"}),(0,Me.jsxs)("form",{onSubmit:function(e){e.preventDefault();var n=e.target.name.value,r=e.target.writer.value,a=e.target.description.value,s="https://docs.google.com/uc?export=download&id=".concat(t),o="https://docs.google.com/uc?export=download&id=".concat(i),c={name:n,writer:r,link:s,img:o,description:a,mainCategory:"books"};fetch("http://128.140.52.151:5000/books",{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify(c)}).then((function(e){return e.json()})).then((function(t){Le.success("\u09ac\u0987 \u09af\u09cb\u0997 \u09b9\u09df\u09c7\u099b\u09c7"),console.log(t),e.target.reset(),function(){var e={app_id:"1daf2556-5bbc-44d3-956a-e56318d29698",included_segments:["Subscribed Users"],data:{foo:"bar"},contents:{en:"".concat(r," \u098f\u09b0 \u09b2\u09bf\u0996\u09bf\u09a4 \u09ac\u0987\u0983- ").concat(n,", \u09af\u09cb\u0997 \u09b9\u09df\u09c7\u099b\u09c7 \u098f\u0996\u09a8\u0987 \u09aa\u09dc\u09c1\u09a8")}};fetch("https://onesignal.com/api/v1/notifications",{method:"POST",url:"https://onesignal.com/api/v1",headers:{"Content-Type":"application/json",Authorization:"Basic ".concat("NDM0YjVhMDItYzI2MC00NTVmLWI5MjYtZmRiYWJhY2UyYzIz")},body:e?JSON.stringify(e):null}).then((function(e){return e.json()})).then((function(e){console.log(e)}))}()})),fetch("http://128.140.52.151:5000/latest",{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify(c)}).then((function(e){return e.json()})).then((function(e){console.log(e)}))},className:"mt-8 flex justify-center items-center flex-col",children:[(0,Me.jsxs)("div",{class:"form-control w-80",children:[(0,Me.jsx)("label",{class:"label",children:(0,Me.jsx)("span",{class:"label-text",children:"\u09aa\u09bf\u09a1\u09bf\u098f\u09ab \u09ab\u09be\u0987\u09b2"})}),(0,Me.jsx)("input",{type:"file",id:"customFile",placeholder:"\u09aa\u09bf\u09a1\u09bf\u098f\u09ab \u09ab\u09be\u0987\u09b2",onChange:function(e){return function(e){var t=e.target.files[0],r=new FileReader;r.readAsDataURL(e.target.files[0]),r.onload=function(e){var i={dataReq:{data:r.result.split(",")[1],name:t.name,type:t.type},fname:"uploadFilesToGoogleDrive"};fetch("https://script.google.com/macros/s/AKfycbwYKgy85mYgpiT7U3mV2T6vum0yKg_I-AAJegLuNfeosEO_HligOW_ic_M1mW8pUqk/exec",{method:"POST",body:JSON.stringify(i)}).then((function(e){return e.json()})).then((function(e){e.id&&(Le.success("\u09aa\u09bf\u09a1\u09bf\u098f\u09ab \u0986\u09aa\u09b2\u09cb\u09a1 \u09b9\u09df\u09c7\u099b\u09c7"),n(e.id))})).catch((function(e){return console.log(e)}))}}(e)}})]}),(0,Me.jsxs)("div",{class:"form-control w-80",children:[(0,Me.jsx)("label",{class:"label",children:(0,Me.jsx)("span",{class:"label-text",children:"\u09ac\u0987\u09df\u09c7\u09b0 \u0995\u09ad\u09be\u09b0\u09c7\u09b0 \u09ab\u09be\u0987\u09b2"})}),(0,Me.jsx)("input",{type:"file",id:"customFile",placeholder:"\u0995\u09ad\u09be\u09b0 \u09ab\u09be\u0987\u09b2",onChange:function(e){return function(e){var t=e.target.files[0],n=new FileReader;n.readAsDataURL(e.target.files[0]),n.onload=function(e){var r={dataReq:{data:n.result.split(",")[1],name:t.name,type:t.type},fname:"uploadFilesToGoogleDrive"};fetch("https://script.google.com/macros/s/AKfycbwYKgy85mYgpiT7U3mV2T6vum0yKg_I-AAJegLuNfeosEO_HligOW_ic_M1mW8pUqk/exec",{method:"POST",body:JSON.stringify(r)}).then((function(e){return e.json()})).then((function(e){e.id&&(Le.success("\u0995\u09ad\u09be\u09b0 \u0986\u09aa\u09b2\u09cb\u09a1 \u09b9\u09df\u09c7\u099b\u09c7"),s(e.id))})).catch((function(e){return console.log(e)}))}}(e)}})]}),(0,Me.jsxs)("div",{class:"form-control w-80",children:[(0,Me.jsx)("label",{class:"label",children:(0,Me.jsx)("span",{class:"label-text",children:"\u09ac\u0987\u09df\u09c7\u09b0 \u09a8\u09be\u09ae"})}),(0,Me.jsx)("input",{name:"name",type:"text",placeholder:"\u09ac\u0987\u09df\u09c7\u09b0 \u09a8\u09be\u09ae \u09b2\u09bf\u0996\u09c1\u09a8",class:"input input-bordered w-full max-w-xs"})]}),(0,Me.jsxs)("div",{class:"form-control w-80",children:[(0,Me.jsx)("label",{class:"label",children:(0,Me.jsx)("span",{class:"label-text",children:"\u09ac\u0987\u09df\u09c7\u09b0 \u09b2\u09c7\u0996\u0995"})}),(0,Me.jsx)("input",{name:"writer",type:"text",placeholder:"\u09ac\u0987\u09df\u09c7\u09b0 \u09b2\u09c7\u0996\u0995\u09c7\u09b0 \u09a8\u09be\u09ae \u09b2\u09bf\u0996\u09c1\u09a8",class:"input input-bordered w-full max-w-xs"})]}),(0,Me.jsxs)("div",{class:"form-control w-80",children:[(0,Me.jsx)("label",{class:"label",children:(0,Me.jsx)("span",{class:"label-text",children:"\u09ac\u09bf\u09ac\u09b0\u09a3"})}),(0,Me.jsx)("textarea",{name:"description",class:"textarea textarea-bordered",placeholder:"\u09ac\u09bf\u09ac\u09b0\u09a3 \u09b2\u09bf\u0996\u09c1\u09a8"})]}),(0,Me.jsx)("button",{disabled:!t&!i,className:"btn btn-md btn-accent text-white my-4 rounded-md",type:"submit",children:"\u09ac\u0987 \u09af\u09cb\u0997 \u0995\u09b0\u09c1\u09a8"})]})]})},Wx=function(e){var t=e.setAudioData,n=u((0,a.useState)([]),2),r=n[0],i=n[1],s=u((0,a.useState)(!0),2),o=s[0],c=s[1],l=u((0,a.useState)([]),2),d=l[0],h=l[1],f=u((0,a.useState)(!1),2),p=f[0],v=f[1],m=u((0,a.useState)(0),2),g=m[0],y=m[1],b=u((0,a.useState)(0),2),k=b[0],x=b[1],w=u((0,a.useState)(20),2),T=w[0],E=w[1];if((0,a.useEffect)((function(){fetch("http://128.140.52.151:5000/getrecitation").then((function(e){return e.json()})).then((function(e){y(Math.ceil(e.length/20))}))}),[]),(0,a.useEffect)((function(){fetch("http://128.140.52.151:5000/getrecitation").then((function(e){return e.json()})).then((function(e){i(e),c(!1)}))}),[]),o)return(0,Me.jsx)(je,{});var _=function(e){t(e);var n=e.view?e.view:0,r={view:parseInt(n)+1};fetch("http://128.140.52.151:5000/getkobita/".concat(null===e||void 0===e?void 0:e._id),{method:"PATCH",headers:{"content-type":"application/json"},body:JSON.stringify(r)}).then((function(e){return e.json()})).then((function(e){console.log(e)}))},S=function(e){var t=e.download?e.download:0,n={download:parseInt(t)+1};fetch("http://128.140.52.151:5000/getkobita/".concat(null===e||void 0===e?void 0:e._id),{method:"PATCH",headers:{"content-type":"application/json"},body:JSON.stringify(n)}).then((function(e){return e.json()})).then((function(e){console.log(e)}))},A=0,C=20;return(0,Me.jsxs)("div",{className:"w-10/12 lg:w-11/12 mx-auto mt-16 relative",children:[(0,Me.jsx)("h1",{className:"text-xl border-b-4 border-accent font-bold mt-8 inline-block",children:"\u09aa\u09ac\u09bf\u09a4\u09cd\u09b0 \u0995\u09c1\u09b0\u0986\u09a8 \u09aa\u09be\u0995\u09c7\u09b0 \u09a4\u09bf\u09b2\u0993\u09df\u09be\u09a4 \u09b8\u09ae\u09c2\u09b9"}),(0,Me.jsx)("br",{}),(0,Me.jsx)("div",{className:"flex justify-center items-center my-4",children:(0,Me.jsxs)("div",{class:"form-control w-80",children:[(0,Me.jsx)("label",{class:"label",children:(0,Me.jsx)("span",{class:"label-text font-bold",children:"\u09b8\u09c2\u09b0\u09be\u09b0 \u09a8\u09be\u09ae \u09b2\u09bf\u0996\u09c7 \u0985\u09a8\u09c1\u09b8\u09a8\u09cd\u09a7\u09be\u09a8 \u0995\u09b0\u09c1\u09a8"})}),(0,Me.jsx)("input",{onMouseDown:function(){x(A),E(C)},onChange:function(e){var t=e.target.value,n=r.filter((function(e){return e.name.includes(t)}));h(n),v(!0)},type:"text",placeholder:"\u09b8\u09c2\u09b0\u09be\u09b0 \u09a8\u09be\u09ae \u09b2\u09bf\u0996\u09c1\u09a8",class:"input input-bordered input-accent w-full max-w-xs"})]})}),(0,Me.jsx)("hr",{}),(0,Me.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-5",children:p?d.slice(k,T).map((function(e){return(0,Me.jsxs)("div",{style:{height:"200px"},className:"shadow-xl bg-white hover:shadow-accent active:shadow-red-400 p-5 rounded-r-3xl rounded-tl-3xl text-left relative",children:[(0,Me.jsxs)("h3",{className:"text-lg font-bold min-h-8",children:["\u09a8\u09be\u09ae\u0983 ",null===e||void 0===e?void 0:e.name]}),(0,Me.jsxs)("h3",{className:"text-base",children:[(0,Me.jsx)("span",{className:"font-bold",children:"  \u0995\u09a3\u09cd\u09a0\u0983"})," ",e.reciter]}),(0,Me.jsxs)("div",{className:"flex flex-row",children:[(0,Me.jsx)(Ld,{className:"text-xs"}),(0,Me.jsx)("p",{className:"ml-px text-xs",children:null===e||void 0===e?void 0:e.view}),(0,Me.jsx)(Ct,{className:"text-xs ml-2"}),(0,Me.jsx)("p",{className:"ml-px text-xs",children:null===e||void 0===e?void 0:e.download})]}),(0,Me.jsxs)("div",{className:"mt-4 text-center absolute bottom-4 rounded-2xl left-12 shadow-2xl p-2",children:[(0,Me.jsx)("label",{onClick:function(){return _(e)},for:"my-modal-6",class:"btn btn-accent btn-circle text-white font-bold mr-12",children:"\u09b6\u09c1\u09a8\u09c1\u09a8"}),(0,Me.jsx)("label",{onClick:function(){return S(e)},for:"my-modal-6",class:"btn btn-accent text-white font-bold mr-2",children:(0,Me.jsx)("a",{href:e.link,children:"\u09a1\u09be\u0989\u09a8\u09b2\u09cb\u09a1"})})]})]})})):r.slice(k,T).map((function(e){return(0,Me.jsxs)("div",{style:{height:"200px"},className:"shadow-xl bg-white hover:shadow-accent active:shadow-red-400 p-5 rounded-r-3xl rounded-tl-3xl text-left relative",children:[(0,Me.jsxs)("h3",{className:"text-lg font-bold min-h-8",children:["\u09a8\u09be\u09ae\u0983 ",null===e||void 0===e?void 0:e.name]}),(0,Me.jsxs)("h3",{className:"text-base",children:[(0,Me.jsx)("span",{className:"font-bold",children:"  \u0995\u09a3\u09cd\u09a0\u0983"})," ",e.reciter]}),(0,Me.jsxs)("div",{className:"flex flex-row",children:[(0,Me.jsx)(Ld,{className:"text-xs"}),(0,Me.jsx)("p",{className:"ml-px text-xs",children:null===e||void 0===e?void 0:e.view}),(0,Me.jsx)(Ct,{className:"text-xs ml-2"}),(0,Me.jsx)("p",{className:"ml-px text-xs",children:null===e||void 0===e?void 0:e.download})]}),(0,Me.jsxs)("div",{className:"mt-4 text-center absolute bottom-4 rounded-2xl left-12 shadow-2xl p-2",children:[(0,Me.jsx)("label",{onClick:function(){return _(e)},for:"my-modal-6",class:"btn btn-accent btn-circle text-white font-bold mr-12",children:"\u09b6\u09c1\u09a8\u09c1\u09a8"}),(0,Me.jsx)("label",{onClick:function(){return S(e)},for:"my-modal-6",class:"btn btn-accent text-white font-bold mr-2",children:(0,Me.jsx)("a",{href:e.link,children:"\u09a1\u09be\u0989\u09a8\u09b2\u09cb\u09a1"})})]})]})}))}),(0,Me.jsx)("div",{className:"mt-8 mb-20",children:r.length>20&&(0,Me.jsx)(Be(),{previousLabel:"\u09aa\u09c2\u09b0\u09cd\u09ac\u09ac\u09b0\u09cd\u09a4\u09c0",nextLabel:"\u09aa\u09b0\u09ac\u09b0\u09cd\u09a4\u09c0",breakLabel:"...",pageCount:g,marginPagesDisplayed:3,pageRangeDisplayed:6,onPageChange:function(e){A=e.selected+1<3?A*e.selected+20:A*e.selected+20+20,e.selected+1<=1&&(A=0,C=20),C=C*e.selected+20,x(A),E(C),window.scrollTo(0,0)},containerClassName:"btn-group justify-center",pageClassName:"btn btn-accent text-white",activeClassName:"btn bg-white text-black",previousClassName:"btn btn-accent text-white",nextClassName:"btn btn-accent text-white",breakClassName:"btn btn-accent text-white"})})]})},Kx=__webpack_require__(724),qx=__webpack_require__.n(Kx);var Yx=function(){var e=u((0,a.useState)(),2),t=e[0],n=e[1];return(0,a.useEffect)((function(){zb().init({duration:300})}),[]),(0,Me.jsxs)("div",{className:"App bg-gray-100",children:[(0,Me.jsx)(su,{}),t?(0,Me.jsx)("div",{className:"fixed top-28 right-px z-50",children:(0,Me.jsx)("label",{for:"my-modal-6",className:"btn btn-square btn-accent text-white",children:(0,Me.jsx)("img",{src:ou,alt:""})})}):"",(0,Me.jsxs)(q,{children:[(0,Me.jsx)(W,{path:"/",element:(0,Me.jsx)(pt,{setAudioData:n})}),(0,Me.jsx)(W,{path:"/login",element:(0,Me.jsx)(jx,{setAudioData:n})}),(0,Me.jsx)(W,{path:"/boyans",element:(0,Me.jsx)(Ve,{setAudioData:n})}),(0,Me.jsx)(W,{path:"/answers",element:(0,Me.jsx)(Ge,{setAudioData:n})}),(0,Me.jsx)(W,{path:"/history",element:(0,Me.jsx)(lt,{})}),(0,Me.jsx)(W,{path:"/live",element:(0,Me.jsx)(vt,{})}),(0,Me.jsx)(W,{path:"/notice",element:(0,Me.jsx)(dt,{})}),(0,Me.jsx)(W,{path:"/mobile",element:(0,Me.jsx)(Od,{})}),(0,Me.jsx)(W,{path:"/mobile_boyans",element:(0,Me.jsx)(Fd,{setAudioData:n})}),(0,Me.jsx)(W,{path:"/mobile_answers",element:(0,Me.jsx)(Ud,{setAudioData:n})}),(0,Me.jsx)(W,{path:"/shorts",element:(0,Me.jsx)(Hx,{setAudioData:n})}),(0,Me.jsx)(W,{path:"/answer_category",element:(0,Me.jsx)(Gx,{setAudioData:n})}),(0,Me.jsx)(W,{path:"/mobile_kobita",element:(0,Me.jsx)(Bd,{setAudioData:n})}),(0,Me.jsx)(W,{path:"/quran_recitation",element:(0,Me.jsx)(Wx,{setAudioData:n})}),(0,Me.jsx)(W,{path:"/mobile_live",element:(0,Me.jsx)(Rb,{setAudioData:n})}),(0,Me.jsx)(W,{path:"/app_details",element:(0,Me.jsx)(Pb,{setAudioData:n})}),(0,Me.jsx)(W,{path:"/mobile_quran",element:(0,Me.jsx)(Gb,{setAudioData:n})}),(0,Me.jsx)(W,{path:"/prayer_times",element:(0,Me.jsx)($b,{setAudioData:n})}),(0,Me.jsx)(W,{path:"/books",element:(0,Me.jsx)(ek,{setAudioData:n})}),(0,Me.jsx)(W,{path:"/boyan_category",element:(0,Me.jsx)(Wb,{setAudioData:n})}),(0,Me.jsx)(W,{path:"/boyan_subject",element:(0,Me.jsx)(Kb,{setAudioData:n})}),(0,Me.jsx)(W,{path:"/boyan_month",element:(0,Me.jsx)(Bx,{setAudioData:n})}),(0,Me.jsx)(W,{path:"/mobile_quran/:surahId",element:(0,Me.jsx)(Vb,{setAudioData:n})}),(0,Me.jsx)(W,{path:"/new_topics",element:(0,Me.jsx)(jb,{setAudioData:n})}),(0,Me.jsx)(W,{path:"/mobile_notice",element:(0,Me.jsx)(Ub,{setAudioData:n})}),(0,Me.jsx)(W,{path:"/register",element:(0,Me.jsx)(Bb,{setAudioData:n})}),(0,Me.jsx)(W,{path:"/livestreaming",element:(0,Me.jsx)(qx(),{setAudioData:n})})]}),(0,Me.jsx)(q,{children:(0,Me.jsxs)(W,{path:"/dashboard",element:(0,Me.jsx)(Fx,{children:(0,Me.jsx)($e,{})}),children:[(0,Me.jsx)(W,{index:!0,element:(0,Me.jsx)(Ze,{})}),(0,Me.jsx)(W,{path:"addcategory",element:(0,Me.jsx)(ze,{})}),(0,Me.jsx)(W,{path:"add_qa_category",element:(0,Me.jsx)(Ke,{})}),(0,Me.jsx)(W,{path:"addaudio",element:(0,Me.jsx)(He,{})}),(0,Me.jsx)(W,{path:"add_qa_audio",element:(0,Me.jsx)(We,{})}),(0,Me.jsx)(W,{path:"add_kobita_audio",element:(0,Me.jsx)(Yb,{})}),(0,Me.jsx)(W,{path:"add_short_audio",element:(0,Me.jsx)(Vx,{})}),(0,Me.jsx)(W,{path:"add_books",element:(0,Me.jsx)(zx,{})}),(0,Me.jsx)(W,{path:"add_notice",element:(0,Me.jsx)(Ux,{})}),(0,Me.jsx)(W,{path:"addsubject",element:(0,Me.jsx)(qb,{})}),(0,Me.jsx)(W,{path:"boyan_list",element:(0,Me.jsx)(Rx,{})}),(0,Me.jsx)(W,{path:"qa_list",element:(0,Me.jsx)(Nx,{})}),(0,Me.jsx)(W,{path:"kobita_list",element:(0,Me.jsx)(Mx,{})})]})}),(0,Me.jsx)(Mt,{}),(0,Me.jsx)(mt,{audioData:t}),(0,Me.jsx)(_e,{})]})},Jx=function(e){e&&e instanceof Function&&__webpack_require__.e(787).then(__webpack_require__.bind(__webpack_require__,787)).then((function(t){var n=t.getCLS,r=t.getFID,i=t.getFCP,a=t.getLCP,s=t.getTTFB;n(e),r(e),i(e),a(e),s(e)}))},Qx=function(e){var t,n=fd(),r=e||{},i=r.reducer,a=void 0===i?void 0:i,s=r.middleware,o=void 0===s?n():s,c=r.devTools,u=void 0===c||c,l=r.preloadedState,d=void 0===l?void 0:l,h=r.enhancers,f=void 0===h?void 0:h;if("function"===typeof a)t=a;else{if(!ld(a))throw new Error('"reducer" is a required argument, and must be a function or an object of functions that can be passed to combineReducers');t=zl(a)}var p=o;"function"===typeof p&&(p=p(n));var v=Kl.apply(void 0,p),m=Wl;u&&(m=ud(sd({trace:!1},"object"===typeof u&&u)));var g=[v];return Array.isArray(f)?g=Zl([v],f):"function"===typeof f&&(g=f(g)),Hl(t,d,m.apply(void 0,g))}({reducer:{boyan:Nd}}),Xx=Qx;s.createRoot(document.getElementById("root")).render((0,Me.jsx)(Qe,{children:(0,Me.jsx)(a.StrictMode,{children:(0,Me.jsx)(Du,{store:Xx,children:(0,Me.jsx)(Cb,{children:(0,Me.jsx)(Yx,{})})})})})),Jx()}()})();
//# sourceMappingURL=main.6b3ab8de.js.map